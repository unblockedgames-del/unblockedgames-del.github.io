<!DOCTYPE html><html><head><base href="https://gnhustgames.github.io/base-defense/"><meta charset="utf-8"><meta name="download_date" content="2025-01-14T23:33:36.516Z"/>
	 <!-- Google tag (gtag.js) -->
    <script id="gamedistribution-jssdk">/*
 * Project: @gamedistribution.com/html5-sdk
 * Description: GameDistribution.com HTML5 SDK
 * Development By: GameDistribution.com
 * Copyright(c): 2023
 * Version: 1.35.17 (15-09-2023 14:25)
 */
! function n(o, i, a) {
    function s(t, e) {
        if (!i[t]) {
            if (!o[t]) {
                var r = "function" == typeof require && require;
                if (!e && r) return r(t, !0);
                if (u) return u(t, !0);
                throw (e = new Error("Cannot find module '" + t + "'")).code = "MODULE_NOT_FOUND", e
            }
            r = i[t] = {
                exports: {}
            }, o[t][0].call(r.exports, function(e) {
                return s(o[t][1][e] || e)
            }, r, r.exports, n, o, i, a)
        }
        return i[t].exports
    }
    for (var u = "function" == typeof require && require, e = 0; e < a.length; e++) s(a[e]);
    return s
}({
    1: [function(e, t, r) {
        ! function(i3, a3, s3) {
            ! function() {
                ! function() {
                    "use strict";

                    function j(e, t, r, n, o, i, a) {
                        try {
                            var s = e[i](a),
                                u = s.value
                        } catch (e) {
                            return r(e)
                        }
                        s.done ? t(u) : Promise.resolve(u).then(n, o)
                    }

                    function d(s) {
                        return function() {
                            var e = this,
                                a = arguments;
                            return new Promise(function(t, r) {
                                var n = s.apply(e, a);

                                function o(e) {
                                    j(n, t, r, o, i, "next", e)
                                }

                                function i(e) {
                                    j(n, t, r, o, i, "throw", e)
                                }
                                o(void 0)
                            })
                        }
                    }

                    function O(e, t) {
                        if (e !== t) throw new TypeError("Cannot instantiate an arrow function")
                    }

                    function U(e) {
                        return (U = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    var $ = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : void 0 !== a3 ? a3 : "undefined" != typeof self ? self : {};
                    var B, N, F, e = {
                            exports: {}
                        },
                        t = {
                            exports: {}
                        };

                    function G() {
                        B.exports = function() {
                            return a
                        }, B.exports.__esModule = !0, B.exports.default = B.exports;
                        var a = {},
                            e = Object.prototype,
                            u = e.hasOwnProperty,
                            o = Object.defineProperty || function(e, t, r) {
                                e[t] = r.value
                            },
                            t = "function" == typeof Symbol ? Symbol : {},
                            n = t.iterator || "@@iterator",
                            r = t.asyncIterator || "@@asyncIterator",
                            i = t.toStringTag || "@@toStringTag";

                        function s(e, t, r) {
                            return Object.defineProperty(e, t, {
                                value: r,
                                enumerable: !0,
                                configurable: !0,
                                writable: !0
                            }), e[t]
                        }
                        try {
                            s({}, "")
                        } catch (e) {
                            s = function(e, t, r) {
                                return e[t] = r
                            }
                        }

                        function c(e, t, r, n) {
                            t = t && t.prototype instanceof f ? t : f, t = Object.create(t.prototype), n = new w(n || []);
                            return o(t, "_invoke", {
                                value: function e(n, o, i) {
                                    var a = "suspendedStart";
                                    return function(e, t) {
                                        if ("executing" === a) throw new Error("Generator is already running");
                                        if ("completed" === a) {
                                            if ("throw" === e) throw t;
                                            return x()
                                        }
                                        for (i.method = e, i.arg = t;;) {
                                            var r = i.delegate;
                                            if (r) {
                                                r = function e(t, r) {
                                                    var n = r.method,
                                                        o = t.iterator[n];
                                                    if (void 0 === o) return r.delegate = null, "throw" === n && t.iterator.return && (r.method = "return", r.arg = void 0, e(t, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), d;
                                                    n = l(o, t.iterator, r.arg);
                                                    if ("throw" === n.type) return r.method = "throw", r.arg = n.arg, r.delegate = null, d;
                                                    o = n.arg;
                                                    return o ? o.done ? (r[t.resultName] = o.value, r.next = t.nextLoc, "return" !== r.method && (r.method = "next", r.arg = void 0), r.delegate = null, d) : o : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, d)
                                                }(r, i);
                                                if (r) {
                                                    if (r === d) continue;
                                                    return r
                                                }
                                            }
                                            if ("next" === i.method) i.sent = i._sent = i.arg;
                                            else if ("throw" === i.method) {
                                                if ("suspendedStart" === a) throw a = "completed", i.arg;
                                                i.dispatchException(i.arg)
                                            } else "return" === i.method && i.abrupt("return", i.arg);
                                            a = "executing";
                                            r = l(n, o, i);
                                            if ("normal" === r.type) {
                                                if (a = i.done ? "completed" : "suspendedYield", r.arg === d) continue;
                                                return {
                                                    value: r.arg,
                                                    done: i.done
                                                }
                                            }
                                            "throw" === r.type && (a = "completed", i.method = "throw", i.arg = r.arg)
                                        }
                                    }
                                }(e, r, n)
                            }), t
                        }

                        function l(e, t, r) {
                            try {
                                return {
                                    type: "normal",
                                    arg: e.call(t, r)
                                }
                            } catch (e) {
                                return {
                                    type: "throw",
                                    arg: e
                                }
                            }
                        }
                        a.wrap = c;
                        var d = {};

                        function f() {}

                        function p() {}

                        function h() {}
                        var t = {},
                            m = (s(t, n, function() {
                                return this
                            }), Object.getPrototypeOf),
                            m = m && m(m(A([]))),
                            g = (m && m !== e && u.call(m, n) && (t = m), h.prototype = f.prototype = Object.create(t));

                        function v(e) {
                            ["next", "throw", "return"].forEach(function(t) {
                                s(e, t, function(e) {
                                    return this._invoke(t, e)
                                })
                            })
                        }

                        function b(a, s) {
                            var t;
                            o(this, "_invoke", {
                                value: function(r, n) {
                                    function e() {
                                        return new s(function(e, t) {
                                            ! function t(e, r, n, o) {
                                                var i, e = l(a[e], a, r);
                                                if ("throw" !== e.type) return (r = (i = e.arg).value) && "object" == N(r) && u.call(r, "__await") ? s.resolve(r.__await).then(function(e) {
                                                    t("next", e, n, o)
                                                }, function(e) {
                                                    t("throw", e, n, o)
                                                }) : s.resolve(r).then(function(e) {
                                                    i.value = e, n(i)
                                                }, function(e) {
                                                    return t("throw", e, n, o)
                                                });
                                                o(e.arg)
                                            }(r, n, e, t)
                                        })
                                    }
                                    return t = t ? t.then(e, e) : e()
                                }
                            })
                        }

                        function y(e) {
                            var t = {
                                tryLoc: e[0]
                            };
                            1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t)
                        }

                        function _(e) {
                            var t = e.completion || {};
                            t.type = "normal", delete t.arg, e.completion = t
                        }

                        function w(e) {
                            this.tryEntries = [{
                                tryLoc: "root"
                            }], e.forEach(y, this), this.reset(!0)
                        }

                        function A(t) {
                            if (t) {
                                var r, e = t[n];
                                if (e) return e.call(t);
                                if ("function" == typeof t.next) return t;
                                if (!isNaN(t.length)) return r = -1, (e = function e() {
                                    for (; ++r < t.length;)
                                        if (u.call(t, r)) return e.value = t[r], e.done = !1, e;
                                    return e.value = void 0, e.done = !0, e
                                }).next = e
                            }
                            return {
                                next: x
                            }
                        }

                        function x() {
                            return {
                                value: void 0,
                                done: !0
                            }
                        }
                        return o(g, "constructor", {
                            value: p.prototype = h,
                            configurable: !0
                        }), o(h, "constructor", {
                            value: p,
                            configurable: !0
                        }), p.displayName = s(h, i, "GeneratorFunction"), a.isGeneratorFunction = function(e) {
                            e = "function" == typeof e && e.constructor;
                            return !!e && (e === p || "GeneratorFunction" === (e.displayName || e.name))
                        }, a.mark = function(e) {
                            return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h, s(e, i, "GeneratorFunction")), e.prototype = Object.create(g), e
                        }, a.awrap = function(e) {
                            return {
                                __await: e
                            }
                        }, v(b.prototype), s(b.prototype, r, function() {
                            return this
                        }), a.AsyncIterator = b, a.async = function(e, t, r, n, o) {
                            void 0 === o && (o = Promise);
                            var i = new b(c(e, t, r, n), o);
                            return a.isGeneratorFunction(t) ? i : i.next().then(function(e) {
                                return e.done ? e.value : i.next()
                            })
                        }, v(g), s(g, i, "Generator"), s(g, n, function() {
                            return this
                        }), s(g, "toString", function() {
                            return "[object Generator]"
                        }), a.keys = function(e) {
                            var t, r = Object(e),
                                n = [];
                            for (t in r) n.push(t);
                            return n.reverse(),
                                function e() {
                                    for (; n.length;) {
                                        var t = n.pop();
                                        if (t in r) return e.value = t, e.done = !1, e
                                    }
                                    return e.done = !0, e
                                }
                        }, a.values = A, w.prototype = {
                            constructor: w,
                            reset: function(e) {
                                if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(_), !e)
                                    for (var t in this) "t" === t.charAt(0) && u.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                            },
                            stop: function() {
                                this.done = !0;
                                var e = this.tryEntries[0].completion;
                                if ("throw" === e.type) throw e.arg;
                                return this.rval
                            },
                            dispatchException: function(r) {
                                if (this.done) throw r;
                                var n = this;

                                function e(e, t) {
                                    return i.type = "throw", i.arg = r, n.next = e, t && (n.method = "next", n.arg = void 0), !!t
                                }
                                for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                                    var o = this.tryEntries[t],
                                        i = o.completion;
                                    if ("root" === o.tryLoc) return e("end");
                                    if (o.tryLoc <= this.prev) {
                                        var a = u.call(o, "catchLoc"),
                                            s = u.call(o, "finallyLoc");
                                        if (a && s) {
                                            if (this.prev < o.catchLoc) return e(o.catchLoc, !0);
                                            if (this.prev < o.finallyLoc) return e(o.finallyLoc)
                                        } else if (a) {
                                            if (this.prev < o.catchLoc) return e(o.catchLoc, !0)
                                        } else {
                                            if (!s) throw new Error("try statement without catch or finally");
                                            if (this.prev < o.finallyLoc) return e(o.finallyLoc)
                                        }
                                    }
                                }
                            },
                            abrupt: function(e, t) {
                                for (var r = this.tryEntries.length - 1; 0 <= r; --r) {
                                    var n = this.tryEntries[r];
                                    if (n.tryLoc <= this.prev && u.call(n, "finallyLoc") && this.prev < n.finallyLoc) {
                                        var o = n;
                                        break
                                    }
                                }
                                var i = (o = o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc ? null : o) ? o.completion : {};
                                return i.type = e, i.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, d) : this.complete(i)
                            },
                            complete: function(e, t) {
                                if ("throw" === e.type) throw e.arg;
                                return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), d
                            },
                            finish: function(e) {
                                for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                                    var r = this.tryEntries[t];
                                    if (r.finallyLoc === e) return this.complete(r.completion, r.afterLoc), _(r), d
                                }
                            },
                            catch: function(e) {
                                for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                                    var r, n, o = this.tryEntries[t];
                                    if (o.tryLoc === e) return "throw" === (r = o.completion).type && (n = r.arg, _(o)), n
                                }
                                throw new Error("illegal catch attempt")
                            },
                            delegateYield: function(e, t, r) {
                                return this.delegate = {
                                    iterator: A(e),
                                    resultName: t,
                                    nextLoc: r
                                }, "next" === this.method && (this.arg = void 0), d
                            }
                        }, a
                    }

                    function z(e) {
                        return F.exports = z = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        }, F.exports.__esModule = !0, F.exports.default = F.exports, z(e)
                    }(F = t).exports = z, F.exports.__esModule = !0, F.exports.default = F.exports, B = e, N = t.exports.default, B.exports = G, B.exports.__esModule = !0, B.exports.default = B.exports;
                    var t = e.exports(),
                        I = t;
                    try {
                        regeneratorRuntime = t
                    } catch (j) {
                        "object" == typeof globalThis ? globalThis.regeneratorRuntime = t : Function("r", "regeneratorRuntime = r")(t)
                    }
                    var H = {},
                        Z = Object.prototype.hasOwnProperty;

                    function K(e) {
                        try {
                            return decodeURIComponent(e.replace(/\+/g, " "))
                        } catch (e) {
                            return null
                        }
                    }

                    function q(e) {
                        try {
                            return encodeURIComponent(e)
                        } catch (e) {
                            return null
                        }
                    }
                    H.stringify = function(e, t) {
                        var r, n, o = [];
                        for (n in "string" != typeof(t = t || "") && (t = "?"), e)
                            if (Z.call(e, n)) {
                                if ((r = e[n]) || null != r && !isNaN(r) || (r = ""), n = q(n), r = q(r), null === n || null === r) continue;
                                o.push(n + "=" + r)
                            }
                        return o.length ? t + o.join("&") : ""
                    }, H.parse = function(e) {
                        for (var t = /([^=?#&]+)=?([^&]*)/g, r = {}; o = t.exec(e);) {
                            var n = K(o[1]),
                                o = K(o[2]);
                            null === n || null === o || n in r || (r[n] = o)
                        }
                        return r
                    };

                    function W(e, t) {
                        if (t = t.split(":")[0], e = +e) {
                            switch (t) {
                                case "http":
                                case "ws":
                                    return 80 !== e;
                                case "https":
                                case "wss":
                                    return 443 !== e;
                                case "ftp":
                                    return 21 !== e;
                                case "gopher":
                                    return 70 !== e;
                                case "file":
                                    return
                            }
                            return 0 !== e
                        }
                    }
                    var V = H,
                        Y = /^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,
                        J = /[\n\r\t]/g,
                        X = /^[A-Za-z][A-Za-z0-9+-.]*:\/\//,
                        Q = /:\d+$/,
                        ee = /^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,
                        te = /^[a-zA-Z]:/;

                    function re(e) {
                        return (e || "").toString().replace(Y, "")
                    }
                    var ne = [
                            ["#", "hash"],
                            ["?", "query"],
                            function(e, t) {
                                return ae(t.protocol) ? e.replace(/\\/g, "/") : e
                            },
                            ["/", "pathname"],
                            ["@", "auth", 1],
                            [NaN, "host", void 0, 1, 1],
                            [/:(\d*)$/, "port", void 0, 1],
                            [NaN, "hostname", void 0, 1, 1]
                        ],
                        oe = {
                            hash: 1,
                            query: 1
                        };

                    function ie(e) {
                        var t, r = ("undefined" != typeof window ? window : void 0 !== $ ? $ : "undefined" != typeof self ? self : {}).location || {},
                            n = {},
                            r = typeof(e = e || r);
                        if ("blob:" === e.protocol) n = new ue(unescape(e.pathname), {});
                        else if ("string" == r)
                            for (t in n = new ue(e, {}), oe) delete n[t];
                        else if ("object" == r) {
                            for (t in e) t in oe || (n[t] = e[t]);
                            void 0 === n.slashes && (n.slashes = X.test(e.href))
                        }
                        return n
                    }

                    function ae(e) {
                        return "file:" === e || "ftp:" === e || "http:" === e || "https:" === e || "ws:" === e || "wss:" === e
                    }

                    function se(e, t) {
                        e = (e = re(e)).replace(J, ""), t = t || {};
                        var r, e = ee.exec(e),
                            n = e[1] ? e[1].toLowerCase() : "",
                            o = !!e[2],
                            i = !!e[3],
                            a = 0;
                        return o ? a = i ? (r = e[2] + e[3] + e[4], e[2].length + e[3].length) : (r = e[2] + e[4], e[2].length) : i ? (r = e[3] + e[4], a = e[3].length) : r = e[4], "file:" === n ? 2 <= a && (r = r.slice(2)) : ae(n) ? r = e[4] : n ? o && (r = r.slice(2)) : 2 <= a && ae(t.protocol) && (r = e[4]), {
                            protocol: n,
                            slashes: o || ae(n),
                            slashesCount: a,
                            rest: r
                        }
                    }

                    function ue(e, t, r) {
                        if (e = (e = re(e)).replace(J, ""), !(this instanceof ue)) return new ue(e, t, r);
                        var n, o, i, a, s, u = ne.slice(),
                            c = typeof t,
                            l = this,
                            d = 0;
                        for ("object" != c && "string" != c && (r = t, t = null), r && "function" != typeof r && (r = V.parse), n = !(c = se(e || "", t = ie(t))).protocol && !c.slashes, l.slashes = c.slashes || n && t.slashes, l.protocol = c.protocol || t.protocol || "", e = c.rest, ("file:" === c.protocol && (2 !== c.slashesCount || te.test(e)) || !c.slashes && (c.protocol || c.slashesCount < 2 || !ae(l.protocol))) && (u[3] = [/(.*)/, "pathname"]); d < u.length; d++) "function" != typeof(i = u[d]) ? (o = i[0], s = i[1], o != o ? l[s] = e : "string" == typeof o ? ~(a = "@" === o ? e.lastIndexOf(o) : e.indexOf(o)) && (e = "number" == typeof i[2] ? (l[s] = e.slice(0, a), e.slice(a + i[2])) : (l[s] = e.slice(a), e.slice(0, a))) : (a = o.exec(e)) && (l[s] = a[1], e = e.slice(0, a.index)), l[s] = l[s] || n && i[3] && t[s] || "", i[4] && (l[s] = l[s].toLowerCase())) : e = i(e, l);
                        r && (l.query = r(l.query)), n && t.slashes && "/" !== l.pathname.charAt(0) && ("" !== l.pathname || "" !== t.pathname) && (l.pathname = function(e, t) {
                            if ("" === e) return t;
                            for (var r = (t || "/").split("/").slice(0, -1).concat(e.split("/")), n = r.length, t = r[n - 1], o = !1, i = 0; n--;) "." === r[n] ? r.splice(n, 1) : ".." === r[n] ? (r.splice(n, 1), i++) : i && (0 === n && (o = !0), r.splice(n, 1), i--);
                            return o && r.unshift(""), "." !== t && ".." !== t || r.push(""), r.join("/")
                        }(l.pathname, t.pathname)), "/" !== l.pathname.charAt(0) && ae(l.protocol) && (l.pathname = "/" + l.pathname), W(l.port, l.protocol) || (l.host = l.hostname, l.port = ""), l.username = l.password = "", l.auth && (~(a = l.auth.indexOf(":")) ? (l.username = l.auth.slice(0, a), l.username = encodeURIComponent(decodeURIComponent(l.username)), l.password = l.auth.slice(a + 1), l.password = encodeURIComponent(decodeURIComponent(l.password))) : l.username = encodeURIComponent(decodeURIComponent(l.auth)), l.auth = l.password ? l.username + ":" + l.password : l.username), l.origin = "file:" !== l.protocol && ae(l.protocol) && l.host ? l.protocol + "//" + l.host : "null", l.href = l.toString()
                    }
                    ue.prototype = {
                        set: function(e, t, r) {
                            var n = this;
                            switch (e) {
                                case "query":
                                    "string" == typeof t && t.length && (t = (r || V.parse)(t)), n[e] = t;
                                    break;
                                case "port":
                                    n[e] = t, W(t, n.protocol) ? t && (n.host = n.hostname + ":" + t) : (n.host = n.hostname, n[e] = "");
                                    break;
                                case "hostname":
                                    n[e] = t, n.port && (t += ":" + n.port), n.host = t;
                                    break;
                                case "host":
                                    n[e] = t, Q.test(t) ? (t = t.split(":"), n.port = t.pop(), n.hostname = t.join(":")) : (n.hostname = t, n.port = "");
                                    break;
                                case "protocol":
                                    n.protocol = t.toLowerCase(), n.slashes = !r;
                                    break;
                                case "pathname":
                                case "hash":
                                    t ? (o = "pathname" === e ? "/" : "#", n[e] = t.charAt(0) !== o ? o + t : t) : n[e] = t;
                                    break;
                                case "username":
                                case "password":
                                    n[e] = encodeURIComponent(t);
                                    break;
                                case "auth":
                                    var o = t.indexOf(":");
                                    ~o ? (n.username = t.slice(0, o), n.username = encodeURIComponent(decodeURIComponent(n.username)), n.password = t.slice(o + 1), n.password = encodeURIComponent(decodeURIComponent(n.password))) : n.username = encodeURIComponent(decodeURIComponent(t))
                            }
                            for (var i = 0; i < ne.length; i++) {
                                var a = ne[i];
                                a[4] && (n[a[1]] = n[a[1]].toLowerCase())
                            }
                            return n.auth = n.password ? n.username + ":" + n.password : n.username, n.origin = "file:" !== n.protocol && ae(n.protocol) && n.host ? n.protocol + "//" + n.host : "null", n.href = n.toString(), n
                        },
                        toString: function(e) {
                            e && "function" == typeof e || (e = V.stringify);
                            var t = this,
                                r = t.host,
                                n = t.protocol,
                                n = (n && ":" !== n.charAt(n.length - 1) && (n += ":"), n + (t.protocol && t.slashes || ae(t.protocol) ? "//" : ""));
                            return t.username ? (n += t.username, t.password && (n += ":" + t.password), n += "@") : t.password ? n = n + (":" + t.password) + "@" : "file:" !== t.protocol && ae(t.protocol) && !r && "/" !== t.pathname && (n += "@"), (":" === r[r.length - 1] || Q.test(t.hostname) && !t.port) && (r += ":"), n += r + t.pathname, (r = "object" == typeof t.query ? e(t.query) : t.query) && (n += "?" !== r.charAt(0) ? "?" + r : r), t.hash && (n += t.hash), n
                        }
                    }, ue.extractProtocol = se, ue.location = ie, ue.trimLeft = re, ue.qs = V;
                    var ce = ue;

                    function le(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }

                    function de(e) {
                        e = function(e) {
                            if ("object" !== U(e) || null === e) return e;
                            var t = e[Symbol.toPrimitive];
                            if (void 0 === t) return String(e);
                            t = t.call(e, "string");
                            if ("object" !== U(t)) return t;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }(e);
                        return "symbol" === U(e) ? e : String(e)
                    }

                    function fe(e, t) {
                        for (var r = 0; r < t.length; r++) {
                            var n = t[r];
                            n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, de(n.key), n)
                        }
                    }

                    function pe(e, t, r) {
                        return t && fe(e.prototype, t), r && fe(e, r), Object.defineProperty(e, "prototype", {
                            writable: !1
                        }), e
                    }
                    var he, me, ge, ve, be, ye, _e, we, Ae, xe, ke, Ee, Se, Re, De, Te, Oe, Ie, Ce, Le, Me, Pe, je, Ue, $e, Be, Ne, Fe, Ge, ze, He, Ze, Ke, qe, We, Ve, Ye, Je, Xe, Qe, et, tt, rt, nt, ot, it, at, st, ut, ct, lt, dt, ft, pt, ht, e = {
                        exports: {}
                    };

                    function mt(e, t) {
                        return e.set(t[0], t[1]), e
                    }

                    function gt(e, t) {
                        return e.add(t), e
                    }

                    function vt(e, t, r, n) {
                        var o = -1,
                            i = e ? e.length : 0;
                        for (n && i && (r = e[++o]); ++o < i;) r = t(r, e[o], o, e);
                        return r
                    }

                    function bt(e) {
                        var t = !1;
                        if (null != e && "function" != typeof e.toString) try {
                            t = !!(e + "")
                        } catch (e) {}
                        return t
                    }

                    function yt(e) {
                        var r = -1,
                            n = Array(e.size);
                        return e.forEach(function(e, t) {
                            n[++r] = [t, e]
                        }), n
                    }

                    function _t(t, r) {
                        return function(e) {
                            return t(r(e))
                        }
                    }

                    function wt(e) {
                        var t = -1,
                            r = Array(e.size);
                        return e.forEach(function(e) {
                            r[++t] = e
                        }), r
                    }

                    function At(e) {
                        var t = -1,
                            r = e ? e.length : 0;
                        for (this.clear(); ++t < r;) {
                            var n = e[t];
                            this.set(n[0], n[1])
                        }
                    }

                    function xt(e) {
                        var t = -1,
                            r = e ? e.length : 0;
                        for (this.clear(); ++t < r;) {
                            var n = e[t];
                            this.set(n[0], n[1])
                        }
                    }

                    function kt(e) {
                        var t = -1,
                            r = e ? e.length : 0;
                        for (this.clear(); ++t < r;) {
                            var n = e[t];
                            this.set(n[0], n[1])
                        }
                    }

                    function Et(e) {
                        this.__data__ = new xt(e)
                    }

                    function St(e, t) {
                        var r, n, o, i = pt(e) || (n = r = e) && "object" == typeof n && Ut(n) && We.call(r, "callee") && (!et.call(r, "callee") || Ve.call(r) == ge) ? function(e, t) {
                                for (var r = -1, n = Array(e); ++r < e;) n[r] = t(r);
                                return n
                            }(e.length, String) : [],
                            a = i.length,
                            s = !!a;
                        for (o in e) !t && !We.call(e, o) || s && ("length" == o || function e(t, r) {
                            return (r = null == r ? me : r) && ("number" == typeof t || ze.test(t)) && -1 < t && t % 1 == 0 && t < r
                        }(o, a)) || i.push(o);
                        return i
                    }

                    function Rt(e, t, r) {
                        var n = e[t];
                        We.call(e, t) && jt(n, r) && (void 0 !== r || t in e) || (e[t] = r)
                    }

                    function Dt(e, t) {
                        for (var r = e.length; r--;)
                            if (jt(e[r][0], t)) return r;
                        return -1
                    }

                    function Tt(u, e, t, r, n, o, i) {
                        var a;
                        if (void 0 === (a = r ? o ? r(u, n, o, i) : r(u) : a)) {
                            if (!Bt(u)) return u;
                            var s, c, l, n = pt(u);
                            if (n) {
                                if (g = (c = u).length, l = c.constructor(g), g && "string" == typeof c[0] && We.call(c, "index") && (l.index = c.index, l.input = c.input), a = l, !e) {
                                    var d = u;
                                    var f = a;
                                    var p = -1,
                                        h = d.length;
                                    for (f = f || Array(h); ++p < h;) f[p] = d[p];
                                    return f;
                                    return
                                }
                            } else {
                                var m = ft(u),
                                    g = m == ye || m == _e;
                                if (ht(u)) return c = u, e ? c.slice() : (l = new c.constructor(c.length), c.copy(l), l);
                                if (m == xe || m == ge || g && !o) {
                                    if (bt(u)) return o ? u : {};
                                    if (a = "function" == typeof(b = g ? {} : u).constructor && !Mt(b) && Bt(b = Xe(b)) ? Qe(b) : {}, !e) return b = u, s = (s = a) && It(u, Nt(u), s), It(b, dt(b), s)
                                } else {
                                    if (!He[m]) return o ? u : {};
                                    a = function(e, t, r) {
                                        var n, o, i, a, s = e.constructor;
                                        switch (m) {
                                            case Oe:
                                                return Ot(e);
                                            case ve:
                                            case be:
                                                return new s(+e);
                                            case Ie:
                                                return i = e, a = r ? Ot(i.buffer) : i.buffer, new i.constructor(a, i.byteOffset, i.byteLength);
                                            case Ce:
                                            case Le:
                                            case Me:
                                            case Pe:
                                            case je:
                                            case Ue:
                                            case $e:
                                            case Be:
                                            case Ne:
                                                return a = e, i = r ? Ot(a.buffer) : a.buffer, new a.constructor(i, a.byteOffset, a.length);
                                            case we:
                                                return o = e, vt(r ? t(yt(o), !0) : yt(o), mt, new o.constructor);
                                            case Ae:
                                            case Re:
                                                return new s(e);
                                            case Ee:
                                                return (n = new(o = e).constructor(o.source, Fe.exec(o))).lastIndex = o.lastIndex, n;
                                            case Se:
                                                return n = e, vt(r ? t(wt(n), !0) : wt(n), gt, new n.constructor);
                                            case De:
                                                return lt ? Object(lt.call(e)) : {}
                                        }
                                    }(u, Tt, e)
                                }
                            }
                            var v, b = (i = i || new Et).get(u);
                            if (b) return b;
                            i.set(u, a);
                            for (var y, _, w = (v = n ? v : t ? function() {
                                    var e = u,
                                        t = dt,
                                        r = Nt(e);
                                    if (pt(e)) return r;
                                    for (var n = r, o = t(e), i = -1, a = o.length, s = n.length; ++i < a;) n[s + i] = o[i];
                                    return n
                                }() : Nt(u)) || u, A = -1, x = w ? w.length : 0; ++A < x && !1 !== (y = w[A], _ = A, v && (y = u[_ = y]), void Rt(a, _, Tt(y, e, t, r, _, u, i))););
                        }
                        return a
                    }

                    function Ot(e) {
                        var t = new e.constructor(e.byteLength);
                        return new Je(t).set(new Je(e)), t
                    }

                    function It(e, t, r, n) {
                        r = r || {};
                        for (var o = -1, i = t.length; ++o < i;) {
                            var a = t[o],
                                s = n ? n(r[a], e[a], a, r, e) : void 0;
                            Rt(r, a, void 0 === s ? e[a] : s)
                        }
                        return r
                    }

                    function Ct(e, t) {
                        var r, e = e.__data__;
                        return ("string" == (r = typeof t) || "number" == r || "symbol" == r || "boolean" == r ? "__proto__" !== t : null === t) ? e["string" == typeof t ? "string" : "hash"] : e.map
                    }

                    function Lt(e, t) {
                        e = null == e ? void 0 : e[t];
                        return function e(t) {
                            return Bt(t) && !(Ke && Ke in t) && ($t(t) || bt(t) ? Ye : Ge).test(Pt(t))
                        }(e) ? e : void 0
                    }

                    function Mt(e) {
                        var t = e && e.constructor;
                        return e === ("function" == typeof t && t.prototype || Ze)
                    }

                    function Pt(e) {
                        if (null != e) {
                            try {
                                return qe.call(e)
                            } catch (e) {}
                            try {
                                return e + ""
                            } catch (e) {}
                        }
                        return ""
                    }

                    function jt(e, t) {
                        return e === t || e != e && t != t
                    }

                    function Ut(e) {
                        return null != e && "number" == typeof(t = e.length) && -1 < t && t % 1 == 0 && t <= me && !$t(e);
                        var t
                    }

                    function $t(e) {
                        e = Bt(e) ? Ve.call(e) : "";
                        return e == ye || e == _e
                    }

                    function Bt(e) {
                        var t = typeof e;
                        return e && ("object" == t || "function" == t)
                    }

                    function Nt(e) {
                        return (Ut(e) ? St : function(e) {
                            if (!Mt(e)) return rt(e);
                            var t, r = [];
                            for (t in Object(e)) We.call(e, t) && "constructor" != t && r.push(t);
                            return r
                        })(e)
                    }
                    Lr = (t = e).exports, he = "__lodash_hash_undefined__", me = 9007199254740991, ye = "[object Function]", _e = "[object GeneratorFunction]", ke = "[object Promise]", Te = "[object WeakMap]", Fe = /\w*$/, Ge = /^\[object .+?Constructor\]$/, ze = /^(?:0|[1-9]\d*)$/, (He = {})[ge = "[object Arguments]"] = He["[object Array]"] = He[Oe = "[object ArrayBuffer]"] = He[Ie = "[object DataView]"] = He[ve = "[object Boolean]"] = He[be = "[object Date]"] = He[Ce = "[object Float32Array]"] = He[Le = "[object Float64Array]"] = He[Me = "[object Int8Array]"] = He[Pe = "[object Int16Array]"] = He[je = "[object Int32Array]"] = He[we = "[object Map]"] = He[Ae = "[object Number]"] = He[xe = "[object Object]"] = He[Ee = "[object RegExp]"] = He[Se = "[object Set]"] = He[Re = "[object String]"] = He[De = "[object Symbol]"] = He[Ue = "[object Uint8Array]"] = He[$e = "[object Uint8ClampedArray]"] = He[Be = "[object Uint16Array]"] = He[Ne = "[object Uint32Array]"] = !0, He["[object Error]"] = He[ye] = He[Te] = !1, n = "object" == typeof $ && $ && $.Object === Object && $, o = "object" == typeof self && self && self.Object === Object && self, n = n || o || Function("return this")(), o = Lr && !Lr.nodeType && Lr, Lr = (Lr = o && t && !t.nodeType && t) && Lr.exports === o, o = Array.prototype, r = Function.prototype, Ze = Object.prototype, i = n["__core-js_shared__"], Ke = (i = /[^.]+$/.exec(i && i.keys && i.keys.IE_PROTO || "")) ? "Symbol(src)_1." + i : "", qe = r.toString, We = Ze.hasOwnProperty, Ve = Ze.toString, Ye = RegExp("^" + qe.call(We).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), i = Lr ? n.Buffer : void 0, r = n.Symbol, Je = n.Uint8Array, Xe = _t(Object.getPrototypeOf, Object), Qe = Object.create, et = Ze.propertyIsEnumerable, tt = o.splice, Lr = Object.getOwnPropertySymbols, o = i ? i.isBuffer : void 0, rt = _t(Object.keys, Object), i = Lt(n, "DataView"), nt = Lt(n, "Map"), Do = Lt(n, "Promise"), go = Lt(n, "Set"), n = Lt(n, "WeakMap"), ot = Lt(Object, "create"), it = Pt(i), at = Pt(nt), st = Pt(Do), ut = Pt(go), ct = Pt(n), r = r ? r.prototype : void 0, lt = r ? r.valueOf : void 0, At.prototype.clear = function() {
                        this.__data__ = ot ? ot(null) : {}
                    }, At.prototype.delete = function(e) {
                        return this.has(e) && delete this.__data__[e]
                    }, At.prototype.get = function(e) {
                        var t, r = this.__data__;
                        return ot ? (t = r[e]) === he ? void 0 : t : We.call(r, e) ? r[e] : void 0
                    }, At.prototype.has = function(e) {
                        var t = this.__data__;
                        return ot ? void 0 !== t[e] : We.call(t, e)
                    }, At.prototype.set = function(e, t) {
                        return this.__data__[e] = ot && void 0 === t ? he : t, this
                    }, xt.prototype.clear = function() {
                        this.__data__ = []
                    }, xt.prototype.delete = function(e) {
                        var t = this.__data__,
                            e = Dt(t, e);
                        return !(e < 0 || (e == t.length - 1 ? t.pop() : tt.call(t, e, 1), 0))
                    }, xt.prototype.get = function(e) {
                        var t = this.__data__,
                            e = Dt(t, e);
                        return e < 0 ? void 0 : t[e][1]
                    }, xt.prototype.has = function(e) {
                        return -1 < Dt(this.__data__, e)
                    }, xt.prototype.set = function(e, t) {
                        var r = this.__data__,
                            n = Dt(r, e);
                        return n < 0 ? r.push([e, t]) : r[n][1] = t, this
                    }, kt.prototype.clear = function() {
                        this.__data__ = {
                            hash: new At,
                            map: new(nt || xt),
                            string: new At
                        }
                    }, kt.prototype.delete = function(e) {
                        return Ct(this, e).delete(e)
                    }, kt.prototype.get = function(e) {
                        return Ct(this, e).get(e)
                    }, kt.prototype.has = function(e) {
                        return Ct(this, e).has(e)
                    }, kt.prototype.set = function(e, t) {
                        return Ct(this, e).set(e, t), this
                    }, Et.prototype.clear = function() {
                        this.__data__ = new xt
                    }, Et.prototype.delete = function(e) {
                        return this.__data__.delete(e)
                    }, Et.prototype.get = function(e) {
                        return this.__data__.get(e)
                    }, Et.prototype.has = function(e) {
                        return this.__data__.has(e)
                    }, Et.prototype.set = function(e, t) {
                        var r = this.__data__;
                        if (r instanceof xt) {
                            var n = r.__data__;
                            if (!nt || n.length < 199) return n.push([e, t]), this;
                            r = this.__data__ = new kt(n)
                        }
                        return r.set(e, t), this
                    }, dt = Lr ? _t(Lr, Object) : function() {
                        return []
                    }, ft = function(e) {
                        return Ve.call(e)
                    }, (i && ft(new i(new ArrayBuffer(1))) != Ie || nt && ft(new nt) != we || Do && ft(Do.resolve()) != ke || go && ft(new go) != Se || n && ft(new n) != Te) && (ft = function(e) {
                        var t = Ve.call(e),
                            e = t == xe ? e.constructor : void 0,
                            e = e ? Pt(e) : void 0;
                        if (e) switch (e) {
                            case it:
                                return Ie;
                            case at:
                                return we;
                            case st:
                                return ke;
                            case ut:
                                return Se;
                            case ct:
                                return Te
                        }
                        return t
                    }), pt = Array.isArray, ht = o || function() {
                        return !1
                    }, t.exports = function(e) {
                        return Tt(e, !0, !0)
                    };
                    var Ft = e.exports;

                    function Gt(e) {
                        return "[object Object]" === Object.prototype.toString.call(e)
                    }

                    function zt(e) {
                        return !1 !== Gt(e) && (void 0 === (e = e.constructor) || !1 !== Gt(e = e.prototype) && !1 !== e.hasOwnProperty("isPrototypeOf"))
                    }

                    function Ht(e) {
                        var t;
                        return !!e && ("[object Function]" === (t = Xt.call(e)) || "function" == typeof e && "[object RegExp]" !== t || "undefined" != typeof window && (e === window.setTimeout || e === window.alert || e === window.confirm || e === window.prompt))
                    }
                    var Zt, Kt, qt = String.prototype.valueOf,
                        Wt = Object.prototype.toString,
                        Vt = function() {
                            if ("function" != typeof Symbol || "function" != typeof Object.getOwnPropertySymbols) return !1;
                            if ("symbol" != typeof Symbol.iterator) {
                                var e = {},
                                    t = Symbol("test"),
                                    r = Object(t);
                                if ("string" == typeof t) return !1;
                                if ("[object Symbol]" !== Object.prototype.toString.call(t)) return !1;
                                if ("[object Symbol]" !== Object.prototype.toString.call(r)) return !1;
                                for (t in e[t] = 42, e) return !1;
                                if ("function" == typeof Object.keys && 0 !== Object.keys(e).length) return !1;
                                if ("function" == typeof Object.getOwnPropertyNames && 0 !== Object.getOwnPropertyNames(e).length) return !1;
                                r = Object.getOwnPropertySymbols(e);
                                if (1 !== r.length || r[0] !== t) return !1;
                                if (!Object.prototype.propertyIsEnumerable.call(e, t)) return !1;
                                if ("function" == typeof Object.getOwnPropertyDescriptor) {
                                    r = Object.getOwnPropertyDescriptor(e, t);
                                    if (42 !== r.value || !0 !== r.enumerable) return !1
                                }
                            }
                            return !0
                        }() && !!Symbol.toStringTag,
                        r = Array.isArray,
                        Yt = Object.prototype.toString,
                        Jt = r || function(e) {
                            return !!e && "[object Array]" == Yt.call(e)
                        },
                        Xt = Object.prototype.toString,
                        Qt = "undefined" != typeof globalThis && globalThis || "undefined" != typeof self && self || void 0 !== Qt && Qt,
                        er = "URLSearchParams" in Qt,
                        tr = "Symbol" in Qt && "iterator" in Symbol,
                        rr = "FileReader" in Qt && "Blob" in Qt && function() {
                            try {
                                return new Blob, !0
                            } catch (e) {
                                return !1
                            }
                        }(),
                        nr = "FormData" in Qt,
                        or = "ArrayBuffer" in Qt;

                    function ir(e) {
                        if ("string" != typeof e && (e = String(e)), /[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e) || "" === e) throw new TypeError('Invalid character in header field name: "' + e + '"');
                        return e.toLowerCase()
                    }

                    function ar(e) {
                        return e = "string" != typeof e ? String(e) : e
                    }

                    function sr(t) {
                        var e = {
                            next: function() {
                                var e = t.shift();
                                return {
                                    done: void 0 === e,
                                    value: e
                                }
                            }
                        };
                        return tr && (e[Symbol.iterator] = function() {
                            return e
                        }), e
                    }

                    function ur(t) {
                        this.map = {}, t instanceof ur ? t.forEach(function(e, t) {
                            this.append(t, e)
                        }, this) : Array.isArray(t) ? t.forEach(function(e) {
                            this.append(e[0], e[1])
                        }, this) : t && Object.getOwnPropertyNames(t).forEach(function(e) {
                            this.append(e, t[e])
                        }, this)
                    }

                    function cr(e) {
                        if (e.bodyUsed) return Promise.reject(new TypeError("Already read"));
                        e.bodyUsed = !0
                    }

                    function lr(r) {
                        return new Promise(function(e, t) {
                            r.onload = function() {
                                e(r.result)
                            }, r.onerror = function() {
                                t(r.error)
                            }
                        })
                    }

                    function dr(e) {
                        var t = new FileReader,
                            r = lr(t);
                        return t.readAsArrayBuffer(e), r
                    }

                    function fr(e) {
                        var t;
                        return e.slice ? e.slice(0) : ((t = new Uint8Array(e.byteLength)).set(new Uint8Array(e)), t.buffer)
                    }

                    function pr() {
                        return this.bodyUsed = !1, this._initBody = function(e) {
                            var t;
                            this.bodyUsed = this.bodyUsed, (this._bodyInit = e) ? "string" == typeof e ? this._bodyText = e : rr && Blob.prototype.isPrototypeOf(e) ? this._bodyBlob = e : nr && FormData.prototype.isPrototypeOf(e) ? this._bodyFormData = e : er && URLSearchParams.prototype.isPrototypeOf(e) ? this._bodyText = e.toString() : or && rr && (t = e) && DataView.prototype.isPrototypeOf(t) ? (this._bodyArrayBuffer = fr(e.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : or && (ArrayBuffer.prototype.isPrototypeOf(e) || Kt(e)) ? this._bodyArrayBuffer = fr(e) : this._bodyText = e = Object.prototype.toString.call(e) : this._bodyText = "", this.headers.get("content-type") || ("string" == typeof e ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : er && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"))
                        }, rr && (this.blob = function() {
                            var e = cr(this);
                            if (e) return e;
                            if (this._bodyBlob) return Promise.resolve(this._bodyBlob);
                            if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer]));
                            if (this._bodyFormData) throw new Error("could not read FormData body as blob");
                            return Promise.resolve(new Blob([this._bodyText]))
                        }, this.arrayBuffer = function() {
                            return this._bodyArrayBuffer ? cr(this) || (ArrayBuffer.isView(this._bodyArrayBuffer) ? Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset, this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength)) : Promise.resolve(this._bodyArrayBuffer)) : this.blob().then(dr)
                        }), this.text = function() {
                            var e, t, r = cr(this);
                            if (r) return r;
                            if (this._bodyBlob) return r = this._bodyBlob, e = new FileReader, t = lr(e), e.readAsText(r), t;
                            if (this._bodyArrayBuffer) return Promise.resolve(function(e) {
                                for (var t = new Uint8Array(e), r = new Array(t.length), n = 0; n < t.length; n++) r[n] = String.fromCharCode(t[n]);
                                return r.join("")
                            }(this._bodyArrayBuffer));
                            if (this._bodyFormData) throw new Error("could not read FormData body as text");
                            return Promise.resolve(this._bodyText)
                        }, nr && (this.formData = function() {
                            return this.text().then(gr)
                        }), this.json = function() {
                            return this.text().then(JSON.parse)
                        }, this
                    }
                    or && (Zt = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"], Kt = ArrayBuffer.isView || function(e) {
                        return e && -1 < Zt.indexOf(Object.prototype.toString.call(e))
                    }), ur.prototype.append = function(e, t) {
                        e = ir(e), t = ar(t);
                        var r = this.map[e];
                        this.map[e] = r ? r + ", " + t : t
                    }, ur.prototype.delete = function(e) {
                        delete this.map[ir(e)]
                    }, ur.prototype.get = function(e) {
                        return e = ir(e), this.has(e) ? this.map[e] : null
                    }, ur.prototype.has = function(e) {
                        return this.map.hasOwnProperty(ir(e))
                    }, ur.prototype.set = function(e, t) {
                        this.map[ir(e)] = ar(t)
                    }, ur.prototype.forEach = function(e, t) {
                        for (var r in this.map) this.map.hasOwnProperty(r) && e.call(t, this.map[r], r, this)
                    }, ur.prototype.keys = function() {
                        var r = [];
                        return this.forEach(function(e, t) {
                            r.push(t)
                        }), sr(r)
                    }, ur.prototype.values = function() {
                        var t = [];
                        return this.forEach(function(e) {
                            t.push(e)
                        }), sr(t)
                    }, ur.prototype.entries = function() {
                        var r = [];
                        return this.forEach(function(e, t) {
                            r.push([t, e])
                        }), sr(r)
                    }, tr && (ur.prototype[Symbol.iterator] = ur.prototype.entries);
                    var hr = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];

                    function mr(e, t) {
                        if (!(this instanceof mr)) throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
                        var r, n = (t = t || {}).body;
                        if (e instanceof mr) {
                            if (e.bodyUsed) throw new TypeError("Already read");
                            this.url = e.url, this.credentials = e.credentials, t.headers || (this.headers = new ur(e.headers)), this.method = e.method, this.mode = e.mode, this.signal = e.signal, n || null == e._bodyInit || (n = e._bodyInit, e.bodyUsed = !0)
                        } else this.url = String(e);
                        if (this.credentials = t.credentials || this.credentials || "same-origin", !t.headers && this.headers || (this.headers = new ur(t.headers)), this.method = (e = t.method || this.method || "GET", r = e.toUpperCase(), -1 < hr.indexOf(r) ? r : e), this.mode = t.mode || this.mode || null, this.signal = t.signal || this.signal, this.referrer = null, ("GET" === this.method || "HEAD" === this.method) && n) throw new TypeError("Body not allowed for GET or HEAD requests");
                        this._initBody(n), "GET" !== this.method && "HEAD" !== this.method || "no-store" !== t.cache && "no-cache" !== t.cache || ((r = /([?&])_=[^&]*/).test(this.url) ? this.url = this.url.replace(r, "$1_=" + (new Date).getTime()) : this.url += (/\?/.test(this.url) ? "&" : "?") + "_=" + (new Date).getTime())
                    }

                    function gr(e) {
                        var r = new FormData;
                        return e.trim().split("&").forEach(function(e) {
                            var t;
                            e && (t = (e = e.split("=")).shift().replace(/\+/g, " "), e = e.join("=").replace(/\+/g, " "), r.append(decodeURIComponent(t), decodeURIComponent(e)))
                        }), r
                    }

                    function vr(e, t) {
                        if (!(this instanceof vr)) throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
                        t = t || {}, this.type = "default", this.status = void 0 === t.status ? 200 : t.status, this.ok = 200 <= this.status && this.status < 300, this.statusText = void 0 === t.statusText ? "" : "" + t.statusText, this.headers = new ur(t.headers), this.url = t.url || "", this._initBody(e)
                    }
                    mr.prototype.clone = function() {
                        return new mr(this, {
                            body: this._bodyInit
                        })
                    }, pr.call(mr.prototype), pr.call(vr.prototype), vr.prototype.clone = function() {
                        return new vr(this._bodyInit, {
                            status: this.status,
                            statusText: this.statusText,
                            headers: new ur(this.headers),
                            url: this.url
                        })
                    }, vr.error = function() {
                        var e = new vr(null, {
                            status: 0,
                            statusText: ""
                        });
                        return e.type = "error", e
                    };
                    var br = [301, 302, 303, 307, 308],
                        yr = (vr.redirect = function(e, t) {
                            if (-1 === br.indexOf(t)) throw new RangeError("Invalid status code");
                            return new vr(null, {
                                status: t,
                                headers: {
                                    location: e
                                }
                            })
                        }, Qt.DOMException);
                    try {
                        new yr
                    } catch (j) {
                        (yr = function(e, t) {
                            this.message = e, this.name = t;
                            t = Error(e);
                            this.stack = t.stack
                        }).prototype = Object.create(Error.prototype), yr.prototype.constructor = yr
                    }

                    function _r(n, a) {
                        return new Promise(function(o, e) {
                            var t = new mr(n, a);
                            if (t.signal && t.signal.aborted) return e(new yr("Aborted", "AbortError"));
                            var i = new XMLHttpRequest;

                            function r() {
                                i.abort()
                            }
                            i.onload = function() {
                                var e, r, t = {
                                        status: i.status,
                                        statusText: i.statusText,
                                        headers: (e = i.getAllResponseHeaders() || "", r = new ur, e.replace(/\r?\n[\t ]+/g, " ").split("\r").map(function(e) {
                                            return 0 === e.indexOf("\n") ? e.substr(1, e.length) : e
                                        }).forEach(function(e) {
                                            var e = e.split(":"),
                                                t = e.shift().trim();
                                            t && (e = e.join(":").trim(), r.append(t, e))
                                        }), r)
                                    },
                                    n = (t.url = "responseURL" in i ? i.responseURL : t.headers.get("X-Request-URL"), "response" in i ? i.response : i.responseText);
                                setTimeout(function() {
                                    o(new vr(n, t))
                                }, 0)
                            }, i.onerror = function() {
                                setTimeout(function() {
                                    e(new TypeError("Network request failed"))
                                }, 0)
                            }, i.ontimeout = function() {
                                setTimeout(function() {
                                    e(new TypeError("Network request failed"))
                                }, 0)
                            }, i.onabort = function() {
                                setTimeout(function() {
                                    e(new yr("Aborted", "AbortError"))
                                }, 0)
                            }, i.open(t.method, function(t) {
                                try {
                                    return "" === t && Qt.location.href ? Qt.location.href : t
                                } catch (e) {
                                    return t
                                }
                            }(t.url), !0), "include" === t.credentials ? i.withCredentials = !0 : "omit" === t.credentials && (i.withCredentials = !1), "responseType" in i && (rr ? i.responseType = "blob" : or && t.headers.get("Content-Type") && -1 !== t.headers.get("Content-Type").indexOf("application/octet-stream") && (i.responseType = "arraybuffer")), !a || "object" != typeof a.headers || a.headers instanceof ur ? t.headers.forEach(function(e, t) {
                                i.setRequestHeader(t, e)
                            }) : Object.getOwnPropertyNames(a.headers).forEach(function(e) {
                                i.setRequestHeader(e, ar(a.headers[e]))
                            }), t.signal && (t.signal.addEventListener("abort", r), i.onreadystatechange = function() {
                                4 === i.readyState && t.signal.removeEventListener("abort", r)
                            }), i.send(void 0 === t._bodyInit ? null : t._bodyInit)
                        })
                    }
                    _r.polyfill = !0, Qt.fetch || (Qt.fetch = _r, Qt.Headers = ur, Qt.Request = mr, Qt.Response = vr);
                    var wr, Ar, xr, kr, Er, Sr, Rr, s, u, c, l, f, Dr, p, h, Tr, Or, Ir, Cr, Lr = {
                        exports: {}
                    };

                    function Mr(e) {
                        for (var t = {}, r = 0; r < e.length; r++) t[e[r].toUpperCase()] = e[r];
                        return t
                    }

                    function Pr(e, t) {
                        return typeof e === Rr && -1 !== Or(t).indexOf(Or(e))
                    }

                    function jr(e, t) {
                        if (typeof e === Rr) return e = e.replace(/^\s\s*/, ""), typeof t == Er ? e : e.substring(0, 350)
                    }

                    function Ur(e, t) {
                        for (var r, n, o, i, a, s = 0; s < t.length && !i;) {
                            for (var u = t[s], c = t[s + 1], l = r = 0; l < u.length && !i && u[l];)
                                if (i = u[l++].exec(e))
                                    for (n = 0; n < c.length; n++) a = i[++r], typeof(o = c[n]) === Sr && 0 < o.length ? 2 === o.length ? typeof o[1] == kr ? this[o[0]] = o[1].call(this, a) : this[o[0]] = o[1] : 3 === o.length ? typeof o[1] !== kr || o[1].exec && o[1].test ? this[o[0]] = a ? a.replace(o[1], o[2]) : Ar : this[o[0]] = a ? o[1].call(this, a, o[2]) : Ar : 4 === o.length && (this[o[0]] = a ? o[3].call(this, a.replace(o[1], o[2])) : Ar) : this[o] = a || Ar;
                            s += 2
                        }
                    }

                    function $r(e, t) {
                        for (var r in t)
                            if (typeof t[r] === Sr && 0 < t[r].length) {
                                for (var n = 0; n < t[r].length; n++)
                                    if (Pr(t[r][n], e)) return "?" === r ? Ar : r
                            } else if (Pr(t[r], e)) return "?" === r ? Ar : r;
                        return e
                    }

                    function Br(e, t) {
                        var r, n, o, i, a;
                        return typeof e === Sr && (t = e, e = Ar), this instanceof Br ? (r = typeof wr != Er && wr.navigator ? wr.navigator : Ar, n = e || (r && r.userAgent ? r.userAgent : ""), o = r && r.userAgentData ? r.userAgentData : Ar, i = t ? function(e, t) {
                            var r, n = {};
                            for (r in e) t[r] && t[r].length % 2 == 0 ? n[r] = t[r].concat(e[r]) : n[r] = e[r];
                            return n
                        }(Ir, t) : Ir, a = r && r.userAgent == n, this.getBrowser = function() {
                            var e, t = {};
                            return t[u] = Ar, t[f] = Ar, Ur.call(t, n, i.browser), t.major = typeof(e = t[f]) === Rr ? e.replace(/[^\d\.]/g, "").split(".")[0] : Ar, a && r && r.brave && typeof r.brave.isBrave == kr && (t[u] = "Brave"), t
                        }, this.getCPU = function() {
                            var e = {};
                            return e[Dr] = Ar, Ur.call(e, n, i.cpu), e
                        }, this.getDevice = function() {
                            var e = {};
                            return e[l] = Ar, e[s] = Ar, e[c] = Ar, Ur.call(e, n, i.device), a && !e[c] && o && o.mobile && (e[c] = p), a && "Macintosh" == e[s] && r && typeof r.standalone != Er && r.maxTouchPoints && 2 < r.maxTouchPoints && (e[s] = "iPad", e[c] = h), e
                        }, this.getEngine = function() {
                            var e = {};
                            return e[u] = Ar, e[f] = Ar, Ur.call(e, n, i.engine), e
                        }, this.getOS = function() {
                            var e = {};
                            return e[u] = Ar, e[f] = Ar, Ur.call(e, n, i.os), a && !e[u] && o && "Unknown" != o.platform && (e[u] = o.platform.replace(/chrome os/i, Tr).replace(/macos/i, "Mac OS")), e
                        }, this.getResult = function() {
                            return {
                                ua: this.getUA(),
                                browser: this.getBrowser(),
                                engine: this.getEngine(),
                                os: this.getOS(),
                                device: this.getDevice(),
                                cpu: this.getCPU()
                            }
                        }, this.getUA = function() {
                            return n
                        }, this.setUA = function(e) {
                            return n = typeof e === Rr && 350 < e.length ? jr(e, 350) : e, this
                        }, this.setUA(n), this) : new Br(e, t).getResult()
                    }
                    Do = (i = Lr).exports, wr = "object" == typeof window ? window : $, kr = "function", Er = "undefined", Sr = "object", Rr = "string", Ir = {
                        browser: [
                            [/\b(?:crmo|crios)\/([\w\.]+)/i],
                            [f = "version", [u = "name", go = "Chrome"]],
                            [/edg(?:e|ios|a)?\/([\w\.]+)/i],
                            [f, [u, "Edge"]],
                            [/(opera mini)\/([-\w\.]+)/i, /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i, /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],
                            [u, f],
                            [/opios[\/ ]+([\w\.]+)/i],
                            [f, [u, (n = "Opera") + " Mini"]],
                            [/\bopr\/([\w\.]+)/i],
                            [f, [u, n]],
                            [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i, /(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i, /(ba?idubrowser)[\/ ]?([\w\.]+)/i, /(?:ms|\()(ie) ([\w\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i, /(heytap|ovi)browser\/([\d\.]+)/i, /(weibo)__([\d\.]+)/i],
                            [u, f],
                            [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],
                            [f, [u, "UC" + (o = "Browser")]],
                            [/microm.+\bqbcore\/([\w\.]+)/i, /\bqbcore\/([\w\.]+).+microm/i],
                            [f, [u, "WeChat(Win) Desktop"]],
                            [/micromessenger\/([\w\.]+)/i],
                            [f, [u, "WeChat"]],
                            [/konqueror\/([\w\.]+)/i],
                            [f, [u, "Konqueror"]],
                            [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],
                            [f, [u, "IE"]],
                            [/ya(?:search)?browser\/([\w\.]+)/i],
                            [f, [u, "Yandex"]],
                            [/(avast|avg)\/([\w\.]+)/i],
                            [
                                [u, /(.+)/, "$1 Secure " + o], f
                            ],
                            [/\bfocus\/([\w\.]+)/i],
                            [f, [u, (t = "Firefox") + " Focus"]],
                            [/\bopt\/([\w\.]+)/i],
                            [f, [u, n + " Touch"]],
                            [/coc_coc\w+\/([\w\.]+)/i],
                            [f, [u, "Coc Coc"]],
                            [/dolfin\/([\w\.]+)/i],
                            [f, [u, "Dolphin"]],
                            [/coast\/([\w\.]+)/i],
                            [f, [u, n + " Coast"]],
                            [/miuibrowser\/([\w\.]+)/i],
                            [f, [u, "MIUI " + o]],
                            [/fxios\/([-\w\.]+)/i],
                            [f, [u, t]],
                            [/\bqihu|(qi?ho?o?|360)browser/i],
                            [
                                [u, "360 " + o]
                            ],
                            [/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],
                            [
                                [u, /(.+)/, "$1 " + o], f
                            ],
                            [/(comodo_dragon)\/([\w\.]+)/i],
                            [
                                [u, /_/g, " "], f
                            ],
                            [/(electron)\/([\w\.]+) safari/i, /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i, /m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],
                            [u, f],
                            [/(metasr)[\/ ]?([\w\.]+)/i, /(lbbrowser)/i, /\[(linkedin)app\]/i],
                            [u],
                            [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],
                            [
                                [u, e = "Facebook"], f
                            ],
                            [/(kakao(?:talk|story))[\/ ]([\w\.]+)/i, /(naver)\(.*?(\d+\.[\w\.]+).*\)/i, /safari (line)\/([\w\.]+)/i, /\b(line)\/([\w\.]+)\/iab/i, /(chromium|instagram)[\/ ]([-\w\.]+)/i],
                            [u, f],
                            [/\bgsa\/([\w\.]+) .*safari\//i],
                            [f, [u, "GSA"]],
                            [/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],
                            [f, [u, "TikTok"]],
                            [/headlesschrome(?:\/([\w\.]+)| )/i],
                            [f, [u, go + " Headless"]],
                            [/ wv\).+(chrome)\/([\w\.]+)/i],
                            [
                                [u, go + " WebView"], f
                            ],
                            [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],
                            [f, [u, "Android " + o]],
                            [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],
                            [u, f],
                            [/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],
                            [f, [u, "Mobile Safari"]],
                            [/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],
                            [f, u],
                            [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],
                            [u, [f, $r, {
                                "1.0": "/8",
                                1.2: "/1",
                                1.3: "/3",
                                "2.0": "/412",
                                "2.0.2": "/416",
                                "2.0.3": "/417",
                                "2.0.4": "/419",
                                "?": "/"
                            }]],
                            [/(webkit|khtml)\/([\w\.]+)/i],
                            [u, f],
                            [/(navigator|netscape\d?)\/([-\w\.]+)/i],
                            [
                                [u, "Netscape"], f
                            ],
                            [/mobile vr; rv:([\w\.]+)\).+firefox/i],
                            [f, [u, t + " Reality"]],
                            [/ekiohf.+(flow)\/([\w\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i, /(firefox)\/([\w\.]+)/i, /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i, /(links) \(([\w\.]+)/i, /panasonic;(viera)/i],
                            [u, f],
                            [/(cobalt)\/([\w\.]+)/i],
                            [u, [f, /master.|lts./, ""]]
                        ],
                        cpu: [
                            [/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],
                            [
                                [Dr = "architecture", "amd64"]
                            ],
                            [/(ia32(?=;))/i],
                            [
                                [Dr, Or = function(e) {
                                    return e.toLowerCase()
                                }]
                            ],
                            [/((?:i[346]|x)86)[;\)]/i],
                            [
                                [Dr, "ia32"]
                            ],
                            [/\b(aarch64|arm(v?8e?l?|_?64))\b/i],
                            [
                                [Dr, "arm64"]
                            ],
                            [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],
                            [
                                [Dr, "armhf"]
                            ],
                            [/windows (ce|mobile); ppc;/i],
                            [
                                [Dr, "arm"]
                            ],
                            [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],
                            [
                                [Dr, /ower/, "", Or]
                            ],
                            [/(sun4\w)[;\)]/i],
                            [
                                [Dr, "sparc"]
                            ],
                            [/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],
                            [
                                [Dr, Or]
                            ]
                        ],
                        device: [
                            [/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],
                            [s = "model", [l = "vendor", r = "Samsung"],
                                [c = "type", h = "tablet"]
                            ],
                            [/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i, /samsung[- ]([-\w]+)/i, /sec-(sgh\w+)/i],
                            [s, [l, r],
                                [c, p = "mobile"]
                            ],
                            [/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],
                            [s, [l, n = "Apple"],
                                [c, p]
                            ],
                            [/\((ipad);[-\w\),; ]+apple/i, /applecoremedia\/[\w\.]+ \((ipad)/i, /\b(ipad)\d\d?,\d\d?[;\]].+ios/i],
                            [s, [l, n],
                                [c, h]
                            ],
                            [/(macintosh);/i],
                            [s, [l, n]],
                            [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],
                            [s, [l, "Sharp"],
                                [c, p]
                            ],
                            [/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],
                            [s, [l, "Huawei"],
                                [c, h]
                            ],
                            [/(?:huawei|honor)([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],
                            [s, [l, "Huawei"],
                                [c, p]
                            ],
                            [/\b(poco[\w ]+)(?: bui|\))/i, /\b; (\w+) build\/hm\1/i, /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i, /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i, /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],
                            [
                                [s, /_/g, " "],
                                [l, o = "Xiaomi"],
                                [c, p]
                            ],
                            [/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],
                            [
                                [s, /_/g, " "],
                                [l, o],
                                [c, h]
                            ],
                            [/; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],
                            [s, [l, "OPPO"],
                                [c, p]
                            ],
                            [/vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i],
                            [s, [l, "Vivo"],
                                [c, p]
                            ],
                            [/\b(rmx[12]\d{3})(?: bui|;|\))/i],
                            [s, [l, "Realme"],
                                [c, p]
                            ],
                            [/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ](\w*)/i, /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],
                            [s, [l, zn = "Motorola"],
                                [c, p]
                            ],
                            [/\b(mz60\d|xoom[2 ]{0,2}) build\//i],
                            [s, [l, zn],
                                [c, h]
                            ],
                            [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],
                            [s, [l, "LG"],
                                [c, h]
                            ],
                            [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i, /\blg-?([\d\w]+) bui/i],
                            [s, [l, "LG"],
                                [c, p]
                            ],
                            [/(ideatab[-\w ]+)/i, /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],
                            [s, [l, "Lenovo"],
                                [c, h]
                            ],
                            [/(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i],
                            [
                                [s, /_/g, " "],
                                [l, "Nokia"],
                                [c, p]
                            ],
                            [/(pixel c)\b/i],
                            [s, [l, zn = "Google"],
                                [c, h]
                            ],
                            [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],
                            [s, [l, zn],
                                [c, p]
                            ],
                            [/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],
                            [s, [l, Ro = "Sony"],
                                [c, p]
                            ],
                            [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i],
                            [
                                [s, "Xperia Tablet"],
                                [l, Ro],
                                [c, h]
                            ],
                            [/ (kb2005|in20[12]5|be20[12][59])\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],
                            [s, [l, "OnePlus"],
                                [c, p]
                            ],
                            [/(alexa)webm/i, /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i, /(kf[a-z]+)( bui|\)).+silk\//i],
                            [s, [l, qn = "Amazon"],
                                [c, h]
                            ],
                            [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],
                            [
                                [s, /(.+)/g, "Fire Phone $1"],
                                [l, qn],
                                [c, p]
                            ],
                            [/(playbook);[-\w\),; ]+(rim)/i],
                            [s, l, [c, h]],
                            [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i],
                            [s, [l, ho = "BlackBerry"],
                                [c, p]
                            ],
                            [/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],
                            [s, [l, "ASUS"],
                                [c, h]
                            ],
                            [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],
                            [s, [l, "ASUS"],
                                [c, p]
                            ],
                            [/(nexus 9)/i],
                            [s, [l, "HTC"],
                                [c, h]
                            ],
                            [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i, /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],
                            [l, [s, /_/g, " "],
                                [c, p]
                            ],
                            [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],
                            [s, [l, "Acer"],
                                [c, h]
                            ],
                            [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i],
                            [s, [l, "Meizu"],
                                [c, p]
                            ],
                            [/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i, /(hp) ([\w ]+\w)/i, /(asus)-?(\w+)/i, /(microsoft); (lumia[\w ]+)/i, /(lenovo)[-_ ]?([-\w]+)/i, /(jolla)/i, /(oppo) ?([\w ]+) bui/i],
                            [l, s, [c, p]],
                            [/(kobo)\s(ereader|touch)/i, /(archos) (gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\/([\w\.]+)/i, /(nook)[\w ]+build\/(\w+)/i, /(dell) (strea[kpr\d ]*[\dko])/i, /(le[- ]+pan)[- ]+(\w{1,9}) bui/i, /(trinity)[- ]*(t\d{3}) bui/i, /(gigaset)[- ]+(q\w{1,9}) bui/i, /(vodafone) ([\w ]+)(?:\)| bui)/i],
                            [l, s, [c, h]],
                            [/(surface duo)/i],
                            [s, [l, po = "Microsoft"],
                                [c, h]
                            ],
                            [/droid [\d\.]+; (fp\du?)(?: b|\))/i],
                            [s, [l, "Fairphone"],
                                [c, p]
                            ],
                            [/(u304aa)/i],
                            [s, [l, "AT&T"],
                                [c, p]
                            ],
                            [/\bsie-(\w*)/i],
                            [s, [l, "Siemens"],
                                [c, p]
                            ],
                            [/\b(rct\w+) b/i],
                            [s, [l, "RCA"],
                                [c, h]
                            ],
                            [/\b(venue[\d ]{2,7}) b/i],
                            [s, [l, "Dell"],
                                [c, h]
                            ],
                            [/\b(q(?:mv|ta)\w+) b/i],
                            [s, [l, "Verizon"],
                                [c, h]
                            ],
                            [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],
                            [s, [l, "Barnes & Noble"],
                                [c, h]
                            ],
                            [/\b(tm\d{3}\w+) b/i],
                            [s, [l, "NuVision"],
                                [c, h]
                            ],
                            [/\b(k88) b/i],
                            [s, [l, "ZTE"],
                                [c, h]
                            ],
                            [/\b(nx\d{3}j) b/i],
                            [s, [l, "ZTE"],
                                [c, p]
                            ],
                            [/\b(gen\d{3}) b.+49h/i],
                            [s, [l, "Swiss"],
                                [c, p]
                            ],
                            [/\b(zur\d{3}) b/i],
                            [s, [l, "Swiss"],
                                [c, h]
                            ],
                            [/\b((zeki)?tb.*\b) b/i],
                            [s, [l, "Zeki"],
                                [c, h]
                            ],
                            [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i],
                            [
                                [l, "Dragon Touch"], s, [c, h]
                            ],
                            [/\b(ns-?\w{0,9}) b/i],
                            [s, [l, "Insignia"],
                                [c, h]
                            ],
                            [/\b((nxa|next)-?\w{0,9}) b/i],
                            [s, [l, "NextBook"],
                                [c, h]
                            ],
                            [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],
                            [
                                [l, "Voice"], s, [c, p]
                            ],
                            [/\b(lvtel\-)?(v1[12]) b/i],
                            [
                                [l, "LvTel"], s, [c, p]
                            ],
                            [/\b(ph-1) /i],
                            [s, [l, "Essential"],
                                [c, p]
                            ],
                            [/\b(v(100md|700na|7011|917g).*\b) b/i],
                            [s, [l, "Envizen"],
                                [c, h]
                            ],
                            [/\b(trio[-\w\. ]+) b/i],
                            [s, [l, "MachSpeed"],
                                [c, h]
                            ],
                            [/\btu_(1491) b/i],
                            [s, [l, "Rotor"],
                                [c, h]
                            ],
                            [/(shield[\w ]+) b/i],
                            [s, [l, "Nvidia"],
                                [c, h]
                            ],
                            [/(sprint) (\w+)/i],
                            [l, s, [c, p]],
                            [/(kin\.[onetw]{3})/i],
                            [
                                [s, /\./g, " "],
                                [l, po],
                                [c, p]
                            ],
                            [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],
                            [s, [l, Kn = "Zebra"],
                                [c, h]
                            ],
                            [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],
                            [s, [l, Kn],
                                [c, p]
                            ],
                            [/smart-tv.+(samsung)/i],
                            [l, [c, xo = "smarttv"]],
                            [/hbbtv.+maple;(\d+)/i],
                            [
                                [s, /^/, "SmartTV"],
                                [l, r],
                                [c, xo]
                            ],
                            [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],
                            [
                                [l, "LG"],
                                [c, xo]
                            ],
                            [/(apple) ?tv/i],
                            [l, [s, n + " TV"],
                                [c, xo]
                            ],
                            [/crkey/i],
                            [
                                [s, go + "cast"],
                                [l, zn],
                                [c, xo]
                            ],
                            [/droid.+aft(\w)( bui|\))/i],
                            [s, [l, qn],
                                [c, xo]
                            ],
                            [/\(dtv[\);].+(aquos)/i, /(aquos-tv[\w ]+)\)/i],
                            [s, [l, "Sharp"],
                                [c, xo]
                            ],
                            [/(bravia[\w ]+)( bui|\))/i],
                            [s, [l, Ro],
                                [c, xo]
                            ],
                            [/(mitv-\w{5}) bui/i],
                            [s, [l, o],
                                [c, xo]
                            ],
                            [/Hbbtv.*(technisat) (.*);/i],
                            [l, s, [c, xo]],
                            [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i, /hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],
                            [
                                [l, jr],
                                [s, jr],
                                [c, xo]
                            ],
                            [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],
                            [
                                [c, xo]
                            ],
                            [/(ouya)/i, /(nintendo) ([wids3utch]+)/i],
                            [l, s, [c, r = "console"]],
                            [/droid.+; (shield) bui/i],
                            [s, [l, "Nvidia"],
                                [c, r]
                            ],
                            [/(playstation [345portablevi]+)/i],
                            [s, [l, Ro],
                                [c, r]
                            ],
                            [/\b(xbox(?: one)?(?!; xbox))[\); ]/i],
                            [s, [l, po],
                                [c, r]
                            ],
                            [/((pebble))app/i],
                            [l, s, [c, o = "wearable"]],
                            [/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],
                            [s, [l, n],
                                [c, o]
                            ],
                            [/droid.+; (glass) \d/i],
                            [s, [l, zn],
                                [c, o]
                            ],
                            [/droid.+; (wt63?0{2,3})\)/i],
                            [s, [l, Kn],
                                [c, o]
                            ],
                            [/(quest( 2| pro)?)/i],
                            [s, [l, e],
                                [c, o]
                            ],
                            [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],
                            [l, [c, Ro = "embedded"]],
                            [/(aeobc)\b/i],
                            [s, [l, qn],
                                [c, Ro]
                            ],
                            [/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],
                            [s, [c, p]],
                            [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],
                            [s, [c, h]],
                            [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],
                            [
                                [c, h]
                            ],
                            [/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],
                            [
                                [c, p]
                            ],
                            [/(android[-\w\. ]{0,9});.+buil/i],
                            [s, [l, "Generic"]]
                        ],
                        engine: [
                            [/windows.+ edge\/([\w\.]+)/i],
                            [f, [u, "EdgeHTML"]],
                            [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],
                            [f, [u, "Blink"]],
                            [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /ekioh(flow)\/([\w\.]+)/i, /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i, /(icab)[\/ ]([23]\.[\d\.]+)/i, /\b(libweb)/i],
                            [u, f],
                            [/rv\:([\w\.]{1,9})\b.+(gecko)/i],
                            [f, u]
                        ],
                        os: [
                            [/microsoft (windows) (vista|xp)/i],
                            [u, f],
                            [/(windows) nt 6\.2; (arm)/i, /(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i, /(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],
                            [u, [f, $r, po = {
                                ME: "4.90",
                                "NT 3.11": "NT3.51",
                                "NT 4.0": "NT4.0",
                                2e3: "NT 5.0",
                                XP: ["NT 5.1", "NT 5.2"],
                                Vista: "NT 6.0",
                                7: "NT 6.1",
                                8: "NT 6.2",
                                8.1: "NT 6.3",
                                10: ["NT 6.4", "NT 10.0"],
                                RT: "ARM"
                            }]],
                            [/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],
                            [
                                [u, "Windows"],
                                [f, $r, po]
                            ],
                            [/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i, /ios;fbsv\/([\d\.]+)/i, /cfnetwork\/.+darwin/i],
                            [
                                [f, /_/g, "."],
                                [u, "iOS"]
                            ],
                            [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i],
                            [
                                [u, "Mac OS"],
                                [f, /_/g, "."]
                            ],
                            [/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],
                            [f, u],
                            [/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i, /(blackberry)\w*\/([\w\.]*)/i, /(tizen|kaios)[\/ ]([\w\.]+)/i, /\((series40);/i],
                            [u, f],
                            [/\(bb(10);/i],
                            [f, [u, ho]],
                            [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],
                            [f, [u, "Symbian"]],
                            [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],
                            [f, [u, t + " OS"]],
                            [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],
                            [f, [u, "webOS"]],
                            [/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],
                            [f, [u, "watchOS"]],
                            [/crkey\/([\d\.]+)/i],
                            [f, [u, go + "cast"]],
                            [/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],
                            [
                                [u, Tr = "Chromium OS"], f
                            ],
                            [/panasonic;(viera)/i, /(netrange)mmh/i, /(nettv)\/(\d+\.[\w\.]+)/i, /(nintendo|playstation) ([wids345portablevuch]+)/i, /(xbox); +xbox ([^\);]+)/i, /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i, /(mint)[\/\(\) ]?(\w*)/i, /(mageia|vectorlinux)[; ]/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i, /(hurd|linux) ?([\w\.]*)/i, /(gnu) ?([\w\.]*)/i, /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, /(haiku) (\w+)/i],
                            [u, f],
                            [/(sunos) ?([\w\.\d]*)/i],
                            [
                                [u, "Solaris"], f
                            ],
                            [/((?:open)?solaris)[-\/ ]?([\w\.]*)/i, /(aix) ((\d)(?=\.|\)| )[\w\.])*/i, /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, /(unix) ?([\w\.]*)/i],
                            [u, f]
                        ]
                    }, Br.VERSION = "0.7.35", Br.BROWSER = Mr([u, f, "major"]), Br.CPU = Mr([Dr]), Br.DEVICE = Mr([s, l, c, r, p, xo, h, o, Ro]), Br.ENGINE = Br.OS = Mr([u, f]), (Do = i.exports ? i.exports = Br : Do).UAParser = Br, (Cr = typeof wr != Er && (wr.jQuery || wr.Zepto)) && !Cr.ua && (xr = new Br, Cr.ua = xr.getResult(), Cr.ua.get = function() {
                        return xr.getUA()
                    }, Cr.ua.set = function(e) {
                        xr.setUA(e);
                        var t, r = xr.getResult();
                        for (t in r) Cr.ua[t] = r[t]
                    });
                    var Nr = Lr.exports;
                    const Fr = "function" == typeof atob,
                        Gr = "function" == typeof btoa,
                        zr = "function" == typeof s3,
                        Hr = "function" == typeof TextDecoder ? new TextDecoder : void 0,
                        Zr = "function" == typeof TextEncoder ? new TextEncoder : void 0,
                        Kr = Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),
                        qr = (e => {
                            let r = {};
                            return e.forEach((e, t) => r[e] = t), r
                        })(Kr),
                        Wr = /^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,
                        Vr = String.fromCharCode.bind(String),
                        Yr = "function" == typeof Uint8Array.from ? Uint8Array.from.bind(Uint8Array) : e => new Uint8Array(Array.prototype.slice.call(e, 0)),
                        Jr = e => e.replace(/[^A-Za-z0-9\+\/]/g, ""),
                        Xr = Gr ? e => btoa(e) : zr ? e => s3.from(e, "binary").toString("base64") : t => {
                            let r, n, o, i, a = "";
                            var e = t.length % 3;
                            for (let e = 0; e < t.length;) {
                                if (255 < (n = t.charCodeAt(e++)) || 255 < (o = t.charCodeAt(e++)) || 255 < (i = t.charCodeAt(e++))) throw new TypeError("invalid character found");
                                r = n << 16 | o << 8 | i, a += Kr[r >> 18 & 63] + Kr[r >> 12 & 63] + Kr[r >> 6 & 63] + Kr[63 & r]
                            }
                            return e ? a.slice(0, e - 3) + "===".substring(e) : a
                        },
                        Qr = zr ? e => s3.from(e).toString("base64") : r => {
                            var n = [];
                            for (let e = 0, t = r.length; e < t; e += 4096) n.push(Vr.apply(null, r.subarray(e, e + 4096)));
                            return Xr(n.join(""))
                        },
                        en = e => {
                            var t;
                            return e.length < 2 ? (t = e.charCodeAt(0)) < 128 ? e : t < 2048 ? Vr(192 | t >>> 6) + Vr(128 | 63 & t) : Vr(224 | t >>> 12 & 15) + Vr(128 | t >>> 6 & 63) + Vr(128 | 63 & t) : (t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320), Vr(240 | t >>> 18 & 7) + Vr(128 | t >>> 12 & 63) + Vr(128 | t >>> 6 & 63) + Vr(128 | 63 & t))
                        },
                        tn = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,
                        rn = zr ? e => s3.from(e, "utf8").toString("base64") : Zr ? e => Qr(Zr.encode(e)) : e => {
                            return Xr(e.replace(tn, en))
                        },
                        nn = /[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,
                        on = e => {
                            switch (e.length) {
                                case 4:
                                    var t = ((7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3)) - 65536;
                                    return Vr(55296 + (t >>> 10)) + Vr(56320 + (1023 & t));
                                case 3:
                                    return Vr((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2));
                                default:
                                    return Vr((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1))
                            }
                        },
                        an = Fr ? e => atob(Jr(e)) : zr ? e => s3.from(e, "base64").toString("binary") : t => {
                            if (t = t.replace(/\s+/g, ""), !Wr.test(t)) throw new TypeError("malformed base64.");
                            t += "==".slice(2 - (3 & t.length));
                            let r, n, o, i = "";
                            for (let e = 0; e < t.length;) r = qr[t.charAt(e++)] << 18 | qr[t.charAt(e++)] << 12 | (n = qr[t.charAt(e++)]) << 6 | (o = qr[t.charAt(e++)]), i += 64 === n ? Vr(r >> 16 & 255) : 64 === o ? Vr(r >> 16 & 255, r >> 8 & 255) : Vr(r >> 16 & 255, r >> 8 & 255, 255 & r);
                            return i
                        },
                        sn = zr ? e => Yr(s3.from(e, "base64")) : e => Yr(an(e).split("").map(e => e.charCodeAt(0))),
                        un = zr ? e => s3.from(e, "base64").toString("utf8") : Hr ? e => Hr.decode(sn(e)) : e => {
                            return an(e).replace(nn, on)
                        },
                        cn = (e, t = !1) => {
                            return t ? rn(e).replace(/=/g, "").replace(/[+\/]/g, e => "+" == e ? "-" : "_") : rn(e)
                        },
                        ln = e => {
                            return un((e = e, Jr(e.replace(/[-_]/g, e => "-" == e ? "+" : "/"))))
                        };
                    var g = {
                        Rewarded: "rewarded",
                        Interstitial: "interstitial",
                        Preroll: "interstitial",
                        Midroll: "interstitial",
                        Display: "display"
                    };

                    function dn(e, t) {
                        for (var r in t) t.hasOwnProperty(r) && null !== t[r] && void 0 !== t[r] && (e[r] = t[r]);
                        return e
                    }

                    function fn() {
                        var e, t = mn(),
                            t = (t.gd_sdk_referrer_url || (window.location !== window.parent.location && document.referrer && "" !== document.referrer ? document.referrer.split("/")[2] : document.location.host)).replace(/^(?:https?:\/\/)?(?:\/\/)?(?:www\.)?/i, "").split("/")[0];
                        return -1 !== document.referrer.indexOf("gameplayer.io") ? (t = "gamedistribution.com", (e = hn("ref", document.referrer)) && "" !== e && "{portal%20name}" !== e && "{spilgames}" !== e && "{portal name}" !== e && (t = gn(e).replace(/^(?:https?:\/\/)?(?:\/\/)?(?:www\.)?/i, "").split("/")[0])) : -1 !== document.referrer.indexOf("localhost") && (t = "gamedistribution.com"), t
                    }

                    function pn() {
                        var e, t = mn();
                        return t.gd_sdk_referrer_url ? (0 === yn() && (t.gd_sdk_referrer_url = document.location.href), t.gd_sdk_referrer_url) : (t = window.location !== window.parent.location && document.referrer && "" !== document.referrer ? document.referrer : document.location.href, -1 !== document.referrer.indexOf("gameplayer.io") ? (t = "https://gamedistribution.com", (e = hn("ref", document.referrer)) && "" !== e && "{portal%20name}" !== e && "{spilgames}" !== e && "{portal name}" !== e && (t = gn(e).replace(/^(?:https?:\/\/)?(?:\/\/)?/i, ""), t = "https://".concat(t))) : -1 !== document.referrer.indexOf("localhost") && (t = "https://gamedistribution.com/"), t)
                    }

                    function hn(e, t) {
                        t = t || window.location.href, e = new RegExp("[?&]" + e + "=([^&#]*)", "i").exec(t);
                        return e ? e[1] : null
                    }

                    function mn() {
                        for (var e, t = /\+/g, r = /([^&=]+)=?([^&]*)/g, n = function(e) {
                                return decodeURIComponent(e.toLowerCase().replace(t, " "))
                            }, o = window.location.search.substring(1), i = {}; e = r.exec(o);) i[n(e[1])] = n(e[2]);
                        return i
                    }

                    function gn(e) {
                        for (;

                            function e(t) {
                                return (t = t || "") !== decodeURIComponent(t)
                            }(e);) e = decodeURIComponent(e);
                        return e
                    }

                    function vn() {
                        var e = navigator.userAgent || navigator.vendor || window.opera;
                        return /windows phone/i.test(e) ? "windows" : /android/i.test(e) ? "android" : /iPad|iPhone|iPod/.test(e) && !window.MSStream ? "ios" : ""
                    }

                    function bn(a, s, u) {
                        return new Promise(function(e, t) {
                            if (u && u.exists && u.exists()) e(_n(null == u ? void 0 : u.alternates));
                            else {
                                var r = u && u.alternates && 0 < u.alternates.length ? _n(u.alternates) : void 0,
                                    n = r || document.createElement("script"),
                                    o = u && u.error_prefix ? u.error_prefix : "Failed:";
                                if (n.onload = function() {
                                        u && u.exists && !u.exists() ? t("".concat(o, " ").concat(a)) : e(n)
                                    }, n.onerror = function() {
                                        t("".concat(o, " ").concat(a))
                                    }, !r) {
                                    if (n.type = "text/javascript", !0 === u.defer ? n.defer = !0 : n.async = !0, null != u && u.attrs)
                                        for (var i in u.attrs) n.setAttribute(i, u.attrs[i]);
                                    n.src = a, n.id = s, document.head.appendChild(n)
                                }
                            }
                        })
                    }

                    function yn() {
                        var e = 0,
                            t = window;
                        try {
                            for (; t != t.parent;) e++, t = t.parent
                        } catch (e) {}
                        return e
                    }

                    function _n(e) {
                        if (e && e.length) {
                            var t = document.querySelectorAll("script");
                            if (t)
                                for (var r in t) {
                                    r = t[r];
                                    if (e.includes(r.src)) return r
                                }
                        }
                    }

                    function wn(e) {
                        return !!localStorage.getItem(e)
                    }

                    function An() {
                        var e = yn();
                        if (0 === e) return location.host.replace(/^www\.(.*)$/i, "$1");
                        if (location.ancestorOrigins && 0 < location.ancestorOrigins.length) return location.ancestorOrigins[location.ancestorOrigins.length - 1].replace(/^https?:\/\/(www\.)?(.*)$/i, "$2");
                        if (1 === e) {
                            e = function(e) {
                                if (e && "" !== e) try {
                                    return new ce(e)
                                } catch (e) {}
                            }(document.referrer);
                            if (e) return e.host.replace(/^www\.(.*)$/i, "$1")
                        }
                    }
                    var xn = function(e, t) {
                            return wn(e) ? "true" === (e = localStorage.getItem(e)) || !0 === e || 1 === e || "1" === e : t
                        },
                        kn = function() {
                            var e = Date.now();
                            try {
                                return localStorage.setItem(e, e), localStorage.removeItem(e), !0
                            } catch (e) {
                                return !1
                            }
                        }(),
                        En = function(e) {
                            localStorage.removeItem(e)
                        },
                        Sn = function(e, t) {
                            localStorage.setItem(e, t)
                        },
                        Rn = Date.now(),
                        Dn = {
                            console: !1
                        };

                    function Tn(e, t, r) {
                        try {
                            var n, o;
                            (kn && xn("gd_debug_ex") || Dn && !0 === Dn.console) && (n = "error" === r ? "background: #c4161e; color: #fff" : "warning" === r ? "background: #ff8c1c; color: #fff" : "info" === r ? "background: #ff0080; color: #fff" : "background: #44a5ab; color: #fff", o = console.log("[" + (Date.now() - Rn) / 1e3 + "s]%c %c %c gdsdk %c %c %c " + e + " ", "background: #9854d8", "background: #6c2ca7", "color: #fff; background: #450f78;", "background: #6c2ca7", "background: #9854d8", n, void 0 !== t ? t : ""), console.log.apply(console, o))
                        } catch (e) {
                            console.log(e)
                        }
                    }

                    function On(e) {
                        return e && e.Math == Math && e
                    }

                    function In(t, r) {
                        try {
                            Zn(Hn, t, {
                                value: r,
                                configurable: !0,
                                writable: !0
                            })
                        } catch (e) {
                            Hn[t] = r
                        }
                        return r
                    }
                    var Cn = ["SDK_READY", "SDK_ERROR", "SDK_LB_LOGIN", "SDK_SHW_LB", "SDK_GAME_START", "SDK_GAME_PAUSE", "SDK_GDPR_TRACKING", "SDK_GDPR_TARGETING", "SDK_GDPR_THIRD_PARTY", "AD_SDK_MANAGER_READY", "AD_SDK_CANCELED", "AD_IS_ALREADY_RUNNING", "SDK_REWARDED_WATCH_COMPLETE"],
                        Ln = ["AD_ERROR", "AD_BREAK_READY", "AD_METADATA", "ALL_ADS_COMPLETED", "CLICK", "COMPLETE", "CONTENT_PAUSE_REQUESTED", "CONTENT_RESUME_REQUESTED", "DURATION_CHANGE", "FIRST_QUARTILE", "IMPRESSION", "INTERACTION", "LINEAR_CHANGED", "LOADED", "LOG", "MIDPOINT", "PAUSED", "RESUMED", "SKIPPABLE_STATE_CHANGED", "SKIPPED", "STARTED", "THIRD_QUARTILE", "USER_CLOSE", "VOLUME_CHANGED", "VOLUME_MUTED", "DISPLAYAD_IMPRESSION", "DISPLAYAD_ERROR"],
                        Mn = 1010,
                        Pn = 1020,
                        jn = 1100,
                        Un = null,
                        $n = (pe(Xn, [{
                            key: "_getListenerIdx",
                            value: function(e, t, r) {
                                var n, o = this.listeners[e],
                                    i = -1;
                                if (o && 0 !== o.length)
                                    for (n = 0; n < o.length; n++)
                                        if (o[n].callback === t && (!r || r === o[n].scope)) {
                                            i = n;
                                            break
                                        }
                                return i
                            }
                        }, {
                            key: "subscribe",
                            value: function(e, t, r) {
                                if (!e) throw new Error("Event name cannot be null or undefined.");
                                if (!t || "function" != typeof t) throw new Error("Listener must be of type function.");
                                0 <= this._getListenerIdx(e, t, r) ? console.log(e, r) : (t = {
                                    callback: t,
                                    scope: r
                                }, this.listeners[e] = this.listeners[e] || [], this.listeners[e].push(t))
                            }
                        }, {
                            key: "unsubscribeScope",
                            value: function(e) {
                                for (var t = Object.keys(this.listeners), r = 0; r < t.length; r++) {
                                    for (var n = t[r], o = this.listeners[n], i = 0; i < o.length; i++) o[i].scope === e && (o.splice(i, 1), i--);
                                    0 === o.length && delete this.listeners[n]
                                }
                            }
                        }, {
                            key: "broadcast",
                            value: function(e, t) {
                                var r = this.listeners[e];
                                e && this.listeners[e] && ((t = t || {}).name = t.name || e, r.forEach(function(e) {
                                    e.callback.call(e.scope, t, e.scope)
                                }))
                            }
                        }, {
                            key: "printScope",
                            value: function(e) {
                                for (var t = Object.keys(this.listeners), r = 0; r < t.length; r++)
                                    for (var n = t[r], o = this.listeners[n], i = 0; i < o.length; i++) o[i].scope === e && console.log(n, e)
                            }
                        }]), Xn),
                        Bn = (pe(Jn, [{
                            key: "transform",
                            value: function(e, t) {
                                e = Ft(e);
                                return this.transformValue(e, t)
                            }
                        }, {
                            key: "transformValue",
                            value: function(t, e) {
                                if (zt(t) || Jt(t))
                                    for (var r in t) t[r] = this.transformValue(t[r], e);
                                else if ("string" == typeof(u = t) || "object" == typeof u && (Vt ? function(e) {
                                        try {
                                            return qt.call(e), !0
                                        } catch (e) {
                                            return !1
                                        }
                                    }(u) : "[object String]" === Wt.call(u))) {
                                    var n, o, i, a = /\{\{(\w+)\}\}/g,
                                        s = [];
                                    do {} while ((n = a.exec(t)) && (n[0], o = n[1], void 0 !== (i = this.getMacroKeyValue(o, e))) && s.push({
                                            key: o,
                                            value: i
                                        }), n);
                                    0 < s.length && s.forEach(function(e) {
                                        t = t.replace(new RegExp("{{" + e.key + "}}", "g"), e.value)
                                    })
                                }
                                var u;
                                return t
                            }
                        }, {
                            key: "getMacroKeyValue",
                            value: function(e, t) {
                                switch (e) {
                                    case "CACHEBUSTER":
                                        return Date.now();
                                    case "GAME_ID":
                                        return this.game.gameId;
                                    case "GAME_TITLE":
                                        return this.game.title;
                                    case "COUNTRY_CODE":
                                        return this.game.ctry;
                                    case "PAGE_URL":
                                        return this.bridge.parentURL;
                                    case "PAGE_URL_ESC":
                                        return encodeURIComponent(this.bridge.parentURL);
                                    case "PAGE_URL_ESC_ESC":
                                        return encodeURIComponent(encodeURIComponent(this.bridge.parentURL));
                                    case "DOMAIN_MATCHED":
                                        return this.bridge.domainMatched ? 1 : 0;
                                    case "DOMAIN_PARENT":
                                        return this.bridge.parentDomain;
                                    case "DOMAIN_TOP":
                                        return this.bridge.topDomain;
                                    case "DEPTH":
                                    case "GAME_DEPTH":
                                        return this.bridge.depth;
                                    default:
                                        if (t && Ht(t.get)) return t.get(e)
                                }
                            }
                        }]), Jn),
                        Nn = (pe(Yn, [{
                            key: "_init_layout",
                            value: function() {
                                var e = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,
                                    t = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                                this._layout = {
                                    w: e -= e % 64,
                                    h: t -= t % 64
                                }
                            }
                        }, {
                            key: "send",
                            value: function(e, t) {
                                if (!this._config.isCoreSDKMode) {
                                    this._size = "".concat(this._layout.w, " x ").concat(this._layout.h);
                                    var r = this._topic_counter[e] || 0,
                                        r = (this._topic_counter[e] = ++r, {
                                            gmid: this._config.gameId,
                                            tdmn: this._config.topDomain,
                                            domn: this._config.domain,
                                            rfrr: this._config.referrer,
                                            lthr: this._config.hours,
                                            ctry: this._config.country,
                                            dpth: this._config.depth,
                                            vers: this._config.version,
                                            trac: this._config.tracking,
                                            whlb: this._config.whitelabel,
                                            plat: this._config.platform,
                                            tpct: r,
                                            args: t,
                                            ttle: document.title,
                                            size: this._size,
                                            brnm: this._ua.browser.name,
                                            brmj: this._ua.browser.major,
                                            osnm: this._ua.os.name,
                                            osvr: this._ua.os.version,
                                            dvmd: this._ua.device.model,
                                            byld: this._config.byloader,
                                            bylv: this._config.byloaderVersion,
                                            imgu: this._config.isMasterGameURL,
                                            iegu: this._config.isExtHostedGameURL,
                                            itgu: this._config.isTokenGameURL,
                                            cmpe: !1,
                                            host: window.location.hostname
                                        });
                                    "undefined" != typeof idhb && void 0 !== idhb.iabCmpExists() && (r.cmpe = idhb.iabCmpExists());
                                    try {
                                        r = encodeURIComponent(cn(JSON.stringify([r]))), fetch(this._url + "?tp=com.gdsdk.".concat(e, "&ar=").concat(r, "&ts=").concat(Date.now()))
                                    } catch (e) {}
                                }
                            }
                        }, {
                            key: "setGameData",
                            value: function(e) {
                                this._gameData = e, this._config.country = e.ctry
                            }
                        }]), Yn),
                        Fn = null,
                        Gn = (pe(Vn, [{
                            key: "start",
                            value: function() {
                                var e = "\n            #gdsdk__console_container {\n                display: flex;\n                box-sizing: border-box;\n                padding: 3px;\n                background: linear-gradient(90deg,#3d1b5d,#5c3997);\n                box-shadow: 0 0 8px rgba(0, 0, 0, 0.8);\n                color: #fff;\n                font-family: Helvetica, Arial, sans-serif;\n                font-size: 8px;\n            }\n            #gdsdk__console_container button {\n                flex: 1;\n                background: #44a5ab;\n                padding: 3px 10px;\n                margin: 2px;\n                border: 0;\n                border-radius: 3px;\n                color: #fff;\n                outline: 0;\n                cursor: pointer;\n                font-size: 8px;\n                box-shadow: 0 0 0 transparent;\n                text-shadow: 0 0 0 transparent;\n                text-overflow: ellipsis;\n                overflow: hidden;\n                white-space: nowrap;\n            }\n            #gdsdk__console_container button:hover {\n                background: #4fb3b9;\n            }\n            #gdsdk__console_container button:active {\n                background: #62bbc0;\n            }\n        ",
                                    t = document.head || document.getElementsByTagName("head")[0],
                                    r = document.createElement("style"),
                                    e = (r.type = "text/css", r.styleSheet ? r.styleSheet.cssText = e : r.appendChild(document.createTextNode(e)), t.appendChild(r), document.body || document.getElementsByTagName("body")[0]),
                                    t = document.createElement("div"),
                                    r = (t.id = "gdsdk__console", t.style.position = "fixed", t.style.zIndex = jn, t.style.bottom = "0", t.style.left = "0", t.style.width = "100%", t.innerHTML = '\n            <div id="gdsdk__console_container">\n                <button id="gdsdk__hbgdDebug">Activate hbgd debug</button>\n                <button id="gdsdk__hbgdConfig">Log idhb config</button>\n                \x3c!--\n                <button id="gdsdk__resumeGame">Resume</button>\n                <button id="gdsdk__pauseGame">Pause</button>\n                --\x3e\n                <button id="gdsdk__showLeaderboard">LeaderBoard</button>\n                <button id="gdsdk__showInterstitial">Interstitial</button>\n                <button id="gdsdk__showRewarded">Rewarded</button>\n                \x3c!--\n                <button id="gdsdk__preloadRewarded">Preload rewarded</button>\n                --\x3e\n                <button id="gdsdk__cancel">Cancel</button>\n                <button id="gdsdk__demo">Demo VAST tag</button>\n                <button id="gdsdk__disableMidrollTimer">Disable delay</button>\n                <button id="gdsdk__closeDebug">Close</button>\n            </div>\n        ', e.appendChild(t), document.getElementById("gdsdk__showLeaderboard")),
                                    e = document.getElementById("gdsdk__showInterstitial"),
                                    t = document.getElementById("gdsdk__showRewarded"),
                                    n = document.getElementById("gdsdk__cancel"),
                                    o = document.getElementById("gdsdk__demo"),
                                    i = document.getElementById("gdsdk__disableMidrollTimer"),
                                    a = document.getElementById("gdsdk__hbgdDebug"),
                                    s = document.getElementById("gdsdk__hbgdConfig"),
                                    u = document.getElementById("gdsdk__closeDebug");
                                xn("gd_tag") ? (o.innerHTML = "Revert Vast tag", o.style.background = "#ff8c1c") : (o.innerHTML = "Demo VAST tag", o.style.background = "#44a5ab"), xn("gd_disable_midroll_timer") ? (i.innerHTML = "Revert delay", i.style.background = "#ff8c1c") : (i.innerHTML = "Disable delay", i.style.background = "#44a5ab"), xn("gd_hb_debug") ? (a.innerHTML = "Revert HB Debug", a.style.background = "#ff8c1c") : (a.innerHTML = "HB Debug", a.style.background = "#44a5ab"), r.addEventListener("click", function() {
                                    window.gdsdk.showLeaderBoard().catch(function(e) {})
                                }), e.addEventListener("click", function() {
                                    window.gdsdk.showAd(g.Interstitial).catch(function(e) {})
                                }), t.addEventListener("click", function() {
                                    window.gdsdk.showAd(g.Rewarded).catch(function(e) {})
                                }), n.addEventListener("click", function() {
                                    window.gdsdk.cancelAd().then(function(e) {}).catch(function(e) {})
                                }), o.addEventListener("click", function() {
                                    try {
                                        xn("gd_tag") ? En("gd_tag") : Sn("gd_tag", !0), location.reload()
                                    } catch (e) {
                                        console.log(e)
                                    }
                                }), i.addEventListener("click", function() {
                                    try {
                                        xn("gd_disable_midroll_timer") ? En("gd_disable_midroll_timer") : Sn("gd_disable_midroll_timer", !0), location.reload()
                                    } catch (e) {
                                        console.log(e)
                                    }
                                }), u.addEventListener("click", function() {
                                    try {
                                        xn("gd_debug_ex") ? En("gd_debug_ex") : Sn("gd_debug_ex", !0), location.reload()
                                    } catch (e) {
                                        console.log(e)
                                    }
                                }), a.addEventListener("click", function() {
                                    try {
                                        xn("gd_hb_debug") ? En("gd_hb_debug") : Sn("gd_hb_debug", !0), window.idhb && window.idhb.debug(!(!kn || !xn("gd_hb_debug"))), location.reload()
                                    } catch (e) {
                                        console.log(e)
                                    }
                                }), s.addEventListener("click", function() {
                                    try {
                                        var e = window.idhb.getConfig();
                                        console.info(e)
                                    } catch (e) {
                                        console.log(e)
                                    }
                                })
                            }
                        }]), Vn),
                        n = On("object" == typeof globalThis && globalThis) || On("object" == typeof window && window) || On("object" == typeof self && self) || On("object" == typeof $ && $) || function() {
                            return this
                        }() || Function("return this")(),
                        zn = {
                            exports: {}
                        },
                        Hn = n,
                        Zn = Object.defineProperty,
                        Kn = In,
                        e = "__core-js_shared__",
                        qn = n[e] || Kn(e, {}),
                        Wn = qn;

                    function Vn(e) {
                        if (le(this, Vn), Fn) return Fn;
                        (Fn = this).eventBus = new $n, this._sdk = e
                    }

                    function Yn(e) {
                        le(this, Yn), this._config = e || {}, this._url = e.url || "js/null.js?https://msgrt.gamedistribution.com/collect", this._topic_counter = {}, this._ua = (new Nr).getResult(), this._init_layout()
                    }

                    function Jn(e) {
                        le(this, Jn), this.game = e.game, this.bridge = e.bridge
                    }

                    function Xn() {
                        if (le(this, Xn), Un) return Un;
                        (Un = this).listeners = {}
                    }(zn.exports = function(e, t) {
                        return Wn[e] || (Wn[e] = void 0 !== t ? t : {})
                    })("versions", []).push({
                        version: "3.30.1",
                        mode: "global",
                        copyright: " 2014-2023 Denis Pushkarev (zloirock.ru)",
                        license: "https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",
                        source: "https://github.com/zloirock/core-js"
                    });

                    function Qn(e) {
                        try {
                            return !!e()
                        } catch (e) {
                            return !0
                        }
                    }

                    function eo(e) {
                        return null == e
                    }

                    function to(e) {
                        if (vo(e)) throw bo("Can't call method on " + e);
                        return e
                    }

                    function ro(e) {
                        return _o(yo(e))
                    }

                    function no(e) {
                        return "Symbol(" + (void 0 === e ? "" : e) + ")_" + So(++ko + Eo, 36)
                    }

                    function oo(e) {
                        return Oo(Lo, e) || (Lo[e] = Io && Oo(Co, e) ? Co[e] : Mo("Symbol." + e)), Lo[e]
                    }

                    function io(e) {
                        return No ? Bo.createElement(e) : {}
                    }

                    function ao(e) {
                        if (Go(e)) return e;
                        throw Ho(zo(e) + " is not an object")
                    }

                    function so(e, t) {
                        return arguments.length < 2 ? (r = Ko[e], qo(r) ? r : void 0) : Ko[e] && Ko[e][t];
                        var r
                    }

                    function uo(e) {
                        try {
                            return Qo(e)
                        } catch (e) {
                            return "Object"
                        }
                    }

                    function co(e) {
                        if (ei(e)) return e;
                        throw ri(ti(e) + " is not a function")
                    }

                    function lo(e, t) {
                        return e = e[t], oi(e) ? void 0 : ni(e)
                    }

                    function fo(e) {
                        return e = function(e, t) {
                            if (!li(e) || di(e)) return e;
                            var r = fi(e, mi);
                            if (r) {
                                if (r = ci(r, e, t = void 0 === t ? "default" : t), !li(r) || di(r)) return r;
                                throw hi("Can't convert object to primitive value")
                            }
                            return pi(e, t = void 0 === t ? "number" : t)
                        }(e, "string"), gi(e) ? e : e + ""
                    }
                    var po = !Qn(function() {
                            var e = function() {}.bind();
                            return "function" != typeof e || e.hasOwnProperty("prototype")
                        }),
                        ho = po,
                        t = Function.prototype,
                        mo = t.call,
                        go = ho && t.bind.bind(mo, mo),
                        r = ho ? go : function(e) {
                            return function() {
                                return mo.apply(e, arguments)
                            }
                        },
                        vo = eo,
                        bo = TypeError,
                        yo = to,
                        _o = Object,
                        wo = ro,
                        Ao = r({}.hasOwnProperty),
                        xo = Object.hasOwn || function(e, t) {
                            return Ao(wo(e), t)
                        },
                        o = r,
                        ko = 0,
                        Eo = Math.random(),
                        So = o(1..toString),
                        Ro = "undefined" != typeof navigator && String(navigator.userAgent) || "",
                        i = Ro,
                        Do = n.process,
                        Lr = n.Deno,
                        Kn = Do && Do.versions || Lr && Lr.version,
                        e = Kn && Kn.v8,
                        t = a = !(a = e ? 0 < (Po = e.split("."))[0] && Po[0] < 4 ? 1 : +(Po[0] + Po[1]) : a) && i && (!(Po = i.match(/Edge\/(\d+)/)) || 74 <= Po[1]) && (Po = i.match(/Chrome\/(\d+)/)) ? +Po[1] : a,
                        To = t,
                        ho = Qn,
                        go = !!Object.getOwnPropertySymbols && !ho(function() {
                            var e = Symbol();
                            return !String(e) || !(Object(e) instanceof Symbol) || !Symbol.sham && To && To < 41
                        }),
                        o = go && !Symbol.sham && "symbol" == typeof Symbol.iterator,
                        Do = zn.exports,
                        Oo = xo,
                        Lr = no,
                        Io = go,
                        Kn = o,
                        Co = n.Symbol,
                        Lo = Do("wks"),
                        Mo = Kn ? Co.for || Co : Co && Co.withoutSetter || Lr,
                        e = {},
                        i = (e[oo("toStringTag")] = "z", "[object z]" === String(e)),
                        Po = "object" == typeof document && document.all,
                        a = {
                            all: Po,
                            IS_HTMLDDA: void 0 === Po && void 0 !== Po
                        },
                        jo = a.all,
                        ho = a.IS_HTMLDDA ? function(e) {
                            return "function" == typeof e || e === jo
                        } : function(e) {
                            return "function" == typeof e
                        },
                        Do = {},
                        Kn = !Qn(function() {
                            return 7 != Object.defineProperty({}, 1, {
                                get: function() {
                                    return 7
                                }
                            })[1]
                        }),
                        Uo = ho,
                        $o = a.all,
                        Lr = a.IS_HTMLDDA ? function(e) {
                            return "object" == typeof e ? null !== e : Uo(e) || e === $o
                        } : function(e) {
                            return "object" == typeof e ? null !== e : Uo(e)
                        },
                        e = Lr,
                        Bo = n.document,
                        No = e(Bo) && e(Bo.createElement),
                        Fo = io,
                        Po = !Kn && !Qn(function() {
                            return 7 != Object.defineProperty(Fo("div"), "a", {
                                get: function() {
                                    return 7
                                }
                            }).a
                        }),
                        a = Kn && Qn(function() {
                            return 42 != Object.defineProperty(function() {}, "prototype", {
                                value: 42,
                                writable: !1
                            }).prototype
                        }),
                        Go = Lr,
                        zo = String,
                        Ho = TypeError,
                        Zo = Function.prototype.call,
                        e = po ? Zo.bind(Zo) : function() {
                            return Zo.apply(Zo, arguments)
                        },
                        Ko = n,
                        qo = ho,
                        Wo = r({}.isPrototypeOf),
                        Vo = so,
                        Yo = ho,
                        Jo = Wo,
                        Xo = Object,
                        o = o ? function(e) {
                            return "symbol" == typeof e
                        } : function(e) {
                            var t = Vo("Symbol");
                            return Yo(t) && Jo(t.prototype, Xo(e))
                        },
                        Qo = String,
                        ei = ho,
                        ti = uo,
                        ri = TypeError,
                        ni = co,
                        oi = eo,
                        ii = e,
                        ai = ho,
                        si = Lr,
                        ui = TypeError,
                        ci = e,
                        li = Lr,
                        di = o,
                        fi = lo,
                        pi = function(e, t) {
                            var r, n;
                            if ("string" === t && ai(r = e.toString) && !si(n = ii(r, e))) return n;
                            if (ai(r = e.valueOf) && !si(n = ii(r, e))) return n;
                            if ("string" !== t && ai(r = e.toString) && !si(n = ii(r, e))) return n;
                            throw ui("Can't convert object to primitive value")
                        },
                        hi = TypeError,
                        mi = oo("toPrimitive"),
                        gi = o,
                        vi = Po,
                        bi = ao,
                        yi = fo,
                        _i = TypeError,
                        wi = Object.defineProperty,
                        Ai = Object.getOwnPropertyDescriptor,
                        xi = "enumerable",
                        ki = "configurable",
                        Ei = "writable",
                        Si = (Do.f = Kn ? a ? function(e, t, r) {
                            var n;
                            return bi(e), t = yi(t), bi(r), "function" == typeof e && "prototype" === t && "value" in r && Ei in r && !r[Ei] && (n = Ai(e, t)) && n[Ei] && (e[t] = r.value, r = {
                                configurable: (ki in r ? r : n)[ki],
                                enumerable: (xi in r ? r : n)[xi],
                                writable: !1
                            }), wi(e, t, r)
                        } : wi : function(e, t, r) {
                            if (bi(e), t = yi(t), bi(r), vi) try {
                                return wi(e, t, r)
                            } catch (e) {}
                            if ("get" in r || "set" in r) throw _i("Accessors not supported");
                            return "value" in r && (e[t] = r.value), e
                        }, {
                            exports: {}
                        }),
                        Ri = Kn,
                        Di = xo,
                        m = Function.prototype,
                        Ti = Ri && Object.getOwnPropertyDescriptor,
                        Di = Di(m, "name"),
                        Di = {
                            EXISTS: Di,
                            PROPER: Di && "something" === function() {}.name,
                            CONFIGURABLE: Di && (!Ri || Ti(m, "name").configurable)
                        },
                        Ri = ho,
                        Ti = qn,
                        Oi = r(Function.toString);
                    Ri(Ti.inspectSource) || (Ti.inspectSource = function(e) {
                        return Oi(e)
                    });

                    function Ii(e, t) {
                        return {
                            enumerable: !(1 & e),
                            configurable: !(2 & e),
                            writable: !(4 & e),
                            value: t
                        }
                    }

                    function Ci(e) {
                        return ta[e] || (ta[e] = ea(e))
                    }

                    function Li(e, t, r, n) {
                        var o = (n = n || {}).enumerable,
                            i = void 0 !== n.name ? n.name : t;
                        if (Ea(r) && Ra(r, i, n), n.global) o ? e[t] = r : Da(t, r);
                        else {
                            try {
                                n.unsafe ? e[t] && (o = !0) : delete e[t]
                            } catch (e) {}
                            o ? e[t] = r : Sa.f(e, t, {
                                value: r,
                                enumerable: !1,
                                configurable: !n.nonConfigurable,
                                writable: !n.nonWritable
                            })
                        }
                        return e
                    }

                    function Mi(e) {
                        return Oa(Ta(e), 8, -1)
                    }

                    function Pi(e) {
                        if ("Function" === Ua(e)) return $a(e)
                    }

                    function ji(e, t) {
                        return Ba(e), void 0 === t ? e : Na ? Fa(e, t) : function() {
                            return e.apply(t, arguments)
                        }
                    }

                    function Ui(e) {
                        return (e = +e) != e || 0 == e ? 0 : qa(e)
                    }

                    function $i(e) {
                        return 0 < e ? Va(Wa(e), 9007199254740991) : 0
                    }

                    function Bi(e) {
                        return Ya(e.length)
                    }

                    function Ni() {}

                    function Fi(e) {
                        if (!es(e)) return !1;
                        try {
                            return os(Ni, ns, e), !0
                        } catch (e) {
                            return !1
                        }
                    }

                    function Gi(e) {
                        if (!es(e)) return !1;
                        switch (ts(e)) {
                            case "AsyncFunction":
                            case "GeneratorFunction":
                            case "AsyncGeneratorFunction":
                                return !1
                        }
                        try {
                            return ss || !!as(is, rs(e))
                        } catch (e) {
                            return !0
                        }
                    }

                    function zi(e, t) {
                        return new(void 0 === (r = us(e = e) && (r = e.constructor, cs(r) && (r === fs || us(r.prototype)) || ls(r) && null === (r = r[ds])) ? void 0 : r) ? fs : r)(0 === t ? 0 : t);
                        var r
                    }

                    function Hi(f) {
                        var p = 1 == f,
                            h = 2 == f,
                            m = 3 == f,
                            g = 4 == f,
                            v = 6 == f,
                            b = 7 == f,
                            y = 5 == f || v;
                        return function(e, t, r, n) {
                            for (var o, i, a = ms(e), s = hs(a), u = ps(t, r), c = gs(s), l = 0, t = n || vs, d = p ? t(e, c) : h || b ? t(e, 0) : void 0; l < c; l++)
                                if ((y || l in s) && (i = u(o = s[l], l, a), f))
                                    if (p) d[l] = i;
                                    else if (i) switch (f) {
                                case 3:
                                    return !0;
                                case 5:
                                    return o;
                                case 6:
                                    return l;
                                case 2:
                                    bs(d, o)
                            } else switch (f) {
                                case 4:
                                    return !1;
                                case 7:
                                    bs(d, o)
                            }
                            return v ? -1 : m || g ? g : d
                        }
                    }

                    function Zi(e, t) {
                        var r = [][e];
                        return !!r && ys(function() {
                            r.call(null, t || function() {
                                return 1
                            }, 1)
                        })
                    }

                    function Ki(t) {
                        if (t && t.forEach !== xs) try {
                            ks(t, "forEach", xs)
                        } catch (e) {
                            t.forEach = xs
                        }
                    }
                    var qi, Wi, Vi, Yi, Ji, m = Ti.inspectSource,
                        Ri = ho,
                        Ti = n.WeakMap,
                        Ri = Ri(Ti) && /native code/.test(String(Ti)),
                        Xi = Do,
                        Qi = Ii,
                        Ti = Kn ? function(e, t, r) {
                            return Xi.f(e, t, Qi(1, r))
                        } : function(e, t, r) {
                            return e[t] = r, e
                        },
                        ea = no,
                        ta = (0, zn.exports)("keys"),
                        v = {},
                        ra = Lr,
                        na = Ti,
                        oa = xo,
                        ia = Ci,
                        aa = v,
                        sa = "Object already initialized",
                        ua = n.TypeError,
                        ca = n.WeakMap,
                        la = Ri || qn.state ? ((Vi = qn.state || (qn.state = new ca)).get = Vi.get, Vi.has = Vi.has, Vi.set = Vi.set, qi = function(e, t) {
                            if (Vi.has(e)) throw ua(sa);
                            return t.facade = e, Vi.set(e, t), t
                        }, Wi = function(e) {
                            return Vi.get(e) || {}
                        }, function(e) {
                            return Vi.has(e)
                        }) : (aa[Yi = ia("state")] = !0, qi = function(e, t) {
                            if (oa(e, Yi)) throw ua(sa);
                            return t.facade = e, na(e, Yi, t), t
                        }, Wi = function(e) {
                            return oa(e, Yi) ? e[Yi] : {}
                        }, function(e) {
                            return oa(e, Yi)
                        }),
                        Ri = {
                            set: qi,
                            get: Wi,
                            has: la,
                            enforce: function(e) {
                                return la(e) ? Wi(e) : qi(e, {})
                            },
                            getterFor: function(t) {
                                return function(e) {
                                    if (ra(e) && (e = Wi(e)).type === t) return e;
                                    throw ua("Incompatible receiver, " + t + " required")
                                }
                            }
                        },
                        qn = r,
                        ca = Qn,
                        da = ho,
                        fa = xo,
                        pa = Kn,
                        ha = Di.CONFIGURABLE,
                        ma = m,
                        ga = Ri.enforce,
                        va = Ri.get,
                        ba = String,
                        ya = Object.defineProperty,
                        _a = qn("".slice),
                        wa = qn("".replace),
                        Aa = qn([].join),
                        xa = pa && !ca(function() {
                            return 8 !== ya(function() {}, "length", {
                                value: 8
                            }).length
                        }),
                        ka = String(String).split("String"),
                        aa = Si.exports = function(e, t, r) {
                            "Symbol(" === _a(ba(t), 0, 7) && (t = "[" + wa(ba(t), /^Symbol\(([^)]*)\)/, "$1") + "]"), r && r.getter && (t = "get " + t), r && r.setter && (t = "set " + t), (!fa(e, "name") || ha && e.name !== t) && (pa ? ya(e, "name", {
                                value: t,
                                configurable: !0
                            }) : e.name = t), xa && r && fa(r, "arity") && e.length !== r.arity && ya(e, "length", {
                                value: r.arity
                            });
                            try {
                                r && fa(r, "constructor") && r.constructor ? pa && ya(e, "prototype", {
                                    writable: !1
                                }) : e.prototype && (e.prototype = void 0)
                            } catch (e) {}
                            r = ga(e);
                            return fa(r, "source") || (r.source = Aa(ka, "string" == typeof t ? t : "")), e
                        },
                        Ea = (Function.prototype.toString = aa(function() {
                            return da(this) && va(this).source || ma(this)
                        }, "toString"), ho),
                        Sa = Do,
                        Ra = Si.exports,
                        Da = In,
                        ia = r,
                        Ta = ia({}.toString),
                        Oa = ia("".slice),
                        qn = i,
                        Ia = ho,
                        Ca = Mi,
                        La = oo("toStringTag"),
                        Ma = Object,
                        Pa = "Arguments" == Ca(function() {
                            return arguments
                        }()),
                        ca = qn ? Ca : function(e) {
                            var t;
                            return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(t = function(e, t) {
                                try {
                                    return e[t]
                                } catch (e) {}
                            }(e = Ma(e), La)) ? t : Pa ? Ca(e) : "Object" == (t = Ca(e)) && Ia(e.callee) ? "Arguments" : t
                        },
                        ja = ca,
                        aa = (i || Li(Object.prototype, "toString", i ? {}.toString : function() {
                            return "[object " + ja(this) + "]"
                        }, {
                            unsafe: !0
                        }), {
                            CSSRuleList: 0,
                            CSSStyleDeclaration: 0,
                            CSSValueList: 0,
                            ClientRectList: 0,
                            DOMRectList: 0,
                            DOMStringList: 0,
                            DOMTokenList: 1,
                            DataTransferItemList: 0,
                            FileList: 0,
                            HTMLAllCollection: 0,
                            HTMLCollection: 0,
                            HTMLFormElement: 0,
                            HTMLSelectElement: 0,
                            MediaList: 0,
                            MimeTypeArray: 0,
                            NamedNodeMap: 0,
                            NodeList: 1,
                            PaintRequestList: 0,
                            Plugin: 0,
                            PluginArray: 0,
                            SVGLengthList: 0,
                            SVGNumberList: 0,
                            SVGPathSegList: 0,
                            SVGPointList: 0,
                            SVGStringList: 0,
                            SVGTransformList: 0,
                            SourceBufferList: 0,
                            StyleSheetList: 0,
                            TextTrackCueList: 0,
                            TextTrackList: 0,
                            TouchList: 0
                        }),
                        ia = io("span").classList,
                        qn = ia && ia.constructor && ia.constructor.prototype,
                        i = qn === Object.prototype ? void 0 : qn,
                        Ua = Mi,
                        $a = r,
                        Ba = co,
                        Na = po,
                        Fa = Pi(Pi.bind),
                        ia = Qn,
                        Ga = Mi,
                        za = Object,
                        Ha = r("".split),
                        qn = ia(function() {
                            return !za("z").propertyIsEnumerable(0)
                        }) ? function(e) {
                            return "String" == Ga(e) ? Ha(e, "") : za(e)
                        } : za,
                        Za = Math.ceil,
                        Ka = Math.floor,
                        qa = Math.trunc || function(e) {
                            e = +e;
                            return (0 < e ? Ka : Za)(e)
                        },
                        Wa = Ui,
                        Va = Math.min,
                        Ya = $i,
                        Ja = Mi,
                        ia = Array.isArray || function(e) {
                            return "Array" == Ja(e)
                        },
                        Xa = r,
                        Qa = Qn,
                        es = ho,
                        ts = ca,
                        rs = m,
                        ns = [],
                        os = so("Reflect", "construct"),
                        is = /^\s*(?:class|function)\b/,
                        as = Xa(is.exec),
                        ss = !is.exec(Ni),
                        Xa = (Gi.sham = !0, !os || Qa(function() {
                            var e;
                            return Fi(Fi.call) || !Fi(Object) || !Fi(function() {
                                e = !0
                            }) || e
                        }) ? Gi : Fi),
                        us = ia,
                        cs = Xa,
                        ls = Lr,
                        ds = oo("species"),
                        fs = Array,
                        ps = ji,
                        hs = qn,
                        ms = ro,
                        gs = Bi,
                        vs = zi,
                        bs = r([].push),
                        Qa = {
                            forEach: Hi(0),
                            map: Hi(1),
                            filter: Hi(2),
                            some: Hi(3),
                            every: Hi(4),
                            find: Hi(5),
                            findIndex: Hi(6),
                            filterReject: Hi(7)
                        },
                        ys = Qn,
                        _s = Qa.forEach,
                        ws = n,
                        As = aa,
                        b = i,
                        xs = Zi("forEach") ? [].forEach : function(e) {
                            return _s(this, e, 1 < arguments.length ? arguments[1] : void 0)
                        },
                        ks = Ti;
                    for (Ji in As) As[Ji] && Ki(ws[Ji] && ws[Ji].prototype);
                    Ki(b);

                    function Es(e) {
                        return Bs(Ns(e))
                    }

                    function Ss(e, t) {
                        return (e = Ys(e)) < 0 ? Js(e + t, 0) : Xs(e, t)
                    }

                    function Rs(s) {
                        return function(e, t, r) {
                            var n, o = Qs(e),
                                i = tu(o),
                                a = eu(r, i);
                            if (s && t != t) {
                                for (; a < i;)
                                    if ((n = o[a++]) != n) return !0
                            } else
                                for (; a < i; a++)
                                    if ((s || a in o) && o[a] === t) return s || a || 0;
                            return !s && -1
                        }
                    }

                    function Ds(e, t) {
                        var r, n = nu(e),
                            o = 0,
                            i = [];
                        for (r in n) !ru(iu, r) && ru(n, r) && au(i, r);
                        for (; t.length > o;) !ru(n, r = t[o++]) || ~ou(i, r) || au(i, r);
                        return i
                    }

                    function Ts(e, t, r) {
                        for (var n = mu(t), o = vu.f, i = gu.f, a = 0; a < n.length; a++) {
                            var s = n[a];
                            hu(e, s) || r && hu(r, s) || o(e, s, i(t, s))
                        }
                    }

                    function Os(e, t) {
                        return (e = Au[wu(e)]) == ku || e != xu && (yu(t) ? bu(t) : !!t)
                    }

                    function Is(e, t) {
                        var r, n, o, i, a = e.target,
                            s = e.global,
                            u = e.stat;
                        if (r = s ? Su : u ? Su[a] || Ou(a, {}) : (Su[a] || {}).prototype)
                            for (n in t) {
                                if (o = t[n], i = e.dontCallGetSet ? (i = Ru(r, n)) && i.value : r[n], !Cu(s ? n : a + (u ? "." : "#") + n, e.forced) && void 0 !== i) {
                                    if (typeof o == typeof i) continue;
                                    Iu(o, i)
                                }(e.sham || i && i.sham) && Du(o, "sham", !0), Tu(r, n, o, e)
                            }
                    }

                    function Cs(e) {
                        return !(e = Bu("object" === U(e) ? e : function(e) {
                            if (e) try {
                                return JSON.parse(e)
                            } catch (e) {}
                        }(e))) || !e.version || $u.version >= e.version ? e : void 0
                    }

                    function Ls() {
                        var e;
                        (e = console).log.apply(e, arguments)
                    }

                    function Ms() {
                        var e;
                        (e = console).log.apply(e, arguments)
                    }
                    var b = {},
                        Ps = {},
                        js = {}.propertyIsEnumerable,
                        Us = Object.getOwnPropertyDescriptor,
                        $s = Us && !js.call({
                            1: 2
                        }, 1),
                        Bs = (Ps.f = $s ? function(e) {
                            e = Us(this, e);
                            return !!e && e.enumerable
                        } : js, qn),
                        Ns = to,
                        Fs = e,
                        Gs = Ps,
                        zs = Ii,
                        Hs = Es,
                        Zs = fo,
                        Ks = xo,
                        Ws = Po,
                        Vs = Object.getOwnPropertyDescriptor,
                        $s = (b.f = Kn ? Vs : function(e, t) {
                            if (e = Hs(e), t = Zs(t), Ws) try {
                                return Vs(e, t)
                            } catch (e) {}
                            if (Ks(e, t)) return zs(!Fs(Gs.f, e, t), e[t])
                        }, {}),
                        Ys = Ui,
                        Js = Math.max,
                        Xs = Math.min,
                        Qs = Es,
                        eu = Ss,
                        tu = Bi,
                        js = {
                            includes: Rs(!0),
                            indexOf: Rs(!1)
                        },
                        ru = xo,
                        nu = Es,
                        ou = js.indexOf,
                        iu = v,
                        au = r([].push),
                        Po = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"],
                        su = Ds,
                        uu = Po.concat("length", "prototype"),
                        cu = ($s.f = Object.getOwnPropertyNames || function(e) {
                            return su(e, uu)
                        }, {}),
                        y = (cu.f = Object.getOwnPropertySymbols, so),
                        lu = $s,
                        du = cu,
                        fu = ao,
                        pu = r([].concat),
                        y = y("Reflect", "ownKeys") || function(e) {
                            var t = lu.f(fu(e)),
                                r = du.f;
                            return r ? pu(t, r(e)) : t
                        },
                        hu = xo,
                        mu = y,
                        gu = b,
                        vu = Do,
                        bu = Qn,
                        yu = ho,
                        _u = /#|\.prototype\./,
                        wu = Os.normalize = function(e) {
                            return String(e).replace(_u, ".").toLowerCase()
                        },
                        Au = Os.data = {},
                        xu = Os.NATIVE = "N",
                        ku = Os.POLYFILL = "P",
                        Eu = Os,
                        Su = n,
                        Ru = b.f,
                        Du = Ti,
                        Tu = Li,
                        Ou = In,
                        Iu = Ts,
                        Cu = Eu,
                        Lu = Ds,
                        Mu = Po,
                        Pu = Object.keys || function(e) {
                            return Lu(e, Mu)
                        },
                        ju = ro,
                        Uu = Pu,
                        $u = (Is({
                            target: "Object",
                            stat: !0,
                            forced: Qn(function() {
                                Uu(1)
                            })
                        }, {
                            keys: function(e) {
                                return Uu(ju(e))
                            }
                        }), {
                            name: "@bygd/gd-sdk-pes",
                            version: "1.35.17",
                            files: ["dist/*"],
                            scripts: {
                                build: "NODE_ENV=production rollup --config",
                                watch: "rollup --config --watch --sourcemap --environment DEVELOPMENT",
                                "deploy-base": "npm install && npm run build && npm publish --access public",
                                deploy: "npm run deploy-base && gdtool pm-upload"
                            },
                            repository: {
                                type: "git",
                                url: "git@gitlab.azerdev.com:gamedistribution/gd-sdk-pes.git"
                            },
                            author: "",
                            license: "ISC",
                            devDependencies: {
                                "@babel/core": "^7.14.6",
                                "@babel/plugin-transform-runtime": "^7.14.5",
                                "@babel/preset-env": "^7.14.7",
                                "@rollup/plugin-babel": "^5.2.3",
                                "@rollup/plugin-commonjs": "^21.0.1",
                                "@rollup/plugin-json": "^4.1.0",
                                "@rollup/plugin-node-resolve": "^13.0.0",
                                "@rollup/plugin-replace": "^3.0.0",
                                postcss: "^8.3.5",
                                rollup: "^2.52.8",
                                "rollup-plugin-analyzer": "^4.0.0",
                                "rollup-plugin-browsersync": "^1.3.3",
                                "rollup-plugin-delete": "^2.0.0",
                                "rollup-plugin-node-polyfills": "^0.2.1",
                                "rollup-plugin-peer-deps-external": "^2.2.4",
                                "rollup-plugin-postcss": "^4.0.0",
                                "rollup-plugin-terser": "^7.0.2"
                            },
                            dependencies: {
                                "@babel/runtime": "^7.14.6",
                                "@bygd/gd-sdk-era": "^0.3.6",
                                axios: "^0.26.1",
                                "can-autoplay": "^3.0.2",
                                events: "^3.3.0",
                                "get-value": "^3.0.1",
                                "is-plain-object": "^5.0.0",
                                "is-valid-domain": "^0.1.2",
                                "js-base64": "^3.6.1",
                                "leaderboard-lib": "0.1.11",
                                "lodash.clonedeep": "^4.5.0",
                                "lodash.merge": "^4.6.2",
                                querystringify: "^2.2.0",
                                "set-value": "^4.1.0",
                                "url-parse": "^1.4.7",
                                uuid: "^8.3.2",
                                validator: "^13.6.0"
                            }
                        }),
                        Bu = function(e) {
                            var t = this;
                            if (!Jt(e) || 0 === e.length) return e;
                            if (1 === e.length) return e[0];
                            for (var r = 0, n = (e.forEach(function(e) {
                                    O(this, t), e.weight = e.weight || 1, r += e.weight
                                }.bind(this)), Math.floor(Math.random() * Math.floor(r))), r = 0, o = 0; o < e.length; o++) {
                                var i = e[o];
                                if (n < (r += i.weight)) return i
                            }
                        },
                        Nu = (JSON.stringify({
                            adapters: {
                                default: ["ima", "adsense", "ima", "adsense"],
                                preroll: ["ima", "adsense", "ima", "adsense"],
                                midroll: ["ima", "adsense", "ima", "adsense"],
                                rewarded: ["ima", "adsense", "ima", "adsense"]
                            }
                        }), JSON.stringify({
                            adapters: {
                                default: ["ima", "adsense", "ima", "adsense"],
                                preroll: ["ima", "adsense", "ima"],
                                midroll: ["ima", "adsense", "ima"],
                                rewarded: ["ima", "adsense", "ima", "adsense"]
                            }
                        }), {});

                    function Fu(e, t, r) {
                        return (t = de(t)) in e ? Object.defineProperty(e, t, {
                            value: r,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : e[t] = r, e
                    }

                    function Gu(e) {
                        if ("Symbol" === zu(e)) throw TypeError("Cannot convert a Symbol value to a string");
                        return Hu(e)
                    }
                    var zu = ca,
                        Hu = String,
                        Zu = {},
                        Ku = Do,
                        qu = ao,
                        Wu = Es,
                        Vu = Pu;
                    Zu.f = Kn && !a ? Object.defineProperties : function(e, t) {
                        qu(e);
                        for (var r, n = Wu(t), o = Vu(t), i = o.length, a = 0; a < i;) Ku.f(e, r = o[a++], n[r]);
                        return e
                    };

                    function Yu() {}

                    function Ju(e) {
                        e.write(Dc("")), e.close();
                        var t = e.parentWindow.Object;
                        return e = null, t
                    }

                    function Xu(e, t, r) {
                        (t = Oc(t)) in e ? Ic.f(e, t, Cc(0, r)) : e[t] = r
                    }

                    function Qu(e, t, r) {
                        for (var n = Mc(e), o = Lc(t, n), i = Lc(void 0 === r ? n : r, n), a = jc(Uc(i - o, 0)), s = 0; o < i; o++, s++) Pc(a, s, e[o]);
                        return a.length = s, a
                    }

                    function ec(e, t, r) {
                        return r.get && zc(r.get, t, {
                            getter: !0
                        }), r.set && zc(r.set, t, {
                            setter: !0
                        }), Hc.f(e, t, r)
                    }

                    function tc(e) {
                        var t = Zc.Symbol || (Zc.Symbol = {});
                        Kc(t, e) || Wc(t, e, {
                            value: qc.f(e)
                        })
                    }

                    function rc(e, t, r) {
                        (e = e && !r ? e.prototype : e) && !Qc(e, el) && Xc(e, el, {
                            configurable: !0,
                            value: t
                        })
                    }

                    function nc(e, t) {
                        var r = $l[e] = fl(Il);
                        return Dl(r, {
                            type: Sl,
                            tag: e,
                            description: t
                        }), ol || (r.description = t), r
                    }

                    function oc(e, t, r) {
                        return e === Ol && oc(Bl, t, r), sl(e), t = cl(t), sl(r), (il($l, t) ? (r.enumerable ? (il(e, El) && e[El][t] && (e[El][t] = !1), r = fl(r, {
                            enumerable: dl(0, !1)
                        })) : (il(e, El) || Ml(e, El, dl(1, {})), e[El][t] = !0), Fl) : Ml)(e, t, r)
                    }

                    function ic(t, e) {
                        sl(t);
                        var r = ul(e),
                            e = pl(r).concat(cc(r));
                        return kl(e, function(e) {
                            ol && !nl(ac, r, e) || oc(t, e, r[e])
                        }), t
                    }

                    function ac(e) {
                        var e = cl(e),
                            t = nl(jl, this, e);
                        return !(this === Ol && il($l, e) && !il(Bl, e)) && (!(t || !il(this, e) || !il($l, e) || il(this, El) && this[El][e]) || t)
                    }

                    function sc(e, t) {
                        var r, e = ul(e),
                            t = cl(t);
                        if (e !== Ol || !il($l, t) || il(Bl, t)) return !(r = Ll(e, t)) || !il($l, t) || il(e, El) && e[El][t] || (r.enumerable = !0), r
                    }

                    function uc(e) {
                        var e = Pl(ul(e)),
                            t = [];
                        return kl(e, function(e) {
                            il($l, e) || il(_l, e) || Ul(t, e)
                        }), t
                    }

                    function cc(e) {
                        var t = e === Ol,
                            e = Pl(t ? Bl : ul(e)),
                            r = [];
                        return kl(e, function(e) {
                            !il($l, e) || t && !il(Ol, e) || Ul(r, $l[e])
                        }), r
                    }

                    function lc(e, t) {
                        var r = cd(arguments),
                            n = function(e) {
                                if (ed(e)) return e;
                                if (Ql(e)) {
                                    for (var t = e.length, n = [], r = 0; r < t; r++) {
                                        var o = e[r];
                                        "string" == typeof o ? nd(n, o) : "number" != typeof o && "Number" != td(o) && "String" != td(o) || nd(n, rd(o))
                                    }
                                    var i = n.length,
                                        a = !0;
                                    return function(e, t) {
                                        if (a) return a = !1, t;
                                        if (Ql(this)) return t;
                                        for (var r = 0; r < i; r++)
                                            if (n[r] === e) return t
                                    }
                                }
                            }(t);
                        if (sd(n) || void 0 !== e && !ud(e)) return r[1] = function(e, t) {
                            if (sd(n) && (t = ad(n, this, ld(e), t)), !ud(t)) return t
                        }, id(dd, null, r)
                    }

                    function dc(e, t, r) {
                        var n = pd(r, t - 1),
                            r = pd(r, t + 1);
                        return fd(bd, e) && !fd(yd, r) || fd(yd, e) && !fd(bd, n) ? "\\u" + gd(hd(e, 0), 16) : e
                    }

                    function fc(t) {
                        return 51 <= Ed || !kd(function() {
                            var e = [];
                            return (e.constructor = {})[Sd] = function() {
                                return {
                                    foo: 1
                                }
                            }, 1 !== e[t](Boolean).foo
                        })
                    }

                    function pc(e, t, r) {
                        var n, o;
                        Kd(e);
                        try {
                            if (!(n = qd(e, "return"))) {
                                if ("throw" === t) throw r;
                                return r
                            }
                            n = Zd(n, e)
                        } catch (e) {
                            o = !0, n = e
                        }
                        if ("throw" === t) throw r;
                        if (o) throw n;
                        return Kd(n), r
                    }

                    function hc(e) {
                        return void 0 !== e && (Yd.Array === e || Xd[Jd] === e)
                    }

                    function mc(e) {
                        if (!t0(e)) return e0(e, n0) || e0(e, "@@iterator") || r0[Qd(e)]
                    }

                    function gc(e, t) {
                        if (t = arguments.length < 2 ? u0(e) : t, i0(t)) return a0(o0(t, e));
                        throw c0(s0(e) + " is not iterable")
                    }

                    function vc(e) {
                        var t = f0(e),
                            e = h0(this),
                            r = 1 < (l = arguments.length) ? arguments[1] : void 0,
                            n = void 0 !== r;
                        n && (r = l0(r, 2 < l ? arguments[2] : void 0));
                        var o, i, a, s, u, c, l = b0(t),
                            d = 0;
                        if (!l || this === y0 && p0(l))
                            for (o = m0(t), i = e ? new this(o) : y0(o); d < o; d++) c = n ? r(t[d], d) : t[d], g0(i, d, c);
                        else
                            for (u = (s = v0(t, l)).next, i = e ? new this : []; !(a = d0(u, s)).done; d++) c = n ? function(e, t, r, n) {
                                try {
                                    return n ? t(Wd(r)[0], r[1]) : t(r)
                                } catch (t) {
                                    Vd(e, "throw", t)
                                }
                            }(s, r, [a.value, d], !0) : a.value, g0(i, d, c);
                        return i.length = d, i
                    }
                    var bc, yc, a = so("document", "documentElement"),
                        _c = ao,
                        wc = Zu,
                        Ac = Po,
                        Po = v,
                        xc = a,
                        kc = io,
                        Ec = "prototype",
                        Sc = "script",
                        Rc = Ci("IE_PROTO"),
                        Dc = function(e) {
                            return "<" + Sc + ">" + e + "</" + Sc + ">"
                        },
                        Tc = function() {
                            try {
                                bc = new ActiveXObject("htmlfile")
                            } catch (e) {}
                            var e, t, r;
                            Tc = "undefined" == typeof document || document.domain && bc ? Ju(bc) : (t = kc("iframe"), r = "java" + Sc + ":", t.style.display = "none", xc.appendChild(t), t.src = String(r), (e = t.contentWindow.document).open(), e.write(Dc("document.F=Object")), e.close(), e.F);
                            for (var n = Ac.length; n--;) delete Tc[Ec][Ac[n]];
                            return Tc()
                        },
                        Po = (Po[Rc] = !0, Object.create || function(e, t) {
                            var r;
                            return null !== e ? (Yu[Ec] = _c(e), r = new Yu, Yu[Ec] = null, r[Rc] = e) : r = Tc(), void 0 === t ? r : wc.f(r, t)
                        }),
                        _ = {},
                        Oc = fo,
                        Ic = Do,
                        Cc = Ii,
                        Lc = Ss,
                        Mc = Bi,
                        Pc = Xu,
                        jc = Array,
                        Uc = Math.max,
                        $c = Mi,
                        Bc = Es,
                        Nc = $s.f,
                        Fc = Qu,
                        Gc = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
                        zc = (_.f = function(e) {
                            if (!Gc || "Window" != $c(e)) return Nc(Bc(e));
                            var t = e;
                            try {
                                return Nc(t)
                            } catch (t) {
                                return Fc(Gc)
                            }
                        }, Si.exports),
                        Hc = Do,
                        Si = {},
                        Zc = (Si.f = oo, n),
                        Kc = xo,
                        qc = Si,
                        Wc = Do.f,
                        Vc = e,
                        Yc = so,
                        w = oo,
                        Jc = Li,
                        Xc = Do.f,
                        Qc = xo,
                        el = oo("toStringTag"),
                        tl = Is,
                        rl = n,
                        nl = e,
                        A = r,
                        ol = Kn,
                        x = go,
                        k = Qn,
                        il = xo,
                        al = Wo,
                        sl = ao,
                        ul = Es,
                        cl = fo,
                        ll = Gu,
                        dl = Ii,
                        fl = Po,
                        pl = Pu,
                        hl = $s,
                        ml = cu,
                        E = b,
                        S = Do,
                        gl = Ps,
                        vl = Li,
                        bl = ec,
                        yl = zn.exports,
                        _l = v,
                        wl = no,
                        Al = oo,
                        v = Si,
                        xl = tc,
                        Si = rc,
                        R = Ri,
                        kl = Qa.forEach,
                        El = Ci("hidden"),
                        Sl = "Symbol",
                        Rl = "prototype",
                        Dl = R.set,
                        Tl = R.getterFor(Sl),
                        Ol = Object[Rl],
                        R = rl.Symbol,
                        Il = R && R[Rl],
                        Cl = rl.TypeError,
                        rl = rl.QObject,
                        Ll = E.f,
                        Ml = S.f,
                        Pl = _.f,
                        jl = gl.f,
                        Ul = A([].push),
                        $l = yl("symbols"),
                        Bl = yl("op-symbols"),
                        A = yl("wks"),
                        Nl = !rl || !rl[Rl] || !rl[Rl].findChild,
                        Fl = ol && k(function() {
                            return 7 != fl(Ml({}, "a", {
                                get: function() {
                                    return Ml(this, "a", {
                                        value: 7
                                    }).a
                                }
                            })).a
                        }) ? function(e, t, r) {
                            var n = Ll(Ol, t);
                            n && delete Ol[t], Ml(e, t, r), n && e !== Ol && Ml(Ol, t, n)
                        } : Ml,
                        k = (x || (vl(Il = (R = function() {
                            if (al(Il, this)) throw Cl("Symbol is not a constructor");
                            var e = arguments.length && void 0 !== arguments[0] ? ll(arguments[0]) : void 0,
                                t = wl(e),
                                r = function(e) {
                                    this === Ol && nl(r, Bl, e), il(this, El) && il(this[El], t) && (this[El][t] = !1), Fl(this, t, dl(1, e))
                                };
                            return ol && Nl && Fl(Ol, t, {
                                configurable: !0,
                                set: r
                            }), nc(t, e)
                        })[Rl], "toString", function() {
                            return Tl(this).tag
                        }), vl(R, "withoutSetter", function(e) {
                            return nc(wl(e), e)
                        }), gl.f = ac, S.f = oc, Zu.f = ic, E.f = sc, hl.f = _.f = uc, ml.f = cc, v.f = function(e) {
                            return nc(Al(e), e)
                        }, ol && (bl(Il, "description", {
                            configurable: !0,
                            get: function() {
                                return Tl(this).description
                            }
                        }), vl(Ol, "propertyIsEnumerable", ac, {
                            unsafe: !0
                        }))), tl({
                            global: !0,
                            constructor: !0,
                            wrap: !0,
                            forced: !x,
                            sham: !x
                        }, {
                            Symbol: R
                        }), kl(pl(A), function(e) {
                            xl(e)
                        }), tl({
                            target: Sl,
                            stat: !0,
                            forced: !x
                        }, {
                            useSetter: function() {
                                Nl = !0
                            },
                            useSimple: function() {
                                Nl = !1
                            }
                        }), tl({
                            target: "Object",
                            stat: !0,
                            forced: !x,
                            sham: !ol
                        }, {
                            create: function(e, t) {
                                return void 0 === t ? fl(e) : ic(fl(e), t)
                            },
                            defineProperty: oc,
                            defineProperties: ic,
                            getOwnPropertyDescriptor: sc
                        }), tl({
                            target: "Object",
                            stat: !0,
                            forced: !x
                        }, {
                            getOwnPropertyNames: uc
                        }), yl = (yl = Yc("Symbol")) && yl.prototype, yc = yl && yl.valueOf, rl = w("toPrimitive"), yl && !yl[rl] && Jc(yl, rl, function(e) {
                            return Vc(yc, this)
                        }, {
                            arity: 1
                        }), Si(R, Sl), _l[El] = !0, go && !!Symbol.for && !!Symbol.keyFor),
                        Rl = Is,
                        Gl = so,
                        zl = xo,
                        Hl = Gu,
                        gl = zn.exports,
                        S = k,
                        Zl = gl("string-to-symbol-registry"),
                        Kl = gl("symbol-to-string-registry"),
                        Zu = (Rl({
                            target: "Symbol",
                            stat: !0,
                            forced: !S
                        }, {
                            for: function(e) {
                                var t, e = Hl(e);
                                return zl(Zl, e) ? Zl[e] : (t = Gl("Symbol")(e), Zl[e] = t, Kl[t] = e, t)
                            }
                        }), Is),
                        ql = xo,
                        Wl = o,
                        Vl = uo,
                        E = k,
                        Yl = (0, zn.exports)("symbol-to-string-registry"),
                        hl = (Zu({
                            target: "Symbol",
                            stat: !0,
                            forced: !E
                        }, {
                            keyFor: function(e) {
                                if (!Wl(e)) throw TypeError(Vl(e) + " is not a symbol");
                                if (ql(Yl, e)) return Yl[e]
                            }
                        }), po),
                        _ = Function.prototype,
                        Jl = _.apply,
                        Xl = _.call,
                        ml = "object" == typeof Reflect && Reflect.apply || (hl ? Xl.bind(Jl) : function() {
                            return Xl.apply(Jl, arguments)
                        }),
                        v = r([].slice),
                        Ql = ia,
                        ed = ho,
                        td = Mi,
                        rd = Gu,
                        nd = r([].push),
                        bl = Is,
                        od = so,
                        id = ml,
                        ad = e,
                        vl = r,
                        A = Qn,
                        sd = ho,
                        ud = o,
                        cd = v,
                        tl = go,
                        ld = String,
                        dd = od("JSON", "stringify"),
                        fd = vl(/./.exec),
                        pd = vl("".charAt),
                        hd = vl("".charCodeAt),
                        md = vl("".replace),
                        gd = vl(1..toString),
                        vd = /[\uD800-\uDFFF]/g,
                        bd = /^[\uD800-\uDBFF]$/,
                        yd = /^[\uDC00-\uDFFF]$/,
                        _d = !tl || A(function() {
                            var e = od("Symbol")();
                            return "[null]" != dd([e]) || "{}" != dd({
                                a: e
                            }) || "{}" != dd(Object(e))
                        }),
                        wd = A(function() {
                            return '"\\udf06\\ud834"' !== dd("\udf06\ud834") || '"\\udead"' !== dd("\udead")
                        }),
                        Ad = (dd && bl({
                            target: "JSON",
                            stat: !0,
                            arity: 3,
                            forced: _d || wd
                        }, {
                            stringify: function(e, t, r) {
                                var n = cd(arguments),
                                    n = id(_d ? lc : dd, null, n);
                                return wd && "string" == typeof n ? md(n, vd, dc) : n
                            }
                        }), cu),
                        xd = ro,
                        kd = (Is({
                            target: "Object",
                            stat: !0,
                            forced: !go || Qn(function() {
                                Ad.f(1)
                            })
                        }, {
                            getOwnPropertySymbols: function(e) {
                                var t = Ad.f;
                                return t ? t(xd(e)) : []
                            }
                        }), Qn),
                        Ed = t,
                        Sd = oo("species"),
                        Rd = Qa.filter,
                        x = (Is({
                            target: "Array",
                            proto: !0,
                            forced: !fc("filter")
                        }, {
                            filter: function(e) {
                                return Rd(this, e, 1 < arguments.length ? arguments[1] : void 0)
                            }
                        }), Is),
                        Yc = Qn,
                        Dd = Es,
                        Td = b.f,
                        w = Kn,
                        Od = (x({
                            target: "Object",
                            stat: !0,
                            forced: !w || Yc(function() {
                                Td(1)
                            }),
                            sham: !w
                        }, {
                            getOwnPropertyDescriptor: function(e, t) {
                                return Td(Dd(e), t)
                            }
                        }), y),
                        Id = Es,
                        Cd = b,
                        Ld = Xu,
                        Jc = (Is({
                            target: "Object",
                            stat: !0,
                            sham: !Kn
                        }, {
                            getOwnPropertyDescriptors: function(e) {
                                for (var t, r, n = Id(e), o = Cd.f, i = Od(n), a = {}, s = 0; i.length > s;) void 0 !== (r = o(n, t = i[s++])) && Ld(a, t, r);
                                return a
                            }
                        }), Is),
                        Md = ia,
                        Pd = Xa,
                        jd = Lr,
                        Ud = Ss,
                        $d = Bi,
                        Bd = Es,
                        Nd = Xu,
                        yl = oo,
                        Fd = v,
                        rl = fc("slice"),
                        Gd = yl("species"),
                        zd = Array,
                        Hd = Math.max,
                        Zd = (Jc({
                            target: "Array",
                            proto: !0,
                            forced: !rl
                        }, {
                            slice: function(e, t) {
                                var r, n, o, i = Bd(this),
                                    a = $d(i),
                                    s = Ud(e, a),
                                    u = Ud(void 0 === t ? a : t, a);
                                if (Md(i) && (r = i.constructor, (r = Pd(r) && (r === zd || Md(r.prototype)) || jd(r) && null === (r = r[Gd]) ? void 0 : r) === zd || void 0 === r)) return Fd(i, s, u);
                                for (n = new(void 0 === r ? zd : r)(Hd(u - s, 0)), o = 0; s < u; s++, o++) s in i && Nd(n, o, i[s]);
                                return n.length = o, n
                            }
                        }), e),
                        Kd = ao,
                        qd = lo,
                        Wd = ao,
                        Vd = pc,
                        Si = {},
                        Yd = Si,
                        Jd = oo("iterator"),
                        Xd = Array.prototype,
                        Qd = ca,
                        e0 = lo,
                        t0 = eo,
                        r0 = Si,
                        n0 = oo("iterator"),
                        o0 = e,
                        i0 = co,
                        a0 = ao,
                        s0 = uo,
                        u0 = mc,
                        c0 = TypeError,
                        l0 = ji,
                        d0 = e,
                        f0 = ro,
                        p0 = hc,
                        h0 = Xa,
                        m0 = Bi,
                        g0 = Xu,
                        v0 = gc,
                        b0 = mc,
                        y0 = Array,
                        _0 = oo("iterator"),
                        w0 = !1;
                    try {
                        var A0 = 0,
                            x0 = {
                                next: function() {
                                    return {
                                        done: !!A0++
                                    }
                                },
                                return: function() {
                                    w0 = !0
                                }
                            };
                        x0[_0] = function() {
                            return this
                        }, Array.from(x0, function() {
                            throw 2
                        })
                    } catch (mk) {}

                    function k0(e, t) {
                        if (t || w0) {
                            var r = !1;
                            try {
                                var n = {};
                                n[_0] = function() {
                                    return {
                                        next: function() {
                                            return {
                                                done: r = !0
                                            }
                                        }
                                    }
                                }, e(n)
                            } catch (e) {}
                            return r
                        }
                    }
                    R = vc;
                    Is({
                        target: "Array",
                        stat: !0,
                        forced: !k0(function(e) {
                            Array.from(e)
                        })
                    }, {
                        from: R
                    });

                    function E0(o) {
                        return function(e, t) {
                            var r, e = D0(T0(e)),
                                t = R0(t),
                                n = e.length;
                            return t < 0 || n <= t ? o ? "" : void 0 : (r = I0(e, t)) < 55296 || 56319 < r || t + 1 === n || (n = I0(e, t + 1)) < 56320 || 57343 < n ? o ? O0(e, t) : r : o ? C0(e, t, t + 2) : n - 56320 + (r - 55296 << 10) + 65536
                        }
                    }
                    var S0, gl = r,
                        R0 = Ui,
                        D0 = Gu,
                        T0 = to,
                        O0 = gl("".charAt),
                        I0 = gl("".charCodeAt),
                        C0 = gl("".slice),
                        Rl = {
                            codeAt: E0(!1),
                            charAt: E0(!0)
                        },
                        S = !Qn(function() {
                            function e() {}
                            return e.prototype.constructor = null, Object.getPrototypeOf(new e) !== e.prototype
                        }),
                        L0 = xo,
                        M0 = ho,
                        P0 = ro,
                        k = S,
                        j0 = Ci("IE_PROTO"),
                        U0 = Object,
                        $0 = U0.prototype,
                        Zu = k ? U0.getPrototypeOf : function(e) {
                            var t, e = P0(e);
                            return L0(e, j0) ? e[j0] : (t = e.constructor, M0(t) && e instanceof t ? t.prototype : e instanceof U0 ? $0 : null)
                        },
                        E = Qn,
                        po = ho,
                        _ = Lr,
                        hl = Zu,
                        o = Li,
                        B0 = oo("iterator"),
                        vl = !1;
                    [].keys && ("next" in (tl = [].keys()) ? (A = hl(hl(tl))) !== Object.prototype && (S0 = A) : vl = !0);

                    function N0() {
                        return this
                    }

                    function F0(e, t, r, n) {
                        return t += " Iterator", e.prototype = tf(ef, {
                            next: rf(+!n, r)
                        }), nf(e, t, !1), of[t] = N0, e
                    }

                    function G0() {
                        return this
                    }

                    function z0(e, t, r, n, o, i, a) {
                        function s(e) {
                            if (e === o && p) return p;
                            if (!Ef && e in d) return d[e];
                            switch (e) {
                                case "keys":
                                case Rf:
                                case Df:
                                    return function() {
                                        return new r(this, e)
                                    }
                            }
                            return function() {
                                return new r(this)
                            }
                        }
                        mf(r, t, n);
                        var u, c, n = t + " Iterator",
                            l = !1,
                            d = e.prototype,
                            f = d[Sf] || d["@@iterator"] || o && d[o],
                            p = !Ef && f || s(o),
                            h = "Array" == t && d.entries || f;
                        if (h && (h = gf(h.call(new e))) !== Object.prototype && h.next && (gf(h) !== kf && (vf ? vf(h, kf) : hf(h[Sf]) || _f(h, Sf, G0)), bf(h, n, !0)), Af && o == Rf && f && f.name !== Rf && (xf ? yf(d, "name", Rf) : (l = !0, p = function() {
                                return pf(f, this)
                            })), o)
                            if (u = {
                                    values: s(Rf),
                                    keys: i ? p : s("keys"),
                                    entries: s(Df)
                                }, a)
                                for (c in u) !Ef && !l && c in d || _f(d, c, u[c]);
                            else ff({
                                target: t,
                                proto: !0,
                                forced: Ef || l
                            }, u);
                        return d[Sf] !== p && _f(d, Sf, p, {
                            name: o
                        }), wf[t] = p, u
                    }

                    function H0(e, t) {
                        return {
                            value: e,
                            done: t
                        }
                    }

                    function Z0() {
                        var e = Pf(this),
                            t = "";
                        return e.hasIndices && (t += "d"), e.global && (t += "g"), e.ignoreCase && (t += "i"), e.multiline && (t += "m"), e.dotAll && (t += "s"), e.unicode && (t += "u"), e.unicodeSets && (t += "v"), e.sticky && (t += "y"), t
                    }

                    function K0(e) {
                        ap[ip][e] = !0
                    }
                    po((S0 = !_(S0) || E(function() {
                        var e = {};
                        return S0[B0].call(e) !== e
                    }) ? {} : S0)[B0]) || o(S0, B0, function() {
                        return this
                    });
                    var q0, W0, V0, Y0, J0, X0, Q0, bl = {
                            IteratorPrototype: S0,
                            BUGGY_SAFARI_ITERATORS: vl
                        },
                        ef = bl.IteratorPrototype,
                        tf = Po,
                        rf = Ii,
                        nf = rc,
                        of = Si,
                        af = r,
                        sf = co,
                        uf = ho,
                        cf = String,
                        lf = TypeError,
                        df = ao,
                        go = Object.setPrototypeOf || ("__proto__" in {} ? function() {
                            var r, n = !1,
                                e = {};
                            try {
                                (r = function(e, t, r) {
                                    try {
                                        return af(sf(Object.getOwnPropertyDescriptor(e, t)[r]))
                                    } catch (e) {}
                                }(Object.prototype, "__proto__", "set"))(e, []), n = e instanceof Array
                            } catch (r) {}
                            return function(e, t) {
                                return df(e),
                                    function(e) {
                                        if ("object" == typeof e || uf(e)) return;
                                        throw lf("Can't set " + cf(e) + " as a prototype")
                                    }(t), n ? r(e, t) : e.__proto__ = t, e
                            }
                        }() : void 0),
                        ff = Is,
                        pf = e,
                        hf = ho,
                        mf = F0,
                        gf = Zu,
                        vf = go,
                        bf = rc,
                        yf = Ti,
                        _f = Li,
                        wf = Si,
                        Af = Di.PROPER,
                        xf = Di.CONFIGURABLE,
                        kf = bl.IteratorPrototype,
                        Ef = bl.BUGGY_SAFARI_ITERATORS,
                        Sf = oo("iterator"),
                        Rf = "values",
                        Df = "entries",
                        Tf = Rl.charAt,
                        Of = Gu,
                        x = Ri,
                        Yc = z0,
                        If = H0,
                        Cf = "String Iterator",
                        Lf = x.set,
                        Mf = x.getterFor(Cf),
                        Pf = (Yc(String, "String", function(e) {
                            Lf(this, {
                                type: Cf,
                                string: Of(e),
                                index: 0
                            })
                        }, function() {
                            var e = Mf(this),
                                t = e.string,
                                r = e.index;
                            return r >= t.length ? If(void 0, !0) : (t = Tf(t, r), e.index += t.length, If(t, !1))
                        }), ao),
                        w = Qn,
                        jf = n.RegExp,
                        y = w(function() {
                            var e = jf("a", "y");
                            return e.lastIndex = 2, null != e.exec("abcd")
                        }),
                        yl = y || w(function() {
                            return !jf("a", "y").sticky
                        }),
                        Jc = {
                            BROKEN_CARET: y || w(function() {
                                var e = jf("^r", "gy");
                                return e.lastIndex = 2, null != e.exec("str")
                            }),
                            MISSED_STICKY: yl,
                            UNSUPPORTED_Y: y
                        },
                        rl = Qn,
                        Uf = n.RegExp,
                        x0 = rl(function() {
                            var e = Uf(".", "s");
                            return !(e.dotAll && e.exec("\n") && "s" === e.flags)
                        }),
                        R = Qn,
                        $f = n.RegExp,
                        gl = R(function() {
                            var e = $f("(?<a>b)", "g");
                            return "b" !== e.exec("b").groups.a || "bc" !== "b".replace(e, "$<a>c")
                        }),
                        Bf = e,
                        S = r,
                        Nf = Gu,
                        Ff = Z0,
                        k = Jc,
                        hl = zn.exports,
                        Gf = Po,
                        zf = Ri.get,
                        tl = x0,
                        A = gl,
                        Hf = hl("native-string-replace", String.prototype.replace),
                        Zf = RegExp.prototype.exec,
                        Kf = Zf,
                        qf = S("".charAt),
                        Wf = S("".indexOf),
                        Vf = S("".replace),
                        Yf = S("".slice),
                        Jf = (po = /b*/g, Bf(Zf, _ = /a/, "a"), Bf(Zf, po, "a"), 0 !== _.lastIndex || 0 !== po.lastIndex),
                        Xf = k.BROKEN_CARET,
                        Qf = void 0 !== /()??/.exec("")[1],
                        E = Kf = Jf || Qf || Xf || tl || A ? function(e) {
                            var t, r, n, o, i, a, s = this,
                                u = zf(s),
                                e = Nf(e),
                                c = u.raw;
                            if (c) return c.lastIndex = s.lastIndex, d = Bf(Kf, c, e), s.lastIndex = c.lastIndex, d;
                            var l = u.groups,
                                c = Xf && s.sticky,
                                d = Bf(Ff, s),
                                u = s.source,
                                f = 0,
                                p = e;
                            if (c && (d = Vf(d, "y", ""), -1 === Wf(d, "g") && (d += "g"), p = Yf(e, s.lastIndex), 0 < s.lastIndex && (!s.multiline || s.multiline && "\n" !== qf(e, s.lastIndex - 1)) && (u = "(?: " + u + ")", p = " " + p, f++), t = new RegExp("^(?:" + u + ")", d)), Qf && (t = new RegExp("^" + u + "$(?!\\s)", d)), Jf && (r = s.lastIndex), n = Bf(Zf, c ? t : s, p), c ? n ? (n.input = Yf(n.input, f), n[0] = Yf(n[0], f), n.index = s.lastIndex, s.lastIndex += n[0].length) : s.lastIndex = 0 : Jf && n && (s.lastIndex = s.global ? n.index + n[0].length : r), Qf && n && 1 < n.length && Bf(Hf, n[0], t, function() {
                                    for (o = 1; o < arguments.length - 2; o++) void 0 === arguments[o] && (n[o] = void 0)
                                }), n && l)
                                for (n.groups = i = Gf(null), o = 0; o < l.length; o++) i[(a = l[o])[0]] = n[a[1]];
                            return n
                        } : Kf,
                        o = (Is({
                            target: "RegExp",
                            proto: !0,
                            forced: /./.exec !== E
                        }, {
                            exec: E
                        }), Is),
                        vl = r,
                        ep = xo,
                        Zu = ho,
                        tp = Wo,
                        rp = Gu,
                        bl = ec,
                        x = Ts,
                        np = n.Symbol,
                        op = np && np.prototype,
                        w = (!Kn || !Zu(np) || "description" in op && void 0 === np().description || (q0 = {}, x(Yc = function() {
                            var e = arguments.length < 1 || void 0 === arguments[0] ? void 0 : rp(arguments[0]),
                                t = tp(op, this) ? new np(e) : void 0 === e ? np() : np(e);
                            return "" === e && (q0[t] = !0), t
                        }, np), (Yc.prototype = op).constructor = Yc, W0 = "Symbol(test)" == String(np("test")), V0 = vl(op.valueOf), Y0 = vl(op.toString), J0 = /^Symbol\((.*)\)[^)]+$/, X0 = vl("".replace), Q0 = vl("".slice), bl(op, "description", {
                            configurable: !0,
                            get: function() {
                                var e = V0(this);
                                return ep(q0, e) ? "" : (e = Y0(e), "" === (e = W0 ? Q0(e, 7, -1) : X0(e, J0, "$1")) ? void 0 : e)
                            }
                        }), o({
                            global: !0,
                            constructor: !0,
                            forced: !0
                        }, {
                            Symbol: Yc
                        })), tc("iterator"), oo),
                        yl = Po,
                        y = Do.f,
                        ip = w("unscopables"),
                        ap = Array.prototype,
                        sp = (null == ap[ip] && y(ap, ip, {
                            configurable: !0,
                            value: yl(null)
                        }), Es),
                        rl = K0,
                        R = Si,
                        zn = Ri,
                        hl = Do.f,
                        S = z0,
                        up = H0,
                        _ = Kn,
                        cp = "Array Iterator",
                        lp = zn.set,
                        dp = zn.getterFor(cp),
                        po = S(Array, "Array", function(e, t) {
                            lp(this, {
                                type: cp,
                                target: sp(e),
                                index: 0,
                                kind: t
                            })
                        }, function() {
                            var e = dp(this),
                                t = e.target,
                                r = e.kind,
                                n = e.index++;
                            return !t || n >= t.length ? (e.target = void 0, up(void 0, !0)) : up("keys" == r ? n : "values" == r ? t[n] : [n, t[n]], !1)
                        }, "values"),
                        k = R.Arguments = R.Array;
                    if (rl("keys"), rl("values"), rl("entries"), _ && "values" !== k.name) try {
                        hl(k, "name", {
                            value: "values"
                        })
                    } catch (mk) {}

                    function fp(e, t) {
                        if (e) {
                            if (e[bp] !== _p) try {
                                vp(e, bp, _p)
                            } catch (t) {
                                e[bp] = _p
                            }
                            if (e[yp] || vp(e, yp, t), mp[t])
                                for (var r in gp)
                                    if (e[r] !== gp[r]) try {
                                        vp(e, r, gp[r])
                                    } catch (t) {
                                        e[r] = gp[r]
                                    }
                        }
                    }
                    var pp, hp = n,
                        mp = aa,
                        tl = i,
                        gp = po,
                        vp = Ti,
                        A = oo,
                        bp = A("iterator"),
                        yp = A("toStringTag"),
                        _p = gp.values;
                    for (pp in mp) fp(hp[pp] && hp[pp].prototype, pp);
                    fp(tl, "DOMTokenList");

                    function wp(e) {
                        e = Ip(e), Lp && e && !e[Mp] && Cp(e, Mp, {
                            configurable: !0,
                            get: function() {
                                return this
                            }
                        })
                    }

                    function Ap(e, t) {
                        if (Pp(t, e)) return e;
                        throw jp("Incorrect invocation")
                    }

                    function xp(e, t) {
                        var r, e = Np(e).constructor;
                        if (void 0 === e || Fp(r = Np(e)[Gp])) return t;
                        if (Up(e = r)) return e;
                        throw Bp($p(e) + " is not a constructor")
                    }

                    function kp(e, t) {
                        if (e < t) throw zp("Not enough arguments");
                        return e
                    }

                    function Ep(e) {
                        return function() {
                            ih(e)
                        }
                    }

                    function Sp(e) {
                        ih(e.data)
                    }

                    function Rp(e) {
                        Hp.postMessage(th(e), Tp.protocol + "//" + Tp.host)
                    }

                    function Dp() {
                        this.head = null, this.tail = null
                    }
                    var Tp, Op, Zu = void 0 !== i3 && "process" == Mi(i3),
                        Ip = so,
                        Cp = ec,
                        Lp = Kn,
                        Mp = oo("species"),
                        Pp = Wo,
                        jp = TypeError,
                        Up = Xa,
                        $p = uo,
                        Bp = TypeError,
                        Np = ao,
                        Fp = eo,
                        Gp = oo("species"),
                        zp = TypeError,
                        x = /(?:ipad|iphone|ipod).*applewebkit/i.test(Ro),
                        Hp = n,
                        Zp = ml,
                        vl = ji,
                        Kp = ho,
                        qp = xo,
                        bl = Qn,
                        Wp = a,
                        Vp = v,
                        Yp = io,
                        Jp = kp,
                        o = x,
                        Yc = Zu,
                        w = Hp.setImmediate,
                        y = Hp.clearImmediate,
                        Xp = Hp.process,
                        Qp = Hp.Dispatch,
                        eh = Hp.Function,
                        yl = Hp.MessageChannel,
                        th = Hp.String,
                        rh = 0,
                        nh = {},
                        oh = "onreadystatechange",
                        ih = (bl(function() {
                            Tp = Hp.location
                        }), function(e) {
                            var t;
                            qp(nh, e) && (t = nh[e], delete nh[e], t())
                        }),
                        S = (w && y || (w = function(e) {
                            Jp(arguments.length, 1);
                            var t = Kp(e) ? e : eh(e),
                                r = Vp(arguments, 1);
                            return nh[++rh] = function() {
                                Zp(t, void 0, r)
                            }, Op(rh), rh
                        }, y = function(e) {
                            delete nh[e]
                        }, Yc ? Op = function(e) {
                            Xp.nextTick(Ep(e))
                        } : Qp && Qp.now ? Op = function(e) {
                            Qp.now(Ep(e))
                        } : yl && !o ? (zn = (Si = new yl).port2, Si.port1.onmessage = Sp, Op = vl(zn.postMessage, zn)) : Hp.addEventListener && Kp(Hp.postMessage) && !Hp.importScripts && Tp && "file:" !== Tp.protocol && !bl(Rp) ? (Op = Rp, Hp.addEventListener("message", Sp, !1)) : Op = oh in Yp("script") ? function(e) {
                            Wp.appendChild(Yp("script"))[oh] = function() {
                                Wp.removeChild(this), ih(e)
                            }
                        } : function(e) {
                            setTimeout(Ep(e), 0)
                        }), {
                            set: w,
                            clear: y
                        });
                    Dp.prototype = {
                        add: function(e) {
                            var e = {
                                    item: e,
                                    next: null
                                },
                                t = this.tail;
                            t ? t.next = e : this.head = e, this.tail = e
                        },
                        get: function() {
                            var e = this.head;
                            if (e) return null === (this.head = e.next) && (this.tail = null), e.item
                        }
                    };

                    function ah(e) {
                        try {
                            return {
                                error: !1,
                                value: e()
                            }
                        } catch (e) {
                            return {
                                error: !0,
                                value: e
                            }
                        }
                    }

                    function sh(e) {
                        var r, n;
                        this.promise = new e(function(e, t) {
                            if (void 0 !== r || void 0 !== n) throw Sh("Bad Promise constructor");
                            r = e, n = t
                        }), this.resolve = Eh(r), this.reject = Eh(n)
                    }
                    var uh, ch, lh, dh, fh, ph, R = Dp,
                        rl = /ipad|iphone|ipod/i.test(Ro) && "undefined" != typeof Pebble,
                        _ = /web0s(?!.*chrome)/i.test(Ro),
                        hl = n,
                        k = ji,
                        aa = b.f,
                        hh = S.set,
                        i = R,
                        po = x,
                        A = rl,
                        tl = _,
                        mh = Zu,
                        Xa = hl.MutationObserver || hl.WebKitMutationObserver,
                        a = hl.document,
                        gh = hl.process,
                        v = hl.Promise,
                        Yc = aa(hl, "queueMicrotask"),
                        o = Yc && Yc.value,
                        Si = (o || (dh = new i, fh = function() {
                            var e, t;
                            for (mh && (e = gh.domain) && e.exit(); t = dh.get();) try {
                                t()
                            } catch (e) {
                                throw dh.head && ph(), e
                            }
                            e && e.enter()
                        }, ph = po || mh || tl || !Xa || !a ? !A && v && v.resolve ? ((yl = v.resolve(void 0)).constructor = v, lh = k(yl.then, yl), function() {
                            lh(fh)
                        }) : mh ? function() {
                            gh.nextTick(fh)
                        } : (hh = k(hh, hl), function() {
                            hh(fh)
                        }) : (uh = !0, ch = a.createTextNode(""), new Xa(fh).observe(ch, {
                            characterData: !0
                        }), function() {
                            ch.data = uh = !uh
                        }), o = function(e) {
                            dh.head || ph(), dh.add(e)
                        }), o),
                        vl = n.Promise,
                        zn = "object" == typeof Deno && Deno && "object" == typeof Deno.version,
                        bl = !zn && !Zu && "object" == typeof window && "object" == typeof document,
                        w = n,
                        vh = vl,
                        y = ho,
                        Ro = Eu,
                        bh = m,
                        x = oo,
                        yh = bl,
                        _h = zn,
                        wh = t,
                        Ah = (vh && vh.prototype, x("species")),
                        xh = !1,
                        kh = y(w.PromiseRejectionEvent),
                        rl = {
                            CONSTRUCTOR: Ro("Promise", function() {
                                var e = bh(vh),
                                    t = e !== String(vh);
                                if (!t && 66 === wh) return !0;
                                if (!wh || wh < 51 || !/native code/.test(e)) {
                                    var e = new vh(function(e) {
                                            e(1)
                                        }),
                                        r = function(e) {
                                            e(function() {}, function() {})
                                        };
                                    if ((e.constructor = {})[Ah] = r, !(xh = e.then(function() {}) instanceof r)) return !0
                                }
                                return !t && (yh || _h) && !kh
                            }),
                            REJECTION_EVENT: kh,
                            SUBCLASSING: xh
                        },
                        _ = {},
                        Eh = co,
                        Sh = TypeError;
                    _.f = function(e) {
                        return new sh(e)
                    };

                    function Rh(e, t) {
                        var r, n, o, i, a = t.value,
                            s = 1 == t.state,
                            u = s ? e.ok : e.fail,
                            c = e.resolve,
                            l = e.reject,
                            d = e.domain;
                        try {
                            u ? (s || (2 === t.rejection && (i = t, Lh(Bh, Ch, function() {
                                var e = i.facade;
                                Ih ? Jh.emit("rejectionHandled", e) : om("rejectionhandled", e, i.value)
                            })), t.rejection = 1), !0 === u ? r = a : (d && d.enter(), r = u(a), d && (d.exit(), o = !0)), r === e.promise ? l(Vh("Promise-chain cycle")) : (n = rm(r)) ? Lh(n, r, c, l) : c(r)) : l(a)
                        } catch (e) {
                            d && !o && d.exit(), l(e)
                        }
                    }
                    var Dh, Th, Oh, aa = Is,
                        Ih = Zu,
                        Ch = n,
                        Lh = e,
                        Yc = Li,
                        i = go,
                        po = rc,
                        tl = wp,
                        Mh = co,
                        Ph = ho,
                        jh = Lr,
                        Uh = Ap,
                        $h = xp,
                        Bh = S.set,
                        Nh = Si,
                        Fh = ah,
                        Gh = R,
                        A = Ri,
                        v = vl,
                        yl = _,
                        zh = "Promise",
                        k = rl.CONSTRUCTOR,
                        Hh = rl.REJECTION_EVENT,
                        hl = rl.SUBCLASSING,
                        Zh = A.getterFor(zh),
                        Kh = A.set,
                        a = v && v.prototype,
                        qh = v,
                        Wh = a,
                        Vh = Ch.TypeError,
                        Yh = Ch.document,
                        Jh = Ch.process,
                        Xh = yl.f,
                        Qh = Xh,
                        em = !!(Yh && Yh.createEvent && Ch.dispatchEvent),
                        tm = "unhandledrejection",
                        rm = function(e) {
                            var t;
                            return !(!jh(e) || !Ph(t = e.then)) && t
                        },
                        nm = function(r, o) {
                            r.notified || (r.notified = !0, Nh(function() {
                                for (var e, n, t = r.reactions; e = t.get();) Rh(e, r);
                                r.notified = !1, o && !r.rejection && (n = r, Lh(Bh, Ch, function() {
                                    var e, t = n.facade,
                                        r = n.value;
                                    if (im(n) && (e = Fh(function() {
                                            Ih ? Jh.emit("unhandledRejection", r, t) : om(tm, t, r)
                                        }), n.rejection = Ih || im(n) ? 2 : 1, e.error)) throw e.value
                                }))
                            }))
                        },
                        om = function(e, t, r) {
                            var n;
                            em ? ((n = Yh.createEvent("Event")).promise = t, n.reason = r, n.initEvent(e, !1, !0), Ch.dispatchEvent(n)) : n = {
                                promise: t,
                                reason: r
                            }, !Hh && (t = Ch["on" + e]) ? t(n) : e === tm && function(e, t) {
                                try {
                                    1 == arguments.length ? console.error(e) : console.error(e, t)
                                } catch (e) {}
                            }("Unhandled promise rejection", r)
                        },
                        im = function(e) {
                            return 1 !== e.rejection && !e.parent
                        },
                        am = function(t, r, n) {
                            return function(e) {
                                t(r, e, n)
                            }
                        },
                        sm = function(e, t, r) {
                            e.done || (e.done = !0, (e = r ? r : e).value = t, e.state = 2, nm(e, !0))
                        },
                        um = function(r, e, t) {
                            if (!r.done) {
                                r.done = !0, t && (r = t);
                                try {
                                    if (r.facade === e) throw Vh("Promise can't be resolved itself");
                                    var n = rm(e);
                                    n ? Nh(function() {
                                        var t = {
                                            done: !1
                                        };
                                        try {
                                            Lh(n, e, am(um, t, r), am(sm, t, r))
                                        } catch (e) {
                                            sm(t, e, r)
                                        }
                                    }) : (r.value = e, r.state = 1, nm(r, !1))
                                } catch (e) {
                                    sm({
                                        done: !1
                                    }, e, r)
                                }
                            }
                        };
                    if (k && (Wh = (qh = function(e) {
                            Uh(this, Wh), Mh(e), Lh(Dh, this);
                            var t = Zh(this);
                            try {
                                e(am(um, t), am(sm, t))
                            } catch (e) {
                                sm(t, e)
                            }
                        }).prototype, (Dh = function(e) {
                            Kh(this, {
                                type: zh,
                                done: !1,
                                notified: !1,
                                parent: !1,
                                reactions: new Gh,
                                rejection: !1,
                                state: 0,
                                value: void 0
                            })
                        }).prototype = Yc(Wh, "then", function(e, t) {
                            var r = Zh(this),
                                n = Xh($h(this, qh));
                            return r.parent = !0, n.ok = !Ph(e) || e, n.fail = Ph(t) && t, n.domain = Ih ? Jh.domain : void 0, 0 == r.state ? r.reactions.add(n) : Nh(function() {
                                Rh(n, r)
                            }), n.promise
                        }), Th = function() {
                            var e = new Dh,
                                t = Zh(e);
                            this.promise = e, this.resolve = am(um, t), this.reject = am(sm, t)
                        }, yl.f = Xh = function(e) {
                            return e === qh || void 0 === e ? new Th : Qh(e)
                        }, Ph(v)) && a !== Object.prototype) {
                        Oh = a.then, hl || Yc(a, "then", function(e, t) {
                            var r = this;
                            return new qh(function(e, t) {
                                Lh(Oh, r, e, t)
                            }).then(e, t)
                        }, {
                            unsafe: !0
                        });
                        try {
                            delete a.constructor
                        } catch (mk) {}
                        i && i(a, Wh)
                    }
                    aa({
                        global: !0,
                        constructor: !0,
                        wrap: !0,
                        forced: k
                    }, {
                        Promise: qh
                    }), po(qh, zh, !1), tl(zh);

                    function cm(e, t) {
                        this.stopped = e, this.result = t
                    }

                    function lm(e, t, r) {
                        function n(e) {
                            return i && Am(i, "normal", e), new cm(!0, e)
                        }

                        function o(e) {
                            return f ? (mm(e), m ? g(e[0], e[1], n) : g(e[0], e[1])) : m ? g(e, n) : g(e)
                        }
                        var i, a, s, u, c, l, d = r && r.that,
                            f = !(!r || !r.AS_ENTRIES),
                            p = !(!r || !r.IS_RECORD),
                            h = !(!r || !r.IS_ITERATOR),
                            m = !(!r || !r.INTERRUPTED),
                            g = pm(t, d);
                        if (p) i = e.iterator;
                        else if (h) i = e;
                        else {
                            if (!(r = wm(e))) throw xm(gm(e) + " is not iterable");
                            if (vm(r)) {
                                for (a = 0, s = bm(e); a < s; a++)
                                    if ((u = o(e[a])) && ym(km, u)) return u;
                                return new cm(!1)
                            }
                            i = _m(e, r)
                        }
                        for (c = (p ? e : i).next; !(l = hm(c, i)).done;) {
                            try {
                                u = o(l.value)
                            } catch (e) {
                                Am(i, "throw", e)
                            }
                            if ("object" == typeof u && u && ym(km, u)) return u
                        }
                        return new cm(!1)
                    }

                    function dm(e, t) {
                        return $m(e), Bm(t) && t.constructor === e ? t : ((0, (e = Nm.f(e)).resolve)(t), e.promise)
                    }

                    function fm(e) {
                        if (9007199254740991 < e) throw Gm("Maximum allowed index exceeded")
                    }
                    var pm = ji,
                        hm = e,
                        mm = ao,
                        gm = uo,
                        vm = hc,
                        bm = Bi,
                        ym = Wo,
                        _m = gc,
                        wm = mc,
                        Am = pc,
                        xm = TypeError,
                        km = cm.prototype,
                        Em = vl,
                        Xa = rl.CONSTRUCTOR || !k0(function(e) {
                            Em.all(e).then(void 0, function() {})
                        }),
                        Sm = e,
                        Rm = co,
                        Dm = _,
                        Tm = ah,
                        Om = lm,
                        o = (Is({
                            target: "Promise",
                            stat: !0,
                            forced: Xa
                        }, {
                            all: function(e) {
                                var s = this,
                                    t = Dm.f(s),
                                    u = t.resolve,
                                    c = t.reject,
                                    r = Tm(function() {
                                        var n = Rm(s.resolve),
                                            o = [],
                                            i = 0,
                                            a = 1;
                                        Om(e, function(e) {
                                            var t = i++,
                                                r = !1;
                                            a++, Sm(n, s, e).then(function(e) {
                                                r || (r = !0, o[t] = e, --a) || u(o)
                                            }, c)
                                        }), --a || u(o)
                                    });
                                return r.error && c(r.value), t.promise
                            }
                        }), Is),
                        m = vl,
                        bl = so,
                        zn = ho,
                        x = Li,
                        y = m && m.prototype,
                        Im = (o({
                            target: "Promise",
                            proto: !0,
                            forced: rl.CONSTRUCTOR,
                            real: !0
                        }, {
                            catch: function(e) {
                                return this.then(void 0, e)
                            }
                        }), zn(m) && (w = bl("Promise").prototype.catch, y.catch !== w) && x(y, "catch", w, {
                            unsafe: !0
                        }), e),
                        Cm = co,
                        Lm = _,
                        Mm = ah,
                        Pm = lm,
                        jm = (Is({
                            target: "Promise",
                            stat: !0,
                            forced: Xa
                        }, {
                            race: function(e) {
                                var r = this,
                                    n = Lm.f(r),
                                    o = n.reject,
                                    t = Mm(function() {
                                        var t = Cm(r.resolve);
                                        Pm(e, function(e) {
                                            Im(t, r, e).then(n.resolve, o)
                                        })
                                    });
                                return t.error && o(t.value), n.promise
                            }
                        }), e),
                        Um = _,
                        $m = (Is({
                            target: "Promise",
                            stat: !0,
                            forced: rl.CONSTRUCTOR
                        }, {
                            reject: function(e) {
                                var t = Um.f(this);
                                return jm(t.reject, void 0, e), t.promise
                            }
                        }), ao),
                        Bm = Lr,
                        Nm = _,
                        Ro = Is,
                        Zu = rl.CONSTRUCTOR,
                        Fm = dm,
                        Gm = (so("Promise"), Ro({
                            target: "Promise",
                            stat: !0,
                            forced: Zu
                        }, {
                            resolve: function(e) {
                                return Fm(this, e)
                            }
                        }), TypeError),
                        S = Is,
                        Si = Qn,
                        zm = ia,
                        Hm = Lr,
                        Zm = ro,
                        Km = Bi,
                        qm = Xu,
                        Wm = zi,
                        R = fc,
                        A = t,
                        Vm = oo("isConcatSpreadable"),
                        yl = 51 <= A || !Si(function() {
                            var e = [];
                            return e[Vm] = !1, e.concat()[0] !== e
                        }),
                        v = (S({
                            target: "Array",
                            proto: !0,
                            arity: 1,
                            forced: !yl || !R("concat")
                        }, {
                            concat: function(e) {
                                for (var t, r, n, o, i, a = Zm(this), s = Wm(a, 0), u = 0, c = -1, l = arguments.length; c < l; c++)
                                    if (o = n = -1 === c ? a : arguments[c], i = void 0, !Hm(o) || (void 0 !== (i = o[Vm]) ? !i : !zm(o))) fm(u + 1), qm(s, u++, n);
                                    else
                                        for (r = Km(n), fm(u + r), t = 0; t < r; t++, u++) t in n && qm(s, u, n[t]);
                                return s.length = u, s
                            }
                        }), Kn),
                        hl = Di.EXISTS,
                        Yc = r,
                        i = ec,
                        a = Function.prototype,
                        Ym = Yc(a.toString),
                        Jm = /function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,
                        Xm = Yc(Jm.exec);

                    function Qm(e, t) {
                        (null == t || t > e.length) && (t = e.length);
                        for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                        return n
                    }

                    function eg(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function tg(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? eg(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : eg(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }
                    v && !hl && i(a, "name", {
                        configurable: !0,
                        get: function() {
                            try {
                                return Xm(Jm, Ym(this))[1]
                            } catch (e) {
                                return ""
                            }
                        }
                    });

                    function rg(e, t) {
                        fg[e] = tg(tg({}, t), {}, {
                            isLoading: !1
                        })
                    }

                    function ng(e) {
                        var n = this,
                            o = e.id,
                            i = e.src;
                        return new Promise(function(e, t) {
                            var r;
                            O(this, n), document.getElementById(o) ? e() : ((r = document.createElement("script")).onload = function() {
                                e()
                            }, r.id = o, r.setAttribute("crossorigin", !0), r.src = i, document.head.appendChild(r))
                        }.bind(this))
                    }

                    function og(e) {
                        var t;
                        return mg(e) && (void 0 !== (t = e[vg]) ? !!t : "RegExp" == gg(e))
                    }

                    function ig(e) {
                        if (bg(e)) throw yg("The method doesn't accept regular expressions");
                        return e
                    }

                    function ag(t) {
                        var r = /./;
                        try {
                            "/./" [t](r)
                        } catch (e) {
                            try {
                                return r[_g] = !1, "/./" [t](r)
                            } catch (t) {}
                        }
                        return !1
                    }

                    function sg(e) {
                        var t = e.flags;
                        return void 0 !== t || "flags" in Cg || Tg(e, "flags") || !Og(Cg, e) ? t : Dg(Ig, e)
                    }

                    function ug(r, e, t, n) {
                        var a, o = Fg(r),
                            s = !Ng(function() {
                                var e = {};
                                return e[o] = function() {
                                    return 7
                                }, 7 != "" [r](e)
                            }),
                            i = s && !Ng(function() {
                                var e = !1,
                                    t = /a/;
                                return "split" === r && ((t = {}).constructor = {}, t.constructor[zg] = function() {
                                    return t
                                }, t.flags = "", t[o] = /./ [o]), t.exec = function() {
                                    return e = !0, null
                                }, t[o](""), !e
                            });
                        s && i && !t || (a = Ug(/./ [o]), i = e(o, "" [r], function(e, t, r, n, o) {
                            var e = Ug(e),
                                i = t.exec;
                            return i === Bg || i === Hg.exec ? s && !o ? {
                                done: !0,
                                value: a(t, r, n)
                            } : {
                                done: !0,
                                value: e(r, t, n)
                            } : {
                                done: !1
                            }
                        }), $g(String.prototype, r, i[0]), $g(Hg, o, i[1])), n && Gg(Hg[o], "sham", !0)
                    }

                    function cg(e, t) {
                        var r = e.exec;
                        if (qg(r)) return null !== (r = Zg(r, e, t)) && Kg(r), r;
                        if ("RegExp" === Wg(e)) return Zg(Vg, e, t);
                        throw Yg("RegExp#exec called on incompatible receiver")
                    }
                    var lg, dg = {
                            react: {
                                src: "https://pm.azerioncircle.com/react/16.14.0/umd/react.production.min.js",
                                name: "React"
                            },
                            "react-dom": {
                                src: "https://pm.azerioncircle.com/react-dom/16.14.0/umd/react-dom.production.min.js",
                                name: "ReactDOM"
                            },
                            redux: {
                                src: "https://pm.azerioncircle.com/redux/4.0.5/dist/redux.min.js",
                                name: "Redux"
                            },
                            "react-redux": {
                                src: "https://pm.azerioncircle.com/react-redux/7.2.1/dist/react-redux.min.js",
                                name: "ReactRedux"
                            },
                            "material-ui-core": {
                                src: "https://pm.azerioncircle.com/@material-ui/core/4.11.3/umd/material-ui.production.min.js",
                                name: "MaterialUI"
                            }
                        },
                        fg = {},
                        pg = (lg = d(I.mark(function e(t) {
                            var r, n, o, i, a, s;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        if (r = window[t]) return e.abrupt("return", r);
                                        e.next = 3;
                                        break;
                                    case 3:
                                        if ((n = fg[t]).isLoading) return e.abrupt("return");
                                        e.next = 6;
                                        break;
                                    case 6:
                                        n.isLoading = !0, o = function e(t, r) {
                                            var n, o, i, a, s = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                                            if (s) return i = !(o = !0), {
                                                s: function() {
                                                    s = s.call(t)
                                                },
                                                n: function() {
                                                    var e = s.next();
                                                    return o = e.done, e
                                                },
                                                e: function(e) {
                                                    i = !0, n = e
                                                },
                                                f: function() {
                                                    try {
                                                        o || null == s.return || s.return()
                                                    } finally {
                                                        if (i) throw n
                                                    }
                                                }
                                            };
                                            if (Array.isArray(t) || (s = function(e) {
                                                    var t;
                                                    if (e) return "string" == typeof e ? Qm(e, void 0) : "Map" === (t = "Object" === (t = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : t) || "Set" === t ? Array.from(e) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? Qm(e, void 0) : void 0
                                                }(t)) || r && t && "number" == typeof t.length) return s && (t = s), a = 0, {
                                                s: r = function() {},
                                                n: function() {
                                                    return a >= t.length ? {
                                                        done: !0
                                                    } : {
                                                        done: !1,
                                                        value: t[a++]
                                                    }
                                                },
                                                e: function(e) {
                                                    throw e
                                                },
                                                f: r
                                            };
                                            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                        }(n.dependencies), e.prev = 8, o.s();
                                    case 10:
                                        if ((a = o.n()).done) e.next = 26;
                                        else {
                                            if (i = a.value, e.prev = 12, a = dg[i].name, window[a]) return e.abrupt("continue", 24);
                                            e.next = 16
                                        }
                                        break;
                                    case 16:
                                        return e.next = 18, ng({
                                            id: i,
                                            src: dg[i].src
                                        });
                                    case 18:
                                        e.next = 24;
                                        break;
                                    case 20:
                                        e.prev = 20, e.t0 = e.catch(12), a = i.id, s = i.src, console.log("Could not load external script ".concat(a, " ").concat(s), e.t0);
                                    case 24:
                                        e.next = 10;
                                        break;
                                    case 26:
                                        e.next = 31;
                                        break;
                                    case 28:
                                        e.prev = 28, e.t1 = e.catch(8), o.e(e.t1);
                                    case 31:
                                        return e.prev = 31, o.f(), e.finish(31);
                                    case 34:
                                        return e.prev = 34, e.next = 37, ng({
                                            id: t,
                                            src: n.source
                                        });
                                    case 37:
                                        r = window[t], e.next = 43;
                                        break;
                                    case 40:
                                        e.prev = 40, e.t2 = e.catch(34), console.log("Could not load module ".concat(t, " ").concat(n.source, "."), e.t2);
                                    case 43:
                                        return n.isLoading = !1, e.abrupt("return", r);
                                    case 45:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, null, [
                                [8, 28, 31, 34],
                                [12, 20],
                                [34, 40]
                            ])
                        })), function(e) {
                            return lg.apply(this, arguments)
                        }),
                        hg = new(pe(function e() {
                            var t, r, n = this;
                            le(this, e), Fu(this, "load", d(I.mark(function e() {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, pg("Leaderboard");
                                        case 2:
                                            n.leaderboard = e.sent;
                                        case 3:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            }))), Fu(this, "showLeaderboard", (r = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (r = window.GD_OPTIONS.gameId, n.leaderboard) {
                                                e.next = 4;
                                                break
                                            }
                                            return e.next = 4, n.load();
                                        case 4:
                                            n.leaderboard.showLeaderBoard(r, t);
                                        case 5:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return r.apply(this, arguments)
                            })), Fu(this, "addScore", (t = d(I.mark(function e(t) {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (n.leaderboard) {
                                                e.next = 3;
                                                break
                                            }
                                            return e.next = 3, n.load();
                                        case 3:
                                            n.leaderboard.addScore(t);
                                        case 4:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return t.apply(this, arguments)
                            })), this.moduleName = "Leaderboard", this.moduleConfig = {
                                source: "https://pm.azerioncircle.com/@bygd/gd-sdk-leaderboard/0.1.43/dist/default/iife/index.js",
                                dependencies: ["react", "react-dom", "redux", "react-redux", "material-ui-core"]
                            }, rg(this.moduleName, this.moduleConfig)
                        })),
                        mg = Lr,
                        gg = Mi,
                        vg = oo("match"),
                        bg = og,
                        yg = TypeError,
                        _g = oo("match"),
                        aa = Is,
                        k = Pi,
                        po = b.f,
                        wg = $i,
                        Ag = Gu,
                        xg = ig,
                        kg = to,
                        tl = ag,
                        Eg = k("".startsWith),
                        Sg = k("".slice),
                        Rg = Math.min,
                        o = tl("startsWith"),
                        Dg = (aa({
                            target: "String",
                            proto: !0,
                            forced: !(!o && (zn = po(String.prototype, "startsWith")) && !zn.writable || o)
                        }, {
                            startsWith: function(e) {
                                var t = Ag(kg(this)),
                                    r = (xg(e), wg(Rg(1 < arguments.length ? arguments[1] : void 0, t.length))),
                                    e = Ag(e);
                                return Eg ? Eg(t, e, r) : Sg(t, r, r + e.length) === e
                            }
                        }), e),
                        Tg = xo,
                        Og = Wo,
                        Ig = Z0,
                        Cg = RegExp.prototype,
                        m = Di.PROPER,
                        bl = Li,
                        Lg = ao,
                        Mg = Gu,
                        x = Qn,
                        Pg = sg,
                        y = "toString",
                        jg = RegExp.prototype[y],
                        w = x(function() {
                            return "/a/b" != jg.call({
                                source: "a",
                                flags: "b"
                            })
                        }),
                        Xa = m && jg.name != y,
                        Ug = ((w || Xa) && bl(RegExp.prototype, y, function() {
                            var e = Lg(this);
                            return "/" + Mg(e.source) + "/" + Mg(Pg(e))
                        }, {
                            unsafe: !0
                        }), Pi),
                        $g = Li,
                        Bg = E,
                        Ng = Qn,
                        Fg = oo,
                        Gg = Ti,
                        zg = Fg("species"),
                        Hg = RegExp.prototype,
                        _ = Object.is || function(e, t) {
                            return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t
                        },
                        Zg = e,
                        Kg = ao,
                        qg = ho,
                        Wg = Mi,
                        Vg = E,
                        Yg = TypeError,
                        Jg = e,
                        Xg = ao,
                        Qg = eo,
                        ev = to,
                        tv = _,
                        rv = Gu,
                        nv = lo,
                        ov = cg;

                    function iv(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function av(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? iv(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : iv(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }
                    ug("search", function(n, o, i) {
                        return [function(e) {
                            var t = ev(this),
                                r = Qg(e) ? void 0 : nv(e, n);
                            return r ? Jg(r, e, t) : new RegExp(e)[n](rv(t))
                        }, function(e) {
                            var t = Xg(this),
                                e = rv(e),
                                r = i(o, t, e);
                            return r.done ? r.value : (r = t.lastIndex, tv(r, 0) || (t.lastIndex = 0), e = ov(t, e), tv(t.lastIndex, r) || (t.lastIndex = r), null === e ? -1 : e.index)
                        }]
                    });
                    pe(Uv, [{
                        key: "getBridgeContext",
                        value: function() {
                            var e = this._isTokenGameURL(),
                                t = this._isMasterGameURL(),
                                r = this._isExtHostedGameURL(),
                                n = (e || r ? this._getTokenGameURLConfig() : {}) || {},
                                o = decodeURIComponent((e || r) && n.parentURL ? n.parentURL : pn()),
                                i = decodeURIComponent((e || r) && n.parentDomain ? n.parentDomain : fn()),
                                a = decodeURIComponent((e || r) && n.topDomain ? n.topDomain : r && 0 === yn() ? i : An()),
                                s = (e || r) && n.loaderEnabled,
                                u = (e || r) && n.loaderEnabled,
                                c = (e || r) && n.loaderEnabled,
                                l = (e || r) && n.loaderEnabled,
                                d = (e || r) && n.loaderEnabled,
                                f = (e || r) && n.loaderEnabled,
                                p = (e || r) && n.loaderEnabled,
                                h = (console.log("noMinijuegosSDK", p), (e || r) && n.loaderEnabled),
                                m = (e || r) && n.loaderEnabled && n.hasImpression && "1.1.24" <= n.version;
                            return {
                                isTokenGameURL: e,
                                isMasterGameURL: t,
                                isExtHostedGameURL: r,
                                noConsoleBanner: s,
                                noLoadedEvent: u,
                                noBlockerEvent: c,
                                noPreroll: h,
                                parentURL: o,
                                parentDomain: i,
                                topDomain: a && a.length ? a : i,
                                noGAPageView: l,
                                noLotamePageView: d,
                                noGamedockSDK: f,
                                noMinijuegosSDK: p,
                                version: n.version,
                                pauseGameOnStartup: m,
                                depth: yn(),
                                domainMatched: i === a,
                                exports: {
                                    formatTokenURLSearch: this._formatTokenURLSearch.bind(this),
                                    extendUrlQuery: this._extendUrlQuery.bind(this),
                                    base64Encode: this._base64_encode.bind(this)
                                }
                            }
                        }
                    }, {
                        key: "_isMasterGameURL",
                        value: function() {
                            var e = /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Fa-f0-9]{32})(.*)$/i;
                            return e.test(location.href) || !this._isTokenGameURL() && e.test(document.referrer)
                        }
                    }, {
                        key: "_isTokenGameURL",
                        value: function() {
                            var e = /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Za-z0-9]{8})\/(.*)$/i;
                            return e.test(location.href) || e.test(document.referrer)
                        }
                    }, {
                        key: "_isExtHostedGameURL",
                        value: function() {
                            var e = /^http[s]?:\/\/.*?gd_sdk_referrer_url=.*$/i;
                            return e.test(location.href) || e.test(document.referrer)
                        }
                    }, {
                        key: "_isLoaderGameURL",
                        value: function() {
                            return /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Fa-f0-9]{32})(.*)$/i.test(location.href) && location.href.startsWith("https://html5.gamedistribution.com")
                        }
                    }, {
                        key: "_getTokenGameURLConfig",
                        value: function() {
                            try {
                                var e, t = /http[s]?:\/\/html5\.gamedistribution\.com\/[A-Za-z0-9]{8}\/[A-Fa-f0-9]{32}\/.*/i;
                                if (t.test(location.href)) {
                                    var r = new ce(location.href, !0);
                                    if (!r.query.gd_zone_config) return;
                                    e = r.query.gd_zone_config
                                } else if (t.test(document.referrer)) {
                                    var n = new ce(document.referrer, !0);
                                    if (!n.query.gd_zone_config) return;
                                    e = n.query.gd_zone_config
                                } else {
                                    var o = new ce(location.href, !0);
                                    if (!o.query.gd_zone_config) return;
                                    e = o.query.gd_zone_config
                                }
                                return JSON.parse(ln(decodeURIComponent(e)))
                            } catch (e) {}
                        }
                    }, {
                        key: "_formatTokenURLSearch",
                        value: function(e) {
                            var t = "";
                            try {
                                t = encodeURIComponent(cn(JSON.stringify(e)))
                            } catch (e) {}
                            try {
                                var r = new ce(location.href, !0);
                                return r.query = r.query || {}, r.query.gd_zone_config = t, "?".concat(qs.stringify(r.query))
                            } catch (e) {
                                return "?gd_zone_config=".concat(t)
                            }
                        }
                    }, {
                        key: "_extendUrlQuery",
                        value: function(e, t) {
                            e = new ce(e, !0);
                            return e.query = av(av({}, e.query), t), e.toString()
                        }
                    }, {
                        key: "_base64_encode",
                        value: function(e) {
                            return cn(JSON.stringify(e))
                        }
                    }]);
                    var sv = Uv,
                        uv = function() {
                            try {
                                return (new sv).getBridgeContext()
                            } catch (e) {
                                return {}
                            }
                        }(),
                        cv = {
                            userDeclinedTracking: 0 <= document.location.search.indexOf("gdpr-tracking=0") || 0 <= document.cookie.indexOf("ogdpr_tracking=0"),
                            whitelabelPartner: (rl = !1, rl = (Ro = mn()).hasOwnProperty("xanthophyll") && "true" === Ro.xanthophyll ? !0 : rl)
                        },
                        lv = Rl.charAt,
                        Zu = r,
                        dv = ro,
                        fv = Math.floor,
                        pv = Zu("".charAt),
                        hv = Zu("".replace),
                        mv = Zu("".slice),
                        gv = /\$([$&'`]|\d{1,2}|<[^>]*>)/g,
                        vv = /\$([$&'`]|\d{1,2})/g,
                        bv = ml,
                        yv = e,
                        ia = r,
                        t = ug,
                        A = Qn,
                        _v = ao,
                        wv = ho,
                        Av = eo,
                        xv = Ui,
                        kv = $i,
                        Ev = Gu,
                        Sv = to,
                        Rv = lo,
                        Dv = cg,
                        Tv = oo("replace"),
                        Ov = Math.max,
                        Iv = Math.min,
                        Cv = ia([].concat),
                        Lv = ia([].push),
                        Mv = ia("".indexOf),
                        Pv = ia("".slice),
                        Si = "$0" === "a".replace(/./, "$0"),
                        jv = !!/./ [Tv] && "" === /./ [Tv]("a", "$0");

                    function Uv() {
                        le(this, Uv)
                    }
                    t("replace", function(e, w, A) {
                        var x = jv ? "$" : "$0";
                        return [function(e, t) {
                            var r = Sv(this),
                                n = Av(e) ? void 0 : Rv(e, Tv);
                            return n ? yv(n, e, r, t) : yv(w, Ev(r), e, t)
                        }, function(e, t) {
                            var r = _v(this),
                                n = Ev(e);
                            if ("string" == typeof t && -1 === Mv(t, x) && -1 === Mv(t, "$<")) {
                                e = A(w, r, n, t);
                                if (e.done) return e.value
                            }
                            var o, i = wv(t),
                                a = (i || (t = Ev(t)), r.global);
                            a && (o = r.unicode, r.lastIndex = 0);
                            for (var s, u, c = [];;) {
                                var l = Dv(r, n);
                                if (null === l) break;
                                if (Lv(c, l), !a) break;
                                "" === Ev(l[0]) && (r.lastIndex = (s = n, (u = kv(r.lastIndex)) + (o ? lv(s, u).length : 1)))
                            }
                            for (var d, f = "", p = 0, h = 0; h < c.length; h++) {
                                for (var m = Ev((l = c[h])[0]), g = Ov(Iv(xv(l.index), n.length), 0), v = [], b = 1; b < l.length; b++) Lv(v, void 0 === (d = l[b]) ? d : String(d));
                                var y = l.groups,
                                    _ = i ? (_ = Cv([m], v, g, n), void 0 !== y && Lv(_, y), Ev(bv(t, void 0, _))) : function(i, a, s, u, c, e) {
                                        var l = s + i.length,
                                            d = u.length,
                                            t = vv;
                                        return void 0 !== c && (c = dv(c), t = gv), hv(e, t, function(e, t) {
                                            var r;
                                            switch (pv(t, 0)) {
                                                case "$":
                                                    return "$";
                                                case "&":
                                                    return i;
                                                case "`":
                                                    return mv(a, 0, s);
                                                case "'":
                                                    return mv(a, l);
                                                case "<":
                                                    r = c[mv(t, 1, -1)];
                                                    break;
                                                default:
                                                    var n, o = +t;
                                                    if (0 == o) return e;
                                                    if (d < o) return 0 !== (n = fv(o / 10)) && n <= d ? void 0 === u[n - 1] ? pv(t, 1) : u[n - 1] + pv(t, 1) : e;
                                                    r = u[o - 1]
                                            }
                                            return void 0 === r ? "" : r
                                        })
                                    }(m, n, g, v, y, t);
                                p <= g && (f += Pv(n, p, g) + _, p = g + m.length)
                            }
                            return f + Pv(n, p)
                        }]
                    }, !!A(function() {
                        var e = /./;
                        return e.exec = function() {
                            var e = [];
                            return e.groups = {
                                a: "7"
                            }, e
                        }, "7" !== "".replace(e, "$<a>")
                    }) || !Si || jv);

                    function $v(e, t) {
                        var r = e.length,
                            n = eb(r / 2);
                        if (r < 8) {
                            for (var o, i, a = e, s = t, u = a.length, c = 1; c < u;) {
                                for (o = a[i = c]; i && 0 < s(a[i - 1], o);) a[i] = a[--i];
                                i !== c++ && (a[i] = o)
                            }
                            return a
                        }
                        for (var l = e, d = $v(Qv(e, 0, n), t), f = $v(Qv(e, n), t), p = t, h = d.length, m = f.length, g = 0, v = 0; g < h || v < m;) l[g + v] = g < h && v < m ? p(d[g], f[v]) <= 0 ? d[g++] : f[v++] : g < h ? d[g++] : f[v++];
                        return l
                    }

                    function Bv(e) {
                        var t;
                        return nb ? (t = Ab(tb, e)) && t.value : tb[e]
                    }

                    function Nv(t) {
                        try {
                            return Tb(t)
                        } catch (e) {
                            return t
                        }
                    }

                    function Fv(e) {
                        var t, r = Mb(e, Bb, " "),
                            n = 4;
                        try {
                            return Tb(r)
                        } catch (e) {
                            for (; n;) r = Mb(r, (t = n--, Nb[t - 1] || (Nb[t - 1] = Rb("((?:%[\\da-f]{2}){" + t + "})", "gi"))), Nv);
                            return r
                        }
                    }

                    function Gv(e) {
                        return Gb[e]
                    }

                    function zv(e) {
                        return Mb(Ob(e), Fb, Gv)
                    }

                    function Hv(e) {
                        this.entries = [], this.url = null, void 0 !== e && (cb(e) ? this.parseObject(e) : this.parseQuery("string" == typeof e ? "?" === Ib(e, 0) ? $b(e, 1) : e : lb(e)))
                    }

                    function Zv() {
                        ob(this, Hb);
                        var e = yb(this, new Hv(0 < arguments.length ? arguments[0] : void 0));
                        nb || (this.length = e.entries.length)
                    }
                    var Kv, qv, Wv, Vv, S = Qn,
                        Yv = Kn,
                        Jv = oo("iterator"),
                        yl = !S(function() {
                            var e = new URL("b?a=1&b=2&c=3", "http://a"),
                                r = e.searchParams,
                                n = "";
                            return e.pathname = "c%20d", r.forEach(function(e, t) {
                                r.delete("b"), n += t + e
                            }), !r.size && !Yv || !r.sort || "http://a/c%20d?a=1&c=3" !== e.href || "3" !== r.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !r[Jv] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://").host || "#%D0%B1" !== new URL("http://a#").hash || "a1c3" !== n || "x" !== new URL("http://x", void 0).host
                        }),
                        Xv = Li,
                        Qv = Qu,
                        eb = Math.floor,
                        R = Is,
                        tb = n,
                        rb = e,
                        Yc = r,
                        nb = Kn,
                        v = yl,
                        hl = Li,
                        i = ec,
                        a = rc,
                        b = F0,
                        k = Ri,
                        ob = Ap,
                        tl = ho,
                        ib = xo,
                        ab = ji,
                        sb = ca,
                        ub = ao,
                        cb = Lr,
                        lb = Gu,
                        db = Po,
                        fb = Ii,
                        pb = gc,
                        hb = mc,
                        mb = kp,
                        gb = $v,
                        aa = oo("iterator"),
                        vb = "URLSearchParams",
                        bb = vb + "Iterator",
                        yb = k.set,
                        _b = k.getterFor(vb),
                        wb = k.getterFor(bb),
                        Ab = Object.getOwnPropertyDescriptor,
                        xb = Bv("fetch"),
                        kb = Bv("Request"),
                        Eb = Bv("Headers"),
                        Sb = kb && kb.prototype,
                        po = Eb && Eb.prototype,
                        Rb = tb.RegExp,
                        Db = tb.TypeError,
                        Tb = tb.decodeURIComponent,
                        Ob = tb.encodeURIComponent,
                        Ib = Yc("".charAt),
                        Cb = Yc([].join),
                        Lb = Yc([].push),
                        Mb = Yc("".replace),
                        Pb = Yc([].shift),
                        jb = Yc([].splice),
                        Ub = Yc("".split),
                        $b = Yc("".slice),
                        Bb = /\+/g,
                        Nb = Array(4),
                        Fb = /[!'()~]|%20/g,
                        Gb = {
                            "!": "%21",
                            "'": "%27",
                            "(": "%28",
                            ")": "%29",
                            "~": "%7E",
                            "%20": "+"
                        },
                        zb = b(function(e, t) {
                            yb(this, {
                                type: bb,
                                iterator: pb(_b(e).entries),
                                kind: t
                            })
                        }, "Iterator", function() {
                            var e = wb(this),
                                t = e.kind,
                                e = e.iterator.next(),
                                r = e.value;
                            return e.done || (e.value = "keys" === t ? r.key : "values" === t ? r.value : [r.key, r.value]), e
                        }, !0),
                        Hb = (Hv.prototype = {
                            type: vb,
                            bindURL: function(e) {
                                this.url = e, this.update()
                            },
                            parseObject: function(e) {
                                var t, r, n, o, i, a, s = hb(e);
                                if (s)
                                    for (r = (t = pb(e, s)).next; !(n = rb(r, t)).done;) {
                                        if (o = (n = pb(ub(n.value))).next, (i = rb(o, n)).done || (a = rb(o, n)).done || !rb(o, n).done) throw Db("Expected sequence with length 2");
                                        Lb(this.entries, {
                                            key: lb(i.value),
                                            value: lb(a.value)
                                        })
                                    } else
                                        for (var u in e) ib(e, u) && Lb(this.entries, {
                                            key: u,
                                            value: lb(e[u])
                                        })
                            },
                            parseQuery: function(e) {
                                if (e)
                                    for (var t, r = Ub(e, "&"), n = 0; n < r.length;)(t = r[n++]).length && (t = Ub(t, "="), Lb(this.entries, {
                                        key: Fv(Pb(t)),
                                        value: Fv(Cb(t, "="))
                                    }))
                            },
                            serialize: function() {
                                for (var e, t = this.entries, r = [], n = 0; n < t.length;) e = t[n++], Lb(r, zv(e.key) + "=" + zv(e.value));
                                return Cb(r, "&")
                            },
                            update: function() {
                                this.entries.length = 0, this.parseQuery(this.url.query)
                            },
                            updateURL: function() {
                                this.url && this.url.update()
                            }
                        }, Zv.prototype),
                        Zb = Hb,
                        Kb = {
                            append: function(e, t) {
                                mb(arguments.length, 2);
                                var r = _b(this);
                                Lb(r.entries, {
                                    key: lb(e),
                                    value: lb(t)
                                }), nb || this.length++, r.updateURL()
                            },
                            delete: function(e) {
                                mb(arguments.length, 1);
                                for (var t = _b(this), r = t.entries, n = lb(e), o = 0; o < r.length;) r[o].key === n ? jb(r, o, 1) : o++;
                                nb || (this.length = r.length), t.updateURL()
                            },
                            get: function(e) {
                                mb(arguments.length, 1);
                                for (var t = _b(this).entries, r = lb(e), n = 0; n < t.length; n++)
                                    if (t[n].key === r) return t[n].value;
                                return null
                            },
                            getAll: function(e) {
                                mb(arguments.length, 1);
                                for (var t = _b(this).entries, r = lb(e), n = [], o = 0; o < t.length; o++) t[o].key === r && Lb(n, t[o].value);
                                return n
                            },
                            has: function(e) {
                                mb(arguments.length, 1);
                                for (var t = _b(this).entries, r = lb(e), n = 0; n < t.length;)
                                    if (t[n++].key === r) return !0;
                                return !1
                            },
                            set: function(e, t) {
                                mb(arguments.length, 1);
                                for (var r, n = _b(this), o = n.entries, i = !1, a = lb(e), s = lb(t), u = 0; u < o.length; u++)(r = o[u]).key === a && (i ? jb(o, u--, 1) : (i = !0, r.value = s));
                                i || Lb(o, {
                                    key: a,
                                    value: s
                                }), nb || (this.length = o.length), n.updateURL()
                            },
                            sort: function() {
                                var e = _b(this);
                                gb(e.entries, function(e, t) {
                                    return e.key > t.key ? 1 : -1
                                }), e.updateURL()
                            },
                            forEach: function(e) {
                                for (var t, r = _b(this).entries, n = ab(e, 1 < arguments.length ? arguments[1] : void 0), o = 0; o < r.length;) n((t = r[o++]).value, t.key, this)
                            },
                            keys: function() {
                                return new zb(this, "keys")
                            },
                            values: function() {
                                return new zb(this, "values")
                            },
                            entries: function() {
                                return new zb(this, "entries")
                            }
                        },
                        qb = {
                            enumerable: !0
                        };
                    for (Vv in Kb) Xv(Zb, Vv, Kb[Vv], qb);
                    hl(Hb, aa, Hb.entries, {
                        name: "entries"
                    }), hl(Hb, "toString", function() {
                        return _b(this).serialize()
                    }, {
                        enumerable: !0
                    }), nb && i(Hb, "size", {
                        get: function() {
                            return _b(this).entries.length
                        },
                        configurable: !0,
                        enumerable: !0
                    }), a(Zv, vb), R({
                        global: !0,
                        constructor: !0,
                        forced: !v
                    }, {
                        URLSearchParams: Zv
                    }), !v && tl(Eb) && (Kv = Yc(po.has), qv = Yc(po.set), Wv = function(e) {
                        if (cb(e)) {
                            var t, r = e.body;
                            if (sb(r) === vb) return t = e.headers ? new Eb(e.headers) : new Eb, Kv(t, "content-type") || qv(t, "content-type", "application/x-www-form-urlencoded;charset=UTF-8"), db(e, {
                                body: fb(0, lb(r)),
                                headers: fb(0, t)
                            })
                        }
                        return e
                    }, tl(xb) && R({
                        global: !0,
                        enumerable: !0,
                        dontCallGetSet: !0,
                        forced: !0
                    }, {
                        fetch: function(e) {
                            return xb(e, 1 < arguments.length ? Wv(arguments[1]) : {})
                        }
                    }), tl(kb)) && ((Sb.constructor = zn = function(e) {
                        return ob(this, Sb), new kb(e, 1 < arguments.length ? Wv(arguments[1]) : {})
                    }).prototype = Sb, R({
                        global: !0,
                        constructor: !0,
                        dontCallGetSet: !0,
                        forced: !0
                    }, {
                        Request: zn
                    }));
                    var Wb, o = {
                            URLSearchParams: Zv,
                            getState: _b
                        },
                        Vb = js.includes,
                        x = K0,
                        m = (Is({
                            target: "Array",
                            proto: !0,
                            forced: Qn(function() {
                                return !Array(1).includes()
                            })
                        }, {
                            includes: function(e) {
                                return Vb(this, e, 1 < arguments.length ? arguments[1] : void 0)
                            }
                        }), x("includes"), Is),
                        Yb = ig,
                        Jb = to,
                        Xb = Gu,
                        w = ag,
                        Qb = r("".indexOf),
                        Xa = (m({
                            target: "String",
                            proto: !0,
                            forced: !w("includes")
                        }, {
                            includes: function(e) {
                                return !!~Qb(Xb(Jb(this)), Xb(Yb(e)), 1 < arguments.length ? arguments[1] : void 0)
                            }
                        }), {
                            exports: {}
                        }),
                        bl = {
                            exports: {}
                        },
                        y = {
                            exports: {}
                        };

                    function e1(e) {
                        return (e1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    _ = (E = y).exports, Object.defineProperty(_, "__esModule", {
                        value: !0
                    }), _.default = function(e) {
                        var t;
                        if (!("string" == typeof e || e instanceof String)) throw t = e1(e), null === e ? t = "null" : "object" === t && (t = e.constructor.name), new TypeError("Expected a string but received a ".concat(t))
                    }, E.exports = _.default, E.exports.default = _.default, rl = (Ro = bl).exports, Object.defineProperty(rl, "__esModule", {
                        value: !0
                    }), rl.default = function(e) {
                        return (0, Wb.default)(e), e = Date.parse(e), isNaN(e) ? null : new Date(e)
                    }, Wb = (Zu = y.exports) && Zu.__esModule ? Zu : {
                        default: Zu
                    }, Ro.exports = rl.default, Ro.exports.default = rl.default;
                    var ml = {
                            exports: {}
                        },
                        ia = {},
                        t = {},
                        t1 = (Object.defineProperty(t, "__esModule", {
                            value: !0
                        }), t.commaDecimal = t.dotDecimal = t.bengaliLocales = t.farsiLocales = t.arabicLocales = t.englishLocales = t.decimal = t.alphanumeric = t.alpha = void 0, {
                            "en-US": /^[A-Z]+$/i,
                            "az-AZ": /^[A-VXYZ]+$/i,
                            "bg-BG": /^[-]+$/i,
                            "cs-CZ": /^[A-Z]+$/i,
                            "da-DK": /^[A-Z]+$/i,
                            "de-DE": /^[A-Z]+$/i,
                            "el-GR": /^[-]+$/i,
                            "es-ES": /^[A-Z]+$/i,
                            "fa-IR": /^[]+$/i,
                            "fi-FI": /^[A-Z]+$/i,
                            "fr-FR": /^[A-Z]+$/i,
                            "it-IT": /^[A-Z]+$/i,
                            "ja-JP": /^[----]+$/i,
                            "nb-NO": /^[A-Z]+$/i,
                            "nl-NL": /^[A-Z]+$/i,
                            "nn-NO": /^[A-Z]+$/i,
                            "hu-HU": /^[A-Z]+$/i,
                            "pl-PL": /^[A-Z]+$/i,
                            "pt-PT": /^[A-Z]+$/i,
                            "ru-RU": /^[-]+$/i,
                            "sl-SI": /^[A-Z]+$/i,
                            "sk-SK": /^[A-Z]+$/i,
                            "sr-RS@latin": /^[A-Z]+$/i,
                            "sr-RS": /^[-]+$/i,
                            "sv-SE": /^[A-Z]+$/i,
                            "th-TH": /^[-\s]+$/i,
                            "tr-TR": /^[A-Z]+$/i,
                            "uk-UA": /^[-I]+$/i,
                            "vi-VN": /^[A-Z]+$/i,
                            "ko-KR": /^[---]*$/,
                            "ku-IQ": /^[]+$/i,
                            ar: /^[]+$/,
                            he: /^[-]+$/,
                            fa: /^['']+$/i,
                            bn: /^['']+$/,
                            "hi-IN": /^[\u0900-\u0961]+[\u0972-\u097F]*$/i,
                            "si-LK": /^[\u0D80-\u0DFF]+$/
                        }),
                        r1 = (t.alpha = t1, {
                            "en-US": /^[0-9A-Z]+$/i,
                            "az-AZ": /^[0-9A-VXYZ]+$/i,
                            "bg-BG": /^[0-9-]+$/i,
                            "cs-CZ": /^[0-9A-Z]+$/i,
                            "da-DK": /^[0-9A-Z]+$/i,
                            "de-DE": /^[0-9A-Z]+$/i,
                            "el-GR": /^[0-9-]+$/i,
                            "es-ES": /^[0-9A-Z]+$/i,
                            "fi-FI": /^[0-9A-Z]+$/i,
                            "fr-FR": /^[0-9A-Z]+$/i,
                            "it-IT": /^[0-9A-Z]+$/i,
                            "ja-JP": /^[0-9-----]+$/i,
                            "hu-HU": /^[0-9A-Z]+$/i,
                            "nb-NO": /^[0-9A-Z]+$/i,
                            "nl-NL": /^[0-9A-Z]+$/i,
                            "nn-NO": /^[0-9A-Z]+$/i,
                            "pl-PL": /^[0-9A-Z]+$/i,
                            "pt-PT": /^[0-9A-Z]+$/i,
                            "ru-RU": /^[0-9-]+$/i,
                            "sl-SI": /^[0-9A-Z]+$/i,
                            "sk-SK": /^[0-9A-Z]+$/i,
                            "sr-RS@latin": /^[0-9A-Z]+$/i,
                            "sr-RS": /^[0-9-]+$/i,
                            "sv-SE": /^[0-9A-Z]+$/i,
                            "th-TH": /^[-\s]+$/i,
                            "tr-TR": /^[0-9A-Z]+$/i,
                            "uk-UA": /^[0-9-I]+$/i,
                            "ko-KR": /^[0-9---]*$/,
                            "ku-IQ": /^[0-9]+$/i,
                            "vi-VN": /^[0-9A-Z]+$/i,
                            ar: /^[0-9]+$/,
                            he: /^[0-9-]+$/,
                            fa: /^['0-9']+$/i,
                            bn: /^['']+$/,
                            "hi-IN": /^[\u0900-\u0963]+[\u0966-\u097F]*$/i,
                            "si-LK": /^[0-9\u0D80-\u0DFF]+$/
                        }),
                        n1 = (t.alphanumeric = r1, {
                            "en-US": ".",
                            ar: ""
                        }),
                        o1 = (t.decimal = n1, ["AU", "GB", "HK", "IN", "NZ", "ZA", "ZM"]);
                    t.englishLocales = o1;
                    for (var i1, a1 = 0; a1 < o1.length; a1++) t1[i1 = "en-".concat(o1[a1])] = t1["en-US"], r1[i1] = r1["en-US"], n1[i1] = n1["en-US"];
                    var s1 = ["AE", "BH", "DZ", "EG", "IQ", "JO", "KW", "LB", "LY", "MA", "QM", "QA", "SA", "SD", "SY", "TN", "YE"];
                    t.arabicLocales = s1;
                    for (var u1, c1 = 0; c1 < s1.length; c1++) t1[u1 = "ar-".concat(s1[c1])] = t1.ar, r1[u1] = r1.ar, n1[u1] = n1.ar;
                    var l1 = ["IR", "AF"];
                    t.farsiLocales = l1;
                    for (var d1, f1 = 0; f1 < l1.length; f1++) r1[d1 = "fa-".concat(l1[f1])] = r1.fa, n1[d1] = n1.ar;
                    var p1 = ["BD", "IN"];
                    t.bengaliLocales = p1;
                    for (var h1, m1 = 0; m1 < p1.length; m1++) t1[h1 = "bn-".concat(p1[m1])] = t1.bn, r1[h1] = r1.bn, n1[h1] = n1["en-US"];
                    var g1 = ["ar-EG", "ar-LB", "ar-LY"],
                        v1 = (t.dotDecimal = g1, ["bg-BG", "cs-CZ", "da-DK", "de-DE", "el-GR", "en-ZM", "es-ES", "fr-CA", "fr-FR", "id-ID", "it-IT", "ku-IQ", "hi-IN", "hu-HU", "nb-NO", "nn-NO", "nl-NL", "pl-PL", "pt-PT", "ru-RU", "si-LK", "sl-SI", "sr-RS@latin", "sr-RS", "sv-SE", "tr-TR", "uk-UA", "vi-VN"]);
                    t.commaDecimal = v1;
                    for (var b1 = 0; b1 < g1.length; b1++) n1[g1[b1]] = n1["en-US"];
                    for (var y1 = 0; y1 < v1.length; y1++) n1[v1[y1]] = ",";
                    t1["fr-CA"] = t1["fr-FR"], r1["fr-CA"] = r1["fr-FR"], t1["pt-BR"] = t1["pt-PT"], r1["pt-BR"] = r1["pt-PT"], n1["pt-BR"] = n1["pt-PT"], t1["pl-Pl"] = t1["pl-PL"], r1["pl-Pl"] = r1["pl-PL"], n1["pl-Pl"] = n1["pl-PL"], t1["fa-AF"] = t1.fa, Object.defineProperty(ia, "__esModule", {
                        value: !0
                    }), ia.default = function(e, t) {
                        (0, k1.default)(e), t = t || {};
                        var r, n = new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(t.locale ? E1.decimal[t.locale] : ".", "[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));
                        return "" !== e && "." !== e && "," !== e && "-" !== e && "+" !== e && (r = parseFloat(e.replace(",", ".")), n.test(e)) && (!t.hasOwnProperty("min") || r >= t.min) && (!t.hasOwnProperty("max") || r <= t.max) && (!t.hasOwnProperty("lt") || r < t.lt) && (!t.hasOwnProperty("gt") || r > t.gt)
                    }, ia.locales = void 0;
                    var _1, w1, A1, x1, k1 = (A = y.exports) && A.__esModule ? A : {
                            default: A
                        },
                        E1 = t,
                        Si = Object.keys(E1.decimal),
                        Po = (ia.locales = Si, ca = (S = ml).exports, Object.defineProperty(ca, "__esModule", {
                            value: !0
                        }), ca.default = function(e) {
                            return (0, _1.default)(e) ? parseFloat(e) : NaN
                        }, _1 = ia && ia.__esModule ? ia : {
                            default: ia
                        }, S.exports = ca.default, S.exports.default = ca.default, {
                            exports: {}
                        }),
                        hl = (b = (k = Po).exports, Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e, t) {
                            return (0, w1.default)(e), parseInt(e, t || 10)
                        }, w1 = (aa = y.exports) && aa.__esModule ? aa : {
                            default: aa
                        }, k.exports = b.default, k.exports.default = b.default, {
                            exports: {}
                        }),
                        Yc = (a = (i = hl).exports, Object.defineProperty(a, "__esModule", {
                            value: !0
                        }), a.default = function(e, t) {
                            return (0, A1.default)(e), t ? "1" === e || /^true$/i.test(e) : "0" !== e && !/^false$/i.test(e) && "" !== e
                        }, A1 = (v = y.exports) && v.__esModule ? v : {
                            default: v
                        }, i.exports = a.default, i.exports.default = a.default, {
                            exports: {}
                        }),
                        zn = (tl = (po = Yc).exports, Object.defineProperty(tl, "__esModule", {
                            value: !0
                        }), tl.default = function(e, t) {
                            return (0, x1.default)(e), e === t
                        }, x1 = (R = y.exports) && R.__esModule ? R : {
                            default: R
                        }, po.exports = tl.default, po.exports.default = tl.default, {
                            exports: {}
                        }),
                        js = {
                            exports: {}
                        };

                    function S1(e) {
                        return (S1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    m = (x = js).exports, Object.defineProperty(m, "__esModule", {
                        value: !0
                    }), m.default = function(e) {
                        return "object" === S1(e) && null !== e ? e = "function" == typeof e.toString ? e.toString() : "[object Object]" : (null == e || isNaN(e) && !e.length) && (e = ""), String(e)
                    }, x.exports = m.default, x.exports.default = m.default;
                    var R1, D1, T1, O1, w = {
                        exports: {}
                    };

                    function I1(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    _ = (E = w).exports, Object.defineProperty(_, "__esModule", {
                        value: !0
                    }), _.default = function() {
                        var e, t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                            r = 1 < arguments.length ? arguments[1] : void 0;
                        for (e in r) void 0 === t[e] && (t[e] = r[e]);
                        return t
                    }, E.exports = _.default, E.exports.default = _.default, Ro = (Zu = zn).exports, Object.defineProperty(Ro, "__esModule", {
                        value: !0
                    }), Ro.default = function(e, t, r) {
                        return (0, R1.default)(e), (r = (0, T1.default)(r, O1)).ignoreCase ? e.toLowerCase().split((0, D1.default)(t).toLowerCase()).length > r.minOccurrences : e.split((0, D1.default)(t)).length > r.minOccurrences
                    }, R1 = I1(y.exports), D1 = I1(js.exports), T1 = I1(w.exports), O1 = {
                        ignoreCase: !1,
                        minOccurrences: 1
                    }, Zu.exports = Ro.default, Zu.exports.default = Ro.default;
                    var C1, L1, rl = {
                            exports: {}
                        },
                        ca = (Si = (A = rl).exports, Object.defineProperty(Si, "__esModule", {
                            value: !0
                        }), Si.default = function(e, t, r) {
                            return (0, C1.default)(e), "[object RegExp]" !== Object.prototype.toString.call(t) && (t = new RegExp(t, r)), !!e.match(t)
                        }, C1 = (S = y.exports) && S.__esModule ? S : {
                            default: S
                        }, A.exports = Si.default, A.exports.default = Si.default, {
                            exports: {}
                        }),
                        aa = {
                            exports: {}
                        };

                    function M1(e) {
                        return (M1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    b = (k = aa).exports, Object.defineProperty(b, "__esModule", {
                        value: !0
                    }), b.default = function(e, t) {
                        (0, L1.default)(e), t = "object" === M1(t) ? (r = t.min || 0, t.max) : (r = t, arguments[2]);
                        var r, e = encodeURI(e).split(/%..|./).length - 1;
                        return r <= e && (void 0 === t || e <= t)
                    }, L1 = (v = y.exports) && v.__esModule ? v : {
                        default: v
                    }, k.exports = b.default, k.exports.default = b.default;
                    var P1, j1, U1, i = {
                        exports: {}
                    };

                    function $1(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    R = (a = i).exports, Object.defineProperty(R, "__esModule", {
                        value: !0
                    }), R.default = function(e, t) {
                        (0, P1.default)(e), (t = (0, j1.default)(t, U1)).allow_trailing_dot && "." === e[e.length - 1] && (e = e.substring(0, e.length - 1));
                        var e = (e = !0 === t.allow_wildcard && 0 === e.indexOf("*.") ? e.substring(2) : e).split("."),
                            r = e[e.length - 1];
                        if (t.require_tld) {
                            if (e.length < 2) return !1;
                            if (!t.allow_numeric_tld && !/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r)) return !1;
                            if (/\s/.test(r)) return !1
                        }
                        return !(!t.allow_numeric_tld && /^\d+$/.test(r)) && e.every(function(e) {
                            return !(63 < e.length && !t.ignore_max_length || !/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e) || /[\uff01-\uff5e]/.test(e) || /^-|-$/.test(e) || !t.allow_underscores && /_/.test(e))
                        })
                    }, P1 = $1(y.exports), j1 = $1(w.exports), U1 = {
                        require_tld: !0,
                        allow_underscores: !1,
                        allow_trailing_dot: !1,
                        allow_numeric_tld: !1,
                        allow_wildcard: !1,
                        ignore_max_length: !1
                    }, a.exports = R.default, a.exports.default = R.default;
                    var B1, N1, F1, G1, z1, H1, Z1, K1, q1, W1, V1, Y1, J1, X1, Q1, ey, po = {
                        exports: {}
                    };

                    function ty(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    x = (tl = po).exports, Object.defineProperty(x, "__esModule", {
                        value: !0
                    }), x.default = function e(t) {
                        var r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "";
                        return (0, X1.default)(t), (r = String(r)) ? "4" === r ? Q1.test(t) : "6" === r && ey.test(t) : e(t, 4) || e(t, 6)
                    }, X1 = (m = y.exports) && m.__esModule ? m : {
                        default: m
                    }, m = "(".concat(m = "(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])", "[.]){3}").concat(m), Q1 = new RegExp("^".concat(m, "$")), E = "(?:[0-9a-fA-F]{1,4})", ey = new RegExp("^(" + "(?:".concat(E, ":){7}(?:").concat(E, "|:)|") + "(?:".concat(E, ":){6}(?:").concat(m, "|:").concat(E, "|:)|") + "(?:".concat(E, ":){5}(?::").concat(m, "|(:").concat(E, "){1,2}|:)|") + "(?:".concat(E, ":){4}(?:(:").concat(E, "){0,1}:").concat(m, "|(:").concat(E, "){1,3}|:)|") + "(?:".concat(E, ":){3}(?:(:").concat(E, "){0,2}:").concat(m, "|(:").concat(E, "){1,4}|:)|") + "(?:".concat(E, ":){2}(?:(:").concat(E, "){0,3}:").concat(m, "|(:").concat(E, "){1,5}|:)|") + "(?:".concat(E, ":){1}(?:(:").concat(E, "){0,4}:").concat(m, "|(:").concat(E, "){1,6}|:)|") + "(?::((?::".concat(E, "){0,5}:").concat(m, "|(?::").concat(E, "){1,7}|:))") + ")(%[0-9a-zA-Z-.:]{1,})?$"), tl.exports = x.default, tl.exports.default = x.default, Zu = (_ = ca).exports, Object.defineProperty(Zu, "__esModule", {
                        value: !0
                    }), Zu.default = function(e, t) {
                        if ((0, B1.default)(e), (t = (0, N1.default)(t, H1)).require_display_name || t.allow_display_name) {
                            var r = e.match(Z1);
                            if (r) {
                                r = r[1];
                                if (e = e.replace(r, "").replace(/(^<|>$)/g, ""), ! function(e) {
                                        var t = e.replace(/^"(.+)"$/, "$1");
                                        if (t.trim()) {
                                            if (/[\.";<>]/.test(t)) {
                                                if (t === e) return;
                                                if (t.split('"').length !== t.split('\\"').length) return
                                            }
                                            return 1
                                        }
                                    }(r = r.endsWith(" ") ? r.slice(0, -1) : r)) return !1
                            } else if (t.require_display_name) return !1
                        }
                        if (!t.ignore_max_length && e.length > J1) return !1;
                        var r = e.split("@"),
                            e = r.pop(),
                            n = e.toLowerCase();
                        if (t.host_blacklist.includes(n)) return !1;
                        if (0 < t.host_whitelist.length && !t.host_whitelist.includes(n)) return !1;
                        r = r.join("@");
                        if (t.domain_specific_validation && ("gmail.com" === n || "googlemail.com" === n)) {
                            n = (r = r.toLowerCase()).split("+")[0];
                            if (!(0, F1.default)(n.replace(/\./g, ""), {
                                    min: 6,
                                    max: 30
                                })) return !1;
                            for (var o = n.split("."), i = 0; i < o.length; i++)
                                if (!q1.test(o[i])) return !1
                        }
                        if (!(!1 !== t.ignore_max_length || (0, F1.default)(r, {
                                max: 64
                            }) && (0, F1.default)(e, {
                                max: 254
                            }))) return !1;
                        if (!(0, G1.default)(e, {
                                require_tld: t.require_tld,
                                ignore_max_length: t.ignore_max_length
                            })) {
                            if (!t.allow_ip_domain) return !1;
                            if (!(0, z1.default)(e)) {
                                if (!e.startsWith("[") || !e.endsWith("]")) return !1;
                                n = e.slice(1, -1);
                                if (0 === n.length || !(0, z1.default)(n)) return !1
                            }
                        }
                        if ('"' === r[0]) return r = r.slice(1, r.length - 1), (t.allow_utf8_local_part ? Y1 : W1).test(r);
                        for (var a = t.allow_utf8_local_part ? V1 : K1, s = r.split("."), u = 0; u < s.length; u++)
                            if (!a.test(s[u])) return !1;
                        return !t.blacklisted_chars || -1 === r.search(new RegExp("[".concat(t.blacklisted_chars, "]+"), "g"))
                    }, B1 = ty(y.exports), N1 = ty(w.exports), F1 = ty(aa.exports), G1 = ty(i.exports), z1 = ty(po.exports), H1 = {
                        allow_display_name: !1,
                        require_display_name: !1,
                        allow_utf8_local_part: !0,
                        require_tld: !0,
                        blacklisted_chars: "",
                        ignore_max_length: !1,
                        host_blacklist: [],
                        host_whitelist: []
                    }, Z1 = /^([^\x00-\x1F\x7F-\x9F\cX]+)</i, K1 = /^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i, q1 = /^[a-z\d]+$/, W1 = /^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i, V1 = /^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i, Y1 = /^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i, J1 = 254, _.exports = Zu.default, _.exports.default = Zu.default;
                    var ry, ny, oy, iy, ay, sy, Ro = {
                        exports: {}
                    };

                    function uy(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }

                    function cy(e, t) {
                        (null == t || t > e.length) && (t = e.length);
                        for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                        return n
                    }

                    function ly(e, t) {
                        for (var r = 0; r < t.length; r++) {
                            var n = t[r];
                            if (e === n || function e(t) {
                                    return "[object RegExp]" === Object.prototype.toString.call(t)
                                }(n) && n.test(e)) return !0
                        }
                        return !1
                    }
                    A = (S = Ro).exports, Object.defineProperty(A, "__esModule", {
                        value: !0
                    }), A.default = function(e, t) {
                        if ((0, ry.default)(e), !e || /[\s<>]/.test(e)) return !1;
                        if (0 === e.indexOf("mailto:")) return !1;
                        if ((t = (0, iy.default)(t, ay)).validate_length && 2083 <= e.length) return !1;
                        if (!t.allow_fragments && e.includes("#")) return !1;
                        if (!t.allow_query_components && (e.includes("?") || e.includes("&"))) return !1;
                        var r, n, o = e.split("#");
                        if (1 < (o = (e = (o = (e = o.shift()).split("?")).shift()).split("://")).length) {
                            if (r = o.shift().toLowerCase(), t.require_valid_protocol && -1 === t.protocols.indexOf(r)) return !1
                        } else {
                            if (t.require_protocol) return !1;
                            if ("//" === e.slice(0, 2)) {
                                if (!t.allow_protocol_relative_urls) return !1;
                                o[0] = e.slice(2)
                            }
                        }
                        if ("" === (e = o.join("://"))) return !1;
                        if ("" === (e = (o = e.split("/")).shift()) && !t.require_host) return !0;
                        if (1 < (o = e.split("@")).length) {
                            if (t.disallow_auth) return !1;
                            if ("" === o[0]) return !1;
                            if (0 <= (r = o.shift()).indexOf(":") && 2 < r.split(":").length) return !1;
                            var e = function(e) {
                                    if (Array.isArray(e)) return e
                                }(e = r.split(":")) || function(e) {
                                    if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
                                        var t = [],
                                            r = !0,
                                            n = !1,
                                            o = void 0;
                                        try {
                                            for (var i, a = e[Symbol.iterator](); !(r = (i = a.next()).done) && (t.push(i.value), 2 !== t.length); r = !0);
                                        } catch (e) {
                                            n = !0, o = e
                                        } finally {
                                            try {
                                                r || null == a.return || a.return()
                                            } finally {
                                                if (n) throw o
                                            }
                                        }
                                        return t
                                    }
                                }(e) || function(e) {
                                    var t;
                                    if (e) return "string" == typeof e ? cy(e, 2) : "Map" === (t = "Object" === (t = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : t) || "Set" === t ? Array.from(e) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? cy(e, 2) : void 0
                                }(e) || function() {
                                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                }(),
                                i = e[0],
                                e = e[1];
                            if ("" === i && "" === e) return !1
                        }
                        var a, i = null,
                            e = null,
                            s = (a = o.join("@")).match(sy);
                        if (s ? (n = "", e = s[1], i = s[2] || null) : (n = (o = a.split(":")).shift(), o.length && (i = o.join(":"))), null !== i && 0 < i.length) {
                            if (s = parseInt(i, 10), !/^[0-9]+$/.test(i) || s <= 0 || 65535 < s) return !1
                        } else if (t.require_port) return !1;
                        return t.host_whitelist ? ly(n, t.host_whitelist) : "" === n && !t.require_host || !!((0, oy.default)(n) || (0, ny.default)(n, t) || e && (0, oy.default)(e, 6)) && (n = n || e, !t.host_blacklist || !ly(n, t.host_blacklist))
                    }, ry = uy(y.exports), ny = uy(i.exports), oy = uy(po.exports), iy = uy(w.exports), ay = {
                        protocols: ["http", "https", "ftp"],
                        require_tld: !0,
                        require_protocol: !1,
                        require_host: !0,
                        require_port: !1,
                        require_valid_protocol: !0,
                        allow_underscores: !1,
                        allow_trailing_dot: !1,
                        allow_protocol_relative_urls: !1,
                        allow_fragments: !0,
                        allow_query_components: !0,
                        validate_length: !0
                    }, sy = /^\[([^\]]+)\](?::([0-9]+))?$/, S.exports = A.default, S.exports.default = A.default;
                    var dy, fy, py, hy, my, gy, vy, by, yy, _y, wy, Ay, Si = {
                            exports: {}
                        },
                        a = (k = (v = Si).exports, Object.defineProperty(k, "__esModule", {
                            value: !0
                        }), k.default = function e(t, r) {
                            return (0, dy.default)(t), null != r && r.eui && (r.eui = String(r.eui)), null != r && r.no_colons || null != r && r.no_separators ? "48" === r.eui ? py.test(t) : "64" !== r.eui && py.test(t) || gy.test(t) : "48" === (null == r ? void 0 : r.eui) ? fy.test(t) || hy.test(t) : "64" === (null == r ? void 0 : r.eui) ? my.test(t) || vy.test(t) : e(t, {
                                eui: "48"
                            }) || e(t, {
                                eui: "64"
                            })
                        }, dy = (b = y.exports) && b.__esModule ? b : {
                            default: b
                        }, fy = /^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/, py = /^([0-9a-fA-F]){12}$/, hy = /^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/, my = /^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/, gy = /^([0-9a-fA-F]){16}$/, vy = /^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/, v.exports = k.default, v.exports.default = k.default, {
                            exports: {}
                        });

                    function xy(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    m = (R = a).exports, Object.defineProperty(m, "__esModule", {
                        value: !0
                    }), m.default = function(e) {
                        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "",
                            r = ((0, by.default)(e), e.split("/"));
                        if (2 !== r.length) return !1;
                        if (!_y.test(r[1])) return !1;
                        if (1 < r[1].length && r[1].startsWith("0")) return !1;
                        if (!(0, yy.default)(r[0], t)) return !1;
                        var n = null;
                        switch (String(t)) {
                            case "4":
                                n = wy;
                                break;
                            case "6":
                                n = Ay;
                                break;
                            default:
                                n = (0, yy.default)(r[0], "6") ? Ay : wy
                        }
                        return r[1] <= n && 0 <= r[1]
                    }, by = xy(y.exports), yy = xy(po.exports), _y = /^\d{1,3}$/, wy = 32, Ay = 128, R.exports = m.default, R.exports.default = m.default;
                    var ky, Ey, E = {
                        exports: {}
                    };

                    function Sy(e, t) {
                        var r;
                        if (e) return "string" == typeof e ? Ry(e, t) : "Map" === (r = "Object" === (r = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : r) || "Set" === r ? Array.from(e) : "Arguments" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? Ry(e, t) : void 0
                    }

                    function Ry(e, t) {
                        (null == t || t > e.length) && (t = e.length);
                        for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                        return n
                    }
                    x = (tl = E).exports, Object.defineProperty(x, "__esModule", {
                        value: !0
                    }), x.default = function(t, r) {
                        if (r = "string" == typeof r ? (0, ky.default)({
                                format: r
                            }, Ey) : (0, ky.default)(r, Ey), "string" == typeof t && (n = r.format, /(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(n))) {
                            var e, n = r.delimiters.find(function(e) {
                                    return -1 !== r.format.indexOf(e)
                                }),
                                o = r.strictMode ? n : r.delimiters.find(function(e) {
                                    return -1 !== t.indexOf(e)
                                }),
                                i = {},
                                a = function(e) {
                                    var t, r, n;
                                    if ("undefined" == typeof Symbol || null == e[Symbol.iterator]) {
                                        if (Array.isArray(e) || (t = Sy(e))) return t && (e = t), r = 0, {
                                            s: n = function() {},
                                            n: function() {
                                                return r >= e.length ? {
                                                    done: !0
                                                } : {
                                                    done: !1,
                                                    value: e[r++]
                                                }
                                            },
                                            e: function(e) {
                                                throw e
                                            },
                                            f: n
                                        };
                                        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                    }
                                    var o, i = !0,
                                        a = !1;
                                    return {
                                        s: function() {
                                            t = e[Symbol.iterator]()
                                        },
                                        n: function() {
                                            var e = t.next();
                                            return i = e.done, e
                                        },
                                        e: function(e) {
                                            a = !0, o = e
                                        },
                                        f: function() {
                                            try {
                                                i || null == t.return || t.return()
                                            } finally {
                                                if (a) throw o
                                            }
                                        }
                                    }
                                }(function(e, t) {
                                    for (var r = [], n = Math.min(e.length, t.length), o = 0; o < n; o++) r.push([e[o], t[o]]);
                                    return r
                                }(t.split(o), r.format.toLowerCase().split(n)));
                            try {
                                for (a.s(); !(e = a.n()).done;) {
                                    var s = function e(t, r) {
                                            return function(e) {
                                                if (Array.isArray(e)) return e
                                            }(t) || function(e, t) {
                                                if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
                                                    var r = [],
                                                        n = !0,
                                                        o = !1,
                                                        i = void 0;
                                                    try {
                                                        for (var a, s = e[Symbol.iterator](); !(n = (a = s.next()).done) && (r.push(a.value), !t || r.length !== t); n = !0);
                                                    } catch (e) {
                                                        o = !0, i = e
                                                    } finally {
                                                        try {
                                                            n || null == s.return || s.return()
                                                        } finally {
                                                            if (o) throw i
                                                        }
                                                    }
                                                    return r
                                                }
                                            }(t, r) || Sy(t, r) || function() {
                                                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                            }()
                                        }(e.value, 2),
                                        u = s[0],
                                        c = s[1];
                                    if (u.length !== c.length) return !1;
                                    i[c.charAt(0)] = u
                                }
                            } catch (t) {
                                a.e(t)
                            } finally {
                                a.f()
                            }
                            return new Date("".concat(i.m, "/").concat(i.d, "/").concat(i.y)).getDate() === +i.d
                        }
                        var n;
                        return !r.strictMode && "[object Date]" === Object.prototype.toString.call(t) && isFinite(t)
                    }, ky = (_ = w.exports) && _.__esModule ? _ : {
                        default: _
                    }, Ey = {
                        format: "YYYY/MM/DD",
                        delimiters: ["/", "-"],
                        strictMode: !1
                    }, tl.exports = x.default, tl.exports.default = x.default;
                    var Dy, Ty, Oy, Iy, Cy, Ly, My, Py, jy, Uy, $y, By, Ny, Fy, Gy, zy, Hy, Zy, Ky, qy, Wy, Vy, Yy, Jy, Xy, Qy, e_, t_, r_, n_, o_, i_, Zu = {
                            exports: {}
                        },
                        v = (A = (S = Zu).exports, Object.defineProperty(A, "__esModule", {
                            value: !0
                        }), A.default = function(e, t) {
                            return t = (0, Dy.default)(t, Ty), "string" == typeof e && Oy[t.hourFormat][t.mode].test(e)
                        }, Dy = (b = w.exports) && b.__esModule ? b : {
                            default: b
                        }, Ty = {
                            hourFormat: "hour24",
                            mode: "default"
                        }, Oy = {
                            hour24: {
                                default: /^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,
                                withSeconds: /^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/
                            },
                            hour12: {
                                default: /^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,
                                withSeconds: /^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/
                            }
                        }, S.exports = A.default, S.exports.default = A.default, {
                            exports: {}
                        }),
                        _ = (R = (k = v).exports, Object.defineProperty(R, "__esModule", {
                            value: !0
                        }), R.default = function(e) {
                            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : Cy;
                            return (0, Iy.default)(e), t.loose ? My.includes(e.toLowerCase()) : Ly.includes(e)
                        }, Iy = (m = y.exports) && m.__esModule ? m : {
                            default: m
                        }, Cy = {
                            loose: !1
                        }, Ly = ["true", "false", "1", "0"], My = [].concat(Ly, ["yes", "no"]), k.exports = R.default, k.exports.default = R.default, {
                            exports: {}
                        }),
                        S = (x = (tl = _).exports, Object.defineProperty(x, "__esModule", {
                            value: !0
                        }), x.default = function(e) {
                            return (0, Py.default)(e), "en_US_POSIX" === e || "ca_ES_VALENCIA" === e || jy.test(e)
                        }, Py = (b = y.exports) && b.__esModule ? b : {
                            default: b
                        }, jy = /^[A-Za-z]{2,4}([_-]([A-Za-z]{4}|[\d]{3}))?([_-]([A-Za-z]{2}|[\d]{3}))?$/, tl.exports = x.default, tl.exports.default = x.default, {}),
                        a_ = (Object.defineProperty(S, "__esModule", {
                            value: !0
                        }), S.default = function(e) {
                            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "en-US",
                                r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},
                                r = ((0, a_.default)(e), r.ignore);
                            if (r)
                                if (r instanceof RegExp) e = e.replace(r, "");
                                else {
                                    if ("string" != typeof r) throw new Error("ignore should be instance of a String or RegExp");
                                    e = e.replace(new RegExp("[".concat(r.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g, "\\$&"), "]"), "g"), "")
                                }
                            if (t in s_.alpha) return s_.alpha[t].test(e);
                            throw new Error("Invalid locale '".concat(t, "'"))
                        }, S.locales = void 0, (A = y.exports) && A.__esModule ? A : {
                            default: A
                        }),
                        s_ = t,
                        m = Object.keys(s_.alpha),
                        k = (S.locales = m, {}),
                        u_ = (Object.defineProperty(k, "__esModule", {
                            value: !0
                        }), k.default = function(e) {
                            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "en-US",
                                r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {},
                                r = ((0, u_.default)(e), r.ignore);
                            if (r)
                                if (r instanceof RegExp) e = e.replace(r, "");
                                else {
                                    if ("string" != typeof r) throw new Error("ignore should be instance of a String or RegExp");
                                    e = e.replace(new RegExp("[".concat(r.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g, "\\$&"), "]"), "g"), "")
                                }
                            if (t in c_.alphanumeric) return c_.alphanumeric[t].test(e);
                            throw new Error("Invalid locale '".concat(t, "'"))
                        }, k.locales = void 0, (R = y.exports) && R.__esModule ? R : {
                            default: R
                        }),
                        c_ = t,
                        b = Object.keys(c_.alphanumeric),
                        tl = (k.locales = b, {
                            exports: {}
                        }),
                        R = (A = (x = tl).exports, Object.defineProperty(A, "__esModule", {
                            value: !0
                        }), A.default = function(e, t) {
                            return (0, Uy.default)(e), (t && t.no_symbols ? By : new RegExp("^[+-]?([0-9]*[".concat((t || {}).locale ? $y.decimal[t.locale] : ".", "])?[0-9]+$"))).test(e)
                        }, Uy = (m = y.exports) && m.__esModule ? m : {
                            default: m
                        }, $y = t, By = /^[0-9]+$/, x.exports = A.default, x.exports.default = A.default, {
                            exports: {}
                        }),
                        A = (m = (b = R).exports, Object.defineProperty(m, "__esModule", {
                            value: !0
                        }), m.default = function(e, t) {
                            (0, Ny.default)(e);
                            e = e.replace(/\s/g, "").toUpperCase();
                            return t.toUpperCase() in Fy && Fy[t].test(e)
                        }, Ny = (x = y.exports) && x.__esModule ? x : {
                            default: x
                        }, Fy = {
                            AM: /^[A-Z]{2}\d{7}$/,
                            AR: /^[A-Z]{3}\d{6}$/,
                            AT: /^[A-Z]\d{7}$/,
                            AU: /^[A-Z]\d{7}$/,
                            AZ: /^[A-Z]{2,3}\d{7,8}$/,
                            BE: /^[A-Z]{2}\d{6}$/,
                            BG: /^\d{9}$/,
                            BR: /^[A-Z]{2}\d{6}$/,
                            BY: /^[A-Z]{2}\d{7}$/,
                            CA: /^[A-Z]{2}\d{6}$/,
                            CH: /^[A-Z]\d{7}$/,
                            CN: /^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,
                            CY: /^[A-Z](\d{6}|\d{8})$/,
                            CZ: /^\d{8}$/,
                            DE: /^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,
                            DK: /^\d{9}$/,
                            DZ: /^\d{9}$/,
                            EE: /^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,
                            ES: /^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,
                            FI: /^[A-Z]{2}\d{7}$/,
                            FR: /^\d{2}[A-Z]{2}\d{5}$/,
                            GB: /^\d{9}$/,
                            GR: /^[A-Z]{2}\d{7}$/,
                            HR: /^\d{9}$/,
                            HU: /^[A-Z]{2}(\d{6}|\d{7})$/,
                            IE: /^[A-Z0-9]{2}\d{7}$/,
                            IN: /^[A-Z]{1}-?\d{7}$/,
                            ID: /^[A-C]\d{7}$/,
                            IR: /^[A-Z]\d{8}$/,
                            IS: /^(A)\d{7}$/,
                            IT: /^[A-Z0-9]{2}\d{7}$/,
                            JM: /^[Aa]\d{7}$/,
                            JP: /^[A-Z]{2}\d{7}$/,
                            KR: /^[MS]\d{8}$/,
                            KZ: /^[a-zA-Z]\d{7}$/,
                            LI: /^[a-zA-Z]\d{5}$/,
                            LT: /^[A-Z0-9]{8}$/,
                            LU: /^[A-Z0-9]{8}$/,
                            LV: /^[A-Z0-9]{2}\d{7}$/,
                            LY: /^[A-Z0-9]{8}$/,
                            MT: /^\d{7}$/,
                            MZ: /^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,
                            MY: /^[AHK]\d{8}$/,
                            MX: /^\d{10,11}$/,
                            NL: /^[A-Z]{2}[A-Z0-9]{6}\d$/,
                            NZ: /^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,
                            PH: /^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,
                            PK: /^[A-Z]{2}\d{7}$/,
                            PL: /^[A-Z]{2}\d{7}$/,
                            PT: /^[A-Z]\d{6}$/,
                            RO: /^\d{8,9}$/,
                            RU: /^\d{9}$/,
                            SE: /^\d{8}$/,
                            SL: /^(P)[A-Z]\d{7}$/,
                            SK: /^[0-9A-Z]\d{7}$/,
                            TH: /^[A-Z]{1,2}\d{6,7}$/,
                            TR: /^[A-Z]\d{8}$/,
                            UA: /^[A-Z]{2}\d{6}$/,
                            US: /^\d{9}$/
                        }, b.exports = m.default, b.exports.default = m.default, {
                            exports: {}
                        }),
                        x = {
                            exports: {}
                        },
                        m = (m = (b = x).exports, Object.defineProperty(m, "__esModule", {
                            value: !0
                        }), m.default = function(e, t) {
                            (0, zy.default)(e);
                            var r = (t = t || {}).hasOwnProperty("allow_leading_zeroes") && !t.allow_leading_zeroes ? Hy : Zy,
                                n = !t.hasOwnProperty("min") || e >= t.min,
                                o = !t.hasOwnProperty("max") || e <= t.max,
                                i = !t.hasOwnProperty("lt") || e < t.lt,
                                t = !t.hasOwnProperty("gt") || e > t.gt;
                            return r.test(e) && n && o && i && t
                        }, zy = (b_ = y.exports) && b_.__esModule ? b_ : {
                            default: b_
                        }, Hy = /^(?:[-+]?(?:0|[1-9][0-9]*))$/, Zy = /^[-+]?[0-9]+$/, b.exports = m.default, b.exports.default = m.default, b = (b_ = A).exports, Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e) {
                            return (0, Gy.default)(e, {
                                min: 0,
                                max: 65535
                            })
                        }, Gy = (m = x.exports) && m.__esModule ? m : {
                            default: m
                        }, b_.exports = b.default, b_.exports.default = b.default, {
                            exports: {}
                        }),
                        l_ = (b = (b_ = m).exports, Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e) {
                            return (0, Ky.default)(e), e === e.toLowerCase()
                        }, Ky = (l_ = y.exports) && l_.__esModule ? l_ : {
                            default: l_
                        }, b_.exports = b.default, b_.exports.default = b.default, {
                            exports: {}
                        }),
                        d_ = (b = (b_ = l_).exports, Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e) {
                            return (0, qy.default)(e), e === e.toUpperCase()
                        }, qy = (d_ = y.exports) && d_.__esModule ? d_ : {
                            default: d_
                        }, b_.exports = b.default, b_.exports.default = b.default, {
                            exports: {}
                        }),
                        f_ = (b = (b_ = d_).exports, Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e, t) {
                            (0, Wy.default)(e);
                            var r = Vy;
                            if (!(r = (t = t || {}).allow_hyphens ? Yy : r).test(e)) return !1;
                            e = e.replace(/-/g, "");
                            for (var n = 0, o = 2, i = 0; i < 14; i++) {
                                var a = e.substring(14 - i - 1, 14 - i),
                                    a = parseInt(a, 10) * o;
                                n += 10 <= a ? a % 10 + 1 : a, 1 === o ? o += 1 : --o
                            }
                            return (10 - n % 10) % 10 === parseInt(e.substring(14, 15), 10)
                        }, Wy = (f_ = y.exports) && f_.__esModule ? f_ : {
                            default: f_
                        }, Vy = /^[0-9]{15}$/, Yy = /^\d{2}-\d{6}-\d{6}-\d{1}$/, b_.exports = b.default, b_.exports.default = b.default, {
                            exports: {}
                        }),
                        p_ = (b = (b_ = f_).exports, Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e) {
                            return (0, Jy.default)(e), Xy.test(e)
                        }, Jy = (p_ = y.exports) && p_.__esModule ? p_ : {
                            default: p_
                        }, Xy = /^[\x00-\x7F]+$/, b_.exports = b.default, b_.exports.default = b.default, {}),
                        h_ = (Object.defineProperty(p_, "__esModule", {
                            value: !0
                        }), p_.default = function(e) {
                            return (0, h_.default)(e), m_.test(e)
                        }, p_.fullWidth = void 0, (b_ = y.exports) && b_.__esModule ? b_ : {
                            default: b_
                        }),
                        m_ = /[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,
                        b = (p_.fullWidth = m_, {}),
                        g_ = (Object.defineProperty(b, "__esModule", {
                            value: !0
                        }), b.default = function(e) {
                            return (0, g_.default)(e), v_.test(e)
                        }, b.halfWidth = void 0, (b_ = y.exports) && b_.__esModule ? b_ : {
                            default: b_
                        }),
                        v_ = /[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,
                        b_ = (b.halfWidth = v_, {
                            exports: {}
                        }),
                        y_ = (C_ = (w_ = b_).exports, Object.defineProperty(C_, "__esModule", {
                            value: !0
                        }), C_.default = function(e) {
                            return (0, Qy.default)(e), e_.fullWidth.test(e) && t_.halfWidth.test(e)
                        }, Qy = (y_ = y.exports) && y_.__esModule ? y_ : {
                            default: y_
                        }, e_ = p_, t_ = b, w_.exports = C_.default, w_.exports.default = C_.default, {
                            exports: {}
                        }),
                        __ = (C_ = (w_ = y_).exports, Object.defineProperty(C_, "__esModule", {
                            value: !0
                        }), C_.default = function(e) {
                            return (0, r_.default)(e), n_.test(e)
                        }, r_ = (__ = y.exports) && __.__esModule ? __ : {
                            default: __
                        }, n_ = /[^\x00-\x7F]/, w_.exports = C_.default, w_.exports.default = C_.default, {
                            exports: {}
                        }),
                        w_ = {
                            exports: {}
                        };

                    function A_(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    D = (C_ = w_).exports, Object.defineProperty(D, "__esModule", {
                        value: !0
                    }), D.default = function(e, t) {
                        e = e.join("");
                        return new RegExp(e, t)
                    }, C_.exports = D.default, C_.exports.default = D.default, D = (C_ = __).exports, Object.defineProperty(D, "__esModule", {
                        value: !0
                    }), D.default = function(e) {
                        return (0, o_.default)(e), i_.test(e)
                    }, o_ = A_(y.exports), i_ = (0, A_(w_.exports).default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)", "(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))", "?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"], "i"), C_.exports = D.default, C_.exports.default = D.default;
                    var x_, k_, E_, S_, R_, D_, T_, O_, w_ = {
                            exports: {}
                        },
                        I_ = (D = (C_ = w_).exports, Object.defineProperty(D, "__esModule", {
                            value: !0
                        }), D.default = function(e) {
                            return (0, x_.default)(e), k_.test(e)
                        }, x_ = (I_ = y.exports) && I_.__esModule ? I_ : {
                            default: I_
                        }, k_ = /[\uD800-\uDBFF][\uDC00-\uDFFF]/, C_.exports = D.default, C_.exports.default = D.default, {
                            exports: {}
                        }),
                        C_ = {
                            exports: {}
                        },
                        D = C_,
                        L_ = C_.exports;

                    function M_(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    Object.defineProperty(L_, "__esModule", {
                        value: !0
                    }), L_.default = void 0, L_.default = function(e, t) {
                        return e.some(function(e) {
                            return t === e
                        })
                    }, D.exports = L_.default, D.exports.default = L_.default, L_ = (D = I_).exports, Object.defineProperty(L_, "__esModule", {
                        value: !0
                    }), L_.default = function(e, t) {
                        if ((0, S_.default)(e), (t = (0, E_.default)(t, T_)).locale in D_.decimal) return !(0, R_.default)(O_, e.replace(/ /g, "")) && (r = t, new RegExp("^[-+]?([0-9]+)?(\\".concat(D_.decimal[r.locale], "[0-9]{").concat(r.decimal_digits, "})").concat(r.force_decimal ? "" : "?", "$")).test(e));
                        var r;
                        throw new Error("Invalid locale '".concat(t.locale, "'"))
                    }, E_ = M_(w.exports), S_ = M_(y.exports), R_ = M_(C_.exports), D_ = t, T_ = {
                        force_decimal: !1,
                        decimal_digits: "1,",
                        locale: "en-US"
                    }, O_ = ["", "-", "+"], D.exports = L_.default, D.exports.default = L_.default;
                    var P_, j_, U_, $_, B_, N_, C_ = {
                            exports: {}
                        },
                        L_ = (D = (t = C_).exports, Object.defineProperty(D, "__esModule", {
                            value: !0
                        }), D.default = function(e) {
                            return (0, P_.default)(e), j_.test(e)
                        }, P_ = (L_ = y.exports) && L_.__esModule ? L_ : {
                            default: L_
                        }, j_ = /^(0x|0h)?[0-9A-F]+$/i, t.exports = D.default, t.exports.default = D.default, {
                            exports: {}
                        }),
                        F_ = (D = (t = L_).exports, Object.defineProperty(D, "__esModule", {
                            value: !0
                        }), D.default = function(e) {
                            return (0, U_.default)(e), $_.test(e)
                        }, U_ = (F_ = y.exports) && F_.__esModule ? F_ : {
                            default: F_
                        }, $_ = /^(0o)?[0-7]+$/i, t.exports = D.default, t.exports.default = D.default, {
                            exports: {}
                        });

                    function G_(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    D = (t = F_).exports, Object.defineProperty(D, "__esModule", {
                        value: !0
                    }), D.default = function(e, t) {
                        return (0, B_.default)(e), (0, N_.default)(e) % parseInt(t, 10) == 0
                    }, B_ = G_(y.exports), N_ = G_(ml.exports), t.exports = D.default, t.exports.default = D.default;
                    var z_, H_, Z_, K_, q_, W_, V_, Y_, J_, X_, Q_, ew, tw, rw, nw, ow, iw, aw, sw, uw, cw, lw, dw, fw, pw, hw, t = {
                            exports: {}
                        },
                        mw = (ww = (D = t).exports, Object.defineProperty(ww, "__esModule", {
                            value: !0
                        }), ww.default = function(e) {
                            return (0, z_.default)(e), H_.test(e)
                        }, z_ = (mw = y.exports) && mw.__esModule ? mw : {
                            default: mw
                        }, H_ = /^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i, D.exports = ww.default, D.exports.default = ww.default, {
                            exports: {}
                        }),
                        gw = (ww = (D = mw).exports, Object.defineProperty(ww, "__esModule", {
                            value: !0
                        }), ww.default = function(e) {
                            var t = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1];
                            return (0, Z_.default)(e), t ? K_.test(e) || q_.test(e) || W_.test(e) || V_.test(e) : K_.test(e) || q_.test(e)
                        }, Z_ = (gw = y.exports) && gw.__esModule ? gw : {
                            default: gw
                        }, K_ = /^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/, q_ = /^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/, W_ = /^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/, V_ = /^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/, D.exports = ww.default, D.exports.default = ww.default, {
                            exports: {}
                        }),
                        vw = (ww = (D = gw).exports, Object.defineProperty(ww, "__esModule", {
                            value: !0
                        }), ww.default = function(e) {
                            (0, Y_.default)(e);
                            e = e.replace(/\s+/g, " ").replace(/\s?(hsla?\(|\)|,)\s?/gi, "$1");
                            return (-1 !== e.indexOf(",") ? J_ : X_).test(e)
                        }, Y_ = (vw = y.exports) && vw.__esModule ? vw : {
                            default: vw
                        }, J_ = /^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i, X_ = /^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i, D.exports = ww.default, D.exports.default = ww.default, {
                            exports: {}
                        }),
                        bw = (ww = (D = vw).exports, Object.defineProperty(ww, "__esModule", {
                            value: !0
                        }), ww.default = function(e) {
                            return (0, Q_.default)(e), ew.test(e)
                        }, Q_ = (bw = y.exports) && bw.__esModule ? bw : {
                            default: bw
                        }, ew = /^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/, D.exports = ww.default, D.exports.default = ww.default, {}),
                        yw = (Object.defineProperty(bw, "__esModule", {
                            value: !0
                        }), bw.default = function(e) {
                            return (0, yw.default)(e), t = e.replace(/[\s\-]+/gi, "").toUpperCase(), (r = t.slice(0, 2).toUpperCase()) in _w && _w[r].test(t) && 1 === ((r = e.replace(/[^A-Z0-9]+/gi, "").toUpperCase()).slice(4) + r.slice(0, 4)).replace(/[A-Z]/g, function(e) {
                                return e.charCodeAt(0) - 55
                            }).match(/\d{1,7}/g).reduce(function(e, t) {
                                return Number(e + t) % 97
                            }, "");
                            var t, r
                        }, bw.locales = void 0, (D = y.exports) && D.__esModule ? D : {
                            default: D
                        }),
                        _w = {
                            AD: /^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,
                            AE: /^(AE[0-9]{2})\d{3}\d{16}$/,
                            AL: /^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,
                            AT: /^(AT[0-9]{2})\d{16}$/,
                            AZ: /^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,
                            BA: /^(BA[0-9]{2})\d{16}$/,
                            BE: /^(BE[0-9]{2})\d{12}$/,
                            BG: /^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,
                            BH: /^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,
                            BR: /^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,
                            BY: /^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,
                            CH: /^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,
                            CR: /^(CR[0-9]{2})\d{18}$/,
                            CY: /^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,
                            CZ: /^(CZ[0-9]{2})\d{20}$/,
                            DE: /^(DE[0-9]{2})\d{18}$/,
                            DK: /^(DK[0-9]{2})\d{14}$/,
                            DO: /^(DO[0-9]{2})[A-Z]{4}\d{20}$/,
                            EE: /^(EE[0-9]{2})\d{16}$/,
                            EG: /^(EG[0-9]{2})\d{25}$/,
                            ES: /^(ES[0-9]{2})\d{20}$/,
                            FI: /^(FI[0-9]{2})\d{14}$/,
                            FO: /^(FO[0-9]{2})\d{14}$/,
                            FR: /^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,
                            GB: /^(GB[0-9]{2})[A-Z]{4}\d{14}$/,
                            GE: /^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,
                            GI: /^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,
                            GL: /^(GL[0-9]{2})\d{14}$/,
                            GR: /^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,
                            GT: /^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,
                            HR: /^(HR[0-9]{2})\d{17}$/,
                            HU: /^(HU[0-9]{2})\d{24}$/,
                            IE: /^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,
                            IL: /^(IL[0-9]{2})\d{19}$/,
                            IQ: /^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,
                            IR: /^(IR[0-9]{2})0\d{2}0\d{18}$/,
                            IS: /^(IS[0-9]{2})\d{22}$/,
                            IT: /^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,
                            JO: /^(JO[0-9]{2})[A-Z]{4}\d{22}$/,
                            KW: /^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,
                            KZ: /^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,
                            LB: /^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,
                            LC: /^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,
                            LI: /^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,
                            LT: /^(LT[0-9]{2})\d{16}$/,
                            LU: /^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,
                            LV: /^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,
                            MC: /^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,
                            MD: /^(MD[0-9]{2})[A-Z0-9]{20}$/,
                            ME: /^(ME[0-9]{2})\d{18}$/,
                            MK: /^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,
                            MR: /^(MR[0-9]{2})\d{23}$/,
                            MT: /^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,
                            MU: /^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,
                            MZ: /^(MZ[0-9]{2})\d{21}$/,
                            NL: /^(NL[0-9]{2})[A-Z]{4}\d{10}$/,
                            NO: /^(NO[0-9]{2})\d{11}$/,
                            PK: /^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,
                            PL: /^(PL[0-9]{2})\d{24}$/,
                            PS: /^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,
                            PT: /^(PT[0-9]{2})\d{21}$/,
                            QA: /^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,
                            RO: /^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,
                            RS: /^(RS[0-9]{2})\d{18}$/,
                            SA: /^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,
                            SC: /^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,
                            SE: /^(SE[0-9]{2})\d{20}$/,
                            SI: /^(SI[0-9]{2})\d{15}$/,
                            SK: /^(SK[0-9]{2})\d{20}$/,
                            SM: /^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,
                            SV: /^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,
                            TL: /^(TL[0-9]{2})\d{19}$/,
                            TN: /^(TN[0-9]{2})\d{20}$/,
                            TR: /^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,
                            UA: /^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,
                            VA: /^(VA[0-9]{2})\d{18}$/,
                            VG: /^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,
                            XK: /^(XK[0-9]{2})\d{16}$/
                        },
                        ww = Object.keys(_w),
                        D = (bw.locales = ww, {
                            exports: {}
                        }),
                        ww = {},
                        Aw = (Object.defineProperty(ww, "__esModule", {
                            value: !0
                        }), ww.default = function(e) {
                            return (0, Aw.default)(e), xw.has(e.toUpperCase())
                        }, ww.CountryCodes = void 0, (Rw = y.exports) && Rw.__esModule ? Rw : {
                            default: Rw
                        }),
                        xw = new Set(["AD", "AE", "AF", "AG", "AI", "AL", "AM", "AO", "AQ", "AR", "AS", "AT", "AU", "AW", "AX", "AZ", "BA", "BB", "BD", "BE", "BF", "BG", "BH", "BI", "BJ", "BL", "BM", "BN", "BO", "BQ", "BR", "BS", "BT", "BV", "BW", "BY", "BZ", "CA", "CC", "CD", "CF", "CG", "CH", "CI", "CK", "CL", "CM", "CN", "CO", "CR", "CU", "CV", "CW", "CX", "CY", "CZ", "DE", "DJ", "DK", "DM", "DO", "DZ", "EC", "EE", "EG", "EH", "ER", "ES", "ET", "FI", "FJ", "FK", "FM", "FO", "FR", "GA", "GB", "GD", "GE", "GF", "GG", "GH", "GI", "GL", "GM", "GN", "GP", "GQ", "GR", "GS", "GT", "GU", "GW", "GY", "HK", "HM", "HN", "HR", "HT", "HU", "ID", "IE", "IL", "IM", "IN", "IO", "IQ", "IR", "IS", "IT", "JE", "JM", "JO", "JP", "KE", "KG", "KH", "KI", "KM", "KN", "KP", "KR", "KW", "KY", "KZ", "LA", "LB", "LC", "LI", "LK", "LR", "LS", "LT", "LU", "LV", "LY", "MA", "MC", "MD", "ME", "MF", "MG", "MH", "MK", "ML", "MM", "MN", "MO", "MP", "MQ", "MR", "MS", "MT", "MU", "MV", "MW", "MX", "MY", "MZ", "NA", "NC", "NE", "NF", "NG", "NI", "NL", "NO", "NP", "NR", "NU", "NZ", "OM", "PA", "PE", "PF", "PG", "PH", "PK", "PL", "PM", "PN", "PR", "PS", "PT", "PW", "PY", "QA", "RE", "RO", "RS", "RU", "RW", "SA", "SB", "SC", "SD", "SE", "SG", "SH", "SI", "SJ", "SK", "SL", "SM", "SN", "SO", "SR", "SS", "ST", "SV", "SX", "SY", "SZ", "TC", "TD", "TF", "TG", "TH", "TJ", "TK", "TL", "TM", "TN", "TO", "TR", "TT", "TV", "TW", "TZ", "UA", "UG", "UM", "US", "UY", "UZ", "VA", "VC", "VE", "VG", "VI", "VN", "VU", "WF", "WS", "YE", "YT", "ZA", "ZM", "ZW"]),
                        kw = (ww.CountryCodes = xw, Lw = (Rw = D).exports, Object.defineProperty(Lw, "__esModule", {
                            value: !0
                        }), Lw.default = function(e) {
                            (0, tw.default)(e);
                            var t = e.slice(4, 6).toUpperCase();
                            return !(!rw.CountryCodes.has(t) && "XK" !== t) && nw.test(e)
                        }, tw = (kw = y.exports) && kw.__esModule ? kw : {
                            default: kw
                        }, rw = ww, nw = /^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/, Rw.exports = Lw.default, Rw.exports.default = Lw.default, {
                            exports: {}
                        }),
                        Ew = (Lw = (Rw = kw).exports, Object.defineProperty(Lw, "__esModule", {
                            value: !0
                        }), Lw.default = function(e) {
                            return (0, ow.default)(e), iw.test(e)
                        }, ow = (Ew = y.exports) && Ew.__esModule ? Ew : {
                            default: Ew
                        }, iw = /^[a-f0-9]{32}$/, Rw.exports = Lw.default, Rw.exports.default = Lw.default, {
                            exports: {}
                        }),
                        Sw = (Lw = (Rw = Ew).exports, Object.defineProperty(Lw, "__esModule", {
                            value: !0
                        }), Lw.default = function(e, t) {
                            return (0, aw.default)(e), new RegExp("^[a-fA-F0-9]{".concat(sw[t], "}$")).test(e)
                        }, aw = (Sw = y.exports) && Sw.__esModule ? Sw : {
                            default: Sw
                        }, sw = {
                            md5: 32,
                            md4: 32,
                            sha1: 40,
                            sha256: 64,
                            sha384: 96,
                            sha512: 128,
                            ripemd128: 32,
                            ripemd160: 40,
                            tiger128: 32,
                            tiger160: 40,
                            tiger192: 48,
                            crc32: 8,
                            crc32b: 8
                        }, Rw.exports = Lw.default, Rw.exports.default = Lw.default, {
                            exports: {}
                        }),
                        Rw = {
                            exports: {}
                        };

                    function Dw(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }

                    function Tw(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    Bw = (Lw = Rw).exports, Object.defineProperty(Bw, "__esModule", {
                        value: !0
                    }), Bw.default = function(e, t) {
                        (0, lw.default)(e), t = (0, dw.default)(t, hw);
                        var r = e.length;
                        return t.urlSafe ? pw.test(e) : r % 4 == 0 && !fw.test(e) && (-1 === (t = e.indexOf("=")) || t === r - 1 || t === r - 2 && "=" === e[r - 1])
                    }, lw = Tw(y.exports), dw = Tw(w.exports), fw = /[^A-Z0-9+\/=]/i, hw = {
                        urlSafe: !(pw = /^[A-Z0-9_\-]*$/i)
                    }, Lw.exports = Bw.default, Lw.exports.default = Bw.default, Bw = (Lw = Sw).exports, Object.defineProperty(Bw, "__esModule", {
                        value: !0
                    }), Bw.default = function(e) {
                        (0, uw.default)(e);
                        var e = e.split("."),
                            t = e.length;
                        return !(3 < t || t < 2) && e.reduce(function(e, t) {
                            return e && (0, cw.default)(t, {
                                urlSafe: !0
                            })
                        }, !0)
                    }, uw = Dw(y.exports), cw = Dw(Rw.exports), Lw.exports = Bw.default, Lw.exports.default = Bw.default;
                    var Ow, Iw, Cw, Lw = {
                        exports: {}
                    };

                    function Mw(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }

                    function Pw(e) {
                        return (Pw = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    Gw = (Bw = Lw).exports, Object.defineProperty(Gw, "__esModule", {
                        value: !0
                    }), Gw.default = function(e, t) {
                        (0, Ow.default)(e);
                        try {
                            t = (0, Iw.default)(t, Cw);
                            var r = [],
                                n = (t.allow_primitives && (r = [null, !1, !0]), JSON.parse(e));
                            return r.includes(n) || !!n && "object" === Pw(n)
                        } catch (e) {}
                        return !1
                    }, Ow = Mw(y.exports), Iw = Mw(w.exports), Cw = {
                        allow_primitives: !1
                    }, Bw.exports = Gw.default, Bw.exports.default = Gw.default;
                    var jw, Uw, $w, Bw = {
                        exports: {}
                    };

                    function Nw(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    eA = (Gw = Bw).exports, Object.defineProperty(eA, "__esModule", {
                        value: !0
                    }), eA.default = function(e, t) {
                        return (0, jw.default)(e), 0 === ((t = (0, Uw.default)(t, $w)).ignore_whitespace ? e.trim() : e).length
                    }, jw = Nw(y.exports), Uw = Nw(w.exports), $w = {
                        ignore_whitespace: !1
                    }, Gw.exports = eA.default, Gw.exports.default = eA.default;
                    var Fw, Gw = {
                        exports: {}
                    };

                    function zw(e) {
                        return (zw = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    iA = (eA = Gw).exports, Object.defineProperty(iA, "__esModule", {
                        value: !0
                    }), iA.default = function(e, t) {
                        (0, Fw.default)(e), t = "object" === zw(t) ? (r = t.min || 0, t.max) : (r = t || 0, arguments[2]);
                        var r, n = e.match(/(\uFE0F|\uFE0E)/g) || [],
                            o = e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g) || [],
                            e = e.length - n.length - o.length;
                        return r <= e && (void 0 === t || e <= t)
                    }, Fw = (Ww = y.exports) && Ww.__esModule ? Ww : {
                        default: Ww
                    }, eA.exports = iA.default, eA.exports.default = iA.default;
                    var Hw, Zw, Kw, qw, Ww = {
                            exports: {}
                        },
                        Vw = (iA = (eA = Ww).exports, Object.defineProperty(iA, "__esModule", {
                            value: !0
                        }), iA.default = function(e, t) {
                            (0, Hw.default)(e);
                            t = Zw[[void 0, null].includes(t) ? "all" : t];
                            return !!t && t.test(e)
                        }, Hw = (Vw = y.exports) && Vw.__esModule ? Vw : {
                            default: Vw
                        }, Zw = {
                            1: /^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
                            2: /^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
                            3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
                            4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
                            5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
                            all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i
                        }, eA.exports = iA.default, eA.exports.default = iA.default, {
                            exports: {}
                        });

                    function Yw(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    iA = (eA = Vw).exports, Object.defineProperty(iA, "__esModule", {
                        value: !0
                    }), iA.default = function(e) {
                        return (0, Kw.default)(e), (0, qw.default)(e) && 24 === e.length
                    }, Kw = Yw(y.exports), qw = Yw(C_.exports), eA.exports = iA.default, eA.exports.default = iA.default;
                    var Jw, Xw, Qw, eA = {
                            exports: {}
                        },
                        tA = (bA = (iA = eA).exports, Object.defineProperty(bA, "__esModule", {
                            value: !0
                        }), bA.default = function(e, t) {
                            t = (null == t ? void 0 : t.comparisonDate) || t || Date().toString(), t = (0, Jw.default)(t), e = (0, Jw.default)(e);
                            return !!(e && t && t < e)
                        }, Jw = (tA = bl.exports) && tA.__esModule ? tA : {
                            default: tA
                        }, iA.exports = bA.default, iA.exports.default = bA.default, {
                            exports: {}
                        });

                    function rA(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    bA = (iA = tA).exports, Object.defineProperty(bA, "__esModule", {
                        value: !0
                    }), bA.default = function(e) {
                        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : String(new Date),
                            t = ((0, Xw.default)(e), (0, Qw.default)(t)),
                            e = (0, Qw.default)(e);
                        return !!(e && t && e < t)
                    }, Xw = rA(y.exports), Qw = rA(bl.exports), iA.exports = bA.default, iA.exports.default = bA.default;
                    var nA, oA, iA = {
                        exports: {}
                    };

                    function aA(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }

                    function sA(e) {
                        return (sA = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    BA = (bA = iA).exports, Object.defineProperty(BA, "__esModule", {
                        value: !0
                    }), BA.default = function(e, t) {
                        if ((0, nA.default)(e), "[object Array]" !== Object.prototype.toString.call(t)) return "object" === sA(t) ? t.hasOwnProperty(e) : !(!t || "function" != typeof t.indexOf) && 0 <= t.indexOf(e);
                        var r = [];
                        for (var n in t) !{}.hasOwnProperty.call(t, n) || (r[n] = (0, oA.default)(t[n]));
                        return 0 <= r.indexOf(e)
                    }, nA = aA(y.exports), oA = aA(js.exports), bA.exports = BA.default, bA.exports.default = BA.default;
                    var uA, cA, lA, dA, fA, js = {
                            exports: {}
                        },
                        pA = (BA = (bA = js).exports, Object.defineProperty(BA, "__esModule", {
                            value: !0
                        }), BA.default = function(e) {
                            (0, uA.default)(e);
                            for (var t, r, n = e.replace(/[- ]+/g, ""), o = 0, i = n.length - 1; 0 <= i; i--) t = n.substring(i, i + 1), t = parseInt(t, 10), o += r && 10 <= (t *= 2) ? t % 10 + 1 : t, r = !r;
                            return !(o % 10 != 0 || !n)
                        }, uA = (pA = y.exports) && pA.__esModule ? pA : {
                            default: pA
                        }, bA.exports = BA.default, bA.exports.default = BA.default, {
                            exports: {}
                        });

                    function hA(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    BA = (bA = pA).exports, Object.defineProperty(BA, "__esModule", {
                        value: !0
                    }), BA.default = function(e) {
                        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                            t = ((0, cA.default)(e), t.provider),
                            r = e.replace(/[- ]+/g, "");
                        if (t && t.toLowerCase() in dA) {
                            if (!dA[t.toLowerCase()].test(r)) return !1
                        } else {
                            if (t && !(t.toLowerCase() in dA)) throw new Error("".concat(t, " is not a valid credit card provider."));
                            if (!fA.test(r)) return !1
                        }
                        return (0, lA.default)(e)
                    }, cA = hA(y.exports), lA = hA(js.exports), dA = {
                        amex: /^3[47][0-9]{13}$/,
                        dinersclub: /^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,
                        discover: /^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,
                        jcb: /^(?:2131|1800|35\d{3})\d{11}$/,
                        mastercard: /^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,
                        unionpay: /^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,
                        visa: /^(?:4[0-9]{12})(?:[0-9]{3,6})?$/
                    }, fA = /^(?:4[0-9]{12}(?:[0-9]{3,6})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12,15}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14}|^(81[0-9]{14,17}))$/, bA.exports = BA.default, bA.exports.default = BA.default;
                    var mA, gA, vA, bA = {
                        exports: {}
                    };

                    function yA(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    HA = (BA = bA).exports, Object.defineProperty(HA, "__esModule", {
                        value: !0
                    }), HA.default = function(e, t) {
                        if ((0, mA.default)(e), t in vA) return vA[t](e);
                        if ("any" !== t) throw new Error("Invalid locale '".concat(t, "'"));
                        for (var r in vA)
                            if (vA.hasOwnProperty(r) && (0, vA[r])(e)) return !0;
                        return !1
                    }, mA = yA(y.exports), gA = yA(x.exports), vA = {
                        PL: function(e) {
                            (0, mA.default)(e);
                            var n = {
                                1: 1,
                                2: 3,
                                3: 7,
                                4: 9,
                                5: 1,
                                6: 3,
                                7: 7,
                                8: 9,
                                9: 1,
                                10: 3,
                                11: 0
                            };
                            if (null != e && 11 === e.length && (0, gA.default)(e, {
                                    allow_leading_zeroes: !0
                                })) {
                                var t = e.split("").slice(0, -1).reduce(function(e, t, r) {
                                        return e + Number(t) * n[r + 1]
                                    }, 0) % 10,
                                    e = Number(e.charAt(e.length - 1));
                                if (0 == t && 0 === e || e === 10 - t) return !0
                            }
                            return !1
                        },
                        ES: function(e) {
                            (0, mA.default)(e);
                            var t, r = {
                                    X: 0,
                                    Y: 1,
                                    Z: 2
                                },
                                e = e.trim().toUpperCase();
                            return !!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(e) && (t = e.slice(0, -1).replace(/[X,Y,Z]/g, function(e) {
                                return r[e]
                            }), e.endsWith(["T", "R", "W", "A", "G", "M", "Y", "F", "P", "D", "X", "B", "N", "J", "Z", "S", "Q", "V", "H", "L", "C", "K", "E"][t % 23]))
                        },
                        FI: function(e) {
                            return (0, mA.default)(e), 11 === e.length && !!e.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/) && "0123456789ABCDEFHJKLMNPRSTUVWXY" [(1e3 * parseInt(e.slice(0, 6), 10) + parseInt(e.slice(7, 10), 10)) % 31] === e.slice(10, 11)
                        },
                        IN: function(e) {
                            var r, n = [
                                    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
                                    [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],
                                    [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],
                                    [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],
                                    [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],
                                    [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],
                                    [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],
                                    [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],
                                    [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],
                                    [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
                                ],
                                o = [
                                    [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
                                    [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],
                                    [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],
                                    [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],
                                    [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],
                                    [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],
                                    [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],
                                    [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]
                                ],
                                e = e.trim();
                            return !!/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/.test(e) && (r = 0, e.replace(/\s/g, "").split("").map(Number).reverse().forEach(function(e, t) {
                                r = n[r][o[t % 8][e]]
                            }), 0 === r)
                        },
                        IR: function(e) {
                            if (!e.match(/^\d{10}$/)) return !1;
                            if (e = "0000".concat(e).slice(e.length - 6), 0 === parseInt(e.slice(3, 9), 10)) return !1;
                            for (var t = parseInt(e.slice(9, 10), 10), r = 0, n = 0; n < 9; n++) r += parseInt(e.slice(n, n + 1), 10) * (10 - n);
                            return (r %= 11) < 2 && t === r || 2 <= r && t === 11 - r
                        },
                        IT: function(e) {
                            return 9 === e.length && "CA00000AA" !== e && -1 < e.search(/C[A-Z][0-9]{5}[A-Z]{2}/i)
                        },
                        NO: function(e) {
                            var t, r, e = e.trim();
                            return !isNaN(Number(e)) && 11 === e.length && "00000000000" !== e && (t = (11 - (3 * (e = e.split("").map(Number))[0] + 7 * e[1] + 6 * e[2] + +e[3] + 8 * e[4] + 9 * e[5] + 4 * e[6] + 5 * e[7] + 2 * e[8]) % 11) % 11, r = (11 - (5 * e[0] + 4 * e[1] + 3 * e[2] + 2 * e[3] + 7 * e[4] + 6 * e[5] + 5 * e[6] + 4 * e[7] + 3 * e[8] + 2 * t) % 11) % 11, t === e[9]) && r === e[10]
                        },
                        TH: function(e) {
                            if (!e.match(/^[1-8]\d{12}$/)) return !1;
                            for (var t = 0, r = 0; r < 12; r++) t += parseInt(e[r], 10) * (13 - r);
                            return e[12] === ((11 - t % 11) % 10).toString()
                        },
                        LK: function(e) {
                            return !(10 !== e.length || !/^[1-9]\d{8}[vx]$/i.test(e)) || !(12 !== e.length || !/^[1-9]\d{11}$/i.test(e))
                        },
                        "he-IL": function(e) {
                            e = e.trim();
                            if (!/^\d{9}$/.test(e)) return !1;
                            for (var t, r = e, n = 0, o = 0; o < r.length; o++) n += 9 < (t = Number(r[o]) * (o % 2 + 1)) ? t - 9 : t;
                            return n % 10 == 0
                        },
                        "ar-LY": function(e) {
                            e = e.trim();
                            return !!/^(1|2)\d{11}$/.test(e)
                        },
                        "ar-TN": function(e) {
                            e = e.trim();
                            return !!/^\d{8}$/.test(e)
                        },
                        "zh-CN": function(e) {
                            function t(e) {
                                return a.includes(e)
                            }

                            function r(e) {
                                var t = parseInt(e.substring(0, 4), 10),
                                    r = parseInt(e.substring(4, 6), 10),
                                    e = parseInt(e.substring(6), 10),
                                    n = new Date(t, r - 1, e);
                                return !(n > new Date) && n.getFullYear() === t && n.getMonth() === r - 1 && n.getDate() === e
                            }
                            var n, o, i, a = ["11", "12", "13", "14", "15", "21", "22", "23", "31", "32", "33", "34", "35", "36", "37", "41", "42", "43", "44", "45", "46", "50", "51", "52", "53", "54", "61", "62", "63", "64", "65", "71", "81", "82", "91"],
                                s = ["7", "9", "10", "5", "8", "4", "2", "1", "6", "3", "7", "9", "10", "5", "8", "4", "2"],
                                u = ["1", "0", "X", "9", "8", "7", "6", "5", "4", "3", "2"];
                            return !!(/^\d{15}|(\d{17}(\d|x|X))$/.test(e = e) && (15 === e.length ? /^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(o = e) && (i = o.substring(0, 2), t(i)) && (i = "19".concat(o.substring(6, 12)), r(i)) : /^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(o = e) && (i = o.substring(0, 2), t(i)) && (i = o.substring(6, 14), r(i)) && (n = o, function() {
                                for (var e = n.substring(0, 17), t = 0, r = 0; r < 17; r++) t += parseInt(e.charAt(r), 10) * parseInt(s[r], 10);
                                return u[t % 11]
                            }() === n.charAt(17).toUpperCase())))
                        },
                        "zh-HK": function(e) {
                            var t = /^[0-9]$/;
                            if (e = (e = e.trim()).toUpperCase(), !/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/.test(e)) return !1;
                            8 === (e = e.replace(/\[|\]|\(|\)/g, "")).length && (e = "3".concat(e));
                            for (var r = 0, n = 0; n <= 7; n++) r += (t.test(e[n]) ? e[n] : (e[n].charCodeAt(0) - 55) % 11) * (9 - n);
                            return (0 == (r %= 11) ? "0" : 1 === r ? "A" : String(11 - r)) === e[e.length - 1]
                        },
                        "zh-TW": function(e) {
                            var o = {
                                    A: 10,
                                    B: 11,
                                    C: 12,
                                    D: 13,
                                    E: 14,
                                    F: 15,
                                    G: 16,
                                    H: 17,
                                    I: 34,
                                    J: 18,
                                    K: 19,
                                    L: 20,
                                    M: 21,
                                    N: 22,
                                    O: 35,
                                    P: 23,
                                    Q: 24,
                                    R: 25,
                                    S: 26,
                                    T: 27,
                                    U: 28,
                                    V: 29,
                                    W: 32,
                                    X: 30,
                                    Y: 31,
                                    Z: 33
                                },
                                e = e.trim().toUpperCase();
                            return !!/^[A-Z][0-9]{9}$/.test(e) && Array.from(e).reduce(function(e, t, r) {
                                var n;
                                return 0 === r ? (n = o[t]) % 10 * 9 + Math.floor(n / 10) : 9 === r ? (10 - e % 10 - Number(t)) % 10 == 0 : e + Number(t) * (9 - r)
                            }, 0)
                        }
                    }, BA.exports = HA.default, BA.exports.default = HA.default;
                    var _A, wA, AA, xA, kA, EA, SA, RA, DA, TA, OA, IA, CA, LA, MA, PA, jA, UA, $A, BA = {
                            exports: {}
                        },
                        NA = (ix = (HA = BA).exports, Object.defineProperty(ix, "__esModule", {
                            value: !0
                        }), ix.default = function(e) {
                            (0, _A.default)(e);
                            var r, t = Number(e.slice(-1));
                            return xA.test(e) && t === ((t = 10 - (r = e).slice(0, -1).split("").map(function(e, t) {
                                return Number(e) * ((e = r.length) === wA || e === AA ? t % 2 == 0 ? 3 : 1 : t % 2 == 0 ? 1 : 3)
                            }).reduce(function(e, t) {
                                return e + t
                            }, 0) % 10) < 10 ? t : 0)
                        }, _A = (NA = y.exports) && NA.__esModule ? NA : {
                            default: NA
                        }, wA = 8, AA = 14, xA = /^(\d{8}|\d{13}|\d{14})$/, HA.exports = ix.default, HA.exports.default = ix.default, {
                            exports: {}
                        }),
                        FA = (ix = (HA = NA).exports, Object.defineProperty(ix, "__esModule", {
                            value: !0
                        }), ix.default = function(e) {
                            if ((0, kA.default)(e), !EA.test(e)) return !1;
                            for (var t = !0, r = 0, n = e.length - 2; 0 <= n; n--)
                                if ("A" <= e[n] && e[n] <= "Z")
                                    for (var o = e[n].charCodeAt(0) - 55, i = 0, a = [o % 10, Math.trunc(o / 10)]; i < a.length; i++) {
                                        var s = a[i];
                                        r += t ? 5 <= s ? 1 + 2 * (s - 5) : 2 * s : s, t = !t
                                    } else {
                                        o = e[n].charCodeAt(0) - "0".charCodeAt(0);
                                        r += t ? 5 <= o ? 1 + 2 * (o - 5) : 2 * o : o, t = !t
                                    }
                            var u = 10 * Math.trunc((r + 9) / 10) - r;
                            return +e[e.length - 1] == u
                        }, kA = (FA = y.exports) && FA.__esModule ? FA : {
                            default: FA
                        }, EA = /^[A-Z]{2}[0-9A-Z]{9}[0-9]$/, HA.exports = ix.default, HA.exports.default = ix.default, {
                            exports: {}
                        }),
                        GA = (ix = (HA = FA).exports, Object.defineProperty(ix, "__esModule", {
                            value: !0
                        }), ix.default = function e(t, r) {
                            (0, SA.default)(t);
                            var n = String((null == r ? void 0 : r.version) || r);
                            if (!(null != r && r.version || r)) return e(t, {
                                version: 10
                            }) || e(t, {
                                version: 13
                            });
                            var o = t.replace(/[\s-]+/g, ""),
                                i = 0;
                            if ("10" === n) {
                                if (!RA.test(o)) return !1;
                                for (var a = 0; a < n - 1; a++) i += (a + 1) * o.charAt(a);
                                if ("X" === o.charAt(9) ? i += 100 : i += 10 * o.charAt(9), i % 11 == 0) return !0
                            } else if ("13" === n) {
                                if (!DA.test(o)) return !1;
                                for (var s = 0; s < 12; s++) i += TA[s % 2] * o.charAt(s);
                                if (o.charAt(12) - (10 - i % 10) % 10 == 0) return !0
                            }
                            return !1
                        }, SA = (GA = y.exports) && GA.__esModule ? GA : {
                            default: GA
                        }, RA = /^(?:[0-9]{9}X|[0-9]{10})$/, DA = /^(?:[0-9]{13})$/, TA = [1, 3], HA.exports = ix.default, HA.exports.default = ix.default, {
                            exports: {}
                        }),
                        zA = (ix = (HA = GA).exports, Object.defineProperty(ix, "__esModule", {
                            value: !0
                        }), ix.default = function(e) {
                            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                                r = ((0, OA.default)(e), IA),
                                r = t.require_hyphen ? r.replace("?", "") : r;
                            if (!(r = t.case_sensitive ? new RegExp(r) : new RegExp(r, "i")).test(e)) return !1;
                            for (var n = e.replace("-", "").toUpperCase(), o = 0, i = 0; i < n.length; i++) {
                                var a = n[i];
                                o += ("X" === a ? 10 : +a) * (8 - i)
                            }
                            return o % 11 == 0
                        }, OA = (zA = y.exports) && zA.__esModule ? zA : {
                            default: zA
                        }, IA = "^\\d{4}-?\\d{3}[\\dX]$", HA.exports = ix.default, HA.exports.default = ix.default, {
                            exports: {}
                        }),
                        HA = {};

                    function ZA(e) {
                        return (ZA = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }

                    function KA() {
                        var e;
                        return "function" != typeof WeakMap ? null : (e = new WeakMap, KA = function() {
                            return e
                        }, e)
                    }

                    function qA(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }

                    function WA(e, t) {
                        (null == t || t > e.length) && (t = e.length);
                        for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                        return n
                    }

                    function VA(e) {
                        for (var t = !1, r = !1, n = 0; n < 3; n++)
                            if (!t && /[AEIOU]/.test(e[n])) t = !0;
                            else if (!r && t && "X" === e[n]) r = !0;
                        else if (0 < n) {
                            if (t && !r && !/[AEIOU]/.test(e[n])) return;
                            if (r && !/X/.test(e[n])) return
                        }
                        return 1
                    }
                    Object.defineProperty(HA, "__esModule", {
                        value: !0
                    }), HA.iso7064Check = function(e) {
                        for (var t = 10, r = 0; r < e.length - 1; r++) t = (parseInt(e[r], 10) + t) % 10 == 0 ? 9 : (parseInt(e[r], 10) + t) % 10 * 2 % 11;
                        return (t = 1 === t ? 0 : 11 - t) === parseInt(e[10], 10)
                    }, HA.luhnCheck = function(e) {
                        for (var t, r = 0, n = !1, o = e.length - 1; 0 <= o; o--) r += n ? 9 < (t = 2 * parseInt(e[o], 10)) ? t.toString().split("").map(function(e) {
                            return parseInt(e, 10)
                        }).reduce(function(e, t) {
                            return e + t
                        }, 0) : t : parseInt(e[o], 10), n = !n;
                        return r % 10 == 0
                    }, HA.reverseMultiplyAndSum = function(e, t) {
                        for (var r = 0, n = 0; n < e.length; n++) r += e[n] * (t - n);
                        return r
                    }, HA.verhoeffCheck = function(e) {
                        for (var t = [
                                [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
                                [1, 2, 3, 4, 0, 6, 7, 8, 9, 5],
                                [2, 3, 4, 0, 1, 7, 8, 9, 5, 6],
                                [3, 4, 0, 1, 2, 8, 9, 5, 6, 7],
                                [4, 0, 1, 2, 3, 9, 5, 6, 7, 8],
                                [5, 9, 8, 7, 6, 0, 4, 3, 2, 1],
                                [6, 5, 9, 8, 7, 1, 0, 4, 3, 2],
                                [7, 6, 5, 9, 8, 2, 1, 0, 4, 3],
                                [8, 7, 6, 5, 9, 3, 2, 1, 0, 4],
                                [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
                            ], r = [
                                [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],
                                [1, 5, 7, 6, 2, 8, 3, 0, 9, 4],
                                [5, 8, 0, 3, 7, 9, 6, 1, 4, 2],
                                [8, 9, 1, 6, 0, 4, 3, 5, 2, 7],
                                [9, 4, 5, 3, 1, 2, 6, 8, 7, 0],
                                [4, 2, 8, 6, 5, 7, 3, 9, 0, 1],
                                [2, 7, 9, 3, 8, 0, 6, 4, 1, 5],
                                [7, 0, 4, 6, 9, 1, 3, 2, 5, 8]
                            ], n = e.split("").reverse().join(""), o = 0, i = 0; i < n.length; i++) o = t[o][r[i % 8][parseInt(n[i], 10)]];
                        return 0 === o
                    }, ox = (ix = zA).exports, Object.defineProperty(ox, "__esModule", {
                        value: !0
                    }), ox.default = function(e) {
                        var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "en-US",
                            e = ((0, CA.default)(e), e.slice(0));
                        if (t in jA) return t in $A && (e = e.replace($A[t], "")), !!jA[t].test(e) && (!(t in UA) || UA[t](e));
                        throw new Error("Invalid locale '".concat(t, "'"))
                    }, CA = qA(y.exports), LA = function(e) {
                        if (e && e.__esModule) return e;
                        if (null === e || "object" !== ZA(e) && "function" != typeof e) return {
                            default: e
                        };
                        var t = KA();
                        if (t && t.has(e)) return t.get(e);
                        var r, n, o = {},
                            i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                        for (r in e) Object.prototype.hasOwnProperty.call(e, r) && ((n = i ? Object.getOwnPropertyDescriptor(e, r) : null) && (n.get || n.set) ? Object.defineProperty(o, r, n) : o[r] = e[r]);
                        return o.default = e, t && t.set(e, o), o
                    }(HA), MA = qA(E.exports), PA = {
                        andover: ["10", "12"],
                        atlanta: ["60", "67"],
                        austin: ["50", "53"],
                        brookhaven: ["01", "02", "03", "04", "05", "06", "11", "13", "14", "16", "21", "22", "23", "25", "34", "51", "52", "54", "55", "56", "57", "58", "59", "65"],
                        cincinnati: ["30", "32", "35", "36", "37", "38", "61"],
                        fresno: ["15", "24"],
                        internet: ["20", "26", "27", "45", "46", "47"],
                        kansas: ["40", "44"],
                        memphis: ["94", "95"],
                        ogden: ["80", "90"],
                        philadelphia: ["33", "39", "41", "42", "43", "46", "48", "62", "63", "64", "66", "68", "71", "72", "73", "74", "75", "76", "77", "81", "82", "83", "84", "85", "86", "87", "88", "91", "92", "93", "98", "99"],
                        sba: ["31"]
                    }, (jA = {
                        "bg-BG": /^\d{10}$/,
                        "cs-CZ": /^\d{6}\/{0,1}\d{3,4}$/,
                        "de-AT": /^\d{9}$/,
                        "de-DE": /^[1-9]\d{10}$/,
                        "dk-DK": /^\d{6}-{0,1}\d{4}$/,
                        "el-CY": /^[09]\d{7}[A-Z]$/,
                        "el-GR": /^([0-4]|[7-9])\d{8}$/,
                        "en-CA": /^\d{9}$/,
                        "en-GB": /^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,
                        "en-IE": /^\d{7}[A-W][A-IW]{0,1}$/i,
                        "en-US": /^\d{2}[- ]{0,1}\d{7}$/,
                        "es-ES": /^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,
                        "et-EE": /^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,
                        "fi-FI": /^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,
                        "fr-BE": /^\d{11}$/,
                        "fr-FR": /^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,
                        "fr-LU": /^\d{13}$/,
                        "hr-HR": /^\d{11}$/,
                        "hu-HU": /^8\d{9}$/,
                        "it-IT": /^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,
                        "lv-LV": /^\d{6}-{0,1}\d{5}$/,
                        "mt-MT": /^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,
                        "nl-NL": /^\d{9}$/,
                        "pl-PL": /^\d{10,11}$/,
                        "pt-BR": /(?:^\d{11}$)|(?:^\d{14}$)/,
                        "pt-PT": /^\d{9}$/,
                        "ro-RO": /^\d{13}$/,
                        "sk-SK": /^\d{6}\/{0,1}\d{3,4}$/,
                        "sl-SI": /^[1-9]\d{7}$/,
                        "sv-SE": /^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/
                    })["lb-LU"] = jA["fr-LU"], jA["lt-LT"] = jA["et-EE"], jA["nl-BE"] = jA["fr-BE"], jA["fr-CA"] = jA["en-CA"], (UA = {
                        "bg-BG": function(e) {
                            var t = e.slice(0, 2),
                                r = parseInt(e.slice(2, 4), 10),
                                t = (40 < r ? (r -= 40, "20") : 20 < r ? (r -= 20, "18") : "19").concat(t),
                                t = (r < 10 && (r = "0".concat(r)), "".concat(t, "/").concat(r, "/").concat(e.slice(4, 6)));
                            if (!(0, MA.default)(t, "YYYY/MM/DD")) return !1;
                            for (var n = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), o = [2, 4, 8, 5, 10, 9, 7, 3, 6], i = 0, a = 0; a < o.length; a++) i += n[a] * o[a];
                            return (i = i % 11 == 10 ? 0 : i % 11) === n[9]
                        },
                        "cs-CZ": function(e) {
                            e = e.replace(/\W/, "");
                            var t = parseInt(e.slice(0, 2), 10);
                            if (10 === e.length) t = (t < 54 ? "20" : "19").concat(t);
                            else {
                                if ("000" === e.slice(6)) return !1;
                                if (!(t < 54)) return !1;
                                t = "19".concat(t)
                            }
                            3 === t.length && (t = [t.slice(0, 2), "0", t.slice(2)].join(""));
                            var r = parseInt(e.slice(2, 4), 10);
                            if (50 < r && (r -= 50), 20 < r) {
                                if (parseInt(t, 10) < 2004) return !1;
                                r -= 20
                            }
                            r < 10 && (r = "0".concat(r));
                            r = "".concat(t, "/").concat(r, "/").concat(e.slice(4, 6));
                            if (!(0, MA.default)(r, "YYYY/MM/DD")) return !1;
                            if (10 === e.length && parseInt(e, 10) % 11 != 0) {
                                r = parseInt(e.slice(0, 9), 10) % 11;
                                if (!(parseInt(t, 10) < 1986 && 10 == r)) return !1;
                                if (0 !== parseInt(e.slice(9), 10)) return !1
                            }
                            return !0
                        },
                        "de-AT": function(e) {
                            return LA.luhnCheck(e)
                        },
                        "de-DE": function(e) {
                            for (var t = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), r = [], n = 0; n < t.length - 1; n++) {
                                r.push("");
                                for (var o = 0; o < t.length - 1; o++) t[n] === t[o] && (r[n] += o)
                            }
                            if (2 !== (r = r.filter(function(e) {
                                    return 1 < e.length
                                })).length && 3 !== r.length) return !1;
                            if (3 === r[0].length) {
                                for (var i = r[0].split("").map(function(e) {
                                        return parseInt(e, 10)
                                    }), a = 0, s = 0; s < i.length - 1; s++) i[s] + 1 === i[s + 1] && (a += 1);
                                if (2 === a) return !1
                            }
                            return LA.iso7064Check(e)
                        },
                        "dk-DK": function(e) {
                            e = e.replace(/\W/, "");
                            var t = parseInt(e.slice(4, 6), 10);
                            switch (e.slice(6, 7)) {
                                case "0":
                                case "1":
                                case "2":
                                case "3":
                                    t = "19".concat(t);
                                    break;
                                case "4":
                                case "9":
                                    t = (t < 37 ? "20" : "19").concat(t);
                                    break;
                                default:
                                    if (t < 37) t = "20".concat(t);
                                    else {
                                        if (!(58 < t)) return !1;
                                        t = "18".concat(t)
                                    }
                            }
                            3 === t.length && (t = [t.slice(0, 2), "0", t.slice(2)].join(""));
                            var r = "".concat(t, "/").concat(e.slice(2, 4), "/").concat(e.slice(0, 2));
                            if (!(0, MA.default)(r, "YYYY/MM/DD")) return !1;
                            for (var n = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), o = 0, i = 4, a = 0; a < 9; a++) o += n[a] * i, 1 == --i && (i = 7);
                            return 1 != (o %= 11) && (0 === o ? 0 === n[9] : n[9] === 11 - o)
                        },
                        "el-CY": function(e) {
                            for (var t = e.slice(0, 8).split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), r = 0, n = 1; n < t.length; n += 2) r += t[n];
                            for (var o = 0; o < t.length; o += 2) t[o] < 2 ? r += 1 - t[o] : (r += 2 * (t[o] - 2) + 5, 4 < t[o] && (r += 2));
                            return String.fromCharCode(r % 26 + 65) === e.charAt(8)
                        },
                        "el-GR": function(e) {
                            for (var t = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), r = 0, n = 0; n < 8; n++) r += t[n] * Math.pow(2, 8 - n);
                            return r % 11 % 10 === t[8]
                        },
                        "en-CA": function(e) {
                            var e = e.split(""),
                                t = e.filter(function(e, t) {
                                    return t % 2
                                }).map(function(e) {
                                    return 2 * Number(e)
                                }).join("").split("");
                            return e.filter(function(e, t) {
                                return !(t % 2)
                            }).concat(t).map(function(e) {
                                return Number(e)
                            }).reduce(function(e, t) {
                                return e + t
                            }) % 10 == 0
                        },
                        "en-IE": function(e) {
                            var t = LA.reverseMultiplyAndSum(e.split("").slice(0, 7).map(function(e) {
                                return parseInt(e, 10)
                            }), 8);
                            return 9 === e.length && "W" !== e[8] && (t += 9 * (e[8].charCodeAt(0) - 64)), 0 == (t %= 23) ? "W" === e[7].toUpperCase() : e[7].toUpperCase() === String.fromCharCode(64 + t)
                        },
                        "en-US": function(e) {
                            return -1 !== function() {
                                var e, t = [];
                                for (e in PA) PA.hasOwnProperty(e) && t.push.apply(t, function e(t) {
                                    return function(e) {
                                        if (Array.isArray(e)) return WA(e)
                                    }(t) || function(e) {
                                        if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e)
                                    }(t) || function(e) {
                                        var t;
                                        if (e) return "string" == typeof e ? WA(e, void 0) : "Map" === (t = "Object" === (t = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : t) || "Set" === t ? Array.from(e) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? WA(e, void 0) : void 0
                                    }(t) || function() {
                                        throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                    }()
                                }(PA[e]));
                                return t
                            }().indexOf(e.slice(0, 2))
                        },
                        "es-ES": function(e) {
                            var t = e.toUpperCase().split("");
                            if (isNaN(parseInt(t[0], 10)) && 1 < t.length) {
                                var r = 0;
                                switch (t[0]) {
                                    case "Y":
                                        r = 1;
                                        break;
                                    case "Z":
                                        r = 2
                                }
                                t.splice(0, 1, r)
                            } else
                                for (; t.length < 9;) t.unshift(0);
                            t = t.join(""), e = parseInt(t.slice(0, 8), 10) % 23;
                            return t[8] === ["T", "R", "W", "A", "G", "M", "Y", "F", "P", "D", "X", "B", "N", "J", "Z", "S", "Q", "V", "H", "L", "C", "K", "E"][e]
                        },
                        "et-EE": function(e) {
                            var t = e.slice(1, 3);
                            switch (e.slice(0, 1)) {
                                case "1":
                                case "2":
                                    t = "18".concat(t);
                                    break;
                                case "3":
                                case "4":
                                    t = "19".concat(t);
                                    break;
                                default:
                                    t = "20".concat(t)
                            }
                            var r = "".concat(t, "/").concat(e.slice(3, 5), "/").concat(e.slice(5, 7));
                            if (!(0, MA.default)(r, "YYYY/MM/DD")) return !1;
                            for (var n = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), o = 0, i = 1, a = 0; a < 10; a++) o += n[a] * i, 10 === (i += 1) && (i = 1);
                            if (o % 11 == 10) {
                                for (var o = 0, i = 3, s = 0; s < 10; s++) o += n[s] * i, 10 === (i += 1) && (i = 1);
                                if (o % 11 == 10) return 0 === n[10]
                            }
                            return o % 11 === n[10]
                        },
                        "fi-FI": function(e) {
                            var t = e.slice(4, 6);
                            switch (e.slice(6, 7)) {
                                case "+":
                                    t = "18".concat(t);
                                    break;
                                case "-":
                                    t = "19".concat(t);
                                    break;
                                default:
                                    t = "20".concat(t)
                            }
                            var r = "".concat(t, "/").concat(e.slice(2, 4), "/").concat(e.slice(0, 2));
                            return !!(0, MA.default)(r, "YYYY/MM/DD") && ((r = parseInt(e.slice(0, 6) + e.slice(7, 10), 10) % 31) < 10 ? r === parseInt(e.slice(10), 10) : ["A", "B", "C", "D", "E", "F", "H", "J", "K", "L", "M", "N", "P", "R", "S", "T", "U", "V", "W", "X", "Y"][r -= 10] === e.slice(10))
                        },
                        "fr-BE": function(e) {
                            if ("00" !== e.slice(2, 4) || "00" !== e.slice(4, 6)) {
                                var t = "".concat(e.slice(0, 2), "/").concat(e.slice(2, 4), "/").concat(e.slice(4, 6));
                                if (!(0, MA.default)(t, "YY/MM/DD")) return !1
                            }
                            var t = 97 - parseInt(e.slice(0, 9), 10) % 97,
                                r = parseInt(e.slice(9, 11), 10);
                            return t === r || 97 - parseInt("2".concat(e.slice(0, 9)), 10) % 97 === r
                        },
                        "fr-FR": function(e) {
                            return e = e.replace(/\s/g, ""), parseInt(e.slice(0, 10), 10) % 511 === parseInt(e.slice(10, 13), 10)
                        },
                        "fr-LU": function(e) {
                            var t = "".concat(e.slice(0, 4), "/").concat(e.slice(4, 6), "/").concat(e.slice(6, 8));
                            return !!(0, MA.default)(t, "YYYY/MM/DD") && !!LA.luhnCheck(e.slice(0, 12)) && LA.verhoeffCheck("".concat(e.slice(0, 11)).concat(e[12]))
                        },
                        "hr-HR": function(e) {
                            return LA.iso7064Check(e)
                        },
                        "hu-HU": function(e) {
                            for (var t = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), r = 8, n = 1; n < 9; n++) r += t[n] * (n + 1);
                            return r % 11 === t[9]
                        },
                        "it-IT": function(e) {
                            var t = e.toUpperCase().split("");
                            if (!VA(t.slice(0, 3))) return !1;
                            if (!VA(t.slice(3, 6))) return !1;
                            for (var r = {
                                    L: "0",
                                    M: "1",
                                    N: "2",
                                    P: "3",
                                    Q: "4",
                                    R: "5",
                                    S: "6",
                                    T: "7",
                                    U: "8",
                                    V: "9"
                                }, n = 0, o = [6, 7, 9, 10, 12, 13, 14]; n < o.length; n++) {
                                var i = o[n];
                                t[i] in r && t.splice(i, 1, r[t[i]])
                            }
                            var e = {
                                    A: "01",
                                    B: "02",
                                    C: "03",
                                    D: "04",
                                    E: "05",
                                    H: "06",
                                    L: "07",
                                    M: "08",
                                    P: "09",
                                    R: "10",
                                    S: "11",
                                    T: "12"
                                }[t[8]],
                                a = parseInt(t[9] + t[10], 10),
                                e = (40 < a && (a -= 40), a < 10 && (a = "0".concat(a)), "".concat(t[6]).concat(t[7], "/").concat(e, "/").concat(a));
                            if (!(0, MA.default)(e, "YY/MM/DD")) return !1;
                            for (var s = 0, u = 1; u < t.length - 1; u += 2) {
                                var c = parseInt(t[u], 10);
                                s += c = isNaN(c) ? t[u].charCodeAt(0) - 65 : c
                            }
                            for (var l = {
                                    A: 1,
                                    B: 0,
                                    C: 5,
                                    D: 7,
                                    E: 9,
                                    F: 13,
                                    G: 15,
                                    H: 17,
                                    I: 19,
                                    J: 21,
                                    K: 2,
                                    L: 4,
                                    M: 18,
                                    N: 20,
                                    O: 11,
                                    P: 3,
                                    Q: 6,
                                    R: 8,
                                    S: 12,
                                    T: 14,
                                    U: 16,
                                    V: 10,
                                    W: 22,
                                    X: 25,
                                    Y: 24,
                                    Z: 23,
                                    0: 1,
                                    1: 0
                                }, d = 0; d < t.length - 1; d += 2) {
                                var f, p = 0;
                                t[d] in l ? p = l[t[d]] : (p = 2 * (f = parseInt(t[d], 10)) + 1, 4 < f && (p += 2)), s += p
                            }
                            return String.fromCharCode(65 + s % 26) === t[15]
                        },
                        "lv-LV": function(e) {
                            var t = (e = e.replace(/\W/, "")).slice(0, 2);
                            if ("32" === t) return !0;
                            if ("00" !== e.slice(2, 4)) {
                                var r = e.slice(4, 6);
                                switch (e[6]) {
                                    case "0":
                                        r = "18".concat(r);
                                        break;
                                    case "1":
                                        r = "19".concat(r);
                                        break;
                                    default:
                                        r = "20".concat(r)
                                }
                                t = "".concat(r, "/").concat(e.slice(2, 4), "/").concat(t);
                                if (!(0, MA.default)(t, "YYYY/MM/DD")) return !1
                            }
                            for (var n = 1101, o = [1, 6, 3, 7, 9, 10, 5, 8, 4, 2], i = 0; i < e.length - 1; i++) n -= parseInt(e[i], 10) * o[i];
                            return parseInt(e[10], 10) === n % 11
                        },
                        "mt-MT": function(e) {
                            if (9 !== e.length) {
                                for (var t = e.toUpperCase().split(""); t.length < 8;) t.unshift(0);
                                switch (e[7]) {
                                    case "A":
                                    case "P":
                                        if (0 === parseInt(t[6], 10)) return !1;
                                        break;
                                    default:
                                        var r = parseInt(t.join("").slice(0, 5), 10);
                                        if (32e3 < r) return !1;
                                        if (r === parseInt(t.join("").slice(5, 7), 10)) return !1
                                }
                            }
                            return !0
                        },
                        "nl-NL": function(e) {
                            return LA.reverseMultiplyAndSum(e.split("").slice(0, 8).map(function(e) {
                                return parseInt(e, 10)
                            }), 9) % 11 === parseInt(e[8], 10)
                        },
                        "pl-PL": function(e) {
                            if (10 === e.length) {
                                for (var t = [6, 5, 7, 2, 3, 4, 5, 6, 7], r = 0, n = 0; n < t.length; n++) r += parseInt(e[n], 10) * t[n];
                                return 10 != (r %= 11) && r === parseInt(e[9], 10)
                            }
                            var o = e.slice(0, 2),
                                i = parseInt(e.slice(2, 4), 10),
                                o = (80 < i ? (o = "18".concat(o), i -= 80) : 60 < i ? (o = "22".concat(o), i -= 60) : 40 < i ? (o = "21".concat(o), i -= 40) : 20 < i ? (o = "20".concat(o), i -= 20) : o = "19".concat(o), i < 10 && (i = "0".concat(i)), "".concat(o, "/").concat(i, "/").concat(e.slice(4, 6)));
                            if (!(0, MA.default)(o, "YYYY/MM/DD")) return !1;
                            for (var a = 0, s = 1, u = 0; u < e.length - 1; u++) a += parseInt(e[u], 10) * s % 10, 10 < (s += 2) ? s = 1 : 5 === s && (s += 2);
                            return (a = 10 - a % 10) === parseInt(e[10], 10)
                        },
                        "pt-BR": function(e) {
                            if (11 === e.length) {
                                var t = 0;
                                if ("11111111111" === e || "22222222222" === e || "33333333333" === e || "44444444444" === e || "55555555555" === e || "66666666666" === e || "77777777777" === e || "88888888888" === e || "99999999999" === e || "00000000000" === e) return !1;
                                for (var r = 1; r <= 9; r++) t += parseInt(e.substring(r - 1, r), 10) * (11 - r);
                                if ((a = 10 == (a = 10 * t % 11) ? 0 : a) !== parseInt(e.substring(9, 10), 10)) return !1;
                                t = 0;
                                for (var n = 1; n <= 10; n++) t += parseInt(e.substring(n - 1, n), 10) * (12 - n);
                                return (a = 10 == (a = 10 * t % 11) ? 0 : a) === parseInt(e.substring(10, 11), 10)
                            }
                            if ("00000000000000" === e || "11111111111111" === e || "22222222222222" === e || "33333333333333" === e || "44444444444444" === e || "55555555555555" === e || "66666666666666" === e || "77777777777777" === e || "88888888888888" === e || "99999999999999" === e) return !1;
                            for (var o = e.length - 2, i = e.substring(0, o), a = e.substring(o), s = 0, u = o - 7, c = o; 1 <= c; c--) s += i.charAt(o - c) * u, --u < 2 && (u = 9);
                            if ((s % 11 < 2 ? 0 : 11 - s % 11) !== parseInt(a.charAt(0), 10)) return !1;
                            for (var i = e.substring(0, o += 1), s = 0, u = o - 7, l = o; 1 <= l; l--) s += i.charAt(o - l) * u, --u < 2 && (u = 9);
                            return (s % 11 < 2 ? 0 : 11 - s % 11) === parseInt(a.charAt(1), 10)
                        },
                        "pt-PT": function(e) {
                            var t = 11 - LA.reverseMultiplyAndSum(e.split("").slice(0, 8).map(function(e) {
                                return parseInt(e, 10)
                            }), 9) % 11;
                            return 9 < t ? 0 === parseInt(e[8], 10) : t === parseInt(e[8], 10)
                        },
                        "ro-RO": function(e) {
                            if ("9000" === e.slice(0, 4)) return !0;
                            var t = e.slice(1, 3);
                            switch (e[0]) {
                                case "1":
                                case "2":
                                    t = "19".concat(t);
                                    break;
                                case "3":
                                case "4":
                                    t = "18".concat(t);
                                    break;
                                case "5":
                                case "6":
                                    t = "20".concat(t)
                            }
                            var r = "".concat(t, "/").concat(e.slice(3, 5), "/").concat(e.slice(5, 7));
                            if (8 === r.length) {
                                if (!(0, MA.default)(r, "YY/MM/DD")) return !1
                            } else if (!(0, MA.default)(r, "YYYY/MM/DD")) return !1;
                            for (var n = e.split("").map(function(e) {
                                    return parseInt(e, 10)
                                }), o = [2, 7, 9, 1, 4, 6, 3, 5, 8, 2, 7, 9], i = 0, a = 0; a < o.length; a++) i += n[a] * o[a];
                            return i % 11 == 10 ? 1 === n[12] : n[12] === i % 11
                        },
                        "sk-SK": function(e) {
                            if (9 === e.length) {
                                if ("000" === (e = e.replace(/\W/, "")).slice(6)) return !1;
                                if (53 < (t = parseInt(e.slice(0, 2), 10))) return !1;
                                var t = (t < 10 ? "190" : "19").concat(t),
                                    r = parseInt(e.slice(2, 4), 10),
                                    t = (50 < r && (r -= 50), r < 10 && (r = "0".concat(r)), "".concat(t, "/").concat(r, "/").concat(e.slice(4, 6)));
                                if (!(0, MA.default)(t, "YYYY/MM/DD")) return !1
                            }
                            return !0
                        },
                        "sl-SI": function(e) {
                            var t = 11 - LA.reverseMultiplyAndSum(e.split("").slice(0, 7).map(function(e) {
                                return parseInt(e, 10)
                            }), 8) % 11;
                            return 10 == t ? 0 === parseInt(e[7], 10) : t === parseInt(e[7], 10)
                        },
                        "sv-SE": function(e) {
                            var t = e.slice(0),
                                r = "",
                                n = (t = 11 < e.length ? t.slice(2) : t).slice(2, 4),
                                t = parseInt(t.slice(4, 6), 10);
                            if (11 < e.length) r = e.slice(0, 4);
                            else if (r = e.slice(0, 2), 11 === e.length && t < 60) {
                                var o = (new Date).getFullYear().toString(),
                                    i = parseInt(o.slice(0, 2), 10),
                                    o = parseInt(o, 10);
                                if ("-" === e[6]) r = (parseInt("".concat(i).concat(r), 10) > o ? "".concat(i - 1) : "".concat(i)).concat(r);
                                else if (r = "".concat(i - 1).concat(r), o - parseInt(r, 10) < 100) return !1
                            }
                            60 < t && (t -= 60), t < 10 && (t = "0".concat(t));
                            i = "".concat(r, "/").concat(n, "/").concat(t);
                            if (8 === i.length) {
                                if (!(0, MA.default)(i, "YY/MM/DD")) return !1
                            } else if (!(0, MA.default)(i, "YYYY/MM/DD")) return !1;
                            return LA.luhnCheck(e.replace(/\W/, ""))
                        }
                    })["lb-LU"] = UA["fr-LU"], UA["lt-LT"] = UA["et-EE"], UA["nl-BE"] = UA["fr-BE"], UA["fr-CA"] = UA["en-CA"], ($A = {
                        "de-AT": tx = /[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,
                        "de-DE": /[\/\\]/g,
                        "fr-BE": tx
                    })["nl-BE"] = $A["fr-BE"], ix.exports = ox.default, ix.exports.default = ox.default;
                    var YA, JA, XA, QA, ex, tx = {},
                        rx = (Object.defineProperty(tx, "__esModule", {
                            value: !0
                        }), tx.default = function(t, e, r) {
                            if ((0, rx.default)(t), !r || !r.strictMode || t.startsWith("+")) {
                                if (Array.isArray(e)) return e.some(function(e) {
                                    return !(!nx.hasOwnProperty(e) || !nx[e].test(t))
                                });
                                if (e in nx) return nx[e].test(t);
                                if (e && "any" !== e) throw new Error("Invalid locale '".concat(e, "'"));
                                for (var n in nx)
                                    if (nx.hasOwnProperty(n) && nx[n].test(t)) return !0
                            }
                            return !1
                        }, tx.locales = void 0, (ix = y.exports) && ix.__esModule ? ix : {
                            default: ix
                        }),
                        nx = {
                            "am-AM": /^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,
                            "ar-AE": /^((\+?971)|0)?5[024568]\d{7}$/,
                            "ar-BH": /^(\+?973)?(3|6)\d{7}$/,
                            "ar-DZ": /^(\+?213|0)(5|6|7)\d{8}$/,
                            "ar-LB": /^(\+?961)?((3|81)\d{6}|7\d{7})$/,
                            "ar-EG": /^((\+?20)|0)?1[0125]\d{8}$/,
                            "ar-IQ": /^(\+?964|0)?7[0-9]\d{8}$/,
                            "ar-JO": /^(\+?962|0)?7[789]\d{7}$/,
                            "ar-KW": /^(\+?965)([569]\d{7}|41\d{6})$/,
                            "ar-LY": /^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,
                            "ar-MA": /^(?:(?:\+|00)212|0)[5-7]\d{8}$/,
                            "ar-OM": /^((\+|00)968)?(9[1-9])\d{6}$/,
                            "ar-PS": /^(\+?970|0)5[6|9](\d{7})$/,
                            "ar-SA": /^(!?(\+?966)|0)?5\d{8}$/,
                            "ar-SY": /^(!?(\+?963)|0)?9\d{8}$/,
                            "ar-TN": /^(\+?216)?[2459]\d{7}$/,
                            "az-AZ": /^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,
                            "bs-BA": /^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,
                            "be-BY": /^(\+?375)?(24|25|29|33|44)\d{7}$/,
                            "bg-BG": /^(\+?359|0)?8[789]\d{7}$/,
                            "bn-BD": /^(\+?880|0)1[13456789][0-9]{8}$/,
                            "ca-AD": /^(\+376)?[346]\d{5}$/,
                            "cs-CZ": /^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,
                            "da-DK": /^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,
                            "de-DE": /^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,
                            "de-AT": /^(\+43|0)\d{1,4}\d{3,12}$/,
                            "de-CH": /^(\+41|0)([1-9])\d{1,9}$/,
                            "de-LU": /^(\+352)?((6\d1)\d{6})$/,
                            "dv-MV": /^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,
                            "el-GR": /^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,
                            "el-CY": /^(\+?357?)?(9(9|6)\d{6})$/,
                            "en-AI": /^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,
                            "en-AU": /^(\+?61|0)4\d{8}$/,
                            "en-AG": /^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,
                            "en-BM": /^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,
                            "en-BS": /^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,
                            "en-GB": /^(\+?44|0)7\d{9}$/,
                            "en-GG": /^(\+?44|0)1481\d{6}$/,
                            "en-GH": /^(\+233|0)(20|50|24|54|27|57|26|56|23|28|55|59)\d{7}$/,
                            "en-GY": /^(\+592|0)6\d{6}$/,
                            "en-HK": /^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,
                            "en-MO": /^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,
                            "en-IE": /^(\+?353|0)8[356789]\d{7}$/,
                            "en-IN": /^(\+?91|0)?[6789]\d{9}$/,
                            "en-JM": /^(\+?876)?\d{7}$/,
                            "en-KE": /^(\+?254|0)(7|1)\d{8}$/,
                            "en-SS": /^(\+?211|0)(9[1257])\d{7}$/,
                            "en-KI": /^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,
                            "en-KN": /^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,
                            "en-LS": /^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,
                            "en-MT": /^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,
                            "en-MU": /^(\+?230|0)?\d{8}$/,
                            "en-NA": /^(\+?264|0)(6|8)\d{7}$/,
                            "en-NG": /^(\+?234|0)?[789]\d{9}$/,
                            "en-NZ": /^(\+?64|0)[28]\d{7,9}$/,
                            "en-PG": /^(\+?675|0)?(7\d|8[18])\d{6}$/,
                            "en-PK": /^((00|\+)?92|0)3[0-6]\d{8}$/,
                            "en-PH": /^(09|\+639)\d{9}$/,
                            "en-RW": /^(\+?250|0)?[7]\d{8}$/,
                            "en-SG": /^(\+65)?[3689]\d{7}$/,
                            "en-SL": /^(\+?232|0)\d{8}$/,
                            "en-TZ": /^(\+?255|0)?[67]\d{8}$/,
                            "en-UG": /^(\+?256|0)?[7]\d{8}$/,
                            "en-US": /^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,
                            "en-ZA": /^(\+?27|0)\d{9}$/,
                            "en-ZM": /^(\+?26)?09[567]\d{7}$/,
                            "en-ZW": /^(\+263)[0-9]{9}$/,
                            "en-BW": /^(\+?267)?(7[1-8]{1})\d{6}$/,
                            "es-AR": /^\+?549(11|[2368]\d)\d{8}$/,
                            "es-BO": /^(\+?591)?(6|7)\d{7}$/,
                            "es-CO": /^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,
                            "es-CL": /^(\+?56|0)[2-9]\d{1}\d{7}$/,
                            "es-CR": /^(\+506)?[2-8]\d{7}$/,
                            "es-CU": /^(\+53|0053)?5\d{7}/,
                            "es-DO": /^(\+?1)?8[024]9\d{7}$/,
                            "es-HN": /^(\+?504)?[9|8|3|2]\d{7}$/,
                            "es-EC": /^(\+?593|0)([2-7]|9[2-9])\d{7}$/,
                            "es-ES": /^(\+?34)?[6|7]\d{8}$/,
                            "es-PE": /^(\+?51)?9\d{8}$/,
                            "es-MX": /^(\+?52)?(1|01)?\d{10,11}$/,
                            "es-NI": /^(\+?505)\d{7,8}$/,
                            "es-PA": /^(\+?507)\d{7,8}$/,
                            "es-PY": /^(\+?595|0)9[9876]\d{7}$/,
                            "es-SV": /^(\+?503)?[67]\d{7}$/,
                            "es-UY": /^(\+598|0)9[1-9][\d]{6}$/,
                            "es-VE": /^(\+?58)?(2|4)\d{9}$/,
                            "et-EE": /^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,
                            "fa-IR": /^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,
                            "fi-FI": /^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,
                            "fj-FJ": /^(\+?679)?\s?\d{3}\s?\d{4}$/,
                            "fo-FO": /^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,
                            "fr-BF": /^(\+226|0)[67]\d{7}$/,
                            "fr-BJ": /^(\+229)\d{8}$/,
                            "fr-CD": /^(\+?243|0)?(8|9)\d{8}$/,
                            "fr-CM": /^(\+?237)6[0-9]{8}$/,
                            "fr-FR": /^(\+?33|0)[67]\d{8}$/,
                            "fr-GF": /^(\+?594|0|00594)[67]\d{8}$/,
                            "fr-GP": /^(\+?590|0|00590)[67]\d{8}$/,
                            "fr-MQ": /^(\+?596|0|00596)[67]\d{8}$/,
                            "fr-PF": /^(\+?689)?8[789]\d{6}$/,
                            "fr-RE": /^(\+?262|0|00262)[67]\d{8}$/,
                            "he-IL": /^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,
                            "hu-HU": /^(\+?36|06)(20|30|31|50|70)\d{7}$/,
                            "id-ID": /^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,
                            "ir-IR": /^(\+98|0)?9\d{9}$/,
                            "it-IT": /^(\+?39)?\s?3\d{2} ?\d{6,7}$/,
                            "it-SM": /^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,
                            "ja-JP": /^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,
                            "ka-GE": /^(\+?995)?(79\d{7}|5\d{8})$/,
                            "kk-KZ": /^(\+?7|8)?7\d{9}$/,
                            "kl-GL": /^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,
                            "ko-KR": /^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,
                            "ky-KG": /^(\+?7\s?\+?7|0)\s?\d{2}\s?\d{3}\s?\d{4}$/,
                            "lt-LT": /^(\+370|8)\d{8}$/,
                            "lv-LV": /^(\+?371)2\d{7}$/,
                            "mg-MG": /^((\+?261|0)(2|3)\d)?\d{7}$/,
                            "mn-MN": /^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,
                            "my-MM": /^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,
                            "ms-MY": /^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,
                            "mz-MZ": /^(\+?258)?8[234567]\d{7}$/,
                            "nb-NO": /^(\+?47)?[49]\d{7}$/,
                            "ne-NP": /^(\+?977)?9[78]\d{8}$/,
                            "nl-BE": /^(\+?32|0)4\d{8}$/,
                            "nl-NL": /^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,
                            "nl-AW": /^(\+)?297(56|59|64|73|74|99)\d{5}$/,
                            "nn-NO": /^(\+?47)?[49]\d{7}$/,
                            "pl-PL": /^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,
                            "pt-BR": /^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,
                            "pt-PT": /^(\+?351)?9[1236]\d{7}$/,
                            "pt-AO": /^(\+244)\d{9}$/,
                            "ro-MD": /^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,
                            "ro-RO": /^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,
                            "ru-RU": /^(\+?7|8)?9\d{9}$/,
                            "si-LK": /^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,
                            "sl-SI": /^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,
                            "sk-SK": /^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,
                            "sq-AL": /^(\+355|0)6[789]\d{6}$/,
                            "sr-RS": /^(\+3816|06)[- \d]{5,9}$/,
                            "sv-SE": /^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,
                            "tg-TJ": /^(\+?992)?[5][5]\d{7}$/,
                            "th-TH": /^(\+66|66|0)\d{9}$/,
                            "tr-TR": /^(\+?90|0)?5\d{9}$/,
                            "tk-TM": /^(\+993|993|8)\d{8}$/,
                            "uk-UA": /^(\+?38|8)?0\d{9}$/,
                            "uz-UZ": /^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,
                            "vi-VN": /^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,
                            "zh-CN": /^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,
                            "zh-TW": /^(\+?886\-?|0)?9\d{8}$/,
                            "dz-BT": /^(\+?975|0)?(17|16|77|02)\d{6}$/,
                            "ar-YE": /^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,
                            "ar-EH": /^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,
                            "fa-AF": /^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/
                        },
                        ox = (nx["en-CA"] = nx["en-US"], nx["fr-CA"] = nx["en-CA"], nx["fr-BE"] = nx["nl-BE"], nx["zh-HK"] = nx["en-HK"], nx["zh-MO"] = nx["en-MO"], nx["ga-IE"] = nx["en-IE"], nx["fr-CH"] = nx["de-CH"], nx["it-CH"] = nx["fr-CH"], Object.keys(nx)),
                        ix = (tx.locales = ox, {
                            exports: {}
                        }),
                        ax = (T = (ox = ix).exports, Object.defineProperty(T, "__esModule", {
                            value: !0
                        }), T.default = function(e) {
                            return (0, YA.default)(e), JA.test(e)
                        }, YA = (ax = y.exports) && ax.__esModule ? ax : {
                            default: ax
                        }, JA = /^(0x)[0-9a-f]{40}$/i, ox.exports = T.default, ox.exports.default = T.default, {
                            exports: {}
                        });

                    function sx(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    T = (ox = ax).exports, Object.defineProperty(T, "__esModule", {
                        value: !0
                    }), T.default = function(e, t) {
                        return (0, QA.default)(e), t = t = (0, XA.default)(t, ex), r = "\\d{".concat(t.digits_after_decimal[0], "}"), t.digits_after_decimal.forEach(function(e, t) {
                            0 !== t && (r = "".concat(r, "|\\d{").concat(e, "}"))
                        }), n = "(".concat(t.symbol.replace(/\W/, function(e) {
                            return "\\".concat(e)
                        }), ")").concat(t.require_symbol ? "" : "?"), o = "[1-9]\\d{0,2}(\\".concat(t.thousands_separator, "\\d{3})*"), o = "(".concat(["0", "[1-9]\\d*", o].join("|"), ")?"), i = "(\\".concat(t.decimal_separator, "(").concat(r, "))").concat(t.require_decimal ? "" : "?"), o += t.allow_decimal || t.require_decimal ? i : "", t.allow_negatives && !t.parens_for_negatives && (t.negative_sign_after_digits ? o += "-?" : t.negative_sign_before_digits && (o = "-?" + o)), t.allow_negative_sign_placeholder ? o = "( (?!\\-))?".concat(o) : t.allow_space_after_symbol ? o = " ?".concat(o) : t.allow_space_after_digits && (o += "( (?!$))?"), t.symbol_after_digits ? o += n : o = n + o, t.allow_negatives && (t.parens_for_negatives ? o = "(\\(".concat(o, "\\)|").concat(o, ")") : t.negative_sign_before_digits || t.negative_sign_after_digits || (o = "-?" + o)), new RegExp("^(?!-? )(?=.*\\d)".concat(o, "$")).test(e);
                        var r, n, o, i
                    }, XA = sx(w.exports), QA = sx(y.exports), ex = {
                        symbol: "$",
                        require_symbol: !1,
                        allow_space_after_symbol: !1,
                        symbol_after_digits: !1,
                        allow_negatives: !0,
                        parens_for_negatives: !1,
                        negative_sign_before_digits: !1,
                        negative_sign_after_digits: !1,
                        allow_negative_sign_placeholder: !1,
                        thousands_separator: ",",
                        decimal_separator: ".",
                        allow_decimal: !0,
                        require_decimal: !1,
                        digits_after_decimal: [2],
                        allow_space_after_digits: !1
                    }, ox.exports = T.default, ox.exports.default = T.default;
                    var ux, cx, lx, dx, fx, px, hx, mx, gx, vx, bx, yx, _x, wx, Ax, xx, kx, Ex, ox = {
                            exports: {}
                        },
                        Sx = (Ox = (T = ox).exports, Object.defineProperty(Ox, "__esModule", {
                            value: !0
                        }), Ox.default = function(e) {
                            return (0, ux.default)(e), cx.test(e) || lx.test(e)
                        }, ux = (Sx = y.exports) && Sx.__esModule ? Sx : {
                            default: Sx
                        }, cx = /^(bc1)[a-z0-9]{25,39}$/, lx = /^(1|3)[A-HJ-NP-Za-km-z1-9]{25,39}$/, T.exports = Ox.default, T.exports.default = Ox.default, {
                            exports: {}
                        }),
                        Rx = (Ox = (T = Sx).exports, Object.defineProperty(Ox, "__esModule", {
                            value: !0
                        }), Ox.default = function(e) {
                            return (0, dx.default)(e), fx.has(e)
                        }, dx = (Rx = y.exports) && Rx.__esModule ? Rx : {
                            default: Rx
                        }, fx = new Set(["aa", "ab", "ae", "af", "ak", "am", "an", "ar", "as", "av", "ay", "az", "az", "ba", "be", "bg", "bh", "bi", "bm", "bn", "bo", "br", "bs", "ca", "ce", "ch", "co", "cr", "cs", "cu", "cv", "cy", "da", "de", "dv", "dz", "ee", "el", "en", "eo", "es", "et", "eu", "fa", "ff", "fi", "fj", "fo", "fr", "fy", "ga", "gd", "gl", "gn", "gu", "gv", "ha", "he", "hi", "ho", "hr", "ht", "hu", "hy", "hz", "ia", "id", "ie", "ig", "ii", "ik", "io", "is", "it", "iu", "ja", "jv", "ka", "kg", "ki", "kj", "kk", "kl", "km", "kn", "ko", "kr", "ks", "ku", "kv", "kw", "ky", "la", "lb", "lg", "li", "ln", "lo", "lt", "lu", "lv", "mg", "mh", "mi", "mk", "ml", "mn", "mr", "ms", "mt", "my", "na", "nb", "nd", "ne", "ng", "nl", "nn", "no", "nr", "nv", "ny", "oc", "oj", "om", "or", "os", "pa", "pi", "pl", "ps", "pt", "qu", "rm", "rn", "ro", "ru", "rw", "sa", "sc", "sd", "se", "sg", "si", "sk", "sl", "sm", "sn", "so", "sq", "sr", "ss", "st", "su", "sv", "sw", "ta", "te", "tg", "th", "ti", "tk", "tl", "tn", "to", "tr", "ts", "tt", "tw", "ty", "ug", "uk", "ur", "uz", "ve", "vi", "vo", "wa", "wo", "xh", "yi", "yo", "za", "zh", "zu"]), T.exports = Ox.default, T.exports.default = Ox.default, {
                            exports: {}
                        }),
                        Dx = (Ox = (T = Rx).exports, Object.defineProperty(Ox, "__esModule", {
                            value: !0
                        }), Ox.default = function(e) {
                            var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                                r = ((0, px.default)(e), (t.strictSeparator ? mx : hx).test(e));
                            return r && t.strict ? gx(e) : r
                        }, px = (Dx = y.exports) && Dx.__esModule ? Dx : {
                            default: Dx
                        }, hx = /^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/, mx = /^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/, gx = function(e) {
                            var t, r, n, o = e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);
                            return o ? (t = Number(o[1]), o = Number(o[2]), t % 4 == 0 && t % 100 != 0 || t % 400 == 0 ? o <= 366 : o <= 365) : (o = (t = e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number))[1], e = t[2], t = t[3], n = e && "0".concat(e).slice(-2), r = t && "0".concat(t).slice(-2), n = new Date("".concat(o, "-").concat(n || "01", "-").concat(r || "01")), !e || !t || n.getUTCFullYear() === o && n.getUTCMonth() + 1 === e && n.getUTCDate() === t)
                        }, T.exports = Ox.default, T.exports.default = Ox.default, {
                            exports: {}
                        }),
                        Tx = (Ox = (T = Dx).exports, Object.defineProperty(Ox, "__esModule", {
                            value: !0
                        }), Ox.default = function(e) {
                            return (0, vx.default)(e), bx.test(e)
                        }, vx = (e2 = y.exports) && e2.__esModule ? e2 : {
                            default: e2
                        }, e2 = /([01][0-9]|2[0-3])/, Lx = /[0-5][0-9]/, Tx = new RegExp("[-+]".concat(e2.source, ":").concat(Lx.source)), Tx = new RegExp("([zZ]|".concat(Tx.source, ")")), e2 = new RegExp("".concat(e2.source, ":").concat(Lx.source, ":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)), Lx = new RegExp("".concat(/[0-9]{4}/.source, "-").concat(/(0[1-9]|1[0-2])/.source, "-").concat(/([12]\d|0[1-9]|3[01])/.source)), e2 = new RegExp("".concat(e2.source).concat(Tx.source)), bx = new RegExp("^".concat(Lx.source, "[ tT]").concat(e2.source, "$")), T.exports = Ox.default, T.exports.default = Ox.default, {
                            exports: {}
                        }),
                        Ox = (e2 = (Lx = Tx).exports, Object.defineProperty(e2, "__esModule", {
                            value: !0
                        }), e2.default = function(e) {
                            return (0, yx.default)(e), _x.has(e.toUpperCase())
                        }, yx = (T = y.exports) && T.__esModule ? T : {
                            default: T
                        }, _x = new Set(["AFG", "ALA", "ALB", "DZA", "ASM", "AND", "AGO", "AIA", "ATA", "ATG", "ARG", "ARM", "ABW", "AUS", "AUT", "AZE", "BHS", "BHR", "BGD", "BRB", "BLR", "BEL", "BLZ", "BEN", "BMU", "BTN", "BOL", "BES", "BIH", "BWA", "BVT", "BRA", "IOT", "BRN", "BGR", "BFA", "BDI", "KHM", "CMR", "CAN", "CPV", "CYM", "CAF", "TCD", "CHL", "CHN", "CXR", "CCK", "COL", "COM", "COG", "COD", "COK", "CRI", "CIV", "HRV", "CUB", "CUW", "CYP", "CZE", "DNK", "DJI", "DMA", "DOM", "ECU", "EGY", "SLV", "GNQ", "ERI", "EST", "ETH", "FLK", "FRO", "FJI", "FIN", "FRA", "GUF", "PYF", "ATF", "GAB", "GMB", "GEO", "DEU", "GHA", "GIB", "GRC", "GRL", "GRD", "GLP", "GUM", "GTM", "GGY", "GIN", "GNB", "GUY", "HTI", "HMD", "VAT", "HND", "HKG", "HUN", "ISL", "IND", "IDN", "IRN", "IRQ", "IRL", "IMN", "ISR", "ITA", "JAM", "JPN", "JEY", "JOR", "KAZ", "KEN", "KIR", "PRK", "KOR", "KWT", "KGZ", "LAO", "LVA", "LBN", "LSO", "LBR", "LBY", "LIE", "LTU", "LUX", "MAC", "MKD", "MDG", "MWI", "MYS", "MDV", "MLI", "MLT", "MHL", "MTQ", "MRT", "MUS", "MYT", "MEX", "FSM", "MDA", "MCO", "MNG", "MNE", "MSR", "MAR", "MOZ", "MMR", "NAM", "NRU", "NPL", "NLD", "NCL", "NZL", "NIC", "NER", "NGA", "NIU", "NFK", "MNP", "NOR", "OMN", "PAK", "PLW", "PSE", "PAN", "PNG", "PRY", "PER", "PHL", "PCN", "POL", "PRT", "PRI", "QAT", "REU", "ROU", "RUS", "RWA", "BLM", "SHN", "KNA", "LCA", "MAF", "SPM", "VCT", "WSM", "SMR", "STP", "SAU", "SEN", "SRB", "SYC", "SLE", "SGP", "SXM", "SVK", "SVN", "SLB", "SOM", "ZAF", "SGS", "SSD", "ESP", "LKA", "SDN", "SUR", "SJM", "SWZ", "SWE", "CHE", "SYR", "TWN", "TJK", "TZA", "THA", "TLS", "TGO", "TKL", "TON", "TTO", "TUN", "TUR", "TKM", "TCA", "TUV", "UGA", "UKR", "ARE", "GBR", "USA", "UMI", "URY", "UZB", "VUT", "VEN", "VNM", "VGB", "VIR", "WLF", "ESH", "YEM", "ZMB", "ZWE"]), Lx.exports = e2.default, Lx.exports.default = e2.default, {}),
                        Ix = (Object.defineProperty(Ox, "__esModule", {
                            value: !0
                        }), Ox.default = function(e) {
                            return (0, Ix.default)(e), Cx.has(e.toUpperCase())
                        }, Ox.CurrencyCodes = void 0, (T = y.exports) && T.__esModule ? T : {
                            default: T
                        }),
                        Cx = new Set(["AED", "AFN", "ALL", "AMD", "ANG", "AOA", "ARS", "AUD", "AWG", "AZN", "BAM", "BBD", "BDT", "BGN", "BHD", "BIF", "BMD", "BND", "BOB", "BOV", "BRL", "BSD", "BTN", "BWP", "BYN", "BZD", "CAD", "CDF", "CHE", "CHF", "CHW", "CLF", "CLP", "CNY", "COP", "COU", "CRC", "CUC", "CUP", "CVE", "CZK", "DJF", "DKK", "DOP", "DZD", "EGP", "ERN", "ETB", "EUR", "FJD", "FKP", "GBP", "GEL", "GHS", "GIP", "GMD", "GNF", "GTQ", "GYD", "HKD", "HNL", "HRK", "HTG", "HUF", "IDR", "ILS", "INR", "IQD", "IRR", "ISK", "JMD", "JOD", "JPY", "KES", "KGS", "KHR", "KMF", "KPW", "KRW", "KWD", "KYD", "KZT", "LAK", "LBP", "LKR", "LRD", "LSL", "LYD", "MAD", "MDL", "MGA", "MKD", "MMK", "MNT", "MOP", "MRU", "MUR", "MVR", "MWK", "MXN", "MXV", "MYR", "MZN", "NAD", "NGN", "NIO", "NOK", "NPR", "NZD", "OMR", "PAB", "PEN", "PGK", "PHP", "PKR", "PLN", "PYG", "QAR", "RON", "RSD", "RUB", "RWF", "SAR", "SBD", "SCR", "SDG", "SEK", "SGD", "SHP", "SLL", "SOS", "SRD", "SSP", "STN", "SVC", "SYP", "SZL", "THB", "TJS", "TMT", "TND", "TOP", "TRY", "TTD", "TWD", "TZS", "UAH", "UGX", "USD", "USN", "UYI", "UYU", "UYW", "UZS", "VES", "VND", "VUV", "WST", "XAF", "XAG", "XAU", "XBA", "XBB", "XBC", "XBD", "XCD", "XDR", "XOF", "XPD", "XPF", "XPT", "XSU", "XTS", "XUA", "XXX", "YER", "ZAR", "ZMW", "ZWL"]),
                        Lx = (Ox.CurrencyCodes = Cx, {
                            exports: {}
                        });

                    function Mx(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    T = (e2 = Lx).exports, Object.defineProperty(T, "__esModule", {
                        value: !0
                    }), T.default = function(e, t) {
                        return (0, wx.default)(e), (t = (0, Ax.default)(t, Ex)).crockford ? kx.test(e) : !(e.length % 8 != 0 || !xx.test(e))
                    }, wx = Mx(y.exports), Ax = Mx(w.exports), xx = /^[A-Z2-7]+=*$/, Ex = {
                        crockford: !(kx = /^[A-HJKMNP-TV-Z0-9]+$/)
                    }, e2.exports = T.default, e2.exports.default = T.default;
                    var Px, jx, Ux, $x, Bx, Nx, Fx, Gx, zx, Hx, Zx, Kx, qx, Wx, Vx, Yx, Jx, Xx, Qx, e2 = {
                            exports: {}
                        },
                        t2 = (C = (T = e2).exports, Object.defineProperty(C, "__esModule", {
                            value: !0
                        }), C.default = function(e) {
                            return (0, Px.default)(e), !!jx.test(e)
                        }, Px = (t2 = y.exports) && t2.__esModule ? t2 : {
                            default: t2
                        }, jx = /^[A-HJ-NP-Za-km-z1-9]*$/, T.exports = C.default, T.exports.default = C.default, {
                            exports: {}
                        }),
                        r2 = (C = (T = t2).exports, Object.defineProperty(C, "__esModule", {
                            value: !0
                        }), C.default = function(e) {
                            (0, Ux.default)(e);
                            var t = e.split(",");
                            if (t.length < 2) return !1;
                            var r = t.shift().trim().split(";"),
                                e = r.shift();
                            if ("data:" !== e.slice(0, 5)) return !1;
                            e = e.slice(5);
                            if ("" !== e && !$x.test(e)) return !1;
                            for (var n = 0; n < r.length; n++)
                                if ((n !== r.length - 1 || "base64" !== r[n].toLowerCase()) && !Bx.test(r[n])) return !1;
                            for (var o = 0; o < t.length; o++)
                                if (!Nx.test(t[o])) return !1;
                            return !0
                        }, Ux = (r2 = y.exports) && r2.__esModule ? r2 : {
                            default: r2
                        }, $x = /^[a-z]+\/[a-z0-9\-\+\._]+$/i, Bx = /^[a-z\-]+=[a-z0-9\-]+$/i, Nx = /^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i, T.exports = C.default, T.exports.default = C.default, {
                            exports: {}
                        }),
                        n2 = (C = (T = r2).exports, Object.defineProperty(C, "__esModule", {
                            value: !0
                        }), C.default = function(e) {
                            return (0, Fx.default)(e), 0 === e.indexOf("magnet:?") && Gx.test(e)
                        }, Fx = (n2 = y.exports) && n2.__esModule ? n2 : {
                            default: n2
                        }, Gx = /(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i, T.exports = C.default, T.exports.default = C.default, {
                            exports: {}
                        }),
                        o2 = (C = (T = n2).exports, Object.defineProperty(C, "__esModule", {
                            value: !0
                        }), C.default = function(e) {
                            return (0, zx.default)(e), Hx.test(e) || Zx.test(e) || Kx.test(e)
                        }, zx = (o2 = y.exports) && o2.__esModule ? o2 : {
                            default: o2
                        }, Hx = /^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i, Zx = /^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i, Kx = /^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i, T.exports = C.default, T.exports.default = C.default, {
                            exports: {}
                        });

                    function i2(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    C = (T = o2).exports, Object.defineProperty(C, "__esModule", {
                        value: !0
                    }), C.default = function(e, t) {
                        return (0, qx.default)(e), t = (0, Wx.default)(t, Qx), !!e.includes(",") && !((e = e.split(","))[0].startsWith("(") && !e[1].endsWith(")") || e[1].endsWith(")") && !e[0].startsWith("(")) && (t.checkDMS ? Jx.test(e[0]) && Xx.test(e[1]) : Vx.test(e[0]) && Yx.test(e[1]))
                    }, qx = i2(y.exports), Wx = i2(w.exports), Vx = /^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/, Yx = /^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/, Jx = /^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i, Qx = {
                        checkDMS: !(Xx = /^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i)
                    }, T.exports = C.default, T.exports.default = C.default;
                    var a2, s2, u2, c2, T = {},
                        l2 = (Object.defineProperty(T, "__esModule", {
                            value: !0
                        }), T.default = function(e, t) {
                            if ((0, l2.default)(e), t in p2) return p2[t].test(e);
                            if ("any" !== t) throw new Error("Invalid locale '".concat(t, "'"));
                            for (var r in p2)
                                if (p2.hasOwnProperty(r) && p2[r].test(e)) return !0;
                            return !1
                        }, T.locales = void 0, (C = y.exports) && C.__esModule ? C : {
                            default: C
                        }),
                        C = /^\d{3}$/,
                        d2 = /^\d{4}$/,
                        L = /^\d{5}$/,
                        f2 = /^\d{6}$/,
                        p2 = {
                            AD: /^AD\d{3}$/,
                            AT: d2,
                            AU: d2,
                            AZ: /^AZ\d{4}$/,
                            BA: /^([7-8]\d{4}$)/,
                            BE: d2,
                            BG: d2,
                            BR: /^\d{5}-\d{3}$/,
                            BY: /^2[1-4]\d{4}$/,
                            CA: /^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,
                            CH: d2,
                            CN: /^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,
                            CZ: /^\d{3}\s?\d{2}$/,
                            DE: L,
                            DK: d2,
                            DO: L,
                            DZ: L,
                            EE: L,
                            ES: /^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,
                            FI: L,
                            FR: /^\d{2}\s?\d{3}$/,
                            GB: /^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,
                            GR: /^\d{3}\s?\d{2}$/,
                            HR: /^([1-5]\d{4}$)/,
                            HT: /^HT\d{4}$/,
                            HU: d2,
                            ID: L,
                            IE: /^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,
                            IL: /^(\d{5}|\d{7})$/,
                            IN: /^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,
                            IR: /^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,
                            IS: C,
                            IT: L,
                            JP: /^\d{3}\-\d{4}$/,
                            KE: L,
                            KR: /^(\d{5}|\d{6})$/,
                            LI: /^(948[5-9]|949[0-7])$/,
                            LT: /^LT\-\d{5}$/,
                            LU: d2,
                            LV: /^LV\-\d{4}$/,
                            LK: L,
                            MG: C,
                            MX: L,
                            MT: /^[A-Za-z]{3}\s{0,1}\d{4}$/,
                            MY: L,
                            NL: /^\d{4}\s?[a-z]{2}$/i,
                            NO: d2,
                            NP: /^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,
                            NZ: d2,
                            PL: /^\d{2}\-\d{3}$/,
                            PR: /^00[679]\d{2}([ -]\d{4})?$/,
                            PT: /^\d{4}\-\d{3}?$/,
                            RO: f2,
                            RU: f2,
                            SA: L,
                            SE: /^[1-9]\d{2}\s?\d{2}$/,
                            SG: f2,
                            SI: d2,
                            SK: /^\d{3}\s?\d{2}$/,
                            TH: L,
                            TN: d2,
                            TW: /^\d{3}(\d{2})?$/,
                            UA: L,
                            US: /^\d{5}(-\d{4})?$/,
                            ZA: d2,
                            ZM: L
                        },
                        C = Object.keys(p2),
                        f2 = (T.locales = C, {
                            exports: {}
                        }),
                        C = (L = (d2 = f2).exports, Object.defineProperty(L, "__esModule", {
                            value: !0
                        }), L.default = function(e, t) {
                            (0, a2.default)(e);
                            t = t ? new RegExp("^[".concat(t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"), "]+"), "g") : /^\s+/g;
                            return e.replace(t, "")
                        }, a2 = (C = y.exports) && C.__esModule ? C : {
                            default: C
                        }, d2.exports = L.default, d2.exports.default = L.default, {
                            exports: {}
                        }),
                        h2 = (L = (d2 = C).exports, Object.defineProperty(L, "__esModule", {
                            value: !0
                        }), L.default = function(e, t) {
                            if ((0, s2.default)(e), t) return t = new RegExp("[".concat(t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"), "]+$"), "g"), e.replace(t, "");
                            for (var r = e.length - 1;
                                /\s/.test(e.charAt(r));) --r;
                            return e.slice(0, r + 1)
                        }, s2 = (h2 = y.exports) && h2.__esModule ? h2 : {
                            default: h2
                        }, d2.exports = L.default, d2.exports.default = L.default, {
                            exports: {}
                        });

                    function m2(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    L = (d2 = h2).exports, Object.defineProperty(L, "__esModule", {
                        value: !0
                    }), L.default = function(e, t) {
                        return (0, u2.default)((0, c2.default)(e, t), t)
                    }, u2 = m2(C.exports), c2 = m2(f2.exports), d2.exports = L.default, d2.exports.default = L.default;
                    var g2, v2, b2, y2, _2, d2 = {
                            exports: {}
                        },
                        w2 = (M = (L = d2).exports, Object.defineProperty(M, "__esModule", {
                            value: !0
                        }), M.default = function(e) {
                            return (0, g2.default)(e), e.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#x27;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\//g, "&#x2F;").replace(/\\/g, "&#x5C;").replace(/`/g, "&#96;")
                        }, g2 = (w2 = y.exports) && w2.__esModule ? w2 : {
                            default: w2
                        }, L.exports = M.default, L.exports.default = M.default, {
                            exports: {}
                        }),
                        A2 = (M = (L = w2).exports, Object.defineProperty(M, "__esModule", {
                            value: !0
                        }), M.default = function(e) {
                            return (0, v2.default)(e), e.replace(/&quot;/g, '"').replace(/&#x27;/g, "'").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&#x2F;/g, "/").replace(/&#x5C;/g, "\\").replace(/&#96;/g, "`").replace(/&amp;/g, "&")
                        }, v2 = (A2 = y.exports) && A2.__esModule ? A2 : {
                            default: A2
                        }, L.exports = M.default, L.exports.default = M.default, {
                            exports: {}
                        }),
                        L = {
                            exports: {}
                        };

                    function x2(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    C2 = (M = L).exports, Object.defineProperty(C2, "__esModule", {
                        value: !0
                    }), C2.default = function(e, t) {
                        return (0, _2.default)(e), e.replace(new RegExp("[".concat(t, "]+"), "g"), "")
                    }, _2 = (nk = y.exports) && nk.__esModule ? nk : {
                        default: nk
                    }, M.exports = C2.default, M.exports.default = C2.default, M = (nk = A2).exports, Object.defineProperty(M, "__esModule", {
                        value: !0
                    }), M.default = function(e, t) {
                        return (0, b2.default)(e), (0, y2.default)(e, t ? "\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F" : "\\x00-\\x1F\\x7F")
                    }, b2 = x2(y.exports), y2 = x2(L.exports), nk.exports = M.default, nk.exports.default = M.default;
                    var k2, E2, S2, R2, D2, T2, O2, I2, C2 = {
                            exports: {}
                        },
                        L2 = (M = (nk = C2).exports, Object.defineProperty(M, "__esModule", {
                            value: !0
                        }), M.default = function(e, t) {
                            return (0, k2.default)(e), e.replace(new RegExp("[^".concat(t, "]+"), "g"), "")
                        }, k2 = (L2 = y.exports) && L2.__esModule ? L2 : {
                            default: L2
                        }, nk.exports = M.default, nk.exports.default = M.default, {
                            exports: {}
                        }),
                        M2 = (M = (nk = L2).exports, Object.defineProperty(M, "__esModule", {
                            value: !0
                        }), M.default = function(e, t) {
                            (0, E2.default)(e);
                            for (var r = e.length - 1; 0 <= r; r--)
                                if (-1 === t.indexOf(e[r])) return !1;
                            return !0
                        }, E2 = (M2 = y.exports) && M2.__esModule ? M2 : {
                            default: M2
                        }, nk.exports = M.default, nk.exports.default = M.default, {
                            exports: {}
                        });

                    function P2(e) {
                        return 1 < e.length ? e : ""
                    }
                    M = (nk = M2).exports, Object.defineProperty(M, "__esModule", {
                        value: !0
                    }), M.default = function(e, t) {
                        t = (0, S2.default)(t, R2);
                        var e = e.split("@"),
                            r = e.pop(),
                            e = [e.join("@"), r];
                        if (e[1] = e[1].toLowerCase(), "gmail.com" === e[1] || "googlemail.com" === e[1]) {
                            if (t.gmail_remove_subaddress && (e[0] = e[0].split("+")[0]), t.gmail_remove_dots && (e[0] = e[0].replace(/\.+/g, P2)), !e[0].length) return !1;
                            (t.all_lowercase || t.gmail_lowercase) && (e[0] = e[0].toLowerCase()), e[1] = t.gmail_convert_googlemaildotcom ? "gmail.com" : e[1]
                        } else if (0 <= D2.indexOf(e[1])) {
                            if (t.icloud_remove_subaddress && (e[0] = e[0].split("+")[0]), !e[0].length) return !1;
                            (t.all_lowercase || t.icloud_lowercase) && (e[0] = e[0].toLowerCase())
                        } else if (0 <= T2.indexOf(e[1])) {
                            if (t.outlookdotcom_remove_subaddress && (e[0] = e[0].split("+")[0]), !e[0].length) return !1;
                            (t.all_lowercase || t.outlookdotcom_lowercase) && (e[0] = e[0].toLowerCase())
                        } else if (0 <= O2.indexOf(e[1])) {
                            if (t.yahoo_remove_subaddress && (r = e[0].split("-"), e[0] = 1 < r.length ? r.slice(0, -1).join("-") : r[0]), !e[0].length) return !1;
                            (t.all_lowercase || t.yahoo_lowercase) && (e[0] = e[0].toLowerCase())
                        } else 0 <= I2.indexOf(e[1]) ? ((t.all_lowercase || t.yandex_lowercase) && (e[0] = e[0].toLowerCase()), e[1] = "yandex.ru") : t.all_lowercase && (e[0] = e[0].toLowerCase());
                        return e.join("@")
                    }, S2 = (q2 = w.exports) && q2.__esModule ? q2 : {
                        default: q2
                    }, R2 = {
                        all_lowercase: !0,
                        gmail_lowercase: !0,
                        gmail_remove_dots: !0,
                        gmail_remove_subaddress: !0,
                        gmail_convert_googlemaildotcom: !0,
                        outlookdotcom_lowercase: !0,
                        outlookdotcom_remove_subaddress: !0,
                        yahoo_lowercase: !0,
                        yahoo_remove_subaddress: !0,
                        yandex_lowercase: !0,
                        icloud_lowercase: !0,
                        icloud_remove_subaddress: !0
                    }, D2 = ["icloud.com", "me.com"], T2 = ["hotmail.at", "hotmail.be", "hotmail.ca", "hotmail.cl", "hotmail.co.il", "hotmail.co.nz", "hotmail.co.th", "hotmail.co.uk", "hotmail.com", "hotmail.com.ar", "hotmail.com.au", "hotmail.com.br", "hotmail.com.gr", "hotmail.com.mx", "hotmail.com.pe", "hotmail.com.tr", "hotmail.com.vn", "hotmail.cz", "hotmail.de", "hotmail.dk", "hotmail.es", "hotmail.fr", "hotmail.hu", "hotmail.id", "hotmail.ie", "hotmail.in", "hotmail.it", "hotmail.jp", "hotmail.kr", "hotmail.lv", "hotmail.my", "hotmail.ph", "hotmail.pt", "hotmail.sa", "hotmail.sg", "hotmail.sk", "live.be", "live.co.uk", "live.com", "live.com.ar", "live.com.mx", "live.de", "live.es", "live.eu", "live.fr", "live.it", "live.nl", "msn.com", "outlook.at", "outlook.be", "outlook.cl", "outlook.co.il", "outlook.co.nz", "outlook.co.th", "outlook.com", "outlook.com.ar", "outlook.com.au", "outlook.com.br", "outlook.com.gr", "outlook.com.pe", "outlook.com.tr", "outlook.com.vn", "outlook.cz", "outlook.de", "outlook.dk", "outlook.es", "outlook.fr", "outlook.hu", "outlook.id", "outlook.ie", "outlook.in", "outlook.it", "outlook.jp", "outlook.kr", "outlook.lv", "outlook.my", "outlook.ph", "outlook.pt", "outlook.sa", "outlook.sg", "outlook.sk", "passport.com"], O2 = ["rocketmail.com", "yahoo.ca", "yahoo.co.uk", "yahoo.com", "yahoo.de", "yahoo.fr", "yahoo.in", "yahoo.it", "ymail.com"], I2 = ["yandex.ru", "yandex.ua", "yandex.kz", "yandex.com", "yandex.by", "ya.ru"], nk.exports = M.default, nk.exports.default = M.default;
                    var j2, U2, $2, B2, N2, F2, G2, z2, H2, Z2, K2, q2 = {
                            exports: {}
                        },
                        W2 = (M = (nk = q2).exports, Object.defineProperty(M, "__esModule", {
                            value: !0
                        }), M.default = function(e) {
                            return (0, j2.default)(e), U2.test(e)
                        }, j2 = (W2 = y.exports) && W2.__esModule ? W2 : {
                            default: W2
                        }, U2 = /^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/, nk.exports = M.default, nk.exports.default = M.default, {
                            exports: {}
                        }),
                        V2 = (M = (nk = W2).exports, Object.defineProperty(M, "__esModule", {
                            value: !0
                        }), M.default = function(e, t) {
                            if ((0, $2.default)(e), t in B2) return B2[t](e);
                            if ("any" !== t) throw new Error("Invalid locale '".concat(t, "'"));
                            for (var r in B2)
                                if ((0, B2[r])(e)) return !0;
                            return !1
                        }, $2 = (V2 = y.exports) && V2.__esModule ? V2 : {
                            default: V2
                        }, B2 = {
                            "cs-CZ": function(e) {
                                return /^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(e)
                            },
                            "de-DE": function(e) {
                                return /^((A|AA|AB|AC|AE|AH|AK|AM|AN|A|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|B|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|F|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|G|GP|GR|GS|GT|G|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|L|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|M|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|N|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|T|B|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|W|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BD|BUL|BR|BS|BZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FL|FOR|FRG|FRI|FRW|FTL|FS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HM|HOG|HOH|HOL|HOM|HOR|HS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JL|KEH|KEL|KEM|KIB|KLE|KLZ|KN|KT|KZ|KRU|KN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LB|LOS|LRO|LSZ|LN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MB|MR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|HR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PL|PR|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RD|RG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SL|SLZ|SM|SOB|SOG|SOK|SM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SW|SWA|SZB|TBB|TDO|TET|TIR|TL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(e)
                            },
                            "de-LI": function(e) {
                                return /^FL[- ]?\d{1,5}[UZ]?$/.test(e)
                            },
                            "en-IN": function(e) {
                                return /^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(e)
                            },
                            "es-AR": function(e) {
                                return /^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(e)
                            },
                            "fi-FI": function(e) {
                                return /^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(e)
                            },
                            "hu-HU": function(e) {
                                return /^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(e)
                            },
                            "pt-BR": function(e) {
                                return /^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(e)
                            },
                            "pt-PT": function(e) {
                                return /^([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})[ -]?([A-Z]{2}|[0-9]{2})$/.test(e)
                            },
                            "sq-AL": function(e) {
                                return /^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(e)
                            },
                            "sv-SE": function(e) {
                                return /^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-Z ]{2,7}$)/.test(e.trim())
                            }
                        }, nk.exports = M.default, nk.exports.default = M.default, {
                            exports: {}
                        });

                    function Y2(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    M = (nk = V2).exports, Object.defineProperty(M, "__esModule", {
                        value: !0
                    }), M.default = function(e) {
                        var t, r, n, o, i = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null,
                            e = ((0, F2.default)(e), e = e, t = {}, Array.from(e).forEach(function(e) {
                                t[e] ? t[e] += 1 : t[e] = 1
                            }), r = t, n = {
                                length: e.length,
                                uniqueChars: Object.keys(r).length,
                                uppercaseCount: 0,
                                lowercaseCount: 0,
                                numberCount: 0,
                                symbolCount: 0
                            }, Object.keys(r).forEach(function(e) {
                                G2.test(e) ? n.uppercaseCount += r[e] : z2.test(e) ? n.lowercaseCount += r[e] : H2.test(e) ? n.numberCount += r[e] : Z2.test(e) && (n.symbolCount += r[e])
                            }), n);
                        return (i = (0, N2.default)(i || {}, K2)).returnScore ? (o = 0, o = (o += e.uniqueChars * i.pointsPerUnique) + (e.length - e.uniqueChars) * i.pointsPerRepeat, 0 < e.lowercaseCount && (o += i.pointsForContainingLower), 0 < e.uppercaseCount && (o += i.pointsForContainingUpper), 0 < e.numberCount && (o += i.pointsForContainingNumber), 0 < e.symbolCount && (o += i.pointsForContainingSymbol), o) : e.length >= i.minLength && e.lowercaseCount >= i.minLowercase && e.uppercaseCount >= i.minUppercase && e.numberCount >= i.minNumbers && e.symbolCount >= i.minSymbols
                    }, N2 = Y2(w.exports), F2 = Y2(y.exports), G2 = /^[A-Z]$/, z2 = /^[a-z]$/, H2 = /^[0-9]$/, K2 = {
                        minLength: 8,
                        minLowercase: 1,
                        minUppercase: 1,
                        minNumbers: 1,
                        minSymbols: 1,
                        returnScore: !(Z2 = /^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/ ]$/),
                        pointsPerUnique: 1,
                        pointsPerRepeat: .5,
                        pointsForContainingLower: 10,
                        pointsForContainingUpper: 10,
                        pointsForContainingNumber: 10,
                        pointsForContainingSymbol: 10
                    }, nk.exports = M.default, nk.exports.default = M.default;
                    w = {};

                    function J2(e) {
                        return (J2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    Object.defineProperty(w, "__esModule", {
                        value: !0
                    }), w.default = function(e, t) {
                        if ((0, X2.default)(e), (0, X2.default)(t), t in tk) return tk[t](e);
                        throw new Error("Invalid country code: '".concat(t, "'"))
                    }, w.vatMatchers = void 0;
                    var X2 = (nk = y.exports) && nk.__esModule ? nk : {
                            default: nk
                        },
                        Q2 = function(e) {
                            if (e && e.__esModule) return e;
                            if (null === e || "object" !== J2(e) && "function" != typeof e) return {
                                default: e
                            };
                            var t = ek();
                            if (t && t.has(e)) return t.get(e);
                            var r, n, o = {},
                                i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                            for (r in e) Object.prototype.hasOwnProperty.call(e, r) && ((n = i ? Object.getOwnPropertyDescriptor(e, r) : null) && (n.get || n.set) ? Object.defineProperty(o, r, n) : o[r] = e[r]);
                            return o.default = e, t && t.set(e, o), o
                        }(HA);

                    function ek() {
                        var e;
                        return "function" != typeof WeakMap ? null : (e = new WeakMap, ek = function() {
                            return e
                        }, e)
                    }
                    var tk = {
                            AT: function(e) {
                                return /^(AT)?U\d{8}$/.test(e)
                            },
                            BE: function(e) {
                                return /^(BE)?\d{10}$/.test(e)
                            },
                            BG: function(e) {
                                return /^(BG)?\d{9,10}$/.test(e)
                            },
                            HR: function(e) {
                                return /^(HR)?\d{11}$/.test(e)
                            },
                            CY: function(e) {
                                return /^(CY)?\w{9}$/.test(e)
                            },
                            CZ: function(e) {
                                return /^(CZ)?\d{8,10}$/.test(e)
                            },
                            DK: function(e) {
                                return /^(DK)?\d{8}$/.test(e)
                            },
                            EE: function(e) {
                                return /^(EE)?\d{9}$/.test(e)
                            },
                            FI: function(e) {
                                return /^(FI)?\d{8}$/.test(e)
                            },
                            FR: function(e) {
                                return /^(FR)?\w{2}\d{9}$/.test(e)
                            },
                            DE: function(e) {
                                return /^(DE)?\d{9}$/.test(e)
                            },
                            EL: function(e) {
                                return /^(EL)?\d{9}$/.test(e)
                            },
                            HU: function(e) {
                                return /^(HU)?\d{8}$/.test(e)
                            },
                            IE: function(e) {
                                return /^(IE)?\d{7}\w{1}(W)?$/.test(e)
                            },
                            IT: function(e) {
                                return /^(IT)?\d{11}$/.test(e)
                            },
                            LV: function(e) {
                                return /^(LV)?\d{11}$/.test(e)
                            },
                            LT: function(e) {
                                return /^(LT)?\d{9,12}$/.test(e)
                            },
                            LU: function(e) {
                                return /^(LU)?\d{8}$/.test(e)
                            },
                            MT: function(e) {
                                return /^(MT)?\d{8}$/.test(e)
                            },
                            NL: function(e) {
                                return /^(NL)?\d{9}B\d{2}$/.test(e)
                            },
                            PL: function(e) {
                                return /^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(e)
                            },
                            PT: function(e) {
                                var t, e = e.match(/^(PT)?(\d{9})$/);
                                return !!e && (e = e[2], 9 < (t = 11 - Q2.reverseMultiplyAndSum(e.split("").slice(0, 8).map(function(e) {
                                    return parseInt(e, 10)
                                }), 9) % 11) ? 0 === parseInt(e[8], 10) : t === parseInt(e[8], 10))
                            },
                            RO: function(e) {
                                return /^(RO)?\d{2,10}$/.test(e)
                            },
                            SK: function(e) {
                                return /^(SK)?\d{10}$/.test(e)
                            },
                            SI: function(e) {
                                return /^(SI)?\d{8}$/.test(e)
                            },
                            ES: function(e) {
                                return /^(ES)?\w\d{7}[A-Z]$/.test(e)
                            },
                            SE: function(e) {
                                return /^(SE)?\d{12}$/.test(e)
                            },
                            AL: function(e) {
                                return /^(AL)?\w{9}[A-Z]$/.test(e)
                            },
                            MK: function(e) {
                                return /^(MK)?\d{13}$/.test(e)
                            },
                            AU: function(e) {
                                return /^(AU)?\d{11}$/.test(e)
                            },
                            BY: function(e) {
                                return /^( )?\d{9}$/.test(e)
                            },
                            CA: function(e) {
                                return /^(CA)?\d{9}$/.test(e)
                            },
                            IS: function(e) {
                                return /^(IS)?\d{5,6}$/.test(e)
                            },
                            IN: function(e) {
                                return /^(IN)?\d{15}$/.test(e)
                            },
                            ID: function(e) {
                                return /^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(e)
                            },
                            IL: function(e) {
                                return /^(IL)?\d{9}$/.test(e)
                            },
                            KZ: function(e) {
                                return /^(KZ)?\d{9}$/.test(e)
                            },
                            NZ: function(e) {
                                return /^(NZ)?\d{9}$/.test(e)
                            },
                            NG: function(e) {
                                return /^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(e)
                            },
                            NO: function(e) {
                                return /^(NO)?\d{9}MVA$/.test(e)
                            },
                            PH: function(e) {
                                return /^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(e)
                            },
                            RU: function(e) {
                                return /^(RU)?(\d{10}|\d{12})$/.test(e)
                            },
                            SM: function(e) {
                                return /^(SM)?\d{5}$/.test(e)
                            },
                            SA: function(e) {
                                return /^(SA)?\d{15}$/.test(e)
                            },
                            RS: function(e) {
                                return /^(RS)?\d{9}$/.test(e)
                            },
                            CH: function(e) {
                                return /^(CH)?(\d{6}|\d{9}|(\d{3}.\d{3})|(\d{3}.\d{3}.\d{3}))(TVA|MWST|IVA)$/.test(e)
                            },
                            TR: function(e) {
                                return /^(TR)?\d{10}$/.test(e)
                            },
                            UA: function(e) {
                                return /^(UA)?\d{12}$/.test(e)
                            },
                            GB: function(e) {
                                return /^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(e)
                            },
                            UZ: function(e) {
                                return /^(UZ)?\d{9}$/.test(e)
                            },
                            AR: function(e) {
                                return /^(AR)?\d{11}$/.test(e)
                            },
                            BO: function(e) {
                                return /^(BO)?\d{7}$/.test(e)
                            },
                            BR: function(e) {
                                return /^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(e)
                            },
                            CL: function(e) {
                                return /^(CL)?\d{8}-\d{1}$/.test(e)
                            },
                            CO: function(e) {
                                return /^(CO)?\d{10}$/.test(e)
                            },
                            CR: function(e) {
                                return /^(CR)?\d{9,12}$/.test(e)
                            },
                            EC: function(e) {
                                return /^(EC)?\d{13}$/.test(e)
                            },
                            SV: function(e) {
                                return /^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(e)
                            },
                            GT: function(e) {
                                return /^(GT)?\d{7}-\d{1}$/.test(e)
                            },
                            HN: function(e) {
                                return /^(HN)?$/.test(e)
                            },
                            MX: function(e) {
                                return /^(MX)?\w{3,4}\d{6}\w{3}$/.test(e)
                            },
                            NI: function(e) {
                                return /^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(e)
                            },
                            PA: function(e) {
                                return /^(PA)?$/.test(e)
                            },
                            PY: function(e) {
                                return /^(PY)?\d{6,8}-\d{1}$/.test(e)
                            },
                            PE: function(e) {
                                return /^(PE)?\d{11}$/.test(e)
                            },
                            DO: function(e) {
                                return /^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(e)
                            },
                            UY: function(e) {
                                return /^(UY)?\d{12}$/.test(e)
                            },
                            VE: function(e) {
                                return /^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(e)
                            }
                        },
                        M = (w.vatMatchers = tk, Xa),
                        y = Xa.exports;

                    function rk(e) {
                        return (rk = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        })(e)
                    }
                    Object.defineProperty(y, "__esModule", {
                        value: !0
                    }), y.default = void 0;
                    var nk = P(bl.exports),
                        HA = P(ml.exports),
                        bl = P(Po.exports),
                        ml = P(hl.exports),
                        hl = P(Yc.exports),
                        Yc = P(zn.exports),
                        zn = P(rl.exports),
                        rl = P(ca.exports),
                        ca = P(Ro.exports),
                        Ro = P(Si.exports),
                        Si = P(po.exports),
                        po = P(a.exports),
                        a = P(i.exports),
                        i = P(E.exports),
                        E = P(Zu.exports),
                        Zu = P(v.exports),
                        v = P(_.exports),
                        _ = ik(S),
                        S = ik(k),
                        k = P(tl.exports),
                        tl = P(R.exports),
                        R = P(A.exports),
                        A = P(m.exports),
                        m = P(l_.exports),
                        l_ = P(d_.exports),
                        d_ = P(f_.exports),
                        f_ = P(p_),
                        p_ = P(b),
                        b = P(b_.exports),
                        b_ = P(y_.exports),
                        y_ = P(__.exports),
                        __ = P(w_.exports),
                        w_ = P(x.exports),
                        x = ik(ia),
                        ia = P(I_.exports),
                        I_ = P(C_.exports),
                        C_ = P(L_.exports),
                        L_ = P(F_.exports),
                        F_ = P(t.exports),
                        t = P(mw.exports),
                        mw = P(gw.exports),
                        gw = P(vw.exports),
                        vw = ik(bw),
                        bw = P(D.exports),
                        D = P(kw.exports),
                        kw = P(Ew.exports),
                        Ew = P(Sw.exports),
                        Sw = P(Lw.exports),
                        Lw = P(Bw.exports),
                        Bw = P(Gw.exports),
                        Gw = P(aa.exports),
                        aa = P(Ww.exports),
                        Ww = P(Vw.exports),
                        Vw = P(eA.exports),
                        eA = P(tA.exports),
                        tA = P(iA.exports),
                        iA = P(js.exports),
                        js = P(pA.exports),
                        pA = P(bA.exports),
                        bA = P(BA.exports),
                        BA = P(NA.exports),
                        NA = P(FA.exports),
                        FA = P(GA.exports),
                        GA = P(zA.exports),
                        zA = ik(tx),
                        tx = P(ix.exports),
                        ix = P(ax.exports),
                        ax = P(ox.exports),
                        ox = P(Sx.exports),
                        Sx = P(Rx.exports),
                        Rx = P(Dx.exports),
                        Dx = P(ww),
                        ww = P(Tx.exports),
                        Tx = P(Ox),
                        Ox = P(Lx.exports),
                        Lx = P(e2.exports),
                        e2 = P(Rw.exports),
                        Rw = P(t2.exports),
                        t2 = P(r2.exports),
                        r2 = P(n2.exports),
                        n2 = P(o2.exports),
                        o2 = ik(T),
                        T = P(f2.exports),
                        f2 = P(C.exports),
                        C = P(h2.exports),
                        h2 = P(d2.exports),
                        d2 = P(w2.exports),
                        w2 = P(A2.exports),
                        A2 = P(C2.exports),
                        C2 = P(L.exports),
                        L = P(L2.exports),
                        L2 = P(M2.exports),
                        M2 = P(q2.exports),
                        q2 = P(W2.exports),
                        W2 = P(V2.exports),
                        V2 = P(w);

                    function ok() {
                        var e;
                        return "function" != typeof WeakMap ? null : (e = new WeakMap, ok = function() {
                            return e
                        }, e)
                    }

                    function ik(e) {
                        if (e && e.__esModule) return e;
                        if (null === e || "object" !== rk(e) && "function" != typeof e) return {
                            default: e
                        };
                        var t = ok();
                        if (t && t.has(e)) return t.get(e);
                        var r, n, o = {},
                            i = Object.defineProperty && Object.getOwnPropertyDescriptor;
                        for (r in e) Object.prototype.hasOwnProperty.call(e, r) && ((n = i ? Object.getOwnPropertyDescriptor(e, r) : null) && (n.get || n.set) ? Object.defineProperty(o, r, n) : o[r] = e[r]);
                        return o.default = e, t && t.set(e, o), o
                    }

                    function P(e) {
                        return e && e.__esModule ? e : {
                            default: e
                        }
                    }
                    nk = {
                        version: "13.9.0",
                        toDate: nk.default,
                        toFloat: HA.default,
                        toInt: bl.default,
                        toBoolean: ml.default,
                        equals: hl.default,
                        contains: Yc.default,
                        matches: zn.default,
                        isEmail: rl.default,
                        isURL: ca.default,
                        isMACAddress: Ro.default,
                        isIP: Si.default,
                        isIPRange: po.default,
                        isFQDN: a.default,
                        isBoolean: Zu.default,
                        isIBAN: vw.default,
                        isBIC: bw.default,
                        isAlpha: _.default,
                        isAlphaLocales: _.locales,
                        isAlphanumeric: S.default,
                        isAlphanumericLocales: S.locales,
                        isNumeric: k.default,
                        isPassportNumber: tl.default,
                        isPort: R.default,
                        isLowercase: A.default,
                        isUppercase: m.default,
                        isAscii: d_.default,
                        isFullWidth: f_.default,
                        isHalfWidth: p_.default,
                        isVariableWidth: b.default,
                        isMultibyte: b_.default,
                        isSemVer: y_.default,
                        isSurrogatePair: __.default,
                        isInt: w_.default,
                        isIMEI: l_.default,
                        isFloat: x.default,
                        isFloatLocales: x.locales,
                        isDecimal: ia.default,
                        isHexadecimal: I_.default,
                        isOctal: C_.default,
                        isDivisibleBy: L_.default,
                        isHexColor: F_.default,
                        isRgbColor: t.default,
                        isHSL: mw.default,
                        isISRC: gw.default,
                        isMD5: D.default,
                        isHash: kw.default,
                        isJWT: Ew.default,
                        isJSON: Sw.default,
                        isEmpty: Lw.default,
                        isLength: Bw.default,
                        isLocale: v.default,
                        isByteLength: Gw.default,
                        isUUID: aa.default,
                        isMongoId: Ww.default,
                        isAfter: Vw.default,
                        isBefore: eA.default,
                        isIn: tA.default,
                        isLuhnNumber: iA.default,
                        isCreditCard: js.default,
                        isIdentityCard: pA.default,
                        isEAN: bA.default,
                        isISIN: BA.default,
                        isISBN: NA.default,
                        isISSN: FA.default,
                        isMobilePhone: zA.default,
                        isMobilePhoneLocales: zA.locales,
                        isPostalCode: o2.default,
                        isPostalCodeLocales: o2.locales,
                        isEthereumAddress: tx.default,
                        isCurrency: ix.default,
                        isBtcAddress: ax.default,
                        isISO6391: ox.default,
                        isISO8601: Sx.default,
                        isRFC3339: Rx.default,
                        isISO31661Alpha2: Dx.default,
                        isISO31661Alpha3: ww.default,
                        isISO4217: Tx.default,
                        isBase32: Ox.default,
                        isBase58: Lx.default,
                        isBase64: e2.default,
                        isDataURI: Rw.default,
                        isMagnetURI: t2.default,
                        isMimeType: r2.default,
                        isLatLong: n2.default,
                        ltrim: T.default,
                        rtrim: f2.default,
                        trim: C.default,
                        escape: h2.default,
                        unescape: d2.default,
                        stripLow: w2.default,
                        whitelist: A2.default,
                        blacklist: C2.default,
                        isWhitelisted: L.default,
                        normalizeEmail: L2.default,
                        toString: toString,
                        isSlug: M2.default,
                        isStrongPassword: W2.default,
                        isTaxID: GA.default,
                        isDate: i.default,
                        isTime: E.default,
                        isLicensePlate: q2.default,
                        isVAT: V2.default,
                        ibanLocales: vw.locales
                    }, y.default = nk, M.exports = y.default, M.exports.default = y.default;
                    var ak = function e(t) {
                        return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t
                    }(Xa.exports);
                    const sk = 2147483647,
                        uk = 36,
                        ck = /^xn--/,
                        lk = /[^\0-\x7F]/,
                        dk = /[\x2E\u3002\uFF0E\uFF61]/g,
                        fk = {
                            overflow: "Overflow: input needs wider integers to process",
                            "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                            "invalid-input": "Invalid input"
                        },
                        pk = Math.floor,
                        hk = String.fromCharCode;

                    function mk(e) {
                        throw new RangeError(fk[e])
                    }

                    function gk(e, t) {
                        var r = e.split("@");
                        let n = "";
                        1 < r.length && (n = r[0] + "@", e = r[1]);
                        r = function(e, t) {
                            var r = [];
                            let n = e.length;
                            for (; n--;) r[n] = t(e[n]);
                            return r
                        }((e = e.replace(dk, ".")).split("."), t).join(".");
                        return n + r
                    }

                    function vk(e) {
                        var t = [];
                        let r = 0;
                        const n = e.length;
                        for (; r < n;) {
                            var o = e.charCodeAt(r++);
                            if (55296 <= o && o <= 56319 && r < n) {
                                const n = e.charCodeAt(r++);
                                56320 == (64512 & n) ? t.push(((1023 & o) << 10) + (1023 & n) + 65536) : (t.push(o), r--)
                            } else t.push(o)
                        }
                        return t
                    }

                    function bk(e, t) {
                        return e + 22 + 75 * (e < 26) - ((0 != t) << 5)
                    }

                    function yk(e, t, r) {
                        let n = 0;
                        for (e = r ? pk(e / 700) : e >> 1, e += pk(e / t); 455 < e; n += uk) e = pk(e / 35);
                        return pk(n + 36 * e / (e + 38))
                    }

                    function _k(n) {
                        var t = [],
                            o = n.length;
                        let i = 0,
                            e = 128,
                            a = 72,
                            s = n.lastIndexOf("-");
                        s < 0 && (s = 0);
                        for (let e = 0; e < s; ++e) 128 <= n.charCodeAt(e) && mk("not-basic"), t.push(n.charCodeAt(e));
                        for (let r = 0 < s ? s + 1 : 0; r < o;) {
                            const s = i;
                            for (let e = 1, t = uk;; t += uk) {
                                r >= o && mk("invalid-input");
                                const s = 48 <= (u = n.charCodeAt(r++)) && u < 58 ? u - 48 + 26 : 65 <= u && u < 91 ? u - 65 : 97 <= u && u < 123 ? u - 97 : uk;
                                s >= uk && mk("invalid-input"), s > pk((sk - i) / e) && mk("overflow"), i += s * e;
                                var u = t <= a ? 1 : t >= a + 26 ? 26 : t - a;
                                if (s < u) break;
                                u = uk - u;
                                e > pk(sk / u) && mk("overflow"), e *= u
                            }
                            var c = t.length + 1;
                            a = yk(i - s, c, 0 == s), pk(i / c) > sk - e && mk("overflow"), e += pk(i / c), i %= c, t.splice(i++, 0, e)
                        }
                        return String.fromCodePoint(...t)
                    }

                    function wk(t) {
                        const r = [],
                            n = (t = vk(t)).length;
                        let o = 128,
                            i = 0,
                            a = 72;
                        for (const n of t) n < 128 && r.push(hk(n));
                        const s = r.length;
                        let u = s;
                        for (s && r.push("-"); u < n;) {
                            let e = sk;
                            for (const r of t) r >= o && r < e && (e = r);
                            var c = u + 1;
                            e - o > pk((sk - i) / c) && mk("overflow"), i += (e - o) * c, o = e;
                            for (const n of t)
                                if (n < o && ++i > sk && mk("overflow"), n === o) {
                                    let t = i;
                                    for (let e = uk;; e += uk) {
                                        const o = e <= a ? 1 : e >= a + 26 ? 26 : e - a;
                                        if (t < o) break;
                                        const i = t - o,
                                            s = uk - o;
                                        r.push(hk(bk(o + i % s, 0))), t = pk(i / s)
                                    }
                                    r.push(hk(bk(t, 0))), a = yk(i, c, u === s), i = 0, ++u
                                }++i, ++o
                        }
                        return r.join("")
                    }

                    function Ak(e) {
                        return gk(e, function(e) {
                            return ck.test(e) ? _k(e.slice(4).toLowerCase()) : e
                        })
                    }

                    function xk(e) {
                        return gk(e, function(e) {
                            return lk.test(e) ? "xn--" + wk(e) : e
                        })
                    }
                    const kk = e => String.fromCodePoint(...e),
                        Ek = {
                            version: "2.1.0",
                            ucs2: {
                                decode: vk,
                                encode: kk
                            },
                            decode: _k,
                            encode: wk,
                            toASCII: xk,
                            toUnicode: Ak
                        };
                    const Sk = function e(r) {
                            var n;
                            return r.__esModule ? r : (n = Object.defineProperty({}, "__esModule", {
                                value: !0
                            }), Object.keys(r).forEach(function(e) {
                                var t = Object.getOwnPropertyDescriptor(r, e);
                                Object.defineProperty(n, e, t.get ? t : {
                                    enumerable: !0,
                                    get: function() {
                                        return r[e]
                                    }
                                })
                            }), n)
                        }(Object.freeze({
                            __proto__: null,
                            ucs2decode: vk,
                            ucs2encode: kk,
                            decode: _k,
                            encode: wk,
                            toASCII: xk,
                            toUnicode: Ak,
                            default: Ek
                        })),
                        Rk = {
                            "com.ac": !0,
                            "net.ac": !0,
                            "gov.ac": !0,
                            "org.ac": !0,
                            "mil.ac": !0,
                            "co.ae": !0,
                            "net.ae": !0,
                            "gov.ae": !0,
                            "ac.ae": !0,
                            "sch.ae": !0,
                            "org.ae": !0,
                            "mil.ae": !0,
                            "pro.ae": !0,
                            "name.ae": !0,
                            "com.af": !0,
                            "edu.af": !0,
                            "gov.af": !0,
                            "net.af": !0,
                            "org.af": !0,
                            "com.al": !0,
                            "edu.al": !0,
                            "gov.al": !0,
                            "mil.al": !0,
                            "net.al": !0,
                            "org.al": !0,
                            "ed.ao": !0,
                            "gv.ao": !0,
                            "og.ao": !0,
                            "co.ao": !0,
                            "pb.ao": !0,
                            "it.ao": !0,
                            "com.ar": !0,
                            "edu.ar": !0,
                            "gob.ar": !0,
                            "gov.ar": !0,
                            "int.ar": !0,
                            "mil.ar": !0,
                            "net.ar": !0,
                            "org.ar": !0,
                            "tur.ar": !0,
                            "gv.at": !0,
                            "ac.at": !0,
                            "co.at": !0,
                            "or.at": !0,
                            "com.au": !0,
                            "net.au": !0,
                            "org.au": !0,
                            "edu.au": !0,
                            "gov.au": !0,
                            "csiro.au": !0,
                            "asn.au": !0,
                            "id.au": !0,
                            "vic.au": !0,
                            "sa.au": !0,
                            "wa.au": !0,
                            "nt.au": !0,
                            "tas.au": !0,
                            "qld.au": !0,
                            "act.au": !0,
                            "conf.au": !0,
                            "oz.au": !0,
                            "org.ba": !0,
                            "net.ba": !0,
                            "edu.ba": !0,
                            "gov.ba": !0,
                            "mil.ba": !0,
                            "unsa.ba": !0,
                            "untz.ba": !0,
                            "unmo.ba": !0,
                            "unbi.ba": !0,
                            "unze.ba": !0,
                            "co.ba": !0,
                            "com.ba": !0,
                            "rs.ba": !0,
                            "co.bb": !0,
                            "com.bb": !0,
                            "net.bb": !0,
                            "org.bb": !0,
                            "gov.bb": !0,
                            "edu.bb": !0,
                            "info.bb": !0,
                            "store.bb": !0,
                            "tv.bb": !0,
                            "biz.bb": !0,
                            "com.bh": !0,
                            "info.bh": !0,
                            "cc.bh": !0,
                            "edu.bh": !0,
                            "biz.bh": !0,
                            "net.bh": !0,
                            "org.bh": !0,
                            "gov.bh": !0,
                            "com.bn": !0,
                            "edu.bn": !0,
                            "gov.bn": !0,
                            "net.bn": !0,
                            "org.bn": !0,
                            "com.bo": !0,
                            "net.bo": !0,
                            "org.bo": !0,
                            "tv.bo": !0,
                            "mil.bo": !0,
                            "int.bo": !0,
                            "gob.bo": !0,
                            "gov.bo": !0,
                            "edu.bo": !0,
                            "adm.br": !0,
                            "adv.br": !0,
                            "agr.br": !0,
                            "am.br": !0,
                            "arq.br": !0,
                            "art.br": !0,
                            "ato.br": !0,
                            "b.br": !0,
                            "bio.br": !0,
                            "blog.br": !0,
                            "bmd.br": !0,
                            "cim.br": !0,
                            "cng.br": !0,
                            "cnt.br": !0,
                            "com.br": !0,
                            "coop.br": !0,
                            "ecn.br": !0,
                            "edu.br": !0,
                            "eng.br": !0,
                            "esp.br": !0,
                            "etc.br": !0,
                            "eti.br": !0,
                            "far.br": !0,
                            "flog.br": !0,
                            "fm.br": !0,
                            "fnd.br": !0,
                            "fot.br": !0,
                            "fst.br": !0,
                            "g12.br": !0,
                            "ggf.br": !0,
                            "gov.br": !0,
                            "imb.br": !0,
                            "ind.br": !0,
                            "inf.br": !0,
                            "jor.br": !0,
                            "jus.br": !0,
                            "lel.br": !0,
                            "mat.br": !0,
                            "med.br": !0,
                            "mil.br": !0,
                            "mus.br": !0,
                            "net.br": !0,
                            "nom.br": !0,
                            "not.br": !0,
                            "ntr.br": !0,
                            "odo.br": !0,
                            "org.br": !0,
                            "ppg.br": !0,
                            "pro.br": !0,
                            "psc.br": !0,
                            "psi.br": !0,
                            "qsl.br": !0,
                            "rec.br": !0,
                            "slg.br": !0,
                            "srv.br": !0,
                            "tmp.br": !0,
                            "trd.br": !0,
                            "tur.br": !0,
                            "tv.br": !0,
                            "vet.br": !0,
                            "vlog.br": !0,
                            "wiki.br": !0,
                            "zlg.br": !0,
                            "com.bs": !0,
                            "net.bs": !0,
                            "org.bs": !0,
                            "edu.bs": !0,
                            "gov.bs": !0,
                            "om.bz": !0,
                            "du.bz": !0,
                            "ov.bz": !0,
                            "et.bz": !0,
                            "rg.bz": !0,
                            "ab.ca": !0,
                            "bc.ca": !0,
                            "mb.ca": !0,
                            "nb.ca": !0,
                            "nf.ca": !0,
                            "nl.ca": !0,
                            "ns.ca": !0,
                            "nt.ca": !0,
                            "nu.ca": !0,
                            "on.ca": !0,
                            "pe.ca": !0,
                            "qc.ca": !0,
                            "sk.ca": !0,
                            "yk.ca": !0,
                            "co.ck": !0,
                            "org.ck": !0,
                            "edu.ck": !0,
                            "gov.ck": !0,
                            "net.ck": !0,
                            "gen.ck": !0,
                            "biz.ck": !0,
                            "info.ck": !0,
                            "ac.cn": !0,
                            "com.cn": !0,
                            "edu.cn": !0,
                            "gov.cn": !0,
                            "mil.cn": !0,
                            "net.cn": !0,
                            "org.cn": !0,
                            "ah.cn": !0,
                            "bj.cn": !0,
                            "cq.cn": !0,
                            "fj.cn": !0,
                            "gd.cn": !0,
                            "gs.cn": !0,
                            "gz.cn": !0,
                            "gx.cn": !0,
                            "ha.cn": !0,
                            "hb.cn": !0,
                            "he.cn": !0,
                            "hi.cn": !0,
                            "hl.cn": !0,
                            "hn.cn": !0,
                            "jl.cn": !0,
                            "js.cn": !0,
                            "jx.cn": !0,
                            "ln.cn": !0,
                            "nm.cn": !0,
                            "nx.cn": !0,
                            "qh.cn": !0,
                            "sc.cn": !0,
                            "sd.cn": !0,
                            "sh.cn": !0,
                            "sn.cn": !0,
                            "sx.cn": !0,
                            "tj.cn": !0,
                            "tw.cn": !0,
                            "xj.cn": !0,
                            "xz.cn": !0,
                            "yn.cn": !0,
                            "zj.cn": !0,
                            "com.co": !0,
                            "org.co": !0,
                            "edu.co": !0,
                            "gov.co": !0,
                            "net.co": !0,
                            "mil.co": !0,
                            "nom.co": !0,
                            "ac.cr": !0,
                            "co.cr": !0,
                            "ed.cr": !0,
                            "fi.cr": !0,
                            "go.cr": !0,
                            "or.cr": !0,
                            "sa.cr": !0,
                            cr: !0,
                            "ac.cy": !0,
                            "net.cy": !0,
                            "gov.cy": !0,
                            "org.cy": !0,
                            "pro.cy": !0,
                            "name.cy": !0,
                            "ekloges.cy": !0,
                            "tm.cy": !0,
                            "ltd.cy": !0,
                            "biz.cy": !0,
                            "press.cy": !0,
                            "parliament.cy": !0,
                            "com.cy": !0,
                            "edu.do": !0,
                            "gob.do": !0,
                            "gov.do": !0,
                            "com.do": !0,
                            "sld.do": !0,
                            "org.do": !0,
                            "net.do": !0,
                            "web.do": !0,
                            "mil.do": !0,
                            "art.do": !0,
                            "com.dz": !0,
                            "org.dz": !0,
                            "net.dz": !0,
                            "gov.dz": !0,
                            "edu.dz": !0,
                            "asso.dz": !0,
                            "pol.dz": !0,
                            "art.dz": !0,
                            "com.ec": !0,
                            "info.ec": !0,
                            "net.ec": !0,
                            "fin.ec": !0,
                            "med.ec": !0,
                            "pro.ec": !0,
                            "org.ec": !0,
                            "edu.ec": !0,
                            "gov.ec": !0,
                            "mil.ec": !0,
                            "com.eg": !0,
                            "edu.eg": !0,
                            "eun.eg": !0,
                            "gov.eg": !0,
                            "mil.eg": !0,
                            "name.eg": !0,
                            "net.eg": !0,
                            "org.eg": !0,
                            "sci.eg": !0,
                            "com.er": !0,
                            "edu.er": !0,
                            "gov.er": !0,
                            "mil.er": !0,
                            "net.er": !0,
                            "org.er": !0,
                            "ind.er": !0,
                            "rochest.er": !0,
                            "w.er": !0,
                            "com.es": !0,
                            "nom.es": !0,
                            "org.es": !0,
                            "gob.es": !0,
                            "edu.es": !0,
                            "com.et": !0,
                            "gov.et": !0,
                            "org.et": !0,
                            "edu.et": !0,
                            "net.et": !0,
                            "biz.et": !0,
                            "name.et": !0,
                            "info.et": !0,
                            "ac.fj": !0,
                            "biz.fj": !0,
                            "com.fj": !0,
                            "info.fj": !0,
                            "mil.fj": !0,
                            "name.fj": !0,
                            "net.fj": !0,
                            "org.fj": !0,
                            "pro.fj": !0,
                            "co.fk": !0,
                            "org.fk": !0,
                            "gov.fk": !0,
                            "ac.fk": !0,
                            "nom.fk": !0,
                            "net.fk": !0,
                            fr: !0,
                            "tm.fr": !0,
                            "asso.fr": !0,
                            "nom.fr": !0,
                            "prd.fr": !0,
                            "presse.fr": !0,
                            "com.fr": !0,
                            "gouv.fr": !0,
                            "co.gg": !0,
                            "net.gg": !0,
                            "org.gg": !0,
                            "com.gh": !0,
                            "edu.gh": !0,
                            "gov.gh": !0,
                            "org.gh": !0,
                            "mil.gh": !0,
                            "co.gl": !0,
                            "com.gl": !0,
                            "edu.gl": !0,
                            "net.gl": !0,
                            "org.gl": !0,
                            "com.gn": !0,
                            "ac.gn": !0,
                            "gov.gn": !0,
                            "org.gn": !0,
                            "net.gn": !0,
                            "com.gr": !0,
                            "edu.gr": !0,
                            "net.gr": !0,
                            "org.gr": !0,
                            "gov.gr": !0,
                            "mil.gr": !0,
                            "com.gt": !0,
                            "edu.gt": !0,
                            "net.gt": !0,
                            "gob.gt": !0,
                            "org.gt": !0,
                            "mil.gt": !0,
                            "ind.gt": !0,
                            "com.gu": !0,
                            "net.gu": !0,
                            "gov.gu": !0,
                            "org.gu": !0,
                            "edu.gu": !0,
                            "com.hk": !0,
                            "edu.hk": !0,
                            "gov.hk": !0,
                            "idv.hk": !0,
                            "net.hk": !0,
                            "org.hk": !0,
                            "2000.hu": !0,
                            "agrar.hu": !0,
                            "bolt.hu": !0,
                            "casino.hu": !0,
                            "city.hu": !0,
                            "co.hu": !0,
                            "erotica.hu": !0,
                            "erotika.hu": !0,
                            "film.hu": !0,
                            "forum.hu": !0,
                            "games.hu": !0,
                            "hotel.hu": !0,
                            "info.hu": !0,
                            "ingatlan.hu": !0,
                            "jogasz.hu": !0,
                            "konyvelo.hu": !0,
                            "lakas.hu": !0,
                            "media.hu": !0,
                            "news.hu": !0,
                            "org.hu": !0,
                            "priv.hu": !0,
                            "reklam.hu": !0,
                            "sex.hu": !0,
                            "shop.hu": !0,
                            "sport.hu": !0,
                            "suli.huv": !0,
                            "szex.hu": !0,
                            "tm.hu": !0,
                            "tozsde.hu": !0,
                            "utazas.hu": !0,
                            "video.hu": !0,
                            "ac.id": !0,
                            "co.id": !0,
                            "net.id": !0,
                            "or.id": !0,
                            "web.id": !0,
                            "sch.id": !0,
                            "mil.id": !0,
                            "go.id": !0,
                            "war.net.id": !0,
                            "my.id": !0,
                            "biz.id": !0,
                            "ac.il": !0,
                            "co.il": !0,
                            "org.il": !0,
                            "net.il": !0,
                            "k12.il": !0,
                            "gov.il": !0,
                            "muni.il": !0,
                            "idf.il": !0,
                            in: !0,
                            "4fd.in": !0,
                            "co.in": !0,
                            "firm.in": !0,
                            "net.in": !0,
                            "org.in": !0,
                            "gen.in": !0,
                            "ind.in": !0,
                            "ac.in": !0,
                            "edu.in": !0,
                            "res.in": !0,
                            "ernet.in": !0,
                            "gov.in": !0,
                            "mil.in": !0,
                            "nic.in": !0,
                            iq: !0,
                            "gov.iq": !0,
                            "edu.iq": !0,
                            "com.iq": !0,
                            "mil.iq": !0,
                            "org.iq": !0,
                            "net.iq": !0,
                            ir: !0,
                            "ac.ir": !0,
                            "co.ir": !0,
                            "gov.ir": !0,
                            "id.ir": !0,
                            "net.ir": !0,
                            "org.ir": !0,
                            "sch.ir": !0,
                            "dnssec.ir": !0,
                            "gov.it": !0,
                            "edu.it": !0,
                            "co.je": !0,
                            "net.je": !0,
                            "org.je": !0,
                            "com.jo": !0,
                            "net.jo": !0,
                            "gov.jo": !0,
                            "edu.jo": !0,
                            "org.jo": !0,
                            "mil.jo": !0,
                            "name.jo": !0,
                            "sch.jo": !0,
                            "ac.jp": !0,
                            "ad.jp": !0,
                            "co.jp": !0,
                            "ed.jp": !0,
                            "go.jp": !0,
                            "gr.jp": !0,
                            "lg.jp": !0,
                            "ne.jp": !0,
                            "or.jp": !0,
                            "co.ke": !0,
                            "or.ke": !0,
                            "ne.ke": !0,
                            "go.ke": !0,
                            "ac.ke": !0,
                            "sc.ke": !0,
                            "me.ke": !0,
                            "mobi.ke": !0,
                            "info.ke": !0,
                            "per.kh": !0,
                            "com.kh": !0,
                            "edu.kh": !0,
                            "gov.kh": !0,
                            "mil.kh": !0,
                            "net.kh": !0,
                            "org.kh": !0,
                            "com.ki": !0,
                            "biz.ki": !0,
                            "de.ki": !0,
                            "net.ki": !0,
                            "info.ki": !0,
                            "org.ki": !0,
                            "gov.ki": !0,
                            "edu.ki": !0,
                            "mob.ki": !0,
                            "tel.ki": !0,
                            km: !0,
                            "com.km": !0,
                            "coop.km": !0,
                            "asso.km": !0,
                            "nom.km": !0,
                            "presse.km": !0,
                            "tm.km": !0,
                            "medecin.km": !0,
                            "notaires.km": !0,
                            "pharmaciens.km": !0,
                            "veterinaire.km": !0,
                            "edu.km": !0,
                            "gouv.km": !0,
                            "mil.km": !0,
                            "net.kn": !0,
                            "org.kn": !0,
                            "edu.kn": !0,
                            "gov.kn": !0,
                            kr: !0,
                            "co.kr": !0,
                            "ne.kr": !0,
                            "or.kr": !0,
                            "re.kr": !0,
                            "pe.kr": !0,
                            "go.kr": !0,
                            "mil.kr": !0,
                            "ac.kr": !0,
                            "hs.kr": !0,
                            "ms.kr": !0,
                            "es.kr": !0,
                            "sc.kr": !0,
                            "kg.kr": !0,
                            "seoul.kr": !0,
                            "busan.kr": !0,
                            "daegu.kr": !0,
                            "incheon.kr": !0,
                            "gwangju.kr": !0,
                            "daejeon.kr": !0,
                            "ulsan.kr": !0,
                            "gyeonggi.kr": !0,
                            "gangwon.kr": !0,
                            "chungbuk.kr": !0,
                            "chungnam.kr": !0,
                            "jeonbuk.kr": !0,
                            "jeonnam.kr": !0,
                            "gyeongbuk.kr": !0,
                            "gyeongnam.kr": !0,
                            "jeju.kr": !0,
                            "edu.kw": !0,
                            "com.kw": !0,
                            "net.kw": !0,
                            "org.kw": !0,
                            "gov.kw": !0,
                            "com.ky": !0,
                            "org.ky": !0,
                            "net.ky": !0,
                            "edu.ky": !0,
                            "gov.ky": !0,
                            "com.kz": !0,
                            "edu.kz": !0,
                            "gov.kz": !0,
                            "mil.kz": !0,
                            "net.kz": !0,
                            "org.kz": !0,
                            "com.lb": !0,
                            "edu.lb": !0,
                            "gov.lb": !0,
                            "net.lb": !0,
                            "org.lb": !0,
                            "gov.lk": !0,
                            "sch.lk": !0,
                            "net.lk": !0,
                            "int.lk": !0,
                            "com.lk": !0,
                            "org.lk": !0,
                            "edu.lk": !0,
                            "ngo.lk": !0,
                            "soc.lk": !0,
                            "web.lk": !0,
                            "ltd.lk": !0,
                            "assn.lk": !0,
                            "grp.lk": !0,
                            "hotel.lk": !0,
                            "com.lr": !0,
                            "edu.lr": !0,
                            "gov.lr": !0,
                            "org.lr": !0,
                            "net.lr": !0,
                            "com.lv": !0,
                            "edu.lv": !0,
                            "gov.lv": !0,
                            "org.lv": !0,
                            "mil.lv": !0,
                            "id.lv": !0,
                            "net.lv": !0,
                            "asn.lv": !0,
                            "conf.lv": !0,
                            "com.ly": !0,
                            "net.ly": !0,
                            "gov.ly": !0,
                            "plc.ly": !0,
                            "edu.ly": !0,
                            "sch.ly": !0,
                            "med.ly": !0,
                            "org.ly": !0,
                            "id.ly": !0,
                            ma: !0,
                            "net.ma": !0,
                            "ac.ma": !0,
                            "org.ma": !0,
                            "gov.ma": !0,
                            "press.ma": !0,
                            "co.ma": !0,
                            "tm.mc": !0,
                            "asso.mc": !0,
                            "co.me": !0,
                            "net.me": !0,
                            "org.me": !0,
                            "edu.me": !0,
                            "ac.me": !0,
                            "gov.me": !0,
                            "its.me": !0,
                            "priv.me": !0,
                            "org.mg": !0,
                            "nom.mg": !0,
                            "gov.mg": !0,
                            "prd.mg": !0,
                            "tm.mg": !0,
                            "edu.mg": !0,
                            "mil.mg": !0,
                            "com.mg": !0,
                            "com.mk": !0,
                            "org.mk": !0,
                            "net.mk": !0,
                            "edu.mk": !0,
                            "gov.mk": !0,
                            "inf.mk": !0,
                            "name.mk": !0,
                            "pro.mk": !0,
                            "com.ml": !0,
                            "net.ml": !0,
                            "org.ml": !0,
                            "edu.ml": !0,
                            "gov.ml": !0,
                            "presse.ml": !0,
                            "gov.mn": !0,
                            "edu.mn": !0,
                            "org.mn": !0,
                            "com.mo": !0,
                            "edu.mo": !0,
                            "gov.mo": !0,
                            "net.mo": !0,
                            "org.mo": !0,
                            "com.mt": !0,
                            "org.mt": !0,
                            "net.mt": !0,
                            "edu.mt": !0,
                            "gov.mt": !0,
                            "aero.mv": !0,
                            "biz.mv": !0,
                            "com.mv": !0,
                            "coop.mv": !0,
                            "edu.mv": !0,
                            "gov.mv": !0,
                            "info.mv": !0,
                            "int.mv": !0,
                            "mil.mv": !0,
                            "museum.mv": !0,
                            "name.mv": !0,
                            "net.mv": !0,
                            "org.mv": !0,
                            "pro.mv": !0,
                            "ac.mw": !0,
                            "co.mw": !0,
                            "com.mw": !0,
                            "coop.mw": !0,
                            "edu.mw": !0,
                            "gov.mw": !0,
                            "int.mw": !0,
                            "museum.mw": !0,
                            "net.mw": !0,
                            "org.mw": !0,
                            "com.mx": !0,
                            "net.mx": !0,
                            "org.mx": !0,
                            "edu.mx": !0,
                            "gob.mx": !0,
                            "com.my": !0,
                            "net.my": !0,
                            "org.my": !0,
                            "gov.my": !0,
                            "edu.my": !0,
                            "sch.my": !0,
                            "mil.my": !0,
                            "name.my": !0,
                            "com.nf": !0,
                            "net.nf": !0,
                            "arts.nf": !0,
                            "store.nf": !0,
                            "web.nf": !0,
                            "firm.nf": !0,
                            "info.nf": !0,
                            "other.nf": !0,
                            "per.nf": !0,
                            "rec.nf": !0,
                            "com.ng": !0,
                            "org.ng": !0,
                            "gov.ng": !0,
                            "edu.ng": !0,
                            "net.ng": !0,
                            "sch.ng": !0,
                            "name.ng": !0,
                            "mobi.ng": !0,
                            "biz.ng": !0,
                            "mil.ng": !0,
                            "gob.ni": !0,
                            "co.ni": !0,
                            "com.ni": !0,
                            "ac.ni": !0,
                            "edu.ni": !0,
                            "org.ni": !0,
                            "nom.ni": !0,
                            "net.ni": !0,
                            "mil.ni": !0,
                            "com.np": !0,
                            "edu.np": !0,
                            "gov.np": !0,
                            "org.np": !0,
                            "mil.np": !0,
                            "net.np": !0,
                            "edu.nr": !0,
                            "gov.nr": !0,
                            "biz.nr": !0,
                            "info.nr": !0,
                            "net.nr": !0,
                            "org.nr": !0,
                            "com.nr": !0,
                            "com.om": !0,
                            "co.om": !0,
                            "edu.om": !0,
                            "ac.om": !0,
                            "sch.om": !0,
                            "gov.om": !0,
                            "net.om": !0,
                            "org.om": !0,
                            "mil.om": !0,
                            "museum.om": !0,
                            "biz.om": !0,
                            "pro.om": !0,
                            "med.om": !0,
                            "edu.pe": !0,
                            "gob.pe": !0,
                            "nom.pe": !0,
                            "mil.pe": !0,
                            "sld.pe": !0,
                            "org.pe": !0,
                            "com.pe": !0,
                            "net.pe": !0,
                            "com.ph": !0,
                            "net.ph": !0,
                            "org.ph": !0,
                            "mil.ph": !0,
                            "ngo.ph": !0,
                            "i.ph": !0,
                            "gov.ph": !0,
                            "edu.ph": !0,
                            "com.pk": !0,
                            "net.pk": !0,
                            "edu.pk": !0,
                            "org.pk": !0,
                            "fam.pk": !0,
                            "biz.pk": !0,
                            "web.pk": !0,
                            "gov.pk": !0,
                            "gob.pk": !0,
                            "gok.pk": !0,
                            "gon.pk": !0,
                            "gop.pk": !0,
                            "gos.pk": !0,
                            "pwr.pl": !0,
                            "com.pl": !0,
                            "biz.pl": !0,
                            "net.pl": !0,
                            "art.pl": !0,
                            "edu.pl": !0,
                            "org.pl": !0,
                            "ngo.pl": !0,
                            "gov.pl": !0,
                            "info.pl": !0,
                            "mil.pl": !0,
                            "waw.pl": !0,
                            "warszawa.pl": !0,
                            "wroc.pl": !0,
                            "wroclaw.pl": !0,
                            "krakow.pl": !0,
                            "katowice.pl": !0,
                            "poznan.pl": !0,
                            "lodz.pl": !0,
                            "gda.pl": !0,
                            "gdansk.pl": !0,
                            "slupsk.pl": !0,
                            "radom.pl": !0,
                            "szczecin.pl": !0,
                            "lublin.pl": !0,
                            "bialystok.pl": !0,
                            "olsztyn.pl": !0,
                            "torun.pl": !0,
                            "gorzow.pl": !0,
                            "zgora.pl": !0,
                            "biz.pr": !0,
                            "com.pr": !0,
                            "edu.pr": !0,
                            "gov.pr": !0,
                            "info.pr": !0,
                            "isla.pr": !0,
                            "name.pr": !0,
                            "net.pr": !0,
                            "org.pr": !0,
                            "pro.pr": !0,
                            "est.pr": !0,
                            "prof.pr": !0,
                            "ac.pr": !0,
                            "com.ps": !0,
                            "net.ps": !0,
                            "org.ps": !0,
                            "edu.ps": !0,
                            "gov.ps": !0,
                            "plo.ps": !0,
                            "sec.ps": !0,
                            "co.pw": !0,
                            "ne.pw": !0,
                            "or.pw": !0,
                            "ed.pw": !0,
                            "go.pw": !0,
                            "belau.pw": !0,
                            "arts.ro": !0,
                            "com.ro": !0,
                            "firm.ro": !0,
                            "info.ro": !0,
                            "nom.ro": !0,
                            "nt.ro": !0,
                            "org.ro": !0,
                            "rec.ro": !0,
                            "store.ro": !0,
                            "tm.ro": !0,
                            "www.ro": !0,
                            "co.rs": !0,
                            "org.rs": !0,
                            "edu.rs": !0,
                            "ac.rs": !0,
                            "gov.rs": !0,
                            "in.rs": !0,
                            "com.sb": !0,
                            "net.sb": !0,
                            "edu.sb": !0,
                            "org.sb": !0,
                            "gov.sb": !0,
                            "com.sc": !0,
                            "net.sc": !0,
                            "edu.sc": !0,
                            "gov.sc": !0,
                            "org.sc": !0,
                            "co.sh": !0,
                            "com.sh": !0,
                            "org.sh": !0,
                            "gov.sh": !0,
                            "edu.sh": !0,
                            "net.sh": !0,
                            "nom.sh": !0,
                            "com.sl": !0,
                            "net.sl": !0,
                            "org.sl": !0,
                            "edu.sl": !0,
                            "gov.sl": !0,
                            "gov.st": !0,
                            "saotome.st": !0,
                            "principe.st": !0,
                            "consulado.st": !0,
                            "embaixada.st": !0,
                            "org.st": !0,
                            "edu.st": !0,
                            "net.st": !0,
                            "com.st": !0,
                            "store.st": !0,
                            "mil.st": !0,
                            "co.st": !0,
                            "edu.sv": !0,
                            "gob.sv": !0,
                            "com.sv": !0,
                            "org.sv": !0,
                            "red.sv": !0,
                            "co.sz": !0,
                            "ac.sz": !0,
                            "org.sz": !0,
                            "com.tr": !0,
                            "gen.tr": !0,
                            "org.tr": !0,
                            "biz.tr": !0,
                            "info.tr": !0,
                            "av.tr": !0,
                            "dr.tr": !0,
                            "pol.tr": !0,
                            "bel.tr": !0,
                            "tsk.tr": !0,
                            "bbs.tr": !0,
                            "k12.tr": !0,
                            "edu.tr": !0,
                            "name.tr": !0,
                            "net.tr": !0,
                            "gov.tr": !0,
                            "web.tr": !0,
                            "tel.tr": !0,
                            "tv.tr": !0,
                            "co.tt": !0,
                            "com.tt": !0,
                            "org.tt": !0,
                            "net.tt": !0,
                            "biz.tt": !0,
                            "info.tt": !0,
                            "pro.tt": !0,
                            "int.tt": !0,
                            "coop.tt": !0,
                            "jobs.tt": !0,
                            "mobi.tt": !0,
                            "travel.tt": !0,
                            "museum.tt": !0,
                            "aero.tt": !0,
                            "cat.tt": !0,
                            "tel.tt": !0,
                            "name.tt": !0,
                            "mil.tt": !0,
                            "edu.tt": !0,
                            "gov.tt": !0,
                            "edu.tw": !0,
                            "gov.tw": !0,
                            "mil.tw": !0,
                            "com.tw": !0,
                            "net.tw": !0,
                            "org.tw": !0,
                            "idv.tw": !0,
                            "game.tw": !0,
                            "ebiz.tw": !0,
                            "club.tw": !0,
                            "com.mu": !0,
                            "gov.mu": !0,
                            "net.mu": !0,
                            "org.mu": !0,
                            "ac.mu": !0,
                            "co.mu": !0,
                            "or.mu": !0,
                            "ac.mz": !0,
                            "co.mz": !0,
                            "edu.mz": !0,
                            "org.mz": !0,
                            "gov.mz": !0,
                            "com.na": !0,
                            "co.na": !0,
                            "ac.nz": !0,
                            "co.nz": !0,
                            "cri.nz": !0,
                            "geek.nz": !0,
                            "gen.nz": !0,
                            "govt.nz": !0,
                            "health.nz": !0,
                            "iwi.nz": !0,
                            "maori.nz": !0,
                            "mil.nz": !0,
                            "net.nz": !0,
                            "org.nz": !0,
                            "parliament.nz": !0,
                            "school.nz": !0,
                            "abo.pa": !0,
                            "ac.pa": !0,
                            "com.pa": !0,
                            "edu.pa": !0,
                            "gob.pa": !0,
                            "ing.pa": !0,
                            "med.pa": !0,
                            "net.pa": !0,
                            "nom.pa": !0,
                            "org.pa": !0,
                            "sld.pa": !0,
                            "com.pt": !0,
                            "edu.pt": !0,
                            "gov.pt": !0,
                            "int.pt": !0,
                            "net.pt": !0,
                            "nome.pt": !0,
                            "org.pt": !0,
                            "publ.pt": !0,
                            "com.py": !0,
                            "edu.py": !0,
                            "gov.py": !0,
                            "mil.py": !0,
                            "net.py": !0,
                            "org.py": !0,
                            "com.qa": !0,
                            "edu.qa": !0,
                            "gov.qa": !0,
                            "mil.qa": !0,
                            "net.qa": !0,
                            "org.qa": !0,
                            "asso.re": !0,
                            "com.re": !0,
                            "nom.re": !0,
                            "ac.ru": !0,
                            "adygeya.ru": !0,
                            "altai.ru": !0,
                            "amur.ru": !0,
                            "arkhangelsk.ru": !0,
                            "astrakhan.ru": !0,
                            "bashkiria.ru": !0,
                            "belgorod.ru": !0,
                            "bir.ru": !0,
                            "bryansk.ru": !0,
                            "buryatia.ru": !0,
                            "cbg.ru": !0,
                            "chel.ru": !0,
                            "chelyabinsk.ru": !0,
                            "chita.ru": !0,
                            "chukotka.ru": !0,
                            "chuvashia.ru": !0,
                            "com.ru": !0,
                            "dagestan.ru": !0,
                            "e-burg.ru": !0,
                            "edu.ru": !0,
                            "gov.ru": !0,
                            "grozny.ru": !0,
                            "int.ru": !0,
                            "irkutsk.ru": !0,
                            "ivanovo.ru": !0,
                            "izhevsk.ru": !0,
                            "jar.ru": !0,
                            "joshkar-ola.ru": !0,
                            "kalmykia.ru": !0,
                            "kaluga.ru": !0,
                            "kamchatka.ru": !0,
                            "karelia.ru": !0,
                            "kazan.ru": !0,
                            "kchr.ru": !0,
                            "kemerovo.ru": !0,
                            "khabarovsk.ru": !0,
                            "khakassia.ru": !0,
                            "khv.ru": !0,
                            "kirov.ru": !0,
                            "koenig.ru": !0,
                            "komi.ru": !0,
                            "kostroma.ru": !0,
                            "kranoyarsk.ru": !0,
                            "kuban.ru": !0,
                            "kurgan.ru": !0,
                            "kursk.ru": !0,
                            "lipetsk.ru": !0,
                            "magadan.ru": !0,
                            "mari.ru": !0,
                            "mari-el.ru": !0,
                            "marine.ru": !0,
                            "mil.ru": !0,
                            "mordovia.ru": !0,
                            "mosreg.ru": !0,
                            "msk.ru": !0,
                            "murmansk.ru": !0,
                            "nalchik.ru": !0,
                            "net.ru": !0,
                            "nnov.ru": !0,
                            "nov.ru": !0,
                            "novosibirsk.ru": !0,
                            "nsk.ru": !0,
                            "omsk.ru": !0,
                            "orenburg.ru": !0,
                            "org.ru": !0,
                            "oryol.ru": !0,
                            "penza.ru": !0,
                            "perm.ru": !0,
                            "pp.ru": !0,
                            "pskov.ru": !0,
                            "ptz.ru": !0,
                            "rnd.ru": !0,
                            "ryazan.ru": !0,
                            "sakhalin.ru": !0,
                            "samara.ru": !0,
                            "saratov.ru": !0,
                            "simbirsk.ru": !0,
                            "smolensk.ru": !0,
                            "spb.ru": !0,
                            "stavropol.ru": !0,
                            "stv.ru": !0,
                            "surgut.ru": !0,
                            "tambov.ru": !0,
                            "tatarstan.ru": !0,
                            "tom.ru": !0,
                            "tomsk.ru": !0,
                            "tsaritsyn.ru": !0,
                            "tsk.ru": !0,
                            "tula.ru": !0,
                            "tuva.ru": !0,
                            "tver.ru": !0,
                            "tyumen.ru": !0,
                            "udm.ru": !0,
                            "udmurtia.ru": !0,
                            "ulan-ude.ru": !0,
                            "vladikavkaz.ru": !0,
                            "vladimir.ru": !0,
                            "vladivostok.ru": !0,
                            "volgograd.ru": !0,
                            "vologda.ru": !0,
                            "voronezh.ru": !0,
                            "vrn.ru": !0,
                            "vyatka.ru": !0,
                            "yakutia.ru": !0,
                            "yamal.ru": !0,
                            "yekaterinburg.ru": !0,
                            "yuzhno-sakhalinsk.ru": !0,
                            "ac.rw": !0,
                            "co.rw": !0,
                            "com.rw": !0,
                            "edu.rw": !0,
                            "gouv.rw": !0,
                            "gov.rw": !0,
                            "int.rw": !0,
                            "mil.rw": !0,
                            "net.rw": !0,
                            "com.sa": !0,
                            "edu.sa": !0,
                            "gov.sa": !0,
                            "med.sa": !0,
                            "net.sa": !0,
                            "org.sa": !0,
                            "pub.sa": !0,
                            "sch.sa": !0,
                            "com.sd": !0,
                            "edu.sd": !0,
                            "gov.sd": !0,
                            "info.sd": !0,
                            "med.sd": !0,
                            "net.sd": !0,
                            "org.sd": !0,
                            "tv.sd": !0,
                            "a.se": !0,
                            "ac.se": !0,
                            "b.se": !0,
                            "bd.se": !0,
                            "c.se": !0,
                            "d.se": !0,
                            "e.se": !0,
                            "f.se": !0,
                            "g.se": !0,
                            "h.se": !0,
                            "i.se": !0,
                            "k.se": !0,
                            "l.se": !0,
                            "m.se": !0,
                            "n.se": !0,
                            "o.se": !0,
                            "org.se": !0,
                            "p.se": !0,
                            "parti.se": !0,
                            "pp.se": !0,
                            "press.se": !0,
                            "r.se": !0,
                            "s.se": !0,
                            "t.se": !0,
                            "tm.se": !0,
                            "u.se": !0,
                            "w.se": !0,
                            "x.se": !0,
                            "y.se": !0,
                            "z.se": !0,
                            "com.sg": !0,
                            "edu.sg": !0,
                            "gov.sg": !0,
                            "idn.sg": !0,
                            "net.sg": !0,
                            "org.sg": !0,
                            "per.sg": !0,
                            "art.sn": !0,
                            "com.sn": !0,
                            "edu.sn": !0,
                            "gouv.sn": !0,
                            "org.sn": !0,
                            "perso.sn": !0,
                            "univ.sn": !0,
                            "com.sy": !0,
                            "edu.sy": !0,
                            "gov.sy": !0,
                            "mil.sy": !0,
                            "net.sy": !0,
                            "news.sy": !0,
                            "org.sy": !0,
                            "ac.th": !0,
                            "co.th": !0,
                            "go.th": !0,
                            "in.th": !0,
                            "mi.th": !0,
                            "net.th": !0,
                            "or.th": !0,
                            "ac.tj": !0,
                            "biz.tj": !0,
                            "co.tj": !0,
                            "com.tj": !0,
                            "edu.tj": !0,
                            "go.tj": !0,
                            "gov.tj": !0,
                            "info.tj": !0,
                            "int.tj": !0,
                            "mil.tj": !0,
                            "name.tj": !0,
                            "net.tj": !0,
                            "nic.tj": !0,
                            "org.tj": !0,
                            "test.tj": !0,
                            "web.tj": !0,
                            "agrinet.tn": !0,
                            "com.tn": !0,
                            "defense.tn": !0,
                            "edunet.tn": !0,
                            "ens.tn": !0,
                            "fin.tn": !0,
                            "gov.tn": !0,
                            "ind.tn": !0,
                            "info.tn": !0,
                            "intl.tn": !0,
                            "mincom.tn": !0,
                            "nat.tn": !0,
                            "net.tn": !0,
                            "org.tn": !0,
                            "perso.tn": !0,
                            "rnrt.tn": !0,
                            "rns.tn": !0,
                            "rnu.tn": !0,
                            "tourism.tn": !0,
                            "ac.tz": !0,
                            "co.tz": !0,
                            "go.tz": !0,
                            "ne.tz": !0,
                            "or.tz": !0,
                            "biz.ua": !0,
                            "cherkassy.ua": !0,
                            "chernigov.ua": !0,
                            "chernovtsy.ua": !0,
                            "ck.ua": !0,
                            "cn.ua": !0,
                            "co.ua": !0,
                            "com.ua": !0,
                            "crimea.ua": !0,
                            "cv.ua": !0,
                            "dn.ua": !0,
                            "dnepropetrovsk.ua": !0,
                            "donetsk.ua": !0,
                            "dp.ua": !0,
                            "edu.ua": !0,
                            "gov.ua": !0,
                            "if.ua": !0,
                            "in.ua": !0,
                            "ivano-frankivsk.ua": !0,
                            "kh.ua": !0,
                            "kharkov.ua": !0,
                            "kherson.ua": !0,
                            "khmelnitskiy.ua": !0,
                            "kiev.ua": !0,
                            "kirovograd.ua": !0,
                            "km.ua": !0,
                            "kr.ua": !0,
                            "ks.ua": !0,
                            "kv.ua": !0,
                            "lg.ua": !0,
                            "lugansk.ua": !0,
                            "lutsk.ua": !0,
                            "lviv.ua": !0,
                            "me.ua": !0,
                            "mk.ua": !0,
                            "net.ua": !0,
                            "nikolaev.ua": !0,
                            "od.ua": !0,
                            "odessa.ua": !0,
                            "org.ua": !0,
                            "pl.ua": !0,
                            "poltava.ua": !0,
                            "pp.ua": !0,
                            "rovno.ua": !0,
                            "rv.ua": !0,
                            "sebastopol.ua": !0,
                            "sumy.ua": !0,
                            "te.ua": !0,
                            "ternopil.ua": !0,
                            "uzhgorod.ua": !0,
                            "vinnica.ua": !0,
                            "vn.ua": !0,
                            "zaporizhzhe.ua": !0,
                            "zhitomir.ua": !0,
                            "zp.ua": !0,
                            "zt.ua": !0,
                            "ac.ug": !0,
                            "co.ug": !0,
                            "go.ug": !0,
                            "ne.ug": !0,
                            "or.ug": !0,
                            "org.ug": !0,
                            "sc.ug": !0,
                            "ac.uk": !0,
                            "bl.uk": !0,
                            "british-library.uk": !0,
                            "co.uk": !0,
                            "cym.uk": !0,
                            "gov.uk": !0,
                            "govt.uk": !0,
                            "icnet.uk": !0,
                            "jet.uk": !0,
                            "lea.uk": !0,
                            "ltd.uk": !0,
                            "me.uk": !0,
                            "mil.uk": !0,
                            "mod.uk": !0,
                            "national-library-scotland.uk": !0,
                            "nel.uk": !0,
                            "net.uk": !0,
                            "nhs.uk": !0,
                            "nic.uk": !0,
                            "nls.uk": !0,
                            "org.uk": !0,
                            "orgn.uk": !0,
                            "parliament.uk": !0,
                            "plc.uk": !0,
                            "police.uk": !0,
                            "sch.uk": !0,
                            "scot.uk": !0,
                            "soc.uk": !0,
                            "4fd.us": !0,
                            "dni.us": !0,
                            "fed.us": !0,
                            "isa.us": !0,
                            "kids.us": !0,
                            "nsn.us": !0,
                            "com.uy": !0,
                            "edu.uy": !0,
                            "gub.uy": !0,
                            "mil.uy": !0,
                            "net.uy": !0,
                            "org.uy": !0,
                            "co.ve": !0,
                            "com.ve": !0,
                            "edu.ve": !0,
                            "gob.ve": !0,
                            "info.ve": !0,
                            "mil.ve": !0,
                            "net.ve": !0,
                            "org.ve": !0,
                            "web.ve": !0,
                            "co.vi": !0,
                            "com.vi": !0,
                            "k12.vi": !0,
                            "net.vi": !0,
                            "org.vi": !0,
                            "ac.vn": !0,
                            "biz.vn": !0,
                            "com.vn": !0,
                            "edu.vn": !0,
                            "gov.vn": !0,
                            "health.vn": !0,
                            "info.vn": !0,
                            "int.vn": !0,
                            "name.vn": !0,
                            "net.vn": !0,
                            "org.vn": !0,
                            "pro.vn": !0,
                            "co.ye": !0,
                            "com.ye": !0,
                            "gov.ye": !0,
                            "ltd.ye": !0,
                            "me.ye": !0,
                            "net.ye": !0,
                            "org.ye": !0,
                            "plc.ye": !0,
                            "ac.yu": !0,
                            "co.yu": !0,
                            "edu.yu": !0,
                            "gov.yu": !0,
                            "org.yu": !0,
                            "ac.za": !0,
                            "agric.za": !0,
                            "alt.za": !0,
                            "bourse.za": !0,
                            "city.za": !0,
                            "co.za": !0,
                            "cybernet.za": !0,
                            "db.za": !0,
                            "ecape.school.za": !0,
                            "edu.za": !0,
                            "fs.school.za": !0,
                            "gov.za": !0,
                            "gp.school.za": !0,
                            "grondar.za": !0,
                            "iaccess.za": !0,
                            "imt.za": !0,
                            "inca.za": !0,
                            "kzn.school.za": !0,
                            "landesign.za": !0,
                            "law.za": !0,
                            "lp.school.za": !0,
                            "mil.za": !0,
                            "mpm.school.za": !0,
                            "ncape.school.za": !0,
                            "net.za": !0,
                            "ngo.za": !0,
                            "nis.za": !0,
                            "nom.za": !0,
                            "nw.school.za": !0,
                            "olivetti.za": !0,
                            "org.za": !0,
                            "pix.za": !0,
                            "school.za": !0,
                            "tm.za": !0,
                            "wcape.school.za": !0,
                            "web.za": !0,
                            "ac.zm": !0,
                            "co.zm": !0,
                            "com.zm": !0,
                            "edu.zm": !0,
                            "gov.zm": !0,
                            "net.zm": !0,
                            "org.zm": !0,
                            "sch.zm": !0
                        },
                        Dk = {
                            ad: !0,
                            ae: !0,
                            af: !0,
                            ag: !0,
                            ai: !0,
                            al: !0,
                            am: !0,
                            ao: !0,
                            aq: !0,
                            ar: !0,
                            as: !0,
                            at: !0,
                            au: !0,
                            aw: !0,
                            ax: !0,
                            az: !0,
                            ba: !0,
                            bb: !0,
                            bd: !0,
                            be: !0,
                            bf: !0,
                            bg: !0,
                            bh: !0,
                            bi: !0,
                            bj: !0,
                            bl: !0,
                            bm: !0,
                            bn: !0,
                            bo: !0,
                            bq: !0,
                            br: !0,
                            bs: !0,
                            bt: !0,
                            bv: !0,
                            bw: !0,
                            by: !0,
                            bz: !0,
                            ca: !0,
                            cc: !0,
                            cd: !0,
                            cf: !0,
                            cg: !0,
                            ch: !0,
                            ci: !0,
                            ck: !0,
                            cl: !0,
                            cm: !0,
                            cn: !0,
                            co: !0,
                            cr: !0,
                            cu: !0,
                            cv: !0,
                            cw: !0,
                            cx: !0,
                            cy: !0,
                            cz: !0,
                            de: !0,
                            dj: !0,
                            dk: !0,
                            dm: !0,
                            do: !0,
                            dz: !0,
                            ec: !0,
                            ee: !0,
                            eg: !0,
                            er: !0,
                            es: !0,
                            et: !0,
                            fi: !0,
                            fj: !0,
                            fk: !0,
                            fm: !0,
                            fo: !0,
                            fr: !0,
                            ga: !0,
                            "gb (.uk)": !0,
                            gd: !0,
                            ge: !0,
                            gf: !0,
                            gg: !0,
                            gh: !0,
                            gi: !0,
                            gl: !0,
                            gm: !0,
                            gn: !0,
                            gp: !0,
                            gq: !0,
                            gr: !0,
                            gs: !0,
                            gt: !0,
                            gu: !0,
                            gw: !0,
                            gy: !0,
                            hk: !0,
                            hm: !0,
                            hn: !0,
                            hr: !0,
                            ht: !0,
                            hu: !0,
                            id: !0,
                            ie: !0,
                            il: !0,
                            im: !0,
                            in: !0,
                            io: !0,
                            iq: !0,
                            ir: !0,
                            is: !0,
                            it: !0,
                            je: !0,
                            jm: !0,
                            jo: !0,
                            jp: !0,
                            ke: !0,
                            kg: !0,
                            kh: !0,
                            ki: !0,
                            km: !0,
                            kn: !0,
                            kp: !0,
                            kr: !0,
                            kw: !0,
                            ky: !0,
                            kz: !0,
                            la: !0,
                            lb: !0,
                            lc: !0,
                            li: !0,
                            lk: !0,
                            lr: !0,
                            ls: !0,
                            lt: !0,
                            lu: !0,
                            lv: !0,
                            ly: !0,
                            ma: !0,
                            mc: !0,
                            md: !0,
                            me: !0,
                            mf: !0,
                            mg: !0,
                            mh: !0,
                            mk: !0,
                            ml: !0,
                            mm: !0,
                            mn: !0,
                            mo: !0,
                            mp: !0,
                            mq: !0,
                            mr: !0,
                            ms: !0,
                            mt: !0,
                            mu: !0,
                            mv: !0,
                            mw: !0,
                            mx: !0,
                            my: !0,
                            mz: !0,
                            na: !0,
                            nc: !0,
                            ne: !0,
                            nf: !0,
                            ng: !0,
                            ni: !0,
                            nl: !0,
                            no: !0,
                            np: !0,
                            nr: !0,
                            nu: !0,
                            nz: !0,
                            om: !0,
                            pa: !0,
                            pe: !0,
                            pf: !0,
                            pg: !0,
                            ph: !0,
                            pk: !0,
                            pl: !0,
                            pm: !0,
                            pn: !0,
                            pr: !0,
                            ps: !0,
                            pt: !0,
                            pw: !0,
                            py: !0,
                            qa: !0,
                            re: !0,
                            ro: !0,
                            rs: !0,
                            ru: !0,
                            rw: !0,
                            sa: !0,
                            sb: !0,
                            sc: !0,
                            sd: !0,
                            se: !0,
                            sg: !0,
                            sh: !0,
                            si: !0,
                            sj: !0,
                            sk: !0,
                            sl: !0,
                            sm: !0,
                            sn: !0,
                            so: !0,
                            sr: !0,
                            ss: !0,
                            st: !0,
                            sv: !0,
                            sx: !0,
                            sy: !0,
                            sz: !0,
                            tc: !0,
                            td: !0,
                            tf: !0,
                            tg: !0,
                            th: !0,
                            tj: !0,
                            tk: !0,
                            tl: !0,
                            tm: !0,
                            tn: !0,
                            to: !0,
                            tr: !0,
                            tt: !0,
                            tv: !0,
                            tw: !0,
                            tz: !0,
                            ua: !0,
                            ug: !0,
                            us: !0,
                            uy: !0,
                            uz: !0,
                            va: !0,
                            vc: !0,
                            ve: !0,
                            vg: !0,
                            vi: !0,
                            vn: !0,
                            vu: !0,
                            wf: !0,
                            ws: !0,
                            ye: !0,
                            yt: !0,
                            za: !0,
                            zm: !0,
                            zw: !0
                        };

                    function Tk(e) {
                        return null != e && "object" == typeof e && !1 === Array.isArray(e)
                    }
                    var Ok = function(e, i) {
                        if ("string" != typeof e) return !1;
                        if (i instanceof Object || (i = {}), (e = e.toLowerCase()).endsWith(".") && (e = e.slice(0, e.length - 1)), 253 < (e = i.allowUnicode ? Sk.toASCII(e) : e).length) return !1;
                        if (!/^([\u0E00-\u0E7Fa-z0-9-._*]+)$/g.test(e)) return !1;
                        if (i.topLevel && Dk[e.replace(/\.$/, "")]) return !0;
                        var t = e.match(/(.*)\.(([\u0E00-\u0E7Fa-z0-9]+)(\.[a-z0-9]+))/);
                        let r = null,
                            a = null;
                        if (t && 2 < t.length && Rk[t[2]] && (r = t[2], a = t[1].split(".")), !a) {
                            if ((a = e.split(".")).length <= 1) return !1;
                            if (r = a.pop(), !/^(?:xn--)?(?!^\d+$)[\u0E00-\u0E7Fa-z0-9]+$/gi.test(r)) return !1
                        }
                        return !(!1 === i.subdomain && 1 < a.length) && a.every(function(e, t) {
                            if (i.wildcard && 0 === t && "*" === e && 1 < a.length) return !0;
                            let r = /^([\u0E00-\u0E7Fa-zA-Z0-9-_]+)$/g;
                            t === a.length - 1 && (r = /^([\u0E00-\u0E7Fa-zA-Z0-9-]+)$/g);
                            var n = (e.match(/--(--)?/g) || []).length,
                                o = (e.match(/xn--/g) || []).length;
                            return (t !== a.length - 1 || n === o) && r.test(e) && e.length < 64 && !e.startsWith("-") && !e.endsWith("-")
                        })
                    };
                    const Ik = Tk;

                    function Ck(e, t, r) {
                        return "function" == typeof r.join ? r.join(e) : e[0] + t + e[1]
                    }

                    function Lk(e, t, r) {
                        return "function" != typeof r.isValid || r.isValid(e, t)
                    }

                    function Mk(e) {
                        return Ik(e) || Array.isArray(e) || "function" == typeof e
                    }
                    var Pk = Tk;

                    function jk(e) {
                        return !0 === Pk(e) && "[object Object]" === Object.prototype.toString.call(e)
                    }
                    const Uk = Reflect["deleteProperty"],
                        $k = function(e) {
                            return "object" == typeof e ? null === e : "function" != typeof e
                        },
                        Bk = function(e) {
                            return !1 !== jk(e) && "function" == typeof(e = e.constructor) && !1 !== jk(e = e.prototype) && !1 !== e.hasOwnProperty("isPrototypeOf")
                        },
                        Nk = e => "object" == typeof e && null !== e || "function" == typeof e,
                        Fk = e => {
                            if (!$k(e)) throw new TypeError("Object keys must be strings or symbols");
                            if ("__proto__" === e || "constructor" === e || "prototype" === e) throw new Error(`Cannot set unsafe key: "${e}"`)
                        },
                        Gk = (t, r, e) => {
                            n = r ? (() => {
                                if ("string" != typeof t || !r) return t;
                                let e = t + ";";
                                return void 0 !== r.arrays && (e += `arrays=${r.arrays};`), void 0 !== r.separator && (e += `separator=${r.separator};`), void 0 !== r.split && (e += `split=${r.split};`), void 0 !== r.merge && (e += `merge=${r.merge};`), void 0 !== r.preservePaths && (e += `preservePaths=${r.preservePaths};`), e
                            })() : t;
                            var n = Array.isArray(n) ? n.flat().map(String).join(",") : n,
                                e = (Fk(n), Hk.cache.get(n) || e());
                            return Hk.cache.set(n, e), e
                        },
                        zk = (s, u) => u && "function" == typeof u.split ? u.split(s) : "symbol" == typeof s ? [s] : Array.isArray(s) ? s : Gk(s, u, () => {
                            {
                                var [r, e = {}] = [s, u];
                                const o = e.separator || ".",
                                    i = "/" !== o && e.preservePaths;
                                if ("string" == typeof r && !1 !== i && /\//.test(r)) return [r];
                                const a = [];
                                let t = "";
                                var n = e => {
                                    let t;
                                    "" !== e.trim() && Number.isInteger(t = Number(e)) ? a.push(t) : a.push(e)
                                };
                                for (let e = 0; e < r.length; e++) {
                                    const i = r[e];
                                    "\\" !== i ? i !== o ? t += i : (n(t), t = "") : t += r[++e]
                                }
                                return t && n(t), a
                            }
                        }),
                        Hk = (e, r, n, o) => {
                            if (r && Nk(e)) {
                                var i, a, s, u, c = zk(r, o);
                                let t = e;
                                for (let e = 0; e < c.length; e++) {
                                    const r = c[e],
                                        l = c[e + 1];
                                    if (Fk(r), void 0 === l) {
                                        i = t, a = r, s = n, u = o, Fk(a), void 0 === s ? Uk(i, a) : u && u.merge && (u = "function" === u.merge ? u.merge : Object.assign) && Bk(i[a]) && Bk(s) ? i[a] = u(i[a], s) : i[a] = s;
                                        break
                                    }
                                    t = "number" != typeof l || Array.isArray(t[r]) ? (Nk(t[r]) || (t[r] = {}), t[r]) : t[r] = []
                                }
                            }
                            return e
                        };
                    Hk.split = zk, Hk.cache = new Map, Hk.clear = () => {
                        Hk.cache = new Map
                    };
                    var Zk, Kk = Hk;

                    function qk(n) {
                        var i = this,
                            l = {},
                            a = (null == n ? void 0 : n._ancestor_origins) || window.location.ancestorOrigins,
                            s = (null == n ? void 0 : n.self_url) || window.location.href,
                            u = (null == n ? void 0 : n.self_origin) || window.location.origin,
                            c = (null == n ? void 0 : n.referrer_url) || document.referrer;

                        function t(e) {
                            {
                                var a = l,
                                    s = void 0;
                                if (Ik(s) || (s = {
                                        default: s
                                    }), !Mk(a)) return void 0 !== s.default ? s.default : a;
                                "number" == typeof e && (e = String(e));
                                var t = Array.isArray(e),
                                    r = "string" == typeof e,
                                    u = s.separator || ".",
                                    c = s.joinChar || ("string" == typeof u ? u : ".");
                                if (!r && !t) return a;
                                if (r && e in a) return Lk(e, a, s) ? a[e] : s.default;
                                let n = t ? e : (r = e, t = u, "function" == typeof(e = s).split ? e.split(r) : r.split(t)),
                                    o = n.length,
                                    i = 0;
                                do {
                                    let r = n[i];
                                    for ("number" == typeof r && (r = String(r)); r && "\\" === r.slice(-1);) r = Ck([r.slice(0, -1), n[++i] || ""], c, s);
                                    if (r in a) {
                                        if (!Lk(r, a, s)) return s.default;
                                        a = a[r]
                                    } else {
                                        let e = !1,
                                            t = i + 1;
                                        for (; t < o;)
                                            if (r = Ck([r, n[t++]], c, s), e = r in a) {
                                                if (!Lk(r, a, s)) return s.default;
                                                a = a[r], i = t - 1;
                                                break
                                            }
                                        if (!e) return s.default
                                    }
                                } while (++i < o && Mk(a));
                                return i === o ? a : s.default
                            }
                        }

                        function d(e, t) {
                            Kk(l, e, t)
                        }

                        function f(e, t) {
                            t = !(1 < arguments.length && void 0 !== t) || t;
                            if (e && "" !== e) try {
                                return new ce(e, t)
                            } catch (e) {
                                console.log(e)
                            }
                        }

                        function p() {
                            for (var e = (null == n ? void 0 : n.urls) || [s, c], t = 0; t < e.length; t++) {
                                var r = f(e[t]);
                                if (r) {
                                    r = null == (r = r.query) ? void 0 : r.gd_sdk_referrer_url;
                                    if (r && (r = decodeURIComponent(r), ak.isURL(r))) return r
                                }
                            }
                        }
                        return function() {
                            O(this, i);
                            var e, t, r, n = 0,
                                o = window;
                            try {
                                for (; o != o.parent;) n++, o = o.parent
                            } catch (n) {
                                d("depth.error", n.message)
                            }
                            d("depth.value", n), e = a, t = l.depth.value, r = u, d("top.domain.from", "fallback"), e && 0 < e.length ? (r = e[e.length - 1], d("top.domain.from", "origins")) : 0 === t ? (r = u, d("top.domain.from", "self-top")) : 1 === t && (e = f(c)) && (r = e.origin, d("top.domain.from", "referrer")), d("top.domain.value", r.replace(/^https?:\/\/(www\.)?(.*)$/i, "$2")), (t = p()) ? Ok(t) ? (d("partner.domain.value", t), d("partner.domain.from", "partner-domain")) : (t = f(t, !1)) ? (d("partner.domain.value", t.origin.replace(/^https?:\/\/(www\.)?(.*)$/i, "$2")), d("partner.domain.from", "partner-url")) : (d("partner.domain.value", l.top.domain.value), d("partner.domain.from", "partner-fallback")) : (d("partner.domain.value", l.top.domain.value), d("partner.domain.from", "fallback")), e = p(), 0 === l.depth.value ? (d("partner.url.value", s), d("partner.url.from", "self-top")) : e ? Ok(e) ? (d("partner.url.value", s), d("partner.url.from", "partner-domain")) : (d("partner.url.value", e), d("partner.url.from", "partner-url")) : (d("partner.url.value", c), d("partner.url.from", "fallback"))
                        }.bind(this)(), {
                            get: t,
                            print: function(e) {
                                console.log(t(e))
                            }
                        }
                    }

                    function Wk(e) {
                        var t = this;
                        return Zk || (e = {
                            gameId: e.gameId,
                            hours: (new Date).getHours(),
                            topDomain: uv.topDomain,
                            domain: uv.parentDomain,
                            referrer: uv.parentURL,
                            depth: yn(),
                            version: $u.version,
                            byloader: uv.isTokenGameURL,
                            isTokenGameURL: uv.isTokenGameURL,
                            isMasterGameURL: uv.isMasterGameURL,
                            isExtHostedGameURL: uv.isExtHostedGameURL,
                            byloaderVersion: uv.version,
                            tracking: cv.userDeclinedTracking,
                            whitelabel: cv.whitelabelPartner,
                            platform: vn()
                        }, Zk = new Nn(e)), Zk || {
                            send: function() {
                                O(this, t)
                            }.bind(this)
                        }
                    }
                    var Vk = {
                            getGameData: function(e) {
                                var t = this;
                                try {
                                    var r = e.replace("game.api.gamedistribution.com", "game-api.gamedistribution.com");
                                    fetch(r).then(function(e) {
                                        O(this, t)
                                    }.bind(this)).catch(function(e) {
                                        O(this, t)
                                    }.bind(this))
                                } catch (e) {}
                            },
                            getGameLoaderIndex: function(e) {
                                var t = this;
                                try {
                                    var r = "https://html5-prod-aws.gamedistribution.com/".concat(e, "/");
                                    fetch(r).then(function(e) {
                                        O(this, t)
                                    }.bind(this)).catch(function(e) {
                                        O(this, t)
                                    }.bind(this))
                                } catch (e) {}
                            }
                        },
                        w = {
                            exports: {}
                        },
                        HA = "object" == typeof Reflect ? Reflect : null,
                        Yk = HA && "function" == typeof HA.apply ? HA.apply : function(e, t, r) {
                            return Function.prototype.apply.call(e, t, r)
                        },
                        Jk = HA && "function" == typeof HA.ownKeys ? HA.ownKeys : Object.getOwnPropertySymbols ? function(e) {
                            return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))
                        } : function(e) {
                            return Object.getOwnPropertyNames(e)
                        },
                        Xk = Number.isNaN || function(e) {
                            return e != e
                        };

                    function Qk() {
                        Qk.init.call(this)
                    }
                    w.exports = Qk, w.exports.once = function(o, i) {
                        return new Promise(function(e, t) {
                            function r(e) {
                                o.removeListener(i, n), t(e)
                            }

                            function n() {
                                "function" == typeof o.removeListener && o.removeListener("error", r), e([].slice.call(arguments))
                            }
                            uE(o, i, n, {
                                once: !0
                            }), "error" !== i && "function" == typeof o.on && uE(o, "error", r, {
                                once: !0
                            })
                        })
                    }, (Qk.EventEmitter = Qk).prototype._events = void 0, Qk.prototype._eventsCount = 0, Qk.prototype._maxListeners = void 0;
                    var eE = 10;

                    function tE(e) {
                        if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof e)
                    }

                    function rE(e) {
                        return void 0 === e._maxListeners ? Qk.defaultMaxListeners : e._maxListeners
                    }

                    function nE(e, t, r, n) {
                        var o, i;
                        return tE(r), void 0 === (o = e._events) ? (o = e._events = Object.create(null), e._eventsCount = 0) : (void 0 !== o.newListener && (e.emit("newListener", t, r.listener || r), o = e._events), i = o[t]), void 0 === i ? (i = o[t] = r, ++e._eventsCount) : ("function" == typeof i ? i = o[t] = n ? [r, i] : [i, r] : n ? i.unshift(r) : i.push(r), 0 < (o = rE(e)) && i.length > o && !i.warned && (i.warned = !0, (n = new Error("Possible EventEmitter memory leak detected. " + i.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit")).name = "MaxListenersExceededWarning", n.emitter = e, n.type = t, n.count = i.length, console) && console.warn && console.warn(n)), e
                    }

                    function oE(e, t, r) {
                        e = {
                            fired: !1,
                            wrapFn: void 0,
                            target: e,
                            type: t,
                            listener: r
                        }, t = function e() {
                            if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments)
                        }.bind(e);
                        return t.listener = r, e.wrapFn = t
                    }

                    function iE(e, t, r) {
                        e = e._events;
                        if (void 0 === e) return [];
                        e = e[t]; {
                            if (void 0 === e) return [];
                            if ("function" == typeof e) return r ? [e.listener || e] : [e];
                            if (r) {
                                for (var n = e, o = new Array(n.length), i = 0; i < o.length; ++i) o[i] = n[i].listener || n[i];
                                return o
                            }
                            return sE(e, e.length)
                        }
                    }

                    function aE(e) {
                        var t = this._events;
                        if (void 0 !== t) {
                            t = t[e];
                            if ("function" == typeof t) return 1;
                            if (void 0 !== t) return t.length
                        }
                        return 0
                    }

                    function sE(e, t) {
                        for (var r = new Array(t), n = 0; n < t; ++n) r[n] = e[n];
                        return r
                    }

                    function uE(r, n, o, i) {
                        if ("function" == typeof r.on) i.once ? r.once(n, o) : r.on(n, o);
                        else {
                            if ("function" != typeof r.addEventListener) throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof r);
                            r.addEventListener(n, function e(t) {
                                i.once && r.removeEventListener(n, e), o(t)
                            })
                        }
                    }
                    Object.defineProperty(Qk, "defaultMaxListeners", {
                        enumerable: !0,
                        get: function() {
                            return eE
                        },
                        set: function(e) {
                            if ("number" != typeof e || e < 0 || Xk(e)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + ".");
                            eE = e
                        }
                    }), Qk.init = function() {
                        void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0
                    }, Qk.prototype.setMaxListeners = function(e) {
                        if ("number" != typeof e || e < 0 || Xk(e)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + ".");
                        return this._maxListeners = e, this
                    }, Qk.prototype.getMaxListeners = function() {
                        return rE(this)
                    }, Qk.prototype.emit = function(e) {
                        for (var t = [], r = 1; r < arguments.length; r++) t.push(arguments[r]);
                        var n = "error" === e,
                            o = this._events;
                        if (void 0 !== o) n = n && void 0 === o.error;
                        else if (!n) return !1;
                        if (n) {
                            if ((i = 0 < t.length ? t[0] : i) instanceof Error) throw i;
                            n = new Error("Unhandled error." + (i ? " (" + i.message + ")" : ""));
                            throw n.context = i, n
                        }
                        var i = o[e];
                        if (void 0 === i) return !1;
                        if ("function" == typeof i) Yk(i, this, t);
                        else
                            for (var a = i.length, s = sE(i, a), r = 0; r < a; ++r) Yk(s[r], this, t);
                        return !0
                    }, Qk.prototype.on = Qk.prototype.addListener = function(e, t) {
                        return nE(this, e, t, !1)
                    }, Qk.prototype.prependListener = function(e, t) {
                        return nE(this, e, t, !0)
                    }, Qk.prototype.once = function(e, t) {
                        return tE(t), this.on(e, oE(this, e, t)), this
                    }, Qk.prototype.prependOnceListener = function(e, t) {
                        return tE(t), this.prependListener(e, oE(this, e, t)), this
                    }, Qk.prototype.off = Qk.prototype.removeListener = function(e, t) {
                        var r, n, o, i, a;
                        if (tE(t), void 0 !== (n = this._events) && void 0 !== (r = n[e]))
                            if (r === t || r.listener === t) 0 == --this._eventsCount ? this._events = Object.create(null) : (delete n[e], n.removeListener && this.emit("removeListener", e, r.listener || t));
                            else if ("function" != typeof r) {
                            for (o = -1, i = r.length - 1; 0 <= i; i--)
                                if (r[i] === t || r[i].listener === t) {
                                    a = r[i].listener, o = i;
                                    break
                                }
                            if (o < 0) return this;
                            if (0 === o) r.shift();
                            else {
                                var s = r;
                                var u = o;
                                for (; u + 1 < s.length; u++) s[u] = s[u + 1];
                                s.pop()
                            }
                            1 === r.length && (n[e] = r[0]), void 0 !== n.removeListener && this.emit("removeListener", e, a || t)
                        }
                        return this
                    }, Qk.prototype.removeAllListeners = function(e) {
                        var t, r;
                        if (void 0 !== (r = this._events))
                            if (void 0 === r.removeListener) 0 === arguments.length ? (this._events = Object.create(null), this._eventsCount = 0) : void 0 !== r[e] && (0 == --this._eventsCount ? this._events = Object.create(null) : delete r[e]);
                            else if (0 === arguments.length) {
                            for (var n, o = Object.keys(r), i = 0; i < o.length; ++i) "removeListener" !== (n = o[i]) && this.removeAllListeners(n);
                            this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0
                        } else if ("function" == typeof(t = r[e])) this.removeListener(e, t);
                        else if (void 0 !== t)
                            for (i = t.length - 1; 0 <= i; i--) this.removeListener(e, t[i]);
                        return this
                    }, Qk.prototype.listeners = function(e) {
                        return iE(this, e, !0)
                    }, Qk.prototype.rawListeners = function(e) {
                        return iE(this, e, !1)
                    }, Qk.listenerCount = function(e, t) {
                        return "function" == typeof e.listenerCount ? e.listenerCount(t) : aE.call(e, t)
                    }, Qk.prototype.listenerCount = aE, Qk.prototype.eventNames = function() {
                        return 0 < this._eventsCount ? Jk(this._events) : []
                    };

                    function cE() {
                        var t = this,
                            e = lE.acc.some(function(e) {
                                return O(this, t), e === (null == (e = window.location.host) ? void 0 : e.toLowerCase())
                            }.bind(this));
                        return {
                            env: e ? "acc" : "prod",
                            config: e ? fE : dE
                        }
                    }
                    var lE = {
                            prod: ["html5.gamedistribution.com", "revision.gamedistribution.com"],
                            acc: ["html5-acc-real-aws.gamedistribution.com", "acceptance-revision.gamedistribution.com"]
                        },
                        dE = {
                            gameAPI: "game.api.gamedistribution.com"
                        },
                        fE = {
                            gameAPI: "game-api-acc-real-aws.gamedistribution.com"
                        };

                    function pE(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function hE(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? pE(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : pE(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }

                    function mE(e) {
                        DE.push(e)
                    }

                    function gE(t) {
                        return function(e) {
                            e = WE(qE(e));
                            return 1 & t && (e = VE(e, YE, "")), e = 2 & t ? VE(e, JE, "$1") : e
                        }
                    }
                    var vE, bE, yE, _E, wE, AE, xE, kE, EE, SE, RE = new w.exports.EventEmitter,
                        DE = [],
                        TE = function(e) {
                            vE = Wk(yE = e)
                        },
                        OE = (EE = d(I.mark(function e() {
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        if (bE) {
                                            e.next = 6;
                                            break
                                        }
                                        return e.next = 3, LE(yE);
                                    case 3:
                                        bE = e.sent, RE.emit("game-data-ready", bE), IE();
                                    case 6:
                                        return e.abrupt("return", bE);
                                    case 7:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function() {
                            return EE.apply(this, arguments)
                        }),
                        IE = function() {
                            var e;
                            null != (e = bE) && null != (e = e.aws_tst) && e.enabled && (CE(), null != (e = bE) && null != (e = e.aws_tst) && null != (e = e.ep) && e.api && null != (e = bE) && e.url && Vk.getGameData(null == (e = bE) ? void 0 : e.url), setInterval(d(I.mark(function e() {
                                var t;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, LE(yE);
                                        case 3:
                                            bE = e.sent, null != (t = bE) && t.aws_tst, e.next = 9;
                                            break;
                                        case 7:
                                            e.prev = 7, e.t0 = e.catch(0);
                                        case 9:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, null, [
                                    [0, 7]
                                ])
                            })), 3e5))
                        },
                        CE = function() {
                            var m = window.fetch;
                            window.fetch = d(I.mark(function e() {
                                var t, r, n, o, i, a, s, u, c, l, d, f, p = this,
                                    h = arguments;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            for (t = h.length, r = new Array(t), n = 0; n < t; n++) r[n] = h[n];
                                            o = r[0], i = r[1], f = null == (f = bE) || null == (f = f.aws_tst) || null == (f = f.ep) ? void 0 : f.atm, a = null == (a = bE) || null == (a = a.aws_tst) || null == (a = a.ep) ? void 0 : a.msgrt, s = function(e, t) {
                                                var r = this,
                                                    e = (O(this, p), o.replace(e, t));
                                                m(e, i).then(function() {
                                                    O(this, r)
                                                }.bind(this))
                                            }.bind(this);
                                            try {
                                                f && 0 < o.indexOf("tag.atom") && s("tag.atom.gamedistribution.com", "atom-tag-prod-aws.gamedistribution.com"), a && 0 < o.indexOf("msgrt.gamedistribution.com") && (null != (u = bE) && u.aws_tst, null != (c = bE) && null != (l = c.aws_tst) && null != (d = l.ep) && d.msgrt, s("msgrt.gamedistribution.com", "msgrt-prod-aws.gamedistribution.com"))
                                            } catch (e) {}
                                            return e.next = 9, m(o, i);
                                        case 9:
                                            return f = e.sent, e.abrupt("return", f);
                                        case 11:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            }))
                        },
                        LE = function(r) {
                            var s = this,
                                e = (vE.send("gdfw.loading", {
                                    message: "loading"
                                }), DE = [], mE("1"), mE("2"), new qk),
                                n = (mE("3"), e.get("partner.domain.value")),
                                u = (mE("4"), function() {
                                    return O(this, s), {
                                        gameId: r.gameId,
                                        disableAds: {},
                                        preroll: !0,
                                        midroll: 12e4,
                                        rewardedAds: !1,
                                        title: "",
                                        tags: [],
                                        category: "",
                                        assets: [],
                                        dmain: !0,
                                        sdk: {},
                                        loader: {},
                                        splash: {},
                                        promo: {},
                                        dAds: {},
                                        pAds: {},
                                        mAds: {},
                                        rAds: {}
                                    }
                                }.bind(this)),
                                c = (mE("5"), function() {
                                    O(this, s);
                                    var e = o(),
                                        e = e ? "&mode=".concat(e) : "",
                                        t = cE().config;
                                    return "https://".concat(t.gameAPI, "/game/v4/get/").concat(r.gameId.replace(/-/g, ""), "/?domain=").concat(n).concat(e, "&v=").concat($u.version, "&localTime=").concat((new Date).getHours())
                                }.bind(this)),
                                o = (mE("6"), function() {
                                    var r = this,
                                        e = (O(this, s), new Proxy(new URLSearchParams(window.location.search), {
                                            get: function(e, t) {
                                                return O(this, r), e.get(t)
                                            }.bind(this)
                                        }));
                                    return !e.gd_mode && window.location.search.includes("gd_mode") ? window.location.search.split("gd_mode=")[1] : e.gd_mode
                                }.bind(this));
                            return mE("7"), new Promise(function(n) {
                                var t, o = this,
                                    i = (O(this, s), mE("7.1"), u());
                                try {
                                    mE("7.2");
                                    var a = c();
                                    mE("7.3"), fetch(a).then((t = d(I.mark(function e(t) {
                                        var r;
                                        return I.wrap(function(e) {
                                            for (;;) switch (e.prev = e.next) {
                                                case 0:
                                                    return mE("7.4"), e.prev = 1, e.next = 4, t.json();
                                                case 4:
                                                    r = e.sent, e.next = 13;
                                                    break;
                                                case 7:
                                                    return e.prev = 7, e.t0 = e.catch(1), e.t0, e.next = 12,
                                                        function(e) {
                                                            var o = this,
                                                                i = e.url;
                                                            return new Promise(function(t, r) {
                                                                O(this, o);
                                                                var n = new XMLHttpRequest;
                                                                n.open("GET", i, !0), n.onreadystatechange = function() {
                                                                    var e;
                                                                    4 == n.readyState && (200 == n.status ? (e = JSON.parse(n.responseText), t(e)) : r(Error("Error occured on request: ".concat(n.status, ", ").concat(n.statusText))))
                                                                }, n.onerror = function(e) {
                                                                    r(e)
                                                                }, n.send()
                                                            }.bind(this))
                                                        }({
                                                            url: a
                                                        });
                                                case 12:
                                                    r = e.sent;
                                                case 13:
                                                    return e.abrupt("return", r);
                                                case 14:
                                                case "end":
                                                    return e.stop()
                                            }
                                        }, e, null, [
                                            [1, 7]
                                        ])
                                    })), function(e) {
                                        return t.apply(this, arguments)
                                    })).then(function(e) {
                                        var t, r = this;
                                        O(this, o), mE("7.5"), e.success ? (e = e.result.game, mE("7.6"), e = {
                                            company: e.company,
                                            gameId: e.gameMd5,
                                            slug: e.slug,
                                            pname: e.pname,
                                            dname: e.dname,
                                            status: e.status,
                                            description: e.description,
                                            disableAds: e.enableAds,
                                            preroll: e.preRoll,
                                            midroll: 6e4 * e.timeAds,
                                            rewardedAds: e.rewardedAds,
                                            title: e.title,
                                            publishedAt: e.publishedAt,
                                            tags: e.tags,
                                            category: e.category,
                                            assets: e.assets,
                                            disp_2nd_prer: e.disp_2nd_prer,
                                            ctry_vst: e.ctry_vst,
                                            ctry: e.ctry,
                                            crtv: e.crtv,
                                            dmain: e.dmain,
                                            aws_tst: e.aws_tst,
                                            meta: e.meta,
                                            __t4r: Cs(e.__t4r) || {},
                                            block_exts: Cs(e.push_cuda),
                                            bloc_gard: Cs(e.bloc_gard),
                                            cookie: Cs(e.cookie),
                                            gdpr: Cs(e.gdpr),
                                            diagnostic: Cs(e.diagnostic),
                                            cmp: Cs(e.cmp),
                                            gft: Cs(e.gft) || {},
                                            sdk: Cs(e.sdk) || {},
                                            sdkfw: Cs(e.sdkfw) || {},
                                            loader: Cs(e.loader) || {},
                                            splash: Cs(e.splash) || {},
                                            promo: Cs(e.promo) || {},
                                            dAds: Cs(e.dads) || {},
                                            pAds: Cs(e.pads) || {},
                                            mAds: Cs(e.mads) || {},
                                            rAds: Cs(e.rads) || {},
                                            lp: Cs(e.lp) || {},
                                            extsc: Cs(e.extsc) || {},
                                            evnts: Cs(e.evnts) || {},
                                            dp: Cs(e.dp) || {},
                                            adflw: Cs(e.adflw) || {},
                                            afgszf: Cs(e.afgszf) || {},
                                            fllc: Cs(e.fllc) || {},
                                            lotm: Cs(e.lotm) || {},
                                            t4rc: Cs(e.t4rc) || {},
                                            midroll_plus: Cs(e.midroll_plus) || {},
                                            gmky: Cs(e.gmky) || {},
                                            urlBlockExc: Cs(e.url_blck_exc) || {},
                                            sdk_wrp: Cs(e.sdk_wrp) || {},
                                            dbglg: Cs(e.dbglg) || {},
                                            extHosting: Cs(e.ext_hosting) || {},
                                            directTokenUse: Cs(e.dtu) || {}
                                        }, mE("7.7"), t = dn(Ft(i), e), mE("7.8"), t.afg_disabled = !1 === (null == (e = t.sdk) || null == (e = e.afg) ? void 0 : e.enabled), t.url = a, function() {
                                            O(this, r), void 0 !== Nu.afgEnabled && (t.afg_disabled = !Nu.afgEnabled), void 0 !== Nu.promoEnabled && (t.promo = t.promo || {}, t.promo = hE(hE({}, t.promo), {}, {
                                                rainbow: {
                                                    enabled: Nu.promoEnabled
                                                }
                                            }))
                                        }.bind(this), mE("7.9"), null != (e = t.pAds) && e.enabled && (t.preroll = !0), mE("7.10"), vE.send("gdfw.success", {
                                            message: "success"
                                        }), n(t)) : (i.failed = !0, e = DE[DE.length - 1], vE.send("gdfw.err", {
                                            message: "".concat(e, ": json error")
                                        }), n(i))
                                    }.bind(this)).catch(function(e) {
                                        O(this, o);
                                        var t = DE[DE.length - 1];
                                        vE.send("gdfw.err", {
                                            message: "".concat(t, ": ").concat(e.message || e)
                                        }), i.failed = !0, n(i)
                                    }.bind(this))
                                } catch (e) {
                                    var r = DE[DE.length - 1];
                                    vE.send("gdfw.err", {
                                        message: "".concat(r, ": global ").concat(e.message || e)
                                    }), i.failed = !0, n(i)
                                }
                            }.bind(this))
                        },
                        ME = (kE = d(I.mark(function e() {
                            var t;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, OE();
                                    case 2:
                                        return t = e.sent, e.abrupt("return", !(null == t || null == (t = t.sdkfw) || !t.enabled));
                                    case 4:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function() {
                            return kE.apply(this, arguments)
                        }),
                        PE = (xE = d(I.mark(function e() {
                            var t;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, OE();
                                    case 2:
                                        return t = e.sent, t = null == t || null == (t = t.diagnostic) || !t.close_ga, e.abrupt("return", t);
                                    case 5:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function() {
                            return xE.apply(this, arguments)
                        }),
                        jE = (AE = d(I.mark(function e() {
                            var t, r;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, OE();
                                    case 2:
                                        return r = e.sent, e.next = 5, ME();
                                    case 5:
                                        if (e.t0 = e.sent, !e.t0) {
                                            e.next = 8;
                                            break
                                        }
                                        e.t0 = !(null == r || null == (t = r.sdkfw) || !t.handshake);
                                    case 8:
                                        return e.abrupt("return", e.t0);
                                    case 9:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function() {
                            return AE.apply(this, arguments)
                        }),
                        UE = (wE = d(I.mark(function e() {
                            var t, r, n, o;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, OE();
                                    case 2:
                                        return n = e.sent, o = !(null == n || null == (o = n.extsc) || !o.enabled), e.abrupt("return", {
                                            enabled: o,
                                            path: o ? null == n || null == (t = n.extsc) ? void 0 : t.path : "",
                                            name: o ? null == n || null == (t = n.extsc) ? void 0 : t.name : "",
                                            ref: o ? null == n || null == (r = n.extsc) ? void 0 : r.ref : "",
                                            loadedFlag: !o || null == n || null == (r = n.extsc) ? void 0 : r.loadedFlag,
                                            loadedFlagCheck: !!o && !(null == n || null == (n = n.extsc) || !n.loadedFlagCheck)
                                        });
                                    case 5:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function() {
                            return wE.apply(this, arguments)
                        }),
                        $E = (_E = d(I.mark(function e() {
                            var t, r, n, o, i, a = this;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, UE();
                                    case 2:
                                        if ((t = e.sent).enabled) {
                                            e.next = 5;
                                            break
                                        }
                                        return e.abrupt("return");
                                    case 5:
                                        return r = t.path, n = t.name, o = t.ref, e.prev = 6, i = {}, e.next = 10, bn(r, n, {
                                            error_prefix: "Blocked:",
                                            exists: function() {
                                                return O(this, a), !!o && !!window[o]
                                            }.bind(this),
                                            attrs: i
                                        });
                                    case 10:
                                        e.next = 16;
                                        break;
                                    case 12:
                                        e.prev = 12, e.t0 = e.catch(6), console.log("extsc: error on external partner script load", n, e.t0), Tn("DEVELOPER_ERROR", e.t0, "warning");
                                    case 16:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, this, [
                                [6, 12]
                            ])
                        })), function() {
                            return _E.apply(this, arguments)
                        }),
                        BE = !1,
                        NE = !1,
                        FE = function() {
                            return new Promise((r = d(I.mark(function e(t, r) {
                                var n, o, i, a, s, u = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (BE) return e.abrupt("return", t(NE));
                                            e.next = 4;
                                            break;
                                        case 4:
                                            BE = !0;
                                        case 5:
                                            return e.next = 7, UE();
                                        case 7:
                                            if ((n = e.sent).enabled) {
                                                e.next = 10;
                                                break
                                            }
                                            return e.abrupt("return", t(!1));
                                        case 10:
                                            if (o = n.loadedFlag, (i = n.loadedFlagCheck) && !o) return e.abrupt("return", t(!1));
                                            e.next = 13;
                                            break;
                                        case 13:
                                            if (i) {
                                                e.next = 16;
                                                break
                                            }
                                            return NE = !0, e.abrupt("return", t(!0));
                                        case 16:
                                            a = !0, setTimeout(function() {
                                                O(this, u), a && t(!(BE = !(a = !1)))
                                            }.bind(this), 5e3), s = setInterval(function() {
                                                O(this, u), a && i && window[o] ? (NE = BE = !(a = !1), clearInterval(s), t(!0)) : a || clearInterval(s)
                                            }.bind(this), 100);
                                        case 19:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e, t) {
                                return r.apply(this, arguments)
                            }));
                            var r
                        },
                        bl = Is,
                        ml = vl,
                        hl = Qn,
                        GE = so,
                        zE = ho,
                        HE = xp,
                        ZE = dm,
                        Yc = Li,
                        KE = ml && ml.prototype,
                        rl = (bl({
                            target: "Promise",
                            proto: !0,
                            real: !0,
                            forced: !!ml && hl(function() {
                                KE.finally.call({
                                    then: function() {}
                                }, function() {})
                            })
                        }, {
                            finally: function(t) {
                                var r = HE(this, GE("Promise")),
                                    e = zE(t);
                                return this.then(e ? function(e) {
                                    return ZE(r, t()).then(function() {
                                        return e
                                    })
                                } : t, e ? function(e) {
                                    return ZE(r, t()).then(function() {
                                        throw e
                                    })
                                } : t)
                            }
                        }), zE(ml) && (zn = GE("Promise").prototype.finally, KE.finally !== zn) && Yc(KE, "finally", zn, {
                            unsafe: !0
                        }), "\t\n\v\f\r \u2028\u2029\ufeff"),
                        qE = to,
                        WE = Gu,
                        ca = rl,
                        VE = r("".replace),
                        YE = RegExp("^[" + ca + "]+"),
                        JE = RegExp("(^|[^" + ca + "])[" + ca + "]+$"),
                        Ro = {
                            start: gE(1),
                            end: gE(2),
                            trim: gE(3)
                        },
                        XE = Di.PROPER,
                        Si = Qn,
                        QE = rl,
                        eS = Ro.trim,
                        po = (Is({
                            target: "String",
                            proto: !0,
                            forced: (SE = "trim", Si(function() {
                                return !!QE.trim() || "" !== "".trim() || XE && QE.trim.name !== SE
                            }))
                        }, {
                            trim: function() {
                                return eS(this)
                            }
                        }), Is),
                        tS = Qa.find,
                        a = K0,
                        Zu = "find",
                        rS = !0,
                        nS = (Zu in [] && Array(1)[Zu](function() {
                            rS = !1
                        }), po({
                            target: "Array",
                            proto: !0,
                            forced: rS
                        }, {
                            find: function(e) {
                                return tS(this, e, 1 < arguments.length ? arguments[1] : void 0)
                            }
                        }), a(Zu), ho),
                        oS = Lr,
                        iS = go,
                        aS = Do.f,
                        bw = Kn,
                        _ = n,
                        S = r,
                        k = Eu,
                        sS = Ti,
                        tl = $s.f,
                        uS = Wo,
                        cS = og,
                        lS = Gu,
                        dS = sg,
                        R = Jc,
                        A = Li,
                        m = Qn,
                        fS = xo,
                        pS = Ri.enforce,
                        d_ = wp,
                        hS = x0,
                        mS = gl,
                        gS = oo("match"),
                        vS = _.RegExp,
                        bS = vS.prototype,
                        yS = _.SyntaxError,
                        _S = S(bS.exec),
                        wS = S("".charAt),
                        AS = S("".replace),
                        xS = S("".indexOf),
                        kS = S("".slice),
                        ES = /^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,
                        SS = /a/g,
                        RS = /a/g,
                        f_ = new vS(SS) !== SS,
                        DS = R.MISSED_STICKY,
                        TS = R.UNSUPPORTED_Y;
                    if (k("RegExp", bw && (!f_ || DS || hS || mS || m(function() {
                            return RS[gS] = !1, vS(SS) != SS || vS(RS) == RS || "/a/i" != vS(SS, "i")
                        })))) {
                        for (var OS = function(e, t) {
                                var r, n, o = uS(bS, this),
                                    i = cS(e),
                                    a = void 0 === t,
                                    s = [],
                                    u = e;
                                if (!o && i && a && e.constructor === OS) return e;
                                if ((i || uS(bS, e)) && (e = e.source, a) && (t = dS(u)), e = void 0 === e ? "" : lS(e), t = void 0 === t ? "" : lS(t), u = e, i = t = hS && "dotAll" in SS && (r = !!t && -1 < xS(t, "s")) ? AS(t, /s/g, "") : t, DS && "sticky" in SS && (n = !!t && -1 < xS(t, "y")) && TS && (t = AS(t, /y/g, "")), mS && (e = (a = function(e) {
                                        for (var t, r = e.length, n = 0, o = "", i = [], a = {}, s = !1, u = !1, c = 0, l = ""; n <= r; n++) {
                                            if ("\\" === (t = wS(e, n))) t += wS(e, ++n);
                                            else if ("]" === t) s = !1;
                                            else if (!s) switch (!0) {
                                                case "[" === t:
                                                    s = !0;
                                                    break;
                                                case "(" === t:
                                                    _S(ES, kS(e, n + 1)) && (n += 2, u = !0), o += t, c++;
                                                    continue;
                                                case ">" === t && u:
                                                    if ("" === l || fS(a, l)) throw new yS("Invalid capture group name");
                                                    a[l] = !0, u = !(i[i.length] = [l, c]), l = "";
                                                    continue
                                            }
                                            u ? l += t : o += t
                                        }
                                        return [o, i]
                                    }(e))[0], s = a[1]), a = vS(e, t), t = o ? this : bS, o = OS, iS && nS(t = t.constructor) && t !== o && oS(t = t.prototype) && t !== o.prototype && iS(a, t), o = a, (r || n || s.length) && (t = pS(o), r && (t.dotAll = !0, t.raw = OS(function(e) {
                                        for (var t, r = e.length, n = 0, o = "", i = !1; n <= r; n++) "\\" !== (t = wS(e, n)) ? i || "." !== t ? ("[" === t ? i = !0 : "]" === t && (i = !1), o += t) : o += "[\\s\\S]" : o += t + wS(e, ++n);
                                        return o
                                    }(e), i)), n && (t.sticky = !0), s.length) && (t.groups = s), e !== u) try {
                                    sS(o, "source", "" === u ? "(?:)" : u)
                                } catch (e) {}
                                return o
                            }, IS = tl(vS), CS = 0; IS.length > CS;) ! function(e, t, r) {
                            r in e || aS(e, r, {
                                configurable: !0,
                                get: function() {
                                    return t[r]
                                },
                                set: function(e) {
                                    t[r] = e
                                }
                            })
                        }(OS, vS, IS[CS++]);
                        (bS.constructor = OS).prototype = bS, A(_, "RegExp", OS, {
                            constructor: !0
                        })
                    }
                    d_("RegExp");
                    var p_ = Is,
                        b = qn,
                        LS = Es,
                        b_ = Zi,
                        MS = r([].join),
                        PS = (p_({
                            target: "Array",
                            proto: !0,
                            forced: b != Object || !b_("join", ",")
                        }, {
                            join: function(e) {
                                return MS(LS(this), void 0 === e ? "," : e)
                            }
                        }), Qa.map),
                        jS = (Is({
                            target: "Array",
                            proto: !0,
                            forced: !fc("map")
                        }, {
                            map: function(e) {
                                return PS(this, e, 1 < arguments.length ? arguments[1] : void 0)
                            }
                        }), Kn),
                        y_ = r,
                        US = e,
                        __ = Qn,
                        $S = Pu,
                        BS = cu,
                        NS = Ps,
                        FS = ro,
                        GS = qn,
                        zS = Object.assign,
                        HS = Object.defineProperty,
                        ZS = y_([].concat),
                        w_ = !zS || __(function() {
                            var e, t, r, n;
                            return jS && 1 !== zS({
                                b: 1
                            }, zS(HS({}, "a", {
                                enumerable: !0,
                                get: function() {
                                    HS(this, "b", {
                                        value: 3,
                                        enumerable: !1
                                    })
                                }
                            }), {
                                b: 2
                            })).b || (t = {}, n = "abcdefghijklmnopqrst", (e = {})[r = Symbol()] = 7, n.split("").forEach(function(e) {
                                t[e] = e
                            }), 7 != zS({}, e)[r]) || $S(zS({}, t)).join("") != n
                        }) ? function(e, t) {
                            for (var r = FS(e), n = arguments.length, o = 1, i = BS.f, a = NS.f; o < n;)
                                for (var s, u = GS(arguments[o++]), c = i ? ZS($S(u), i(u)) : $S(u), l = c.length, d = 0; d < l;) s = c[d++], jS && !US(a, u, s) || (r[s] = u[s]);
                            return r
                        } : zS;
                    Is({
                        target: "Object",
                        stat: !0,
                        arity: 2,
                        forced: Object.assign !== w_
                    }, {
                        assign: w_
                    });

                    function KS(e) {
                        for (var t, r = [], n = fR(dR(pR(e), rR, "."), "."), o = 0; o < n.length; o++) t = n[o], lR(r, iR(tR, t) ? "xn--" + function(e) {
                            var t, r = [],
                                n = (e = function(e) {
                                    for (var t = [], r = 0, n = e.length; r < n;) {
                                        var o, i = uR(e, r++);
                                        55296 <= i && i <= 56319 && r < n ? 56320 == (64512 & (o = uR(e, r++))) ? lR(t, ((1023 & i) << 10) + (1023 & o) + 65536) : (lR(t, i), r--) : lR(t, i)
                                    }
                                    return t
                                }(e)).length,
                                o = 128,
                                i = 0,
                                a = 72;
                            for (l = 0; l < e.length; l++)(t = e[l]) < 128 && lR(r, sR(t));
                            var s = r.length,
                                u = s;
                            for (s && lR(r, "-"); u < n;) {
                                for (var c = eR, l = 0; l < e.length; l++)(t = e[l]) >= o && t < c && (c = t);
                                var d = u + 1;
                                if (c - o > aR((eR - i) / d)) throw oR(nR);
                                for (i += (c - o) * d, o = c, l = 0; l < e.length; l++) {
                                    if ((t = e[l]) < o && ++i > eR) throw oR(nR);
                                    if (t == o) {
                                        for (var f = i, p = 36;;) {
                                            var h = p <= a ? 1 : a + 26 <= p ? 26 : p - a;
                                            if (f < h) break;
                                            var m = f - h,
                                                g = 36 - h;
                                            lR(r, sR(hR(h + m % g))), f = aR(m / g), p += 36
                                        }
                                        lR(r, sR(hR(f))), a = mR(i, d, u == s), i = 0, u++
                                    }
                                }
                                i++, o++
                            }
                            return cR(r, "")
                        }(t) : t);
                        return cR(r, ".")
                    }

                    function qS(e) {
                        var t, r, n, o;
                        if ("number" == typeof e) {
                            for (t = [], r = 0; r < 4; r++) zR(t, e % 256), e = OR(e / 256);
                            return MR(t, ".")
                        }
                        if ("object" != typeof e) return e;
                        for (t = "", n = function(e) {
                                for (var t = null, r = 1, n = null, o = 0, i = 0; i < 8; i++) 0 !== e[i] ? (r < o && (t = n, r = o), n = null, o = 0) : (null === n && (n = i), ++o);
                                return r < o && (t = n, r = o), t
                            }(e), r = 0; r < 8; r++) o && 0 === e[r] || (o = o && !1, n === r ? (t += r ? ":" : "::", o = !0) : (t += PR(e[r], 16), r < 7 && (t += ":")));
                        return "[" + t + "]"
                    }

                    function WS(e, t) {
                        var r = wR(e, 0);
                        return 32 < r && r < 127 && !bR(t, e) ? e : encodeURIComponent(e)
                    }

                    function VS(e, t) {
                        return 2 == e.length && LR(qR, CR(e, 0)) && (":" == (e = CR(e, 1)) || !t && "|" == e)
                    }

                    function YS(e) {
                        return 1 < e.length && VS(FR(e, 0, 2)) && (2 == e.length || "/" === (e = CR(e, 2)) || "\\" === e || "?" === e || "#" === e)
                    }

                    function JS(e, t, r) {
                        var n, o, e = AR(e);
                        if (t) {
                            if (o = this.parse(e)) throw DR(o);
                            this.searchParams = null
                        } else {
                            if (void 0 !== r && (n = new JS(r, !0)), o = this.parse(e, null, n)) throw DR(o);
                            (t = RR(new SR)).bindURL(this), this.searchParams = t
                        }
                    }

                    function XS(e, t) {
                        return {
                            get: function() {
                                return ER(this)[e]()
                            },
                            set: t && function(e) {
                                return ER(this)[t](e)
                            },
                            configurable: !0,
                            enumerable: !0
                        }
                    }
                    var QS, l_ = r,
                        eR = 2147483647,
                        tR = /[^\0-\u007E]/,
                        rR = /[.\u3002\uFF0E\uFF61]/g,
                        nR = "Overflow: input needs wider integers to process",
                        oR = RangeError,
                        iR = l_(rR.exec),
                        aR = Math.floor,
                        sR = String.fromCharCode,
                        uR = l_("".charCodeAt),
                        cR = l_([].join),
                        lR = l_([].push),
                        dR = l_("".replace),
                        fR = l_("".split),
                        pR = l_("".toLowerCase),
                        hR = function(e) {
                            return e + 22 + 75 * (e < 26)
                        },
                        mR = function(e, t, r) {
                            var n = 0;
                            for (e = r ? aR(e / 700) : e >> 1, e += aR(e / t); 455 < e;) e = aR(e / 35), n += 36;
                            return aR(n + 36 * e / (e + 38))
                        },
                        x = Is,
                        gR = Kn,
                        ia = yl,
                        I_ = n,
                        C_ = ji,
                        L_ = r,
                        F_ = Li,
                        t = ec,
                        vR = Ap,
                        bR = xo,
                        mw = w_,
                        yR = vc,
                        _R = Qu,
                        wR = Rl.codeAt,
                        AR = Gu,
                        gw = rc,
                        xR = kp,
                        D = o,
                        kw = Ri,
                        kR = kw.set,
                        ER = kw.getterFor("URL"),
                        SR = D.URLSearchParams,
                        RR = D.getState,
                        Ew = I_.URL,
                        DR = I_.TypeError,
                        TR = I_.parseInt,
                        OR = Math.floor,
                        IR = Math.pow,
                        CR = L_("".charAt),
                        LR = L_(/./.exec),
                        MR = L_([].join),
                        PR = L_(1..toString),
                        jR = L_([].pop),
                        UR = L_([].push),
                        $R = L_("".replace),
                        BR = L_([].shift),
                        NR = L_("".split),
                        FR = L_("".slice),
                        GR = L_("".toLowerCase),
                        zR = L_([].unshift),
                        HR = "Invalid scheme",
                        ZR = "Invalid host",
                        KR = "Invalid port",
                        qR = /[a-z]/i,
                        WR = /[\d+-.a-z]/i,
                        VR = /\d/,
                        YR = /^0x/i,
                        JR = /^[0-7]+$/,
                        XR = /^\d+$/,
                        QR = /^[\da-f]+$/i,
                        e9 = /[\0\t\n\r #%/:<>?@[\\\]^|]/,
                        t9 = /[\0\t\n\r #/:<>?@[\\\]^|]/,
                        r9 = /^[\u0000-\u0020]+/,
                        n9 = /(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,
                        o9 = /[\t\n\r]/g,
                        i9 = {},
                        a9 = mw({}, i9, {
                            " ": 1,
                            '"': 1,
                            "<": 1,
                            ">": 1,
                            "`": 1
                        }),
                        s9 = mw({}, a9, {
                            "#": 1,
                            "?": 1,
                            "{": 1,
                            "}": 1
                        }),
                        u9 = mw({}, s9, {
                            "/": 1,
                            ":": 1,
                            ";": 1,
                            "=": 1,
                            "@": 1,
                            "[": 1,
                            "\\": 1,
                            "]": 1,
                            "^": 1,
                            "|": 1
                        }),
                        c9 = {
                            ftp: 21,
                            file: null,
                            http: 80,
                            https: 443,
                            ws: 80,
                            wss: 443
                        },
                        l9 = {},
                        d9 = {},
                        f9 = {},
                        p9 = {},
                        h9 = {},
                        m9 = {},
                        g9 = {},
                        v9 = {},
                        b9 = {},
                        y9 = {},
                        _9 = {},
                        w9 = {},
                        A9 = {},
                        x9 = {},
                        k9 = {},
                        E9 = {},
                        S9 = {},
                        R9 = {},
                        D9 = {},
                        T9 = {},
                        O9 = {},
                        I9 = (JS.prototype = {
                            type: "URL",
                            parse: function(e, t, r) {
                                var n, o, i, a, s = this,
                                    u = t || l9,
                                    c = 0,
                                    l = "",
                                    d = !1,
                                    f = !1,
                                    p = !1;
                                for (e = AR(e), t || (s.scheme = "", s.username = "", s.password = "", s.host = null, s.port = null, s.path = [], s.query = null, s.fragment = null, s.cannotBeABaseURL = !1, e = $R(e, r9, ""), e = $R(e, n9, "$1")), e = $R(e, o9, ""), n = yR(e); c <= n.length;) {
                                    switch (o = n[c], u) {
                                        case l9:
                                            if (!o || !LR(qR, o)) {
                                                if (t) return HR;
                                                u = f9;
                                                continue
                                            }
                                            l += GR(o), u = d9;
                                            break;
                                        case d9:
                                            if (o && (LR(WR, o) || "+" == o || "-" == o || "." == o)) l += GR(o);
                                            else {
                                                if (":" != o) {
                                                    if (t) return HR;
                                                    l = "", u = f9, c = 0;
                                                    continue
                                                }
                                                if (t && (s.isSpecial() != bR(c9, l) || "file" == l && (s.includesCredentials() || null !== s.port) || "file" == s.scheme && !s.host)) return;
                                                if (s.scheme = l, t) return void(s.isSpecial() && c9[s.scheme] == s.port && (s.port = null));
                                                l = "", "file" == s.scheme ? u = x9 : s.isSpecial() && r && r.scheme == s.scheme ? u = p9 : s.isSpecial() ? u = v9 : "/" == n[c + 1] ? (u = h9, c++) : (s.cannotBeABaseURL = !0, UR(s.path, ""), u = D9)
                                            }
                                            break;
                                        case f9:
                                            if (!r || r.cannotBeABaseURL && "#" != o) return HR;
                                            if (r.cannotBeABaseURL && "#" == o) {
                                                s.scheme = r.scheme, s.path = _R(r.path), s.query = r.query, s.fragment = "", s.cannotBeABaseURL = !0, u = O9;
                                                break
                                            }
                                            u = "file" == r.scheme ? x9 : m9;
                                            continue;
                                        case p9:
                                            if ("/" != o || "/" != n[c + 1]) {
                                                u = m9;
                                                continue
                                            }
                                            u = b9, c++;
                                            break;
                                        case h9:
                                            if ("/" == o) {
                                                u = y9;
                                                break
                                            }
                                            u = R9;
                                            continue;
                                        case m9:
                                            if (s.scheme = r.scheme, o == QS) s.username = r.username, s.password = r.password, s.host = r.host, s.port = r.port, s.path = _R(r.path), s.query = r.query;
                                            else if ("/" == o || "\\" == o && s.isSpecial()) u = g9;
                                            else if ("?" == o) s.username = r.username, s.password = r.password, s.host = r.host, s.port = r.port, s.path = _R(r.path), s.query = "", u = T9;
                                            else {
                                                if ("#" != o) {
                                                    s.username = r.username, s.password = r.password, s.host = r.host, s.port = r.port, s.path = _R(r.path), s.path.length--, u = R9;
                                                    continue
                                                }
                                                s.username = r.username, s.password = r.password, s.host = r.host, s.port = r.port, s.path = _R(r.path), s.query = r.query, s.fragment = "", u = O9
                                            }
                                            break;
                                        case g9:
                                            if (!s.isSpecial() || "/" != o && "\\" != o) {
                                                if ("/" != o) {
                                                    s.username = r.username, s.password = r.password, s.host = r.host, s.port = r.port, u = R9;
                                                    continue
                                                }
                                                u = y9
                                            } else u = b9;
                                            break;
                                        case v9:
                                            if (u = b9, "/" != o || "/" != CR(l, c + 1)) continue;
                                            c++;
                                            break;
                                        case b9:
                                            if ("/" == o || "\\" == o) break;
                                            u = y9;
                                            continue;
                                        case y9:
                                            if ("@" == o) {
                                                d && (l = "%40" + l);
                                                for (var d = !0, h = yR(l), m = 0; m < h.length; m++) {
                                                    var g = h[m];
                                                    ":" != g || p ? (g = WS(g, u9), p ? s.password += g : s.username += g) : p = !0
                                                }
                                                l = ""
                                            } else if (o == QS || "/" == o || "?" == o || "#" == o || "\\" == o && s.isSpecial()) {
                                                if (d && "" == l) return "Invalid authority";
                                                c -= yR(l).length + 1, l = "", u = _9
                                            } else l += o;
                                            break;
                                        case _9:
                                        case w9:
                                            if (t && "file" == s.scheme) {
                                                u = E9;
                                                continue
                                            }
                                            if (":" != o || f) {
                                                if (o == QS || "/" == o || "?" == o || "#" == o || "\\" == o && s.isSpecial()) {
                                                    if (s.isSpecial() && "" == l) return ZR;
                                                    if (t && "" == l && (s.includesCredentials() || null !== s.port)) return;
                                                    if (i = s.parseHost(l)) return i;
                                                    if (l = "", u = S9, t) return;
                                                    continue
                                                }
                                                "[" == o ? f = !0 : "]" == o && (f = !1), l += o
                                            } else {
                                                if ("" == l) return ZR;
                                                if (i = s.parseHost(l)) return i;
                                                if (l = "", u = A9, t == w9) return
                                            }
                                            break;
                                        case A9:
                                            if (!LR(VR, o)) {
                                                if (o == QS || "/" == o || "?" == o || "#" == o || "\\" == o && s.isSpecial() || t) {
                                                    if ("" != l) {
                                                        var v = TR(l, 10);
                                                        if (65535 < v) return KR;
                                                        s.port = s.isSpecial() && v === c9[s.scheme] ? null : v, l = ""
                                                    }
                                                    if (t) return;
                                                    u = S9;
                                                    continue
                                                }
                                                return KR
                                            }
                                            l += o;
                                            break;
                                        case x9:
                                            if (s.scheme = "file", "/" == o || "\\" == o) u = k9;
                                            else {
                                                if (!r || "file" != r.scheme) {
                                                    u = R9;
                                                    continue
                                                }
                                                if (o == QS) s.host = r.host, s.path = _R(r.path), s.query = r.query;
                                                else if ("?" == o) s.host = r.host, s.path = _R(r.path), s.query = "", u = T9;
                                                else {
                                                    if ("#" != o) {
                                                        YS(MR(_R(n, c), "")) || (s.host = r.host, s.path = _R(r.path), s.shortenPath()), u = R9;
                                                        continue
                                                    }
                                                    s.host = r.host, s.path = _R(r.path), s.query = r.query, s.fragment = "", u = O9
                                                }
                                            }
                                            break;
                                        case k9:
                                            if ("/" == o || "\\" == o) {
                                                u = E9;
                                                break
                                            }
                                            r && "file" == r.scheme && !YS(MR(_R(n, c), "")) && (VS(r.path[0], !0) ? UR(s.path, r.path[0]) : s.host = r.host), u = R9;
                                            continue;
                                        case E9:
                                            if (o == QS || "/" == o || "\\" == o || "?" == o || "#" == o) {
                                                if (!t && VS(l)) u = R9;
                                                else {
                                                    if ("" == l) {
                                                        if (s.host = "", t) return
                                                    } else {
                                                        if (i = s.parseHost(l)) return i;
                                                        if ("localhost" == s.host && (s.host = ""), t) return;
                                                        l = ""
                                                    }
                                                    u = S9
                                                }
                                                continue
                                            }
                                            l += o;
                                            break;
                                        case S9:
                                            if (s.isSpecial()) {
                                                if (u = R9, "/" != o && "\\" != o) continue
                                            } else if (t || "?" != o)
                                                if (t || "#" != o) {
                                                    if (o != QS && (u = R9, "/" != o)) continue
                                                } else s.fragment = "", u = O9;
                                            else s.query = "", u = T9;
                                            break;
                                        case R9:
                                            if (o == QS || "/" == o || "\\" == o && s.isSpecial() || !t && ("?" == o || "#" == o)) {
                                                if (".." === (v = GR(l)) || "%2e." === v || ".%2e" === v || "%2e%2e" === v ? (s.shortenPath(), "/" == o || "\\" == o && s.isSpecial() || UR(s.path, "")) : "." === (a = l) || "%2e" === GR(a) ? "/" == o || "\\" == o && s.isSpecial() || UR(s.path, "") : ("file" == s.scheme && !s.path.length && VS(l) && (s.host && (s.host = ""), l = CR(l, 0) + ":"), UR(s.path, l)), l = "", "file" == s.scheme && (o == QS || "?" == o || "#" == o))
                                                    for (; 1 < s.path.length && "" === s.path[0];) BR(s.path);
                                                "?" == o ? (s.query = "", u = T9) : "#" == o && (s.fragment = "", u = O9)
                                            } else l += WS(o, s9);
                                            break;
                                        case D9:
                                            "?" == o ? (s.query = "", u = T9) : "#" == o ? (s.fragment = "", u = O9) : o != QS && (s.path[0] += WS(o, i9));
                                            break;
                                        case T9:
                                            t || "#" != o ? o != QS && ("'" == o && s.isSpecial() ? s.query += "%27" : s.query += "#" == o ? "%23" : WS(o, i9)) : (s.fragment = "", u = O9);
                                            break;
                                        case O9:
                                            o != QS && (s.fragment += WS(o, a9))
                                    }
                                    c++
                                }
                            },
                            parseHost: function(e) {
                                var t, r, n;
                                if ("[" == CR(e, 0)) return "]" == CR(e, e.length - 1) && (t = function(e) {
                                    function t() {
                                        return CR(e, f)
                                    }
                                    var r, n, o, i, a, s, u, c = [0, 0, 0, 0, 0, 0, 0, 0],
                                        l = 0,
                                        d = null,
                                        f = 0;
                                    if (":" == t()) {
                                        if (":" != CR(e, 1)) return;
                                        f += 2, d = ++l
                                    }
                                    for (; t();) {
                                        if (8 == l) return;
                                        if (":" != t()) {
                                            for (r = n = 0; n < 4 && LR(QR, t());) r = 16 * r + TR(t(), 16), f++, n++;
                                            if ("." == t()) {
                                                if (0 == n) return;
                                                if (f -= n, 6 < l) return;
                                                for (o = 0; t();) {
                                                    if (i = null, 0 < o) {
                                                        if (!("." == t() && o < 4)) return;
                                                        f++
                                                    }
                                                    if (!LR(VR, t())) return;
                                                    for (; LR(VR, t());) {
                                                        if (a = TR(t(), 10), null === i) i = a;
                                                        else {
                                                            if (0 == i) return;
                                                            i = 10 * i + a
                                                        }
                                                        if (255 < i) return;
                                                        f++
                                                    }
                                                    c[l] = 256 * c[l] + i, 2 != ++o && 4 != o || l++
                                                }
                                                if (4 != o) return;
                                                break
                                            }
                                            if (":" == t()) {
                                                if (f++, !t()) return
                                            } else if (t()) return;
                                            c[l++] = r
                                        } else {
                                            if (null !== d) return;
                                            f++, d = ++l
                                        }
                                    }
                                    if (null !== d)
                                        for (s = l - d, l = 7; 0 != l && 0 < s;) u = c[l], c[l--] = c[d + s - 1], c[d + --s] = u;
                                    else if (8 != l) return;
                                    return c
                                }(FR(e, 1, -1))) ? void(this.host = t) : ZR;
                                if (this.isSpecial()) return e = KS(e), LR(e9, e) || null === (t = function(e) {
                                    var t, r, n, o, i, a, s, u = NR(e, ".");
                                    if (u.length && "" == u[u.length - 1] && u.length--, 4 < (t = u.length)) return e;
                                    for (r = [], n = 0; n < t; n++) {
                                        if ("" == (o = u[n])) return e;
                                        if (i = 10, 1 < o.length && "0" == CR(o, 0) && (i = LR(YR, o) ? 16 : 8, o = FR(o, 8 == i ? 1 : 2)), "" === o) a = 0;
                                        else {
                                            if (!LR(10 == i ? XR : 8 == i ? JR : QR, o)) return e;
                                            a = TR(o, i)
                                        }
                                        UR(r, a)
                                    }
                                    for (n = 0; n < t; n++)
                                        if (a = r[n], n == t - 1) {
                                            if (a >= IR(256, 5 - t)) return null
                                        } else if (255 < a) return null;
                                    for (s = jR(r), n = 0; n < r.length; n++) s += r[n] * IR(256, 3 - n);
                                    return s
                                }(e)) ? ZR : void(this.host = t);
                                if (LR(t9, e)) return ZR;
                                for (t = "", r = yR(e), n = 0; n < r.length; n++) t += WS(r[n], i9);
                                this.host = t
                            },
                            cannotHaveUsernamePasswordPort: function() {
                                return !this.host || this.cannotBeABaseURL || "file" == this.scheme
                            },
                            includesCredentials: function() {
                                return "" != this.username || "" != this.password
                            },
                            isSpecial: function() {
                                return bR(c9, this.scheme)
                            },
                            shortenPath: function() {
                                var e = this.path,
                                    t = e.length;
                                !t || "file" == this.scheme && 1 == t && VS(e[0], !0) || e.length--
                            },
                            serialize: function() {
                                var e = this,
                                    t = e.scheme,
                                    r = e.username,
                                    n = e.password,
                                    o = e.host,
                                    i = e.port,
                                    a = e.path,
                                    s = e.query,
                                    u = e.fragment,
                                    c = t + ":";
                                return null !== o ? (c += "//", e.includesCredentials() && (c += r + (n ? ":" + n : "") + "@"), c += qS(o), null !== i && (c += ":" + i)) : "file" == t && (c += "//"), c += e.cannotBeABaseURL ? a[0] : a.length ? "/" + MR(a, "/") : "", null !== s && (c += "?" + s), null !== u && (c += "#" + u), c
                            },
                            setHref: function(e) {
                                e = this.parse(e);
                                if (e) throw DR(e);
                                this.searchParams.update()
                            },
                            getOrigin: function() {
                                var e = this.scheme,
                                    t = this.port;
                                if ("blob" == e) try {
                                    return new I9(e.path[0]).origin
                                } catch (e) {
                                    return "null"
                                }
                                return "file" != e && this.isSpecial() ? e + "://" + qS(this.host) + (null !== t ? ":" + t : "") : "null"
                            },
                            getProtocol: function() {
                                return this.scheme + ":"
                            },
                            setProtocol: function(e) {
                                this.parse(AR(e) + ":", l9)
                            },
                            getUsername: function() {
                                return this.username
                            },
                            setUsername: function(e) {
                                var t = yR(AR(e));
                                if (!this.cannotHaveUsernamePasswordPort()) {
                                    this.username = "";
                                    for (var r = 0; r < t.length; r++) this.username += WS(t[r], u9)
                                }
                            },
                            getPassword: function() {
                                return this.password
                            },
                            setPassword: function(e) {
                                var t = yR(AR(e));
                                if (!this.cannotHaveUsernamePasswordPort()) {
                                    this.password = "";
                                    for (var r = 0; r < t.length; r++) this.password += WS(t[r], u9)
                                }
                            },
                            getHost: function() {
                                var e = this.host,
                                    t = this.port;
                                return null === e ? "" : null === t ? qS(e) : qS(e) + ":" + t
                            },
                            setHost: function(e) {
                                this.cannotBeABaseURL || this.parse(e, _9)
                            },
                            getHostname: function() {
                                var e = this.host;
                                return null === e ? "" : qS(e)
                            },
                            setHostname: function(e) {
                                this.cannotBeABaseURL || this.parse(e, w9)
                            },
                            getPort: function() {
                                var e = this.port;
                                return null === e ? "" : AR(e)
                            },
                            setPort: function(e) {
                                this.cannotHaveUsernamePasswordPort() || ("" == (e = AR(e)) ? this.port = null : this.parse(e, A9))
                            },
                            getPathname: function() {
                                var e = this.path;
                                return this.cannotBeABaseURL ? e[0] : e.length ? "/" + MR(e, "/") : ""
                            },
                            setPathname: function(e) {
                                this.cannotBeABaseURL || (this.path = [], this.parse(e, S9))
                            },
                            getSearch: function() {
                                var e = this.query;
                                return e ? "?" + e : ""
                            },
                            setSearch: function(e) {
                                "" == (e = AR(e)) ? this.query = null: ("?" == CR(e, 0) && (e = FR(e, 1)), this.query = "", this.parse(e, T9)), this.searchParams.update()
                            },
                            getSearchParams: function() {
                                return this.searchParams.facade
                            },
                            getHash: function() {
                                var e = this.fragment;
                                return e ? "#" + e : ""
                            },
                            setHash: function(e) {
                                "" != (e = AR(e)) ? ("#" == CR(e, 0) && (e = FR(e, 1)), this.fragment = "", this.parse(e, O9)) : this.fragment = null
                            },
                            update: function() {
                                this.query = this.searchParams.serialize() || null
                            }
                        }, function(e) {
                            var t = vR(this, C9),
                                r = 1 < xR(arguments.length, 1) ? arguments[1] : void 0,
                                e = kR(t, new JS(e, !1, r));
                            gR || (t.href = e.serialize(), t.origin = e.getOrigin(), t.protocol = e.getProtocol(), t.username = e.getUsername(), t.password = e.getPassword(), t.host = e.getHost(), t.hostname = e.getHostname(), t.port = e.getPort(), t.pathname = e.getPathname(), t.search = e.getSearch(), t.searchParams = e.getSearchParams(), t.hash = e.getHash())
                        }),
                        C9 = I9.prototype,
                        L9 = (gR && (t(C9, "href", XS("serialize", "setHref")), t(C9, "origin", XS("getOrigin")), t(C9, "protocol", XS("getProtocol", "setProtocol")), t(C9, "username", XS("getUsername", "setUsername")), t(C9, "password", XS("getPassword", "setPassword")), t(C9, "host", XS("getHost", "setHost")), t(C9, "hostname", XS("getHostname", "setHostname")), t(C9, "port", XS("getPort", "setPort")), t(C9, "pathname", XS("getPathname", "setPathname")), t(C9, "search", XS("getSearch", "setSearch")), t(C9, "searchParams", XS("getSearchParams")), t(C9, "hash", XS("getHash", "setHash"))), F_(C9, "toJSON", function() {
                            return ER(this).serialize()
                        }, {
                            enumerable: !0
                        }), F_(C9, "toString", function() {
                            return ER(this).serialize()
                        }, {
                            enumerable: !0
                        }), Ew && (Sw = Ew.createObjectURL, Lw = Ew.revokeObjectURL, Sw && F_(I9, "createObjectURL", C_(Sw, Ew)), Lw) && F_(I9, "revokeObjectURL", C_(Lw, Ew)), gw(I9, "URL"), x({
                            global: !0,
                            constructor: !0,
                            forced: !ia,
                            sham: !gR
                        }, {
                            URL: I9
                        }), pe(z9, [{
                            key: "_getFakeCustomParams",
                            value: function() {
                                var e, t = {
                                        _vid: ["bla_bla1", "bla_bla2", "bla_bla3"],
                                        _1ld: ["1ld_1", "1ld_2", "1ld_3", "1ld_4"],
                                        _1lp: ["1lp_1", "1lp_2"]
                                    },
                                    r = {};
                                for (e in t) {
                                    var n = t[e];
                                    r[e] = n[Math.floor(Math.random() * n.length)]
                                }
                                return r
                            }
                        }, {
                            key: "checkCustomParams",
                            value: function() {
                                var e = this;
                                try {
                                    var t, r = {},
                                        n = this.gameData.diagnostic && this.gameData.diagnostic.cp && this.gameData.diagnostic.cp.enabled,
                                        o = new ce(location.href, !0);
                                    for (t in o.query) r[t] = o.query[t];
                                    return 0 < Object.keys(r).filter(function(t) {
                                        var r = this;
                                        return O(this, e), this.customParamKeys.some(function(e) {
                                            return O(this, r), e === t
                                        }.bind(this))
                                    }.bind(this)).length || n ? (console.log("custom-params", r, n), r) : void console.log("custom-params, none")
                                } catch (e) {
                                    console.log("_checkCustomParams.Error", e)
                                }
                            }
                        }]), z9),
                        M9 = (pe(G9, [{
                            key: "show",
                            value: function() {
                                this.adResumeButton.style.display = "block", this.adResumeButtonOverlay.style.display = "block"
                            }
                        }, {
                            key: "hide",
                            value: function() {
                                this.adResumeButton.style.display = "none", this.adResumeButtonOverlay.style.display = "none"
                            }
                        }, {
                            key: "add",
                            value: function() {
                                var e = this;
                                try {
                                    var t = document.createElement("div"),
                                        r = ((this.adResumeButton = t).id = "gd__resume__button", t.setAttribute("title", "Resume"), this.addStyles(), t.classList.add("gd__resume__button"), t.addEventListener("click", function() {
                                            O(this, e), this.onResume()
                                        }.bind(this)), this.adContainer.appendChild(t), document.createElement("div"));
                                    (this.adResumeButtonOverlay = r).id = "gd__resume__button__overlay", r.classList.add("gd__resume__button__overlay"), this.adContainer.appendChild(r)
                                } catch (e) {
                                    console.log("Resume button add error", e)
                                }
                            }
                        }, {
                            key: "addStyles",
                            value: function() {
                                var e = document.body || document.getElementsByTagName("body")[0];
                                this.addStylesheet("gd__resume__button__style", e, '\n                        .gd__resume__button{\n                          background-image: url("https://img.gamedistribution.com/play-black.svg");\n                          background-color:white;                      \n                          width: 120px;\n                          height: 120px;\n                          position: absolute;\n                          display: none;\n                          z-index: 2000;\n                          cursor: pointer;\n                          top: calc(50% - 60px);\n                          left: calc(50% - 60px);\n                          margin: 0;\n                          border-radius: 50%;\n                          border: 2px solid white;\n                          animation: play-button 1s ease-in-out infinite alternate;\n                          -webkit-animation: play-button 1s ease-in-out infinite alternate;\n                        }\n    \n                        .gd__resume__button__overlay {\n                          position: fixed;\n                          display: none;\n                          width: 100%;\n                          height: 100%;\n                          top: 0;\n                          left: 0;\n                          right: 0;\n                          bottom: 0;\n                          background-color: rgba(0,0,0,0.5);\n                          z-index: 1999;\n                          cursor: pointer;\n                        }\n                        @keyframes play-button {\n                          0% {\n                              transform: scale(1.0);\n                              -webkit-transform: scale(1.0);\n                          }\n                          100% {\n                              transform: scale(1.1);\n                              -webkit-transform: scale(1.1);\n                          }\n                      }\n                        .gd__resume__button:hover{\n                          filter: invert(100%) sepia(51%) saturate(0%) hue-rotate(346deg) brightness(104%) contrast(100%);                      \n                        }\n                        ')
                            }
                        }, {
                            key: "addStylesheet",
                            value: function(e, t, r) {
                                var n;
                                document.getElementById(e) || ((n = document.createElement("style")).type = "text/css", n.id = e, n.styleSheet ? n.styleSheet.cssText = r : n.appendChild(document.createTextNode(r)), t.appendChild(n))
                            }
                        }]), G9),
                        P9 = (pe(F9, [{
                            key: "show",
                            value: function() {
                                this.rewardLabel.style.display = "block"
                            }
                        }, {
                            key: "hide",
                            value: function() {
                                this.rewardLabel.style.display = "none"
                            }
                        }, {
                            key: "add",
                            value: function() {
                                try {
                                    var e = document.createElement("div"),
                                        t = (this.rewardLabel = e, document.createElement("span"));
                                    t.innerText = "To receive the reward, please do not skip the ad", this.addStyles(), e.classList.add("gd__reward__label"), t.classList.add("gd__reward__span"), this.rewardLabel.appendChild(t), this.adContainer.appendChild(e)
                                } catch (e) {
                                    console.log(e)
                                }
                            }
                        }, {
                            key: "addStyles",
                            value: function() {
                                var e = document.body || document.getElementsByTagName("body")[0];
                                this.addStylesheet("gd__reward__label__style", e, "\n                          .gd__reward__label{\n                            background-color:black;                      \n                            width: 160px;\n                            // height: 35px;\n                            position: absolute;\n                            display: none;\n                            z-index: 2000;\n                            cursor: pointer;\n                            bottom: 40px;\n                            left: 10px;\n                            margin: 0;\n                            border-radius: 5px;\n                            border: .5px solid gray;\n                            text-align: center;\n                          }\n                          .gd__reward__label:hover{\n                            filter: invert(100%) sepia(51%) saturate(0%) hue-rotate(346deg) brightness(104%) contrast(100%);                      \n                          }\n                          .gd__reward__span{\n                            color: white;\n                            font-size: 12px;\n                            padding-left: 5px;\n                            font-family: Verdana, Arial, Helvetica, sans-serif;\n                            text-align: center;\n                          }\n                    ")
                            }
                        }, {
                            key: "addStylesheet",
                            value: function(e, t, r) {
                                var n;
                                document.getElementById(e) || ((n = document.createElement("style")).type = "text/css", n.id = e, n.styleSheet ? n.styleSheet.cssText = r : n.appendChild(document.createTextNode(r)), t.appendChild(n))
                            }
                        }]), F9),
                        j9 = (pe(N9, [{
                            key: "show",
                            value: function() {
                                this.audioLabel.style.display = "block"
                            }
                        }, {
                            key: "hide",
                            value: function() {
                                this.audioLabel.style.display = "none"
                            }
                        }, {
                            key: "mute",
                            value: function() {
                                document.getElementById("game").contentWindow.postMessage("mute", "*")
                            }
                        }, {
                            key: "unmute",
                            value: function() {
                                document.getElementById("game").contentWindow.postMessage("unmute", "*")
                            }
                        }, {
                            key: "add",
                            value: function() {
                                try {
                                    var e = document.createElement("div"),
                                        t = (this.audioLabel = e, document.createElement("span")),
                                        r = (t.innerText = "Audio Ad is Playing", document.createElement("span"));
                                    r.innerHTML = "&#9432;", this.addStyles(), e.classList.add("gd__audio__label"), t.classList.add("gd__audio__span"), r.classList.add("gd__audio__span"), this.audioLabel.appendChild(r), this.audioLabel.appendChild(t), this.adContainer.appendChild(e)
                                } catch (e) {
                                    console.log(e)
                                }
                            }
                        }, {
                            key: "addStyles",
                            value: function() {
                                var e = document.body || document.getElementsByTagName("body")[0];
                                this.addStylesheet("gd__audio__label__style", e, "\n                            .gd__audio__label{\n                              background-color: #ffca00;                      \n                              width: 200px;\n                              position: relative;\n                              display: none;\n                              z-index: 2000;\n                              cursor: pointer;\n                              top: 0px;\n                              margin: 0 auto;\n                              border-radius: 0px;\n                              border: 0px;\n                              text-align: center;\n                              height: 30px;\n                              border-bottom-left-radius: 3px;\n                              border-bottom-right-radius: 3px;\n                              padding: 5px;\n                            }\n                            .gd__audio__span{\n                              color: black;\n                              font-size: 14px;\n                              padding-left: 5px;\n                              font-family: Verdana, Arial, Helvetica, sans-serif;\n                              text-align: center;\n                            }\n                      ")
                            }
                        }, {
                            key: "addStylesheet",
                            value: function(e, t, r) {
                                var n;
                                document.getElementById(e) || ((n = document.createElement("style")).type = "text/css", n.id = e, n.styleSheet ? n.styleSheet.cssText = r : n.appendChild(document.createTextNode(r)), t.appendChild(n))
                            }
                        }]), N9),
                        U9 = (pe(B9, [{
                            key: "show",
                            value: function() {
                                this.t4rButton.style.display = "block"
                            }
                        }, {
                            key: "hide",
                            value: function() {
                                this.t4rButton.style.display = "none"
                            }
                        }, {
                            key: "add",
                            value: function() {
                                try {
                                    var e = document.createElement("div"),
                                        t = document.createElement("p");
                                    this.addStyles(), t.innerText = "x", e.appendChild(t), e.id = "gd__exit__button", e.setAttribute("title", "Exit"), e.classList.add("gd__exit__button"), this.t4rButton = e, document.body.appendChild(e)
                                } catch (e) {
                                    console.log("Exit button add error", e)
                                }
                            }
                        }, {
                            key: "addStyles",
                            value: function() {
                                var e = document.body || document.getElementsByTagName("body")[0];
                                this.addStylesheet("gd__exit__button__style", e, "\n                        .gd__exit__button{\n                          background-color: transparent;                      \n                          width: 50px;\n                          height: 50px;\n                          position: absolute;\n                          pointer-events:none;  \n                          z-index: 2000;\n                          top: 17px;\n                          right: 17px;\n                          margin: 0;\n                          border-radius: 50px;\n                          border: 1px solid white;\n                          text-align: center; \n                          font-size: 16px;\n                          line-height: normal;\n                          font-family: 'Arial';\n                          font-weight: bolder;\n                        }\n                        .gd__exit__button:hover{\n                          filter: invert(100%) sepia(51%) saturate(0%) hue-rotate(346deg) brightness(104%) contrast(100%);                      \n                        }")
                            }
                        }, {
                            key: "addStylesheet",
                            value: function(e, t, r) {
                                var n;
                                document.getElementById(e) || ((n = document.createElement("style")).type = "text/css", n.id = e, n.styleSheet ? n.styleSheet.cssText = r : n.appendChild(document.createTextNode(r)), t.appendChild(n))
                            }
                        }]), B9),
                        $9 = (new Blob([new Uint8Array([255, 227, 24, 196, 0, 0, 0, 3, 72, 1, 64, 0, 0, 4, 132, 16, 31, 227, 192, 225, 76, 255, 67, 12, 255, 221, 27, 255, 228, 97, 73, 63, 255, 195, 131, 69, 192, 232, 223, 255, 255, 207, 102, 239, 255, 255, 255, 101, 158, 206, 70, 20, 59, 255, 254, 95, 70, 149, 66, 4, 16, 128, 0, 2, 2, 32, 240, 138, 255, 36, 106, 183, 255, 227, 24, 196, 59, 11, 34, 62, 80, 49, 135, 40, 0, 253, 29, 191, 209, 200, 141, 71, 7, 255, 252, 152, 74, 15, 130, 33, 185, 6, 63, 255, 252, 195, 70, 203, 86, 53, 15, 255, 255, 247, 103, 76, 121, 64, 32, 47, 255, 34, 227, 194, 209, 138, 76, 65, 77, 69, 51, 46, 57, 55, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 255, 227, 24, 196, 73, 13, 153, 210, 100, 81, 135, 56, 0, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170, 170])], {
                            type: "audio/mpeg"
                        }), new Blob([new Uint8Array([0, 0, 0, 28, 102, 116, 121, 112, 105, 115, 111, 109, 0, 0, 2, 0, 105, 115, 111, 109, 105, 115, 111, 50, 109, 112, 52, 49, 0, 0, 0, 8, 102, 114, 101, 101, 0, 0, 2, 239, 109, 100, 97, 116, 33, 16, 5, 32, 164, 27, 255, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 167, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 33, 16, 5, 32, 164, 27, 255, 192, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 55, 167, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 112, 0, 0, 2, 194, 109, 111, 111, 118, 0, 0, 0, 108, 109, 118, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 232, 0, 0, 0, 47, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 1, 236, 116, 114, 97, 107, 0, 0, 0, 92, 116, 107, 104, 100, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 47, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 101, 100, 116, 115, 0, 0, 0, 28, 101, 108, 115, 116, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 47, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 100, 109, 100, 105, 97, 0, 0, 0, 32, 109, 100, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 172, 68, 0, 0, 8, 0, 85, 196, 0, 0, 0, 0, 0, 45, 104, 100, 108, 114, 0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0, 0, 0, 1, 15, 109, 105, 110, 102, 0, 0, 0, 16, 115, 109, 104, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 100, 105, 110, 102, 0, 0, 0, 28, 100, 114, 101, 102, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1, 0, 0, 0, 211, 115, 116, 98, 108, 0, 0, 0, 103, 115, 116, 115, 100, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 87, 109, 112, 52, 97, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 16, 0, 0, 0, 0, 172, 68, 0, 0, 0, 0, 0, 51, 101, 115, 100, 115, 0, 0, 0, 0, 3, 128, 128, 128, 34, 0, 2, 0, 4, 128, 128, 128, 20, 64, 21, 0, 0, 0, 0, 1, 244, 0, 0, 1, 243, 249, 5, 128, 128, 128, 2, 18, 16, 6, 128, 128, 128, 1, 2, 0, 0, 0, 24, 115, 116, 116, 115, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 4, 0, 0, 0, 0, 28, 115, 116, 115, 99, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 1, 0, 0, 0, 28, 115, 116, 115, 122, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 115, 0, 0, 1, 116, 0, 0, 0, 20, 115, 116, 99, 111, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 44, 0, 0, 0, 98, 117, 100, 116, 97, 0, 0, 0, 90, 109, 101, 116, 97, 0, 0, 0, 0, 0, 0, 0, 33, 104, 100, 108, 114, 0, 0, 0, 0, 0, 0, 0, 0, 109, 100, 105, 114, 97, 112, 112, 108, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 105, 108, 115, 116, 0, 0, 0, 37, 169, 116, 111, 111, 0, 0, 0, 29, 100, 97, 116, 97, 0, 0, 0, 1, 0, 0, 0, 0, 76, 97, 118, 102, 53, 54, 46, 52, 48, 46, 49, 48, 49])], {
                            type: "video/mp4"
                        }));

                    function B9(e) {
                        le(this, B9), this.adContainer = e
                    }

                    function N9(e) {
                        le(this, N9), this.adContainer = e
                    }

                    function F9(e, t) {
                        le(this, F9), this.adContainer = e, this.onResume = t
                    }

                    function G9(e, t) {
                        le(this, G9), this.adContainer = e, this.onResume = t
                    }

                    function z9(e) {
                        le(this, z9), this.gameData = e, this.customParamKeys = ["vid", "_1ld", "_1lp"]
                    }

                    function H9(e) {
                        return Object.assign({
                            muted: !1,
                            timeout: 250,
                            inline: !1
                        }, e)
                    }

                    function Z9(e, t) {
                        var n, r = e.muted,
                            o = e.timeout,
                            e = e.inline,
                            t = t(),
                            i = t.element,
                            t = t.source,
                            a = void 0,
                            s = void 0;
                        return !0 === (i.muted = r) && i.setAttribute("muted", "muted"), !0 === e && i.setAttribute("playsinline", "playsinline"), i.src = t, new Promise(function(r) {
                            a = i.play(), n = setTimeout(function() {
                                s(!1, new Error("Timeout " + o + " ms has been reached"))
                            }, o), s = function(e) {
                                var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;
                                i.remove(), i.srcObject = null, clearTimeout(n), r({
                                    result: e,
                                    error: t
                                })
                            }, void 0 !== a ? a.then(function() {
                                return s(!0)
                            }).catch(function(e) {
                                return s(!1, e)
                            }) : s(!0)
                        })
                    }
                    var K9, q9, W9, V9, Y9, J9, X9, Q9, eD, tD, rD, nD, oD, iD, aD, sD, uD, cD, lD, dD, fD, pD, hD, mD, gD, vD, bD, yD, _D, wD, AD, xD, kD, ED, SD, RD, DD, TD, OD, ID, CD, LD, MD, PD, jD, UD, $D, BD = function(e) {
                            return Z9(e = H9(e), function() {
                                return {
                                    element: document.createElement("video"),
                                    source: URL.createObjectURL($9)
                                }
                            })
                        },
                        Bw = {
                            exports: {}
                        };

                    function ND() {}

                    function FD(e) {
                        var t = -1,
                            r = null == e ? 0 : e.length;
                        for (this.clear(); ++t < r;) {
                            var n = e[t];
                            this.set(n[0], n[1])
                        }
                    }

                    function GD(e) {
                        var t = -1,
                            r = null == e ? 0 : e.length;
                        for (this.clear(); ++t < r;) {
                            var n = e[t];
                            this.set(n[0], n[1])
                        }
                    }

                    function zD(e) {
                        var t = -1,
                            r = null == e ? 0 : e.length;
                        for (this.clear(); ++t < r;) {
                            var n = e[t];
                            this.set(n[0], n[1])
                        }
                    }

                    function HD(e) {
                        e = this.__data__ = new GD(e);
                        this.size = e.size
                    }

                    function ZD(e, t, r) {
                        (void 0 === r || rT(e[t], r)) && (void 0 !== r || t in e) || qD(e, t, r)
                    }

                    function KD(e, t) {
                        for (var r = e.length; r--;)
                            if (rT(e[r][0], t)) return r;
                        return -1
                    }

                    function qD(e, t, r) {
                        "__proto__" == t && AD ? AD(e, t, {
                            configurable: !0,
                            enumerable: !0,
                            value: r,
                            writable: !0
                        }) : e[t] = r
                    }

                    function WD(e) {
                        {
                            if (null == e) return void 0 === e ? nD : eD;
                            if (wD && wD in Object(e)) {
                                var t = e,
                                    r = dD.call(t, wD),
                                    n = t[wD];
                                try {
                                    var o = !(t[wD] = void 0)
                                } catch (t) {}
                                var i = pD.call(t);
                                return o && (r ? t[wD] = n : delete t[wD]), i
                            }
                            return pD.call(e)
                        }
                    }

                    function VD(e) {
                        return sT(e) && WD(e) == Y9
                    }

                    function YD(m, g, v, b, y) {
                        m !== g && DD(g, function(e, t) {
                            var r, n, o, i, a, s, u, c, l, d, f, p, h;
                            y = y || new HD, aT(e) ? (n = g, i = v, a = YD, s = b, u = y, f = tT(r = m, o = t), p = tT(n, o), (h = u.get(p)) || ((n = void 0 === (h = s ? s(f, p, o + "", r, n, u) : void 0)) && (c = !(d = MD(p)) && PD(p), l = !d && !c && UD(p), h = p, d || c || l ? h = MD(f) ? f : sT(d = f) && nT(d) ? function(e, t) {
                                var r = -1,
                                    n = e.length;
                                for (t = t || Array(n); ++r < n;) t[r] = e[r];
                                return t
                            }(f) : c ? (n = !1, p.slice()) : l ? (n = !1, l = new(c = (d = p).buffer).constructor(c.byteLength), new gD(l).set(new gD(c)), new d.constructor(l, d.byteOffset, d.length)) : [] : function(e) {
                                if (sT(e) && WD(e) == tD) return null === (e = vD(e)) || "function" == typeof(e = dD.call(e, "constructor") && e.constructor) && e instanceof e && lD.call(e) == hD
                            }(p) || LD(p) ? LD(h = f) ? h = function() {
                                for (var e = f, t = uT(f), r = void 0, n = !r, o = (r = r || {}, -1), i = t.length; ++o < i;) {
                                    var a = t[o],
                                        s = void 0;
                                    (n ? qD : function e(t, r, n) {
                                        var o = t[r];
                                        dD.call(t, r) && rT(o, n) && (void 0 !== n || r in t) || qD(t, r, n)
                                    })(r, a, s = void 0 === s ? e[a] : s)
                                }
                                return r
                            }() : aT(f) && !oT(f) || (h = "function" != typeof p.constructor || eT(p) ? {} : RD(vD(p))) : n = !1), n && (u.set(p, h), a(h, p, i, s, u), u.delete(p))), ZD(r, o, h)) : (c = b ? b(tT(m, t), e, t + "", m, g, y) : void 0, ZD(m, t, c = void 0 === c ? e : c))
                        }, uT)
                    }

                    function JD(e, t) {
                        var r, e = e.__data__;
                        return ("string" == (r = typeof t) || "number" == r || "symbol" == r || "boolean" == r ? "__proto__" !== t : null === t) ? e["string" == typeof t ? "string" : "hash"] : e.map
                    }

                    function XD(e, t) {
                        e = null == e ? void 0 : e[t];
                        return function e(t) {
                            return aT(t) && !(fD && fD in t) && (oT(t) ? mD : oD).test(function(e) {
                                if (null != e) {
                                    try {
                                        return lD.call(e)
                                    } catch (e) {}
                                    try {
                                        return e + ""
                                    } catch (e) {}
                                }
                                return ""
                            }(t))
                        }(e) ? e : void 0
                    }

                    function QD(e, t) {
                        var r = typeof e;
                        return (t = null == t ? V9 : t) && ("number" == r || "symbol" != r && iD.test(e)) && -1 < e && e % 1 == 0 && e < t
                    }

                    function eT(e) {
                        var t = e && e.constructor;
                        return e === ("function" == typeof t && t.prototype || cD)
                    }

                    function tT(e, t) {
                        if (("constructor" !== t || "function" != typeof e[t]) && "__proto__" != t) return e[t]
                    }

                    function rT(e, t) {
                        return e === t || e != e && t != t
                    }

                    function nT(e) {
                        return null != e && iT(e.length) && !oT(e)
                    }

                    function oT(e) {
                        if (aT(e)) return (e = WD(e)) == X9 || e == Q9 || e == J9 || e == rD
                    }

                    function iT(e) {
                        return "number" == typeof e && -1 < e && e % 1 == 0 && e <= V9
                    }

                    function aT(e) {
                        var t = typeof e;
                        return null != e && ("object" == t || "function" == t)
                    }

                    function sT(e) {
                        return null != e && "object" == typeof e
                    }

                    function uT(e) {
                        return nT(e) ? function e(t, r) {
                            var n, o = MD(t),
                                i = !o && LD(t),
                                a = !o && !i && PD(t),
                                s = !o && !i && !a && UD(t),
                                u = o || i || a || s,
                                c = u ? function(e, t) {
                                    for (var r = -1, n = Array(e); ++r < e;) n[r] = t(r);
                                    return n
                                }(t.length, String) : [],
                                l = c.length;
                            for (n in t) !r && !dD.call(t, n) || u && ("length" == n || a && ("offset" == n || "parent" == n) || s && ("buffer" == n || "byteLength" == n || "byteOffset" == n) || QD(n, l)) || c.push(n);
                            return c
                        }(e, !0) : function e(t) {
                            if (aT(t)) {
                                var r, n = eT(t),
                                    o = [];
                                for (r in t)("constructor" != r || !n && dD.call(t, r)) && o.push(r);
                                return o
                            }
                            var i = [];
                            if (null != t)
                                for (var a in Object(t)) i.push(a);
                            return i
                        }(e)
                    }

                    function cT(e) {
                        return e
                    }
                    Gw = (v = Bw).exports, W9 = "__lodash_hash_undefined__", V9 = 9007199254740991, Y9 = "[object Arguments]", J9 = "[object AsyncFunction]", X9 = "[object Function]", Q9 = "[object GeneratorFunction]", eD = "[object Null]", tD = "[object Object]", rD = "[object Proxy]", nD = "[object Undefined]", oD = /^\[object .+?Constructor\]$/, iD = /^(?:0|[1-9]\d*)$/, (aD = {})["[object Float32Array]"] = aD["[object Float64Array]"] = aD["[object Int8Array]"] = aD["[object Int16Array]"] = aD["[object Int32Array]"] = aD["[object Uint8Array]"] = aD["[object Uint8ClampedArray]"] = aD["[object Uint16Array]"] = aD["[object Uint32Array]"] = !0, aD[Y9] = aD["[object Array]"] = aD["[object ArrayBuffer]"] = aD["[object Boolean]"] = aD["[object DataView]"] = aD["[object Date]"] = aD["[object Error]"] = aD[X9] = aD["[object Map]"] = aD["[object Number]"] = aD[tD] = aD["[object RegExp]"] = aD["[object Set]"] = aD["[object String]"] = aD["[object WeakMap]"] = !1, aa = "object" == typeof $ && $ && $.Object === Object && $, Ww = "object" == typeof self && self && self.Object === Object && self, Ww = aa || Ww || Function("return this")(), Gw = Gw && !Gw.nodeType && Gw, sD = Gw && v && !v.nodeType && v, Gw = sD && sD.exports === Gw, uD = Gw && aa.process, aa = (aa = function() {
                        try {
                            return sD && sD.require && sD.require("util").types || uD && uD.binding && uD.binding("util")
                        } catch (e) {}
                    }()) && aa.isTypedArray, Vw = Array.prototype, eA = Function.prototype, cD = Object.prototype, tA = Ww["__core-js_shared__"], lD = eA.toString, dD = cD.hasOwnProperty, fD = (eA = /[^.]+$/.exec(tA && tA.keys && tA.keys.IE_PROTO || "")) ? "Symbol(src)_1." + eA : "", pD = cD.toString, hD = lD.call(Object), mD = RegExp("^" + lD.call(dD).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), tA = Gw ? Ww.Buffer : void 0, eA = Ww.Symbol, gD = Ww.Uint8Array, tA && tA.allocUnsafe, K9 = Object.getPrototypeOf, q9 = Object, vD = function(e) {
                        return K9(q9(e))
                    }, bD = Object.create, yD = cD.propertyIsEnumerable, _D = Vw.splice, wD = eA ? eA.toStringTag : void 0, AD = function() {
                        try {
                            var e = XD(Object, "defineProperty");
                            return e({}, "", {}), e
                        } catch (e) {}
                    }(), Gw = tA ? tA.isBuffer : void 0, xD = Math.max, kD = Date.now, ED = XD(Ww, "Map"), SD = XD(Object, "create"), RD = function(e) {
                        if (!aT(e)) return {};
                        if (bD) return bD(e);
                        ND.prototype = e;
                        e = new ND;
                        return ND.prototype = void 0, e
                    }, FD.prototype.clear = function() {
                        this.__data__ = SD ? SD(null) : {}, this.size = 0
                    }, FD.prototype.delete = function(e) {
                        e = this.has(e) && delete this.__data__[e];
                        return this.size -= e ? 1 : 0, e
                    }, FD.prototype.get = function(e) {
                        var t, r = this.__data__;
                        return SD ? (t = r[e]) === W9 ? void 0 : t : dD.call(r, e) ? r[e] : void 0
                    }, FD.prototype.has = function(e) {
                        var t = this.__data__;
                        return SD ? void 0 !== t[e] : dD.call(t, e)
                    }, FD.prototype.set = function(e, t) {
                        var r = this.__data__;
                        return this.size += this.has(e) ? 0 : 1, r[e] = SD && void 0 === t ? W9 : t, this
                    }, GD.prototype.clear = function() {
                        this.__data__ = [], this.size = 0
                    }, GD.prototype.delete = function(e) {
                        var t = this.__data__,
                            e = KD(t, e);
                        return !(e < 0 || (e == t.length - 1 ? t.pop() : _D.call(t, e, 1), --this.size, 0))
                    }, GD.prototype.get = function(e) {
                        var t = this.__data__,
                            e = KD(t, e);
                        return e < 0 ? void 0 : t[e][1]
                    }, GD.prototype.has = function(e) {
                        return -1 < KD(this.__data__, e)
                    }, GD.prototype.set = function(e, t) {
                        var r = this.__data__,
                            n = KD(r, e);
                        return n < 0 ? (++this.size, r.push([e, t])) : r[n][1] = t, this
                    }, zD.prototype.clear = function() {
                        this.size = 0, this.__data__ = {
                            hash: new FD,
                            map: new(ED || GD),
                            string: new FD
                        }
                    }, zD.prototype.delete = function(e) {
                        e = JD(this, e).delete(e);
                        return this.size -= e ? 1 : 0, e
                    }, zD.prototype.get = function(e) {
                        return JD(this, e).get(e)
                    }, zD.prototype.has = function(e) {
                        return JD(this, e).has(e)
                    }, zD.prototype.set = function(e, t) {
                        var r = JD(this, e),
                            n = r.size;
                        return r.set(e, t), this.size += r.size == n ? 0 : 1, this
                    }, HD.prototype.clear = function() {
                        this.__data__ = new GD, this.size = 0
                    }, HD.prototype.delete = function(e) {
                        var t = this.__data__,
                            e = t.delete(e);
                        return this.size = t.size, e
                    }, HD.prototype.get = function(e) {
                        return this.__data__.get(e)
                    }, HD.prototype.has = function(e) {
                        return this.__data__.has(e)
                    }, HD.prototype.set = function(e, t) {
                        var r = this.__data__;
                        if (r instanceof GD) {
                            var n = r.__data__;
                            if (!ED || n.length < 199) return n.push([e, t]), this.size = ++r.size, this;
                            r = this.__data__ = new zD(n)
                        }
                        return r.set(e, t), this.size = r.size, this
                    }, DD = function(e, t, r) {
                        for (var n = -1, o = Object(e), i = r(e), a = i.length; a--;) {
                            var s = i[++n];
                            if (!1 === t(o[s], s, o)) break
                        }
                        return e
                    }, TD = AD ? function(e, t) {
                        return AD(e, "toString", {
                            configurable: !0,
                            enumerable: !1,
                            value: (r = t, function() {
                                return r
                            }),
                            writable: !0
                        });
                        var r
                    } : cT, ID = OD = 0, CD = function() {
                        var e = kD(),
                            t = 16 - (e - ID);
                        if (ID = e, 0 < t) {
                            if (800 <= ++OD) return arguments[0]
                        } else OD = 0;
                        return TD.apply(void 0, arguments)
                    }, LD = VD(function() {
                        return arguments
                    }()) ? VD : function(e) {
                        return sT(e) && dD.call(e, "callee") && !yD.call(e, "callee")
                    }, MD = Array.isArray, PD = Gw || function() {
                        return !1
                    }, UD = aa ? (jD = aa, function(e) {
                        return jD(e)
                    }) : function(e) {
                        return sT(e) && iT(e.length) && !!aD[WD(e)]
                    }, $D = function(e, t, r) {
                        YD(e, t, r)
                    }, Vw = function e(t, r) {
                        return CD((u = t, l = cT, c = xD(void 0 === r ? u.length - 1 : r, 0), function() {
                            for (var e = arguments, t = -1, r = xD(e.length - c, 0), n = Array(r); ++t < r;) n[t] = e[c + t];
                            for (var t = -1, o = Array(c + 1); ++t < c;) o[t] = e[t];
                            o[c] = l(n);
                            var i = u,
                                a = this,
                                s = o;
                            switch (s.length) {
                                case 0:
                                    return i.call(a);
                                case 1:
                                    return i.call(a, s[0]);
                                case 2:
                                    return i.call(a, s[0], s[1]);
                                case 3:
                                    return i.call(a, s[0], s[1], s[2])
                            }
                            return i.apply(a, s)
                        }), t + "");
                        var u, c, l
                    }(function(e, t) {
                        var r = -1,
                            n = t.length,
                            o = 1 < n ? t[n - 1] : void 0,
                            i = 2 < n ? t[2] : void 0,
                            o = 3 < $D.length && "function" == typeof o ? (n--, o) : void 0;
                        for (i && function(e, t, r) {
                                var n;
                                if (aT(r)) return ("number" == (n = typeof t) ? nT(r) && QD(t, r.length) : "string" == n && t in r) && rT(r[t], e)
                            }(t[0], t[1], i) && (o = n < 3 ? void 0 : o, n = 1), e = Object(e); ++r < n;) {
                            var a = t[r];
                            a && $D(e, a, r)
                        }
                        return e
                    }), v.exports = Vw;
                    var lT = Bw.exports;

                    function dT(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function fT(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? dT(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : dT(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }

                    function pT() {
                        window.addEventListener("load", function() {
                            var t;
                            RE.once("game-data-ready", (t = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 1, e.t0 = null != uv && uv.noLotamePageView, e.t0) return e.next = 6, ME();
                                            e.next = 7;
                                            break;
                                        case 6:
                                            e.t0 = e.sent;
                                        case 7:
                                            if (e.t0) return e.abrupt("return");
                                            e.next = 10;
                                            break;
                                        case 10:
                                            if (null != (r = t.lotm) && r.enabled) {
                                                e.next = 13;
                                                break
                                            }
                                            return e.abrupt("return");
                                        case 13:
                                            return e.next = 16, bn(bT[0], "LOTCC_".concat(gT), {
                                                alternates: bT
                                            });
                                        case 16:
                                            "object" === U(window[vT]) && (mT = window[vT]), yT() && function(e) {
                                                var t = this;
                                                try {
                                                    _T("act", "play"), _T("med", "game"), "complete" === document.readyState ? mT.bcpf() : mT.bcp(), e.tags.forEach(function(e) {
                                                        O(this, t), wT("int", "tags : ".concat(e.title.toLowerCase()))
                                                    }.bind(this)), wT("int", "category : ".concat(e.category.toLowerCase()))
                                                } catch (e) {}
                                            }(t), e.next = 23;
                                            break;
                                        case 20:
                                            e.prev = 20, e.t1 = e.catch(1), e.t1;
                                        case 23:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, null, [
                                    [1, 20]
                                ])
                            })), function(e) {
                                return t.apply(this, arguments)
                            }))
                        })
                    }

                    function hT() {
                        var e, t = (new qk).get("partner.url.value"),
                            t = new ce(t, !0),
                            r = {
                                isRevisionTest: !1,
                                useTestAds: !1,
                                disableMidrolltimer: !1
                            };
                        return r = "revision.gamedistribution.com" === t.host ? {
                            useTestAds: e = "1" === (t = t.query.test) || "2" === t,
                            disableMidrolltimer: t = "1" === t,
                            isRevisionTest: t || e
                        } : r
                    }
                    var mT, gT = "13998",
                        vT = "_cc".concat(gT),
                        bT = ["https://tags.crwdcntrl.net/c/".concat(gT, "/cc.js?ns=").concat(vT)],
                        yT = function() {
                            return !!mT && "function" == typeof mT.bcpf && "function" == typeof mT.add
                        },
                        _T = function(e, t) {
                            try {
                                yT() && (mT.add(e, t), "lotame add success ".concat(e, " ").concat(t))
                            } catch (e) {
                                err
                            }
                        },
                        wT = function(e, t) {
                            try {
                                yT() && (mT.bcpw(e, t), "lotame send success ".concat(e, " ").concat(t))
                            } catch (e) {}
                        },
                        AT = new qk,
                        xT = {
                            preroll: "game-start-video",
                            midroll: "mid-level-video",
                            rewarded: "rewarded-video"
                        },
                        kT = (new qk).get("partner.domain.value"),
                        ET = ["latimes.com"],
                        ST = {
                            exist: function(e) {
                                var t = this;
                                return "Softgames-Azerion" === e.dname && ET.some(function(e) {
                                    return O(this, t), e === kT
                                }.bind(this))
                            },
                            get: function(e, t) {
                                return n = t, {
                                    "latimes.com": function() {
                                        return function(e, t) {
                                            var r, n = this,
                                                o = (e = e, t = t, r = AT.get("partner.url.value"), t = xT[t], e = "".concat("web.latimes/games-puzzles-crossword", "/").concat(e, "/").concat(t), {
                                                    env: "vp",
                                                    iu: "/".concat("21787098806", "/").concat(e),
                                                    description_url: r,
                                                    tfcd: 0,
                                                    npa: 0,
                                                    sz: "400x300|480x360|480x361|640x360|640x480",
                                                    gdfp_req: 1,
                                                    output: "vast",
                                                    unviewed_position_start: 1,
                                                    impl: "s",
                                                    correlator: "".concat(Date.now())
                                                }),
                                                t = Object.keys(o).map(function(e) {
                                                    return O(this, n), "".concat(e, "=").concat(o[e])
                                                }.bind(this)).join("&");
                                            return "".concat("https://pubads.g.doubleclick.net/gampad/ads", "?").concat(t)
                                        }(n.slug, r)
                                    }
                                }[kT](r = e);
                                var r, n
                            }
                        };

                    function RT(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function DT(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? RT(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : RT(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }

                    function TT(e, t) {
                        console.log(e, t)
                    }
                    var OT, IT, CT, LT, MT, PT, jT, UT, $T, BT, NT, FT, GT, zT, HT, ZT, KT, qT, WT, VT, YT, JT, XT, QT = new w.exports.EventEmitter,
                        eO = null,
                        tO = (pe(sO, [{
                            key: "start",
                            value: (XT = d(I.mark(function e() {
                                var t, r, n, o = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, this.adSystemInitialize(d(I.mark(function e() {
                                                return I.wrap(function(e) {
                                                    for (;;) switch (e.prev = e.next) {
                                                        case 0:
                                                            return e.next = 2, o._init_afg_script({
                                                                adsense_channel: "4089988593"
                                                            });
                                                        case 2:
                                                        case "end":
                                                            return e.stop()
                                                    }
                                                }, e)
                                            })));
                                        case 3:
                                            return t = e.sent, this.afgInitSuccess = t.success, e.next = 7, this.adSystemInitialize(d(I.mark(function e() {
                                                return I.wrap(function(e) {
                                                    for (;;) switch (e.prev = e.next) {
                                                        case 0:
                                                            return e.next = 2, o._init_hl_script();
                                                        case 2:
                                                            return e.next = 4, o._init_ima_script();
                                                        case 4:
                                                            o._createPlayer(), o._setUpIMA();
                                                        case 6:
                                                        case "end":
                                                            return e.stop()
                                                    }
                                                }, e)
                                            })));
                                        case 7:
                                            if (r = e.sent, this.imaInitSuccess = r.success, n = [], this.afgInitSuccess || n.push(t.error), this.imaInitSuccess || n.push(r.error), 0 < n.length) throw n[0];
                                            e.next = 14;
                                            break;
                                        case 14:
                                            window.eventTest = function(e) {
                                                O(this, o), this._broadcast(e, {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), e.next = 21;
                                            break;
                                        case 17:
                                            throw e.prev = 17, e.t0 = e.catch(0), Ms("gd-adflow error on ads.start", e.t0), new Error(e.t0);
                                        case 21:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 17]
                                ])
                            })), function() {
                                return XT.apply(this, arguments)
                            })
                        }, {
                            key: "adSystemInitialize",
                            value: (JT = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return r = {
                                                success: !1
                                            }, e.prev = 1, e.next = 4, t();
                                        case 4:
                                            r.success = !0, e.next = 10;
                                            break;
                                        case 7:
                                            e.prev = 7, e.t0 = e.catch(1), r.error = e.t0;
                                        case 10:
                                            return e.abrupt("return", r);
                                        case 12:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, null, [
                                    [1, 7]
                                ])
                            })), function(e) {
                                return JT.apply(this, arguments)
                            })
                        }, {
                            key: "_getDefaultSpilAdapterConfig",
                            value: function() {
                                return {
                                    vast: null,
                                    url: "https://pubads.g.doubleclick.net/gampad/ads",
                                    query: {
                                        correlator: "{{CACHEBUSTER}}",
                                        description_url: "{{PAGE_URL}}",
                                        env: "vp",
                                        gdfp_req: 1,
                                        impl: "s",
                                        iu: "/59392726/gd_instream",
                                        npa: 0,
                                        output: "vast",
                                        sz: "640x480|400x300",
                                        tfcd: 0,
                                        unviewed_position_start: 1
                                    }
                                }
                            }
                        }, {
                            key: "_getSpilUrl",
                            value: (YT = d(I.mark(function e(t) {
                                var r, n, o, i, a;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return n = t.adType, o = t.options, e.prev = 1, r = null == (r = this.gameData.adflw) || null == (r = r.adapterConfig) ? void 0 : r.spil, n = this.nextAdPosition(n), e.next = 6, this._create_dp_context(n, o);
                                        case 6:
                                            return o = e.sent, a = r && (this.gameData, r[n] || r.default) || this._getDefaultSpilAdapterConfig(), i = 100 * o.floor_price, o.floor_price, a = this._createCustomAdVastUrl(a, {
                                                tnl_keys: {
                                                    floor_price: i
                                                }
                                            }), i = a.url, a = {
                                                url: i,
                                                dp: o,
                                                hl: {
                                                    bidFloorApplied: !0
                                                }
                                            }, e.abrupt("return", a);
                                        case 17:
                                            e.prev = 17, e.t0 = e.catch(1), console.log("spil-adaptor: Error on getting spil", e.t0);
                                        case 20:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 17]
                                ])
                            })), function(e) {
                                return YT.apply(this, arguments)
                            })
                        }, {
                            key: "_getAdVast",
                            value: function(u, c) {
                                var t, l = this;
                                return new Promise((t = d(I.mark(function e(n) {
                                    var o, t, i, a, r, s = this;
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                if (kn && xn("gd_debug_ex") && xn("gd_tag") || hT().useTestAds) return r = l.IMASampleTags[u], t = Math.floor(Math.random() * r.length), r = r[t], n({
                                                    url: r
                                                }), e.abrupt("return");
                                                e.next = 6;
                                                break;
                                            case 6:
                                                if ("spil" === c.adapter) return e.abrupt("return", n(l._getSpilUrl({
                                                    adType: u,
                                                    options: c
                                                })));
                                                e.next = 8;
                                                break;
                                            case 8:
                                                if (void 0 === window.idhb.requestAds) throw new Error("Prebid.js wrapper script hit an error or didn't exist!");
                                                e.next = 10;
                                                break;
                                            case 10:
                                                return e.prev = 10, o = l.nextAdPosition(u), l._broadcast("AD_REQUEST", {
                                                    message: o
                                                }), t = l.options, "preroll" === o && zt(t.preroll) ? t = t.preroll : "midroll" === o && zt(t.midroll) ? t = t.midroll : "rewarded" === o && zt(t.rewarded) && (t = t.rewarded), i = "", i = "audio" === c.adapter || "audio" === c.giftType ? (l.isAudioAd = !0, "midrollaudio") : (l.isAudioAd = !1, "rewarded" === o ? "rewardedVideo" : "gdbanner" === o ? "gd__banner" : "midroll" === o ? "midroll" : "video1"), e.next = 19, window.idhb.isLoaded();
                                            case 19:
                                                return e.next = 21, l._create_dp_context(o, c);
                                            case 21:
                                                a = e.sent, Ls("gd-adflow, before idhb", o, i), r = window.idhb.getAdserverTargetingForAdSlot(i), window.idhb.setAdserverTargeting(DT(DT({}, r), {}, {
                                                    adaptor_order: c.adapterIndex
                                                })), window.idhb.getAdserverTargetingForAdSlot(i), window.idhb.requestAds({
                                                    slots: Fu({}, i, {
                                                        bidFloor: (null == a ? void 0 : a.floor_price) || void 0
                                                    }),
                                                    callback: function(e, t) {
                                                        var r = this,
                                                            e = (O(this, s), !a || null != t && t.bidFloorApplied || fetch(a.skip_url).catch(function(e) {
                                                                O(this, r)
                                                            }.bind(this)), {
                                                                src: "hl",
                                                                tnl_keys: DT(DT({}, window.idhb.getAdserverTargetingForAdSlot(i)), {}, {
                                                                    tnl_ad_pos: o,
                                                                    tnl_asset_id: l.gameData.gameId
                                                                }),
                                                                url: e,
                                                                dp: a,
                                                                hl: t
                                                            });
                                                        l._extend_hl_url(e), n(e)
                                                    }.bind(this)
                                                }), e.next = 33;
                                                break;
                                            case 30:
                                                throw e.prev = 30, e.t0 = e.catch(10), new Error(e.t0);
                                            case 33:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e, this, [
                                        [10, 30]
                                    ])
                                })), function(e) {
                                    return t.apply(this, arguments)
                                }))
                            }
                        }, {
                            key: "nextAdPosition",
                            value: function(e) {
                                return e === g.Rewarded ? (this.adRewardedCount++, "rewarded") : e !== g.Interstitial || ((e = !1 === this.gameData.preroll || 1 === this.adPrerollCount) ? this.adMidrollCount++ : this.adPrerollCount++, e) || 0 < this.adMidrollCount ? "midroll" : "preroll"
                            }
                        }, {
                            key: "getAdPosition",
                            value: function(e) {
                                return e === g.Rewarded ? "rewarded" : e !== g.Interstitial || !1 === this.gameData.preroll || 1 === this.adPrerollCount || 0 < this.adMidrollCount ? "midroll" : "preroll"
                            }
                        }, {
                            key: "getCurrentAdPosition",
                            value: function(e) {
                                return e === g.Interstitial ? 1 === this.adPrerollCount && 0 === this.adMidrollCount ? "preroll" : "midroll" : e === g.Rewarded ? "rewarded" : void 0
                            }
                        }, {
                            key: "_requestPromo",
                            value: function(e, t) {
                                var r = new google.ima.AdsRequest;
                                return r.adsResponse = '<VAST version="3.0">            \n            <Ad id="promo">\n                <Wrapper>\n                    <AdSystem>Rainbow</AdSystem>\n                    <Impression><![CDATA['.concat((e = e).promo_imp_green_url, "]]></Impression>\n                    <VASTAdTagURI><![CDATA[").concat(e.promo_url, "]]></VASTAdTagURI>                    \n                </Wrapper>\n            </Ad>\n        </VAST>").trim(), r.linearAdSlotWidth = this.options.width, r.linearAdSlotHeight = this.options.height, r.nonLinearAdSlotWidth = this.options.width, r.nonLinearAdSlotHeight = this.options.height, r.forceNonLinearFullSlot = !0, this.options.vast_load_timeout && (r.vastLoadTimeout = this.options.vast_load_timeout), r.setAdWillAutoPlay(t.autoplayAllowed), r.setAdWillPlayMuted(t.autoplayRequiresMute), this.adsLoader.requestAds(r), r
                            }
                        }, {
                            key: "_requestAd",
                            value: function(v, b) {
                                var y = this;
                                return b = b || {}, new Promise(function(e) {
                                    var t, r, n = this;
                                    if (O(this, y), "undefined" == typeof google) throw new Error("Unable to load ad, google IMA SDK not defined.");
                                    try {
                                        var o, i, a, s, u, c = null == v || null == (o = v.tnl_keys) ? void 0 : o.tnl_ad_pos,
                                            l = (this.adSuccess = !1, this.contentPaused = !1, new google.ima.AdsRequest),
                                            d = this._transformVast(v, b),
                                            f = DT(DT({}, b), {}, {
                                                adTag: d,
                                                tnl_ad_pos: c
                                            }),
                                            p = (this.adCounter[c] = this.adCounter[c] || 0, this.adCounter[c]++, v.dp),
                                            h = v.hl,
                                            m = ((this.current_dp = p) && !d.bidder && (p.adtag_url = d.url, this._extend_dp_with_adsense(p, h, null == v ? void 0 : v.tnl_keys)), this._isVMAP(c)),
                                            g = (! function() {
                                                O(this, n), b.shouldFail && (p ? (p.adtag_url = "dp_original_broken", p.fallback_url = "dp_fallback_broken") : d.url = "original_broken", null != p && p.adtag_url, null != p && p.fallback_url, d.url)
                                            }.bind(this), this._getExternalVast(null == (i = b) ? void 0 : i.adType));
                                        g ? l.adTagUrl = g : m ? (a = function(e) {
                                            for (var t = [], r = "", n = Date.now(), o = {
                                                    ppos: 1,
                                                    lip: !0,
                                                    vad_type: "linear"
                                                }, i = 0; i < e.length; i++) {
                                                var a = new ce(e[i].adtag.url, !0);
                                                a.query = fT(fT({}, a.query), {}, {
                                                    ad_rule: 0,
                                                    vpos: e[i].positon,
                                                    pod: 1,
                                                    correlator: 0 === i ? n : ++n,
                                                    output: "xml_vast3"
                                                }), 0 === i && (a.query = fT(fT({}, a.query), o)), t.push(a.toString())
                                            }
                                            for (var s, u = Date.now(), c = 1; c <= t.length; c++) r += '<vmap:AdBreak timeOffset="start" breakType="linear" breakId="break-'.concat(c, '">\n            <vmap:AdSource id="').concat(u++, '" allowMultipleAds="false" followRedirects="true">\n                ').concat(function e(t) {
                                                return null != t && t.error_url ? "<vmap:VASTAdData>".concat(((r = t).promo_url ? '<VAST version="3.0">\n            <Ad id="'.concat(r.id, '">\n                <Wrapper fallbackOnNoAd="true">\n                    <AdSystem>GDFP</AdSystem>\n                    <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                    <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                    <VASTAdTagURI><![CDATA[").concat(r.adtag_url, ']]></VASTAdTagURI>\n                    <Extensions>\n                        <Extension type="waterfall" fallback_index="0" />\n                    </Extensions>\n                </Wrapper>\n            </Ad>\n            <Ad id="promo">\n                <Wrapper>\n                    <AdSystem>Rainbow</AdSystem>\n                    <Impression><![CDATA[').concat(r.promo_imp_green_url, "]]></Impression>\n                    <VASTAdTagURI><![CDATA[").concat(r.promo_url, ']]></VASTAdTagURI>\n                    <Extensions>\n                        <Extension type="waterfall" fallback_index="1" />\n                    </Extensions>\n                </Wrapper>\n            </Ad>\n        </VAST>') : r.fallback_url ? '<VAST version="3.0">\n            <Ad id="'.concat(r.id, '">\n                <Wrapper fallbackOnNoAd="true">\n                    <AdSystem>GDFP</AdSystem>\n                    <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                    <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                    <VASTAdTagURI><![CDATA[").concat(r.adtag_url, ']]></VASTAdTagURI>\n                    <Extensions>\n                        <Extension type="waterfall" fallback_index="0" />\n                    </Extensions>\n                </Wrapper>\n            </Ad>\n            <Ad id="fallback">\n                <Wrapper>\n                    <AdSystem>Rainbow</AdSystem>\n                    <Impression><![CDATA[').concat(r.fallback_imp_url, "]]></Impression>\n                    <VASTAdTagURI><![CDATA[").concat(r.fallback_url, ']]></VASTAdTagURI>\n                    <Extensions>\n                        <Extension type="waterfall" fallback_index="1" />\n                    </Extensions>\n                </Wrapper>\n            </Ad>\n        </VAST>') : '<VAST version="3.0">\n        <Ad id="'.concat(r.id, '">\n            <Wrapper>\n                <AdSystem>GDFP</AdSystem>\n                <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                <VASTAdTagURI><![CDATA[").concat(r.adtag_url, "]]></VASTAdTagURI>\n            </Wrapper>\n        </Ad>\n    </VAST>")).trim(), "</vmap:VASTAdData>") : '<vmap:AdTagURI templateType="vast3"><![CDATA['.concat(null == t ? void 0 : t.adtag_url, "]]></vmap:AdTagURI>");
                                                var r
                                            }({
                                                id: u++,
                                                adtag_url: t[c - 1],
                                                error_url: null == (s = e[c - 1].dp) ? void 0 : s.error_url,
                                                impression_url: null == (s = e[c - 1].dp) ? void 0 : s.impression_url,
                                                fallback_url: null == (s = e[c - 1].dp) ? void 0 : s.fallback_url,
                                                fallback_imp_url: null == (s = e[c - 1].dp) ? void 0 : s.fallback_imp_url
                                            }), "</vmap:AdSource>\n        </vmap:AdBreak>");
                                            return '<?xml version="1.0" encoding="UTF-8"?>\n    <vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">\n    '.concat(r, "\n    </vmap:VMAP>").trim()
                                        }(this._get_vmap_context({
                                            dp: p,
                                            adtag: d,
                                            position: "preroll" === f.tnl_ad_pos ? "preroll" : "midroll",
                                            config: this._get_vmap_config(c)
                                        })), l.adsResponse = a) : p && h.bidFloorApplied ? (p.adtag_url || (p.adtag_url = d.url), s = ((r = p).promo_url ? r.fallback_url ? '<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n                <Ad id="'.concat(r.id, '">\n                    <Wrapper fallbackOnNoAd="true">\n                        <AdSystem>GDFP</AdSystem>\n                        <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                        <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.adtag_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="0" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n                <Ad id="fallback">\n                    <Wrapper>\n                        <AdSystem>ADS</AdSystem>\n                        <Impression><![CDATA[').concat(r.fallback_imp_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.fallback_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="1" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n                <Ad id="promo">\n                    <Wrapper>\n                        <AdSystem>Rainbow</AdSystem>\n                        <Impression><![CDATA[').concat(r.promo_imp_green_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.promo_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="2" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n            </VAST>') : '<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n                <Ad id="'.concat(r.id, '">\n                    <Wrapper fallbackOnNoAd="true">\n                        <AdSystem>GDFP</AdSystem>\n                        <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                        <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.adtag_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="0" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n                <Ad id="promo">\n                    <Wrapper>\n                        <AdSystem>Rainbow</AdSystem>\n                        <Impression><![CDATA[').concat(r.promo_imp_green_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.promo_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="1" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n            </VAST>') : r.fallback_url ? '<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n                <Ad id="'.concat(r.id, '">\n                    <Wrapper fallbackOnNoAd="true">\n                        <AdSystem>GDFP</AdSystem>\n                        <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                        <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.adtag_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="0" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n                <Ad id="fallback">\n                    <Wrapper>\n                        <AdSystem>ADS</AdSystem>\n                        <Impression><![CDATA[').concat(r.fallback_imp_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.fallback_url, ']]></VASTAdTagURI>\n                        <Extensions>\n                            <Extension type="waterfall" fallback_index="1" />\n                        </Extensions>\n                    </Wrapper>\n                </Ad>\n            </VAST>') : '<?xml version="1.0" encoding="utf-8"?>\n            <VAST version="3.0">\n                <Ad id="'.concat(r.id, '">\n                    <Wrapper>\n                        <AdSystem>GDFP</AdSystem>\n                        <Error><![CDATA[').concat(r.error_url, "]]></Error>\n                        <Impression><![CDATA[").concat(r.impression_url, "]]></Impression>\n                        <VASTAdTagURI><![CDATA[").concat(r.adtag_url, "]]></VASTAdTagURI>\n                    </Wrapper>\n                </Ad>\n            </VAST>")).trim(), l.adsResponse = s) : p && p.fallback_url ? (u = '<?xml version="1.0" encoding="utf-8"?>\n    <VAST version="3.0">\n        <Ad id="'.concat((t = p).id, '">\n            <Wrapper fallbackOnNoAd="true">\n                <AdSystem>GDFP</AdSystem>\n                <Impression><![CDATA[').concat(t.fallback_imp_url, "]]></Impression>\n                <VASTAdTagURI><![CDATA[").concat(t.adtag_url, ']]></VASTAdTagURI>\n                <Extensions>\n                    <Extension type="waterfall" fallback_index="0" />\n                </Extensions>\n            </Wrapper>\n        </Ad>\n        <Ad id="fallback">\n            <Wrapper>\n                <AdSystem>ADS</AdSystem>\n                <Impression><![CDATA[').concat(t.fallback_imp_url, "]]></Impression>\n                <VASTAdTagURI><![CDATA[").concat(t.fallback_url, ']]></VASTAdTagURI>\n                <Extensions>\n                    <Extension type="waterfall" fallback_index="1" />\n                </Extensions>\n            </Wrapper>\n        </Ad>\n    </VAST>').trim(), l.adsResponse = u) : l.adTagUrl = d.url, l.linearAdSlotWidth = this.options.width, l.linearAdSlotHeight = this.options.height, l.nonLinearAdSlotWidth = this.options.width, l.nonLinearAdSlotHeight = this.options.height, l.forceNonLinearFullSlot = !0, this.options.vast_load_timeout && (l.vastLoadTimeout = this.options.vast_load_timeout), l.setAdWillAutoPlay(b.autoplayAllowed), l.setAdWillPlayMuted(b.autoplayRequiresMute), this.adsLoader.requestAds(l, f);
                                        try {
                                            this._broadcast("AD_SDK_REQUEST", {
                                                message: f
                                            })
                                        } catch (e) {}
                                        e(l)
                                    } catch (e) {
                                        throw new Error(e)
                                    }
                                }.bind(this))
                            }
                        }, {
                            key: "_getExternalVast",
                            value: function(e) {
                                try {
                                    var t = this.getCurrentAdPosition(e),
                                        r = ST.exist(this.gameData) && ST.get(t, this.gameData)
                                } catch (e) {
                                    console.log("external-vast err", e)
                                }
                                return r
                            }
                        }, {
                            key: "cancel",
                            value: function(e) {
                                var t;
                                !1 !== this.requestRunning && (this.requestRunning = !1, this._resetAdsLoader(), this._hide("cancel"), e = 0 <= (null == e || null == (e = e.message) ? void 0 : e.indexOf("NO_VAST_URL")), this._broadcast(t = "AD_SDK_CANCELED", {
                                    name: t,
                                    message: "Advertisement has been canceled.",
                                    status: "warning",
                                    noVast: e,
                                    analytics: {
                                        category: this.eventCategory,
                                        action: t,
                                        label: this.gameData.gameId
                                    }
                                }))
                            }
                        }, {
                            key: "_checkAutoPlay",
                            value: (VT = d(I.mark(function e() {
                                var o = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.abrupt("return", new Promise(function(r, e) {
                                                var n = this,
                                                    t = (O(this, o), navigator.userAgent.toLowerCase()); - 1 < t.indexOf("safari") && t.indexOf("chrome") < 0 ? r({
                                                    autoplayAllowed: !0,
                                                    autoplayRequiresMute: !0
                                                }) : BD({
                                                    inline: !0,
                                                    muted: !1
                                                }).then(function(e) {
                                                    O(this, n);
                                                    var t = e.result;
                                                    e.error, r(!0 === t ? {
                                                        autoplayAllowed: !0,
                                                        autoplayRequiresMute: !1
                                                    } : {
                                                        autoplayAllowed: !0,
                                                        autoplayRequiresMute: !0
                                                    })
                                                }.bind(this))
                                            }.bind(this)));
                                        case 1:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function() {
                                return VT.apply(this, arguments)
                            })
                        }, {
                            key: "_initDisplayContainerWithAutoPlay",
                            value: (WT = d(I.mark(function e() {
                                var t;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, this._checkAutoPlay(!1);
                                        case 2:
                                            return t = e.sent, this._autoplay = t, this.video_ad_player.autoplay = t.autoplayAllowed, this.video_ad_player.volume = t.autoplayRequiresMute ? 0 : 1, this.video_ad_player.muted = !!t.autoplayRequiresMute, t.adDisplayContainerInitialized || (this.adDisplayContainer.initialize(), this.adDisplayContainerInitialized = !0), e.abrupt("return", t);
                                        case 9:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function() {
                                return WT.apply(this, arguments)
                            })
                        }, {
                            key: "startAd",
                            value: (qT = d(I.mark(function e(t) {
                                var r, n, o = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (r = t.adType, n = t.params, this.adType_ = r, this.isAudioAd = !1, this.adContext = DT(DT({}, n), {}, {
                                                    adType: r
                                                }), "promo" === (null == n ? void 0 : n.adapter)) return e.abrupt("return", this._startPromo(n, r));
                                            e.next = 6;
                                            break;
                                        case 6:
                                            if ("adsense" !== (null == n ? void 0 : n.adapter)) e.next = 30;
                                            else if (r !== g.Interstitial) e.next = 23;
                                            else {
                                                if ("preroll" === (null == n ? void 0 : n.position)) return e.abrupt("return", this._startAdsensePlacementPreroll(t));
                                                e.next = 12
                                            }
                                            break;
                                        case 12:
                                            if ("start" === (null == n ? void 0 : n.position)) return e.abrupt("return", this._startAdsensePlacementStart(t));
                                            e.next = 16;
                                            break;
                                        case 16:
                                            if ("next" === (null == n ? void 0 : n.position)) return e.abrupt("return", this._startAdsensePlacementNext(t));
                                            e.next = 20;
                                            break;
                                        case 20:
                                            return e.abrupt("return", this._startAdsensePlacementPreroll(t));
                                        case 21:
                                            e.next = 28;
                                            break;
                                        case 23:
                                            if (r === g.Rewarded) return e.abrupt("return", this._startAdsensePlacementRewardedAd(t));
                                            e.next = 27;
                                            break;
                                        case 27:
                                        case 40:
                                            throw new Error("Unsupported ad type");
                                        case 28:
                                            e.next = 41;
                                            break;
                                        case 30:
                                            if (["ima", "spil", "audio"].some(function(e) {
                                                    return O(this, o), e === (null == n ? void 0 : n.adapter)
                                                }.bind(this))) {
                                                if (r === g.Interstitial) return e.abrupt("return", this._startInterstitialAd(n));
                                                e.next = 36
                                            } else e.next = 41;
                                            break;
                                        case 36:
                                            if (r === g.Rewarded) return e.abrupt("return", this._startRewardedAd(n));
                                            e.next = 40;
                                            break;
                                        case 41:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e) {
                                return qT.apply(this, arguments)
                            })
                        }, {
                            key: "preloadAd",
                            value: (KT = d(I.mark(function e(t) {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (t === g.Interstitial) return e.abrupt("return", "gdsdk://preloaded");
                                            e.next = 4;
                                            break;
                                        case 4:
                                            if (t === g.Rewarded) return e.abrupt("return", "gdsdk://preloaded");
                                            e.next = 8;
                                            break;
                                        case 8:
                                            throw new Error("Unsupported ad type");
                                        case 9:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return KT.apply(this, arguments)
                            })
                        }, {
                            key: "addAdComponents",
                            value: function() {
                                var e = this,
                                    t = function() {
                                        O(this, e), this.adsManager.resume()
                                    }.bind(this);
                                try {
                                    this.adResume = new M9(this.adContainer, t), this.adResume.add(), this.rewardedLabel = new P9(this.adContainer, t), this.rewardedLabel.add(), this.audioAdLabel = new j9(window.document.body), this.audioAdLabel.add(), this.audioAdLabel.hide()
                                } catch (e) {
                                    console.log("error on adding adResume", e)
                                }
                            }
                        }, {
                            key: "loadDisplayAd",
                            value: (ZT = d(I.mark(function e(c) {
                                var l = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.abrupt("return", new Promise(function() {
                                                var r = d(I.mark(function e(t, r) {
                                                    var n, o, i, a, s, u = this;
                                                    return I.wrap(function(e) {
                                                        for (;;) switch (e.prev = e.next) {
                                                            case 0:
                                                                return e.prev = 0, (o = c ? c.containerId : null) || r("Container id is not specified"), n = document.getElementById(o), document.getElementById(o) || r("No container is found with this id - ".concat(o)), void 0 === window.idhb.requestAds && r("Prebid.js wrapper script hit an error or didn't exist!"), o = c.slotId || "gd__banner@".concat(o), document.getElementById(o) || (a = "\n                    .gd__banner{\n                        z-index: ".concat(Pn, ";\n                        height: 100%;\n                        display: flex !important;\n                        align-items: center;\n                        justify-content: center;\n                    }"), document.getElementById("gd__banner__style") || ((i = document.createElement("style")).type = "text/css", i.id = "gd__banner__style", i.styleSheet ? i.styleSheet.cssText = a : i.appendChild(document.createTextNode(a)), n.appendChild(i)), (a = document.createElement("div")).id = o, a.classList.add("gd__banner"), n.appendChild(a)), e.next = 11, l._create_dp_display_context();
                                                            case 11:
                                                                l.atom_display = e.sent, l.atom_display, null != (i = l.atom_display) && i.params && window.idhb.setAdserverTargeting(null == (a = l.atom_display) ? void 0 : a.params), (s = {})[o] = {
                                                                    maxSize: [n.offsetWidth, n.offsetHeight]
                                                                }, window.idhb.requestAds({
                                                                    slots: s,
                                                                    callback: function(e) {
                                                                        O(this, u), JSON.stringify(e, null, 2)
                                                                    }.bind(this)
                                                                }), t(), e.next = 24;
                                                                break;
                                                            case 20:
                                                                e.prev = 20, e.t0 = e.catch(0), console.log("display_test error", e.t0), r(e.t0.message || e.t0);
                                                            case 24:
                                                            case "end":
                                                                return e.stop()
                                                        }
                                                    }, e, this, [
                                                        [0, 20]
                                                    ])
                                                }));
                                                return function(e, t) {
                                                    return r.apply(this, arguments)
                                                }
                                            }()));
                                        case 1:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return ZT.apply(this, arguments)
                            })
                        }, {
                            key: "_startInterstitialAd",
                            value: (HT = d(I.mark(function e(t) {
                                var r, n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 0, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 4;
                                            break;
                                        case 4:
                                            ! function() {
                                                if (O(this, i), Nu.fictionalIMAError) return this._broadcast("AD_ERROR", {
                                                    message: "fictional IMA error",
                                                    status: "error",
                                                    skipForward: !0
                                                }), !0
                                            }.bind(this), e.next = 7;
                                            break;
                                        case 7:
                                            return this.requestRunning = !0, e.next = 10, this._initDisplayContainerWithAutoPlay();
                                        case 10:
                                            return r = e.sent, e.next = 13, this._loadInterstitialAd(DT(DT({}, r), t));
                                        case 13:
                                            if (n = e.sent, o = n.success, n.args, o) {
                                                e.next = 18;
                                                break
                                            }
                                            return e.abrupt("return");
                                        case 18:
                                            r.autoplayRequiresMute && this.adsManager.setVolume(0), this.adsManager.init(this.options.width, this.options.height, google.ima.ViewMode.NORMAL), this.adsManager.start(), e.next = 28;
                                            break;
                                        case 23:
                                            throw e.prev = 23, e.t0 = e.catch(0), e.t0, this._onError(e.t0), e.t0;
                                        case 28:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 23]
                                ])
                            })), function(e) {
                                return HT.apply(this, arguments)
                            })
                        }, {
                            key: "_startPromo",
                            value: (zT = d(I.mark(function e(t, r) {
                                var n, o, i;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 0, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 4;
                                            break;
                                        case 4:
                                            return this.requestRunning = !0, this.adSuccess = !1, e.next = 8, this._initDisplayContainerWithAutoPlay();
                                        case 8:
                                            return n = e.sent, e.next = 11, this._loadPromo(DT(DT({}, n), t), r);
                                        case 11:
                                            if (o = e.sent, i = o.success, o.args, i) {
                                                e.next = 16;
                                                break
                                            }
                                            return e.abrupt("return");
                                        case 16:
                                            n.autoplayRequiresMute && this.adsManager.setVolume(0), this.adsManager.init(this.options.width, this.options.height, google.ima.ViewMode.NORMAL), this.adsManager.start(), this.msgrt.send("promo.adsense", {
                                                message: "".concat(t.position, " success")
                                            }), e.next = 27;
                                            break;
                                        case 22:
                                            throw e.prev = 22, e.t0 = e.catch(0), this.msgrt.send("promo.adsense.err", {
                                                message: "".concat(t.position, " failure,").concat(e.t0.message || e.t0, ", [").concat(this.parentURL, "]")
                                            }), this._onError(e.t0), e.t0;
                                        case 27:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 22]
                                ])
                            })), function(e, t) {
                                return zT.apply(this, arguments)
                            })
                        }, {
                            key: "_loadPromo",
                            value: (GT = d(I.mark(function e(t, r) {
                                var n;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return this._resetAdsLoader(), e.prev = 1, n = this.nextAdPosition(r), n = this._create_promo_context(n), this._requestPromo(n, DT({
                                                adType: g.Interstitial
                                            }, t)), e.next = 7, this._waitOnAdLoad();
                                        case 7:
                                            return e.abrupt("return", e.sent);
                                        case 10:
                                            throw e.prev = 10, e.t0 = e.catch(1), new Error(e.t0);
                                        case 13:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 10]
                                ])
                            })), function(e, t) {
                                return GT.apply(this, arguments)
                            })
                        }, {
                            key: "_loadInterstitialAd",
                            value: (FT = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (this._resetAdsLoader(), e.prev = 1, e.t0 = this.preloadedInterstitialAdVast, e.t0) {
                                                e.next = 7;
                                                break
                                            }
                                            return e.next = 6, this._getAdVast(g.Interstitial, t);
                                        case 6:
                                            e.t0 = e.sent;
                                        case 7:
                                            if (r = e.t0, delete this.preloadedInterstitialAdVast, r.url) {
                                                e.next = 12;
                                                break
                                            }
                                            throw new Error("NO_VAST_URL");
                                        case 12:
                                            return e.next = 14, this._requestAd(r, DT({
                                                adType: g.Interstitial
                                            }, t));
                                        case 14:
                                            return e.sent, e.next = 17, this._waitOnAdLoad();
                                        case 17:
                                            return e.abrupt("return", e.sent);
                                        case 20:
                                            throw e.prev = 20, e.t1 = e.catch(1), console.log("VAST_URL error", e.t1), new Error(e.t1);
                                        case 24:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 20]
                                ])
                            })), function(e) {
                                return FT.apply(this, arguments)
                            })
                        }, {
                            key: "_waitOnAdLoad",
                            value: function() {
                                var a = this;
                                return new Promise(function(r, e) {
                                    var n = this,
                                        o = (O(this, a), "videoad.preloadad"),
                                        t = (this.eventBus.unsubscribeScope(o), function(e) {
                                            var t = this;
                                            O(this, n), setTimeout(function() {
                                                O(this, t), this.eventBus.unsubscribeScope(o), r({
                                                    success: !0,
                                                    args: e
                                                })
                                            }.bind(this), 1)
                                        }.bind(this)),
                                        i = function(e) {
                                            var t = this;
                                            O(this, n), setTimeout(function() {
                                                O(this, t), this.eventBus.unsubscribeScope(o), r({
                                                    success: !1,
                                                    args: e
                                                })
                                            }.bind(this), 1)
                                        }.bind(this);
                                    this.eventBus.subscribe("AD_SDK_MANAGER_READY", t, o), this.eventBus.subscribe("AD_SDK_CANCELED", i, o), this.eventBus.subscribe("AD_ERROR", i, o)
                                }.bind(this))
                            }
                        }, {
                            key: "_startRewardedAd",
                            value: (NT = d(I.mark(function e(t) {
                                var r, n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 0, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 4;
                                            break;
                                        case 4:
                                            ! function() {
                                                if (O(this, i), Nu.fictionalIMAError) return this._broadcast("AD_ERROR", {
                                                    message: "fictional IMA error",
                                                    status: "error",
                                                    skipForward: !0
                                                }), !0
                                            }.bind(this), e.next = 7;
                                            break;
                                        case 7:
                                            return this.requestRunning = !0, e.next = 10, this._initDisplayContainerWithAutoPlay();
                                        case 10:
                                            return r = e.sent, e.next = 13, this._loadRewardedAd(DT(DT({}, r), t));
                                        case 13:
                                            if (n = e.sent, o = n.success, n.args, o) {
                                                e.next = 18;
                                                break
                                            }
                                            return e.abrupt("return");
                                        case 18:
                                            r.autoplayRequiresMute && this.adsManager.setVolume(0), this.adsManager.init(this.options.width, this.options.height, google.ima.ViewMode.NORMAL), this.adsManager.start(), e.next = 27;
                                            break;
                                        case 23:
                                            throw e.prev = 23, e.t0 = e.catch(0), this._onError(e.t0), e.t0;
                                        case 27:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 23]
                                ])
                            })), function(e) {
                                return NT.apply(this, arguments)
                            })
                        }, {
                            key: "_loadRewardedAd",
                            value: (BT = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (this._resetAdsLoader(), e.prev = 1, e.t0 = this.preloadedRewardedAdVast, e.t0) {
                                                e.next = 7;
                                                break
                                            }
                                            return e.next = 6, this._getAdVast(g.Rewarded, t);
                                        case 6:
                                            e.t0 = e.sent;
                                        case 7:
                                            return r = e.t0, delete this.preloadedRewardedAdVast, e.next = 11, this._requestAd(r, DT({
                                                adType: g.Rewarded
                                            }, t));
                                        case 11:
                                            return e.sent, e.next = 14, this._waitOnAdLoad();
                                        case 14:
                                            return e.abrupt("return", e.sent);
                                        case 17:
                                            throw e.prev = 17, e.t1 = e.catch(1), new Error(e.t1);
                                        case 20:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 17]
                                ])
                            })), function(e) {
                                return BT.apply(this, arguments)
                            })
                        }, {
                            key: "_preloadInterstitialAd",
                            value: ($T = d(I.mark(function e() {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 0, e.t0 = this.preloadedInterstitialAdVast, e.t0) {
                                                e.next = 6;
                                                break
                                            }
                                            return e.next = 5, this._getAdVast(g.Interstitial);
                                        case 5:
                                            e.t0 = e.sent;
                                        case 6:
                                            return this.preloadedInterstitialAdVast = e.t0, e.abrupt("return", this.preloadedInterstitialAdVast.url);
                                        case 10:
                                            throw e.prev = 10, e.t1 = e.catch(0), new Error(e.t1);
                                        case 13:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 10]
                                ])
                            })), function() {
                                return $T.apply(this, arguments)
                            })
                        }, {
                            key: "_preloadRewardedAd",
                            value: (UT = d(I.mark(function e() {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 0, e.t0 = this.preloadedRewardedAdVast, e.t0) {
                                                e.next = 6;
                                                break
                                            }
                                            return e.next = 5, this._getAdVast(g.Rewarded);
                                        case 5:
                                            e.t0 = e.sent;
                                        case 6:
                                            return this.preloadedRewardedAdVast = e.t0, e.abrupt("return", this.preloadedRewardedAdVast.url);
                                        case 10:
                                            throw e.prev = 10, e.t1 = e.catch(0), new Error(e.t1);
                                        case 13:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 10]
                                ])
                            })), function() {
                                return UT.apply(this, arguments)
                            })
                        }, {
                            key: "_onError",
                            value: function(e) {
                                this.cancel(e), this._clearSafetyTimer("ERROR")
                            }
                        }, {
                            key: "_hide",
                            value: function(e) {
                                this.video_ad_player && (this.video_ad_player.src = ""), this.activeAdContainer && (this.activeAdContainer.style.visibility = "hidden")
                            }
                        }, {
                            key: "_show",
                            value: function(e) {
                                var t, r, n, o = this;
                                this.activeAdContainer && (this.isAudioAd || (this.activeAdContainer.style.visibility = "visible"), t = null == e ? void 0 : e.mode, e.t4r = this.gameData.__t4r, r = this._isT4R(e), n = this._getT4ROptions(e), "loaded" === t ? (this.activeAdContainer.style.opacity = r ? .001 : 1, r && null != e && e.contentType.startsWith("video/") && (this.t4rButton = new U9(this.adContainer), this.t4rButton.add()), r && this.adsManager.setVolume(0), r && this._broadcast("AD_T4R"), r && setTimeout(function() {
                                    O(this, o), this.activeAdContainer.style.opacity = 1, this.adsManager.setVolume(1), this.t4rButton && this.t4rButton.hide()
                                }.bind(this), ((null == n ? void 0 : n.min) || 1234) + Math.random() * ((null == n ? void 0 : n.max) || 3210))) : "click" !== t && "first_quartile" !== t || (r && "click" === t && (n = null == (e = this._adrequest_user_context) ? void 0 : e.tnl_ad_pos, this.clickCount[n]++), this.t4rButton && this.t4rButton.hide(), this.activeAdContainer.style.opacity = 1, this.adsManager.setVolume(1)))
                            }
                        }, {
                            key: "_createPlayer",
                            value: function() {
                                var r = this,
                                    e = document.body || document.getElementsByTagName("body")[0],
                                    n = (this.adContainer = document.createElement("div"), this.adContainer.id = "".concat(this.prefix, "advertisement"), this.adContainer.style.position = this.thirdPartyContainer ? "absolute" : "fixed", this.adContainer.style.zIndex = Mn, this.adContainer.style.top = "0", this.adContainer.style.left = "0", this.adContainer.style.width = "100%", this.adContainer.style.height = "100%", this.thirdPartyContainer && (this.thirdPartyContainer.style.transform = null), document.createElement("video")),
                                    o = (n.setAttribute("playsinline", !0), n.setAttribute("webkit-playsinline", !0), n.id = "".concat(this.prefix, "advertisement_video"), n.style.position = "absolute", n.style.backgroundColor = "#000000", n.style.top = "0", n.style.left = "0", n.style.width = this.options.width + "px", n.style.height = this.options.height + "px", this.video_ad_player = n, this.adContainer.appendChild(n), document.createElement("div")),
                                    e = (o.id = "".concat(this.prefix, "advertisement_slot"), o.style.position = "absolute", o.style.top = "0", o.style.left = "0", o.style.width = this.options.width + "px", o.style.height = this.options.height + "px", this.adContainerInner = o, this.activeAdContainer = this.adContainer, window.activeAdContainer = this.activeAdContainer, this.thirdPartyContainer ? (this.adContainer.appendChild(o), this.thirdPartyContainer.appendChild(this.adContainer), this.activeAdContainer = this.thirdPartyContainer) : (this.adContainer.appendChild(o), e.appendChild(this.adContainer)), this.addAdComponents(), this.activeAdContainer.style.visibility = "hidden", function() {
                                        O(this, r);
                                        var e = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,
                                            t = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                                        this.options.width = this.thirdPartyContainer ? this.thirdPartyContainer.offsetWidth : e, this.options.height = this.thirdPartyContainer ? this.thirdPartyContainer.offsetHeight : t, o.style.width = this.options.width + "px", o.style.height = this.options.height + "px", n.style.width = this.options.width + "px", n.style.height = this.options.height + "px"
                                    }.bind(this));
                                window.addEventListener("resize", e), window.document.addEventListener("DOMContentLoaded", e)
                            }
                        }, {
                            key: "_setUpIMA",
                            value: function() {
                                this.adDisplayContainer = new google.ima.AdDisplayContainer(this.adContainerInner, this.video_ad_player), this.adsLoader = new google.ima.AdsLoader(this.adDisplayContainer), this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0), this.adsLoader.getSettings().setLocale(this.options.locale), this.adsLoader.getSettings().setVpaidMode(this._getVPAIDMode()), this.adsLoader.getSettings().setAutoPlayAdBreaks(!0);
                                var e = this.adsLoader.getSettings().getNumRedirects();
                                this.adsLoader.getSettings().setNumRedirects(2 * e), this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this._onAdsManagerLoaded, !1, this), this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this._onAdError, !1, this)
                            }
                        }, {
                            key: "_onAdsManagerLoaded",
                            value: function(e) {
                                var t = this,
                                    r = new google.ima.AdsRenderingSettings,
                                    r = (r.autoAlign = !1, r.enablePreloading = !1, r.restoreCustomPlaybackStateOnAdBreakComplete = !0, r.useStyledNonLinearAds = !0, r.uiElements = [google.ima.UiElements.AD_ATTRIBUTION, google.ima.UiElements.COUNTDOWN], this.adsManager = e.getAdsManager(this.video_ad_player, r), this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this._onAdError.bind(this), !1, this), this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.DURATION_CHANGE, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.INTERACTION, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.LINEAR_CHANGED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED, this._onAdEvent.bind(this), this), this.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED, this._onAdEvent.bind(this), this), window.addEventListener("resize", function() {
                                        O(this, t), this.adsManager && this.adsManager.resize(this.options.width, this.options.height, google.ima.ViewMode.NORMAL)
                                    }.bind(this)), this.adDisplayContainerInitialized || (this.adDisplayContainer.initialize(), this.adDisplayContainerInitialized = !0), new Date),
                                    n = r.getHours(),
                                    o = r.getDate(),
                                    i = r.getMonth(),
                                    r = r.getFullYear(),
                                    a = "AD_SDK_MANAGER_READY";
                                this._broadcast(a, {
                                    name: a,
                                    message: "AD SDK is ready",
                                    status: "success",
                                    analytics: {
                                        category: a,
                                        action: this.parentDomain,
                                        label: "h".concat(n, " d").concat(o, " m").concat(i, " y").concat(r)
                                    }
                                }), this._adrequest_user_context = e.getUserRequestContext()
                            }
                        }, {
                            key: "_onAdEvent",
                            value: function(e) {
                                var t, r, n, o = this,
                                    i = new Date,
                                    a = i.getHours(),
                                    s = i.getDate(),
                                    u = i.getMonth(),
                                    i = i.getFullYear(),
                                    c = (t = google.ima.AdEvent.Type, r = e.type, Object.keys(t).find(function(e) {
                                        return t[e] === r
                                    })),
                                    l = !1,
                                    d = (null == e || null == (d = e.getAd()) ? void 0 : d.getContentType()) || "",
                                    f = !d.startsWith("image") && !d.startsWith("text"),
                                    p = (this._sendIMAEventsToHB(e), document.getElementById("game")),
                                    h = "";
                                switch (e.type) {
                                    case google.ima.AdEvent.Type.AD_BREAK_READY:
                                        h = "Fired when an ad rule or a VMAP ad break would have played if autoPlayAdBreaks is false.";
                                        break;
                                    case google.ima.AdEvent.Type.AD_METADATA:
                                        h = "Fired when an ads list is loaded.";
                                        break;
                                    case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:
                                        this.contentPaused && (l = !0), this.isAudioAd && (this.audioAdLabel.hide(), this.isAudioAd = !1), h = "Fired when the ads manager is done playing all the ads.";
                                        break;
                                    case google.ima.AdEvent.Type.CLICK:
                                        var h = "Fired when the ad is clicked.",
                                            m = e.getAd().getContentType();
                                        this._show({
                                            mode: "click",
                                            contentType: m
                                        }), wT("act", "ad click");
                                        break;
                                    case google.ima.AdEvent.Type.COMPLETE:
                                        e.getAd(), l = this._is_completed(e.getAd()), h = "Fired when the ad completes playing.", this.adType_ === g.Rewarded && this._broadcast("SDK_REWARDED_WATCH_COMPLETE", {
                                            message: "",
                                            status: "success"
                                        });
                                        break;
                                    case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:
                                        this.gameData.fllc.enabled && (p.style.display = "none"), this.contentPaused = !0, h = "Fired when content should be paused. This usually happens right before an ad is about to cover the content.";
                                        break;
                                    case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:
                                        this.gameData.fllc.enabled && (p.style.display = "block"), h = "Fired when content should be resumed. This usually happens when an ad finishes or collapses.", this.contentPaused ? l = !0 : (this.requestRunning = !1, this._broadcast("AD_ERROR", {
                                            message: "got resume without pause, possibly with VMAP",
                                            status: "error",
                                            skipForward: !0
                                        })), this._hideAddResume(), this._hideRewardedLabel(), this.t4rButton && this.t4rButton.hide();
                                        break;
                                    case google.ima.AdEvent.Type.DURATION_CHANGE:
                                        h = "Fired when the ad's duration changes.";
                                        break;
                                    case google.ima.AdEvent.Type.FIRST_QUARTILE:
                                        h = "Fired when the ad playhead crosses first quartile.";
                                        m = e.getAd().getContentType();
                                        this._show({
                                            mode: "first_quartile",
                                            contentType: m
                                        });
                                        break;
                                    case google.ima.AdEvent.Type.IMPRESSION:
                                        h = "Fired when the impression URL has been pinged.", e.getAd(), console.log("gdsdk: eventname IMPRESSION", this.isAudioAd), this.isAudioAd && this.audioAdLabel.show();
                                        break;
                                    case google.ima.AdEvent.Type.INTERACTION:
                                        h = "Fired when an ad triggers the interaction callback. Ad interactions contain an interaction ID string in the ad data.";
                                        break;
                                    case google.ima.AdEvent.Type.LINEAR_CHANGED:
                                        h = "Fired when the displayed ad changes from linear to nonlinear, or vice versa.";
                                        break;
                                    case google.ima.AdEvent.Type.LOADED:
                                        m = e.getAd().getContentType();
                                        this._show({
                                            mode: "loaded",
                                            contentType: h = m
                                        });
                                        break;
                                    case google.ima.AdEvent.Type.LOG:
                                        e.getAdData().adError && (h = e.getAdData());
                                        break;
                                    case google.ima.AdEvent.Type.MIDPOINT:
                                        h = "Fired when the ad playhead crosses midpoint.";
                                        break;
                                    case google.ima.AdEvent.Type.PAUSED:
                                        f && this.adResume.show(), h = "Fired when the ad is paused.";
                                        break;
                                    case google.ima.AdEvent.Type.RESUMED:
                                        h = "Fired when the ad is resumed.", f && (this.adResume.hide(), this.rewardedLabel.hide());
                                        break;
                                    case google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED:
                                        h = "Fired when the displayed ads skippable state is changed.";
                                        break;
                                    case google.ima.AdEvent.Type.SKIPPED:
                                        l = this._is_completed(e.getAd()), h = "Fired when the ad is skipped by the user.", wT("act", "ad skipped"), this.t4rButton && this.t4rButton.hide();
                                        break;
                                    case google.ima.AdEvent.Type.STARTED:
                                        this.adType_ === g.Rewarded && this.rewardedLabel.show(), this._hideAddResume(), h = "Fired when the ad starts playing.";
                                        break;
                                    case google.ima.AdEvent.Type.THIRD_QUARTILE:
                                        h = "Fired when the ad playhead crosses third quartile.";
                                        break;
                                    case google.ima.AdEvent.Type.USER_CLOSE:
                                        l = this._is_completed(e.getAd()), h = "Fired when the ad is closed by the user.";
                                        break;
                                    case google.ima.AdEvent.Type.VOLUME_CHANGED:
                                        h = "Fired when the ad volume has changed.";
                                        break;
                                    case google.ima.AdEvent.Type.VOLUME_MUTED:
                                        h = "Fired when the ad volume has been muted."
                                }
                                "" !== c && "" !== h && (d = !this.contentPaused && e.type === google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, n = !this.contentPaused && e.type === google.ima.AdEvent.Type.ALL_ADS_COMPLETED, d || n || this.isAudioAd || this._broadcast(c, {
                                    name: c,
                                    message: h,
                                    status: "success",
                                    analytics: {
                                        category: c,
                                        action: this.parentDomain,
                                        label: "h".concat(a, " d").concat(s, " m").concat(u, " y").concat(i)
                                    }
                                })), l && !this.adSuccess && (this.adSuccess = !0, n = "Rainbow" === (null == (d = e.getAd()) ? void 0 : d.getAdSystem()) && (null == d ? void 0 : d.getWrapperAdIds().some(function(e) {
                                    return O(this, o), "promo" === e
                                }.bind(this))), null != d && d.getAdSystem(), null != d && d.getWrapperAdIds(), this._broadcast("AD_SUCCESS", {
                                    message: "Ad succeeded.",
                                    status: "success",
                                    isPromoSuccess: n
                                }), this.resetForNext(e))
                            }
                        }, {
                            key: "_run_atom_tag_aws_test",
                            value: function(e) {
                                var t, r, n, o, i, a, s, u = this;
                                try {
                                    null != (t = this.gameData) && null != (r = t.aws_tst) && r.enabled && null != (n = this.gameData) && null != (o = n.aws_tst) && null != (i = o.ep) && i.atm && (a = e.type, s = e.url, "none" !== a) && s && (s = s.replace("tag.atom.gamedistribution.com", "atom-tag-prod-aws.gamedistribution.com"), fetch(s).then(function() {
                                        O(this, u)
                                    }.bind(this)))
                                } catch (e) {}
                            }
                        }, {
                            key: "_findAtomTagUrl",
                            value: function(e, t) {
                                var r = this,
                                    n = {
                                        type: "none"
                                    };
                                try {
                                    var o = this.current_dp,
                                        i = o.id,
                                        a = o.error_url,
                                        s = o.impression_url,
                                        u = o.fallback_imp_url,
                                        c = o.promo_imp_green_url;
                                    if (!e && !t) return {
                                        type: "imp_err",
                                        url: a
                                    };
                                    var l = e.getWrapperAdIds().some(function(e) {
                                            return O(this, r), e === "".concat(i)
                                        }.bind(this)),
                                        d = e.getWrapperAdIds().some(function(e) {
                                            return O(this, r), "fallback" === e
                                        }.bind(this)),
                                        f = e.getWrapperAdIds().some(function(e) {
                                            return O(this, r), "promo" === e
                                        }.bind(this));
                                    l && t ? n = {
                                        type: "normal_imp",
                                        url: s
                                    } : l && !t ? n = {
                                        type: "normal_err",
                                        url: a
                                    } : f && t ? n = {
                                        type: "promo_imp",
                                        url: c
                                    } : d && t && (n = {
                                        type: "fallbacj_imp",
                                        url: u
                                    })
                                } catch (e) {}
                                return n
                            }
                        }, {
                            key: "_onAdError",
                            value: function(e) {
                                this.requestRunning = !1, this._resetAdsLoader(), this._clearSafetyTimer("ERROR"), this._hide("_onAdError"), this._sendIMAEventsToHB(e);
                                try {
                                    var t = e.getError(),
                                        r = t.getErrorCode().toString() || t.getVastErrorCode().toString(),
                                        n = this._getInnerErrorCode(t);
                                    QT.emit("AD_ERROR", r), this._broadcast("AD_ERROR", {
                                        message: r,
                                        details: n,
                                        status: "warning",
                                        analytics: {
                                            category: "AD_ERROR",
                                            action: n,
                                            label: r
                                        }
                                    }), this._hideAddResume()
                                } catch (e) {}
                            }
                        }, {
                            key: "_hideAddResume",
                            value: function() {
                                try {
                                    this.adResume && this.adResume.hide()
                                } catch (e) {
                                    console.log("Error on hide adResume", e)
                                }
                            }
                        }, {
                            key: "_hideRewardedLabel",
                            value: function() {
                                try {
                                    this.adType_ === g.Rewarded && this.rewardedLabel && this.rewardedLabel.hide()
                                } catch (e) {
                                    console.log("Error on hide adResume", e)
                                }
                            }
                        }, {
                            key: "_sendIMAEventsToHB",
                            value: function(e) {
                                if (window.idhb && "function" == typeof window.idhb.onImaEvent) try {
                                    window.idhb.onImaEvent({
                                        event: e
                                    })
                                } catch (e) {}
                            }
                        }, {
                            key: "_resetAdsLoader",
                            value: function() {
                                this.adsManager && (this.adsManager.destroy(), this.adsManager = null, this._adrequest_user_context = null), this.adsLoader && this.adsLoader.contentComplete()
                            }
                        }, {
                            key: "_startSafetyTimer",
                            value: function(e, t) {
                                var r = this;
                                this.safetyTimer && clearTimeout(this.safetyTimer), this.safetyTimer = window.setTimeout(function() {
                                    O(this, r), this.cancel(), this._clearSafetyTimer(t)
                                }.bind(this), e)
                            }
                        }, {
                            key: "_clearSafetyTimer",
                            value: function(e) {
                                void 0 !== this.safetyTimer && null !== this.safetyTimer && (clearTimeout(this.safetyTimer), this.safetyTimer = void 0)
                            }
                        }, {
                            key: "_getVPAIDMode",
                            value: function() {
                                return google.ima.ImaSdkSettings.VpaidMode.ENABLED
                            }
                        }, {
                            key: "_getPrebidScripts",
                            value: function() {
                                var e = ["js/null.js", "js/null.js"];
                                return this.options.hb_script ? [this.options.hb_script].concat(e) : e
                            }
                        }, {
                            key: "_getInnerErrorCode",
                            value: function(e) {
                                if (Ht(e.getInnerError)) {
                                    e = e.getInnerError();
                                    if (e) return Ht(e.getErrorCode) && Ht(e.getVastErrorCode) ? e.getErrorCode().toString() || e.getVastErrorCode().toString() : e.message
                                }
                            }
                        }, {
                            key: "resetForNext",
                            value: function() {
                                this.requestRunning = !1, this._hide("resetForNext")
                            }
                        }, {
                            key: "_createCustomAdVastUrl",
                            value: function(e, t) {
                                var r = this;
                                if (e) {
                                    var n, o = this.macros.transform(e, {
                                        get: function(e) {
                                            if (O(this, r), t && t.tnl_keys) return t.tnl_keys[e.toLowerCase()]
                                        }.bind(this)
                                    });
                                    for (n in o.query || {}) {
                                        var i = o.query[n];
                                        zt(i) && (o.query[n] = H.stringify(i))
                                    }
                                    e = new ce(o.url, !0);
                                    return lT(e.query, o.query || {}), DT({
                                        url: e.toString()
                                    }, t)
                                }
                            }
                        }, {
                            key: "_transformVast",
                            value: function(e, t) {
                                var r = {
                                    url: e.url
                                };
                                try {
                                    var n, o = new ce(e.url, !0),
                                        i = this._transformQuery(e, t, o),
                                        a = (i && (r.url = o.toString()), i ? o : new ce(e.url, !0));
                                    a.query.cust_params && (n = H.parse(a.query.cust_params), r.bidder = n.hb_bidder, r.cust_params = n), r.url_parsed = a
                                } catch (e) {
                                    r.hasError = !0, r.message = e.message, r.bidder = "error", console.log(e.message)
                                }
                                return r
                            }
                        }, {
                            key: "_transformQuery",
                            value: function(t, e, r) {
                                var n = this;
                                if (t && e && t.tnl_keys) {
                                    var o = this.options.vast_query;
                                    if (e.retry_on_success && this.options.retry_on_success && zt(this.options.retry_on_success.vast_query) ? o = this.options.retry_on_success.vast_query : e.retry_on_failure && this.options.retry_on_failure && zt(this.options.retry_on_failure.vast_query) && (o = this.options.retry_on_failure.vast_query), zt(o = Ft(o))) {
                                        var i = r.query;
                                        if (o.$$remove) {
                                            for (var a in i) new RegExp(o.$$remove, "i").test(a) && delete i[a];
                                            delete o.$$remove
                                        }
                                        var s = H.parse(i.cust_params);
                                        if (o.cust_params && o.cust_params.$$remove) {
                                            for (var u in s) new RegExp(o.cust_params.$$remove, "i").test(u) && delete s[u];
                                            delete o.cust_params.$$remove
                                        }
                                        e = this.macros.transform(o, {
                                            get: function(e) {
                                                return O(this, n), t.tnl_keys[e.toLowerCase()]
                                            }.bind(this)
                                        });
                                        return i.cust_params = s, lT(i, e), i.cust_params = H.stringify(i.cust_params), !0
                                    }
                                }
                            }
                        }, {
                            key: "_isExcludedBidderForT4R",
                            value: function() {
                                var t = this;
                                try {
                                    var e, r, n, o, i = (null == (e = this._adrequest_user_context) || null == (r = e.adTag) ? void 0 : r.bidder) || "adx",
                                        a = (this.msgrt.send("bidder", {
                                            message: i
                                        }), this._adrequest_user_context, 'bidder:"'.concat(i, '"'), (null == (n = this.gameData.t4rc) ? void 0 : n.bidder_exc) || []),
                                        s = (null == (o = this.gameData.t4rc) ? void 0 : o.bidder_inc) || [],
                                        u = !1;
                                    return 0 < s.length ? u = !s.some(function(e) {
                                        return O(this, t), e === i
                                    }.bind(this)) : 0 < a.length && (u = a.some(function(e) {
                                        return O(this, t), e === i
                                    }.bind(this))), u
                                } catch (t) {
                                    console.log("ex_bidder ERR", t)
                                }
                            }
                        }, {
                            key: "_isT4R",
                            value: function(e) {
                                if (!this.gameData.publishedAt) return !1;
                                var t = new Date(this.gameData.publishedAt);
                                if (((new Date).getTime() - t.getTime()) / 864e5 <= 10) return !1;
                                var t = this.gameData.meta,
                                    r = e.t4r.meta;
                                if ((null == t ? void 0 : t.ast.c) >= (null == r ? void 0 : r.ast.c) && (null == t || null == (t = t.sit) ? void 0 : t.c) >= (null == r || null == (t = r.sit) ? void 0 : t.c)) return !1;
                                if (this._isExcludedBidderForT4R()) return this.msgrt.send("bidder.ex", {
                                    message: "true"
                                }), !1;
                                this.msgrt.send("bidder.ex", {
                                    message: "false"
                                });
                                t = null == (r = this._adrequest_user_context) ? void 0 : r.tnl_ad_pos;
                                return !(this.clickCount[t] >= (null == (r = e.t4r[t]) ? void 0 : r.count)) && (null != e && null != (r = e.contentType) && r.startsWith("image/") || "text" === (null == e ? void 0 : e.contentType) ? t && (null == (r = e.t4r[t]) ? void 0 : r.enabled) : !(null == e || !e.contentType.startsWith("video/")) && 0 < (r = (null == (r = e.t4r[t]) ? void 0 : r.viper) || 0) && (r = Math.random() < r, t) && r && (null == (r = e.t4r[t]) ? void 0 : r.enabled))
                            }
                        }, {
                            key: "_isVMAP",
                            value: function(e) {
                                var t, r;
                                return !!e && (t = "preroll" === e && (!0 === (null == (t = this.gameData) || null == (t = t.pAds) ? void 0 : t.vmap) || !0 === (null == (t = this.gameData) || null == (t = t.pAds) || null == (t = t.vmap) ? void 0 : t.enabled)) || "midroll" === e && (!0 === (null == (t = this.gameData) || null == (t = t.mAds) ? void 0 : t.vmap) || !0 === (null == (t = this.gameData) || null == (t = t.mAds) || null == (t = t.vmap) ? void 0 : t.enabled)) || "rewarded" === e && (!0 === (null == (t = this.gameData) || null == (t = t.rAds) ? void 0 : t.vmap) || !0 === (null == (t = this.gameData) || null == (t = t.rAds) || null == (t = t.vmap) ? void 0 : t.enabled))) && (r = this._get_vmap_config(e), e = this.adCounter[e], void 0 !== (null == r ? void 0 : r.start) ? e >= (null == r ? void 0 : r.start) : t)
                            }
                        }, {
                            key: "_getT4ROptions",
                            value: function(e) {
                                var t, r = null == (t = this._adrequest_user_context) ? void 0 : t.tnl_ad_pos;
                                switch (r) {
                                    case "preroll":
                                    case "midroll":
                                    case "rewarded":
                                        return e.t4r[r]
                                }
                            }
                        }, {
                            key: "_is_completed",
                            value: function(e) {
                                var t = e.getContentType(),
                                    e = e.getAdPodInfo();
                                return !(!t.startsWith("image/") && "text" !== t && 1 !== e.getTotalAds())
                            }
                        }, {
                            key: "_get_vmap_context",
                            value: function(e) {
                                for (var t = e.adtag, r = e.position, n = e.config, o = e.dp, i = n.count || 2, a = [], s = 1; s <= i; s++) {
                                    var u = {};
                                    u.adtag = this._createCustomAdVastUrl(n["vast_" + s]) || t, u.position = r, u.dp = n["vast_" + s] ? void 0 : o, a.push(u)
                                }
                                return a
                            }
                        }, {
                            key: "_get_vmap_config",
                            value: function(e) {
                                var t;
                                switch (e) {
                                    case "preroll":
                                        return null == (t = this.gameData) || null == (t = t.pAds) ? void 0 : t.vmap;
                                    case "midroll":
                                        return null == (t = this.gameData) || null == (t = t.mAds) ? void 0 : t.vmap;
                                    case "rewarded":
                                        return null == (t = this.gameData) || null == (t = t.rAds) ? void 0 : t.vmap;
                                    default:
                                        return null == (t = this.gameData) || null == (t = t.pAds) ? void 0 : t.vmap
                                }
                            }
                        }, {
                            key: "_isDP",
                            value: function(e) {
                                var t;
                                return !!e && !0 === (null == (t = this.gameData) || null == (t = t.dp) || null == (t = t[e]) ? void 0 : t.enabled)
                            }
                        }, {
                            key: "_create_dp_display_context",
                            value: function() {
                                var i = this;
                                return new Promise(function(t) {
                                    var r = this;
                                    O(this, i);
                                    try {
                                        var e = {
                                                id: this.topDomain || this.parentDomain,
                                                au: "display",
                                                ty: "display",
                                                aid: this.gameData.gameId,
                                                pgu: this.parentURL
                                            },
                                            n = new L9(this.gameData).checkCustomParams(),
                                            o = (n && (e.cp = n), encodeURIComponent(cn(JSON.stringify(e))));
                                        fetch("js/null.js?https://tag.atom.gamedistribution.com/v1/atm?ar=".concat(o)).then(function(e) {
                                            return O(this, r), e.json()
                                        }.bind(this)).then(function(e) {
                                            if (O(this, r), !e || !e.p) return this.msgrt.send("dp.na", {
                                                message: "atom"
                                            }), t();
                                            e = e.p / 100;
                                            this.msgrt.send("dp.fp", {
                                                message: e
                                            }), t({
                                                params: {
                                                    fp: e
                                                },
                                                error_url: "https://tag.atom.gamedistribution.com/v1/err?ar=".concat(o),
                                                impression_url: "https://tag.atom.gamedistribution.com/v1/imp?ar=".concat(o)
                                            })
                                        }.bind(this)).catch(function(e) {
                                            O(this, r), this.msgrt.send("dp.err", {
                                                message: (null == e ? void 0 : e.message) || e
                                            }), t()
                                        }.bind(this))
                                    } catch (e) {
                                        this.msgrt.send("dp.err", {
                                            message: (null == e ? void 0 : e.message) || e
                                        }), t()
                                    }
                                }.bind(this))
                            }
                        }, {
                            key: "_create_promo_context",
                            value: function(e) {
                                var t = this,
                                    r = {
                                        id: this.topDomain || this.parentDomain,
                                        au: e || "unknown",
                                        ty: "video",
                                        aid: this.gameData.gameId,
                                        pgu: this.parentURL
                                    },
                                    e = Object.keys(r).map(function(e) {
                                        return O(this, t), "".concat(e, "=").concat(encodeURIComponent(r[e]))
                                    }.bind(this)).join("&"),
                                    n = (encodeURIComponent(cn(JSON.stringify(r))), null == (n = this.gameData.promo) ? void 0 : n.rainbow),
                                    n = null == n ? void 0 : n.enabled,
                                    e = "https://tag.atom.gamedistribution.com/v1/rainbow/?".concat(e),
                                    o = n ? e : void 0;
                                return function() {
                                    O(this, t), Nu.promoError && (console.log("promo-test fictional promo error"), o = void 0)
                                }.bind(this), {
                                    promo_url: o,
                                    promo_imp_blue_url: n ? "https://tag.atom.gamedistribution.com/v1/rainbow/blue" : void 0,
                                    promo_imp_green_url: n ? "https://tag.atom.gamedistribution.com/v1/rainbow/green" : void 0
                                }
                            }
                        }, {
                            key: "_create_dp_context",
                            value: function(a, s) {
                                var t, u = this;
                                return new Promise((t = d(I.mark(function e(t) {
                                    var r, n, o, i = this;
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                if (e.prev = 0, u._isDP(a)) {
                                                    e.next = 5;
                                                    break
                                                }
                                                return u.msgrt.send("dp.na", {
                                                    message: "rule"
                                                }), e.abrupt("return", t());
                                            case 5:
                                                o = {
                                                    id: u.topDomain || u.parentDomain,
                                                    au: a || "unknown",
                                                    ty: "video",
                                                    aid: u.gameData.gameId,
                                                    pgu: u.parentURL
                                                }, (r = new L9(u.gameData).checkCustomParams()) && (o.cp = r), n = encodeURIComponent(cn(JSON.stringify(o))), null != s && s.adapterIndex, null != s && s.isLastAdapter, null != (o = null == (r = u.gameData.promo) ? void 0 : r.rainbow) && o.enabled, null != s && s.isLastAdapter, fetch("https://tag.atom.gamedistribution.com/v1/atm?ar=".concat(n)).then(function(e) {
                                                    return O(this, i), e.json()
                                                }.bind(this)).then(function(e) {
                                                    if (O(this, i), !e || !e.p) return u.msgrt.send("dp.na", {
                                                        message: "atom"
                                                    }), t();
                                                    e = e.p / 100;
                                                    u.msgrt.send("dp.fp", {
                                                        message: e
                                                    }), t({
                                                        id: Date.now(),
                                                        floor_price: e,
                                                        error_url: "https://tag.atom.gamedistribution.com/v1/err?ar=".concat(n, "&ec=[ERRORCODE]"),
                                                        impression_url: "https://tag.atom.gamedistribution.com/v1/imp?ar=".concat(n),
                                                        skip_url: "https://tag.atom.gamedistribution.com/v1/skp?ar=".concat(n),
                                                        promo_url: void 0,
                                                        promo_imp_blue_url: void 0,
                                                        promo_imp_green_url: void 0
                                                    })
                                                }.bind(this)).catch(function(e) {
                                                    O(this, i), u.msgrt.send("dp.err", {
                                                        message: (null == e ? void 0 : e.message) || e
                                                    }), t()
                                                }.bind(this)), e.next = 20;
                                                break;
                                            case 16:
                                                e.prev = 16, e.t0 = e.catch(0), u.msgrt.send("dp.err", {
                                                    message: (null === e.t0 || void 0 === e.t0 ? void 0 : e.t0.message) || e.t0
                                                }), t();
                                            case 20:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e, this, [
                                        [0, 16]
                                    ])
                                })), function(e) {
                                    return t.apply(this, arguments)
                                }))
                            }
                        }, {
                            key: "_extend_dp_with_adsense",
                            value: function(e, t) {
                                if (e && t) try {
                                    var r, n, o = new ce(t.vastUrl, !0);
                                    null != (r = o.query) && r.cust_params && (n = H.parse(o.query.cust_params)).tnl_asset_id && (n.adsense = 1, o.query.cust_params = H.stringify(n, !1), e.fallback_url = o.toString(), e.fallback_imp_url = "https://tag.atom.gamedistribution.com/v1/rainbow/green")
                                } catch (e) {}
                            }
                        }, {
                            key: "_extend_hl_url",
                            value: function(e) {
                                e.dp;
                                var t = e.hl,
                                    r = (e.src, e.tnl_keys),
                                    n = !0 !== (null == t ? void 0 : t.bidFloorApplied) ? 0 : 1;
                                0 === n && null != r && r.hasOwnProperty("fp") ? n = 2 : 1 !== n || null != r && r.hasOwnProperty("fp") || (n = 3), r.bfa = n;
                                try {
                                    var o, i, a = new ce(e.url, !0);
                                    null != (o = a.query) && o.cust_params && ((i = H.parse(a.query.cust_params)).bfa = n, i.adsense = 0, a.query.cust_params = H.stringify(i, !1), e.url = a.toString(), t.vastUrl = e.url)
                                } catch (e) {} finally {
                                    this.msgrt.send("bfa", {
                                        message: n
                                    })
                                }
                            }
                        }, {
                            key: "_init_hl_script",
                            value: (jT = d(I.mark(function e(t) {
                                var r, n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return o = this._getPrebidScripts(), n = o[0], r = function() {
                                                return O(this, i), !1
                                            }.bind(this), window.idhb = window.idhb || {
                                                iabCmpExists: r
                                            }, window.idhb.options = window.idhb.options || {}, Object.assign(window.idhb.options, {
                                                assetId: this.gameData.gameId,
                                                configUrl: this.topDomain || this.parentDomain,
                                                parentUrl: this.parentURL,
                                                pageType: "gd"
                                            }), "undefined" === window.idhb.options.configUrl && (window.idhb.options.configUrl = null), window.idhb.que = window.idhb.que || [], (r = new URL(n)).searchParams.append("referer", window.idhb.options.configUrl), n = r.href, e.next = 13, bn(n, "gdsdk_prebid", {
                                                alternates: o,
                                                error_prefix: "Blocked:",
                                                exists: function() {
                                                    return O(this, i), window.idhb.requestAds
                                                }.bind(this)
                                            });
                                        case 13:
                                            r = hn("ch", window.location.href), n = hn("ch_date", window.location.href), o = {
                                                tnl_content_category: this.category.toLowerCase()
                                            }, r && (o.channel = r), n && (o.ch_date = n), window.idhb.setAdserverTargeting(o), window.idhb.allowPersonalizedAds(!!parseInt(this.userAllowedPersonalizedAds)), window.idhb.addEventListener("slotRenderEnded", function(e) {
                                                var t = this;
                                                O(this, i);
                                                try {
                                                    var r, n = 1 === (n = e.slotId.split("@")).length ? n[0] : n[1];
                                                    e.isEmpty ? (null != (r = this.atom_display) && r.error_url && (fetch(this.atom_display.error_url).catch(function(e) {
                                                        O(this, t)
                                                    }.bind(this)), delete this.atom_display), this._broadcast("DISPLAYAD_ERROR", {
                                                        message: n,
                                                        status: "warning"
                                                    })) : (this.atom_display.impression_url && (fetch(this.atom_display.impression_url).catch(function(e) {
                                                        O(this, t)
                                                    }.bind(this)), delete this.atom_display), this._broadcast("DISPLAYAD_IMPRESSION", {
                                                        message: n,
                                                        status: "success"
                                                    }))
                                                } catch (e) {}
                                            }.bind(this));
                                        case 21:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e) {
                                return jT.apply(this, arguments)
                            })
                        }, {
                            key: "_init_ima_script",
                            value: (PT = d(I.mark(function e(t) {
                                var r, n, o = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return r = ["https://imasdk.googleapis.com/js/sdkloader/ima3_debug.js", "https://imasdk.googleapis.com/js/sdkloader/ima3.js", "http://imasdk.googleapis.com/js/sdkloader/ima3_debug.js", "http://imasdk.googleapis.com/js/sdkloader/ima3.js"], n = this.options.debug ? r[0] : r[1], e.next = 4, bn(n, "gdsdk_ima", {
                                                alternates: r,
                                                error_prefix: "Blocked:",
                                                exists: function() {
                                                    return O(this, o), window.google && window.google.ima
                                                }.bind(this)
                                            });
                                        case 4:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e) {
                                return PT.apply(this, arguments)
                            })
                        }, {
                            key: "_init_afg_script",
                            value: (MT = d(I.mark(function e(t) {
                                var r, n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (this.gameData.afg_disabled) return e.abrupt("return");
                                            e.next = 3;
                                            break;
                                        case 3:
                                            return (o = {
                                                crossorigin: "anonymous"
                                            })["data-ad-client"] = 0 < (null == t || null == (r = t.adsense_client) ? void 0 : r.length) ? t.adsense_client : "ca-pub-2316275586951220", o["data-ad-frequency-hint"] = "30s", o.allow = "autoplay", 0 < (null == t || null == (r = t.adsense_channel) ? void 0 : r.length) && (o["data-ad-channel"] = t.adsense_channel), 0 < (null == t || null == (n = t.adsense_host) ? void 0 : n.length) && (o["data-ad-host"] = t.adsense_host), !0 === (null == t ? void 0 : t.adsense_adbreak_test) && (o["data-adbreak-test"] = "on"), e.next = 14, bn("js/null.js", "afg", {
                                                error_prefix: "Blocked:",
                                                exists: function() {
                                                    return O(this, i), !!window.adsbygoogle
                                                }.bind(this),
                                                attrs: o
                                            });
                                        case 14:
                                            window.adsbygoogle = window.adsbygoogle || [], window.adsbygoogle.push({
                                                sound: "on",
                                                preloadAdBreaks: "on"
                                            });
                                        case 16:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e) {
                                return MT.apply(this, arguments)
                            })
                        }, {
                            key: "fixOutOfBounds",
                            value: function() {
                                try {
                                    if (this.gameData.afgszf && this.gameData.afgszf.enabled)
                                        for (var e = this.gameData.afgszf, t = e.height, r = e.scrolls, n = t || "120vh", o = r || !0, i = document.getElementsByClassName("adsbygoogle"), a = 0; a < i.length; a++) {
                                            var s, u = i[a],
                                                c = u && (null == (s = u.children[0]) ? void 0 : s.children[0]);
                                            c && "IFRAME" === c.tagName && c.style.height !== n && (c.style.height = n, o) && (c.parentElement.style.overflow = "auto")
                                        }
                                } catch (e) {
                                    "out-of-bounds error: ".concat(e.message)
                                }
                            }
                        }, {
                            key: "clearSession",
                            value: function() {
                                this.requestRunning = !1
                            }
                        }, {
                            key: "_startAdsensePlacementRewardedAd",
                            value: (LT = d(I.mark(function e(t) {
                                var r, n, o, i, a, s, u, c, l = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (t.params, e.prev = 1, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 5;
                                            break;
                                        case 5:
                                            ! function() {
                                                if (O(this, l), Nu.fictionalAdSenseError || t.params.shouldFail) return this._broadcast("AD_ERROR", {
                                                    message: "fictional adsense rewarded error",
                                                    status: "error",
                                                    skipForward: !0
                                                }), !0
                                            }.bind(this), e.next = 8;
                                            break;
                                        case 8:
                                            this.requestRunning = !0, this._send_atom_event("sg.ad.rw.requested"), r = !1, n = function() {
                                                O(this, l), r = !0, this.fixOutOfBounds(), this._broadcast("CONTENT_PAUSE_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("IMPRESSION", {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), o = function() {
                                                O(this, l), r = !0, this._broadcast("CONTENT_RESUME_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), i = function() {
                                                O(this, l), r = !0, this._send_atom_event("sg.ad.rw.dismissed")
                                            }.bind(this), a = function() {
                                                O(this, l), r = !0, this._broadcast("COMPLETE", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("SDK_REWARDED_WATCH_COMPLETE", {
                                                    message: "",
                                                    status: "success"
                                                }), this._send_atom_event("sg.ad.rw.viewed")
                                            }.bind(this), s = function(e) {
                                                O(this, l), r = !0, e()
                                            }.bind(this), u = function(e) {
                                                O(this, l), r = !0, this.resetForNext();
                                                var t = "rewarded";
                                                this.adCounter[t] = this.adCounter[t] || 0, this.adCounter[t]++, "viewed" === e.breakStatus ? this._broadcast("AD_SUCCESS", {
                                                    message: "Ad succeeded.",
                                                    status: "success"
                                                }) : (this._broadcast("AD_ERROR", {
                                                    message: e.breakStatus,
                                                    status: "error",
                                                    skipForward: !0
                                                }), "dismissed" !== e.breakStatus && this._send_atom_event("sg.dbg.rw", e))
                                            }.bind(this), c = function(e) {
                                                window.adsbygoogle.push(e)
                                            }, setTimeout(function() {
                                                O(this, l), r || (Ls("gd-adflow adsense.reward timeout happened!"), this.requestRunning = !1, this._broadcast("AD_ERROR", {
                                                    message: "timeout",
                                                    status: "error",
                                                    skipForward: !0
                                                }), this._send_atom_event("sg.dbg.rw", {
                                                    breakStatus: "timeout"
                                                }))
                                            }.bind(this), 1e3), c({
                                                type: "reward",
                                                name: "reward-in-game",
                                                beforeAd: n,
                                                afterAd: o,
                                                adDismissed: i,
                                                adViewed: a,
                                                beforeReward: s,
                                                adBreakDone: u
                                            }), e.next = 26;
                                            break;
                                        case 22:
                                            throw e.prev = 22, e.t0 = e.catch(1), this._onError(e.t0), e.t0;
                                        case 26:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 22]
                                ])
                            })), function(e) {
                                return LT.apply(this, arguments)
                            })
                        }, {
                            key: "_startAdsensePlacementPreroll",
                            value: (CT = d(I.mark(function e(t) {
                                var r, n = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (t.params, e.prev = 1, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 5;
                                            break;
                                        case 5:
                                            ! function() {
                                                if (O(this, n), Nu.fictionalAdSenseError || t.params.shouldFail) return this._broadcast("AD_ERROR", {
                                                    message: "fictional adsense preroll error",
                                                    status: "error"
                                                }), !0
                                            }.bind(this), e.next = 8;
                                            break;
                                        case 8:
                                            this.requestRunning = !0, this._send_atom_event("sg.ad.pr.requested"), r = function(e) {
                                                O(this, n), this.resetForNext();
                                                var t = "preroll";
                                                this.adCounter[t] = this.adCounter[t] || 0, this.adCounter[t]++, "viewed" === e.breakStatus ? (this._send_atom_event("sg.ad.pr.viewed"), this._broadcast("CONTENT_PAUSE_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("IMPRESSION", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("COMPLETE", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("AD_SUCCESS", {
                                                    message: "Ad succeeded.",
                                                    status: "success"
                                                }), this._broadcast("CONTENT_RESUME_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                })) : (this._broadcast("AD_ERROR", {
                                                    message: e.breakStatus,
                                                    status: "error"
                                                }), this._send_atom_event("sg.dbg.pr", e))
                                            }.bind(this), window.adsbygoogle.push({
                                                type: "preroll",
                                                adBreakDone: r
                                            }), e.next = 19;
                                            break;
                                        case 15:
                                            throw e.prev = 15, e.t0 = e.catch(1), this._onError(e.t0), e.t0;
                                        case 19:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 15]
                                ])
                            })), function(e) {
                                return CT.apply(this, arguments)
                            })
                        }, {
                            key: "_startAdsensePlacementStart",
                            value: (IT = d(I.mark(function e(t) {
                                var r, n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (t.params, e.prev = 1, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 5;
                                            break;
                                        case 5:
                                            ! function() {
                                                if (O(this, i), Nu.fictionalAdSenseError || t.params.shouldFail) return this._broadcast("AD_ERROR", {
                                                    message: "fictional adsense preroll error 2",
                                                    status: "error"
                                                }), !0
                                            }.bind(this), e.next = 8;
                                            break;
                                        case 8:
                                            this.requestRunning = !0, this._send_atom_event("sg.ad.pr.requested"), r = function() {
                                                O(this, i), this.fixOutOfBounds(), this._broadcast("CONTENT_PAUSE_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("IMPRESSION", {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), n = function() {
                                                O(this, i), this._broadcast("CONTENT_RESUME_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), o = function(e) {
                                                O(this, i), this.resetForNext();
                                                var t = "preroll";
                                                this.adCounter[t] = this.adCounter[t] || 0, this.adCounter[t]++, "viewed" === e.breakStatus ? (this._send_atom_event("sg.ad.pr.viewed"), this._broadcast("COMPLETE", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("AD_SUCCESS", {
                                                    message: "Ad succeeded.",
                                                    status: "success"
                                                })) : (this._broadcast("AD_ERROR", {
                                                    message: e.breakStatus,
                                                    status: "error"
                                                }), this._send_atom_event("sg.dbg.pr", e))
                                            }.bind(this), window.adsbygoogle.push({
                                                type: "start",
                                                name: "start-in-game",
                                                beforeAd: r,
                                                afterAd: n,
                                                adBreakDone: o
                                            }), e.next = 21;
                                            break;
                                        case 17:
                                            throw e.prev = 17, e.t0 = e.catch(1), this._onError(e.t0), e.t0;
                                        case 21:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 17]
                                ])
                            })), function(e) {
                                return IT.apply(this, arguments)
                            })
                        }, {
                            key: "_startAdsensePlacementNext",
                            value: (OT = d(I.mark(function e(t) {
                                var r, n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (t.params, e.prev = 1, this.requestRunning) return this._broadcast("AD_IS_ALREADY_RUNNING", {
                                                status: "warning"
                                            }), e.abrupt("return");
                                            e.next = 5;
                                            break;
                                        case 5:
                                            ! function() {
                                                if (O(this, i), Nu.fictionalAdSenseError || t.params.shouldFail) return this._broadcast("AD_ERROR", {
                                                    message: "fictional adsense midroll error",
                                                    status: "error"
                                                }), !0
                                            }.bind(this), e.next = 8;
                                            break;
                                        case 8:
                                            this.requestRunning = !0, this._send_atom_event("sg.ad.mr.requested"), r = function() {
                                                O(this, i), this.fixOutOfBounds(), this._broadcast("CONTENT_PAUSE_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("IMPRESSION", {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), n = function() {
                                                O(this, i), this._broadcast("CONTENT_RESUME_REQUESTED", {
                                                    message: "",
                                                    status: "success"
                                                })
                                            }.bind(this), o = function(e) {
                                                O(this, i), this.resetForNext();
                                                var t = "midroll";
                                                this.adCounter[t] = this.adCounter[t] || 0, this.adCounter[t]++, "viewed" === e.breakStatus ? (this._send_atom_event("sg.ad.mr.viewed"), this._broadcast("COMPLETE", {
                                                    message: "",
                                                    status: "success"
                                                }), this._broadcast("AD_SUCCESS", {
                                                    message: "Ad succeeded.",
                                                    status: "success"
                                                })) : (this._broadcast("AD_ERROR", {
                                                    message: e.breakStatus,
                                                    status: "error"
                                                }), this._send_atom_event("sg.dbg.mr", e))
                                            }.bind(this), window.adsbygoogle.push({
                                                type: "next",
                                                name: "next-in-game",
                                                beforeAd: r,
                                                afterAd: n,
                                                adBreakDone: o
                                            }), e.next = 21;
                                            break;
                                        case 17:
                                            throw e.prev = 17, e.t0 = e.catch(1), this._onError(e.t0), e.t0;
                                        case 21:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [1, 17]
                                ])
                            })), function(e) {
                                return OT.apply(this, arguments)
                            })
                        }, {
                            key: "_send",
                            value: function(e, t) {
                                try {
                                    var r = this.msgrt,
                                        n = r._layout,
                                        o = r._ua,
                                        i = {
                                            tp: e,
                                            ct: 0,
                                            vrs: this.PackageJSON.version,
                                            url: this.parentURL,
                                            rfr: document.referrer,
                                            tdmn: this.topDomain || this.parentDomain,
                                            dpth: 0,
                                            args: t,
                                            ua: {
                                                brnm: o.browser.name,
                                                brvs: o.browser.version,
                                                osnm: o.os.name,
                                                osvs: o.os.version,
                                                dvmd: o.device.model,
                                                w: n.w,
                                                h: n.h
                                            }
                                        };
                                    return fetch("js/null.js?https://tag.atom.gamedistribution.com/v1/dmp?ar=".concat(encodeURIComponent(cn(JSON.stringify(i)))))
                                } catch (e) {}
                            }
                        }, {
                            key: "_send_atom_event",
                            value: function(e, t) {
                                var r = {
                                        gid: this.gameData.slug,
                                        md5: this.gameData.gameId,
                                        pid: 0,
                                        pnm: this.gameData.pname,
                                        ctry: this.gameData.ctry,
                                        lcl: "en",
                                        hle: 1,
                                        ads: 1,
                                        args: t,
                                        href: window.location.href
                                    },
                                    n = (new qk).get(),
                                    r = DT(DT({}, r), n);
                                return r = t ? DT(DT({}, r), t) : r, this._send(e, r)
                            }
                        }, {
                            key: "_isAfgPositionNext",
                            value: function(e) {
                                return void 0 !== e.adTimestamp
                            }
                        }, {
                            key: "_isAfgPositionStart",
                            value: function(e) {
                                return void 0 === e.adTimestamp && (this.adCounter[e = "preroll"] = this.adCounter[e] || 0, 0 === this.adCounter[e])
                            }
                        }, {
                            key: "attachAfgPosition",
                            value: function(e) {
                                var t = e.params.position;
                                switch (t) {
                                    case "preroll":
                                    case "start":
                                    case "pause":
                                    case "next":
                                    case "browse":
                                    case "reward":
                                        return
                                }
                                var r = e.adType;
                                r === g.Rewarded ? t = "reward" : r === g.Interstitial && (this._isAfgPositionStart(e) ? t = null == (r = this.gameData.pAds) || !r.enabled || null != (r = this.gameData.loader) && r.enabled ? "start" : "next" : this._isAfgPositionNext(e) && (t = "next")), e.params.position = t = t || "preroll"
                            }
                        }, {
                            key: "_broadcast",
                            value: function(t, e) {
                                var r = this,
                                    n = !1,
                                    o = (["AD_ERROR"].some(function(e) {
                                        return O(this, r), e === t
                                    }.bind(this)) && (n = !this.adContext.isLastAdapter || this.adContext.extraPromoRunOnFail), this.getCurrentAdPosition(this.adContext.adType));
                                this.eventBus.broadcast(t, DT(DT({}, e), {}, {
                                    skipForward: n,
                                    adPosition: o
                                }))
                            }
                        }]), sO),
                        rO = pe(function e(t) {
                            var r = this,
                                n = (le(this, e), Fu(this, "load", d(I.mark(function e() {
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                return e.next = 2, pg(r.moduleName);
                                            case 2:
                                                r.module = e.sent;
                                            case 3:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e)
                                }))), Fu(this, "promo", d(I.mark(function e() {
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                if (r.module) {
                                                    e.next = 3;
                                                    break
                                                }
                                                return e.next = 3, r.load();
                                            case 3:
                                                return e.abrupt("return", r.module[r.moduleDefault]);
                                            case 4:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e)
                                }))), t.package || "gd-sdk-stone-dynamic"),
                                o = t.package_version || "1.1.1",
                                i = t.template || "puzzle",
                                t = t.dependencies || [];
                            this.moduleName = "GDPromoByOrbit", this.moduleDefault = i.charAt(0).toUpperCase() + i.slice(1), this.moduleConfig = {
                                source: "https://pm.azerioncircle.com/@bygd/".concat(n, "/").concat(o, "/dist/").concat(i.toLowerCase(), "/iife/index.js"),
                                dependencies: t
                            }, rg(this.moduleName, this.moduleConfig)
                        }),
                        nO = pe(function e(t) {
                            var r = this,
                                n = (le(this, e), Fu(this, "load", d(I.mark(function e() {
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                return e.next = 2, pg(r.moduleName);
                                            case 2:
                                                r.module = e.sent;
                                            case 3:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e)
                                }))), Fu(this, "splash", d(I.mark(function e() {
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                if (r.module) {
                                                    e.next = 3;
                                                    break
                                                }
                                                return e.next = 3, r.load();
                                            case 3:
                                                return e.abrupt("return", r.module[r.moduleDefault]);
                                            case 4:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e)
                                }))), t.package || "gd-sdk-air-dynamic"),
                                o = t.package_version || "1.2.0",
                                i = t.template || "pluto",
                                t = t.dependencies || [];
                            this.moduleName = "GDSplashDynamic", this.moduleDefault = i.charAt(0).toUpperCase() + i.slice(1), this.moduleConfig = {
                                source: "https://pm.azerioncircle.com/@bygd/".concat(n, "/").concat(o, "/dist/").concat(i.toLowerCase(), "/iife/index.js"),
                                dependencies: t
                            }, rg(this.moduleName, this.moduleConfig)
                        }),
                        oO = {},
                        iO = {},
                        aO = null;

                    function sO(e, t, r) {
                        var n = this;
                        if (le(this, sO), eO) return eO;
                        var o = {
                                debug: !1,
                                width: 640,
                                height: 360,
                                locale: "en"
                            },
                            t = ((eO = this).options = t ? dn(o, t) : o, this.prefix = "gdsdk__", this.adsLoader = null, this.adsManager = null, this.adDisplayContainer = null, this.eventBus = new $n, this.safetyTimer = null, this.containerTransitionSpeed = 0, this.adCounter = {}, this.adPrerollCount = 0, this.adMidrollCount = 0, this.adRewardedCount = 0, this.preloadedAdType = null, this.requestRunning = !1, this.parentDomain = r.parentDomain, this.topDomain = r.topDomain, this.parentURL = r.parentURL, this.adDisplayContainerInitialized = !1, this.IMASampleTags = {
                                interstitial: ["https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator=", "https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dredirectlinear&correlator=", "https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dredirecterror&correlator="],
                                rewarded: ["https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator="]
                            }, this.atom_display, this.adType_ = "", this.clickCount = {
                                midroll: 0,
                                preroll: 0,
                                rewarded: 0
                            }, this.userAllowedPersonalizedAds = 0 <= document.location.search.indexOf("gdpr-targeting=0") || 0 <= document.cookie.indexOf("ogdpr_advertisement=0") ? "0" : "1", this.parentDomain.includes("girlsgogames") && (this.userAllowedPersonalizedAds = !1), this.thirdPartyContainer = "" !== e ? document.getElementById(e) : null, this.options.width = "number" == typeof this.options.width ? this.options.width : "100%" === this.options.width ? 640 : this.options.width.replace(/[^0-9]/g, ""), this.options.height = "number" == typeof this.options.height ? this.options.height : "100%" === this.options.height ? 360 : this.options.height.replace(/[^0-9]/g, ""), window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth),
                            o = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                        this.options.width = this.thirdPartyContainer ? this.thirdPartyContainer.offsetWidth : t, this.options.height = this.thirdPartyContainer ? this.thirdPartyContainer.offsetHeight : o, this.category = "", this.tags = [], this.eventCategory = "AD", this.eventBus.subscribe("LOADED", function() {
                            O(this, n), this._clearSafetyTimer("LOADED"), this._startSafetyTimer(8e3, "LOADED")
                        }.bind(this), "ima"), this.eventBus.subscribe("STARTED", function() {
                            O(this, n), this._clearSafetyTimer("STARTED")
                        }.bind(this), "ima")
                    }

                    function uO() {
                        for (var e, t = window, r = null, n = null; !e;) {
                            try {
                                if ("function" == typeof t.__tcfapi || "function" == typeof t.__cmp) {
                                    r = "function" == typeof t.__tcfapi ? (n = 2, t.__tcfapi) : (n = 1, t.__cmp), e = t;
                                    break
                                }
                            } catch (e) {}
                            try {
                                if (t.frames.__tcfapiLocator) {
                                    n = 2, e = t;
                                    break
                                }
                            } catch (e) {}
                            try {
                                if (t.frames.__cmpLocator) {
                                    n = 1, e = t;
                                    break
                                }
                            } catch (e) {}
                            if (t === window.top) break;
                            t = t.parent
                        }
                        oO.version = n, oO.frame = e, oO.function = r
                    }

                    function cO(n) {
                        var t = this;
                        return aO || (aO = new Promise(function(r) {
                            function e(e, t) {
                                if (TT("Received a response from CMP", e), t) {
                                    if (!1 !== e.gdprApplies) return "tcloaded" === e.eventStatus || "useractioncomplete" === e.eventStatus ? (("boolean" != typeof(t = e && "boolean" == typeof e.gdprApplies ? e.gdprApplies : n.defaultGdprScope) || !0 === t && "string" != typeof e.tcString) && r({
                                        result: "cmpUnexpectedResponse",
                                        cmp: oO,
                                        consentData: e
                                    }), void r({
                                        result: "ok",
                                        consentData: e
                                    })) : void 0;
                                    r({
                                        result: "ok",
                                        consentData: e
                                    })
                                } else r({
                                    result: "cmpCallFailed"
                                })
                            }
                            O(this, t), uO(), oO.frame ? 2 === oO.version ? (TT("TCF v2 CMP found. Fetching the consent."), oO.function ? (TT("CMP API is directly accessible, calling it now..."), oO.function("addEventListener", oO.version, e)) : (TT("CMP API is outside the current iframe, calling it now..."), function(i, e) {
                                var a = this,
                                    s = "__tcfapi";
                                window[s] = function(e, t, r, n) {
                                    O(this, a);
                                    var o = Math.random() + "",
                                        e = Fu({}, "".concat(s, "Call"), {
                                            command: e,
                                            parameter: n,
                                            callId: o,
                                            version: t
                                        });
                                    iO[o] = r, i.postMessage(e, "*")
                                }.bind(this), window.addEventListener("message", function e(t) {
                                    var r = "".concat(s, "Return");
                                    (t = "string" == typeof t.data && 0 <= t.data.indexOf(r) ? JSON.parse(t.data) : t.data)[r] && t[r].callId && (t = t[r], void 0 !== iO[t.callId]) && iO[t.callId](t.returnValue, t.success)
                                }, !1), window[s]("addEventListener", oO.version, e)
                            }(oO.frame, e))) : r({
                                result: "cmpVersionNotV2",
                                cmp: oO
                            }) : r({
                                result: "cmpNotFound"
                            })
                        }.bind(this)))
                    }
                    pe(fO, [{
                        key: "checkIfExcluded",
                        value: function(e) {
                            try {
                                var t, r;
                                return !(null == (t = e.diagnostic) || null == (r = t.gameDock) || !r.excluded)
                            } catch (e) {
                                return console.log("Error on checkIfExclude check", e), !1
                            }
                        }
                    }, {
                        key: "track",
                        value: (lO = d(I.mark(function e(t, r) {
                            var n, o, i, a;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        if (this.checkIfExcluded(r)) return e.abrupt("return");
                                        e.next = 3;
                                        break;
                                    case 3:
                                        if (n = null == t || null == (n = t.visitor) || null == (n = n.visitorData) ? void 0 : n.visitorId) {
                                            e.next = 6;
                                            break
                                        }
                                        return e.abrupt("return");
                                    case 6:
                                        return o = encodeURIComponent(this.productName), i = encodeURIComponent(n), e.prev = 8, a = "json/null.json?https://tracker-v4.gamedock.io/v1/events-tracker/track/product/".concat(o, "/user_id/").concat(i), e.next = 12, fetch(a, {
                                            method: "POST"
                                        });
                                    case 12:
                                        e.sent, e.next = 28;
                                        break;
                                    case 15:
                                        return e.prev = 15, e.t0 = e.catch(8), console.log("GAME_DOCK. fail v4", e.t0), e.prev = 18, a = "json/null.json?https://tracker.gamedock.io/v1/events-tracker/track/product/".concat(o, "/user_id/").concat(i), e.next = 22, fetch(a, {
                                            method: "POST"
                                        });
                                    case 22:
                                        e.sent, e.next = 28;
                                        break;
                                    case 25:
                                        e.prev = 25, e.t1 = e.catch(18), console.log("GAME_DOCK. fail v6", e.t1);
                                    case 28:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, this, [
                                [8, 15],
                                [18, 25]
                            ])
                        })), function(e, t) {
                            return lO.apply(this, arguments)
                        })
                    }]);
                    var lO, dO = new fO;

                    function fO() {
                        le(this, fO), this.productName = "Game Distribution"
                    }

                    function pO(e, t) {
                        (null == t || t > e.length) && (t = e.length);
                        for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                        return n
                    }

                    function hO(e) {
                        var l = this,
                            d = e.src,
                            f = e.attributes,
                            p = e.target,
                            h = e.isAsync;
                        return new Promise(function(e, t) {
                            var r = this;
                            O(this, l);
                            try {
                                var n = document.createElement("script");
                                if (n.async = null == h || h, n.type = "text/javascript", n.onload = function() {
                                        O(this, r), e()
                                    }.bind(this), n.onerror = function() {
                                        O(this, r);
                                        var e = "Error on script load, Error: ".concat(d);
                                        console.log(e), t(e)
                                    }.bind(this), n.src = d, f) {
                                    var o, i = function e(t, r) {
                                        var n, o, i, a, s = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                                        if (s) return i = !(o = !0), {
                                            s: function() {
                                                s = s.call(t)
                                            },
                                            n: function() {
                                                var e = s.next();
                                                return o = e.done, e
                                            },
                                            e: function(e) {
                                                i = !0, n = e
                                            },
                                            f: function() {
                                                try {
                                                    o || null == s.return || s.return()
                                                } finally {
                                                    if (i) throw n
                                                }
                                            }
                                        };
                                        if (Array.isArray(t) || (s = function(e) {
                                                var t;
                                                if (e) return "string" == typeof e ? pO(e, void 0) : "Map" === (t = "Object" === (t = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : t) || "Set" === t ? Array.from(e) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? pO(e, void 0) : void 0
                                            }(t)) || r && t && "number" == typeof t.length) return s && (t = s), a = 0, {
                                            s: r = function() {},
                                            n: function() {
                                                return a >= t.length ? {
                                                    done: !0
                                                } : {
                                                    done: !1,
                                                    value: t[a++]
                                                }
                                            },
                                            e: function(e) {
                                                throw e
                                            },
                                            f: r
                                        };
                                        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                    }(f);
                                    try {
                                        for (i.s(); !(o = i.n()).done;) {
                                            var a = o.value,
                                                s = a.key,
                                                u = a.value;
                                            n.setAttribute(s, u)
                                        }
                                    } catch (e) {
                                        i.e(e)
                                    } finally {
                                        i.f()
                                    }
                                }(p = p || document.head).appendChild(n)
                            } catch (e) {
                                var c = "Error on script load catch, Error: ".concat(d);
                                console.log(c, e), t(c)
                            }
                        }.bind(this))
                    }
                    var mO, gO, vO = "ffd4774b-99ae-4464-8f40-3afa12b4692e",
                        bO = (gO = d(I.mark(function e() {
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.prev = 0, e.next = 3, hO({
                                            src: "https://cdn.cookielaw.org/consent/tcf.stub.js",
                                            attributes: [{
                                                key: "id",
                                                value: "gd-cookie-pro-tcf-stub"
                                            }, {
                                                key: "charset",
                                                value: "UTF-8"
                                            }],
                                            isAsync: !1
                                        });
                                    case 3:
                                        return e.next = 5, hO({
                                            src: "https://cdn.cookielaw.org/consent/".concat(vO, "/OtAutoBlock.js"),
                                            attributes: [{
                                                key: "id",
                                                value: "gd-cookie-pro-autoblock"
                                            }],
                                            isAsync: !1
                                        });
                                    case 5:
                                        return e.next = 7, hO({
                                            src: "https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",
                                            attributes: [{
                                                key: "id",
                                                value: "gd-cookie-pro-stub"
                                            }, {
                                                key: "charset",
                                                value: "UTF-8"
                                            }, {
                                                key: "data-domain-script",
                                                value: vO
                                            }],
                                            isAsync: !1
                                        });
                                    case 7:
                                        o = n = void 0, r = (t = {
                                            inlineScript: "function OptanonWrapper() { }"
                                        }).inlineScript, n = t.target, (o = document.createElement("script")).text = r, (n = n || document.head).appendChild(o), e.next = 13;
                                        break;
                                    case 10:
                                        e.prev = 10, e.t0 = e.catch(0), console.log("GD: CMP error on load", e.t0);
                                    case 13:
                                    case "end":
                                        return e.stop()
                                }
                                var t, r, n, o
                            }, e, null, [
                                [0, 10]
                            ])
                        })), function() {
                            return gO.apply(this, arguments)
                        }),
                        yO = new w.exports.EventEmitter,
                        _O = {
                            "https://games.softgames.com": {
                                "splash-hidden": "splash-hidden"
                            },
                            "https://sg.gamedistribution.com": {
                                "splash-hidden": "splash-hidden"
                            },
                            "https://html5.gamedistribution.com": {
                                key: "value"
                            }
                        },
                        wO = !1,
                        AO = (window.addEventListener("message", function(r) {
                            var n = this,
                                t = r.data,
                                o = r.origin,
                                e = t.type;
                            if (Object.keys(_O).some(function(e) {
                                    return O(this, n), e === o
                                }.bind(this)) && (null == t || !t.__tcfapiCall)) {
                                var i = !t.type || !t.type.startsWith("gd-sdk") && !("parent-data-response" === t.type) || "sg-game-event" === t.type,
                                    a = ("gd-sdk-on-event" === (null == t ? void 0 : t.type) && "midroll" === (null == t || null == (u = t.event) ? void 0 : u.adPosition) && (u = "CONTENT_RESUME_REQUESTED" === (null == (u = t.event) ? void 0 : u.name), "CONTENT_PAUSE_REQUESTED" === (null == (a = t.event) ? void 0 : a.name) && (wO = !0), u) && wO && (wO = !1, window.parent.postMessage({
                                        type: "sg-game-event",
                                        eventName: "levelFinish",
                                        data: {
                                            score: 100
                                        }
                                    }, "*")), function() {
                                        O(this, n);
                                        try {
                                            var e, t;
                                            return null == r || null == (e = r.source) || null == (t = e.location) ? void 0 : t.href
                                        } catch (e) {}
                                    }.bind(this));
                                if (window.parent && i) {
                                    if ("https://html5.gamedistribution.com" === o) {
                                        var s = a();
                                        if (!s) return;
                                        var u = s && ["9555f04e1900482aaaef710cd2f8c440"].some(function(e) {
                                                return O(this, n), 0 < s.indexOf(e)
                                            }.bind(this)),
                                            i = ["sg-game-event"].some(function(e) {
                                                return O(this, n), e === (null == t ? void 0 : t.type)
                                            }.bind(this));
                                        if (!u && !i) return
                                    }
                                    var i = t.eventName,
                                        c = t.data;
                                    window.mpHelper && (console.log("SG_EVENTS sending to minijuegos!"), "levelStart" !== i && "levelFinish" !== i || window.mpHelper.sendStat("level", c.level), "levelFinish" === i) && window.mpHelper.sendStat("score", c.score), window.parent.postMessage(t, "*")
                                }
                                e && (i = _O[o][e]) && yO.emit(i, t)
                            }
                        }, !1), new Uint8Array(16));
                    for (var xO = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i, kO = [], EO = 0; EO < 256; ++EO) kO.push((EO + 256).toString(16).substr(1));

                    function SO(e, t, r) {
                        var n = (e = e || {}).random || (e.rng || function e() {
                            if (mO = mO || "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto)) return mO(AO);
                            throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")
                        })();
                        if (n[6] = 15 & n[6] | 64, n[8] = 63 & n[8] | 128, t) {
                            r = r || 0;
                            for (var o = 0; o < 16; ++o) t[r + o] = n[o];
                            return t
                        }
                        return function e(t, r) {
                            if ("string" == typeof(t = (kO[t[(r = 1 < arguments.length && void 0 !== r ? r : 0) + 0]] + kO[t[r + 1]] + kO[t[r + 2]] + kO[t[r + 3]] + "-" + kO[t[r + 4]] + kO[t[r + 5]] + "-" + kO[t[r + 6]] + kO[t[r + 7]] + "-" + kO[t[r + 8]] + kO[t[r + 9]] + "-" + kO[t[r + 10]] + kO[t[r + 11]] + kO[t[r + 12]] + kO[t[r + 13]] + kO[t[r + 14]] + kO[t[r + 15]]).toLowerCase()) && xO.test(t)) return t;
                            throw TypeError("Stringified UUID is invalid")
                        }(n)
                    }

                    function RO(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function DO(e) {
                        try {
                            var t = {
                                    gameId: e.game.gameId,
                                    target: e.game.evnts.domain,
                                    event_name: e.event,
                                    timestamp: Date.now()
                                },
                                r = MO(window);
                            r === window.top || null != r && r.postMessage(t, "https://html5.gamedistribution.com")
                        } catch (e) {}
                    }
                    var TO, OO, IO, CO = "__msgr",
                        LO = SO(),
                        MO = function e(t) {
                            try {
                                var r, n, o = null == t ? void 0 : t.parent;
                                if ("game" === (null == (r = o.document) || null == (n = r.activeElement) ? void 0 : n.id)) return o;
                                e(o)
                            } catch (e) {
                                return t
                            }
                        },
                        PO = function(e) {
                            try {
                                window[CO] && window[CO].postMessage(e, "*")
                            } catch (e) {
                                console.log("GD Messager initialization, please wait....")
                            }
                        },
                        jO = (pe(UO, [{
                            key: "run",
                            value: function(e) {
                                var r, i = e.duration,
                                    a = this;
                                return new Promise((r = d(I.mark(function e(t, r) {
                                    var n, o = this;
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                return e.prev = 0, e.next = 3, a.add();
                                            case 3:
                                                n = a.show(), setTimeout(function() {
                                                    O(this, o);
                                                    try {
                                                        a.hide(), t({
                                                            success: n
                                                        })
                                                    } catch (e) {
                                                        r(e)
                                                    }
                                                }.bind(this), 1e3 * i), e.next = 10;
                                                break;
                                            case 7:
                                                e.prev = 7, e.t0 = e.catch(0), r(e.t0);
                                            case 10:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e, this, [
                                        [0, 7]
                                    ])
                                })), function(e, t) {
                                    return r.apply(this, arguments)
                                }))
                            }
                        }, {
                            key: "show",
                            value: function() {
                                return this.promo_data.game ? (this.adContainer.style.visibility = "visible", this.promo.style.display = "block", this._onPauseGame("Pause the game for the promo", "success"), this._promoShowSuccess = !0) : this._onAdError("Promo not found"), this._promoShowSuccess
                            }
                        }, {
                            key: "hide",
                            value: function() {
                                var e;
                                this.promo.remove(), this.adContainer.style.visibility = "hidden", this._promoShowSuccess && "reward" === (null == (e = this._adRequest.params) ? void 0 : e.position) && this._onRewardedWatchComplete(), this._onResumeGame("Advertisement(s) are done. Start / resume the game.", "success")
                            }
                        }, {
                            key: "add",
                            value: (IO = d(I.mark(function e() {
                                var r, t, n = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, this.fetch_promo();
                                        case 3:
                                            this.promo_data = e.sent, t = document.createElement("div"), this.promo = t, r = this.promo_data, this.promo.addEventListener("click", function() {
                                                var t = d(I.mark(function e(t) {
                                                    return I.wrap(function(e) {
                                                        for (;;) switch (e.prev = e.next) {
                                                            case 0:
                                                                t.preventDefault(), console.log(r), n.track_click(r.click_tracking), window.open(r.click_through, "_blank");
                                                            case 4:
                                                            case "end":
                                                                return e.stop()
                                                        }
                                                    }, e)
                                                }));
                                                return function(e) {
                                                    return t.apply(this, arguments)
                                                }
                                            }()), (t = document.createElement("iframe")).src = this.promo_data.renderer_url, t.setAttribute("frameborder", 0), this.addStyles(), this.promo.classList.add("gd__promo"), t.classList.add("gd__promo__iframe"), this.promo.appendChild(t), this.adContainer.appendChild(this.promo), e.next = 21;
                                            break;
                                        case 18:
                                            e.prev = 18, e.t0 = e.catch(0), console.log(e.t0);
                                        case 21:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 18]
                                ])
                            })), function() {
                                return IO.apply(this, arguments)
                            })
                        }, {
                            key: "addStyles",
                            value: function() {
                                var e = "\n                            .gd__promo{\n                                position: absolute;\n                                top: 0;\n                                left: 0;\n                                width: 100%;\n                                height: 100%;\n                                background-color: transparent;\n                                z-index: 1;\n                                cursor: pointer;\n                            }\n                            .gd__promo__iframe{\n                              position: relative;\n                              z-index: -1;\n                              width:".concat(this.adContainerInner.style.width, ";\n                              height:").concat(this.adContainerInner.style.height, ";\n                            }\n                      "),
                                    t = document.body || document.getElementsByTagName("body")[0];
                                this.addStylesheet("gd__promo__style", t, e)
                            }
                        }, {
                            key: "addStylesheet",
                            value: function(e, t, r) {
                                var n;
                                document.getElementById(e) || ((n = document.createElement("style")).id = e, n.styleSheet ? n.styleSheet.cssText = r : n.appendChild(document.createTextNode(r)), t.appendChild(n))
                            }
                        }, {
                            key: "fetch_promo",
                            value: (OO = d(I.mark(function e() {
                                var t, r = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, fetch("https://tag.atom.gamedistribution.com/v1/rainbow/pick?id=".concat(this._parentDomain, "&aid=").concat(this._gameData.gameId)).then(function(e) {
                                                return O(this, r), e.json()
                                            }.bind(this));
                                        case 2:
                                            return t = e.sent, e.abrupt("return", t);
                                        case 4:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function() {
                                return OO.apply(this, arguments)
                            })
                        }, {
                            key: "track_click",
                            value: (TO = d(I.mark(function e(t) {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, fetch(t);
                                        case 2:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return TO.apply(this, arguments)
                            })
                        }]), UO);

                    function UO(e) {
                        le(this, UO), this.adContainer = document.getElementById("gdsdk__advertisement"), this.adContainerInner = document.getElementById("gdsdk__advertisement_slot"), this._adRequest = e.adRequest, this._gameData = e._gameData, this._msgrt = e._msgrt, this._adInstance = e._adInstance, this._eventBus = e._eventBus, this.blockedAdsMap = e._blockedAdsMap, this._parentURL = e._parentURL, this._parentDomain = e._parentDomain, this._onResumeGame = e._onResumeGame.bind(e), this._onPauseGame = e._onPauseGame.bind(e), this._onRewardedWatchComplete = e._onRewardedWatchComplete.bind(e), this._onAdError = e._onAdError.bind(e), this._promoShowSuccess = !1
                    }

                    function $O(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function BO(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? $O(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : $O(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }

                    function NO(e, t) {
                        (null == t || t > e.length) && (t = e.length);
                        for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];
                        return n
                    }

                    function FO() {
                        var t = this,
                            r = function() {
                                return O(this, t), /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Fa-f0-9]{32})(.*)$/i.test(location.href)
                            }.bind(this),
                            n = function() {
                                return O(this, t), /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Za-z0-9]{8})\/(.*)$/i.test(location.href)
                            }.bind(this),
                            e = function() {
                                return O(this, t), /^http[s]?:\/\/.*?gd_sdk_referrer_url=.*$/i.test(location.href)
                            }.bind(this),
                            o = function() {
                                O(this, t);
                                var e = "html5.gamedistribution.com" !== ce(window.location.href).host;
                                return !r() || n() || e ? "game-frame" : "loader-frame"
                            }.bind(this);
                        return {
                            isMasterGameURL: r,
                            isTokenGameURL: n,
                            isExtHostedGameURL: e,
                            whichFrame: o
                        }
                    }
                    pe(XO, [{
                        key: "runAdFlow",
                        value: (ZO = d(I.mark(function e(t) {
                            var r, n, o, i, a, s, u, c, l, d, f, p, h, m, g, v, b, y, _, w, A, x, k, E, S, R, D, T = this;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        this.adRequest = t, r = this._getAdTypeByAfgPosition(t), t.params.position, l = this._getAdFlow(r), n = this._gameData, u = n.afg_disabled, o = null == (o = t.params) ? void 0 : o.isGift, null != (s = t.params) && s.position, s = null == (s = n.promo) ? void 0 : s.rainbow, i = (null == s ? void 0 : s.enabled) && (null == (i = s.position) ? void 0 : i[r]), a = null == s ? void 0 : s.gift, s = i && null != s && s.duration ? null == s ? void 0 : s.duration : 5, u = u ? l.filter(function(e) {
                                            return O(this, T), "adsense" !== e
                                        }.bind(this)) : l, l = this.get_ad_system_init_result(), c = l.afg, l = l.ima, this.adsBlocked = !c && !l, this.adsBlocked ? (Ls("gd-adflow adsBlocked so changing the flow"), u = []) : (c || (u = u.filter(function(e) {
                                            return O(this, T), "adsense" !== e
                                        }.bind(this))), l || (u = u.filter(function(e) {
                                            return O(this, T), "ima" !== e
                                        }.bind(this)))), f = d = !1, h = 0, m = !(p = []), g = function e(t, r) {
                                            var n, o, i, a, s = "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"];
                                            if (s) return i = !(o = !0), {
                                                s: function() {
                                                    s = s.call(t)
                                                },
                                                n: function() {
                                                    var e = s.next();
                                                    return o = e.done, e
                                                },
                                                e: function(e) {
                                                    i = !0, n = e
                                                },
                                                f: function() {
                                                    try {
                                                        o || null == s.return || s.return()
                                                    } finally {
                                                        if (i) throw n
                                                    }
                                                }
                                            };
                                            if (Array.isArray(t) || (s = function(e) {
                                                    var t;
                                                    if (e) return "string" == typeof e ? NO(e, void 0) : "Map" === (t = "Object" === (t = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : t) || "Set" === t ? Array.from(e) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? NO(e, void 0) : void 0
                                                }(t)) || r && t && "number" == typeof t.length) return s && (t = s), a = 0, {
                                                s: r = function() {},
                                                n: function() {
                                                    return a >= t.length ? {
                                                        done: !0
                                                    } : {
                                                        done: !1,
                                                        value: t[a++]
                                                    }
                                                },
                                                e: function(e) {
                                                    throw e
                                                },
                                                f: r
                                            };
                                            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                                        }(u), e.prev = 26, g.s();
                                    case 28:
                                        if ((v = g.n()).done) {
                                            e.next = 62;
                                            break
                                        }
                                        return v = v.value, t.params.adapter = v, y = h === u.length - 1, b = o && a || !o, b = y && i && b, t.params = BO(BO({}, t.params), {}, {
                                                adapterIndex: h,
                                                isLastAdapter: y,
                                                shouldFail: !1,
                                                extraPromoRunOnFail: b
                                            }),
                                            function() {
                                                O(this, T), Nu.firstSuccessOrder && !isNaN(Nu.firstSuccessOrder) && (t.params.shouldFail = h < Nu.firstSuccessOrder)
                                            }.bind(this), Ls("gd-adflow, before adInvoke", h, v, t.params.shouldFail), e.next = 39, this.adInvoke(t);
                                    case 39:
                                        if (y = e.sent, x = y.success, _ = y.args, w = y.isSkipped, A = y.noVast, x) return Ls("gd-adflow, adapter-result-success", h, v, _), d = !0, f = !(null == _ || !_.isPromoSuccess), e.abrupt("break", 62);
                                        e.next = 51;
                                        break;
                                    case 51:
                                        if (Ls("gd-adflow, adapter-result-failure", h, v, _.message), h++, p.push(_.message), w) return e.abrupt("break", 62);
                                        e.next = 56;
                                        break;
                                    case 56:
                                        if (A) return this._runAutoResume(), e.abrupt("break", 62);
                                        e.next = 59;
                                        break;
                                    case 59:
                                        m = b;
                                    case 60:
                                        e.next = 28;
                                        break;
                                    case 62:
                                        e.next = 67;
                                        break;
                                    case 64:
                                        e.prev = 64, e.t0 = e.catch(26), g.e(e.t0);
                                    case 67:
                                        return e.prev = 67, g.f(), e.finish(67);
                                    case 70:
                                        if (m) return e.next = 73, new jO(this).run({
                                            duration: s
                                        });
                                        e.next = 76;
                                        break;
                                    case 73:
                                        e.sent.success && (f = !0);
                                    case 76:
                                        return function() {
                                            var e;
                                            O(this, T), Nu.disableGift && null != (e = n.gft) && e[r].enabled && (n.gft[r].enabled = !1)
                                        }.bind(this), x = p.join(" /n"), d ? (this._setAdRequestTimer(), this._onResumeGame("Advertisement(s) are done. Start / resume the game.", "success")) : this._onResumeGame(x, "warning"), this._giveGift(r), D = "-1", k = "none", d ? (D = "index_".concat(h), k = u[h]) : f && (k = D = "promo"), E = this.get_session_id(), this.adsBlocked && "-1" === D ? (S = "rewarded" === r ? "rewarded" : this.blockedAdsMap.preroll ? "midroll" : "preroll", this.blockedAdsMap[S] = this.blockedAdsMap[S] ? this.blockedAdsMap[S] + 1 : 1, JSON.stringify(this.blockedAdsMap), this._msgrt.send("adflow.blocked.pos", {
                                            message: "".concat(S)
                                        }), this.send_atom_event("gd.adflow", {
                                            adBlocker: !0,
                                            afgBlocked: !0,
                                            imaBlocked: !0,
                                            adType: S,
                                            sessionId: E,
                                            successAdapter: "none",
                                            adFlowIndex: D
                                        })) : (Fu(S = {}, "adflow.all.index", {
                                            message: "".concat(D)
                                        }), Fu(S, "adflow.all.success_adapter", {
                                            message: "".concat(k)
                                        }), Fu(S, "adflow.".concat(r, ".index"), {
                                            message: "".concat(D)
                                        }), Fu(S, "adflow.".concat(r, ".success_adapter"), {
                                            message: "".concat(k)
                                        }), R = S, Object.keys(R).forEach(function(e) {
                                            O(this, T), this._msgrt.send(e, R[e])
                                        }.bind(this)), this.send_atom_event("gd.adflow", {
                                            adFlowIndex: D,
                                            successAdapter: k,
                                            adBlocker: !1,
                                            afgBlocked: !c,
                                            imaBlocked: !l,
                                            adType: r,
                                            sessionId: E
                                        })), D = {
                                            adType: r
                                        }, this.eventBus.broadcast("AD_FLOW_COMPLETE", D), e.abrupt("return", D);
                                    case 89:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, this, [
                                [26, 64, 67, 70]
                            ])
                        })), function(e) {
                            return ZO.apply(this, arguments)
                        })
                    }, {
                        key: "adInvoke",
                        value: (HO = d(I.mark(function e(s) {
                            var u = this;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.abrupt("return", new Promise(function() {
                                            var r = d(I.mark(function e(r, t) {
                                                var n, o, i, a = this;
                                                return I.wrap(function(e) {
                                                    for (;;) switch (e.prev = e.next) {
                                                        case 0:
                                                            return n = "main.showad.".concat(s.params.adapter, ".").concat(s.params.adapterIndex), o = function(e) {
                                                                O(this, a), u._eventBus.unsubscribeScope(n);
                                                                var t = "dismissed" === (null == e ? void 0 : e.message);
                                                                r({
                                                                    success: !1,
                                                                    args: e,
                                                                    isSkipped: t,
                                                                    noVast: e.noVast
                                                                })
                                                            }.bind(this), i = function(e) {
                                                                O(this, a), u._eventBus.unsubscribeScope(n), r({
                                                                    success: !0,
                                                                    args: e
                                                                })
                                                            }.bind(this), u._eventBus.subscribe("AD_ERROR", o, n), u._eventBus.subscribe("AD_SDK_CANCELED", o, n), u._eventBus.subscribe("AD_SUCCESS", i, n), e.prev = 6, e.next = 9, u._adInstance.startAd(s);
                                                        case 9:
                                                            e.next = 15;
                                                            break;
                                                        case 11:
                                                            e.prev = 11, e.t0 = e.catch(6), Ms("gd-adflow startAd error", e.t0), r({
                                                                success: !1,
                                                                err: e.t0
                                                            });
                                                        case 15:
                                                        case "end":
                                                            return e.stop()
                                                    }
                                                }, e, this, [
                                                    [6, 11]
                                                ])
                                            }));
                                            return function(e, t) {
                                                return r.apply(this, arguments)
                                            }
                                        }()));
                                    case 1:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function(e) {
                            return HO.apply(this, arguments)
                        })
                    }, {
                        key: "_getAdFlow",
                        value: function(e) {
                            var t, r = this,
                                n = (function() {
                                    if (O(this, r), Nu.customAdFlow) return JSON.parse(Nu.customAdFlow)
                                }.bind(this), this._gameData.adflw),
                                o = null != (o = n) && null != (o = o.adapters) && o.default ? null == (o = n) || null == (o = o.adapters) ? void 0 : o.default : ["ima", "adsense"];
                            return null != (t = n) && null != (t = t.adapters) && t[e] ? null == (t = n) || null == (n = t.adapters) ? void 0 : n[e] : o
                        }
                    }]);
                    var GO, zO, HO, ZO, KO, qO, WO, VO = XO,
                        YO = (pe(JO, [{
                            key: "load",
                            value: (zO = d(I.mark(function e() {
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, pg(this.moduleName);
                                        case 3:
                                            this.module = e.sent, this.module, e.next = 11;
                                            break;
                                        case 7:
                                            e.prev = 7, e.t0 = e.catch(0), console.log("aeria module load error", e.t0), this.module = null;
                                        case 11:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 7]
                                ])
                            })), function() {
                                return zO.apply(this, arguments)
                            })
                        }, {
                            key: "runYMenu",
                            value: (GO = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (r = t.gameId, this.module) {
                                                e.next = 4;
                                                break
                                            }
                                            return e.next = 4, this.load();
                                        case 4:
                                            (new this.module.Aeria).renderYMenu({
                                                gameId: r
                                            });
                                        case 6:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e) {
                                return GO.apply(this, arguments)
                            })
                        }]), JO),
                        pA = {
                            isAeriaDomain: "minigame.aeriagames.jp" === (js = (iA = new qk).get("partner.domain.value") || iA.get("top.domain.value")) || "minigame-stg.aeriagames.jp" === js,
                            isAeriaStagingDomain: "minigame-stg.aeriagames.jp" === js
                        },
                        bA = pA.isAeriaStagingDomain;

                    function JO() {
                        le(this, JO), this.moduleName = "GDAeria", this.moduleConfig = {
                            source: "https://pm.azerioncircle.com/@bygd/gd-sdk-aeria/1.0.1/dist/default/iife/index.js",
                            dependencies: []
                        }, rg(this.moduleName, this.moduleConfig)
                    }

                    function XO(e) {
                        var t = this;
                        le(this, XO), Fu(this, "_getAdTypeByAfgPosition", function(r) {
                            var n = this,
                                o = (O(this, t), {
                                    preroll: ["preroll", "start"],
                                    midroll: ["next"],
                                    rewarded: ["reward"]
                                });
                            return Object.keys(o).find(function(e) {
                                var t = this;
                                return O(this, n), o[e].some(function(e) {
                                    return O(this, t), e === r.params.position
                                }.bind(this))
                            }.bind(this)) || "midroll"
                        }.bind(this)), this._gameData = e._gameData, this._msgrt = e.msgrt, this._adInstance = e.adInstance, this._eventBus = e.eventBus, this.blockedAdsMap = e.blockedAdsMap, this._parentURL = e._parentURL, this._parentDomain = e._parentDomain, this._onResumeGame = e.onResumeGame.bind(e), this._onPauseGame = e.onPauseGame.bind(e), this._onRewardedWatchComplete = e.onRewardedWatchComplete.bind(e), this._onAdError = e.onAdError.bind(e), this._setAdRequestTimer = e._setAdRequestTimer.bind(e), this._giveGift = e._giveGift.bind(e), this._runAutoResume = e._runAutoResume.bind(e), this.send_atom_event = e.send_atom_event.bind(e), this.get_session_id = e.get_session_id.bind(e), this.get_ad_system_init_result = e.get_ad_system_init_result.bind(e), this.eventBus = new $n
                    }
                    pA.isAeriaDomain && (KO = function() {
                        var e, t = "ae-soft-323";
                        try {
                            e = (new qk).get("partner.url.value");
                            var r = new ce(e, !0),
                                n = r.pathname,
                                o = n.split("/"),
                                i = o[o.length - 1];
                            Ls("aeria-ylogin:loc", r, n, i), t = i
                        } catch (e) {
                            Ms("Error on getting aeria game id", e)
                        }
                        return t
                    }(), qO = {
                        action: "score",
                        data: {
                            gameId: KO,
                            score: 100
                        },
                        env: bA ? "staging" : "production",
                        system: "Softgames"
                    }, (new $n).subscribe("AD_FLOW_COMPLETE", function(e) {
                        "midroll" === e.adType && (window.parent || window).postMessage(qO, "*")
                    }), WO = d(I.mark(function e() {
                        return I.wrap(function(e) {
                            for (;;) switch (e.prev = e.next) {
                                case 0:
                                    return e.next = 2, (new YO).runYMenu({
                                        gameId: KO
                                    });
                                case 2:
                                case "end":
                                    return e.stop()
                            }
                        }, e)
                    })), BA = function() {
                        return WO.apply(this, arguments)
                    }, "game-frame" === (0, FO().whichFrame)()) && BA();
                    var QO, eI = new w.exports.EventEmitter,
                        tI = ["https://games.softgames.com", "https://sg.gamedistribution.com", "https://minigame-stg.aeriagames.jp", "https://minigame.aeriagames.jp", "https://html5.gamedistribution.com", "http://localhost:3005", "https://yjgames.gamedistribution.com", "https://portal-staging-sgweb.gamedistribution.com/"],
                        rI = (window.addEventListener("message", function(e) {
                            var t, r, n = this,
                                o = e.data,
                                i = e.origin,
                                e = e.source;
                            !tI.some(function(e) {
                                return O(this, n), e === i
                            }.bind(this)) || null != o && o.__tcfapiCall || (r = o.system, o.action, t = "aeriaExternalHostsConnector" === r, "Softgames" === r ? (QO = e, (window.parent || window).postMessage(o, "*"), eI.emit("aeria-event", o)) : t && (QO && QO.postMessage(o, "*"), r = window.parent || window) && r.postMessage(o, "*"))
                        }, !1), "https://html5.gamedistribution.com"),
                        nI = "parent-data-request",
                        oI = "parent-data-response";
                    pe(uI, [{
                        key: "init",
                        value: function(t) {
                            var r = this;
                            this._registerForDataRequests(t), this._askForParentFrameData().then(function(e) {
                                O(this, r), e && (e = e.adRequestTimer, t.adRequestTimer = e, t.adRequestTimer)
                            }.bind(this))
                        }
                    }, {
                        key: "_registerForDataRequests",
                        value: function(o) {
                            var i = this;
                            window.addEventListener("message", function(e) {
                                O(this, i);
                                var t = e.data,
                                    r = e.origin,
                                    e = e.source,
                                    n = t.type;
                                t.value, r === rI && n === nI && (t = {
                                    adRequestTimer: o.adRequestTimer
                                }, e.postMessage({
                                    type: oI,
                                    value: t
                                }))
                            }.bind(this))
                        }
                    }, {
                        key: "_askForParentFrameData",
                        value: (iI = d(I.mark(function e() {
                            var i = this;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.abrupt("return", new Promise(function(n, e) {
                                            var t = this,
                                                o = (O(this, i), !1),
                                                r = (window.addEventListener("message", function(e) {
                                                    var t = e.data,
                                                        r = e.origin,
                                                        e = (e.source, t.type),
                                                        t = t.value;
                                                    r === rI && e === oI && (n(t), o = !0)
                                                }), setTimeout(function() {
                                                    O(this, t), o || n()
                                                }.bind(this), 1e3), {
                                                    type: nI
                                                });
                                            window.parent.postMessage(r, "*")
                                        }.bind(this)));
                                    case 1:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, this)
                        })), function() {
                            return iI.apply(this, arguments)
                        })
                    }]);
                    var iI, aI = new uI,
                        sI = {
                            SDKExistsOnUpperFrame: !1
                        };

                    function uI() {
                        le(this, uI)
                    }

                    function cI(t, e) {
                        var r, n = Object.keys(t);
                        return Object.getOwnPropertySymbols && (r = Object.getOwnPropertySymbols(t), e && (r = r.filter(function(e) {
                            return Object.getOwnPropertyDescriptor(t, e).enumerable
                        })), n.push.apply(n, r)), n
                    }

                    function lI(t) {
                        for (var e = 1; e < arguments.length; e++) {
                            var r = null != arguments[e] ? arguments[e] : {};
                            e % 2 ? cI(Object(r), !0).forEach(function(e) {
                                Fu(t, e, r[e])
                            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : cI(Object(r)).forEach(function(e) {
                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                            })
                        }
                        return t
                    }
                    var dI, fI, pI, hI, mI, gI, vI, bI, yI, _I, wI, AI, xI, kI, EI = SO(),
                        SI = null,
                        RI = null,
                        DI = (pe(TI, [{
                            key: "_initUnityHandler",
                            value: function() {
                                var t = this;
                                window.addEventListener("DOMNodeInserted", function() {
                                    var e;
                                    O(this, t), this._gameData.block_exts && this._removeExternalsInHtml({
                                        enabled: !1
                                    }), document.getElementsByClassName("webgl-content")[0] && (e = document.getElementsByClassName("webgl-content")[0].getElementsByClassName("footer")[0]) && e.setAttribute("style", "display:none")
                                }.bind(this))
                            }
                        }, {
                            key: "_send_gametag_data",
                            value: (xI = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            this._getGdModeIfExist() && (r = vn() || "web", this.adInstance._send("tg.created", {
                                                gmid: this.options.gameId,
                                                dvc: r,
                                                qint: t
                                            }));
                                        case 1:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e) {
                                return xI.apply(this, arguments)
                            })
                        }, {
                            key: "_loadCMP",
                            value: (AI = d(I.mark(function e() {
                                var t;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (this._isMasterGameURL())
                                                if (t = new qk, 0 === (null == (t = t.get("depth")) ? void 0 : t.value) && null != (t = this._gameData) && null != (t = t.cmp) && t.enabled && "html5.gamedistribution.com" === this._topDomain) return e.next = 6, bO();
                                            e.next = 6;
                                            break;
                                        case 6:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function() {
                                return AI.apply(this, arguments)
                            })
                        }, {
                            key: "testConsent",
                            value: function() {
                                try {
                                    uO(), d(I.mark(function e() {
                                        return I.wrap(function(e) {
                                            for (;;) switch (e.prev = e.next) {
                                                case 0:
                                                    return e.next = 2, cO({});
                                                case 2:
                                                    e.sent;
                                                case 3:
                                                case "end":
                                                    return e.stop()
                                            }
                                        }, e)
                                    }))()
                                } catch (e) {
                                    console.log("find CMP error", e)
                                }
                            }
                        }, {
                            key: "_sendLoaderDataEvent",
                            value: function() {
                                try {
                                    this.options.onLoaderEvent && this.options.onLoaderEvent({
                                        name: "LOADER_DATA",
                                        message: {
                                            game: this._gameData,
                                            bridge: this._bridge
                                        },
                                        status: this._sdk_ready ? "success" : "error"
                                    })
                                } catch (e) {}
                            }
                        }, {
                            key: "_registerSGBridge",
                            value: function() {
                                var t = this;
                                yO.on("splash-hidden", function(e) {
                                    O(this, t), this._hideCMPButton()
                                }.bind(this))
                            }
                        }, {
                            key: "_hideCMPButton",
                            value: function() {
                                var e = document.getElementById("ot-sdk-btn-floating");
                                e && (e.style.display = "none")
                            }
                        }, {
                            key: "_sendLoadedEvent",
                            value: function(e) {
                                if (this._isLoaded || (this._isLoaded = {}), !this._isLoaded[e]) {
                                    this._isLoaded[e] = !0;
                                    var t = "loader-frame" === this._whichFrame() && (this._isHostHTML5Domain() || this._isExternalHoster());
                                    if (ce(location.href, !0), this._whichFrame(), this._isMasterGameURL(), this._isExtHostedGameURL(), this._isTokenGameURL(), this._isHostHTML5Domain(), this._isExternalHoster(), location.href, document.referrer, t) try {
                                        this._whichFrame(), this._sendTunnlEvent(e), this.msgrt.send("loaded", {
                                            message: this._hasBlocker ? "Has Blocker" : "No Blocker"
                                        })
                                    } catch (e) {}
                                }
                            }
                        }, {
                            key: "_sendGamedockGamePlay",
                            value: function() {
                                var e = this._isTokenGameURL();
                                if (!(this._gameData.loader.enabled && e || this._gameDockGamePlaySent)) try {
                                    this._sendGamedockEvent("gameplay"), this._gameDockGamePlaySent = !0
                                } catch (e) {}
                            }
                        }, {
                            key: "_safeInit",
                            value: function() {
                                this._checkUserDeclinedTracking(), this._checkWhitelabelPartner();
                                var e = this._gameData.diagnostic;
                                void 0 !== e && void 0 !== e.close_ga && !1 !== e.close_ga || this._bridge.isCoreSDKMode, void 0 !== e && void 0 !== e.close_gamedock && !1 !== e.close_gamedock || this._bridge.isCoreSDKMode || this._bridge.noGamedockSDK, void 0 !== e && void 0 !== e.close_minijuegos && !1 !== e.close_minijuegos || (console.log("noMinijuegosSDK", !this._bridge.isCoreSDKMode, !this._bridge.noMinijuegosSDK, 0 <= document.location.search.indexOf("mp_game_id")), !this._bridge.isCoreSDKMode && !this._bridge.noMinijuegosSDK && 0 <= document.location.search.indexOf("mp_game_id") && this._loadMiniJuegosGratisTracker())
                            }
                        }, {
                            key: "_initializeSDKWithGameData",
                            value: (wI = d(I.mark(function e(t, r) {
                                var n, o = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, this._getGameData();
                                        case 3:
                                            return this._gameData = e.sent, e.next = 6, this._loadCMP();
                                        case 6:
                                            this._bridge.isCoreSDKMode = (null == (n = this._gameData.disableAds) ? void 0 : n.default) || !1, this._safeInit(), this._checkGameId(), this._checkGameDeleted(), this._changeMidrollInDebugMode(), void 0 !== this._gameData.diagnostic && void 0 !== (null == (n = this._gameData.diagnostic) ? void 0 : n.close_ads) && !1 !== (null == (n = this._gameData.diagnostic) ? void 0 : n.close_ads) || (this.videoAdReady = this._initializeVideoAd().then(function() {
                                                O(this, o), (this._isMasterGameURL() || this._isExtHostedGameURL()) && (this.msgrt.send("adblocker.flw", {
                                                    message: "ok"
                                                }), this.msgrt.send("adblocker.adapters", {
                                                    message: "none"
                                                }))
                                            }.bind(this)).catch(function(e) {
                                                O(this, o);
                                                var t = "".concat(e).startsWith("Error: Blocked:"),
                                                    t = (Ls("gd-adflow adsBlocked", t, e), this.get_ad_system_init_result()),
                                                    r = t.ima,
                                                    t = t.afg;
                                                this.adsBlocked = !r && !t, (this._isMasterGameURL() || this._isExtHostedGameURL()) && (this.msgrt.send("adblocker.flw", {
                                                    message: "".concat(this.adsBlocked ? "blocked" : "ok")
                                                }), this.msgrt.send("adblocker.adapters", {
                                                    message: "".concat(r || t ? r ? t ? "none" : "adsense" : "ima" : "all")
                                                })), console.error(e.message || e)
                                            }.bind(this))), t(this._gameData), e.next = 21;
                                            break;
                                        case 16:
                                            e.prev = 16, e.t0 = e.catch(0), this._sendSDKError(e.t0), this.onResumeGame(e.t0.message, "warning"), r(e.t0);
                                        case 21:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 16]
                                ])
                            })), function(e, t) {
                                return wI.apply(this, arguments)
                            })
                        }, {
                            key: "_getDefaultOptions",
                            value: function() {
                                return {
                                    debug: !1,
                                    testing: !1,
                                    gameId: "4f3d7d38d24b740c95da2b03dc3a2333",
                                    prefix: "gdsdk__",
                                    onEvent: function(e) {},
                                    onLoaderEvent: function(e) {},
                                    flashSettings: {
                                        adContainerId: "",
                                        splashContainerId: ""
                                    },
                                    advertisementSettings: {},
                                    resumeGame: function() {},
                                    pauseGame: function() {},
                                    onInit: function(e) {},
                                    onError: function(e) {},
                                    loader: {}
                                }
                            }
                        }, {
                            key: "_extendDefaultOptions",
                            value: function(e, t) {
                                e = Ft(e);
                                this.options = t ? dn(e, t) : e, this.options.gameId = this.options.gameId.trim()
                            }
                        }, {
                            key: "_setConsoleBanner",
                            value: function() {
                                var e;
                                this._bridge.noConsoleBanner || (e = $u.version, e = console.log("%c %c %c GameDistribution.com HTML5 SDK | Version: " + e + " %c %c %c", "background: #9854d8", "background: #6c2ca7", "color: #fff; background: #450f78;", "background: #6c2ca7", "background: #9854d8", "background: #ffffff"), console.log.apply(console, e))
                            }
                        }, {
                            key: "_sendTunnlEvent",
                            value: function(e) {
                                var t = this,
                                    r = (void 0 !== this._topDomain && "undefined" !== this._topDomain || (this._topDomain = void 0), {
                                        page_url: this._topDomain || this._parentDomain,
                                        game_id: this.options.gameId,
                                        eventtype: e,
                                        ts: Date.now()
                                    });
                                fetch("https://ana.headerlift.com/event?".concat(H.stringify(r))).catch(function(e) {
                                    O(this, t)
                                }.bind(this)), this._sendHLAnalyicsLog({
                                    query: r,
                                    eventType: e
                                }), this.adInstance._send_atom_event("hl.config", r), this._send_gametag_data("sdk_gameplay")
                            }
                        }, {
                            key: "_sendHLAnalyicsLog",
                            value: function(e) {
                                var t, r = this,
                                    n = e.query,
                                    e = e.eventType,
                                    o = this._gameData.dbglg;
                                o && o.enabled && o.topics && (1 === e ? t = "hl.gameplay" : 2 === e && (t = "hl.gameload"), t) && (o.topics.some(function(e) {
                                    return O(this, r), e === t
                                }.bind(this)) && this.adInstance._send_atom_event(t, n))
                            }
                        }, {
                            key: "_sendAdRequestContext",
                            value: function(e) {
                                this.msgrt.send("adctx", {
                                    message: e.adTag.bidder
                                })
                            }
                        }, {
                            key: "_checkWhitelabelPartner",
                            value: function() {
                                this._whitelabelPartner = !1;
                                var e = mn();
                                e.hasOwnProperty("xanthophyll") && "true" === e.xanthophyll && (this._whitelabelPartner = !0, Tn("White label publisher", "".concat(this._whitelabelPartner), "success"))
                            }
                        }, {
                            key: "_checkConsole",
                            value: function() {
                                try {
                                    kn && ("developer.gamedistribution.com" === this._parentDomain ? (Sn("gd_debug_ex", !0), Sn("gd_disable_midroll_timer", !0), Sn("gd_tag", !0)) : "localhost:3000" === this._parentDomain && (Sn("gd_debug_ex", !0), Sn("gd_disable_midroll_timer", !0)), xn("gd_debug_ex")) && (this.openConsole(), this.msgrt.send("dev.console", {
                                        message: this._parentDomain
                                    }))
                                } catch (e) {}
                            }
                        }, {
                            key: "_checkUserDeclinedTracking",
                            value: function() {
                                this._userDeclinedTracking = this._bridge.isCoreSDKMode || 0 <= document.location.search.indexOf("gdpr-tracking=0") || 0 <= document.cookie.indexOf("ogdpr_tracking=0")
                            }
                        }, {
                            key: "_initializeMessageRouter",
                            value: function() {
                                this.msgrt = new Nn({
                                    gameId: this.options.gameId,
                                    hours: (new Date).getHours(),
                                    topDomain: this._topDomain,
                                    domain: this._parentDomain,
                                    referrer: this._parentURL,
                                    depth: yn(),
                                    version: $u.version,
                                    tracking: this._userDeclinedTracking,
                                    whitelabel: this._whitelabelPartner,
                                    platform: vn(),
                                    byloader: this._bridge.isTokenGameURL,
                                    isTokenGameURL: this._bridge.isTokenGameURL,
                                    isMasterGameURL: this._bridge.isMasterGameURL,
                                    isExtHostedGameURL: this._bridge.isExtHostedGameURL,
                                    byloaderVersion: this._bridge.version
                                })
                            }
                        }, {
                            key: "_loadGamedockTracker",
                            value: function() {
                                var t = this;
                                try {
                                    var e = [this._gameData.gmky.url];
                                    bn(e[0], "GamedockSDK", {
                                        alternates: e
                                    }).then(function() {
                                        var e;
                                        O(this, t), RI = this._initGamedockTracker(window.GamedockSDK), this._sendGamedockEvent("pageview"), null != (e = this._gameData.diagnostic) && null != (e = e.gameDock) && e.adViewEvent && RI.tracking.enableHeartBeatForPage({
                                            pageId: this.options.gameId,
                                            pageType: "game"
                                        }, this._gameData.diagnostic.gameDock.heartbeatConfig), dO.track(RI, this._gameData)
                                    }.bind(this)).catch(function(e) {
                                        O(this, t), this._sendSDKError(e)
                                    }.bind(this))
                                } catch (t) {}
                            }
                        }, {
                            key: "_initGamedockTracker",
                            value: function(e) {
                                if (!this._bridge.isCoreSDKMode) return e.initialize("gd", this._parentDomain)
                            }
                        }, {
                            key: "_sendGamedockEvent",
                            value: function(e) {
                                var t;
                                null != (t = RI) && null != (t = t.tracking) && t.trackEvent(e, {
                                    pageId: this.options.gameId,
                                    pageType: "game"
                                })
                            }
                        }, {
                            key: "_loadMiniJuegosGratisTracker",
                            value: function() {
                                var t = this,
                                    e = (window.mpConfig = {
                                        game: this.options.gameId,
                                        partner: "game-distribution"
                                    }, ["https://ext.minijuegosgratis.com/external-host/main.js"]);
                                console.log("noMinijuegosSDK loading"), bn(e[0], "MinijuegosSDK", {
                                    alternates: e
                                }).catch(function(e) {
                                    O(this, t), this._sendSDKError(e)
                                }.bind(this))
                            }
                        }, {
                            key: "_loadLocus",
                            value: (kI = d(I.mark(function e() {
                                var t, r = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, PE();
                                        case 2:
                                            if (e.sent) {
                                                e.next = 6;
                                                break
                                            }
                                            return console.log("locus-disabled"), e.abrupt("return");
                                        case 6:
                                            bn((t = ["js/null.js?https://pm.azerioncircle.com/p/locus"])[0], "locus", {
                                                alternates: t
                                            }).catch(function(e) {
                                                O(this, r), this._sendSDKError(e)
                                            }.bind(this));
                                        case 8:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function() {
                                return kI.apply(this, arguments)
                            })
                        }, {
                            key: "_loadGoogleAnalytics",
                            value: function() {
                                var t = this,
                                    e = ["js/null.js?https://www.google-analytics.com/analytics.js"];
                                bn(e[0], "gdsdk_google_analytics", {
                                    alternates: e,
                                    error_prefix: "Blocked:",
                                    exists: function() {
                                        return O(this, t), window.ga
                                    }.bind(this)
                                }).then(function() {
                                    O(this, t), window.ga("create", "UA-60359297-49", {
                                        name: "gd",
                                        cookieExpires: 7776e3,
                                        sampleRate: 5
                                    }, "auto"), this._bridge.noGAPageView || window.ga("gd.send", "pageview"), this._userDeclinedTracking || window.ga("gd.set", "anonymizeIp", !0)
                                }.bind(this)).catch(function(e) {
                                    O(this, t), this._sendSDKError(e)
                                }.bind(this))
                            }
                        }, {
                            key: "_subscribeToEvents",
                            value: function() {
                                var n = this;
                                this.eventBus = new $n, Cn.forEach(function(e) {
                                    var t = this;
                                    return O(this, n), this.eventBus.subscribe(e, function(e) {
                                        return O(this, t), this._onEvent(e)
                                    }.bind(this), "sdk")
                                }.bind(this)), Ln.forEach(function(e) {
                                    var t = this;
                                    return O(this, n), this.eventBus.subscribe(e, function(e) {
                                        return O(this, t), this._onEvent(e)
                                    }.bind(this), "ima")
                                }.bind(this)), this.eventBus.subscribe("COMPLETE", function() {
                                    O(this, n);
                                    var e = this._getDeveloperDomains(),
                                        t = e.developerDomain,
                                        e = e.gameApiDomain;
                                    if (t) {
                                        fetch("https://".concat(e, "/game/v2/hasapi/").concat(this.options.gameId, "?timestamp=").concat((new Date).valueOf()));
                                        try {
                                            var r = JSON.stringify({
                                                type: "GD_SDK_IMPLEMENTED",
                                                gameID: this.options.gameId
                                            });
                                            window.location !== window.top.location ? window.top.postMessage(r, "*") : null !== window.opener && window.opener.location !== window.location && window.opener.postMessage(r, "*")
                                        } catch (e) {}
                                    }
                                    wT("act", "ad complete")
                                }.bind(this), "ima"), this.eventBus.subscribe("CONTENT_PAUSE_REQUESTED", function() {
                                    return O(this, n), this.onPauseGame("New advertisements requested and loaded", "success")
                                }.bind(this), "ima"), this.eventBus.subscribe("IMPRESSION", function(e) {
                                    var t;
                                    O(this, n), this.msgrt.send("ad.impression"), wT("genp", "ad video"), wT("act", "ad impression"), null != (t = this._gameData.diagnostic) && null != (t = t.gameDock) && t.adViewEvent && dO.track(RI, this._gameData)
                                }.bind(this), "ima"), this.eventBus.subscribe("AD_ERROR", function(e) {
                                    O(this, n), this.msgrt.send("ad.error", {
                                        message: e.message,
                                        details: e.details
                                    })
                                }.bind(this), "ima"), this.eventBus.subscribe("AD_SDK_REQUEST", function(e) {
                                    O(this, n), this._sendAdRequestContext(e.message)
                                }.bind(this), "sdk"), this.eventBus.subscribe("SDK_ERROR", function(e) {
                                    var t;
                                    O(this, n), e.message.startsWith("Blocked:") ? this._bridge.noBlockerEvent || (this.msgrt.send("error", {
                                        message: e.message
                                    }), this._hasBlocker) || (this._hasBlocker = !0, t = Math.random() < .25, this.msgrt.send("adblck.src", {
                                        message: e.message
                                    }), t && this._sendTunnlEvent(3)) : this.msgrt.send("error", {
                                        message: e.message
                                    })
                                }.bind(this), "sdk"), this.eventBus.subscribe("AD_REQUEST_KEYS_EMPTY", function(e) {
                                    O(this, n), this.msgrt.send("tunnl.keys.empty", {
                                        message: e.message,
                                        details: e.details
                                    })
                                }.bind(this), "sdk"), this.eventBus.subscribe("AD_REQUEST_KEYS_FALLBACK", function(e) {
                                    O(this, n), this.msgrt.send("tunnl.keys.fallback", {
                                        message: e.message,
                                        details: e.details
                                    })
                                }.bind(this), "sdk"), this.eventBus.subscribe("AD_T4R", function(e) {
                                    return O(this, n), this.msgrt.send("adt4r")
                                }.bind(this), "sdk")
                            }
                        }, {
                            key: "_checkGameId",
                            value: function() {
                                this.options.gameId === this._defaults.gameId && this._sendSDKError("Check correctness of your GAME ID. Otherwise, no revenue will be recorded.")
                            }
                        }, {
                            key: "_getDefaultGameData",
                            value: function() {
                                return {
                                    gameId: this.options.gameId,
                                    disableAds: {},
                                    preroll: !0,
                                    midroll: 12e4,
                                    rewardedAds: !1,
                                    title: "",
                                    tags: [],
                                    category: "",
                                    assets: [],
                                    dmain: !0,
                                    sdk: {},
                                    loader: {},
                                    splash: {},
                                    promo: {},
                                    dAds: {},
                                    pAds: {},
                                    mAds: {},
                                    rAds: {}
                                }
                            }
                        }, {
                            key: "_getGameDataUrl",
                            value: function() {
                                var e = void 0 !== this._topDomain && "undefined" !== this._topDomain ? this._topDomain : this._parentDomain,
                                    t = cE().config;
                                return "https://".concat(t.gameAPI, "/game/v4/get/").concat(this.options.gameId.replace(/-/g, ""), "/?domain=").concat(e, "&v=").concat($u.version, "&localTime=").concat((new Date).getHours())
                            }
                        }, {
                            // key: "_checkBlocking",
                            // value: (_I = d(I.mark(function e() {
                            //     var t, r, n;
                            //     return I.wrap(function(e) {
                            //         for (;;) switch (e.prev = e.next) {
                            //             case 0:
                            //                 r = this._gameData, n = 0 <= this._parentDomain.indexOf("gamedistribution.com"), t = void 0 === this._gameData.dmain || this._gameData.dmain, console.log("zxcv exclude, isAllowedDomain", n, t), t = t || n, (r.bloc_gard && !0 === r.bloc_gard.enabled || !t) && this._redirectToBlocking();
                            //             case 8:
                            //             case "end":
                            //                 return e.stop()
                            //         }
                            //     }, e, this)
                            // })), function() {
                            //     return _I.apply(this, arguments)
                            // })
                        }, {
                            key: "_blockDirectTokenURLEmbedding",
                            value: function() {
                                var e = this._checkTokenGameUrl(),
                                    t = new qk,
                                    r = "html5.gamedistribution.com" !== ce(document.referrer).host,
                                    e = e && !sI.SDKExistsOnUpperFrame && 0 < t.get("depth.value") && r;
                                return e && null != (t = this._gameData) && null != (r = t.directTokenUse) && r.enabled && ("to-loader" === (t = null == (t = this._gameData) || null == (r = t.directTokenUse) ? void 0 : r.behavior) ? this._redirectToLoaderFrame() : "to-blocked-page" === t && this._redirectToBlocking(!0)), {
                                    blocked: e
                                }
                            }
                        }, {
                            // key: "_redirectToBlocking",
                            // value: function(t) {
                            //     var r = this,
                            //         n = (this.msgrt.send("blocked"), this._gameData);
                            //     setTimeout(d(I.mark(function e() {
                            //         return I.wrap(function(e) {
                            //             for (;;) switch (e.prev = e.next) {
                            //                 case 0:
                            //                     if (t) return e.prev = 1, e.next = 4, r.adInstance._send_atom_event("token-blocked");
                            //                     e.next = 9;
                            //                     break;
                            //                 case 4:
                            //                     e.next = 9;
                            //                     break;
                            //                 case 6:
                            //                     e.prev = 6, e.t0 = e.catch(1), console.log("Could not send dump.token-blocked", e.t0);
                            //                 case 9:
                            //                     window.location.href = "https://html5.api.gamedistribution.com/blocked.html?".concat(H.stringify({
                            //                         domain: r._parentDomain,
                            //                         id: n.gameId,
                            //                         img: r._get_game_thumbnail_url(),
                            //                         title: n.title
                            //                     }));
                            //                 case 10:
                            //                 case "end":
                            //                     return e.stop()
                            //             }
                            //         }, e, null, [
                            //             [1, 6]
                            //         ])
                            //     })), 100)
                            // }
                        }, {
                            key: "_redirectToLoaderFrame",
                            value: function() {
                                var r = this,
                                    n = this._gameData;
                                setTimeout(d(I.mark(function e() {
                                    var t;
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                return e.prev = 0, e.next = 3, r.adInstance._send_atom_event("loader-redirect");
                                            case 3:
                                                e.next = 8;
                                                break;
                                            case 5:
                                                e.prev = 5, e.t0 = e.catch(0), console.log("Could not send dump.loader-redirect", e.t0);
                                            case 8:
                                                t = ce(location.href, !0), t = lI(lI({}, t.query), {}, {
                                                    rd: "1"
                                                }), t = H.stringify(t), t = "https://html5.gamedistribution.com/".concat(n.gameId, "/?").concat(t), window.location.href = t;
                                            case 13:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e, null, [
                                        [0, 5]
                                    ])
                                })), 100)
                            }
                        }, {
                            key: "_checkGameDeleted",
                            value: function() {
                                var e = this;
                                6 === this._gameData.status && (console.log("%c %c %c This game was deleted, please remove it in your website... ", "background: #F2181A", "background: #F23818", "color: #fff; background: #F23818;", "background: #F55E60", "background: #F55E60", "background: #c4161e; color: #fff;"), setTimeout(function() {
                                    O(this, e), document.location = "https://html5.api.gamedistribution.com/deleted.html"
                                }.bind(this), 100))
                            }
                        }, {
                            key: "_changeMidrollInDebugMode",
                            value: function() {
                                var e = this._gameData;
                                hT().disableMidrolltimer ? e.midroll = 0 : kn && xn("gd_debug_ex") && (xn("gd_disable_midroll_timer") ? e.midroll = 0 : e.midroll = this._getDefaultGameData().midroll)
                            }
                        }, {
                            key: "_checkSplashAndPromoScreens",
                            value: function() {
                                this._gameData.loader && !1 === this._gameData.loader.mobile && this._getisMobile() && (this._gameData.loader.enabled = !1);
                                var e, t = this._gameData,
                                    r = t.gdpr && !0 === t.gdpr.consent,
                                    n = t.loader,
                                    o = null == (o = t.promo) ? void 0 : o[null == (o = t.promo) || null == (o = o.template) ? void 0 : o.preroll];
                                t.preroll || (this.adRequestTimer = Date.now()), this.options.loader.enabled ? null != o && o.enabled ? this._createPromoBeforeSplash(t, r) : n.enabled && !0 !== (null == (e = n.splash) ? void 0 : e.skip) ? this._createSplash(t, r) : this.onResumeGame("Skipped splash.", "success") : n.enabled || this._bridge.isTokenGameURL && this._bridge.isExtHostedGameURL || (this.options.advertisementSettings.autoplay || r ? null != o && o.enabled ? this._createPromoBeforeSplash(t, r) : !1 !== n.enabled && this._createSplash(t, r) : null != o && o.enabled && this._createPromo(t, r))
                            }
                        }, {
                            key: "_initializeVideoAd",
                            value: (yI = d(I.mark(function e() {
                                var t;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (this._bridge.isCoreSDKMode) return e.abrupt("return");
                                            e.next = 2;
                                            break;
                                        case 2:
                                            return (t = this._gameData).sdk.enabled && (this.options.advertisementSettings = dn(this.options.advertisementSettings, t.sdk)), this.macros = new Bn({
                                                game: t,
                                                bridge: this._bridge
                                            }), this.adInstance = new tO(this.options.flashSettings.adContainerId, this.options.advertisementSettings, {
                                                parentURL: this._parentURL,
                                                parentDomain: this._parentDomain,
                                                topDomain: this._topDomain
                                            }), this.adInstance.gameId = t.gameId, this.adInstance.category = t.category, this.adInstance.tags = t.tags, this.adInstance.noPreroll = this._bridge.noPreroll, this.adInstance.macros = this.macros, this.adInstance.gameData = t, this.adInstance.msgrt = this.msgrt, this.adInstance.PackageJSON = $u, this.adInstance._send_atom_event("gd.location"), e.next = 17, this.adInstance.start();
                                        case 17:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function() {
                                return yI.apply(this, arguments)
                            })
                        }, {
                            key: "_sendSDKReady",
                            value: function() {
                                var e = "Everything is ready.";
                                this.eventBus.broadcast("SDK_READY", {
                                    message: e,
                                    status: "success"
                                });
                                try {
                                    this.options.onInit(e)
                                } catch (e) {
                                    Tn("DEVELOPER_ERROR", e.message, "warning")
                                }
                            }
                        }, {
                            key: "_sendSDKError",
                            value: function(e) {
                                e = e.message ? e : {
                                    message: e
                                }, this.eventBus.broadcast("SDK_ERROR", {
                                    message: e.message,
                                    status: "error"
                                });
                                try {
                                    this.options.onError(e)
                                } catch (e) {
                                    Tn("DEVELOPER_ERROR", e.message, "warning")
                                }
                            }
                        }, {
                            key: "_onEvent",
                            value: function(e) {
                                Tn(e.name, e.message, e.status);
                                try {
                                    this.options.onEvent({
                                        name: e.name,
                                        message: e.message,
                                        status: e.status,
                                        skipForward: e.skipForward,
                                        adPosition: e.adPosition
                                    })
                                } catch (e) {
                                    Tn("DEVELOPER_ERROR", e.message, "warning")
                                }
                            }
                        }, {
                            key: "_getGameData",
                            value: (bI = d(I.mark(function e() {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, OE();
                                        case 2:
                                            return r = e.sent, this.msgrt.setGameData(r), t = r.diagnostic, Dn = t, e.abrupt("return", r);
                                        case 6:
                                        case "end":
                                            return e.stop()
                                    }
                                    var t
                                }, e, this)
                            })), function() {
                                return bI.apply(this, arguments)
                            })
                        }, {
                            key: "_createSplash",
                            value: (vI = d(I.mark(function e(t, n) {
                                var o, r, i, a = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.next = 2, this._getSplashTemplate(t);
                                        case 2:
                                            return r = e.sent, o = new r(lI(lI({}, this.options), {}, {
                                                isConsentDomain: n,
                                                version: $u.version
                                            }), t, this._parentDomain), e.next = 6, UE();
                                        case 6:
                                            r = e.sent, i = r.enabled, o.on("playClick", function() {
                                                var e, t, r = this;
                                                O(this, a), n && ((e = new Date).setDate(e.getDate() + 90), document.cookie = "ogdpr_tracking=1; expires=".concat(e.toUTCString(), "; path=/")), this._hideCMPButton(), i ? window.gdsdk.showAd(g.Interstitial, {
                                                    position: "preroll"
                                                }).catch(function(e) {
                                                    O(this, r), o.hide()
                                                }.bind(this)) : (t = {
                                                    position: "preroll"
                                                }, function() {
                                                    O(this, r), Nu.firstAdapterModeAdsense && (console.log("promo-test, set first adapter to adssense 1"), t.adapter = "adsense")
                                                }.bind(this), this.showAd(g.Interstitial, t).catch(function(e) {
                                                    O(this, r)
                                                }.bind(this))), null != (e = this._gameData) && null != (e = e.evnts) && e.enabled && (DO({
                                                    event: "FirstInteraction",
                                                    game: this._gameData
                                                }), this._send_gametag_data("first_interaction"))
                                            }.bind(this)), this.onPauseGame("Pause the game and wait for a user gesture", "success"), this.eventBus.subscribe("SDK_GAME_PAUSE", function() {
                                                O(this, a), o.hide()
                                            }.bind(this)), this.eventBus.subscribe("SDK_GAME_START", function() {
                                                O(this, a), o.hide()
                                            }.bind(this));
                                        case 12:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this)
                            })), function(e, t) {
                                return vI.apply(this, arguments)
                            })
                        }, {
                            key: "_createPromoBeforeSplash",
                            value: (gI = d(I.mark(function e(t, r) {
                                var n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, this._createPrerollPromoTemplate(t);
                                        case 3:
                                            n = e.sent, (o = new n(lI(lI({}, this.options), {}, {
                                                isConsentDomain: r,
                                                version: $u.version,
                                                template: null == (n = t.promo) || null == (n = n.template) ? void 0 : n.preroll
                                            }), t)).on("done", function() {
                                                O(this, i), o.hide(), this._createSplash(t, r)
                                            }.bind(this)), e.next = 12;
                                            break;
                                        case 8:
                                            e.prev = 8, e.t0 = e.catch(0), console.log(e.t0), this._createSplash(t, r);
                                        case 12:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 8]
                                ])
                            })), function(e, t) {
                                return gI.apply(this, arguments)
                            })
                        }, {
                            key: "_createPromo",
                            value: (mI = d(I.mark(function e(t, r) {
                                var n, o, i = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.prev = 0, e.next = 3, this._createPrerollPromoTemplate(t);
                                        case 3:
                                            n = e.sent, (o = new n(lI(lI({}, this.options), {}, {
                                                isConsentDomain: r,
                                                version: $u.version,
                                                template: null == (n = t.promo) || null == (n = n.template) ? void 0 : n.preroll
                                            }), t)).on("done", function() {
                                                O(this, i), o.hide(), this.onResumeGame("Resumed after the promo", "warning")
                                            }.bind(this)), this.onPauseGame("Pause the game for the promo", "success"), e.next = 12;
                                            break;
                                        case 9:
                                            e.prev = 9, e.t0 = e.catch(0), this.onResumeGame("Resumed after the promo", "warning");
                                        case 12:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 9]
                                ])
                            })), function(e, t) {
                                return mI.apply(this, arguments)
                            })
                        }, {
                            key: "showBanner",
                            value: function() {
                                var e = this;
                                this.showAd(g.Interstitial).catch(function() {
                                    O(this, e)
                                }.bind(this))
                            }
                        }, {
                            key: "showAd",
                            value: (hI = d(I.mark(function e(a) {
                                var s, u = this,
                                    t = arguments;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return s = 1 < t.length && void 0 !== t[1] ? t[1] : {}, e.abrupt("return", new Promise(function() {
                                                var r = d(I.mark(function e(t, r) {
                                                    var n, o, i;
                                                    return I.wrap(function(e) {
                                                        for (;;) switch (e.prev = e.next) {
                                                            case 0:
                                                                if (e.prev = 0, u._autoResumeIfAdsAreDisabled(a || "interstitial")) return e.abrupt("return", t());
                                                                e.next = 5;
                                                                break;
                                                            case 5:
                                                                return n = {
                                                                    adType: a || "interstitial",
                                                                    params: s,
                                                                    adTimestamp: u.adRequestTimer
                                                                }, e.next = 9, u.sdkReady;
                                                            case 9:
                                                                return o = e.sent, e.next = 12, u.videoAdReady;
                                                            case 12:
                                                                if (null != (i = u._gameData.lp) && i.load || u._sendLoadedEvent(1), u._sendGamedockGamePlay(), u._rejectAdIfGameBlocked({
                                                                        gameData: o,
                                                                        adRequest: n
                                                                    }), u._rejectAdIfAdDisabled({
                                                                        gameData: o,
                                                                        adRequest: n
                                                                    }), u._rejectAdIfUnsupportedType({
                                                                        adRequest: n
                                                                    }), "rewarded" === a && u._setGameRewardedFlag(), null != s && s.isGift || u._rejectAdIfAdRateHits({
                                                                        gameData: o,
                                                                        adRequest: n
                                                                    }), u.adInstance.attachAfgPosition(n), u.adFlowRunning) return e.abrupt("return", t());
                                                                e.next = 22;
                                                                break;
                                                            case 22:
                                                                return u.adFlowRunning = !0, i = new VO(u), e.next = 26, i.runAdFlow(n);
                                                            case 26:
                                                                u.adFlowRunning = !1, t(), u._post_message({
                                                                    topic: "adrequest.instream"
                                                                }), e.next = 36;
                                                                break;
                                                            case 31:
                                                                e.prev = 31, e.t0 = e.catch(0), u.adFlowRunning = !1, u.onResumeGame(e.t0.message, "warning"), r(e.t0.message);
                                                            case 36:
                                                            case "end":
                                                                return e.stop()
                                                        }
                                                    }, e, null, [
                                                        [0, 31]
                                                    ])
                                                }));
                                                return function(e, t) {
                                                    return r.apply(this, arguments)
                                                }
                                            }()));
                                        case 2:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return hI.apply(this, arguments)
                            })
                        }, {
                            key: "_autoResumeIfAdsAreDisabled",
                            value: function(e) {
                                var t = !1,
                                    r = null == (r = this._gameData.diagnostic) ? void 0 : r.close_ads,
                                    e = this._gameData.disableAds[e];
                                return this._gameData.diagnostic, this._gameData.disableAds, (r || e) && (this._runAutoResume(), t = !0), t
                            }
                        }, {
                            key: "_runAutoResume",
                            value: function() {
                                var e = "CONTENT_PAUSE_REQUESTED",
                                    t = "CONTENT_RESUME_REQUESTED";
                                this.eventBus.broadcast(e, {
                                    name: e,
                                    message: "Auto pause when ads are disabled"
                                }), this.eventBus.broadcast(t, {
                                    name: t,
                                    message: "Auto resume when ads are disabled"
                                }), this.onResumeGame("Advertisement(s) are cancelled. Start / resume the game.", "success")
                            }
                        }, {
                            key: "_giveGift",
                            value: function(e) {
                                var t;
                                switch (e) {
                                    case "preroll":
                                        null != (t = this._gameData) && null != (t = t.gft) && t[e].enabled && (null == (t = this._gameData) || null == (t = t.gft) || null == (t = t[e].durations[this._giftCount[e]]) ? void 0 : t.after) === this.adInstance.adPrerollCount && this.decideToGiveAGift(e);
                                        break;
                                    case "midroll":
                                        null != (t = this._gameData) && null != (t = t.gft) && t[e].enabled && (null == (t = this._gameData) || null == (t = t.gft) || null == (t = t[e].durations[this._giftCount[e]]) ? void 0 : t.after) === this.adInstance.adMidrollCount && this.decideToGiveAGift(e);
                                        break;
                                    case "rewarded":
                                        null != (t = this._gameData) && null != (t = t.gft) && t[e].enabled && (null == (t = this._gameData) || null == (t = t.gft) || null == (t = t[e].durations[this._giftCount[e]]) ? void 0 : t.after) === this.adInstance.adRewardedCount && this.decideToGiveAGift(e)
                                }
                            }
                        }, {
                            key: "_setAdRequestTimer",
                            value: function() {
                                this.adRequestTimer = Date.now()
                            }
                        }, {
                            key: "clearSession",
                            value: function() {
                                this.adInstance.clearSession()
                            }
                        }, {
                            key: "_attachAfgFallback",
                            value: function(e) {
                                var t = e.gameData,
                                    r = e.adRequest;
                                if (!t.afg_disabled && !r.params.hasOwnProperty("fallback_adsense")) switch (r.params.position) {
                                    case "preroll":
                                    case "start":
                                    case "next":
                                        r.params.fallback_adsense = !0
                                }
                            }
                        }, {
                            key: "_rejectAdIfGameBlocked",
                            value: function(e) {
                                e = e.gameData;
                                if (e.bloc_gard && !0 === e.bloc_gard.enabled) throw new Error("Game or domain is blocked.")
                            }
                        }, {
                            key: "_rejectAdIfAdDisabled",
                            value: function(e) {
                                var t = e.gameData,
                                    e = e.adRequest;
                                if (t.disableAds[e.adType] || this._whitelabelPartner) throw new Error("Advertisements are disabled.")
                            }
                        }, {
                            key: "_rejectAdIfUnsupportedType",
                            value: function(e) {
                                e = e.adRequest;
                                if (e.adType) {
                                    if (e.adType !== g.Interstitial && e.adType !== g.Rewarded) throw new Error("Unsupported an advertisement type: ", e.adType)
                                } else e.adType = g.Interstitial
                            }
                        }, {
                            key: "_rejectAdIfRewardedDisabled",
                            value: function(e) {
                                var t = e.gameData;
                                if (e.adRequest.adType === g.Rewarded && !t.rewardedAds) throw new Error("Rewarded ads are disabled.")
                            }
                        }, {
                            key: "_rejectAdIfAdRateHits",
                            value: function(e) {
                                var t, r = e.gameData,
                                    e = e.adRequest,
                                    n = null;
                                if (e.adType === g.Interstitial && null != (t = r.diagnostic) && null != (t = t.useMidrollIndex) && t.enabled && this.adInstance.noPreroll ? this.adInstance.adMidrollCount > (null == (t = r.diagnostic) || null == (t = t.useMidrollIndex) ? void 0 : t.indexes.length) - 1 || (n = 6e4 * (null == (t = r.diagnostic) || null == (t = t.useMidrollIndex) ? void 0 : t.indexes[this.adInstance.adMidrollCount])) : n = r.midroll, e.adType === g.Interstitial && void 0 !== this.adRequestTimer && Date.now() - this.adRequestTimer < n) throw new Error("The advertisement was requested too soon.")
                            }
                        }, {
                            key: "preloadAd",
                            value: (pI = d(I.mark(function e(i) {
                                var a = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.abrupt("return", new Promise(function() {
                                                var r = d(I.mark(function e(t, r) {
                                                    var n, o;
                                                    return I.wrap(function(e) {
                                                        for (;;) switch (e.prev = e.next) {
                                                            case 0:
                                                                return e.prev = 0, e.next = 3, a.sdkReady;
                                                            case 3:
                                                                return n = e.sent, e.next = 6, a.videoAdReady;
                                                            case 6:
                                                                if (n.bloc_gard && !0 === n.bloc_gard.enabled) throw new Error("Game or domain is blocked.");
                                                                e.next = 8;
                                                                break;
                                                            case 8:
                                                                if (n.disableAds[i] || a._whitelabelPartner) throw new Error("Advertisements are disabled for this ad type => ".concat(i, "..."));
                                                                e.next = 10;
                                                                break;
                                                            case 10:
                                                                i ? e.next = 14 : (i = g.Rewarded, e.next = 16);
                                                                break;
                                                            case 14:
                                                                if (i !== g.Interstitial && i !== g.Rewarded) throw new Error("Unsupported an advertisement type:" + i);
                                                                e.next = 16;
                                                                break;
                                                            case 16:
                                                                return e.next = 18, a.adInstance.preloadAd(i);
                                                            case 18:
                                                                o = e.sent, t(o), e.next = 25;
                                                                break;
                                                            case 22:
                                                                e.prev = 22, e.t0 = e.catch(0), r(e.t0);
                                                            case 25:
                                                            case "end":
                                                                return e.stop()
                                                        }
                                                    }, e, null, [
                                                        [0, 22]
                                                    ])
                                                }));
                                                return function(e, t) {
                                                    return r.apply(this, arguments)
                                                }
                                            }()));
                                        case 1:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return pI.apply(this, arguments)
                            })
                        }, {
                            key: "cancelAd",
                            value: (fI = d(I.mark(function e() {
                                var n = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return e.abrupt("return", new Promise(function() {
                                                var r = d(I.mark(function e(t, r) {
                                                    return I.wrap(function(e) {
                                                        for (;;) switch (e.prev = e.next) {
                                                            case 0:
                                                                try {
                                                                    n.adInstance.cancel(), n.onResumeGame("Advertisement(s) are cancelled. Start / resume the game.", "success"), r()
                                                                } catch (e) {
                                                                    n.onResumeGame("Advertisement(s) are cancelled. Start / resume the game.", "success"), t(e.message)
                                                                }
                                                            case 1:
                                                            case "end":
                                                                return e.stop()
                                                        }
                                                    }, e)
                                                }));
                                                return function(e, t) {
                                                    return r.apply(this, arguments)
                                                }
                                            }()));
                                        case 1:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function() {
                                return fI.apply(this, arguments)
                            })
                        }, {
                            key: "showDisplayAd",
                            value: function(o) {
                                var r, i = this;
                                return new Promise((r = d(I.mark(function e(t, r) {
                                    var n;
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                return e.prev = 0, e.next = 3, i.sdkReady;
                                            case 3:
                                                return n = e.sent, e.next = 6, i.videoAdReady;
                                            case 6:
                                                if (n.dAds.enabled) return e.next = 9, i.adInstance.loadDisplayAd(o);
                                                e.next = 13;
                                                break;
                                            case 9:
                                                i._post_message({
                                                    topic: "adrequest.display"
                                                }), t(), e.next = 14;
                                                break;
                                            case 13:
                                                r("Display-Ads are disabled.");
                                            case 14:
                                                e.next = 19;
                                                break;
                                            case 16:
                                                e.prev = 16, e.t0 = e.catch(0), r(e.t0.message || e.t0);
                                            case 19:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e, null, [
                                        [0, 16]
                                    ])
                                })), function(e, t) {
                                    return r.apply(this, arguments)
                                }))
                            }
                        }, {
                            key: "onResumeGame",
                            value: function(e, t) {
                                this._allowExternals({
                                    enabled: !1
                                });
                                try {
                                    this.options.resumeGame()
                                } catch (e) {
                                    console.log("gd-adflow error onResumeGame", e), Tn("DEVELOPER_ERROR", e.message, "warning")
                                }
                                var r = "SDK_GAME_START";
                                this.eventBus.broadcast(r, {
                                    name: r,
                                    message: e,
                                    status: t,
                                    analytics: {
                                        category: "SDK",
                                        action: r,
                                        label: this.options.gameId + ""
                                    }
                                }), this.adInstance && this.adInstance._hideAddResume(), null == (t = this._gameData.evnts) || !t.enabled || this._isMasterGameURL() && !this._isExtHostedGameURL() || (DO({
                                    event: "GameStarted",
                                    game: this._gameData
                                }), this._send_gametag_data("game_started"))
                            }
                        }, {
                            key: "onPauseGame",
                            value: function(e, t) {
                                this._allowExternals({
                                    enabled: !0
                                });
                                try {
                                    this.options.pauseGame()
                                } catch (e) {
                                    Tn("DEVELOPER_ERROR", e.message, "warning")
                                }
                                var r = "SDK_GAME_PAUSE";
                                this.eventBus.broadcast(r, {
                                    name: r,
                                    message: e,
                                    status: t,
                                    analytics: {
                                        category: "SDK",
                                        action: r,
                                        label: this.options.gameId + ""
                                    }
                                }), null == (t = this._gameData.evnts) || !t.enabled || this._isMasterGameURL() && !this._isExtHostedGameURL() || (DO({
                                    event: "GamePaused",
                                    game: this._gameData
                                }), this._send_gametag_data("game_paused"))
                            }
                        }, {
                            key: "onRewardedWatchComplete",
                            value: function() {
                                this.eventBus.broadcast("SDK_REWARDED_WATCH_COMPLETE", {
                                    message: "",
                                    status: "success"
                                })
                            }
                        }, {
                            key: "onAdError",
                            value: function(e) {
                                this.eventBus.broadcast("AD_ERROR", {
                                    message: e,
                                    status: "error"
                                })
                            }
                        }, {
                            key: "openConsole",
                            value: function() {
                                try {
                                    new Gn(this).start(), Sn("gd_debug_ex", !0)
                                } catch (e) {
                                    console.log(e)
                                }
                            }
                        }, {
                            key: "_initBlockingExternals",
                            value: function() {
                                var e = this._gameData;
                                (e.failed || e.block_exts && e.block_exts.enabled) && (this.window_open = window.open, this._allowExternals({
                                    enabled: !1
                                }), this._removeExternalsInHtml({
                                    enabled: !1
                                }))
                            }
                        }, {
                            key: "_checkFullscreen",
                            value: function() {
                                var r = this;
                                try {
                                    var e = this._gameData;
                                    e.sdk.fullscreen && "auto" === e.sdk.fullscreen && document.addEventListener("click", function() {
                                        var e, t;
                                        O(this, r), this._isFullScreen || ((t = (e = document.body).requestFullScreen || e.webkitRequestFullScreen || e.mozRequestFullScreen || e.msRequestFullscreen) ? t.call(e) : void 0 !== window.ActiveXObject && null !== (t = new ActiveXObject("WScript.Shell")) && t.SendKeys("{F11}"), this._isFullScreen = !0)
                                    }.bind(this))
                                } catch (r) {
                                    console.log("Fullscreen error handled...", r)
                                }
                            }
                        }, {
                            key: "_allowExternals",
                            value: function(e) {
                                var t = this;
                                void 0 !== this.window_open && (!1 === e.enabled ? window.open = function(e) {
                                    O(this, t), this.msgrt.send("external", {
                                        message: "C> ".concat(e)
                                    }), (e.startsWith("https://play.google.com") || e.startsWith("https://itunes.apple.com")) && this.window_open.call(null, e)
                                }.bind(this) : window.open = this.window_open)
                            }
                        }, {
                            key: "_shouldAllowExternalUrl",
                            value: function(e) {
                                var t = this,
                                    e = new ce(e),
                                    r = e.host;
                                return e.href, ((null == (e = this._gameData.urlBlockExc) ? void 0 : e.hosts) || []).some(function(e) {
                                    return O(this, t), e === r
                                }.bind(this))
                            }
                        }, {
                            key: "_removeExternalsInHtml",
                            value: function(e) {
                                var i = this;
                                !1 === e.enabled && window.document.querySelectorAll("a").forEach(function(e) {
                                    var t, r = this,
                                        n = (O(this, i), !!(e.innerText.toLowerCase().includes("start") || e.innerText.toLowerCase().includes("play") || e.innerText.toLowerCase().includes("continue"))),
                                        o = e.getAttribute("href");
                                    this._shouldAllowExternalUrl(o) || (t = e.getAttribute("href"), e.removeAttribute("href"), n) || (e.onclick = function(e) {
                                        return O(this, r), e.preventDefault(), this.msgrt.send("external", {
                                            message: "H> ".concat(t)
                                        }), !1
                                    }.bind(this))
                                }.bind(this))
                            }
                        }, {
                            key: "_getBridgeContext",
                            value: function() {
                                var e = this._isTokenGameURL(),
                                    t = this._isMasterGameURL(),
                                    r = this._isExtHostedGameURL(),
                                    n = (e || r ? this._getTokenGameURLConfig() : {}) || {},
                                    o = decodeURIComponent((e || r) && n.parentURL ? n.parentURL : pn()),
                                    i = decodeURIComponent((e || r) && n.parentDomain ? n.parentDomain : fn()),
                                    a = decodeURIComponent((e || r) && n.topDomain ? n.topDomain : r && 0 === yn() ? i : An()),
                                    s = (e || r) && n.loaderEnabled,
                                    u = (e || r) && n.loaderEnabled,
                                    c = (e || r) && n.loaderEnabled,
                                    l = (e || r) && n.loaderEnabled,
                                    d = (e || r) && n.loaderEnabled,
                                    f = (e || r) && n.loaderEnabled,
                                    p = (e || r) && n.loaderEnabled,
                                    h = (e || r) && n.loaderEnabled,
                                    m = (e || r) && n.loaderEnabled && n.hasImpression && "1.1.24" <= n.version;
                                return {
                                    isTokenGameURL: e,
                                    isMasterGameURL: t,
                                    isExtHostedGameURL: r,
                                    noConsoleBanner: s,
                                    noLoadedEvent: u,
                                    noBlockerEvent: c,
                                    noPreroll: h,
                                    parentURL: o,
                                    parentDomain: i,
                                    topDomain: a && a.length ? a : i,
                                    noGAPageView: l,
                                    noLotamePageView: d,
                                    noGamedockSDK: f,
                                    noMinijuegosSDK: p,
                                    version: n.version,
                                    pauseGameOnStartup: m,
                                    depth: yn(),
                                    domainMatched: i === a,
                                    exports: {
                                        formatTokenURLSearch: this._formatTokenURLSearch.bind(this),
                                        extendUrlQuery: this._extendUrlQuery.bind(this),
                                        base64Encode: this._base64_encode.bind(this)
                                    }
                                }
                            }
                        }, {
                            key: "_isHostHTML5Domain",
                            value: function() {
                                var e = new ce(location.href);
                                return "html5.gamedistribution.com" === (null == e ? void 0 : e.host.toLowerCase())
                            }
                        }, {
                            key: "_isExternalHoster",
                            value: function() {
                                var e;
                                return null == (e = this._gameData) || null == (e = e.extHosting) ? void 0 : e.enabled
                            }
                        }, {
                            key: "_whichFrame",
                            value: function() {
                                return !this._isMasterGameURL() && !this._isExtHostedGameURL() || this._isTokenGameURL() ? "game-frame" : "loader-frame"
                            }
                        }, {
                            key: "_isMasterGameURL",
                            value: function() {
                                var e = /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Fa-f0-9]{32})(.*)$/i;
                                return e.test(location.href) || !this._isTokenGameURL() && e.test(document.referrer)
                            }
                        }, {
                            key: "_checkTokenGameUrl",
                            value: function() {
                                var e = ce(location.href),
                                    t = e.origin,
                                    e = e.pathname,
                                    t = "".concat(t).concat(e);
                                return /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Za-z0-9]{8})\/(.*)$/i.test(t)
                            }
                        }, {
                            key: "_isTokenGameURL",
                            value: function() {
                                var e = /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Za-z0-9]{8})\/(.*)$/i,
                                    t = "1" === (null == (t = ce(location.href, !0).query) ? void 0 : t.rd);
                                return e.test(location.href) || !t && e.test(document.referrer)
                            }
                        }, {
                            key: "_isExtHostedGameURL",
                            value: function() {
                                var e = /^http[s]?:\/\/.*?gd_sdk_referrer_url=.*$/i;
                                return e.test(location.href) || e.test(document.referrer)
                            }
                        }, {
                            key: "_isLoaderGameURL",
                            value: function() {
                                return /http[s]?:\/\/(html5\.gamedistribution\.com\/[A-Fa-f0-9]{32})(.*)$/i.test(location.href) && location.href.startsWith("https://html5.gamedistribution.com")
                            }
                        }, {
                            key: "_getTokenGameURLConfig",
                            value: function() {
                                try {
                                    var e, t = /http[s]?:\/\/html5\.gamedistribution\.com\/[A-Za-z0-9]{8}\/[A-Fa-f0-9]{32}\/.*/i;
                                    if (t.test(location.href)) {
                                        var r = new ce(location.href, !0);
                                        if (!r.query.gd_zone_config) return;
                                        e = r.query.gd_zone_config
                                    } else if (t.test(document.referrer)) {
                                        var n = new ce(document.referrer, !0);
                                        if (!n.query.gd_zone_config) return;
                                        e = n.query.gd_zone_config
                                    } else {
                                        var o = new ce(location.href, !0);
                                        if (!o.query.gd_zone_config) return;
                                        e = o.query.gd_zone_config
                                    }
                                    return JSON.parse(ln(decodeURIComponent(e)))
                                } catch (e) {}
                            }
                        }, {
                            key: "_getSplashTemplate",
                            value: function(e) {
                                e = e.splash;
                                return new nO(e).splash()
                            }
                        }, {
                            key: "_createPrerollPromoTemplate",
                            value: (dI = d(I.mark(function e(t) {
                                var r;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            return r = null == (r = t.promo) ? void 0 : r[null == (r = t.promo) || null == (r = r.template) ? void 0 : r.preroll], r = new rO(r), e.abrupt("return", r.promo());
                                        case 3:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e)
                            })), function(e) {
                                return dI.apply(this, arguments)
                            })
                        }, {
                            key: "_formatTokenURLSearch",
                            value: function(e) {
                                var t = "";
                                try {
                                    t = encodeURIComponent(cn(JSON.stringify(e)))
                                } catch (e) {}
                                try {
                                    var r = new ce(location.href, !0);
                                    return r.query = r.query || {}, r.query.gd_zone_config = t, "?".concat(H.stringify(r.query))
                                } catch (e) {
                                    return "?gd_zone_config=".concat(t)
                                }
                            }
                        }, {
                            key: "_extendUrlQuery",
                            value: function(e, t) {
                                e = new ce(e, !0);
                                return e.query = lI(lI({}, e.query), t), e.toString()
                            }
                        }, {
                            key: "_base64_encode",
                            value: function(e) {
                                return cn(JSON.stringify(e))
                            }
                        }, {
                            key: "session",
                            value: function() {
                                var r, o = this;
                                return new Promise((r = d(I.mark(function e(t, r) {
                                    var n;
                                    return I.wrap(function(e) {
                                        for (;;) switch (e.prev = e.next) {
                                            case 0:
                                                return e.prev = 0, e.next = 3, o.sdkReady;
                                            case 3:
                                                e.next = 7;
                                                break;
                                            case 5:
                                                e.prev = 5, e.t0 = e.catch(0);
                                            case 7:
                                                n = o._gameData, t({
                                                    ads: {
                                                        display: {
                                                            enabled: n.dAds.enabled
                                                        },
                                                        rewarded: {
                                                            enabled: n.rewardedAds
                                                        }
                                                    },
                                                    location: {
                                                        parentDomain: o._bridge.parentDomain,
                                                        topDomain: o._bridge.topDomain,
                                                        parentURL: o._bridge.parentURL,
                                                        depth: o._bridge.depth,
                                                        loadedByGameZone: o._bridge.isTokenGameURL
                                                    }
                                                });
                                            case 9:
                                            case "end":
                                                return e.stop()
                                        }
                                    }, e, null, [
                                        [0, 5]
                                    ])
                                })), function(e, t) {
                                    return r.apply(this, arguments)
                                }))
                            }
                        }, {
                            key: "sendGenericEvent",
                            value: function(e) {
                                console.log("Received generic event", e, this._isMasterGameURL());
                                try {
                                    var t, r;
                                    if ("track-milestone" == e.eventName) RI.tracking.trackEvent("milestoneAchieved", {
                                        pageId: this.options.gameId,
                                        pageType: "game",
                                        isAuthorized: null == (t = e.data) ? void 0 : t.isAuthorized,
                                        milestoneDescription: null == (r = e.data) ? void 0 : r.milestoneDescription
                                    });
                                    else if ("game_event" == e.eventName) return this._gameEventPostMessage(e)
                                } catch (e) {
                                    console.log(e.message)
                                }
                            }
                        }, {
                            key: "_gameEventPostMessage",
                            value: function(e) {
                                void 0 !== e.data.level && this._numberValidator(e.data.level) && void 0 !== e.data.score && this._numberValidator(e.data.score) ? (e = {
                                    type: e.eventName,
                                    data: e.data
                                }, window.location !== window.top.location && window.top.postMessage(e, "*")) : console.log("Level data type should be number!")
                            }
                        }, {
                            key: "_numberValidator",
                            value: function(e) {
                                return "number" == typeof e && /^\d*$/.test(e)
                            }
                        }, {
                            key: "_getisMobile",
                            value: function() {
                                var e = !1,
                                    t = navigator.userAgent || navigator.vendor || window.opera;
                                return e = !1 === (e = /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4)) ? !0 : e) && -1 < window.orientation ? !0 : e
                            }
                        }, {
                            key: "_get_game_thumbnail_url",
                            value: function() {
                                var t = this,
                                    e = this._gameData,
                                    r = (r = e.assets.find(function(e) {
                                        return O(this, t), e.hasOwnProperty("name") && 512 === e.width && 512 === e.height
                                    }.bind(this))) || (0 < e.assets.length ? e.assets[0] : {
                                        name: "logo.svg"
                                    });
                                return "https://img.gamedistribution.com/".concat(r.name)
                            }
                        }, {
                            key: "_post_message",
                            value: function(e) {
                                var t = e.topic,
                                    r = e.data,
                                    n = null != (n = location.ancestorOrigins) && n.length ? location.ancestorOrigins[location.ancestorOrigins.length - 1] : "*";
                                try {
                                    var o = window.top || window.parent;
                                    o && o.postMessage({
                                        source: "gdsdk",
                                        topic: t,
                                        data: r
                                    }, n)
                                } catch (e) {
                                    console.error((null == e ? void 0 : e.message) || e)
                                }
                            }
                        }, {
                            key: "decideToGiveAGift",
                            value: function(r) {
                                var n = this;
                                try {
                                    var e, t = null == (e = this._gameData) ? void 0 : e.gft[r],
                                        o = setInterval(d(I.mark(function e() {
                                            var t = this;
                                            return I.wrap(function(e) {
                                                for (;;) switch (e.prev = e.next) {
                                                    case 0:
                                                        n.adInstance.requestRunning || n.adFlowRunning ? console.log("Advertisement already running...") : (n.showAd(g.Interstitial, {
                                                            position: r,
                                                            isGift: !0
                                                        }).catch(function(e) {
                                                            O(this, t)
                                                        }.bind(this)), clearInterval(o), n._giftCount[r]++);
                                                    case 1:
                                                    case "end":
                                                        return e.stop()
                                                }
                                            }, e, this)
                                        })), 1e3 * t.durations[this._giftCount[r]].wait)
                                } catch (r) {
                                    console.log("Advertisement Error...")
                                }
                            }
                        }, {
                            key: "send_atom_event",
                            value: function(e, t) {
                                this.adInstance._send_atom_event(e, t)
                            }
                        }, {
                            key: "get_session_id",
                            value: function() {
                                return EI
                            }
                        }, {
                            key: "get_ad_system_init_result",
                            value: function() {
                                return {
                                    afg: this.adInstance.afgInitSuccess,
                                    ima: this.adInstance.imaInitSuccess
                                }
                            }
                        }, {
                            key: "_getDeveloperDomains",
                            value: function() {
                                var e, t;
                                return "developer.gamedistribution.com" === this._parentDomain || "developer-acc.gamedistribution.com" === this._parentDomain ? e = this._parentDomain : !0 === new RegExp("^localhost").test(this._parentDomain) && (e = "localhost"), {
                                    developerDomain: e,
                                    gameApiDomain: t = e ? {
                                        "developer-acc.gamedistribution.com": "game-api-acc-real-aws.gamedistribution.com",
                                        "developer.gamedistribution.com": "game.api.gamedistribution.com",
                                        localhost: "game-api-acc-real-aws.gamedistribution.com"
                                    }[e] : t
                                }
                            }
                        }, {
                            key: "_setGameRewardedFlag",
                            value: function() {
                                try {
                                    var e = this._getDeveloperDomains(),
                                        t = e.developerDomain,
                                        r = e.gameApiDomain;
                                    if (t) {
                                        fetch("https://".concat(r, "/game/v2/hasrewarded/").concat(this.options.gameId, "?timestamp=").concat((new Date).valueOf()));
                                        try {
                                            var n = JSON.stringify({
                                                type: "GD_SDK_REWARDED_SET",
                                                gameID: this.options.gameId
                                            });
                                            window.location !== window.top.location ? window.top.postMessage(n, "*") : null !== window.opener && window.opener.location !== window.location && window.opener.postMessage(n, "*")
                                        } catch (e) {}
                                    }
                                } catch (e) {}
                            }
                        }, {
                            key: "_getGdModeIfExist",
                            value: function() {
                                var r = this,
                                    e = new Proxy(new URLSearchParams(window.location.search), {
                                        get: function(e, t) {
                                            return O(this, r), e.get(t)
                                        }.bind(this)
                                    });
                                return !e.gd_mode && window.location.search.includes("gd_mode") ? window.location.search.split("gd_mode=")[1] : e.gd_mode
                            }
                        }, {
                            key: "_executeMidrollPlus",
                            value: function() {
                                var e, r, n, o = this;
                                null != (e = this._gameData.midroll_plus) && e.enabled && this.adInstance.adMidrollCount <= 0 && (r = this._gameData.midroll_plus.type || "midroll", null != (e = this._gameData.midroll_plus) && e.interval ? n = setInterval(function() {
                                    var e, t = this;
                                    O(this, o), this.adFlowRunning || (this.showAd(g.Interstitial, {
                                        position: "midroll",
                                        giftType: r
                                    }).catch(function(e) {
                                        O(this, t)
                                    }.bind(this)), this._mplus_count++, "infinite" !== (null == (e = this._gameData.midroll_plus) ? void 0 : e.interval) && this._mplus_count === (null == (e = this._gameData.midroll_plus) ? void 0 : e.interval) && clearInterval(n))
                                }.bind(this), 6e4 * this._gameData.midroll_plus.timer) : setTimeout(function() {
                                    var t = this;
                                    O(this, o), this.showAd(g.Interstitial, {
                                        position: "midroll",
                                        giftType: r
                                    }).catch(function(e) {
                                        O(this, t)
                                    }.bind(this))
                                }.bind(this), this._gameData.midroll))
                            }
                        }]), TI);

                    function TI(e) {
                        var r = this;
                        if (le(this, TI), SI) return SI;
                        (SI = this).blockedAdsMap = {}, this._defaults = this._getDefaultOptions(), this._extendDefaultOptions(this._defaults, e), this._version = e.version || "0.0.0", this._bridge = this._getBridgeContext(), this._location = new qk, this._location.print(), this._parentURL = 0 === this._bridge.depth ? encodeURIComponent(this._bridge.parentURL) : this._bridge.parentURL, this._parentDomain = this._bridge.parentDomain, this._topDomain = this._bridge.topDomain, this._isFullScreen = !1, this._giftCount = {
                            preroll: 0,
                            midroll: 0,
                            rewarded: 0
                        }, this._mplus_count = 0, this._setConsoleBanner(), this._initializeMessageRouter(), this._checkConsole(), this._subscribeToEvents(), this.sdkReady = new Promise(this._initializeSDKWithGameData.bind(this)), this.sdkReady.then(function(e) {
                            O(this, r), this._sdk_ready = !0
                        }.bind(this)).catch(function(e) {
                            O(this, r), this._sdk_ready = !1
                        }.bind(this)).finally(function() {
                            var e, t = this;
                            O(this, r), null != (e = this._gameData) && null != (e = e.directTokenUse) && e.enabled && this._blockDirectTokenURLEmbedding().blocked || (this._sendLoadedEvent(2), !0 === (null == (e = this._gameData.lp) ? void 0 : e.load) && this._sendLoadedEvent(1), this._sendLoaderDataEvent(), this._checkSplashAndPromoScreens(), this._initBlockingExternals(), this._initUnityHandler(), this._checkFullscreen(), null != (e = this._gameData.evnts) && e.enabled && this._isLoaderGameURL() && (function(e) {
                                var t, r, n = this;
                                window[CO] || ((t = document.createElement("iframe")).src = "https://static.gamedistribution.com/message/index.html", t.style.display = "none", t.name = CO, document.body.appendChild(t), window !== window.top && (r = {
                                    gameId: e.gameId,
                                    target: e.evnts.domain,
                                    token: LO,
                                    event_name: "TokenGenerated",
                                    timestamp: Date.now()
                                }, t.onload = function() {
                                    PO(r)
                                }, setInterval(function() {
                                    O(this, n), r.timestamp = Date.now(), r.event_name = "Heartbeat", PO(r)
                                }.bind(this), 1e3 * e.evnts.heartbeatDuration))), window.addEventListener("message", function(e) {
                                    O(this, n);
                                    try {
                                        var t = function(t) {
                                            for (var e = 1; e < arguments.length; e++) {
                                                var r = null != arguments[e] ? arguments[e] : {};
                                                e % 2 ? RO(Object(r), !0).forEach(function(e) {
                                                    Fu(t, e, r[e])
                                                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : RO(Object(r)).forEach(function(e) {
                                                    Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                                                })
                                            }
                                            return t
                                        }({}, e.data);
                                        t.event_name && (t.token = LO, PO(t))
                                    } catch (e) {
                                        console.error("GD Messager Error", e.message)
                                    }
                                }.bind(this), !1)
                            }(this._gameData), this._gameData.evnts.gameId === this.options.gameId) && setInterval(function() {
                                O(this, t), this._send_gametag_data("heartbeat")
                            }.bind(this), 1e3 * this._gameData.evnts.heartbeatDuration), aI.init(this), this._send_gametag_data("sdk_init"), this._executeMidrollPlus())
                        }.bind(this)), this._registerSGBridge(), this._whichFrame(), this._loadLocus()
                    }

                    function OI() {
                        return (OI = d(I.mark(function e() {
                            var t, r = this;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, PE();
                                    case 2:
                                        if (e.sent) {
                                            e.next = 6;
                                            break
                                        }
                                        return console.log("locus-disabled on proxy level"), e.abrupt("return");
                                    case 6:
                                        t = ["js/null.js?https://pm.azerioncircle.com/p/locus"], console.log("locus loading"), bn(t[0], "locus", {
                                            alternates: t
                                        }).catch(function(e) {
                                            O(this, r), this._sendSDKError(e)
                                        }.bind(this));
                                    case 9:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, this)
                        }))).apply(this, arguments)
                    }

                    function II(e) {
                        return (e = function(t) {
                            var r = this;
                            ! function() {
                                OI.apply(this, arguments)
                            }();
                            var e, n = function(o) {
                                    var i = this;
                                    return O(this, r), new Promise(function(t, e) {
                                        var r = this,
                                            n = (O(this, i), function(e) {
                                                O(this, r), "SDK_GAME_START" === e.name && (MI.off("sdk-event", n), t())
                                            }.bind(this));
                                        MI.on("sdk-event", n), h("showAd", {
                                            adType: o
                                        })
                                    }.bind(this))
                                }.bind(this),
                                o = function() {
                                    return O(this, r), e = e || new DI(t)
                                }.bind(this),
                                i = function(e) {
                                    return O(this, r), n(e)
                                }.bind(this),
                                a = function(e) {
                                    return O(this, r), "gdsdk://preloaded"
                                }.bind(this),
                                s = function(e) {
                                    return O(this, r), o().showDisplayAd(e)
                                }.bind(this),
                                u = function() {
                                    return O(this, r), h("cancelAd")
                                }.bind(this),
                                c = function() {
                                    return O(this, r), h("openConsole")
                                }.bind(this),
                                l = function() {
                                    return O(this, r), h("showBanner")
                                }.bind(this),
                                d = function() {
                                    return O(this, r), h("session")
                                }.bind(this),
                                f = function(e) {
                                    return O(this, r), h("sendGenericEvent", {
                                        options: e
                                    })
                                }.bind(this),
                                p = function() {
                                    O(this, r), console.log("_sendSDKReady")
                                }.bind(this),
                                h = function(n, o) {
                                    var i = this;
                                    return O(this, r), o = o || {}, new Promise(function(t, e) {
                                        O(this, i);
                                        try {
                                            var r = {
                                                type: "gd-sdk",
                                                method: n,
                                                options: o
                                            };
                                            window.parent.postMessage(r, "*"), t()
                                        } catch (e) {
                                            console.log("gd:adp:m:s:error", e), t()
                                        }
                                    }.bind(this))
                                }.bind(this),
                                m = function() {
                                    O(this, r), window.addEventListener("message", function(e) {
                                        var t = e.data,
                                            e = (e.origin, e.source, t.type),
                                            t = t.event;
                                        "gd-sdk-on-event" === e && t && v(t)
                                    }, !1)
                                }.bind(this),
                                g = function() {
                                    O(this, r), m(), h("init")
                                }.bind(this),
                                v = function(e) {
                                    O(this, r);
                                    try {
                                        MI.emit("sdk-event", e), t.onEvent && t.onEvent(e)
                                    } catch (e) {
                                        console.log("DEVELOPER ERROR on forwarder-sdk")
                                    }
                                }.bind(this);
                            return {
                                showBanner: l,
                                showAd: i,
                                preloadAd: a,
                                showDisplayAd: s,
                                cancelAd: u,
                                openConsole: c,
                                getSession: d,
                                onEvent: v,
                                init: g,
                                _sendSDKReady: p,
                                sendGenericEvent: f
                            }
                        }(e)).init(), e
                    }

                    function CI(s) {
                        return function(e) {
                            for (var t, r = NI(e), n = BI(r), o = n.length, i = 0, a = []; i < o;) t = n[i++], $I && !FI(r, t) || GI(a, s ? [t, r[t]] : r[t]);
                            return a
                        }
                    }
                    var LI, MI = new w.exports.EventEmitter,
                        PI = "gd-sdk-frame-handshake-request",
                        jI = "gd-sdk-frame-handshake-response",
                        UI = (LI = d(I.mark(function e() {
                            var t, r, n, o, i;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, ME();
                                    case 2:
                                        return t = e.sent, e.next = 6,
                                            function() {
                                                var i = this;
                                                return new Promise(function(n, e) {
                                                    var t = this,
                                                        r = (O(this, i), {
                                                            type: PI
                                                        }),
                                                        o = !1;
                                                    window.addEventListener("message", function(e) {
                                                        var t = e.data,
                                                            r = e.origin,
                                                            e = e.source,
                                                            t = t.type;
                                                        t === PI ? e.postMessage({
                                                            type: jI
                                                        }, r) : t === jI && (o = !0, n({
                                                            origin: r,
                                                            source: e
                                                        }))
                                                    }), setTimeout(function() {
                                                        O(this, t), o || n()
                                                    }.bind(this), 200), window.parent !== window ? window.parent.postMessage(r, "*") : n()
                                                }.bind(this))
                                            }();
                                    case 6:
                                        if (r = e.sent, sI.SDKExistsOnUpperFrame = !!r, t) {
                                            e.next = 10;
                                            break
                                        }
                                        return e.abrupt("return", !1);
                                    case 10:
                                        return n = FO(), o = n.isMasterGameURL, n.isTokenGameURL, n = o(), e.next = 14, jE();
                                    case 14:
                                        return o = e.sent, i = o ? !n && !!r : !n, e.abrupt("return", i);
                                    case 18:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        })), function() {
                            return LI.apply(this, arguments)
                        }),
                        $I = Kn,
                        NA = r,
                        BI = Pu,
                        NI = Es,
                        FI = NA(Ps.f),
                        GI = NA([].push),
                        zI = (CI(!0), CI(!1));
                    Is({
                        target: "Object",
                        stat: !0
                    }, {
                        values: function(e) {
                            return zI(e)
                        }
                    });

                    function HI(e) {
                        try {
                            var t;
                            e.skipForward || qI.source && (t = {
                                type: "gd-sdk-on-event",
                                event: e
                            }, qI.source.postMessage(t, qI.origin))
                        } catch (e) {
                            console.log("gd-sdk forwardEvent err", e)
                        }
                    }

                    function ZI(e) {
                        t = e.onEvent, e.onEvent = function(e) {
                            HI(e), t.apply(this, arguments)
                        };
                        var t, s, e = new DI(e);
                        return s = e, window.addEventListener("message", function(e) {
                            var n, t = e.data,
                                r = e.origin,
                                e = e.source,
                                o = t.type,
                                i = t.method,
                                a = t.options;
                            "gd-sdk-self" !== o ? "gd-sdk" === o && (qI.source || "init" !== i ? (n = s[i]) && d(I.mark(function e() {
                                var t, r = this;
                                return I.wrap(function(e) {
                                    for (;;) switch (e.prev = e.next) {
                                        case 0:
                                            if (e.prev = 0, function() {
                                                    O(this, r), "showAd" === i && Nu.firstAdapterModeAdsense && "rewarded" !== a.adType && (console.log("promo-test, set first adapter to adssense 3"), a.params = a.params || {}, a.params.adapter = "adsense")
                                                }.bind(this), (t = n.apply(s, Object.values(a))) && t.then) return e.next = 6, t;
                                            e.next = 6;
                                            break;
                                        case 6:
                                            e.next = 11;
                                            break;
                                        case 8:
                                            e.prev = 8, e.t0 = e.catch(0), console.log("gd:adp:m:r onFrameMessage error", e.t0);
                                        case 11:
                                        case "end":
                                            return e.stop()
                                    }
                                }, e, this, [
                                    [0, 8]
                                ])
                            }))() : (qI = {
                                source: (t = {
                                    source: e,
                                    origin: r
                                }).source,
                                origin: t.origin
                            }, WI())) : window.postMessage({
                                type: "gd-sdk",
                                method: i,
                                options: a
                            }, location.origin)
                        }, !1), e
                    }
                    var KI, qI = {},
                        WI = function() {
                            HI({
                                name: "SDK_READY",
                                status: "success",
                                message: "Everything is ready."
                            }), HI({
                                name: "SDK_GAME_START",
                                status: "success",
                                message: "Advertisement(s) are done. Start / resume the game."
                            }), HI({
                                name: "CONTENT_RESUME_REQUESTED",
                                status: "success",
                                message: "Fired when content should be resumed. This usually happens when an ad finishes or collapses."
                            })
                        };
                    VI = d(I.mark(function e(n) {
                        var o;
                        return I.wrap(function(e) {
                            for (;;) switch (e.prev = e.next) {
                                case 0:
                                    e.prev = 0;
                                    var t = n;
                                    try {
                                        var r = Wk(t);
                                        t.gameId || r.send("nogameid", {
                                            message: "".concat(uv.parentURL)
                                        })
                                    } catch (t) {}
                                    return TE(n), e.next = 5, UI();
                                case 5:
                                    return o = e.sent, o = (o ? II : ZI)(n), $E(), e.abrupt("return", o);
                                case 11:
                                    return e.prev = 11, e.t0 = e.catch(0), console.log("gd:adp: sdk adaptor create failed, fallback to default adapter", e.t0), e.abrupt("return", ZI(n));
                                case 15:
                                case "end":
                                    return e.stop()
                            }
                        }, e, null, [
                            [0, 11]
                        ])
                    }));
                    var VI, YI = {
                        create: function(e) {
                            return VI.apply(this, arguments)
                        }
                    };

                    function JI() {
                        return (JI = d(I.mark(function e(t, r) {
                            var n;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.next = 2, FE();
                                    case 2:
                                        e.sent ? (e.t0 = window.gdsdk, e.next = 10) : e.next = 7;
                                        break;
                                    case 7:
                                        return e.next = 9, t3(t);
                                    case 9:
                                        e.t0 = e.sent;
                                    case 10:
                                        return n = e.t0, e.abrupt("return", r(n));
                                    case 12:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        }))).apply(this, arguments)
                    }
                    var XI, QI, e3 = !1;

                    function t3(o) {
                        var i = this;
                        return new Promise(function(t, e) {
                            var r, n = this;
                            if (O(this, i), KI) return t(KI);
                            e3 ? r = setInterval(function() {
                                O(this, n), KI && (e3 = !1, clearInterval(r), t(KI))
                            }.bind(this), 100) : (e3 = !0, YI.create(o).then(function(e) {
                                O(this, n), (KI = e)._sendSDKReady(), e3 = !1, t(KI)
                            }.bind(this)))
                        }.bind(this))
                    }

                    function r3() {
                        return (r3 = d(I.mark(function e(t) {
                            var r, n, o;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return TE(t), e.next = 3, OE();
                                    case 3:
                                        if (n = e.sent, XI) return e.abrupt("return", XI);
                                        e.next = 6;
                                        break;
                                    case 6:
                                        if (null != n && null != (r = n.sdk_wrp) && r.enabled) {
                                            e.next = 9;
                                            break
                                        }
                                        return e.abrupt("return");
                                    case 9:
                                        return o = null == n || null == (r = n.sdk_wrp) ? void 0 : r.wrapper, e.next = 12,
                                            function e(o) {
                                                var i = this;
                                                return new Promise(function(r, t) {
                                                    var n = this,
                                                        e = (O(this, i), ["js/null.js?https://pm.azerioncircle.com/pkg/@bygd/gd-sdk-wrp/dist/default/iife/index.js"]);
                                                    bn(e[0], "gd-sdk-wrp", {
                                                        alternates: e
                                                    }).catch(function(e) {
                                                        O(this, n), this._sendSDKError(e), t(e)
                                                    }.bind(this)).then(d(I.mark(function e() {
                                                        var t;
                                                        return I.wrap(function(e) {
                                                            for (;;) switch (e.prev = e.next) {
                                                                case 0:
                                                                    return t = window.GDSDKWRP.GDSDKWRP, t = new t, e.next = 4, t.init(o);
                                                                case 4:
                                                                    XI = e.sent, r(XI);
                                                                case 6:
                                                                case "end":
                                                                    return e.stop()
                                                            }
                                                        }, e)
                                                    })))
                                                }.bind(this))
                                            }(o);
                                    case 12:
                                        return XI = e.sent, e.abrupt("return", XI);
                                    case 14:
                                    case "end":
                                        return e.stop()
                                }
                            }, e)
                        }))).apply(this, arguments)
                    }

                    function n3() {
                        var e = {};
                        try {
                            "object" === ("undefined" == typeof GD_OPTIONS ? "undefined" : U(GD_OPTIONS)) && GD_OPTIONS ? e = GD_OPTIONS : window.gdApi && "object" === U(window.gdApi.q[0][0]) && window.gdApi.q[0][0] && ((e = window.gdApi.q[0][0]).hasOwnProperty("advertisementSettings") || (e.advertisementSettings = {
                                autoplay: !0
                            }))
                        } catch (e) {
                            console.log("_get_developer_sets failed", e)
                        }
                        return e
                    }

                    function o3() {
                        var r, t = this;
                        this.AdType = g, this.preloadAd = function(t) {
                            var r = this;
                            return QI.invoke(function(e) {
                                return O(this, r), e.preloadAd(t)
                            }.bind(this))
                        }, this.showAd = (r = d(I.mark(function e(n, o) {
                            var i = this;
                            return I.wrap(function(e) {
                                for (;;) switch (e.prev = e.next) {
                                    case 0:
                                        return e.abrupt("return", QI.invoke(function(e) {
                                            var t, r = this;
                                            return O(this, i), n === g.Display ? e.showDisplayAd(o) : (t = {}, function() {
                                                O(this, r), Nu.firstAdapterModeAdsense && (console.log("promo-test, set first adapter to adssense 2"), t.adapter = "adsense")
                                            }.bind(this), e.showAd(n, t))
                                        }.bind(this)));
                                    case 1:
                                    case "end":
                                        return e.stop()
                                }
                            }, e, this)
                        })), function(e, t) {
                            return r.apply(this, arguments)
                        }), this.cancelAd = function() {
                            var t = this;
                            return QI.invoke(function(e) {
                                return O(this, t), e.cancelAd()
                            }.bind(this))
                        }, this.openConsole = function() {
                            var t = this;
                            return QI.invoke(function(e) {
                                return O(this, t), e.openConsole()
                            }.bind(this))
                        }, this.getSession = function() {
                            var t = this;
                            return QI.invoke(function(e) {
                                return O(this, t), e.session()
                            }.bind(this))
                        }, this.sendEvent = function(t) {
                            var r = this;
                            return QI.invoke(function(e) {
                                return O(this, r), e.sendGenericEvent(t)
                            }.bind(this))
                        }, this.leaderboard = {
                            show: function() {
                                O(this, t), hg.showLeaderboard()
                            }.bind(this),
                            addScore: function(e) {
                                O(this, t), hg.addScore(e)
                            }.bind(this)
                        }
                    }
                    "img.samsunapps.com" !== ce(window.location.href).host && (pT(), QI = function e(t) {
                        return t3(t), {
                            invoke: function(e) {
                                return function() {
                                    return JI.apply(this, arguments)
                                }(t, e)
                            }
                        }
                    }(n3()), o3.prototype = new function() {
                        this.showBanner = function() {
                            var t = this;
                            return QI.invoke(function(e) {
                                return O(this, t), e.showBanner()
                            }.bind(this))
                        }, this.play = function() {}, this.customLog = function() {}
                    }, window.gdsdk = new o3, window.gdApi = window.gdsdk), d(I.mark(function e() {
                        var t;
                        return I.wrap(function(e) {
                            for (;;) switch (e.prev = e.next) {
                                case 0:
                                    return t = n3(), e.next = 3,
                                        function e() {
                                            return r3.apply(this, arguments)
                                        }(t);
                                case 3:
                                    (t = e.sent) && (console.log("sdk-init: proceeding with gd-sdk wrapper initialize!..."), window.gdsdk = t, window.gdApi = window.gdsdk);
                                case 5:
                                case "end":
                                    return e.stop()
                            }
                        }, e)
                    }))()
                }()
            }.call(this)
        }.call(this, e("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}, e("buffer").Buffer)
    }, {
        _process: 5,
        buffer: 3
    }],
    2: [function(e, t, r) {
        "use strict";
        r.byteLength = function e(t) {
            var t = d(t),
                r = t[0],
                t = t[1];
            return 3 * (r + t) / 4 - t
        }, r.toByteArray = function e(t) {
            var r, n, o = d(t),
                i = o[0],
                o = o[1],
                a = new l(function e(t, r, n) {
                    return 3 * (r + n) / 4 - n
                }(0, i, o)),
                s = 0,
                u = 0 < o ? i - 4 : i;
            for (n = 0; n < u; n += 4) r = c[t.charCodeAt(n)] << 18 | c[t.charCodeAt(n + 1)] << 12 | c[t.charCodeAt(n + 2)] << 6 | c[t.charCodeAt(n + 3)], a[s++] = r >> 16 & 255, a[s++] = r >> 8 & 255, a[s++] = 255 & r;
            2 === o && (r = c[t.charCodeAt(n)] << 2 | c[t.charCodeAt(n + 1)] >> 4, a[s++] = 255 & r);
            1 === o && (r = c[t.charCodeAt(n)] << 10 | c[t.charCodeAt(n + 1)] << 4 | c[t.charCodeAt(n + 2)] >> 2, a[s++] = r >> 8 & 255, a[s++] = 255 & r);
            return a
        }, r.fromByteArray = function e(t) {
            for (var r, n = t.length, o = n % 3, i = [], a = 0, s = n - o; a < s; a += 16383) i.push(function e(t, r, n) {
                for (var o, i = [], a = r; a < n; a += 3) o = (t[a] << 16 & 16711680) + (t[a + 1] << 8 & 65280) + (255 & t[a + 2]), i.push(function e(t) {
                    return u[t >> 18 & 63] + u[t >> 12 & 63] + u[t >> 6 & 63] + u[63 & t]
                }(o));
                return i.join("")
            }(t, a, s < a + 16383 ? s : a + 16383));
            1 == o ? (r = t[n - 1], i.push(u[r >> 2] + u[r << 4 & 63] + "==")) : 2 == o && (r = (t[n - 2] << 8) + t[n - 1], i.push(u[r >> 10] + u[r >> 4 & 63] + u[r << 2 & 63] + "="));
            return i.join("")
        };
        for (var u = [], c = [], l = "undefined" != typeof Uint8Array ? Uint8Array : Array, n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", o = 0, i = n.length; o < i; ++o) u[o] = n[o], c[n.charCodeAt(o)] = o;

        function d(e) {
            var t = e.length;
            if (0 < t % 4) throw new Error("Invalid string. Length must be a multiple of 4");
            e = e.indexOf("="), t = (e = -1 === e ? t : e) === t ? 0 : 4 - e % 4;
            return [e, t]
        }
        c["-".charCodeAt(0)] = 62, c["_".charCodeAt(0)] = 63
    }, {}],
    3: [function(I, e, C) {
        ! function(e) {
            ! function() {
                "use strict";
                var o = I("base64-js"),
                    i = I("ieee754"),
                    t = (C.Buffer = f, C.SlowBuffer = function e(t) {
                        +t != t && (t = 0);
                        return f.alloc(+t)
                    }, C.INSPECT_MAX_BYTES = 50, 2147483647);

                function a(e) {
                    if (t < e) throw new RangeError('The value "' + e + '" is invalid for option "size"');
                    e = new Uint8Array(e);
                    return e.__proto__ = f.prototype, e
                }

                function f(e, t, r) {
                    if ("number" != typeof e) return n(e, t, r);
                    if ("string" == typeof t) throw new TypeError('The "string" argument must be of type string. Received type number');
                    return u(e)
                }

                function n(e, t, r) {
                    if ("string" == typeof e) return function e(t, r) {
                        "string" == typeof r && "" !== r || (r = "utf8");
                        if (!f.isEncoding(r)) throw new TypeError("Unknown encoding: " + r);
                        var n = 0 | d(t, r),
                            o = a(n),
                            t = o.write(t, r);
                        t !== n && (o = o.slice(0, t));
                        return o
                    }(e, t);
                    if (ArrayBuffer.isView(e)) return c(e);
                    if (null == e) throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof e);
                    if (T(e, ArrayBuffer) || e && T(e.buffer, ArrayBuffer)) return function e(t, r, n) {
                        if (r < 0 || t.byteLength < r) throw new RangeError('"offset" is outside of buffer bounds');
                        if (t.byteLength < r + (n || 0)) throw new RangeError('"length" is outside of buffer bounds');
                        t = void 0 === r && void 0 === n ? new Uint8Array(t) : void 0 === n ? new Uint8Array(t, r) : new Uint8Array(t, r, n);
                        return t.__proto__ = f.prototype, t
                    }(e, t, r);
                    if ("number" == typeof e) throw new TypeError('The "value" argument must not be of type number. Received type number');
                    var n = e.valueOf && e.valueOf();
                    if (null != n && n !== e) return f.from(n, t, r);
                    n = function e(t) {
                        {
                            var r, n;
                            if (f.isBuffer(t)) return r = 0 | l(t.length), 0 !== (n = a(r)).length && t.copy(n, 0, 0, r), n
                        }
                        if (void 0 !== t.length) return "number" != typeof t.length || O(t.length) ? a(0) : c(t);
                        if ("Buffer" === t.type && Array.isArray(t.data)) return c(t.data)
                    }(e);
                    if (n) return n;
                    if ("undefined" != typeof Symbol && null != Symbol.toPrimitive && "function" == typeof e[Symbol.toPrimitive]) return f.from(e[Symbol.toPrimitive]("string"), t, r);
                    throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof e)
                }

                function s(e) {
                    if ("number" != typeof e) throw new TypeError('"size" argument must be of type number');
                    if (e < 0) throw new RangeError('The value "' + e + '" is invalid for option "size"')
                }

                function u(e) {
                    return s(e), a(e < 0 ? 0 : 0 | l(e))
                }

                function c(e) {
                    for (var t = e.length < 0 ? 0 : 0 | l(e.length), r = a(t), n = 0; n < t; n += 1) r[n] = 255 & e[n];
                    return r
                }

                function l(e) {
                    if (t <= e) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + t.toString(16) + " bytes");
                    return 0 | e
                }

                function d(e, t) {
                    if (f.isBuffer(e)) return e.length;
                    if (ArrayBuffer.isView(e) || T(e, ArrayBuffer)) return e.byteLength;
                    if ("string" != typeof e) throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof e);
                    var r = e.length,
                        n = 2 < arguments.length && !0 === arguments[2];
                    if (!n && 0 === r) return 0;
                    for (var o = !1;;) switch (t) {
                        case "ascii":
                        case "latin1":
                        case "binary":
                            return r;
                        case "utf8":
                        case "utf-8":
                            return S(e).length;
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return 2 * r;
                        case "hex":
                            return r >>> 1;
                        case "base64":
                            return R(e).length;
                        default:
                            if (o) return n ? -1 : S(e).length;
                            t = ("" + t).toLowerCase(), o = !0
                    }
                }

                function r(e, t, r) {
                    var n = !1;
                    if ((t = void 0 === t || t < 0 ? 0 : t) > this.length) return "";
                    if ((r = void 0 === r || r > this.length ? this.length : r) <= 0) return "";
                    if ((r >>>= 0) <= (t >>>= 0)) return "";
                    for (e = e || "utf8";;) switch (e) {
                        case "hex":
                            return function e(t, r, n) {
                                var o = t.length;
                                (!r || r < 0) && (r = 0);
                                (!n || n < 0 || o < n) && (n = o);
                                for (var i = "", a = r; a < n; ++a) i += function e(t) {
                                    return t < 16 ? "0" + t.toString(16) : t.toString(16)
                                }(t[a]);
                                return i
                            }(this, t, r);
                        case "utf8":
                        case "utf-8":
                            return b(this, t, r);
                        case "ascii":
                            return function e(t, r, n) {
                                var o = "";
                                n = Math.min(t.length, n);
                                for (var i = r; i < n; ++i) o += String.fromCharCode(127 & t[i]);
                                return o
                            }(this, t, r);
                        case "latin1":
                        case "binary":
                            return function e(t, r, n) {
                                var o = "";
                                n = Math.min(t.length, n);
                                for (var i = r; i < n; ++i) o += String.fromCharCode(t[i]);
                                return o
                            }(this, t, r);
                        case "base64":
                            return function e(t, r, n) {
                                return 0 === r && n === t.length ? o.fromByteArray(t) : o.fromByteArray(t.slice(r, n))
                            }(this, t, r);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return function e(t, r, n) {
                                for (var o = t.slice(r, n), i = "", a = 0; a < o.length; a += 2) i += String.fromCharCode(o[a] + 256 * o[a + 1]);
                                return i
                            }(this, t, r);
                        default:
                            if (n) throw new TypeError("Unknown encoding: " + e);
                            e = (e + "").toLowerCase(), n = !0
                    }
                }

                function p(e, t, r) {
                    var n = e[t];
                    e[t] = e[r], e[r] = n
                }

                function h(e, t, r, n, o) {
                    if (0 === e.length) return -1;
                    if ("string" == typeof r ? (n = r, r = 0) : 2147483647 < r ? r = 2147483647 : r < -2147483648 && (r = -2147483648), (r = (r = O(r = +r) ? o ? 0 : e.length - 1 : r) < 0 ? e.length + r : r) >= e.length) {
                        if (o) return -1;
                        r = e.length - 1
                    } else if (r < 0) {
                        if (!o) return -1;
                        r = 0
                    }
                    if ("string" == typeof t && (t = f.from(t, n)), f.isBuffer(t)) return 0 === t.length ? -1 : m(e, t, r, n, o);
                    if ("number" == typeof t) return t &= 255, "function" == typeof Uint8Array.prototype.indexOf ? (o ? Uint8Array.prototype.indexOf : Uint8Array.prototype.lastIndexOf).call(e, t, r) : m(e, [t], r, n, o);
                    throw new TypeError("val must be string, number or Buffer")
                }

                function m(e, t, r, n, o) {
                    var i = 1,
                        a = e.length,
                        s = t.length;
                    if (void 0 !== n && ("ucs2" === (n = String(n).toLowerCase()) || "ucs-2" === n || "utf16le" === n || "utf-16le" === n)) {
                        if (e.length < 2 || t.length < 2) return -1;
                        a /= i = 2, s /= 2, r /= 2
                    }

                    function u(e, t) {
                        return 1 === i ? e[t] : e.readUInt16BE(t * i)
                    }
                    if (o)
                        for (var c = -1, l = r; l < a; l++)
                            if (u(e, l) === u(t, -1 === c ? 0 : l - c)) {
                                if (l - (c = -1 === c ? l : c) + 1 === s) return c * i
                            } else -1 !== c && (l -= l - c), c = -1;
                    else
                        for (l = r = a < r + s ? a - s : r; 0 <= l; l--) {
                            for (var d = !0, f = 0; f < s; f++)
                                if (u(e, l + f) !== u(t, f)) {
                                    d = !1;
                                    break
                                }
                            if (d) return l
                        }
                    return -1
                }

                function g(e, t, r, n) {
                    return D(function e(t) {
                        for (var r = [], n = 0; n < t.length; ++n) r.push(255 & t.charCodeAt(n));
                        return r
                    }(t), e, r, n)
                }

                function v(e, t, r, n) {
                    return D(function e(t, r) {
                        for (var n, o, i = [], a = 0; a < t.length && !((r -= 2) < 0); ++a) n = t.charCodeAt(a), o = n >> 8, i.push(n % 256), i.push(o);
                        return i
                    }(t, e.length - r), e, r, n)
                }

                function b(e, t, r) {
                    r = Math.min(e.length, r);
                    for (var n = [], o = t; o < r;) {
                        var i, a, s, u, c = e[o],
                            l = null,
                            d = 239 < c ? 4 : 223 < c ? 3 : 191 < c ? 2 : 1;
                        if (o + d <= r) switch (d) {
                            case 1:
                                c < 128 && (l = c);
                                break;
                            case 2:
                                128 == (192 & (i = e[o + 1])) && 127 < (u = (31 & c) << 6 | 63 & i) && (l = u);
                                break;
                            case 3:
                                i = e[o + 1], a = e[o + 2], 128 == (192 & i) && 128 == (192 & a) && 2047 < (u = (15 & c) << 12 | (63 & i) << 6 | 63 & a) && (u < 55296 || 57343 < u) && (l = u);
                                break;
                            case 4:
                                i = e[o + 1], a = e[o + 2], s = e[o + 3], 128 == (192 & i) && 128 == (192 & a) && 128 == (192 & s) && 65535 < (u = (15 & c) << 18 | (63 & i) << 12 | (63 & a) << 6 | 63 & s) && u < 1114112 && (l = u)
                        }
                        null === l ? (l = 65533, d = 1) : 65535 < l && (n.push((l -= 65536) >>> 10 & 1023 | 55296), l = 56320 | 1023 & l), n.push(l), o += d
                    }
                    return function e(t) {
                        var r = t.length;
                        if (r <= y) return String.fromCharCode.apply(String, t);
                        var n = "",
                            o = 0;
                        for (; o < r;) n += String.fromCharCode.apply(String, t.slice(o, o += y));
                        return n
                    }(n)
                }
                C.kMaxLength = t, (f.TYPED_ARRAY_SUPPORT = function e() {
                    try {
                        var t = new Uint8Array(1);
                        return t.__proto__ = {
                            __proto__: Uint8Array.prototype,
                            foo: function() {
                                return 42
                            }
                        }, 42 === t.foo()
                    } catch (e) {
                        return !1
                    }
                }()) || "undefined" == typeof console || "function" != typeof console.error || console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."), Object.defineProperty(f.prototype, "parent", {
                    enumerable: !0,
                    get: function() {
                        if (f.isBuffer(this)) return this.buffer
                    }
                }), Object.defineProperty(f.prototype, "offset", {
                    enumerable: !0,
                    get: function() {
                        if (f.isBuffer(this)) return this.byteOffset
                    }
                }), "undefined" != typeof Symbol && null != Symbol.species && f[Symbol.species] === f && Object.defineProperty(f, Symbol.species, {
                    value: null,
                    configurable: !0,
                    enumerable: !1,
                    writable: !1
                }), f.poolSize = 8192, f.from = n, f.prototype.__proto__ = Uint8Array.prototype, f.__proto__ = Uint8Array, f.alloc = function e(t, r, n) {
                    return s(t), !(t <= 0) && void 0 !== r ? "string" == typeof n ? a(t).fill(r, n) : a(t).fill(r) : a(t)
                }, f.allocUnsafe = u, f.allocUnsafeSlow = u, f.isBuffer = function e(t) {
                    return null != t && !0 === t._isBuffer && t !== f.prototype
                }, f.compare = function e(t, r) {
                    if (T(t, Uint8Array) && (t = f.from(t, t.offset, t.byteLength)), T(r, Uint8Array) && (r = f.from(r, r.offset, r.byteLength)), !f.isBuffer(t) || !f.isBuffer(r)) throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
                    if (t === r) return 0;
                    for (var n = t.length, o = r.length, i = 0, a = Math.min(n, o); i < a; ++i)
                        if (t[i] !== r[i]) {
                            n = t[i], o = r[i];
                            break
                        }
                    return n < o ? -1 : o < n ? 1 : 0
                }, f.isEncoding = function e(t) {
                    switch (String(t).toLowerCase()) {
                        case "hex":
                        case "utf8":
                        case "utf-8":
                        case "ascii":
                        case "latin1":
                        case "binary":
                        case "base64":
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return !0;
                        default:
                            return !1
                    }
                }, f.concat = function e(t, r) {
                    if (!Array.isArray(t)) throw new TypeError('"list" argument must be an Array of Buffers');
                    if (0 === t.length) return f.alloc(0);
                    if (void 0 === r)
                        for (i = r = 0; i < t.length; ++i) r += t[i].length;
                    for (var n = f.allocUnsafe(r), o = 0, i = 0; i < t.length; ++i) {
                        var a = t[i];
                        if (T(a, Uint8Array) && (a = f.from(a)), !f.isBuffer(a)) throw new TypeError('"list" argument must be an Array of Buffers');
                        a.copy(n, o), o += a.length
                    }
                    return n
                }, f.byteLength = d, f.prototype._isBuffer = !0, f.prototype.swap16 = function e() {
                    var t = this.length;
                    if (t % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
                    for (var r = 0; r < t; r += 2) p(this, r, r + 1);
                    return this
                }, f.prototype.swap32 = function e() {
                    var t = this.length;
                    if (t % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
                    for (var r = 0; r < t; r += 4) p(this, r, r + 3), p(this, r + 1, r + 2);
                    return this
                }, f.prototype.swap64 = function e() {
                    var t = this.length;
                    if (t % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
                    for (var r = 0; r < t; r += 8) p(this, r, r + 7), p(this, r + 1, r + 6), p(this, r + 2, r + 5), p(this, r + 3, r + 4);
                    return this
                }, f.prototype.toLocaleString = f.prototype.toString = function e() {
                    var t = this.length;
                    return 0 === t ? "" : 0 === arguments.length ? b(this, 0, t) : r.apply(this, arguments)
                }, f.prototype.equals = function e(t) {
                    if (f.isBuffer(t)) return this === t || 0 === f.compare(this, t);
                    throw new TypeError("Argument must be a Buffer")
                }, f.prototype.inspect = function e() {
                    var t = "",
                        r = C.INSPECT_MAX_BYTES,
                        t = this.toString("hex", 0, r).replace(/(.{2})/g, "$1 ").trim();
                    return this.length > r && (t += " ... "), "<Buffer " + t + ">"
                }, f.prototype.compare = function e(t, r, n, o, i) {
                    if (T(t, Uint8Array) && (t = f.from(t, t.offset, t.byteLength)), !f.isBuffer(t)) throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof t);
                    if (void 0 === n && (n = t ? t.length : 0), void 0 === o && (o = 0), void 0 === i && (i = this.length), (r = void 0 === r ? 0 : r) < 0 || n > t.length || o < 0 || i > this.length) throw new RangeError("out of range index");
                    if (i <= o && n <= r) return 0;
                    if (i <= o) return -1;
                    if (n <= r) return 1;
                    if (this === t) return 0;
                    for (var a = (i >>>= 0) - (o >>>= 0), s = (n >>>= 0) - (r >>>= 0), u = Math.min(a, s), c = this.slice(o, i), l = t.slice(r, n), d = 0; d < u; ++d)
                        if (c[d] !== l[d]) {
                            a = c[d], s = l[d];
                            break
                        }
                    return a < s ? -1 : s < a ? 1 : 0
                }, f.prototype.includes = function e(t, r, n) {
                    return -1 !== this.indexOf(t, r, n)
                }, f.prototype.indexOf = function e(t, r, n) {
                    return h(this, t, r, n, !0)
                }, f.prototype.lastIndexOf = function e(t, r, n) {
                    return h(this, t, r, n, !1)
                }, f.prototype.write = function e(t, r, n, o) {
                    if (void 0 === r) o = "utf8", n = this.length, r = 0;
                    else if (void 0 === n && "string" == typeof r) o = r, n = this.length, r = 0;
                    else {
                        if (!isFinite(r)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                        r >>>= 0, isFinite(n) ? (n >>>= 0, void 0 === o && (o = "utf8")) : (o = n, n = void 0)
                    }
                    var i = this.length - r;
                    if ((void 0 === n || i < n) && (n = i), 0 < t.length && (n < 0 || r < 0) || r > this.length) throw new RangeError("Attempt to write outside buffer bounds");
                    o = o || "utf8";
                    for (var a = !1;;) switch (o) {
                        case "hex":
                            return function e(t, r, n, o) {
                                n = Number(n) || 0;
                                var i = t.length - n;
                                (!o || i < (o = Number(o))) && (o = i), (i = r.length) / 2 < o && (o = i / 2);
                                for (var a = 0; a < o; ++a) {
                                    var s = parseInt(r.substr(2 * a, 2), 16);
                                    if (O(s)) return a;
                                    t[n + a] = s
                                }
                                return a
                            }(this, t, r, n);
                        case "utf8":
                        case "utf-8":
                            return function e(t, r, n, o) {
                                return D(S(r, t.length - n), t, n, o)
                            }(this, t, r, n);
                        case "ascii":
                            return g(this, t, r, n);
                        case "latin1":
                        case "binary":
                            return g(this, t, r, n);
                        case "base64":
                            return function e(t, r, n, o) {
                                return D(R(r), t, n, o)
                            }(this, t, r, n);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return v(this, t, r, n);
                        default:
                            if (a) throw new TypeError("Unknown encoding: " + o);
                            o = ("" + o).toLowerCase(), a = !0
                    }
                }, f.prototype.toJSON = function e() {
                    return {
                        type: "Buffer",
                        data: Array.prototype.slice.call(this._arr || this, 0)
                    }
                };
                var y = 4096;

                function _(e, t, r) {
                    if (e % 1 != 0 || e < 0) throw new RangeError("offset is not uint");
                    if (r < e + t) throw new RangeError("Trying to access beyond buffer length")
                }

                function w(e, t, r, n, o, i) {
                    if (!f.isBuffer(e)) throw new TypeError('"buffer" argument must be a Buffer instance');
                    if (o < t || t < i) throw new RangeError('"value" argument is out of bounds');
                    if (r + n > e.length) throw new RangeError("Index out of range")
                }

                function A(e, t, r, n) {
                    if (r + n > e.length) throw new RangeError("Index out of range");
                    if (r < 0) throw new RangeError("Index out of range")
                }

                function x(e, t, r, n, o) {
                    return t = +t, r >>>= 0, o || A(e, 0, r, 4), i.write(e, t, r, n, 23, 4), r + 4
                }

                function k(e, t, r, n, o) {
                    return t = +t, r >>>= 0, o || A(e, 0, r, 8), i.write(e, t, r, n, 52, 8), r + 8
                }
                f.prototype.slice = function e(t, r) {
                    var n = this.length,
                        n = ((t = ~~t) < 0 ? (t += n) < 0 && (t = 0) : n < t && (t = n), (r = void 0 === r ? n : ~~r) < 0 ? (r += n) < 0 && (r = 0) : n < r && (r = n), r < t && (r = t), this.subarray(t, r));
                    return n.__proto__ = f.prototype, n
                }, f.prototype.readUIntLE = function e(t, r, n) {
                    t >>>= 0, r >>>= 0, n || _(t, r, this.length);
                    for (var o = this[t], i = 1, a = 0; ++a < r && (i *= 256);) o += this[t + a] * i;
                    return o
                }, f.prototype.readUIntBE = function e(t, r, n) {
                    t >>>= 0, r >>>= 0, n || _(t, r, this.length);
                    for (var o = this[t + --r], i = 1; 0 < r && (i *= 256);) o += this[t + --r] * i;
                    return o
                }, f.prototype.readUInt8 = function e(t, r) {
                    return t >>>= 0, r || _(t, 1, this.length), this[t]
                }, f.prototype.readUInt16LE = function e(t, r) {
                    return t >>>= 0, r || _(t, 2, this.length), this[t] | this[t + 1] << 8
                }, f.prototype.readUInt16BE = function e(t, r) {
                    return t >>>= 0, r || _(t, 2, this.length), this[t] << 8 | this[t + 1]
                }, f.prototype.readUInt32LE = function e(t, r) {
                    return t >>>= 0, r || _(t, 4, this.length), (this[t] | this[t + 1] << 8 | this[t + 2] << 16) + 16777216 * this[t + 3]
                }, f.prototype.readUInt32BE = function e(t, r) {
                    return t >>>= 0, r || _(t, 4, this.length), 16777216 * this[t] + (this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3])
                }, f.prototype.readIntLE = function e(t, r, n) {
                    t >>>= 0, r >>>= 0, n || _(t, r, this.length);
                    for (var o = this[t], i = 1, a = 0; ++a < r && (i *= 256);) o += this[t + a] * i;
                    return (i *= 128) <= o && (o -= Math.pow(2, 8 * r)), o
                }, f.prototype.readIntBE = function e(t, r, n) {
                    t >>>= 0, r >>>= 0, n || _(t, r, this.length);
                    for (var o = r, i = 1, a = this[t + --o]; 0 < o && (i *= 256);) a += this[t + --o] * i;
                    return (i *= 128) <= a && (a -= Math.pow(2, 8 * r)), a
                }, f.prototype.readInt8 = function e(t, r) {
                    return t >>>= 0, r || _(t, 1, this.length), 128 & this[t] ? -1 * (255 - this[t] + 1) : this[t]
                }, f.prototype.readInt16LE = function e(t, r) {
                    t >>>= 0, r || _(t, 2, this.length);
                    r = this[t] | this[t + 1] << 8;
                    return 32768 & r ? 4294901760 | r : r
                }, f.prototype.readInt16BE = function e(t, r) {
                    t >>>= 0, r || _(t, 2, this.length);
                    r = this[t + 1] | this[t] << 8;
                    return 32768 & r ? 4294901760 | r : r
                }, f.prototype.readInt32LE = function e(t, r) {
                    return t >>>= 0, r || _(t, 4, this.length), this[t] | this[t + 1] << 8 | this[t + 2] << 16 | this[t + 3] << 24
                }, f.prototype.readInt32BE = function e(t, r) {
                    return t >>>= 0, r || _(t, 4, this.length), this[t] << 24 | this[t + 1] << 16 | this[t + 2] << 8 | this[t + 3]
                }, f.prototype.readFloatLE = function e(t, r) {
                    return t >>>= 0, r || _(t, 4, this.length), i.read(this, t, !0, 23, 4)
                }, f.prototype.readFloatBE = function e(t, r) {
                    return t >>>= 0, r || _(t, 4, this.length), i.read(this, t, !1, 23, 4)
                }, f.prototype.readDoubleLE = function e(t, r) {
                    return t >>>= 0, r || _(t, 8, this.length), i.read(this, t, !0, 52, 8)
                }, f.prototype.readDoubleBE = function e(t, r) {
                    return t >>>= 0, r || _(t, 8, this.length), i.read(this, t, !1, 52, 8)
                }, f.prototype.writeUIntLE = function e(t, r, n, o) {
                    t = +t, r >>>= 0, n >>>= 0, o || w(this, t, r, n, Math.pow(2, 8 * n) - 1, 0);
                    var i = 1,
                        a = 0;
                    for (this[r] = 255 & t; ++a < n && (i *= 256);) this[r + a] = t / i & 255;
                    return r + n
                }, f.prototype.writeUIntBE = function e(t, r, n, o) {
                    t = +t, r >>>= 0, n >>>= 0, o || w(this, t, r, n, Math.pow(2, 8 * n) - 1, 0);
                    var i = n - 1,
                        a = 1;
                    for (this[r + i] = 255 & t; 0 <= --i && (a *= 256);) this[r + i] = t / a & 255;
                    return r + n
                }, f.prototype.writeUInt8 = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 1, 255, 0), this[r] = 255 & t, r + 1
                }, f.prototype.writeUInt16LE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 2, 65535, 0), this[r] = 255 & t, this[r + 1] = t >>> 8, r + 2
                }, f.prototype.writeUInt16BE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 2, 65535, 0), this[r] = t >>> 8, this[r + 1] = 255 & t, r + 2
                }, f.prototype.writeUInt32LE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 4, 4294967295, 0), this[r + 3] = t >>> 24, this[r + 2] = t >>> 16, this[r + 1] = t >>> 8, this[r] = 255 & t, r + 4
                }, f.prototype.writeUInt32BE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 4, 4294967295, 0), this[r] = t >>> 24, this[r + 1] = t >>> 16, this[r + 2] = t >>> 8, this[r + 3] = 255 & t, r + 4
                }, f.prototype.writeIntLE = function e(t, r, n, o) {
                    t = +t, r >>>= 0, o || w(this, t, r, n, (o = Math.pow(2, 8 * n - 1)) - 1, -o);
                    var i = 0,
                        a = 1,
                        s = 0;
                    for (this[r] = 255 & t; ++i < n && (a *= 256);) t < 0 && 0 === s && 0 !== this[r + i - 1] && (s = 1), this[r + i] = (t / a >> 0) - s & 255;
                    return r + n
                }, f.prototype.writeIntBE = function e(t, r, n, o) {
                    t = +t, r >>>= 0, o || w(this, t, r, n, (o = Math.pow(2, 8 * n - 1)) - 1, -o);
                    var i = n - 1,
                        a = 1,
                        s = 0;
                    for (this[r + i] = 255 & t; 0 <= --i && (a *= 256);) t < 0 && 0 === s && 0 !== this[r + i + 1] && (s = 1), this[r + i] = (t / a >> 0) - s & 255;
                    return r + n
                }, f.prototype.writeInt8 = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 1, 127, -128), this[r] = 255 & (t = t < 0 ? 255 + t + 1 : t), r + 1
                }, f.prototype.writeInt16LE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 2, 32767, -32768), this[r] = 255 & t, this[r + 1] = t >>> 8, r + 2
                }, f.prototype.writeInt16BE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 2, 32767, -32768), this[r] = t >>> 8, this[r + 1] = 255 & t, r + 2
                }, f.prototype.writeInt32LE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 4, 2147483647, -2147483648), this[r] = 255 & t, this[r + 1] = t >>> 8, this[r + 2] = t >>> 16, this[r + 3] = t >>> 24, r + 4
                }, f.prototype.writeInt32BE = function e(t, r, n) {
                    return t = +t, r >>>= 0, n || w(this, t, r, 4, 2147483647, -2147483648), this[r] = (t = t < 0 ? 4294967295 + t + 1 : t) >>> 24, this[r + 1] = t >>> 16, this[r + 2] = t >>> 8, this[r + 3] = 255 & t, r + 4
                }, f.prototype.writeFloatLE = function e(t, r, n) {
                    return x(this, t, r, !0, n)
                }, f.prototype.writeFloatBE = function e(t, r, n) {
                    return x(this, t, r, !1, n)
                }, f.prototype.writeDoubleLE = function e(t, r, n) {
                    return k(this, t, r, !0, n)
                }, f.prototype.writeDoubleBE = function e(t, r, n) {
                    return k(this, t, r, !1, n)
                }, f.prototype.copy = function e(t, r, n, o) {
                    if (!f.isBuffer(t)) throw new TypeError("argument should be a Buffer");
                    if (n = n || 0, o || 0 === o || (o = this.length), r >= t.length && (r = t.length), (o = 0 < o && o < n ? n : o) === n) return 0;
                    if (0 === t.length || 0 === this.length) return 0;
                    if ((r = r || 0) < 0) throw new RangeError("targetStart out of bounds");
                    if (n < 0 || n >= this.length) throw new RangeError("Index out of range");
                    if (o < 0) throw new RangeError("sourceEnd out of bounds");
                    o > this.length && (o = this.length);
                    var i = (o = t.length - r < o - n ? t.length - r + n : o) - n;
                    if (this === t && "function" == typeof Uint8Array.prototype.copyWithin) this.copyWithin(r, n, o);
                    else if (this === t && n < r && r < o)
                        for (var a = i - 1; 0 <= a; --a) t[a + r] = this[a + n];
                    else Uint8Array.prototype.set.call(t, this.subarray(n, o), r);
                    return i
                }, f.prototype.fill = function e(t, r, n, o) {
                    if ("string" == typeof t) {
                        if ("string" == typeof r ? (o = r, r = 0, n = this.length) : "string" == typeof n && (o = n, n = this.length), void 0 !== o && "string" != typeof o) throw new TypeError("encoding must be a string");
                        if ("string" == typeof o && !f.isEncoding(o)) throw new TypeError("Unknown encoding: " + o);
                        var i;
                        1 === t.length && (i = t.charCodeAt(0), "utf8" === o && i < 128 || "latin1" === o) && (t = i)
                    } else "number" == typeof t && (t &= 255);
                    if (r < 0 || this.length < r || this.length < n) throw new RangeError("Out of range index");
                    var a;
                    if (!(n <= r))
                        if (r >>>= 0, n = void 0 === n ? this.length : n >>> 0, "number" == typeof(t = t || 0))
                            for (a = r; a < n; ++a) this[a] = t;
                        else {
                            var s = f.isBuffer(t) ? t : f.from(t, o),
                                u = s.length;
                            if (0 === u) throw new TypeError('The value "' + t + '" is invalid for argument "value"');
                            for (a = 0; a < n - r; ++a) this[a + r] = s[a % u]
                        }
                    return this
                };
                var E = /[^+/0-9A-Za-z-_]/g;

                function S(e, t) {
                    t = t || 1 / 0;
                    for (var r, n = e.length, o = null, i = [], a = 0; a < n; ++a) {
                        if (55295 < (r = e.charCodeAt(a)) && r < 57344) {
                            if (!o) {
                                if (56319 < r) {
                                    -1 < (t -= 3) && i.push(239, 191, 189);
                                    continue
                                }
                                if (a + 1 === n) {
                                    -1 < (t -= 3) && i.push(239, 191, 189);
                                    continue
                                }
                                o = r;
                                continue
                            }
                            if (r < 56320) {
                                -1 < (t -= 3) && i.push(239, 191, 189), o = r;
                                continue
                            }
                            r = 65536 + (o - 55296 << 10 | r - 56320)
                        } else o && -1 < (t -= 3) && i.push(239, 191, 189);
                        if (o = null, r < 128) {
                            if (--t < 0) break;
                            i.push(r)
                        } else if (r < 2048) {
                            if ((t -= 2) < 0) break;
                            i.push(r >> 6 | 192, 63 & r | 128)
                        } else if (r < 65536) {
                            if ((t -= 3) < 0) break;
                            i.push(r >> 12 | 224, r >> 6 & 63 | 128, 63 & r | 128)
                        } else {
                            if (!(r < 1114112)) throw new Error("Invalid code point");
                            if ((t -= 4) < 0) break;
                            i.push(r >> 18 | 240, r >> 12 & 63 | 128, r >> 6 & 63 | 128, 63 & r | 128)
                        }
                    }
                    return i
                }

                function R(e) {
                    return o.toByteArray(function e(t) {
                        if ((t = (t = t.split("=")[0]).trim().replace(E, "")).length < 2) return "";
                        for (; t.length % 4 != 0;) t += "=";
                        return t
                    }(e))
                }

                function D(e, t, r, n) {
                    for (var o = 0; o < n && !(o + r >= t.length || o >= e.length); ++o) t[o + r] = e[o];
                    return o
                }

                function T(e, t) {
                    return e instanceof t || null != e && null != e.constructor && null != e.constructor.name && e.constructor.name === t.name
                }

                function O(e) {
                    return e != e
                }
            }.call(this)
        }.call(this, I("buffer").Buffer)
    }, {
        "base64-js": 2,
        buffer: 3,
        ieee754: 4
    }],
    4: [function(e, t, r) {
        r.read = function(e, t, r, n, o) {
            var i, a, s = 8 * o - n - 1,
                u = (1 << s) - 1,
                c = u >> 1,
                l = -7,
                d = r ? o - 1 : 0,
                f = r ? -1 : 1,
                o = e[t + d];
            for (d += f, i = o & (1 << -l) - 1, o >>= -l, l += s; 0 < l; i = 256 * i + e[t + d], d += f, l -= 8);
            for (a = i & (1 << -l) - 1, i >>= -l, l += n; 0 < l; a = 256 * a + e[t + d], d += f, l -= 8);
            if (0 === i) i = 1 - c;
            else {
                if (i === u) return a ? NaN : 1 / 0 * (o ? -1 : 1);
                a += Math.pow(2, n), i -= c
            }
            return (o ? -1 : 1) * a * Math.pow(2, i - n)
        }, r.write = function(e, t, r, n, o, i) {
            var a, s, u = 8 * i - o - 1,
                c = (1 << u) - 1,
                l = c >> 1,
                d = 23 === o ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
                f = n ? 0 : i - 1,
                p = n ? 1 : -1,
                i = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0;
            for (t = Math.abs(t), isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0, a = c) : (a = Math.floor(Math.log(t) / Math.LN2), t * (n = Math.pow(2, -a)) < 1 && (a--, n *= 2), 2 <= (t += 1 <= a + l ? d / n : d * Math.pow(2, 1 - l)) * n && (a++, n /= 2), c <= a + l ? (s = 0, a = c) : 1 <= a + l ? (s = (t * n - 1) * Math.pow(2, o), a += l) : (s = t * Math.pow(2, l - 1) * Math.pow(2, o), a = 0)); 8 <= o; e[r + f] = 255 & s, f += p, s /= 256, o -= 8);
            for (a = a << o | s, u += o; 0 < u; e[r + f] = 255 & a, f += p, a /= 256, u -= 8);
            e[r + f - p] |= 128 * i
        }
    }, {}],
    5: [function(e, t, r) {
        var n, o, t = t.exports = {};

        function i() {
            throw new Error("setTimeout has not been defined")
        }

        function a() {
            throw new Error("clearTimeout has not been defined")
        }
        try {
            n = "function" == typeof setTimeout ? setTimeout : i
        } catch (e) {
            n = i
        }
        try {
            o = "function" == typeof clearTimeout ? clearTimeout : a
        } catch (e) {
            o = a
        }

        function s(t) {
            if (n === setTimeout) return setTimeout(t, 0);
            if ((n === i || !n) && setTimeout) return (n = setTimeout)(t, 0);
            try {
                return n(t, 0)
            } catch (e) {
                try {
                    return n.call(null, t, 0)
                } catch (e) {
                    return n.call(this, t, 0)
                }
            }
        }
        var u, c = [],
            l = !1,
            d = -1;

        function f() {
            l && u && (l = !1, u.length ? c = u.concat(c) : d = -1, c.length) && p()
        }

        function p() {
            if (!l) {
                for (var e = s(f), t = (l = !0, c.length); t;) {
                    for (u = c, c = []; ++d < t;) u && u[d].run();
                    d = -1, t = c.length
                }
                u = null, l = !1, ! function e(t) {
                    if (o === clearTimeout) return clearTimeout(t);
                    if ((o === a || !o) && clearTimeout) return (o = clearTimeout)(t);
                    try {
                        o(t)
                    } catch (e) {
                        try {
                            return o.call(null, t)
                        } catch (e) {
                            return o.call(this, t)
                        }
                    }
                }(e)
            }
        }

        function h(e, t) {
            this.fun = e, this.array = t
        }

        function m() {}
        t.nextTick = function(e) {
            var t = new Array(arguments.length - 1);
            if (1 < arguments.length)
                for (var r = 1; r < arguments.length; r++) t[r - 1] = arguments[r];
            c.push(new h(e, t)), 1 !== c.length || l || s(p)
        }, h.prototype.run = function() {
            this.fun.apply(null, this.array)
        }, t.title = "browser", t.browser = !0, t.env = {}, t.argv = [], t.version = "", t.versions = {}, t.on = m, t.addListener = m, t.once = m, t.off = m, t.removeListener = m, t.removeAllListeners = m, t.emit = m, t.prependListener = m, t.prependOnceListener = m, t.listeners = function(e) {
            return []
        }, t.binding = function(e) {
            throw new Error("process.binding is not supported")
        }, t.cwd = function() {
            return "/"
        }, t.chdir = function(e) {
            throw new Error("process.chdir is not supported")
        }, t.umask = function() {
            return 0
        }
    }, {}],
    6: [function(e, t, r) {
        "use strict";
        e("@bygd/gd-sdk-pes/dist/default")
    }, {
        "@bygd/gd-sdk-pes/dist/default": 1
    }]
}, {}, [6]);</script><script async="">
// Copyright 2012 Google Inc. All rights reserved.
 
(function(){

var data = {
"resource": {
  "version":"1",
  
  "macros":[{"function":"__e"},{"function":"__c","vtp_value":""},{"function":"__c","vtp_value":0}],
  "tags":[{"function":"__ogt_1p_data_v2","priority":14,"vtp_isAutoEnabled":true,"vtp_autoCollectExclusionSelectors":["list",["map","exclusionSelector",""]],"vtp_isEnabled":true,"vtp_cityType":"CSS_SELECTOR","vtp_manualEmailEnabled":false,"vtp_firstNameType":"CSS_SELECTOR","vtp_countryType":"CSS_SELECTOR","vtp_cityValue":"","vtp_emailType":"CSS_SELECTOR","vtp_regionType":"CSS_SELECTOR","vtp_autoEmailEnabled":true,"vtp_postalCodeValue":"","vtp_lastNameValue":"","vtp_phoneType":"CSS_SELECTOR","vtp_phoneValue":"","vtp_streetType":"CSS_SELECTOR","vtp_autoPhoneEnabled":false,"vtp_postalCodeType":"CSS_SELECTOR","vtp_emailValue":"","vtp_firstNameValue":"","vtp_streetValue":"","vtp_lastNameType":"CSS_SELECTOR","vtp_autoAddressEnabled":false,"vtp_regionValue":"","vtp_countryValue":"","vtp_isAutoCollectPiiEnabledFlag":false,"tag_id":4},{"function":"__ccd_ga_first","priority":13,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":19},{"function":"__set_product_settings","priority":12,"vtp_instanceDestinationId":"G-E48RQQ760P","vtp_foreignTldMacroResult":["macro",1],"vtp_isChinaVipRegionMacroResult":["macro",2],"tag_id":18},{"function":"__ogt_google_signals","priority":11,"vtp_googleSignals":"ENABLED","vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":17},{"function":"__ccd_ga_regscope","priority":10,"vtp_settingsTable":["list",["map","redactFieldGroup","DEVICE_AND_GEO","disallowAllRegions",false,"disallowedRegions",""],["map","redactFieldGroup","GOOGLE_SIGNALS","disallowAllRegions",false,"disallowedRegions",""]],"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":16},{"function":"__ccd_em_download","priority":9,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":15},{"function":"__ccd_em_form","priority":8,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":14},{"function":"__ccd_em_outbound_click","priority":7,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":13},{"function":"__ccd_em_page_view","priority":6,"vtp_historyEvents":true,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":12},{"function":"__ccd_em_scroll","priority":5,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":11},{"function":"__ccd_em_site_search","priority":4,"vtp_searchQueryParams":"q,s,search,query,keyword","vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":10},{"function":"__ccd_em_video","priority":3,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":9},{"function":"__ccd_conversion_marking","priority":2,"vtp_conversionRules":["list",["map","matchingRules","{\"type\":5,\"args\":[{\"stringValue\":\"purchase\"},{\"contextValue\":{\"namespaceType\":1,\"keyParts\":[\"eventName\"]}}]}"]],"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":8},{"function":"__ccd_auto_redact","priority":1,"vtp_redactEmail":true,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":7},{"function":"__gct","vtp_trackingId":"G-E48RQQ760P","vtp_sessionDuration":0,"tag_id":1},{"function":"__ccd_ga_last","priority":0,"vtp_instanceDestinationId":"G-E48RQQ760P","tag_id":6}],
  "predicates":[{"function":"_eq","arg0":["macro",0],"arg1":"gtm.js"},{"function":"_eq","arg0":["macro",0],"arg1":"gtm.init"}],
  "rules":[[["if",0],["add",14]],[["if",1],["add",0,15,13,12,11,10,9,8,7,6,5,4,3,2,1]]]
},
"runtime":[ [50,"__c",[46,"a"],[36,[17,[15,"a"],"value"]]]
 ,[50,"__ccd_auto_redact",[46,"a"],[50,"v",[46,"bk"],[36,[2,[15,"bk"],"replace",[7,[15,"u"],"\\$1"]]]],[50,"w",[46,"bk"],[52,"bl",[30,["c",[15,"bk"]],[15,"bk"]]],[52,"bm",[7]],[65,"bn",[2,[15,"bl"],"split",[7,""]],[46,[53,[52,"bo",[7,["v",[15,"bn"]]]],[52,"bp",["d",[15,"bn"]]],[22,[12,[15,"bp"],[45]],[46,[36,["d",["v",[15,"bk"]]]]]],[22,[21,[15,"bp"],[15,"bn"]],[46,[2,[15,"bo"],"push",[7,[15,"bp"]]],[22,[21,[15,"bn"],[2,[15,"bn"],"toLowerCase",[7]]],[46,[2,[15,"bo"],"push",[7,["d",[2,[15,"bn"],"toLowerCase",[7]]]]]],[46,[22,[21,[15,"bn"],[2,[15,"bn"],"toUpperCase",[7]]],[46,[2,[15,"bo"],"push",[7,["d",[2,[15,"bn"],"toUpperCase",[7]]]]]]]]]]],[22,[18,[17,[15,"bo"],"length"],1],[46,[2,[15,"bm"],"push",[7,[0,[0,"(?:",[2,[15,"bo"],"join",[7,"|"]]],")"]]]],[46,[2,[15,"bm"],"push",[7,[16,[15,"bo"],0]]]]]]]],[36,[2,[15,"bm"],"join",[7,""]]]],[50,"x",[46,"bk","bl","bm"],[52,"bn",["z",[15,"bk"],[15,"bm"]]],[22,[28,[15,"bn"]],[46,[36,[15,"bk"]]]],[22,[28,[17,[15,"bn"],"search"]],[46,[36,[15,"bk"]]]],[41,"bo"],[3,"bo",[17,[15,"bn"],"search"]],[65,"bp",[15,"bl"],[46,[53,[52,"bq",[7,["v",[15,"bp"]],["w",[15,"bp"]]]],[65,"br",[15,"bq"],[46,[53,[52,"bs",[30,[16,[15,"t"],[15,"br"]],[43,[15,"t"],[15,"br"],["b",[0,[0,"([?&]",[15,"br"]],"=)([^&]*)"],"gi"]]]],[3,"bo",[2,[15,"bo"],"replace",[7,[15,"bs"],[0,"$1",[15,"r"]]]]]]]]]]],[22,[20,[15,"bo"],[17,[15,"bn"],"search"]],[46,[36,[15,"bk"]]]],[22,[20,[16,[15,"bo"],0],"&"],[46,[3,"bo",[2,[15,"bo"],"substring",[7,1]]]]],[22,[21,[16,[15,"bo"],0],"?"],[46,[3,"bo",[0,"?",[15,"bo"]]]]],[22,[20,[15,"bo"],"?"],[46,[3,"bo",""]]],[43,[15,"bn"],"search",[15,"bo"]],[36,["ba",[15,"bn"],[15,"bm"]]]],[50,"z",[46,"bk","bl"],[22,[20,[15,"bl"],[17,[15,"s"],"PATH"]],[46,[3,"bk",[0,[15,"y"],[15,"bk"]]]]],[36,["g",[15,"bk"]]]],[50,"ba",[46,"bk","bl"],[41,"bm"],[3,"bm",""],[22,[20,[15,"bl"],[17,[15,"s"],"URL"]],[46,[53,[41,"bn"],[3,"bn",""],[22,[30,[17,[15,"bk"],"username"],[17,[15,"bk"],"password"]],[46,[3,"bn",[0,[15,"bn"],[0,[0,[0,[17,[15,"bk"],"username"],[39,[17,[15,"bk"],"password"],":",""]],[17,[15,"bk"],"password"]],"@"]]]]],[3,"bm",[0,[0,[0,[17,[15,"bk"],"protocol"],"//"],[15,"bn"]],[17,[15,"bk"],"host"]]]]]],[36,[0,[0,[0,[15,"bm"],[17,[15,"bk"],"pathname"]],[17,[15,"bk"],"search"]],[17,[15,"bk"],"hash"]]]],[50,"bb",[46,"bk","bl"],[41,"bm"],[3,"bm",[2,[15,"bk"],"replace",[7,[15,"n"],[15,"r"]]]],[22,[30,[20,[15,"bl"],[17,[15,"s"],"URL"]],[20,[15,"bl"],[17,[15,"s"],"PATH"]]],[46,[53,[52,"bn",["z",[15,"bm"],[15,"bl"]]],[22,[20,[15,"bn"],[44]],[46,[36,[15,"bm"]]]],[52,"bo",[17,[15,"bn"],"search"]],[52,"bp",[2,[15,"bo"],"replace",[7,[15,"o"],[15,"r"]]]],[22,[20,[15,"bo"],[15,"bp"]],[46,[36,[15,"bm"]]]],[43,[15,"bn"],"search",[15,"bp"]],[3,"bm",["ba",[15,"bn"],[15,"bl"]]]]]],[36,[15,"bm"]]],[50,"bc",[46,"bk"],[22,[20,[15,"bk"],[15,"q"]],[46,[36,[17,[15,"s"],"PATH"]]],[46,[22,[21,[2,[15,"p"],"indexOf",[7,[15,"bk"]]],[27,1]],[46,[36,[17,[15,"s"],"URL"]]],[46,[36,[17,[15,"s"],"TEXT"]]]]]]],[50,"bd",[46,"bk","bl"],[41,"bm"],[3,"bm",false],[52,"bn",["f",[15,"bk"]]],[38,[15,"bn"],[46,"string","array","object"],[46,[5,[46,[52,"bo",["bb",[15,"bk"],[15,"bl"]]],[22,[21,[15,"bk"],[15,"bo"]],[46,[36,[15,"bo"]]]],[4]]],[5,[46,[53,[41,"bp"],[3,"bp",0],[63,[7,"bp"],[23,[15,"bp"],[17,[15,"bk"],"length"]],[33,[15,"bp"],[3,"bp",[0,[15,"bp"],1]]],[46,[53,[52,"bq",["bd",[16,[15,"bk"],[15,"bp"]],[17,[15,"s"],"TEXT"]]],[22,[21,[15,"bq"],[44]],[46,[43,[15,"bk"],[15,"bp"],[15,"bq"]],[3,"bm",true]]]]]]],[4]]],[5,[46,[54,"bp",[15,"bk"],[46,[53,[52,"bq",["bd",[16,[15,"bk"],[15,"bp"]],[17,[15,"s"],"TEXT"]]],[22,[21,[15,"bq"],[44]],[46,[43,[15,"bk"],[15,"bp"],[15,"bq"]],[3,"bm",true]]]]]],[4]]]]],[36,[39,[15,"bm"],[15,"bk"],[44]]]],[50,"bj",[46,"bk","bl"],[52,"bm",[30,[2,[15,"bk"],"getMetadata",[7,[15,"bi"]]],[7]]],[22,[20,[2,[15,"bm"],"indexOf",[7,[15,"bl"]]],[27,1]],[46,[2,[15,"bm"],"push",[7,[15,"bl"]]]]],[2,[15,"bk"],"setMetadata",[7,[15,"bi"],[15,"bm"]]]],[52,"b",["require","internal.createRegex"]],[52,"c",["require","decodeUriComponent"]],[52,"d",["require","encodeUriComponent"]],[52,"e",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"f",["require","getType"]],[52,"g",["require","parseUrl"]],[52,"h",["require","internal.registerCcdCallback"]],[52,"i",[17,[15,"a"],"instanceDestinationId"]],[52,"j",[17,[15,"a"],"redactEmail"]],[52,"k",[17,[15,"a"],"redactQueryParams"]],[52,"l",[39,[15,"k"],[2,[15,"k"],"split",[7,","]],[7]]],[52,"m","is_sgtm_prehit"],[22,[1,[28,[17,[15,"l"],"length"]],[28,[15,"j"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"n",["b","[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}","gi"]],[52,"o",["b",[0,"([A-Z0-9._-]|%25|%2B)+%40[A-Z0-9.-]","+\\.[A-Z]{2,}"],"gi"]],[52,"p",[7,"page_location","page_referrer","page_path","link_url","video_url","form_destination"]],[52,"q","page_path"],[52,"r","(redacted)"],[52,"s",[8,"TEXT",0,"URL",1,"PATH",2]],[52,"t",[8]],[52,"u",["b","([\\\\^$.|?*+(){}]|\\[|\\[)","g"]],[52,"y","http://."],[52,"be",15],[52,"bf",16],[52,"bg",23],[52,"bh",24],[52,"bi","event_usage"],["h",[15,"i"],[51,"",[7,"bk"],[22,[15,"j"],[46,[53,[52,"bl",[2,[15,"bk"],"getHitKeys",[7]]],[65,"bm",[15,"bl"],[46,[53,[22,[20,[15,"bm"],"_sst_parameters"],[46,[6]]],[52,"bn",[2,[15,"bk"],"getHitData",[7,[15,"bm"]]]],[22,[28,[15,"bn"]],[46,[6]]],[52,"bo",["bc",[15,"bm"]]],[52,"bp",["bd",[15,"bn"],[15,"bo"]]],[22,[21,[15,"bp"],[44]],[46,[2,[15,"bk"],"setHitData",[7,[15,"bm"],[15,"bp"]]],["bj",[15,"bk"],[39,[2,[15,"bk"],"getMetadata",[7,[15,"m"]]],[15,"bg"],[15,"be"]]]]]]]]]]],[22,[17,[15,"l"],"length"],[46,[65,"bl",[15,"p"],[46,[53,[52,"bm",[2,[15,"bk"],"getHitData",[7,[15,"bl"]]]],[22,[28,[15,"bm"]],[46,[6]]],[52,"bn",[39,[20,[15,"bl"],[15,"q"]],[17,[15,"s"],"PATH"],[17,[15,"s"],"URL"]]],[52,"bo",["x",[15,"bm"],[15,"l"],[15,"bn"]]],[22,[21,[15,"bo"],[15,"bm"]],[46,[2,[15,"bk"],"setHitData",[7,[15,"bl"],[15,"bo"]]],["bj",[15,"bk"],[39,[2,[15,"bk"],"getMetadata",[7,[15,"m"]]],[15,"bh"],[15,"bf"]]]]]]]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_conversion_marking",[46,"a"],[22,[30,[28,[17,[15,"a"],"conversionRules"]],[20,[17,[17,[15,"a"],"conversionRules"],"length"],0]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"b",["require","internal.copyPreHit"]],[52,"c",["require","internal.evaluateBooleanExpression"]],[52,"d",["require","internal.registerCcdCallback"]],[52,"e","is_conversion"],[52,"f","is_first_visit"],[52,"g","is_first_visit_conversion"],[52,"h","is_session_start"],[52,"i","is_session_start_conversion"],[52,"j","first_visit"],[52,"k","session_start"],[41,"l"],[41,"m"],["d",[17,[15,"a"],"instanceDestinationId"],[51,"",[7,"n"],[52,"o",[8,"preHit",[15,"n"]]],[65,"p",[17,[15,"a"],"conversionRules"],[46,[22,["c",[17,[15,"p"],"matchingRules"],[15,"o"]],[46,[2,[15,"n"],"setMetadata",[7,[15,"e"],true]],[4]]]]],[22,[2,[15,"n"],"getMetadata",[7,[15,"f"]]],[46,[22,[28,[15,"l"]],[46,[53,[52,"p",["b",[15,"n"],[8,"omitHitData",true,"omitMetadata",true]]],[2,[15,"p"],"setEventName",[7,[15,"j"]]],[3,"l",[8,"preHit",[15,"p"]]]]]],[65,"p",[17,[15,"a"],"conversionRules"],[46,[22,["c",[17,[15,"p"],"matchingRules"],[15,"l"]],[46,[2,[15,"n"],"setMetadata",[7,[15,"g"],true]],[4]]]]]]],[22,[2,[15,"n"],"getMetadata",[7,[15,"h"]]],[46,[22,[28,[15,"m"]],[46,[53,[52,"p",["b",[15,"n"],[8,"omitHitData",true,"omitMetadata",true]]],[2,[15,"p"],"setEventName",[7,[15,"k"]]],[3,"m",[8,"preHit",[15,"p"]]]]]],[65,"p",[17,[15,"a"],"conversionRules"],[46,[22,["c",[17,[15,"p"],"matchingRules"],[15,"m"]],[46,[2,[15,"n"],"setMetadata",[7,[15,"i"],true]],[4]]]]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]],[36]]
 ,[50,"__ccd_em_download",[46,"a"],[50,"r",[46,"x"],[36,[1,[15,"x"],[21,[2,[2,[15,"x"],"toLowerCase",[7]],"match",[7,[15,"q"]]],[45]]]]],[50,"s",[46,"x"],[52,"y",[2,[17,[15,"x"],"pathname"],"split",[7,"."]]],[52,"z",[39,[18,[17,[15,"y"],"length"],1],[16,[15,"y"],[37,[17,[15,"y"],"length"],1]],""]],[36,[16,[2,[15,"z"],"split",[7,"/"]],0]]],[50,"t",[46,"x"],[36,[39,[12,[2,[17,[15,"x"],"pathname"],"substring",[7,0,1]],"/"],[17,[15,"x"],"pathname"],[0,"/",[17,[15,"x"],"pathname"]]]]],[50,"u",[46,"x"],[41,"y"],[3,"y",""],[22,[1,[15,"x"],[17,[15,"x"],"href"]],[46,[53,[41,"z"],[3,"z",[2,[17,[15,"x"],"href"],"indexOf",[7,"#"]]],[3,"y",[39,[23,[15,"z"],0],[17,[15,"x"],"href"],[2,[17,[15,"x"],"href"],"substring",[7,0,[15,"z"]]]]]]]],[36,[15,"y"]]],[50,"w",[46,"x"],[52,"y",[8]],[43,[15,"y"],[15,"j"],true],[43,[15,"y"],[15,"f"],true],[43,[15,"x"],"eventMetadata",[15,"y"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmDownloadActivity"]],[52,"f","speculative"],[52,"g","ae_block_downloads"],[52,"h","file_download"],[52,"i","isRegistered"],[52,"j","em_event"],[52,"k",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"k"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerDownloadActivityCallback",[7,[15,"k"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"i"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"l",["require","internal.addDataLayerEventListener"]],[52,"m",["require","internal.enableAutoEventOnLinkClick"]],[52,"n",["require","internal.getDestinationIds"]],[52,"o",["require","parseUrl"]],[52,"p",["require","internal.sendGtagEvent"]],[52,"q",[0,"^(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|","mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$"]],[52,"v",["m",[8,"checkValidation",true]]],[22,[28,[15,"v"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"i"],true]],["l","gtm.linkClick",[51,"",[7,"x","y"],["y"],[52,"z",[8,"eventId",[16,[15,"x"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"z"],"deferrable",true]]],[52,"ba",[16,[15,"x"],"gtm.elementUrl"]],[52,"bb",["o",[15,"ba"]]],[22,[28,[15,"bb"]],[46,[36]]],[52,"bc",["s",[15,"bb"]]],[22,[28,["r",[15,"bc"]]],[46,[36]]],[52,"bd",[8,"link_id",[16,[15,"x"],"gtm.elementId"],"link_url",["u",[15,"bb"]],"link_text",[16,[15,"x"],"gtm.elementText"],"file_name",["t",[15,"bb"]],"file_extension",[15,"bc"]]],["w",[15,"z"]],["p",["n"],[15,"h"],[15,"bd"],[15,"z"]]],[15,"v"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_form",[46,"a"],[50,"t",[46,"ba"],[52,"bb",[30,[16,[15,"ba"],[15,"l"]],[8]]],[43,[15,"bb"],"event_usage",[7,8]],[43,[15,"ba"],[15,"l"],[15,"bb"]]],[50,"u",[46,"ba","bb"],[52,"bc",[30,[16,[15,"ba"],[15,"l"]],[8]]],[43,[15,"bc"],[15,"k"],true],[43,[15,"bc"],[15,"f"],true],[22,[1,[15,"o"],[16,[15,"bb"],"gtm.formCanceled"]],[46,[43,[15,"bc"],[15,"m"],true]]],[43,[15,"ba"],[15,"l"],[15,"bc"]]],[50,"v",[46,"ba","bb","bc"],[52,"bd",[2,["r"],"filter",[7,[51,"",[7,"bf"],[36,[20,[2,[15,"bf"],"indexOf",[7,"AW-"]],0]]]]]],[22,[18,[17,[15,"bd"],"length"],0],[46,["s",[15,"bd"],[15,"ba"],[15,"bb"],[15,"bc"]]]],[52,"be",[2,["r"],"filter",[7,[51,"",[7,"bf"],[36,[21,[2,[15,"bf"],"indexOf",[7,"AW-"]],0]]]]]],[22,[18,[17,[15,"be"],"length"],0],[46,[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"bc"],"deferrable",true]]],["s",[15,"be"],[15,"ba"],[15,"bb"],[15,"bc"]]]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmFormActivity"]],[52,"f","speculative"],[52,"g","ae_block_form"],[52,"h","form_submit"],[52,"i","form_start"],[52,"j","isRegistered"],[52,"k","em_event"],[52,"l","eventMetadata"],[52,"m","form_event_canceled"],[52,"n",[17,[15,"a"],"instanceDestinationId"]],[52,"o",[28,[28,[16,[15,"b"],"enableFormSkipValidation"]]]],[22,["c",[15,"n"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerFormActivityCallback",[7,[17,[15,"a"],"instanceDestinationId"],[17,[15,"a"],"skipValidation"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"j"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"j"],true]],[52,"p",["require","internal.addFormInteractionListener"]],[52,"q",["require","internal.addFormSubmitListener"]],[52,"r",["require","internal.getDestinationIds"]],[52,"s",["require","internal.sendGtagEvent"]],[52,"w",[8]],[52,"x",[51,"",[7,"ba","bb"],[22,[15,"bb"],[46,["bb"]]],[52,"bc",[16,[15,"ba"],"gtm.elementId"]],[22,[16,[15,"w"],[15,"bc"]],[46,[36]]],[43,[15,"w"],[15,"bc"],true],[52,"bd",[8,"form_id",[15,"bc"],"form_name",[16,[15,"ba"],"gtm.interactedFormName"],"form_destination",[16,[15,"ba"],"gtm.elementUrl"],"form_length",[16,[15,"ba"],"gtm.interactedFormLength"],"first_field_id",[16,[15,"ba"],"gtm.interactedFormFieldId"],"first_field_name",[16,[15,"ba"],"gtm.interactedFormFieldName"],"first_field_type",[16,[15,"ba"],"gtm.interactedFormFieldType"],"first_field_position",[16,[15,"ba"],"gtm.interactedFormFieldPosition"]]],[52,"be",[8,"eventId",[17,[15,"a"],"gtmEventId"]]],["t",[15,"be"]],["u",[15,"be"],[15,"ba"]],["v",[15,"i"],[15,"bd"],[15,"be"]]]],[52,"y",[16,[15,"b"],"useEnableAutoEventOnFormApis"]],[52,"z",[51,"",[7,"ba","bb"],["x",[15,"ba"],[44]],[52,"bc",[8,"form_id",[16,[15,"ba"],"gtm.elementId"],"form_name",[16,[15,"ba"],"gtm.interactedFormName"],"form_destination",[16,[15,"ba"],"gtm.elementUrl"],"form_length",[16,[15,"ba"],"gtm.interactedFormLength"],"form_submit_text",[39,[15,"y"],[16,[15,"ba"],"gtm.formSubmitElementText"],[16,[15,"ba"],"gtm.formSubmitButtonText"]]]],[43,[15,"bc"],"event_callback",[15,"bb"]],[52,"bd",[8,"eventId",[17,[15,"a"],"gtmEventId"]]],["t",[15,"bd"]],["u",[15,"bd"],[15,"ba"]],["v",[15,"h"],[15,"bc"],[15,"bd"]]]],[22,[15,"y"],[46,[53,[52,"ba",["require","internal.addDataLayerEventListener"]],[52,"bb",["require","internal.enableAutoEventOnFormSubmit"]],[52,"bc",["require","internal.enableAutoEventOnFormInteraction"]],[52,"bd",["bc"]],[22,[28,[15,"bd"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],["ba","gtm.formInteract",[15,"x"],[15,"bd"]],[52,"be",["bb",[8,"checkValidation",[28,[15,"o"]],"waitForTags",false]]],[22,[28,[15,"be"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],["ba","gtm.formSubmit",[15,"z"],[15,"be"]]]],[46,["p",[15,"x"]],["q",[15,"z"],[8,"waitForCallbacks",false,"checkValidation",[28,[15,"o"]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_outbound_click",[46,"a"],[50,"s",[46,"y"],[22,[28,[15,"y"]],[46,[36,[44]]]],[41,"z"],[3,"z",""],[22,[1,[15,"y"],[17,[15,"y"],"href"]],[46,[53,[41,"ba"],[3,"ba",[2,[17,[15,"y"],"href"],"indexOf",[7,"#"]]],[3,"z",[39,[23,[15,"ba"],0],[17,[15,"y"],"href"],[2,[17,[15,"y"],"href"],"substring",[7,0,[15,"ba"]]]]]]]],[36,[15,"z"]]],[50,"t",[46,"y"],[22,[28,[15,"y"]],[46,[36,[44]]]],[41,"z"],[3,"z",[17,[15,"y"],"hostname"]],[52,"ba",[2,[15,"z"],"match",[7,"^www\\d*\\."]]],[22,[1,[15,"ba"],[16,[15,"ba"],0]],[46,[3,"z",[2,[15,"z"],"substring",[7,[17,[16,[15,"ba"],0],"length"]]]]]],[36,[15,"z"]]],[50,"u",[46,"y"],[22,[28,[15,"y"]],[46,[36,false]]],[52,"z",[2,[17,[15,"y"],"hostname"],"toLowerCase",[7]]],[22,[1,[17,[15,"b"],"enableGa4OutboundClicksFix"],[28,[15,"z"]]],[46,[36,false]]],[41,"ba"],[3,"ba",[2,["t",["q",["p"]]],"toLowerCase",[7]]],[41,"bb"],[3,"bb",[37,[17,[15,"z"],"length"],[17,[15,"ba"],"length"]]],[22,[1,[18,[15,"bb"],0],[29,[2,[15,"ba"],"charAt",[7,0]],"."]],[46,[32,[15,"bb"],[3,"bb",[37,[15,"bb"],1]]],[3,"ba",[0,".",[15,"ba"]]]]],[22,[1,[19,[15,"bb"],0],[12,[2,[15,"z"],"indexOf",[7,[15,"ba"],[15,"bb"]]],[15,"bb"]]],[46,[36,false]]],[36,true]],[50,"x",[46,"y"],[52,"z",[8]],[43,[15,"z"],[15,"j"],true],[43,[15,"z"],[15,"f"],true],[43,[15,"y"],"eventMetadata",[15,"z"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmOutboundClickActivity"]],[52,"f","speculative"],[52,"g","ae_block_outbound_click"],[52,"h","click"],[52,"i","isRegistered"],[52,"j","em_event"],[52,"k",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"k"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerOutbackClickActivityCallback",[7,[15,"k"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"i"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"l",["require","internal.addDataLayerEventListener"]],[52,"m",["require","internal.enableAutoEventOnLinkClick"]],[52,"n",["require","internal.getDestinationIds"]],[52,"o",["require","internal.getRemoteConfigParameter"]],[52,"p",["require","getUrl"]],[52,"q",["require","parseUrl"]],[52,"r",["require","internal.sendGtagEvent"]],[52,"v",["o",[15,"k"],"cross_domain_conditions"]],[52,"w",["m",[8,"affiliateDomains",[15,"v"],"checkValidation",true,"waitForTags",false]]],[22,[28,[15,"w"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"i"],true]],["l","gtm.linkClick",[51,"",[7,"y","z"],[52,"ba",["q",[16,[15,"y"],"gtm.elementUrl"]]],[22,[28,["u",[15,"ba"]]],[46,["z"],[36]]],[52,"bb",[8,"link_id",[16,[15,"y"],"gtm.elementId"],"link_classes",[16,[15,"y"],"gtm.elementClasses"],"link_url",["s",[15,"ba"]],"link_domain",["t",[15,"ba"]],"outbound",true]],[43,[15,"bb"],"event_callback",[15,"z"]],[52,"bc",[8,"eventId",[16,[15,"y"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"bc"],"deferrable",true]]],["x",[15,"bc"]],["r",["n"],[15,"h"],[15,"bb"],[15,"bc"]]],[15,"w"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_page_view",[46,"a"],[50,"s",[46,"t"],[52,"u",[8]],[43,[15,"u"],[15,"k"],true],[43,[15,"u"],[15,"g"],true],[43,[15,"t"],"eventMetadata",[15,"u"]]],[22,[28,[17,[15,"a"],"historyEvents"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","internal.setRemoteConfigParameter"]],[52,"e",["require","templateStorage"]],[52,"f",[15,"__module_ccdEmPageViewActivity"]],[52,"g","speculative"],[52,"h","ae_block_history"],[52,"i","page_view"],[52,"j","isRegistered"],[52,"k","em_event"],[52,"l",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"l"],[15,"h"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"f"],"registerPageViewActivityCallback",[7,[15,"l"]]],[22,[2,[15,"e"],"getItem",[7,[15,"j"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"m",["require","internal.addDataLayerEventListener"]],[52,"n",["require","internal.enableAutoEventOnHistoryChange"]],[52,"o",["require","internal.getDestinationIds"]],[52,"p",["require","internal.sendGtagEvent"]],[52,"q",[8,"interval",1000,"useV2EventName",true]],[52,"r",["n",[15,"q"]]],[22,[28,[15,"r"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"e"],"setItem",[7,[15,"j"],true]],["m","gtm.historyChange-v2",[51,"",[7,"t","u"],["u"],[52,"v",[16,[15,"t"],"gtm.oldUrl"]],[22,[20,[16,[15,"t"],"gtm.newUrl"],[15,"v"]],[46,[36]]],[52,"w",[16,[15,"t"],"gtm.historyChangeSource"]],[22,[1,[1,[21,[15,"w"],"pushState"],[21,[15,"w"],"popstate"]],[21,[15,"w"],"replaceState"]],[46,[36]]],[52,"x",[8]],[22,[17,[15,"a"],"includeParams"],[46,[43,[15,"x"],"page_location",[16,[15,"t"],"gtm.newUrl"]],[43,[15,"x"],"page_referrer",[15,"v"]]]],[52,"y",[8,"eventId",[16,[15,"t"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"y"],"deferrable",true]]],["s",[15,"y"]],["p",["o"],[15,"i"],[15,"x"],[15,"y"]]],[15,"r"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_scroll",[46,"a"],[50,"q",[46,"r"],[52,"s",[8]],[43,[15,"s"],[15,"j"],true],[43,[15,"s"],[15,"f"],true],[43,[15,"r"],"eventMetadata",[15,"s"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmScrollActivity"]],[52,"f","speculative"],[52,"g","ae_block_scroll"],[52,"h","scroll"],[52,"i","isRegistered"],[52,"j","em_event"],[52,"k",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"k"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerScrollActivityCallback",[7,[15,"k"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"i"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"l",["require","internal.addDataLayerEventListener"]],[52,"m",["require","internal.enableAutoEventOnScroll"]],[52,"n",["require","internal.getDestinationIds"]],[52,"o",["require","internal.sendGtagEvent"]],[52,"p",["m",[8,"verticalThresholdUnits","PERCENT","verticalThresholds",90]]],[22,[28,[15,"p"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"i"],true]],["l","gtm.scrollDepth",[51,"",[7,"r","s"],["s"],[52,"t",[8,"eventId",[16,[15,"r"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"t"],"deferrable",true]]],[52,"u",[8,"percent_scrolled",[16,[15,"r"],"gtm.scrollThreshold"]]],["q",[15,"t"]],["o",["n"],[15,"h"],[15,"u"],[15,"t"]]],[15,"p"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_site_search",[46,"a"],[52,"b",["require","getQueryParameters"]],[52,"c",["require","internal.sendGtagEvent"]],[52,"d",["require","getContainerVersion"]],[52,"e",[15,"__module_ccdEmSiteSearchActivity"]],[52,"f",[2,[15,"e"],"getSearchTerm",[7,[17,[15,"a"],"searchQueryParams"],[15,"b"]]]],[52,"g",[30,[17,[15,"a"],"instanceDestinationId"],[17,["d"],"containerId"]]],[52,"h",[8,"deferrable",true,"eventId",[17,[15,"a"],"gtmEventId"],"eventMetadata",[8,"em_event",true]]],[22,[15,"f"],[46,[53,[52,"i",[39,[28,[28,[17,[15,"a"],"includeParams"]]],[2,[15,"e"],"buildEventParams",[7,[15,"f"],[17,[15,"a"],"additionalQueryParams"],[15,"b"]]],[8]]],["c",[15,"g"],"view_search_results",[15,"i"],[15,"h"]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_video",[46,"a"],[50,"s",[46,"t"],[52,"u",[8]],[43,[15,"u"],[15,"l"],true],[43,[15,"u"],[15,"f"],true],[43,[15,"t"],"eventMetadata",[15,"u"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmVideoActivity"]],[52,"f","speculative"],[52,"g","ae_block_video"],[52,"h","video_start"],[52,"i","video_progress"],[52,"j","video_complete"],[52,"k","isRegistered"],[52,"l","em_event"],[52,"m",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"m"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerVideoActivityCallback",[7,[15,"m"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"k"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"n",["require","internal.addDataLayerEventListener"]],[52,"o",["require","internal.enableAutoEventOnYouTubeActivity"]],[52,"p",["require","internal.getDestinationIds"]],[52,"q",["require","internal.sendGtagEvent"]],[52,"r",["o",[8,"captureComplete",true,"captureStart",true,"progressThresholdsPercent",[7,10,25,50,75]]]],[22,[28,[15,"r"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"k"],true]],["n","gtm.video",[51,"",[7,"t","u"],["u"],[52,"v",[16,[15,"t"],"gtm.videoStatus"]],[41,"w"],[22,[20,[15,"v"],"start"],[46,[3,"w",[15,"h"]]],[46,[22,[20,[15,"v"],"progress"],[46,[3,"w",[15,"i"]]],[46,[22,[20,[15,"v"],"complete"],[46,[3,"w",[15,"j"]]],[46,[36]]]]]]],[52,"x",[8,"video_current_time",[16,[15,"t"],"gtm.videoCurrentTime"],"video_duration",[16,[15,"t"],"gtm.videoDuration"],"video_percent",[16,[15,"t"],"gtm.videoPercent"],"video_provider",[16,[15,"t"],"gtm.videoProvider"],"video_title",[16,[15,"t"],"gtm.videoTitle"],"video_url",[16,[15,"t"],"gtm.videoUrl"],"visible",[16,[15,"t"],"gtm.videoVisible"]]],[52,"y",[8,"eventId",[16,[15,"t"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"y"],"deferrable",true]]],["s",[15,"y"]],["q",["p"],[15,"w"],[15,"x"],[15,"y"]]],[15,"r"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_ga_first",[46,"a"],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_ga_last",[46,"a"],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_ga_regscope",[46,"a"],[52,"b",[15,"__module_ccdGaRegionScopedSettings"]],[52,"c",[2,[15,"b"],"extractRedactedLocations",[7,[15,"a"]]]],[2,[15,"b"],"applyRegionScopedSettings",[7,[15,"a"],[15,"c"]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__e",[46,"a"],[36,[13,[41,"$0"],[3,"$0",["require","internal.getEventData"]],["$0","event"]]]]
 ,[50,"__ogt_1p_data_v2",[46,"a"],[50,"n",[46,"s","t"],[52,"u",[7]],[52,"v",[2,[15,"b"],"keys",[7,[15,"s"]]]],[65,"w",[15,"v"],[46,[53,[52,"x",[30,[16,[15,"s"],[15,"w"]],[7]]],[52,"y",[39,[18,[17,[15,"x"],"length"],0],"1","0"]],[52,"z",[39,["o",[15,"t"],[15,"w"]],"1","0"]],[2,[15,"u"],"push",[7,[0,[0,[0,[16,[15,"m"],[15,"w"]],"-"],[15,"y"]],[15,"z"]]]]]]],[36,[2,[15,"u"],"join",[7,"~"]]]],[50,"o",[46,"s","t"],[22,[28,[15,"s"]],[46,[36,false]]],[38,[15,"t"],[46,"email","phone_number","first_name","last_name","street","city","region","postal_code","country"],[46,[5,[46,[36,[28,[28,[16,[15,"s"],"email"]]]]]],[5,[46,[36,[28,[28,[16,[15,"s"],"phone_number"]]]]]],[5,[46]],[5,[46]],[5,[46]],[5,[46]],[5,[46]],[5,[46]],[5,[46,[36,["p",[15,"s"],[15,"t"]]]]],[9,[46,[36,false]]]]]],[50,"p",[46,"s","t"],[36,[1,[28,[28,[16,[15,"s"],"address"]]],[28,[28,[16,[16,[15,"s"],"address"],[15,"t"]]]]]]],[50,"q",[46,"s","t","u"],[22,[20,[16,[15,"t"],"type"],[15,"u"]],[46,[22,[28,[15,"s"]],[46,[3,"s",[8]]]],[22,[28,[16,[15,"s"],[15,"u"]]],[46,[43,[15,"s"],[15,"u"],[16,[15,"t"],"userData"]]]]]],[36,[15,"s"]]],[50,"r",[46,"s","t","u"],[22,[28,[16,[15,"a"],[15,"u"]]],[46,[36]]],[43,[15,"s"],[15,"t"],[8,"value",[16,[15,"a"],[15,"u"]]]]],[22,[28,[17,[15,"a"],"isEnabled"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"b",["require","Object"]],[52,"c",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"d",["require","internal.getDestinationIds"]],[52,"e",["require","internal.getProductSettingsParameter"]],[52,"f",["require","internal.detectUserProvidedData"]],[52,"g",["require","queryPermission"]],[52,"h",["require","internal.setRemoteConfigParameter"]],[52,"i",["require","internal.registerCcdCallback"]],[52,"j","_z"],[52,"k",[30,["d"],[7]]],[52,"l",[8,"enable_code",true]],[52,"m",[8,"email","1","phone_number","2","first_name","3","last_name","4","country","5","postal_code","6","street","7","city","8","region","9"]],[22,[17,[15,"a"],"isAutoEnabled"],[46,[53,[52,"s",[7]],[22,[1,[17,[15,"a"],"autoCollectExclusionSelectors"],[17,[17,[15,"a"],"autoCollectExclusionSelectors"],"length"]],[46,[53,[41,"v"],[3,"v",0],[63,[7,"v"],[23,[15,"v"],[17,[17,[15,"a"],"autoCollectExclusionSelectors"],"length"]],[33,[15,"v"],[3,"v",[0,[15,"v"],1]]],[46,[53,[52,"w",[17,[16,[17,[15,"a"],"autoCollectExclusionSelectors"],[15,"v"]],"exclusionSelector"]],[22,[15,"w"],[46,[2,[15,"s"],"push",[7,[15,"w"]]]]]]]]]]],[52,"t",[30,[16,[15,"c"],"enableAutoPhoneAndAddressDetection"],[17,[15,"a"],"isAutoCollectPiiEnabledFlag"]]],[52,"u",[39,[17,[15,"a"],"isAutoCollectPiiEnabledFlag"],[17,[15,"a"],"autoEmailEnabled"],true]],[43,[15,"l"],"auto_detect",[8,"email",[15,"u"],"phone",[1,[15,"t"],[17,[15,"a"],"autoPhoneEnabled"]],"address",[1,[15,"t"],[17,[15,"a"],"autoAddressEnabled"]],"exclude_element_selectors",[15,"s"]]]]]],[22,[17,[15,"a"],"isManualEnabled"],[46,[53,[52,"s",[8]],[22,[17,[15,"a"],"manualEmailEnabled"],[46,["r",[15,"s"],"email","emailValue"]]],[22,[17,[15,"a"],"manualPhoneEnabled"],[46,["r",[15,"s"],"phone","phoneValue"]]],[22,[17,[15,"a"],"manualAddressEnabled"],[46,[53,[52,"t",[8]],["r",[15,"t"],"first_name","firstNameValue"],["r",[15,"t"],"last_name","lastNameValue"],["r",[15,"t"],"street","streetValue"],["r",[15,"t"],"city","cityValue"],["r",[15,"t"],"region","regionValue"],["r",[15,"t"],"country","countryValue"],["r",[15,"t"],"postal_code","postalCodeValue"],[43,[15,"s"],"name_and_address",[7,[15,"t"]]]]]],[43,[15,"l"],"selectors",[15,"s"]]]]],[65,"s",[15,"k"],[46,[53,["h",[15,"s"],"user_data_settings",[15,"l"]],[52,"t",[16,[15,"l"],"auto_detect"]],[22,[28,[15,"t"]],[46,[6]]],[52,"u",[51,"",[7,"v"],[52,"w",[2,[15,"v"],"getMetadata",[7,"user_data_from_automatic"]]],[22,[15,"w"],[46,[36,[15,"w"]]]],[52,"x",[1,[16,[15,"c"],"enableDataLayerSearchExperiment"],[20,[2,[15,"s"],"indexOf",[7,"G-"]],0]]],[41,"y"],[22,["g","detect_user_provided_data","auto"],[46,[3,"y",["f",[8,"excludeElementSelectors",[16,[15,"t"],"exclude_element_selectors"],"fieldFilters",[8,"email",[16,[15,"t"],"email"],"phone",[16,[15,"t"],"phone"],"address",[16,[15,"t"],"address"]],"performDataLayerSearch",[15,"x"]]]]]],[52,"z",[1,[15,"y"],[16,[15,"y"],"elements"]]],[52,"ba",[8]],[22,[1,[15,"z"],[18,[17,[15,"z"],"length"],0]],[46,[53,[41,"bb"],[53,[41,"bc"],[3,"bc",0],[63,[7,"bc"],[23,[15,"bc"],[17,[15,"z"],"length"]],[33,[15,"bc"],[3,"bc",[0,[15,"bc"],1]]],[46,[53,[52,"bd",[16,[15,"z"],[15,"bc"]]],["q",[15,"ba"],[15,"bd"],"email"],[22,[16,[15,"c"],"enableAutoPiiOnPhoneAndAddress"],[46,["q",[15,"ba"],[15,"bd"],"phone_number"],[3,"bb",["q",[15,"bb"],[15,"bd"],"first_name"]],[3,"bb",["q",[15,"bb"],[15,"bd"],"last_name"]],[3,"bb",["q",[15,"bb"],[15,"bd"],"country"]],[3,"bb",["q",[15,"bb"],[15,"bd"],"postal_code"]]]]]]]],[22,[1,[15,"bb"],[28,[16,[15,"ba"],"address"]]],[46,[43,[15,"ba"],"address",[15,"bb"]]]]]]],[22,[15,"x"],[46,[53,[52,"bb",[1,[15,"y"],[16,[15,"y"],"dataLayerSearchResults"]]],[22,[15,"bb"],[46,[53,[52,"bc",["n",[15,"bb"],[15,"ba"]]],[22,[15,"bc"],[46,[2,[15,"v"],"setHitData",[7,[15,"j"],[15,"bc"]]]]]]]]]]],[2,[15,"v"],"setMetadata",[7,"user_data_from_automatic",[15,"ba"]]],[36,[15,"ba"]]]],["i",[15,"s"],[51,"",[7,"v"],[2,[15,"v"],"setMetadata",[7,"user_data_from_automatic_getter",[15,"u"]]]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ogt_google_signals",[46,"a"],[52,"b",["require","internal.setProductSettingsParameter"]],[52,"c",["require","getContainerVersion"]],[52,"d",[30,[17,[15,"a"],"instanceDestinationId"],[17,["c"],"containerId"]]],["b",[15,"d"],"google_signals",[20,[17,[15,"a"],"googleSignals"],"ENABLED"]],["b",[15,"d"],"google_ng",[20,[17,[15,"a"],"googleSignals"],"NON_GAIA_REMARKETING"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__set_product_settings",[46,"a"],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[52,"__module_activities",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"b",[46,"c","d"],[36,[39,[15,"d"],["d",[15,"c"]],[15,"c"]]]],[36,[8,"withRequestContext",[15,"b"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmDownloadActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"h",[46,"i","j"],["c",[15,"i"],[51,"",[7,"k"],[22,[30,[21,[2,[15,"k"],"getEventName",[7]],[15,"f"]],[28,[2,[15,"k"],"getMetadata",[7,[15,"g"]]]]],[46,[36]]],[22,["b",[15,"i"],[15,"e"]],[46,[2,[15,"k"],"abort",[7]],[36]]],[2,[15,"k"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"j"]],[46,[2,[15,"k"],"setHitData",[7,"link_id",[44]]],[2,[15,"k"],"setHitData",[7,"link_url",[44]]],[2,[15,"k"],"setHitData",[7,"link_text",[44]]],[2,[15,"k"],"setHitData",[7,"file_name",[44]]],[2,[15,"k"],"setHitData",[7,"file_extension",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_downloads"],[52,"f","file_download"],[52,"g","em_event"],[36,[8,"registerDownloadActivityCallback",[15,"h"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmFormActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"l",[46,"m","n","o"],[22,[1,[15,"k"],[20,[15,"n"],[44]]],[46,[3,"n",[20,[2,[15,"m"],"indexOf",[7,"AW-"]],0]]]],["d",[15,"m"],[51,"",[7,"p"],[52,"q",[2,[15,"p"],"getEventName",[7]]],[52,"r",[30,[20,[15,"q"],[15,"h"]],[20,[15,"q"],[15,"g"]]]],[22,[30,[28,[15,"r"]],[28,[2,[15,"p"],"getMetadata",[7,[15,"i"]]]]],[46,[36]]],[22,["c",[15,"m"],[15,"f"]],[46,[2,[15,"p"],"abort",[7]],[36]]],[22,[15,"k"],[46,[22,[1,[28,[15,"n"]],[2,[15,"p"],"getMetadata",[7,[15,"j"]]]],[46,[2,[15,"p"],"abort",[7]],[36]]]]],[2,[15,"p"],"setMetadata",[7,[15,"e"],false]],[22,[28,[15,"o"]],[46,[2,[15,"p"],"setHitData",[7,"form_id",[44]]],[2,[15,"p"],"setHitData",[7,"form_name",[44]]],[2,[15,"p"],"setHitData",[7,"form_destination",[44]]],[2,[15,"p"],"setHitData",[7,"form_length",[44]]],[22,[20,[15,"q"],[15,"g"]],[46,[2,[15,"p"],"setHitData",[7,"form_submit_text",[44]]]],[46,[22,[20,[15,"q"],[15,"h"]],[46,[2,[15,"p"],"setHitData",[7,"first_field_id",[44]]],[2,[15,"p"],"setHitData",[7,"first_field_name",[44]]],[2,[15,"p"],"setHitData",[7,"first_field_type",[44]]],[2,[15,"p"],"setHitData",[7,"first_field_position",[44]]]]]]]]]]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","internal.registerCcdCallback"]],[52,"e","speculative"],[52,"f","ae_block_form"],[52,"g","form_submit"],[52,"h","form_start"],[52,"i","em_event"],[52,"j","form_event_canceled"],[52,"k",[28,[28,[16,[15,"b"],"enableFormSkipValidation"]]]],[36,[8,"registerFormActivityCallback",[15,"l"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmOutboundClickActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"h",[46,"i","j"],["c",[15,"i"],[51,"",[7,"k"],[22,[30,[21,[2,[15,"k"],"getEventName",[7]],[15,"f"]],[28,[2,[15,"k"],"getMetadata",[7,[15,"g"]]]]],[46,[36]]],[22,["b",[15,"i"],[15,"e"]],[46,[2,[15,"k"],"abort",[7]],[36]]],[2,[15,"k"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"j"]],[46,[2,[15,"k"],"setHitData",[7,"link_id",[44]]],[2,[15,"k"],"setHitData",[7,"link_classes",[44]]],[2,[15,"k"],"setHitData",[7,"link_url",[44]]],[2,[15,"k"],"setHitData",[7,"link_domain",[44]]],[2,[15,"k"],"setHitData",[7,"outbound",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_outbound_click"],[52,"f","click"],[52,"g","em_event"],[36,[8,"registerOutbackClickActivityCallback",[15,"h"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmPageViewActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"j",[46,"k"],["c",[15,"k"],[51,"",[7,"l"],[22,[30,[21,[2,[15,"l"],"getEventName",[7]],[15,"h"]],[28,[2,[15,"l"],"getMetadata",[7,[15,"i"]]]]],[46,[36]]],[22,["b",[15,"k"],[15,"g"]],[46,[2,[15,"l"],"abort",[7]],[36]]],[22,[28,[2,[15,"l"],"getMetadata",[7,[15,"f"]]]],[46,["d",[15,"k"],"page_referrer",[2,[15,"l"],"getHitData",[7,"page_referrer"]]]]],[2,[15,"l"],"setMetadata",[7,[15,"e"],false]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d",["require","internal.setRemoteConfigParameter"]],[52,"e","speculative"],[52,"f","is_sgtm_prehit"],[52,"g","ae_block_history"],[52,"h","page_view"],[52,"i","em_event"],[36,[8,"registerPageViewActivityCallback",[15,"j"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmSiteSearchActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"b",[46,"d","e"],[52,"f",[2,[30,[15,"d"],""],"split",[7,","]]],[53,[41,"g"],[3,"g",0],[63,[7,"g"],[23,[15,"g"],[17,[15,"f"],"length"]],[33,[15,"g"],[3,"g",[0,[15,"g"],1]]],[46,[53,[52,"h",["e",[2,[16,[15,"f"],[15,"g"]],"trim",[7]]]],[22,[21,[15,"h"],[44]],[46,[36,[15,"h"]]]]]]]]],[50,"c",[46,"d","e","f"],[52,"g",[8,"search_term",[15,"d"]]],[52,"h",[2,[30,[15,"e"],""],"split",[7,","]]],[53,[41,"i"],[3,"i",0],[63,[7,"i"],[23,[15,"i"],[17,[15,"h"],"length"]],[33,[15,"i"],[3,"i",[0,[15,"i"],1]]],[46,[53,[52,"j",[2,[16,[15,"h"],[15,"i"]],"trim",[7]]],[52,"k",["f",[15,"j"]]],[22,[21,[15,"k"],[44]],[46,[43,[15,"g"],[0,"q_",[15,"j"]],[15,"k"]]]]]]]],[36,[15,"g"]]],[36,[8,"getSearchTerm",[15,"b"],"buildEventParams",[15,"c"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmScrollActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"h",[46,"i","j"],["c",[15,"i"],[51,"",[7,"k"],[22,[30,[21,[2,[15,"k"],"getEventName",[7]],[15,"f"]],[28,[2,[15,"k"],"getMetadata",[7,[15,"g"]]]]],[46,[36]]],[22,["b",[15,"i"],[15,"e"]],[46,[2,[15,"k"],"abort",[7]],[36]]],[2,[15,"k"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"j"]],[46,[2,[15,"k"],"setHitData",[7,"percent_scrolled",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_scroll"],[52,"f","scroll"],[52,"g","em_event"],[36,[8,"registerScrollActivityCallback",[15,"h"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmVideoActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"j",[46,"k","l"],["c",[15,"k"],[51,"",[7,"m"],[52,"n",[2,[15,"m"],"getEventName",[7]]],[52,"o",[30,[30,[20,[15,"n"],[15,"f"]],[20,[15,"n"],[15,"g"]]],[20,[15,"n"],[15,"h"]]]],[22,[30,[28,[15,"o"]],[28,[2,[15,"m"],"getMetadata",[7,[15,"i"]]]]],[46,[36]]],[22,["b",[15,"k"],[15,"e"]],[46,[2,[15,"m"],"abort",[7]],[36]]],[2,[15,"m"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"l"]],[46,[2,[15,"m"],"setHitData",[7,"video_current_time",[44]]],[2,[15,"m"],"setHitData",[7,"video_duration",[44]]],[2,[15,"m"],"setHitData",[7,"video_percent",[44]]],[2,[15,"m"],"setHitData",[7,"video_provider",[44]]],[2,[15,"m"],"setHitData",[7,"video_title",[44]]],[2,[15,"m"],"setHitData",[7,"video_url",[44]]],[2,[15,"m"],"setHitData",[7,"visible",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_video"],[52,"f","video_start"],[52,"g","video_progress"],[52,"h","video_complete"],[52,"i","em_event"],[36,[8,"registerVideoActivityCallback",[15,"j"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdGaRegionScopedSettings",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"n",[46,"q","r","s"],[50,"x",[46,"z"],[52,"ba",[16,[15,"m"],[15,"z"]]],[22,[28,[15,"ba"]],[46,[36]]],[53,[41,"bb"],[3,"bb",0],[63,[7,"bb"],[23,[15,"bb"],[17,[15,"ba"],"length"]],[33,[15,"bb"],[3,"bb",[0,[15,"bb"],1]]],[46,[53,[52,"bc",[16,[15,"ba"],[15,"bb"]]],["u",[15,"t"],[17,[15,"bc"],"name"],[17,[15,"bc"],"value"]]]]]]],[50,"y",[46,"z"],[22,[30,[28,[15,"v"]],[21,[17,[15,"v"],"length"],2]],[46,[36,false]]],[41,"ba"],[3,"ba",[16,[15,"z"],[15,"w"]]],[22,[20,[15,"ba"],[44]],[46,[3,"ba",[16,[15,"z"],[15,"v"]]]]],[36,[28,[28,[15,"ba"]]]]],[22,[28,[15,"r"]],[46,[36]]],[52,"t",[30,[17,[15,"q"],"instanceDestinationId"],[17,["d"],"containerId"]]],[52,"u",["i",[15,"g"],[15,"s"]]],[52,"v",[13,[41,"$0"],[3,"$0",["i",[15,"e"],[15,"s"]]],["$0"]]],[52,"w",[13,[41,"$0"],[3,"$0",["i",[15,"f"],[15,"s"]]],["$0"]]],[53,[41,"z"],[3,"z",0],[63,[7,"z"],[23,[15,"z"],[17,[15,"r"],"length"]],[33,[15,"z"],[3,"z",[0,[15,"z"],1]]],[46,[53,[52,"ba",[16,[15,"r"],[15,"z"]]],[22,[30,[17,[15,"ba"],"disallowAllRegions"],["y",[17,[15,"ba"],"disallowedRegions"]]],[46,["x",[17,[15,"ba"],"redactFieldGroup"]]]]]]]]],[50,"o",[46,"q"],[52,"r",[8]],[22,[28,[15,"q"]],[46,[36,[15,"r"]]]],[52,"s",[2,[15,"q"],"split",[7,","]]],[53,[41,"t"],[3,"t",0],[63,[7,"t"],[23,[15,"t"],[17,[15,"s"],"length"]],[33,[15,"t"],[3,"t",[0,[15,"t"],1]]],[46,[53,[52,"u",[2,[16,[15,"s"],[15,"t"]],"trim",[7]]],[22,[28,[15,"u"]],[46,[6]]],[52,"v",[2,[15,"u"],"split",[7,"-"]]],[52,"w",[16,[15,"v"],0]],[52,"x",[39,[20,[17,[15,"v"],"length"],2],[15,"u"],[44]]],[22,[30,[28,[15,"w"]],[21,[17,[15,"w"],"length"],2]],[46,[6]]],[22,[1,[21,[15,"x"],[44]],[30,[23,[17,[15,"x"],"length"],4],[18,[17,[15,"x"],"length"],6]]],[46,[6]]],[43,[15,"r"],[15,"u"],true]]]]],[36,[15,"r"]]],[50,"p",[46,"q"],[22,[28,[17,[15,"q"],"settingsTable"]],[46,[36,[7]]]],[52,"r",[8]],[53,[41,"s"],[3,"s",0],[63,[7,"s"],[23,[15,"s"],[17,[17,[15,"q"],"settingsTable"],"length"]],[33,[15,"s"],[3,"s",[0,[15,"s"],1]]],[46,[53,[52,"t",[16,[17,[15,"q"],"settingsTable"],[15,"s"]]],[52,"u",[17,[15,"t"],"redactFieldGroup"]],[22,[28,[16,[15,"m"],[15,"u"]]],[46,[6]]],[43,[15,"r"],[15,"u"],[8,"redactFieldGroup",[15,"u"],"disallowAllRegions",false,"disallowedRegions",[8]]],[52,"v",[16,[15,"r"],[15,"u"]]],[22,[17,[15,"t"],"disallowAllRegions"],[46,[43,[15,"v"],"disallowAllRegions",true],[6]]],[43,[15,"v"],"disallowedRegions",["o",[17,[15,"t"],"disallowedRegions"]]]]]]],[36,[2,[15,"b"],"values",[7,[15,"r"]]]]],[52,"b",["require","Object"]],[52,"c",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"d",["require","getContainerVersion"]],[52,"e",["require","internal.getCountryCode"]],[52,"f",["require","internal.getRegionCode"]],[52,"g",["require","internal.setRemoteConfigParameter"]],[52,"h",[15,"__module_activities"]],[52,"i",[17,[15,"h"],"withRequestContext"]],[41,"j"],[41,"k"],[41,"l"],[52,"m",[8,"GOOGLE_SIGNALS",[7,[8,"name","allow_google_signals","value",false]],"DEVICE_AND_GEO",[7,[8,"name","geo_granularity","value",true],[8,"name","redact_device_info","value",true]]]],[36,[8,"applyRegionScopedSettings",[15,"n"],"extractRedactedLocations",[15,"p"]]]],[36,["a"]]]],["$0"]]]
 
]
,"entities":{
"__c":{"2":true,"4":true}
,
"__ccd_auto_redact":{"2":true,"4":true}
,
"__ccd_conversion_marking":{"2":true,"4":true}
,
"__ccd_em_download":{"2":true,"4":true}
,
"__ccd_em_form":{"2":true,"4":true}
,
"__ccd_em_outbound_click":{"2":true,"4":true}
,
"__ccd_em_page_view":{"2":true,"4":true}
,
"__ccd_em_scroll":{"2":true,"4":true}
,
"__ccd_em_site_search":{"2":true,"4":true}
,
"__ccd_em_video":{"2":true,"4":true}
,
"__ccd_ga_first":{"2":true,"4":true}
,
"__ccd_ga_last":{"2":true,"4":true}
,
"__ccd_ga_regscope":{"2":true,"4":true}
,
"__e":{"2":true,"4":true}
,
"__ogt_1p_data_v2":{"2":true}
,
"__ogt_google_signals":{"2":true,"4":true}
,
"__set_product_settings":{"2":true,"4":true}


}
,"blob":{"1":"1"}
,"permissions":{
"__c":{}
,
"__ccd_auto_redact":{}
,
"__ccd_conversion_marking":{}
,
"__ccd_em_download":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.linkClick"]},"access_template_storage":{},"detect_link_click_events":{"allowWaitForTags":""}}
,
"__ccd_em_form":{"access_template_storage":{},"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.formInteract","gtm.formSubmit"]},"detect_form_submit_events":{"allowWaitForTags":""},"detect_form_interaction_events":{}}
,
"__ccd_em_outbound_click":{"get_url":{"urlParts":"any","queriesAllowed":"any"},"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.linkClick"]},"access_template_storage":{},"detect_link_click_events":{"allowWaitForTags":""}}
,
"__ccd_em_page_view":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.historyChange-v2"]},"access_template_storage":{},"detect_history_change_events":{}}
,
"__ccd_em_scroll":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.scrollDepth"]},"access_template_storage":{},"detect_scroll_events":{}}
,
"__ccd_em_site_search":{"get_url":{"urlParts":"any","queriesAllowed":"any"},"read_container_data":{}}
,
"__ccd_em_video":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.video"]},"access_template_storage":{},"detect_youtube_activity_events":{"allowFixMissingJavaScriptApi":false}}
,
"__ccd_ga_first":{}
,
"__ccd_ga_last":{}
,
"__ccd_ga_regscope":{"read_container_data":{}}
,
"__e":{"read_event_data":{"eventDataAccess":"specific","keyPatterns":["event"]}}
,
"__ogt_1p_data_v2":{"detect_user_provided_data":{"limitDataSources":true,"allowAutoDataSources":true,"allowManualDataSources":false,"allowCodeDataSources":false}}
,
"__ogt_google_signals":{"read_container_data":{}}
,
"__set_product_settings":{}


}



,"security_groups":{
"google":[
"__c"
,
"__ccd_auto_redact"
,
"__ccd_conversion_marking"
,
"__ccd_em_download"
,
"__ccd_em_form"
,
"__ccd_em_outbound_click"
,
"__ccd_em_page_view"
,
"__ccd_em_scroll"
,
"__ccd_em_site_search"
,
"__ccd_em_video"
,
"__ccd_ga_first"
,
"__ccd_ga_last"
,
"__ccd_ga_regscope"
,
"__e"
,
"__ogt_1p_data_v2"
,
"__ogt_google_signals"
,
"__set_product_settings"

]


}



};




var h,aa=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}},ba=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a},ea=function(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");
},fa=ea(this),ha=function(a,b){if(b)a:{for(var c=fa,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];if(!(f in c))break a;c=c[f]}var g=d[d.length-1],k=c[g],m=b(k);m!=k&&m!=null&&ba(c,g,{configurable:!0,writable:!0,value:m})}};
ha("Symbol",function(a){if(a)return a;var b=function(f,g){this.j=f;ba(this,"description",{configurable:!0,writable:!0,value:g})};b.prototype.toString=function(){return this.j};var c="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",d=0,e=function(f){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new b(c+(f||"")+"_"+d++,f)};return e});var ia=typeof Object.create=="function"?Object.create:function(a){var b=function(){};b.prototype=a;return new b},ka;
if(typeof Object.setPrototypeOf=="function")ka=Object.setPrototypeOf;else{var la;a:{var ma={a:!0},na={};try{na.__proto__=ma;la=na.a;break a}catch(a){}la=!1}ka=la?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}
var qa=ka,ra=function(a,b){a.prototype=ia(b.prototype);a.prototype.constructor=a;if(qa)qa(a,b);else for(var c in b)if(c!="prototype")if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.vo=b.prototype},l=function(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:aa(a)};throw Error(String(a)+" is not an iterable or ArrayLike");},sa=function(a){for(var b,
c=[];!(b=a.next()).done;)c.push(b.value);return c},ta=function(a){return a instanceof Array?a:sa(l(a))},wa=function(a){return va(a,a)},va=function(a,b){a.raw=b;Object.freeze&&(Object.freeze(a),Object.freeze(b));return a},xa=typeof Object.assign=="function"?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(a[e]=d[e])}return a};ha("Object.assign",function(a){return a||xa});
var ya=function(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var za=this||self;var Aa=function(a,b){this.type=a;this.data=b};var Ca=function(){this.map={};this.j={}};h=Ca.prototype;h.get=function(a){return this.map["dust."+a]};h.set=function(a,b){var c="dust."+a;this.j.hasOwnProperty(c)||(this.map[c]=b)};h.Ai=function(a,b){this.set(a,b);this.j["dust."+a]=!0};h.has=function(a){return this.map.hasOwnProperty("dust."+a)};h.remove=function(a){var b="dust."+a;this.j.hasOwnProperty(b)||delete this.map[b]};
var Da=function(a,b){var c=[],d;for(d in a.map)if(a.map.hasOwnProperty(d)){var e=d.substring(5);switch(b){case 1:c.push(e);break;case 2:c.push(a.map[d]);break;case 3:c.push([e,a.map[d]])}}return c};Ca.prototype.na=function(){return Da(this,1)};Ca.prototype.Xb=function(){return Da(this,2)};Ca.prototype.Hb=function(){return Da(this,3)};var Ea=function(){};Ea.prototype.reset=function(){};var Fa=function(a,b){this.K=a;this.parent=b;this.j=this.C=void 0;this.Ac=!1;this.H=function(c,d,e){return c.apply(d,e)};this.values=new Ca};Fa.prototype.add=function(a,b){Ga(this,a,b,!1)};var Ga=function(a,b,c,d){a.Ac||(d?a.values.Ai(b,c):a.values.set(b,c))};Fa.prototype.set=function(a,b){this.Ac||(!this.values.has(a)&&this.parent&&this.parent.has(a)?this.parent.set(a,b):this.values.set(a,b))};
Fa.prototype.get=function(a){return this.values.has(a)?this.values.get(a):this.parent?this.parent.get(a):void 0};Fa.prototype.has=function(a){return!!this.values.has(a)||!(!this.parent||!this.parent.has(a))};var Ha=function(a){var b=new Fa(a.K,a);a.C&&(b.C=a.C);b.H=a.H;b.j=a.j;return b};Fa.prototype.Od=function(){return this.K};Fa.prototype.Ia=function(){this.Ac=!0};function Ia(a,b){for(var c,d=l(b),e=d.next();!e.done&&!(c=Ja(a,e.value),c instanceof Aa);e=d.next());return c}function Ja(a,b){try{var c=l(b),d=c.next().value,e=sa(c),f=a.get(String(d));if(!f||typeof f.invoke!=="function")throw Error("Attempting to execute non-function "+b[0]+".");return f.invoke.apply(f,[a].concat(ta(e)))}catch(k){var g=a.C;g&&g(k,b.context?{id:b[0],line:b.context.line}:null);throw k;}};var Ka=function(){this.C=new Ea;this.j=new Fa(this.C)};h=Ka.prototype;h.Od=function(){return this.C};h.execute=function(a){return this.xi([a].concat(ta(ya.apply(1,arguments))))};h.xi=function(){for(var a,b=l(ya.apply(0,arguments)),c=b.next();!c.done;c=b.next())a=Ja(this.j,c.value);return a};h.Fl=function(a){var b=ya.apply(1,arguments),c=Ha(this.j);c.j=a;for(var d,e=l(b),f=e.next();!f.done;f=e.next())d=Ja(c,f.value);return d};h.Ia=function(){this.j.Ia()};var La=function(){this.oa=!1;this.T=new Ca};h=La.prototype;h.get=function(a){return this.T.get(a)};h.set=function(a,b){this.oa||this.T.set(a,b)};h.has=function(a){return this.T.has(a)};h.Ai=function(a,b){this.oa||this.T.Ai(a,b)};h.remove=function(a){this.oa||this.T.remove(a)};h.na=function(){return this.T.na()};h.Xb=function(){return this.T.Xb()};h.Hb=function(){return this.T.Hb()};h.Ia=function(){this.oa=!0};h.Ac=function(){return this.oa};function Na(){for(var a=Oa,b={},c=0;c<a.length;++c)b[a[c]]=c;return b}function Pa(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";a+=a.toLowerCase()+"0123456789-_";return a+"."}var Oa,Qa;function Ra(a){Oa=Oa||Pa();Qa=Qa||Na();for(var b=[],c=0;c<a.length;c+=3){var d=c+1<a.length,e=c+2<a.length,f=a.charCodeAt(c),g=d?a.charCodeAt(c+1):0,k=e?a.charCodeAt(c+2):0,m=f>>2,n=(f&3)<<4|g>>4,p=(g&15)<<2|k>>6,q=k&63;e||(q=64,d||(p=64));b.push(Oa[m],Oa[n],Oa[p],Oa[q])}return b.join("")}
function Sa(a){function b(m){for(;d<a.length;){var n=a.charAt(d++),p=Qa[n];if(p!=null)return p;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n);}return m}Oa=Oa||Pa();Qa=Qa||Na();for(var c="",d=0;;){var e=b(-1),f=b(0),g=b(64),k=b(64);if(k===64&&e===-1)return c;c+=String.fromCharCode(e<<2|f>>4);g!==64&&(c+=String.fromCharCode(f<<4&240|g>>2),k!==64&&(c+=String.fromCharCode(g<<6&192|k)))}};var Ua={};function Va(a,b){Ua[a]=Ua[a]||[];Ua[a][b]=!0}function Wa(a){var b=Ua[a];if(!b||b.length===0)return"";for(var c=[],d=0,e=0;e<b.length;e++)e%8===0&&e>0&&(c.push(String.fromCharCode(d)),d=0),b[e]&&(d|=1<<e%8);d>0&&c.push(String.fromCharCode(d));return Ra(c.join("")).replace(/\.+$/,"")}function Xa(){for(var a=[],b=Ua.fdr||[],c=0;c<b.length;c++)b[c]&&a.push(c);return a.length>0?a:void 0};function Ya(){}function Za(a){return typeof a==="function"}function z(a){return typeof a==="string"}function $a(a){return typeof a==="number"&&!isNaN(a)}function ab(a){return Array.isArray(a)?a:[a]}function bb(a,b){if(a&&Array.isArray(a))for(var c=0;c<a.length;c++)if(a[c]&&b(a[c]))return a[c]}function db(a,b){if(!$a(a)||!$a(b)||a>b)a=0,b=2147483647;return Math.floor(Math.random()*(b-a+1)+a)}
function eb(a,b){for(var c=new fb,d=0;d<a.length;d++)c.set(a[d],!0);for(var e=0;e<b.length;e++)if(c.get(b[e]))return!0;return!1}function gb(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function hb(a){return!!a&&(Object.prototype.toString.call(a)==="[object Arguments]"||Object.prototype.hasOwnProperty.call(a,"callee"))}function ib(a){return Math.round(Number(a))||0}function jb(a){return"false"===String(a).toLowerCase()?!1:!!a}
function kb(a){var b=[];if(Array.isArray(a))for(var c=0;c<a.length;c++)b.push(String(a[c]));return b}function lb(a){return a?a.replace(/^\s+|\s+$/g,""):""}function mb(){return new Date(Date.now())}function nb(){return mb().getTime()}var fb=function(){this.prefix="gtm.";this.values={}};fb.prototype.set=function(a,b){this.values[this.prefix+a]=b};fb.prototype.get=function(a){return this.values[this.prefix+a]};fb.prototype.contains=function(a){return this.get(a)!==void 0};
function ob(a,b,c){return a&&a.hasOwnProperty(b)?a[b]:c}function pb(a){var b=a;return function(){if(b){var c=b;b=void 0;try{c()}catch(d){}}}}function qb(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function rb(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]),c.push.apply(c,b[a[d]]||[]);return c}function sb(a,b){return a.length>=b.length&&a.substring(0,b.length)===b}function tb(a,b){return a.length>=b.length&&a.substring(a.length-b.length,a.length)===b}
function ub(a,b){var c=A;b=b||[];for(var d=c,e=0;e<a.length-1;e++){if(!d.hasOwnProperty(a[e]))return;d=d[a[e]];if(b.indexOf(d)>=0)return}return d}function vb(a,b){for(var c={},d=c,e=a.split("."),f=0;f<e.length-1;f++)d=d[e[f]]={};d[e[e.length-1]]=b;return c}var wb=/^\w{1,9}$/;function xb(a,b){a=a||{};b=b||",";var c=[];gb(a,function(d,e){wb.test(d)&&e&&c.push(d)});return c.join(b)}function yb(a,b){function c(){e&&++d===b&&(e(),e=null,c.done=!0)}var d=0,e=a;c.done=!1;return c}
function zb(a){if(!a)return a;var b=a;try{b=decodeURIComponent(a)}catch(d){}var c=b.split(",");return c.length===2&&c[0]===c[1]?c[0]:a}
function Ab(a,b,c){function d(n){var p=n.split("=")[0];if(a.indexOf(p)<0)return n;if(c!==void 0)return p+"="+c}function e(n){return n.split("&").map(d).filter(function(p){return p!==void 0}).join("&")}var f=b.href.split(/[?#]/)[0],g=b.search,k=b.hash;g[0]==="?"&&(g=g.substring(1));k[0]==="#"&&(k=k.substring(1));g=e(g);k=e(k);g!==""&&(g="?"+g);k!==""&&(k="#"+k);var m=""+f+g+k;m[m.length-1]==="/"&&(m=m.substring(0,m.length-1));return m}
function Bb(a){for(var b=0;b<3;++b)try{var c=decodeURIComponent(a).replace(/\+/g," ");if(c===a)break;a=c}catch(d){return""}return a};/*

 Copyright Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
var Cb=globalThis.trustedTypes,Db;function Eb(){var a=null;if(!Cb)return a;try{var b=function(c){return c};a=Cb.createPolicy("goog#html",{createHTML:b,createScript:b,createScriptURL:b})}catch(c){}return a}function Fb(){Db===void 0&&(Db=Eb());return Db};var Gb=function(a){this.j=a};Gb.prototype.toString=function(){return this.j+""};function Hb(a){var b=a,c=Fb();return new Gb(c?c.createScriptURL(b):b)}function Ib(a){if(a instanceof Gb)return a.j;throw Error("");};var Jb=wa([""]),Kb=va(["\x00"],["\\0"]),Lb=va(["\n"],["\\n"]),Mb=va(["\x00"],["\\u0000"]);function Nb(a){return a.toString().indexOf("`")===-1}Nb(function(a){return a(Jb)})||Nb(function(a){return a(Kb)})||Nb(function(a){return a(Lb)})||Nb(function(a){return a(Mb)});var Ob=function(a){this.j=a};Ob.prototype.toString=function(){return this.j};var Pb=function(a){this.Tm=a};function Qb(a){return new Pb(function(b){return b.substr(0,a.length+1).toLowerCase()===a+":"})}var Rb=[Qb("data"),Qb("http"),Qb("https"),Qb("mailto"),Qb("ftp"),new Pb(function(a){return/^[^:]*([/?#]|$)/.test(a)})];function Sb(a){var b;b=b===void 0?Rb:b;if(a instanceof Ob)return a;for(var c=0;c<b.length;++c){var d=b[c];if(d instanceof Pb&&d.Tm(a))return new Ob(a)}}var Tb=/^\s*(?!javascript:)(?:[\w+.-]+:|[^:/?#]*(?:[/?#]|$))/i;
function Ub(a){var b;if(a instanceof Ob)if(a instanceof Ob)b=a.j;else throw Error("");else b=Tb.test(a)?a:void 0;return b};var Wb=function(){this.j=Vb[0].toLowerCase()};Wb.prototype.toString=function(){return this.j};var Xb=function(a){this.j=a};Xb.prototype.toString=function(){return this.j+""};function Yb(a,b){var c=[new Wb];if(c.length===0)throw Error("");var d=c.map(function(f){var g;if(f instanceof Wb)g=f.j;else throw Error("");return g}),e=b.toLowerCase();if(d.every(function(f){return e.indexOf(f)!==0}))throw Error('Attribute "'+b+'" does not match any of the allowed prefixes.');a.setAttribute(b,"true")};function Zb(a,b){var c=Ub(b);c!==void 0&&(a.action=c)};var $b=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(typeof a==="string")return typeof b!=="string"||b.length!=1?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};"ARTICLE SECTION NAV ASIDE H1 H2 H3 H4 H5 H6 HEADER FOOTER ADDRESS P HR PRE BLOCKQUOTE OL UL LH LI DL DT DD FIGURE FIGCAPTION MAIN DIV EM STRONG SMALL S CITE Q DFN ABBR RUBY RB RT RTC RP DATA TIME CODE VAR SAMP KBD SUB SUP I B U MARK BDI BDO SPAN BR WBR NOBR INS DEL PICTURE PARAM TRACK MAP TABLE CAPTION COLGROUP COL TBODY THEAD TFOOT TR TD TH SELECT DATALIST OPTGROUP OPTION OUTPUT PROGRESS METER FIELDSET LEGEND DETAILS SUMMARY MENU DIALOG SLOT CANVAS FONT CENTER ACRONYM BASEFONT BIG DIR HGROUP STRIKE TT".split(" ").concat(["BUTTON",
"INPUT"]);function ac(a){return a===null?"null":a===void 0?"undefined":a};var A=window,bc=window.history,E=document,cc=navigator;function dc(){var a;try{a=cc.serviceWorker}catch(b){return}return a}var ec=E.currentScript,fc=ec&&ec.src;function gc(a,b){var c=A[a];A[a]=c===void 0?b:c;return A[a]}function hc(a){return(cc.userAgent||"").indexOf(a)!==-1}var ic={async:1,nonce:1,onerror:1,onload:1,src:1,type:1},jc={onload:1,src:1,width:1,height:1,style:1};function kc(a,b,c){b&&gb(b,function(d,e){d=d.toLowerCase();c.hasOwnProperty(d)||a.setAttribute(d,e)})}
function lc(a,b,c,d,e){var f=E.createElement("script");kc(f,d,ic);f.type="text/javascript";f.async=d&&d.async===!1?!1:!0;var g;g=Hb(ac(a));f.src=Ib(g);var k,m=f.ownerDocument;m=m===void 0?document:m;var n,p,q=(p=(n="document"in m?m.document:m).querySelector)==null?void 0:p.call(n,"script[nonce]");(k=q==null?"":q.nonce||q.getAttribute("nonce")||"")&&f.setAttribute("nonce",k);b&&(f.onload=b);c&&(f.onerror=c);if(e)e.appendChild(f);else{var r=E.getElementsByTagName("script")[0]||E.body||E.head;r.parentNode.insertBefore(f,
r)}return f}function mc(){if(fc){var a=fc.toLowerCase();if(a.indexOf("https://")===0)return 2;if(a.indexOf("http://")===0)return 3}return 1}function nc(a,b,c,d,e){var f;f=f===void 0?!0:f;var g=e,k=!1;g||(g=E.createElement("iframe"),k=!0);kc(g,c,jc);d&&gb(d,function(n,p){g.dataset[n]=p});f&&(g.height="0",g.width="0",g.style.display="none",g.style.visibility="hidden");a!==void 0&&(g.src=a);if(k){var m=E.body&&E.body.lastChild||E.body||E.head;m.parentNode.insertBefore(g,m)}b&&(g.onload=b);return g}
function oc(a,b,c,d){pc(a,b,c,d)}function qc(a,b,c,d){a.addEventListener&&a.addEventListener(b,c,!!d)}function rc(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}function H(a){A.setTimeout(a,0)}function sc(a,b){return a&&b&&a.attributes&&a.attributes[b]?a.attributes[b].value:null}function tc(a){var b=a.innerText||a.textContent||"";b&&b!==" "&&(b=b.replace(/^[\s\xa0]+/g,""),b=b.replace(/[\s\xa0]+$/g,""));b&&(b=b.replace(/(\xa0+|\s{2,}|\n|\r\t)/g," "));return b}
function uc(a){var b=E.createElement("div"),c=b,d,e=ac("A<div>"+a+"</div>"),f=Fb();d=new Xb(f?f.createHTML(e):e);if(c.nodeType===1&&/^(script|style)$/i.test(c.tagName))throw Error("");var g;if(d instanceof Xb)g=d.j;else throw Error("");c.innerHTML=g;b=b.lastChild;for(var k=[];b&&b.firstChild;)k.push(b.removeChild(b.firstChild));return k}
function vc(a,b,c){c=c||100;for(var d={},e=0;e<b.length;e++)d[b[e]]=!0;for(var f=a,g=0;f&&g<=c;g++){if(d[String(f.tagName).toLowerCase()])return f;f=f.parentElement}return null}function wc(a,b,c){var d;try{d=cc.sendBeacon&&cc.sendBeacon(a)}catch(e){Va("TAGGING",15)}d?b==null||b():pc(a,b,c)}function xc(a,b){try{return cc.sendBeacon(a,b)}catch(c){Va("TAGGING",15)}return!1}var yc={cache:"no-store",credentials:"include",keepalive:!0,method:"POST",mode:"no-cors",redirect:"follow"};
function zc(a,b,c,d,e){if(Ac()){var f=Object.assign({},yc);b&&(f.body=b);c&&(c.attributionReporting&&(f.attributionReporting=c.attributionReporting),c.browsingTopics&&(f.browsingTopics=c.browsingTopics),c.credentials&&(f.credentials=c.credentials));try{var g=A.fetch(a,f);if(g)return g.then(function(m){m&&(m.ok||m.status===0)?d==null||d():e==null||e()}).catch(function(){e==null||e()}),!0}catch(m){}}if(c&&c.Fk)return e==null||e(),!1;if(b){var k=xc(a,b);k?d==null||d():e==null||e();return k}wc(a,d,e);
return!0}function Ac(){return typeof A.fetch==="function"}function Bc(a,b){var c=a[b];c&&typeof c.animVal==="string"&&(c=c.animVal);return c}function Cc(){var a=A.performance;if(a&&Za(a.now))return a.now()}
function Dc(){var a,b=A.performance;if(b&&b.getEntriesByType)try{var c=b.getEntriesByType("navigation");c&&c.length>0&&(a=c[0].type)}catch(d){return"e"}if(!a)return"u";switch(a){case "navigate":return"n";case "back_forward":return"h";case "reload":return"r";case "prerender":return"p";default:return"x"}}function Ec(){return A.performance||void 0}function Fc(){var a=A.webPixelsManager;return a?a.createShopifyExtend!==void 0:!1}
var pc=function(a,b,c,d){var e=new Image(1,1);kc(e,d,{});e.onload=function(){e.onload=null;b&&b()};e.onerror=function(){e.onerror=null;c&&c()};e.src=a;return e};function Gc(a,b){return this.evaluate(a)&&this.evaluate(b)}function Ic(a,b){return this.evaluate(a)===this.evaluate(b)}function Jc(a,b){return this.evaluate(a)||this.evaluate(b)}function Kc(a,b){a=this.evaluate(a);b=this.evaluate(b);return String(a).indexOf(String(b))>-1}function Lc(a,b){var c=String(this.evaluate(a)),d=String(this.evaluate(b));return c.substring(0,d.length)===d}
function Mc(a,b){a=this.evaluate(a);b=this.evaluate(b);switch(a){case "pageLocation":var c=A.location.href;b instanceof La&&b.get("stripProtocol")&&(c=c.replace(/^https?:\/\//,""));return c}};/*
 jQuery (c) 2005, 2012 jQuery Foundation, Inc. jquery.org/license.
*/
var Nc=/\[object (Boolean|Number|String|Function|Array|Date|RegExp)\]/,Oc=function(a){if(a==null)return String(a);var b=Nc.exec(Object.prototype.toString.call(Object(a)));return b?b[1].toLowerCase():"object"},Pc=function(a,b){return Object.prototype.hasOwnProperty.call(Object(a),b)},Qc=function(a){if(!a||Oc(a)!="object"||a.nodeType||a==a.window)return!1;try{if(a.constructor&&!Pc(a,"constructor")&&!Pc(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var b in a);return b===void 0||
Pc(a,b)},Rc=function(a,b){var c=b||(Oc(a)=="array"?[]:{}),d;for(d in a)if(Pc(a,d)){var e=a[d];Oc(e)=="array"?(Oc(c[d])!="array"&&(c[d]=[]),c[d]=Rc(e,c[d])):Qc(e)?(Qc(c[d])||(c[d]={}),c[d]=Rc(e,c[d])):c[d]=e}return c};function Sc(a){if(a==void 0||Array.isArray(a)||Qc(a))return!0;switch(typeof a){case "boolean":case "number":case "string":case "function":return!0}return!1}function Tc(a){return typeof a==="number"&&a>=0&&isFinite(a)&&a%1===0||typeof a==="string"&&a[0]!=="-"&&a===""+parseInt(a)};var Uc=function(a){a=a===void 0?[]:a;this.T=new Ca;this.values=[];this.oa=!1;for(var b in a)a.hasOwnProperty(b)&&(Tc(b)?this.values[Number(b)]=a[Number(b)]:this.T.set(b,a[b]))};h=Uc.prototype;h.toString=function(a){if(a&&a.indexOf(this)>=0)return"";for(var b=[],c=0;c<this.values.length;c++){var d=this.values[c];d===null||d===void 0?b.push(""):d instanceof Uc?(a=a||[],a.push(this),b.push(d.toString(a)),a.pop()):b.push(String(d))}return b.join(",")};
h.set=function(a,b){if(!this.oa)if(a==="length"){if(!Tc(b))throw Error("RangeError: Length property must be a valid integer.");this.values.length=Number(b)}else Tc(a)?this.values[Number(a)]=b:this.T.set(a,b)};h.get=function(a){return a==="length"?this.length():Tc(a)?this.values[Number(a)]:this.T.get(a)};h.length=function(){return this.values.length};h.na=function(){for(var a=this.T.na(),b=0;b<this.values.length;b++)this.values.hasOwnProperty(b)&&a.push(String(b));return a};
h.Xb=function(){for(var a=this.T.Xb(),b=0;b<this.values.length;b++)this.values.hasOwnProperty(b)&&a.push(this.values[b]);return a};h.Hb=function(){for(var a=this.T.Hb(),b=0;b<this.values.length;b++)this.values.hasOwnProperty(b)&&a.push([String(b),this.values[b]]);return a};h.remove=function(a){Tc(a)?delete this.values[Number(a)]:this.oa||this.T.remove(a)};h.pop=function(){return this.values.pop()};h.push=function(){return this.values.push.apply(this.values,ta(ya.apply(0,arguments)))};h.shift=function(){return this.values.shift()};
h.splice=function(a,b){var c=ya.apply(2,arguments);return b===void 0&&c.length===0?new Uc(this.values.splice(a)):new Uc(this.values.splice.apply(this.values,[a,b||0].concat(ta(c))))};h.unshift=function(){return this.values.unshift.apply(this.values,ta(ya.apply(0,arguments)))};h.has=function(a){return Tc(a)&&this.values.hasOwnProperty(a)||this.T.has(a)};h.Ia=function(){this.oa=!0;Object.freeze(this.values)};h.Ac=function(){return this.oa};
function Vc(a){for(var b=[],c=0;c<a.length();c++)a.has(c)&&(b[c]=a.get(c));return b};var Wc=function(a,b){this.functionName=a;this.Nd=b;this.T=new Ca;this.oa=!1};h=Wc.prototype;h.toString=function(){return this.functionName};h.getName=function(){return this.functionName};h.invoke=function(a){return this.Nd.call.apply(this.Nd,[new Xc(this,a)].concat(ta(ya.apply(1,arguments))))};h.tb=function(a){var b=ya.apply(1,arguments);try{return this.invoke.apply(this,[a].concat(ta(b)))}catch(c){}};h.get=function(a){return this.T.get(a)};h.set=function(a,b){this.oa||this.T.set(a,b)};h.has=function(a){return this.T.has(a)};
h.remove=function(a){this.oa||this.T.remove(a)};h.na=function(){return this.T.na()};h.Xb=function(){return this.T.Xb()};h.Hb=function(){return this.T.Hb()};h.Ia=function(){this.oa=!0};h.Ac=function(){return this.oa};var Xc=function(a,b){this.Nd=a;this.D=b};Xc.prototype.evaluate=function(a){var b=this.D;return Array.isArray(a)?Ja(b,a):a};Xc.prototype.getName=function(){return this.Nd.getName()};Xc.prototype.Od=function(){return this.D.Od()};var Yc=function(){this.map=new Map};Yc.prototype.set=function(a,b){this.map.set(a,b)};Yc.prototype.get=function(a){return this.map.get(a)};var Zc=function(){this.keys=[];this.values=[]};Zc.prototype.set=function(a,b){this.keys.push(a);this.values.push(b)};Zc.prototype.get=function(a){var b=this.keys.indexOf(a);if(b>-1)return this.values[b]};function $c(){try{return Map?new Yc:new Zc}catch(a){return new Zc}};var ad=function(a){if(a instanceof ad)return a;if(Sc(a))throw Error("Type of given value has an equivalent Pixie type.");this.value=a};ad.prototype.getValue=function(){return this.value};ad.prototype.toString=function(){return String(this.value)};var cd=function(a){this.promise=a;this.oa=!1;this.T=new Ca;this.T.set("then",bd(this));this.T.set("catch",bd(this,!0));this.T.set("finally",bd(this,!1,!0))};h=cd.prototype;h.get=function(a){return this.T.get(a)};h.set=function(a,b){this.oa||this.T.set(a,b)};h.has=function(a){return this.T.has(a)};h.remove=function(a){this.oa||this.T.remove(a)};h.na=function(){return this.T.na()};h.Xb=function(){return this.T.Xb()};h.Hb=function(){return this.T.Hb()};
var bd=function(a,b,c){b=b===void 0?!1:b;c=c===void 0?!1:c;return new Wc("",function(d,e){b&&(e=d,d=void 0);c&&(e=d);d instanceof Wc||(d=void 0);e instanceof Wc||(e=void 0);var f=Ha(this.D),g=function(m){return function(n){return c?(m.invoke(f),a.promise):m.invoke(f,n)}},k=a.promise.then(d&&g(d),e&&g(e));return new cd(k)})};cd.prototype.Ia=function(){this.oa=!0};cd.prototype.Ac=function(){return this.oa};function I(a,b,c){var d=$c(),e=function(g,k){for(var m=g.na(),n=0;n<m.length;n++)k[m[n]]=f(g.get(m[n]))},f=function(g){if(g===null||g===void 0)return g;var k=d.get(g);if(k)return k;if(g instanceof Uc){var m=[];d.set(g,m);for(var n=g.na(),p=0;p<n.length;p++)m[n[p]]=f(g.get(n[p]));return m}if(g instanceof cd)return g.promise;if(g instanceof La){var q={};d.set(g,q);e(g,q);return q}if(g instanceof Wc){var r=function(){for(var v=ya.apply(0,arguments),t=[],w=0;w<v.length;w++)t[w]=dd(v[w],b,c);var x=new Fa(b?
b.Od():new Ea);b&&(x.j=b.j);return f(g.invoke.apply(g,[x].concat(ta(t))))};d.set(g,r);e(g,r);return r}var u=!1;switch(c){case 1:u=!0;break;case 2:u=!1;break;case 3:u=!1;break;default:}if(g instanceof ad&&u)return g.getValue();switch(typeof g){case "boolean":case "number":case "string":case "undefined":return g;case "object":if(g===null)return null}};return f(a)}
function dd(a,b,c){var d=$c(),e=function(g,k){for(var m in g)g.hasOwnProperty(m)&&k.set(m,f(g[m]))},f=function(g){var k=d.get(g);if(k)return k;if(Array.isArray(g)||hb(g)){var m=new Uc([]);d.set(g,m);for(var n in g)g.hasOwnProperty(n)&&m.set(n,f(g[n]));return m}if(Qc(g)){var p=new La;d.set(g,p);e(g,p);return p}if(typeof g==="function"){var q=new Wc("",function(){for(var x=ya.apply(0,arguments),y=0;y<x.length;y++)x[y]=I(this.evaluate(x[y]),b,c);return f((0,this.D.H)(g,g,x))});d.set(g,q);e(g,q);return q}var t=typeof g;if(g===null||t==="string"||t==="number"||t==="boolean")return g;var w=!1;switch(c){case 1:w=!0;break;case 2:w=!1;break;default:}if(g!==void 0&&w)return new ad(g)};return f(a)};function ed(){var a=!1;return a};var fd={supportedMethods:"concat every filter forEach hasOwnProperty indexOf join lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift toString".split(" "),concat:function(a){for(var b=[],c=0;c<this.length();c++)b.push(this.get(c));for(var d=1;d<arguments.length;d++)if(arguments[d]instanceof Uc)for(var e=arguments[d],f=0;f<e.length();f++)b.push(e.get(f));else b.push(arguments[d]);return new Uc(b)},every:function(a,b){for(var c=this.length(),d=0;d<this.length()&&
d<c;d++)if(this.has(d)&&!b.invoke(a,this.get(d),d,this))return!1;return!0},filter:function(a,b){for(var c=this.length(),d=[],e=0;e<this.length()&&e<c;e++)this.has(e)&&b.invoke(a,this.get(e),e,this)&&d.push(this.get(e));return new Uc(d)},forEach:function(a,b){for(var c=this.length(),d=0;d<this.length()&&d<c;d++)this.has(d)&&b.invoke(a,this.get(d),d,this)},hasOwnProperty:function(a,b){return this.has(b)},indexOf:function(a,b,c){var d=this.length(),e=c===void 0?0:Number(c);e<0&&(e=Math.max(d+e,0));for(var f=
e;f<d;f++)if(this.has(f)&&this.get(f)===b)return f;return-1},join:function(a,b){for(var c=[],d=0;d<this.length();d++)c.push(this.get(d));return c.join(b)},lastIndexOf:function(a,b,c){var d=this.length(),e=d-1;c!==void 0&&(e=c<0?d+c:Math.min(c,e));for(var f=e;f>=0;f--)if(this.has(f)&&this.get(f)===b)return f;return-1},map:function(a,b){for(var c=this.length(),d=[],e=0;e<this.length()&&e<c;e++)this.has(e)&&(d[e]=b.invoke(a,this.get(e),e,this));return new Uc(d)},pop:function(){return this.pop()},push:function(a){return this.push.apply(this,
ta(ya.apply(1,arguments)))},reduce:function(a,b,c){var d=this.length(),e,f=0;if(c!==void 0)e=c;else{if(d===0)throw Error("TypeError: Reduce on List with no elements.");for(var g=0;g<d;g++)if(this.has(g)){e=this.get(g);f=g+1;break}if(g===d)throw Error("TypeError: Reduce on List with no elements.");}for(var k=f;k<d;k++)this.has(k)&&(e=b.invoke(a,e,this.get(k),k,this));return e},reduceRight:function(a,b,c){var d=this.length(),e,f=d-1;if(c!==void 0)e=c;else{if(d===0)throw Error("TypeError: ReduceRight on List with no elements.");
for(var g=1;g<=d;g++)if(this.has(d-g)){e=this.get(d-g);f=d-(g+1);break}if(g>d)throw Error("TypeError: ReduceRight on List with no elements.");}for(var k=f;k>=0;k--)this.has(k)&&(e=b.invoke(a,e,this.get(k),k,this));return e},reverse:function(){for(var a=Vc(this),b=a.length-1,c=0;b>=0;b--,c++)a.hasOwnProperty(b)?this.set(c,a[b]):this.remove(c);return this},shift:function(){return this.shift()},slice:function(a,b,c){var d=this.length();b===void 0&&(b=0);b=b<0?Math.max(d+b,0):Math.min(b,d);c=c===void 0?
d:c<0?Math.max(d+c,0):Math.min(c,d);c=Math.max(b,c);for(var e=[],f=b;f<c;f++)e.push(this.get(f));return new Uc(e)},some:function(a,b){for(var c=this.length(),d=0;d<this.length()&&d<c;d++)if(this.has(d)&&b.invoke(a,this.get(d),d,this))return!0;return!1},sort:function(a,b){var c=Vc(this);b===void 0?c.sort():c.sort(function(e,f){return Number(b.invoke(a,e,f))});for(var d=0;d<c.length;d++)c.hasOwnProperty(d)?this.set(d,c[d]):this.remove(d);return this},splice:function(a,b,c){return this.splice.apply(this,
[b,c].concat(ta(ya.apply(3,arguments))))},toString:function(){return this.toString()},unshift:function(a){return this.unshift.apply(this,ta(ya.apply(1,arguments)))}};var gd=function(a){var b;b=Error.call(this,a);this.message=b.message;"stack"in b&&(this.stack=b.stack)};ra(gd,Error);var hd={charAt:1,concat:1,indexOf:1,lastIndexOf:1,match:1,replace:1,search:1,slice:1,split:1,substring:1,toLowerCase:1,toLocaleLowerCase:1,toString:1,toUpperCase:1,toLocaleUpperCase:1,trim:1},id=new Aa("break"),jd=new Aa("continue");function kd(a,b){return this.evaluate(a)+this.evaluate(b)}function ld(a,b){return this.evaluate(a)&&this.evaluate(b)}
function md(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);if(!(c instanceof Uc))throw Error("Error: Non-List argument given to Apply instruction.");if(a===null||a===void 0){var d="TypeError: Can't read property "+b+" of "+a+".";if(ed())throw new gd(d);throw Error(d);}var e=typeof a==="number";if(typeof a==="boolean"||e){if(b==="toString"){if(e&&c.length()){var f=I(c.get(0));try{return a.toString(f)}catch(y){}}return a.toString()}var g="TypeError: "+a+"."+b+" is not a function.";
if(ed())throw new gd(g);throw Error(g);}if(typeof a==="string"){if(hd.hasOwnProperty(b)){var k=2;k=1;var m=I(c,void 0,k);return dd(a[b].apply(a,m),this.D)}var n="TypeError: "+b+" is not a function";if(ed())throw new gd(n);throw Error(n);}if(a instanceof Uc){if(a.has(b)){var p=a.get(String(b));if(p instanceof Wc){var q=Vc(c);return p.invoke.apply(p,[this.D].concat(ta(q)))}var r=
"TypeError: "+b+" is not a function";if(ed())throw new gd(r);throw Error(r);}if(fd.supportedMethods.indexOf(b)>=0){var u=Vc(c);return fd[b].call.apply(fd[b],[a,this.D].concat(ta(u)))}}if(a instanceof Wc||a instanceof La||a instanceof cd){if(a.has(b)){var v=a.get(b);if(v instanceof Wc){var t=Vc(c);return v.invoke.apply(v,[this.D].concat(ta(t)))}var w="TypeError: "+b+" is not a function";if(ed())throw new gd(w);throw Error(w);}if(b==="toString")return a instanceof Wc?a.getName():a.toString();if(b===
"hasOwnProperty")return a.has(c.get(0))}if(a instanceof ad&&b==="toString")return a.toString();var x="TypeError: Object has no '"+b+"' property.";if(ed())throw new gd(x);throw Error(x);}function nd(a,b){a=this.evaluate(a);if(typeof a!=="string")throw Error("Invalid key name given for assignment.");var c=this.D;if(!c.has(a))throw Error("Attempting to assign to undefined value "+b);var d=this.evaluate(b);c.set(a,d);return d}
function od(){var a=ya.apply(0,arguments),b=Ha(this.D),c=Ia(b,a);if(c instanceof Aa)return c}function pd(){return id}function qd(a){for(var b=this.evaluate(a),c=0;c<b.length;c++){var d=this.evaluate(b[c]);if(d instanceof Aa)return d}}function rd(){for(var a=this.D,b=0;b<arguments.length-1;b+=2){var c=arguments[b];if(typeof c==="string"){var d=this.evaluate(arguments[b+1]);Ga(a,c,d,!0)}}}function sd(){return jd}function td(a,b){return new Aa(a,this.evaluate(b))}
function ud(a,b){var c=ya.apply(2,arguments),d=new Uc;b=this.evaluate(b);for(var e=0;e<b.length;e++)d.push(b[e]);var f=[51,a,d].concat(ta(c));this.D.add(a,this.evaluate(f))}function vd(a,b){return this.evaluate(a)/this.evaluate(b)}function wd(a,b){a=this.evaluate(a);b=this.evaluate(b);var c=a instanceof ad,d=b instanceof ad;return c||d?c&&d?a.getValue()===b.getValue():!1:a==b}function xd(){for(var a,b=0;b<arguments.length;b++)a=this.evaluate(arguments[b]);return a}
function yd(a,b,c,d){for(var e=0;e<b();e++){var f=a(c(e)),g=Ia(f,d);if(g instanceof Aa){if(g.type==="break")break;if(g.type==="return")return g}}}function zd(a,b,c){if(typeof b==="string")return yd(a,function(){return b.length},function(f){return f},c);if(b instanceof La||b instanceof cd||b instanceof Uc||b instanceof Wc){var d=b.na(),e=d.length;return yd(a,function(){return e},function(f){return d[f]},c)}}
function Ad(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);var d=this.D;return zd(function(e){d.set(a,e);return d},b,c)}function Bd(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);var d=this.D;return zd(function(e){var f=Ha(d);Ga(f,a,e,!0);return f},b,c)}function Cd(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);var d=this.D;return zd(function(e){var f=Ha(d);f.add(a,e);return f},b,c)}
function Dd(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);var d=this.D;return Ed(function(e){d.set(a,e);return d},b,c)}function Fd(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);var d=this.D;return Ed(function(e){var f=Ha(d);Ga(f,a,e,!0);return f},b,c)}function Gd(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);var d=this.D;return Ed(function(e){var f=Ha(d);f.add(a,e);return f},b,c)}
function Ed(a,b,c){if(typeof b==="string")return yd(a,function(){return b.length},function(d){return b[d]},c);if(b instanceof Uc)return yd(a,function(){return b.length()},function(d){return b.get(d)},c);if(ed())throw new gd("The value is not iterable.");throw new TypeError("The value is not iterable.");}
function Hd(a,b,c,d){function e(p,q){for(var r=0;r<f.length();r++){var u=f.get(r);q.add(u,p.get(u))}}var f=this.evaluate(a);if(!(f instanceof Uc))throw Error("TypeError: Non-List argument given to ForLet instruction.");var g=this.D;d=this.evaluate(d);var k=Ha(g);for(e(g,k);Ja(k,b);){var m=Ia(k,d);if(m instanceof Aa){if(m.type==="break")break;if(m.type==="return")return m}var n=Ha(g);e(k,n);Ja(n,c);k=n}}
function Id(a,b){var c=ya.apply(2,arguments),d=this.D,e=this.evaluate(b);if(!(e instanceof Uc))throw Error("Error: non-List value given for Fn argument names.");return new Wc(a,function(){return function(){var f=ya.apply(0,arguments),g=Ha(d);g.j===void 0&&(g.j=this.D.j);for(var k=0;k<f.length;k++)if(f[k]=this.evaluate(f[k]),f[k]instanceof Aa)return f[k];for(var m=e.get("length"),n=0;n<m;n++)n<f.length?g.add(e.get(n),f[n]):g.add(e.get(n),void 0);g.add("arguments",new Uc(f));var p=Ia(g,c);if(p instanceof
Aa)return p.type==="return"?p.data:p}}())}function Jd(a){a=this.evaluate(a);var b=this.D;if(Kd&&!b.has(a))throw new ReferenceError(a+" is not defined.");return b.get(a)}
function Ld(a,b){var c;a=this.evaluate(a);b=this.evaluate(b);if(a===void 0||a===null){var d="TypeError: Cannot read properties of "+a+" (reading '"+b+"')";if(ed())throw new gd(d);throw Error(d);}if(a instanceof La||a instanceof cd||a instanceof Uc||a instanceof Wc)c=a.get(b);else if(typeof a==="string")b==="length"?c=a.length:Tc(b)&&(c=a[b]);else if(a instanceof ad)return;return c}function Md(a,b){return this.evaluate(a)>this.evaluate(b)}
function Nd(a,b){return this.evaluate(a)>=this.evaluate(b)}function Od(a,b){a=this.evaluate(a);b=this.evaluate(b);a instanceof ad&&(a=a.getValue());b instanceof ad&&(b=b.getValue());return a===b}function Pd(a,b){return!Od.call(this,a,b)}function Qd(a,b,c){var d=[];this.evaluate(a)?d=this.evaluate(b):c&&(d=this.evaluate(c));var e=Ia(this.D,d);if(e instanceof Aa)return e}var Kd=!1;
function Rd(a,b){return this.evaluate(a)<this.evaluate(b)}function Sd(a,b){return this.evaluate(a)<=this.evaluate(b)}function Td(){for(var a=new Uc,b=0;b<arguments.length;b++){var c=this.evaluate(arguments[b]);a.push(c)}return a}function Ud(){for(var a=new La,b=0;b<arguments.length-1;b+=2){var c=this.evaluate(arguments[b])+"",d=this.evaluate(arguments[b+1]);a.set(c,d)}return a}function Vd(a,b){return this.evaluate(a)%this.evaluate(b)}function Wd(a,b){return this.evaluate(a)*this.evaluate(b)}
function Xd(a){return-this.evaluate(a)}function Yd(a){return!this.evaluate(a)}function Zd(a,b){return!wd.call(this,a,b)}function $d(){return null}function ae(a,b){return this.evaluate(a)||this.evaluate(b)}function be(a,b){var c=this.evaluate(a);this.evaluate(b);return c}function ce(a){return this.evaluate(a)}function de(){return ya.apply(0,arguments)}function ee(a){return new Aa("return",this.evaluate(a))}
function fe(a,b,c){a=this.evaluate(a);b=this.evaluate(b);c=this.evaluate(c);if(a===null||a===void 0){var d="TypeError: Can't set property "+b+" of "+a+".";if(ed())throw new gd(d);throw Error(d);}(a instanceof Wc||a instanceof Uc||a instanceof La)&&a.set(String(b),c);return c}function ge(a,b){return this.evaluate(a)-this.evaluate(b)}
function he(a,b,c){a=this.evaluate(a);var d=this.evaluate(b),e=this.evaluate(c);if(!Array.isArray(d)||!Array.isArray(e))throw Error("Error: Malformed switch instruction.");for(var f,g=!1,k=0;k<d.length;k++)if(g||a===this.evaluate(d[k]))if(f=this.evaluate(e[k]),f instanceof Aa){var m=f.type;if(m==="break")return;if(m==="return"||m==="continue")return f}else g=!0;if(e.length===d.length+1&&(f=this.evaluate(e[e.length-1]),f instanceof Aa&&(f.type==="return"||f.type==="continue")))return f}
function ie(a,b,c){return this.evaluate(a)?this.evaluate(b):this.evaluate(c)}function je(a){a=this.evaluate(a);return a instanceof Wc?"function":typeof a}function ke(){for(var a=this.D,b=0;b<arguments.length;b++){var c=arguments[b];typeof c!=="string"||a.add(c,void 0)}}
function le(a,b,c,d){var e=this.evaluate(d);if(this.evaluate(c)){var f=Ia(this.D,e);if(f instanceof Aa){if(f.type==="break")return;if(f.type==="return")return f}}for(;this.evaluate(a);){var g=Ia(this.D,e);if(g instanceof Aa){if(g.type==="break")break;if(g.type==="return")return g}this.evaluate(b)}}function me(a){return~Number(this.evaluate(a))}function ne(a,b){return Number(this.evaluate(a))<<Number(this.evaluate(b))}function oe(a,b){return Number(this.evaluate(a))>>Number(this.evaluate(b))}
function pe(a,b){return Number(this.evaluate(a))>>>Number(this.evaluate(b))}function qe(a,b){return Number(this.evaluate(a))&Number(this.evaluate(b))}function re(a,b){return Number(this.evaluate(a))^Number(this.evaluate(b))}function se(a,b){return Number(this.evaluate(a))|Number(this.evaluate(b))}function te(){}
function ue(a,b,c,d,e){var f=!0;try{var g=this.evaluate(c);if(g instanceof Aa)return g}catch(r){if(!(r instanceof gd&&a))throw f=r instanceof gd,r;var k=Ha(this.D),m=new ad(r);k.add(b,m);var n=this.evaluate(d),p=Ia(k,n);if(p instanceof Aa)return p}finally{if(f&&e!==void 0){var q=this.evaluate(e);if(q instanceof Aa)return q}}};var we=function(){this.j=new Ka;ve(this)};we.prototype.execute=function(a){return this.j.xi(a)};var ve=function(a){var b=function(c,d){var e=new Wc(String(c),d);e.Ia();a.j.j.set(String(c),e)};b("map",Ud);b("and",Gc);b("contains",Kc);b("equals",Ic);b("or",Jc);b("startsWith",Lc);b("variable",Mc)};var ye=function(){this.C=!1;this.j=new Ka;xe(this);this.C=!0};ye.prototype.execute=function(a){return ze(this.j.xi(a))};var Ae=function(a,b,c){return ze(a.j.Fl(b,c))};ye.prototype.Ia=function(){this.j.Ia()};
var xe=function(a){var b=function(c,d){var e=String(c),f=new Wc(e,d);f.Ia();a.j.j.set(e,f)};b(0,kd);b(1,ld);b(2,md);b(3,nd);b(56,qe);b(57,ne);b(58,me);b(59,se);b(60,oe);b(61,pe);b(62,re);b(53,od);b(4,pd);b(5,qd);b(52,rd);b(6,sd);b(49,td);b(7,Td);b(8,Ud);b(9,qd);b(50,ud);b(10,vd);b(12,wd);b(13,xd);b(51,Id);b(47,Ad);b(54,Bd);b(55,Cd);b(63,Hd);b(64,Dd);b(65,Fd);b(66,Gd);b(15,Jd);b(16,Ld);b(17,Ld);b(18,Md);b(19,Nd);b(20,Od);b(21,Pd);b(22,Qd);b(23,Rd);b(24,Sd);b(25,Vd);b(26,Wd);b(27,Xd);b(28,Yd);b(29,
Zd);b(45,$d);b(30,ae);b(32,be);b(33,be);b(34,ce);b(35,ce);b(46,de);b(36,ee);b(43,fe);b(37,ge);b(38,he);b(39,ie);b(67,ue);b(40,je);b(44,te);b(41,ke);b(42,le)};ye.prototype.Od=function(){return this.j.Od()};function ze(a){if(a instanceof Aa||a instanceof Wc||a instanceof Uc||a instanceof La||a instanceof cd||a instanceof ad||a===null||a===void 0||typeof a==="string"||typeof a==="number"||typeof a==="boolean")return a};var Be=function(a){this.message=a};function Ce(a){var b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[a];return b===void 0?new Be("Value "+a+" can not be encoded in web-safe base64 dictionary."):b};function De(a){switch(a){case 1:return"1";case 2:case 4:return"0";default:return"-"}};var Ee=/^[1-9a-zA-Z_-][1-9a-c][1-9a-v]\d$/;function Fe(a,b){for(var c="",d=!0;a>7;){var e=a&31;a>>=5;d?d=!1:e|=32;c=""+Ce(e)+c}a<<=2;d||(a|=32);return c=""+Ce(a|b)+c};var Ge=function(){function a(b){return{toString:function(){return b}}}return{al:a("consent"),Mi:a("convert_case_to"),Ni:a("convert_false_to"),Oi:a("convert_null_to"),Pi:a("convert_true_to"),Qi:a("convert_undefined_to"),Nn:a("debug_mode_metadata"),xa:a("function"),zh:a("instance_name"),Il:a("live_only"),Jl:a("malware_disabled"),METADATA:a("metadata"),Ml:a("original_activity_id"),Zn:a("original_vendor_template_id"),Yn:a("once_on_load"),Ll:a("once_per_event"),bk:a("once_per_load"),bo:a("priority_override"),
co:a("respected_consent_types"),kk:a("setup_tags"),Qe:a("tag_id"),qk:a("teardown_tags")}}();var ef;var ff=[],gf=[],hf=[],jf=[],kf=[],lf={},mf,nf;function of(a){nf=nf||a}
function pf(a){}var qf,rf=[],sf=[];function tf(a,b){var c={};c[Ge.xa]="__"+a;for(var d in b)b.hasOwnProperty(d)&&(c["vtp_"+d]=b[d]);return c}
function uf(a,b,c){try{return mf(vf(a,b,c))}catch(d){JSON.stringify(a)}return 2}function wf(a){var b=a[Ge.xa];if(!b)throw Error("Error: No function name given for function call.");return!!lf[b]}
var vf=function(a,b,c){c=c||[];var d={},e;for(e in a)a.hasOwnProperty(e)&&(d[e]=xf(a[e],b,c));return d},xf=function(a,b,c){if(Array.isArray(a)){var d;switch(a[0]){case "function_id":return a[1];case "list":d=[];for(var e=1;e<a.length;e++)d.push(xf(a[e],b,c));return d;case "macro":var f=a[1];if(c[f])return;var g=ff[f];if(!g||b.isBlocked(g))return;c[f]=!0;var k=String(g[Ge.zh]);try{var m=vf(g,b,c);m.vtp_gtmEventId=b.id;b.priorityId&&(m.vtp_gtmPriorityId=b.priorityId);d=yf(m,{event:b,index:f,type:2,
name:k});qf&&(d=qf.bm(d,m))}catch(y){b.logMacroError&&b.logMacroError(y,Number(f),k),d=!1}c[f]=!1;return d;case "map":d={};for(var n=1;n<a.length;n+=2)d[xf(a[n],b,c)]=xf(a[n+1],b,c);return d;case "template":d=[];for(var p=!1,q=1;q<a.length;q++){var r=xf(a[q],b,c);nf&&(p=p||nf.Qm(r));d.push(r)}return nf&&p?nf.gm(d):d.join("");case "escape":d=xf(a[1],b,c);if(nf&&Array.isArray(a[1])&&a[1][0]==="macro"&&nf.Rm(a))return nf.nn(d);d=String(d);for(var u=2;u<a.length;u++)Ne[a[u]]&&(d=Ne[a[u]](d));return d;
case "tag":var v=a[1];if(!jf[v])throw Error("Unable to resolve tag reference "+v+".");return{xk:a[2],index:v};case "zb":var t={arg0:a[2],arg1:a[3],ignore_case:a[5]};t[Ge.xa]=a[1];var w=uf(t,b,c),x=!!a[4];return x||w!==2?x!==(w===1):null;default:throw Error("Attempting to expand unknown Value type: "+a[0]+".");}}return a},yf=function(a,b){var c=a[Ge.xa],d=b&&b.event;if(!c)throw Error("Error: No function name given for function call.");var e=lf[c],f=b&&b.type===2&&(d==null?void 0:d.reportMacroDiscrepancy)&&
e&&rf.indexOf(c)!==-1,g={},k={},m;for(m in a)a.hasOwnProperty(m)&&sb(m,"vtp_")&&(e&&(g[m]=a[m]),!e||f)&&(k[m.substring(4)]=a[m]);e&&d&&d.cachedModelValues&&(g.vtp_gtmCachedValues=d.cachedModelValues);if(b){if(b.name==null){var n;a:{var p=b.type,q=b.index;if(q==null)n="";else{var r;switch(p){case 2:r=ff[q];break;case 1:r=jf[q];break;default:n="";break a}var u=r&&r[Ge.zh];n=u?String(u):""}}b.name=n}e&&(g.vtp_gtmEntityIndex=b.index,g.vtp_gtmEntityName=b.name)}var v,t,w;if(f&&sf.indexOf(c)===-1){sf.push(c);
var x=nb();v=e(g);var y=nb()-x,B=nb();t=ef(c,k,b);w=y-(nb()-B)}else if(e&&(v=e(g)),!e||f)t=ef(c,k,b);f&&d&&(d.reportMacroDiscrepancy(d.id,c,void 0,!0),Sc(v)?(Array.isArray(v)?Array.isArray(t):Qc(v)?Qc(t):typeof v==="function"?typeof t==="function":v===t)||d.reportMacroDiscrepancy(d.id,c):v!==t&&d.reportMacroDiscrepancy(d.id,c),w!==void 0&&d.reportMacroDiscrepancy(d.id,c,w));return e?v:t};var zf=function(a,b,c){var d;d=Error.call(this,c);this.message=d.message;"stack"in d&&(this.stack=d.stack);this.permissionId=a;this.parameters=b;this.name="PermissionError"};ra(zf,Error);zf.prototype.getMessage=function(){return this.message};function Af(a,b){if(Array.isArray(a)){Object.defineProperty(a,"context",{value:{line:b[0]}});for(var c=1;c<a.length;c++)Af(a[c],b[c])}};var Bf=function(a,b){var c;c=Error.call(this,"Wrapped error for Dust debugging. Original error message: "+a.message);this.message=c.message;"stack"in c&&(this.stack=c.stack);this.gn=a;this.j=[];this.C=b};ra(Bf,Error);function Cf(){return function(a,b){a instanceof Bf||(a=new Bf(a,Df));b&&a instanceof Bf&&a.j.push(b);throw a;}}function Df(a){if(!a.length)return a;a.push({id:"main",line:0});for(var b=a.length-1;b>0;b--)$a(a[b].id)&&a.splice(b++,1);for(var c=a.length-1;c>0;c--)a[c].line=a[c-1].line;a.splice(0,1);return a};function Ef(a){function b(r){for(var u=0;u<r.length;u++)d[r[u]]=!0}for(var c=[],d=[],e=Ff(a),f=0;f<gf.length;f++){var g=gf[f],k=Gf(g,e);if(k){for(var m=g.add||[],n=0;n<m.length;n++)c[m[n]]=!0;b(g.block||[])}else k===null&&b(g.block||[]);}for(var p=[],q=0;q<jf.length;q++)c[q]&&!d[q]&&(p[q]=!0);return p}
function Gf(a,b){for(var c=a["if"]||[],d=0;d<c.length;d++){var e=b(c[d]);if(e===0)return!1;if(e===2)return null}for(var f=a.unless||[],g=0;g<f.length;g++){var k=b(f[g]);if(k===2)return null;if(k===1)return!1}return!0}function Ff(a){var b=[];return function(c){b[c]===void 0&&(b[c]=uf(hf[c],a));return b[c]}};function Hf(a,b){b[Ge.Mi]&&typeof a==="string"&&(a=b[Ge.Mi]===1?a.toLowerCase():a.toUpperCase());b.hasOwnProperty(Ge.Oi)&&a===null&&(a=b[Ge.Oi]);b.hasOwnProperty(Ge.Qi)&&a===void 0&&(a=b[Ge.Qi]);b.hasOwnProperty(Ge.Pi)&&a===!0&&(a=b[Ge.Pi]);b.hasOwnProperty(Ge.Ni)&&a===!1&&(a=b[Ge.Ni]);return a};var If=function(){this.j={}},Kf=function(a,b){var c=Jf.j,d;(d=c.j)[a]!=null||(d[a]=[]);c.j[a].push(function(){return b.apply(null,ta(ya.apply(0,arguments)))})};function Lf(a,b,c,d){if(a)for(var e=0;e<a.length;e++){var f=void 0,g="A policy function denied the permission request";try{f=a[e](b,c,d),g+="."}catch(k){g=typeof k==="string"?g+(": "+k):k instanceof Error?g+(": "+k.message):g+"."}if(!f)throw new zf(c,d,g);}}
function Mf(a,b,c){return function(d){if(d){var e=a.j[d],f=a.j.all;if(e||f){var g=c.apply(void 0,[d].concat(ta(ya.apply(1,arguments))));Lf(e,b,d,g);Lf(f,b,d,g)}}}};var Qf=function(){var a=data.permissions||{},b=Nf.ctid,c=this;this.C={};this.j=new If;var d={},e={},f=Mf(this.j,b,function(g){return g&&d[g]?d[g].apply(void 0,[g].concat(ta(ya.apply(1,arguments)))):{}});gb(a,function(g,k){function m(p){var q=ya.apply(1,arguments);if(!n[p])throw Of(p,{},"The requested additional permission "+p+" is not configured.");f.apply(null,[p].concat(ta(q)))}var n={};gb(k,function(p,q){var r=Pf(p,q);n[p]=r.assert;d[p]||(d[p]=r.M);r.sk&&!e[p]&&(e[p]=r.sk)});c.C[g]=function(p,
q){var r=n[p];if(!r)throw Of(p,{},"The requested permission "+p+" is not configured.");var u=Array.prototype.slice.call(arguments,0);r.apply(void 0,u);f.apply(void 0,u);var v=e[p];v&&v.apply(null,[m].concat(ta(u.slice(1))))}})},Rf=function(a){return Jf.C[a]||function(){}};
function Pf(a,b){var c=tf(a,b);c.vtp_permissionName=a;c.vtp_createPermissionError=Of;try{return yf(c)}catch(d){return{assert:function(e){throw new zf(e,{},"Permission "+e+" is unknown.");},M:function(){throw new zf(a,{},"Permission "+a+" is unknown.");}}}}function Of(a,b,c){return new zf(a,b,c)};var Sf=!1;var Tf={};Tf.Sk=jb('');Tf.jm=jb('');
var Xf=function(a){var b={},c=0;gb(a,function(e,f){if(f!=null){var g=(""+f).replace(/~/g,"~~");if(Uf.hasOwnProperty(e))b[Uf[e]]=g;else if(Vf.hasOwnProperty(e)){var k=Vf[e];b.hasOwnProperty(k)||(b[k]=g)}else if(e==="category")for(var m=g.split("/",5),n=0;n<m.length;n++){var p=b,q=Wf[n],r=m[n];p.hasOwnProperty(q)||(p[q]=r)}else if(c<27){var u=String.fromCharCode(c<10?48+c:65+c-10);b["k"+u]=(""+String(e)).replace(/~/g,"~~");b["v"+u]=g;c++}}});var d=[];gb(b,function(e,f){d.push(""+e+f)});return d.join("~")},
Uf={item_id:"id",item_name:"nm",item_brand:"br",item_category:"ca",item_category2:"c2",item_category3:"c3",item_category4:"c4",item_category5:"c5",item_variant:"va",price:"pr",quantity:"qt",coupon:"cp",item_list_name:"ln",index:"lp",item_list_id:"li",discount:"ds",affiliation:"af",promotion_id:"pi",promotion_name:"pn",creative_name:"cn",creative_slot:"cs",location_id:"lo"},Vf={id:"id",name:"nm",brand:"br",variant:"va",list_name:"ln",list_position:"lp",list:"ln",position:"lp",creative:"cn"},Wf=["ca",
"c2","c3","c4","c5"];
var Yf=function(){this.events=[];this.j="";this.ma={};this.baseUrl="";this.H=0;this.K=this.C=!1;};Yf.prototype.add=function(a){return this.P(a)?(this.events.push(a),this.j=a.C,this.ma=a.ma,this.baseUrl=a.baseUrl,this.H+=a.K,this.C=a.H,!0):!1};Yf.prototype.P=function(a){return this.events.length?this.events.length>=20||a.K+this.H>=16384?!1:this.baseUrl===
a.baseUrl&&this.C===a.H&&this.aa(a):!0};Yf.prototype.aa=function(a){var b=this;if(!this.K)return this.j===a.C;var c=Object.keys(this.ma);return c.length===Object.keys(a.ma).length&&c.every(function(d){return a.ma.hasOwnProperty(d)&&String(b.ma[d])===String(a.ma[d])})};var Zf={},$f=(Zf.uaa=!0,Zf.uab=!0,Zf.uafvl=!0,Zf.uamb=!0,Zf.uam=!0,Zf.uap=!0,Zf.uapv=!0,Zf.uaw=!0,Zf);
var cg=function(a,b){var c=a.events;if(c.length===1)return ag(c[0],b);var d=[];a.j&&d.push(a.j);for(var e={},f=0;f<c.length;f++)gb(c[f].Zc,function(u,v){v!=null&&(e[u]=e[u]||{},e[u][String(v)]=e[u][String(v)]+1||1)});var g={};gb(e,function(u,v){var t,w=-1,x=0;gb(v,function(y,B){x+=B;var C=(y.length+u.length+2)*(B-1);C>w&&(t=y,w=C)});x===c.length&&(g[u]=t)});bg(g,d);b&&d.push("_s="+b);for(var k=d.join("&"),m=[],n={},p=0;p<c.length;n={hi:void 0},p++){var q=[];n.hi={};gb(c[p].Zc,function(u){return function(v,
t){g[v]!==""+t&&(u.hi[v]=t)}}(n));c[p].j&&q.push(c[p].j);bg(n.hi,q);m.push(q.join("&"))}var r=m.join("\r\n");return{params:k,body:r}},ag=function(a,b){var c=[];a.C&&c.push(a.C);b&&c.push("_s="+b);bg(a.Zc,c);var d=!1;a.j&&(c.push(a.j),d=!0);var e=c.join("&"),f="",g=e.length+a.baseUrl.length+1;d&&g>2048&&(f=c.pop(),e=c.join("&"));return{params:e,body:f}},bg=function(a,b){gb(a,function(c,d){d!=null&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))})};var dg=function(a){var b=[];gb(a,function(c,d){d!=null&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(String(d)))});return b.join("&")},eg=function(a,b,c,d,e){this.baseUrl=b;this.endpoint=c;this.ma=a.ma;this.Zc=a.Zc;this.Th=a.Th;this.H=d;this.C=dg(a.ma);this.j=dg(a.Th);this.K=this.j.length;if(e&&this.K>16384)throw Error("EVENT_TOO_LARGE");};
var hg=function(a,b){for(var c=0;c<b.length;c++){var d=a,e=b[c];if(!fg.exec(e))throw Error("Invalid key wildcard");var f=e.indexOf(".*"),g=f!==-1&&f===e.length-2,k=g?e.slice(0,e.length-2):e,m;a:if(d.length===0)m=!1;else{for(var n=d.split("."),p=0;p<n.length;p++)if(!gg.exec(n[p])){m=!1;break a}m=!0}if(!m||k.length>d.length||!g&&d.length!==e.length?0:g?sb(d,k)&&(d===k||d.charAt(k.length)==="."):d===k)return!0}return!1},gg=/^[a-z$_][\w$]*$/i,fg=/^(?:[a-z_$][a-z_$0-9]*\.)*[a-z_$][a-z_$0-9]*(?:\.\*)?$/i;
var ig=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"];function jg(a,b){var c=String(a),d=String(b),e=c.length-d.length;return e>=0&&c.indexOf(d,e)===e}var kg=new fb;function lg(a,b,c){var d=c?"i":void 0;try{var e=String(b)+String(d),f=kg.get(e);f||(f=new RegExp(b,d),kg.set(e,f));return f.test(a)}catch(g){return!1}}function mg(a,b){return String(a).indexOf(String(b))>=0}function ng(a,b){return String(a)===String(b)}
function og(a,b){return Number(a)>=Number(b)}function pg(a,b){return Number(a)<=Number(b)}function qg(a,b){return Number(a)>Number(b)}function rg(a,b){return Number(a)<Number(b)}function sg(a,b){return sb(String(a),String(b))};var zg=/^([a-z][a-z0-9]*):(!|\?)(\*|string|boolean|number|Fn|PixieMap|List|OpaqueValue)$/i,Ag={Fn:"function",PixieMap:"Object",List:"Array"};
function J(a,b,c){for(var d=0;d<b.length;d++){var e=zg.exec(b[d]);if(!e)throw Error("Internal Error in "+a);var f=e[1],g=e[2]==="!",k=e[3],m=c[d];if(m==null){if(g)throw Error("Error in "+a+". Required argument "+f+" not supplied.");}else if(k!=="*"){var n=typeof m;m instanceof Wc?n="Fn":m instanceof Uc?n="List":m instanceof La?n="PixieMap":m instanceof cd?n="PixiePromise":m instanceof ad&&(n="OpaqueValue");if(n!==k)throw Error("Error in "+a+". Argument "+f+" has type "+((Ag[n]||n)+", which does not match required type ")+
((Ag[k]||k)+"."));}}}function Bg(a,b){for(var c=[],d=l(b),e=d.next();!e.done;e=d.next()){var f=e.value;f instanceof Wc?c.push("function"):f instanceof Uc?c.push("Array"):f instanceof La?c.push("Object"):f instanceof cd?c.push("Promise"):f instanceof ad?c.push("OpaqueValue"):c.push(typeof f)}return Error("Argument error in "+a+". Expected argument types [string,function|undefined,function|undefined], but received ["+(c.join(",")+"]."))};function Cg(a){return""+a}
function Dg(a,b){var c=[];return c};function Eg(a,b){var c=new Wc(a,function(){for(var d=Array.prototype.slice.call(arguments,0),e=0;e<d.length;e++)d[e]=this.evaluate(d[e]);try{return b.apply(this,d)}catch(g){if(ed())throw new gd(g.message);throw g;}});c.Ia();return c}
function Fg(a,b){var c=new La,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];Za(e)?c.set(d,Eg(a+"_"+d,e)):Qc(e)?c.set(d,Fg(a+"_"+d,e)):($a(e)||z(e)||typeof e==="boolean")&&c.set(d,e)}c.Ia();return c};function Gg(a,b){J(this.getName(),["apiName:!string","message:?string"],arguments);var c={},d=new La;return d=Fg("AssertApiSubject",c)};function Hg(a,b){J(this.getName(),["actual:?*","message:?string"],arguments);if(a instanceof cd)throw Error("Argument actual cannot have type Promise. Assertions on asynchronous code aren't supported.");var c={},d=new La;return d=Fg("AssertThatSubject",c)};function Ig(a){return function(){for(var b=[],c=this.D,d=0;d<arguments.length;++d)b.push(I(arguments[d],c));return dd(a.apply(null,b))}}function Jg(){for(var a=Math,b=Kg,c={},d=0;d<b.length;d++){var e=b[d];a.hasOwnProperty(e)&&(c[e]=Ig(a[e].bind(a)))}return c};function Lg(a){var b;return b};function Mg(a){var b;J(this.getName(),["uri:!string"],arguments);try{b=decodeURIComponent(a)}catch(c){}return b};function Ng(a){try{return encodeURI(a)}catch(b){}};function Og(a){try{return encodeURIComponent(a)}catch(b){}};
var Pg=function(a,b){for(var c=0;c<b.length;c++){if(a===void 0)return;a=a[b[c]]}return a},Qg=function(a,b){var c=b.preHit;if(c){var d=a[0];switch(d){case "hitData":return a.length<2?void 0:Pg(c.getHitData(a[1]),a.slice(2));case "metadata":return a.length<2?void 0:Pg(c.getMetadata(a[1]),a.slice(2));case "eventName":return c.getEventName();case "destinationId":return c.getDestinationId();default:throw Error(d+" is not a valid field that can be accessed\n                      from PreHit data.");}}},
Sg=function(a,b){if(a){if(a.contextValue!==void 0){var c;a:{var d=a.contextValue,e=d.keyParts;if(e&&e.length!==0){var f=d.namespaceType;switch(f){case 1:c=Qg(e,b);break a;case 2:var g=b.macro;c=g?g[e[0]]:void 0;break a;default:throw Error("Unknown Namespace Type used: "+f);}}c=void 0}return c}if(a.booleanExpressionValue!==void 0)return Rg(a.booleanExpressionValue,b);if(a.booleanValue!==void 0)return!!a.booleanValue;if(a.stringValue!==void 0)return String(a.stringValue);if(a.integerValue!==void 0)return Number(a.integerValue);
if(a.doubleValue!==void 0)return Number(a.doubleValue);throw Error("Unknown field used for variable of type ExpressionValue:"+a);}},Rg=function(a,b){var c=a.args;if(!Array.isArray(c)||c.length===0)throw Error('Invalid boolean expression format. Expected "args":'+c+" property to\n         be non-empty array.");var d=function(g){return Sg(g,b)};switch(a.type){case 1:for(var e=0;e<c.length;e++)if(d(c[e]))return!0;return!1;case 2:for(var f=0;f<c.length;f++)if(!d(c[f]))return!1;return c.length>0;case 3:return!d(c[0]);
case 4:return lg(d(c[0]),d(c[1]),!1);case 5:return ng(d(c[0]),d(c[1]));case 6:return sg(d(c[0]),d(c[1]));case 7:return jg(d(c[0]),d(c[1]));case 8:return mg(d(c[0]),d(c[1]));case 9:return rg(d(c[0]),d(c[1]));case 10:return pg(d(c[0]),d(c[1]));case 11:return qg(d(c[0]),d(c[1]));case 12:return og(d(c[0]),d(c[1]));default:throw Error('Invalid boolean expression format. Expected "type" property tobe a positive integer which is less than 13.');}};function Tg(a){J(this.getName(),["message:?string"],arguments);};function Ug(a,b){J(this.getName(),["min:!number","max:!number"],arguments);return db(a,b)};function Vg(){return(new Date).getTime()};function Wg(a){if(a===null)return"null";if(a instanceof Uc)return"array";if(a instanceof Wc)return"function";if(a instanceof ad){var b;a=(b=a)==null?void 0:b.getValue();var c;if(((c=a)==null?void 0:c.constructor)===void 0||a.constructor.name===void 0){var d=String(a);return d.substring(8,d.length-1)}return String(a.constructor.name)}return typeof a};function Xg(a){function b(c){return function(d){try{return c(d)}catch(e){(Sf||Tf.Sk)&&a.call(this,e.message)}}}return{parse:b(function(c){return dd(JSON.parse(c))}),stringify:b(function(c){return JSON.stringify(I(c))}),R:"JSON"}};function Yg(a){return ib(I(a,this.D))};function Zg(a){return Number(I(a,this.D))};function $g(a){return a===null?"null":a===void 0?"undefined":a.toString()};function ah(a,b,c){var d=null,e=!1;return e?d:null};var Kg="floor ceil round max min abs pow sqrt".split(" ");function bh(){var a={};return{wm:function(b){return a.hasOwnProperty(b)?a[b]:void 0},Pk:function(b,c){a[b]=c},reset:function(){a={}}}}function ch(a,b){return function(){return Wc.prototype.invoke.apply(a,[b].concat(ta(ya.apply(0,arguments))))}}
function dh(a,b){J(this.getName(),["apiName:!string","mock:?*"],arguments);}
function eh(a,b){J(this.getName(),["apiName:!string","mock:!PixieMap"],arguments);};var fh={};var gh=function(a){var b=new La;if(a instanceof Uc)for(var c=a.na(),d=0;d<c.length;d++){var e=c[d];a.has(e)&&b.set(e,a.get(e))}else if(a instanceof Wc)for(var f=a.na(),g=0;g<f.length;g++){var k=f[g];b.set(k,a.get(k))}else for(var m=0;m<a.length;m++)b.set(m,a[m]);return b};
fh.keys=function(a){J(this.getName(),["input:!*"],arguments);if(a instanceof Uc||a instanceof Wc||typeof a==="string")a=gh(a);if(a instanceof La||a instanceof cd)return new Uc(a.na());return new Uc};
fh.values=function(a){J(this.getName(),["input:!*"],arguments);if(a instanceof Uc||a instanceof Wc||typeof a==="string")a=gh(a);if(a instanceof La||a instanceof cd)return new Uc(a.Xb());return new Uc};
fh.entries=function(a){J(this.getName(),["input:!*"],arguments);if(a instanceof Uc||a instanceof Wc||typeof a==="string")a=gh(a);if(a instanceof La||a instanceof cd)return new Uc(a.Hb().map(function(b){return new Uc(b)}));return new Uc};
fh.freeze=function(a){(a instanceof La||a instanceof cd||a instanceof Uc||a instanceof Wc)&&a.Ia();return a};fh.delete=function(a,b){if(a instanceof La&&!a.Ac())return a.remove(b),!0;return!1};function L(a,b){var c=ya.apply(2,arguments),d=a.D.j;if(!d)throw Error("Missing program state.");if(d.tn){try{d.tk.apply(null,[b].concat(ta(c)))}catch(e){throw Va("TAGGING",21),e;}return}d.tk.apply(null,[b].concat(ta(c)))};var hh=function(){this.C={};this.j={};this.H=!0;};hh.prototype.get=function(a,b){var c=this.contains(a)?this.C[a]:void 0;return c};hh.prototype.contains=function(a){return this.C.hasOwnProperty(a)};
hh.prototype.add=function(a,b,c){if(this.contains(a))throw Error("Attempting to add a function which already exists: "+a+".");if(this.j.hasOwnProperty(a))throw Error("Attempting to add an API with an existing private API name: "+a+".");this.C[a]=c?void 0:Za(b)?Eg(a,b):Fg(a,b)};function ih(a,b){var c=void 0;return c};function jh(){var a={};
return a};var N={g:{za:"ad_personalization",N:"ad_storage",O:"ad_user_data",U:"analytics_storage",ub:"region",fc:"consent_updated",be:"wait_for_update",Si:"app_remove",Ti:"app_store_refund",Ui:"app_store_subscription_cancel",Vi:"app_store_subscription_convert",Wi:"app_store_subscription_renew",il:"consent_update",Eg:"add_payment_info",Fg:"add_shipping_info",Dc:"add_to_cart",Ec:"remove_from_cart",Gg:"view_cart",hc:"begin_checkout",Fc:"select_item",wb:"view_item_list",Ob:"select_promotion",xb:"view_promotion",
Ma:"purchase",Gc:"refund",Sa:"view_item",Hg:"add_to_wishlist",jl:"exception",Xi:"first_open",Yi:"first_visit",da:"gtag.config",Za:"gtag.get",Zi:"in_app_purchase",ic:"page_view",kl:"screen_view",aj:"session_start",ml:"timing_complete",nl:"track_social",ed:"user_engagement",ol:"user_id_update",ee:"gclid_link_decoration_source",fe:"gclid_storage_source",yb:"gclgb",ab:"gclid",bj:"gclid_len",fd:"gclgs",gd:"gcllp",hd:"gclst",la:"ads_data_redaction",cj:"gad_source",dj:"gad_source_src",ej:"ndclid",fj:"ngad_source",
gj:"ngbraid",ij:"ngclid",jj:"ngclsrc",he:"gclid_url",kj:"gclsrc",Ig:"gbraid",Ff:"wbraid",qa:"allow_ad_personalization_signals",Gf:"allow_custom_scripts",ie:"allow_direct_google_requests",Hf:"allow_display_features",je:"allow_enhanced_conversions",hb:"allow_google_signals",Ea:"allow_interest_groups",pl:"app_id",ql:"app_installer_id",rl:"app_name",sl:"app_version",zb:"auid",lj:"auto_detection_enabled",jc:"aw_remarketing",If:"aw_remarketing_only",ke:"discount",me:"aw_feed_country",ne:"aw_feed_language",
fa:"items",oe:"aw_merchant_id",Jg:"aw_basket_type",jd:"campaign_content",kd:"campaign_id",ld:"campaign_medium",md:"campaign_name",nd:"campaign",od:"campaign_source",pd:"campaign_term",ib:"client_id",mj:"rnd",Kg:"consent_update_type",nj:"content_group",oj:"content_type",jb:"conversion_cookie_prefix",rd:"conversion_id",Aa:"conversion_linker",pj:"conversion_linker_disabled",kc:"conversion_api",Jf:"cookie_deprecation",Na:"cookie_domain",Ta:"cookie_expires",cb:"cookie_flags",Hc:"cookie_name",lb:"cookie_path",
Fa:"cookie_prefix",mc:"cookie_update",Ic:"country",Ca:"currency",Lg:"customer_buyer_stage",pe:"customer_lifetime_value",Mg:"customer_loyalty",Ng:"customer_ltv_bucket",sd:"custom_map",Og:"gcldc",qe:"dclid",Pg:"debug_mode",ia:"developer_id",qj:"disable_merchant_reported_purchases",ud:"dc_custom_params",rj:"dc_natural_search",Qg:"dynamic_event_settings",Rg:"affiliation",se:"checkout_option",Kf:"checkout_step",Sg:"coupon",vd:"item_list_name",Lf:"list_name",sj:"promotions",wd:"shipping",Mf:"tax",te:"engagement_time_msec",
ue:"enhanced_client_id",ve:"enhanced_conversions",Tg:"enhanced_conversions_automatic_settings",we:"estimated_delivery_date",Nf:"euid_logged_in_state",xd:"event_callback",tl:"event_category",nb:"event_developer_id_string",vl:"event_label",Jc:"event",xe:"event_settings",ye:"event_timeout",wl:"description",xl:"fatal",tj:"experiments",Of:"firebase_id",nc:"first_party_collection",ze:"_x_20",Ab:"_x_19",uj:"fledge_drop_reason",Ug:"fledge",Vg:"flight_error_code",Wg:"flight_error_message",vj:"fl_activity_category",
wj:"fl_activity_group",Xg:"fl_advertiser_id",xj:"fl_ar_dedupe",Yg:"match_id",yj:"fl_random_number",zj:"tran",Aj:"u",Ae:"gac_gclid",Kc:"gac_wbraid",Zg:"gac_wbraid_multiple_conversions",ah:"ga_restrict_domain",bh:"ga_temp_client_id",yl:"ga_temp_ecid",oc:"gdpr_applies",eh:"geo_granularity",Pb:"value_callback",Bb:"value_key",Lc:"_google_ng",Mc:"google_signals",fh:"google_tld",Be:"groups",gh:"gsa_experiment_id",Bj:"gtm_up",Qb:"iframe_state",yd:"ignore_referrer",Pf:"internal_traffic_results",qc:"is_legacy_converted",
Rb:"is_legacy_loaded",Ce:"is_passthrough",zd:"_lps",Ua:"language",De:"legacy_developer_id_string",sa:"linker",Nc:"accept_incoming",Cb:"decorate_forms",X:"domains",Sb:"url_position",Qf:"merchant_feed_label",Rf:"merchant_feed_language",Sf:"merchant_id",hh:"method",zl:"name",Cj:"navigation_type",Bd:"new_customer",ih:"non_interaction",Dj:"optimize_id",jh:"page_hostname",Cd:"page_path",Ga:"page_referrer",eb:"page_title",kh:"passengers",lh:"phone_conversion_callback",Ej:"phone_conversion_country_code",
mh:"phone_conversion_css_class",Fj:"phone_conversion_ids",nh:"phone_conversion_number",oh:"phone_conversion_options",Al:"_platinum_request_status",ph:"_protected_audience_enabled",Dd:"quantity",Ee:"redact_device_info",Tf:"referral_exclusion_definition",Pn:"_request_start_time",Tb:"restricted_data_processing",Gj:"retoken",Bl:"sample_rate",Uf:"screen_name",Ub:"screen_resolution",Hj:"_script_source",Ij:"search_term",Oa:"send_page_view",rc:"send_to",Oc:"server_container_url",Ed:"session_duration",Fe:"session_engaged",
Vf:"session_engaged_time",pb:"session_id",Ge:"session_number",Wf:"_shared_user_id",Fd:"delivery_postal_code",Qn:"_tag_firing_delay",Rn:"_tag_firing_time",Cl:"temporary_client_id",Xf:"topmost_url",Jj:"tracking_id",Yf:"traffic_type",Da:"transaction_id",Db:"transport_url",qh:"trip_type",uc:"update",fb:"url_passthrough",Kj:"uptgs",Zf:"_user_agent_architecture",cg:"_user_agent_bitness",dg:"_user_agent_full_version_list",eg:"_user_agent_mobile",fg:"_user_agent_model",gg:"_user_agent_platform",hg:"_user_agent_platform_version",
ig:"_user_agent_wow64",Ha:"user_data",rh:"user_data_auto_latency",sh:"user_data_auto_meta",th:"user_data_auto_multi",uh:"user_data_auto_selectors",vh:"user_data_auto_status",Gd:"user_data_mode",He:"user_data_settings",Ba:"user_id",qb:"user_properties",Lj:"_user_region",Hd:"us_privacy_string",ra:"value",wh:"wbraid_multiple_conversions",Id:"_fpm_parameters",Sj:"_host_name",Tj:"_in_page_command",Uj:"_ip_override",Vj:"_is_passthrough_cid",Vb:"non_personalized_ads",Oe:"_sst_parameters",kb:"conversion_label",
wa:"page_location",ob:"global_developer_id_string",sc:"tc_privacy_string"}},kh={},lh=Object.freeze((kh[N.g.qa]=1,kh[N.g.Hf]=1,kh[N.g.je]=1,kh[N.g.hb]=1,kh[N.g.fa]=1,kh[N.g.Na]=1,kh[N.g.Ta]=1,kh[N.g.cb]=1,kh[N.g.Hc]=1,kh[N.g.lb]=1,kh[N.g.Fa]=1,kh[N.g.mc]=1,kh[N.g.sd]=1,kh[N.g.ia]=1,kh[N.g.Qg]=1,kh[N.g.xd]=1,kh[N.g.xe]=1,kh[N.g.ye]=1,kh[N.g.nc]=1,kh[N.g.ah]=1,kh[N.g.Mc]=1,kh[N.g.fh]=1,kh[N.g.Be]=1,kh[N.g.Pf]=1,kh[N.g.qc]=1,kh[N.g.Rb]=1,kh[N.g.sa]=1,kh[N.g.Tf]=1,kh[N.g.Tb]=1,kh[N.g.Oa]=1,kh[N.g.rc]=
1,kh[N.g.Oc]=1,kh[N.g.Ed]=1,kh[N.g.Vf]=1,kh[N.g.Fd]=1,kh[N.g.Db]=1,kh[N.g.uc]=1,kh[N.g.He]=1,kh[N.g.qb]=1,kh[N.g.Oe]=1,kh));Object.freeze([N.g.wa,N.g.Ga,N.g.eb,N.g.Ua,N.g.Uf,N.g.Ba,N.g.Of,N.g.nj]);
var mh={},nh=Object.freeze((mh[N.g.Si]=1,mh[N.g.Ti]=1,mh[N.g.Ui]=1,mh[N.g.Vi]=1,mh[N.g.Wi]=1,mh[N.g.Xi]=1,mh[N.g.Yi]=1,mh[N.g.Zi]=1,mh[N.g.aj]=1,mh[N.g.ed]=1,mh)),oh={},ph=Object.freeze((oh[N.g.Eg]=1,oh[N.g.Fg]=1,oh[N.g.Dc]=1,oh[N.g.Ec]=1,oh[N.g.Gg]=1,oh[N.g.hc]=1,oh[N.g.Fc]=1,oh[N.g.wb]=1,oh[N.g.Ob]=1,oh[N.g.xb]=1,oh[N.g.Ma]=1,oh[N.g.Gc]=1,oh[N.g.Sa]=1,oh[N.g.Hg]=1,oh)),qh=Object.freeze([N.g.qa,N.g.ie,N.g.hb,N.g.mc,N.g.nc,N.g.yd,N.g.Oa,N.g.uc]),rh=Object.freeze([].concat(ta(qh))),sh=Object.freeze([N.g.Ta,
N.g.ye,N.g.Ed,N.g.Vf,N.g.te]),th=Object.freeze([].concat(ta(sh))),uh={},vh=(uh[N.g.N]="1",uh[N.g.U]="2",uh[N.g.O]="3",uh[N.g.za]="4",uh),wh={},xh=Object.freeze((wh[N.g.ee]=1,wh[N.g.fe]=1,wh[N.g.qa]=1,wh[N.g.ie]=1,wh[N.g.je]=1,wh[N.g.Ea]=1,wh[N.g.jc]=1,wh[N.g.If]=1,wh[N.g.ke]=1,wh[N.g.me]=1,wh[N.g.ne]=1,wh[N.g.fa]=1,wh[N.g.oe]=1,wh[N.g.jb]=1,wh[N.g.Aa]=1,wh[N.g.Na]=1,wh[N.g.Ta]=1,wh[N.g.cb]=1,wh[N.g.Fa]=1,wh[N.g.Ca]=1,wh[N.g.Lg]=1,wh[N.g.pe]=1,wh[N.g.Mg]=1,wh[N.g.Ng]=1,wh[N.g.ia]=1,wh[N.g.qj]=1,wh[N.g.ve]=
1,wh[N.g.we]=1,wh[N.g.Of]=1,wh[N.g.nc]=1,wh[N.g.qc]=1,wh[N.g.Rb]=1,wh[N.g.Ua]=1,wh[N.g.Qf]=1,wh[N.g.Rf]=1,wh[N.g.Sf]=1,wh[N.g.Bd]=1,wh[N.g.wa]=1,wh[N.g.Ga]=1,wh[N.g.lh]=1,wh[N.g.mh]=1,wh[N.g.nh]=1,wh[N.g.oh]=1,wh[N.g.Tb]=1,wh[N.g.Oa]=1,wh[N.g.rc]=1,wh[N.g.Oc]=1,wh[N.g.Fd]=1,wh[N.g.Da]=1,wh[N.g.Db]=1,wh[N.g.uc]=1,wh[N.g.fb]=1,wh[N.g.Ha]=1,wh[N.g.Ba]=1,wh[N.g.ra]=1,wh)),yh={},zh=Object.freeze((yh.search="s",yh.youtube="y",yh.playstore="p",yh.shopping="h",yh.ads="a",yh.maps="m",yh));Object.freeze(N.g);var O={},Ah=(O[N.g.fc]="gcu",O[N.g.yb]="gclgb",O[N.g.ab]="gclaw",O[N.g.bj]="gclid_len",O[N.g.fd]="gclgs",O[N.g.gd]="gcllp",O[N.g.hd]="gclst",O[N.g.ej]="ndclid",O[N.g.fj]="ngad_source",O[N.g.gj]="ngbraid",O[N.g.ij]="ngclid",O[N.g.jj]="ngclsrc",O[N.g.zb]="auid",O[N.g.ke]="dscnt",O[N.g.me]="fcntr",O[N.g.ne]="flng",O[N.g.oe]="mid",O[N.g.Jg]="bttype",O[N.g.kb]="label",O[N.g.kc]="capi",O[N.g.Jf]="pscdl",O[N.g.Ca]="currency_code",O[N.g.Lg]="clobs",O[N.g.pe]="vdltv",O[N.g.Mg]="clolo",O[N.g.Ng]="clolb",O[N.g.Pg]=
"_dbg",O[N.g.we]="oedeld",O[N.g.nb]="edid",O[N.g.uj]="fdr",O[N.g.Ug]="fledge",O[N.g.Ae]="gac",O[N.g.Kc]="gacgb",O[N.g.Zg]="gacmcov",O[N.g.oc]="gdpr",O[N.g.ob]="gdid",O[N.g.Lc]="_ng",O[N.g.gh]="gsaexp",O[N.g.Qb]="frm",O[N.g.Ce]="gtm_up",O[N.g.zd]="lps",O[N.g.De]="did",O[N.g.Qf]="fcntr",O[N.g.Rf]="flng",O[N.g.Sf]="mid",O[N.g.Bd]=void 0,O[N.g.eb]="tiba",O[N.g.Tb]="rdp",O[N.g.pb]="ecsid",O[N.g.Wf]="ga_uid",O[N.g.Fd]="delopc",O[N.g.sc]="gdpr_consent",O[N.g.Da]="oid",O[N.g.Kj]="uptgs",O[N.g.Zf]="uaa",O[N.g.cg]=
"uab",O[N.g.dg]="uafvl",O[N.g.eg]="uamb",O[N.g.fg]="uam",O[N.g.gg]="uap",O[N.g.hg]="uapv",O[N.g.ig]="uaw",O[N.g.rh]="ec_lat",O[N.g.sh]="ec_meta",O[N.g.th]="ec_m",O[N.g.uh]="ec_sel",O[N.g.vh]="ec_s",O[N.g.Gd]="ec_mode",O[N.g.Ba]="userId",O[N.g.Hd]="us_privacy",O[N.g.ra]="value",O[N.g.wh]="mcov",O[N.g.Sj]="hn",O[N.g.Tj]="gtm_ee",O[N.g.Vb]="npa",O[N.g.rd]=null,O[N.g.Ub]=null,O[N.g.Ua]=null,O[N.g.fa]=null,O[N.g.wa]=null,O[N.g.Ga]=null,O[N.g.Xf]=null,O[N.g.Id]=null,O[N.g.ee]=null,O[N.g.fe]=null,O);function Bh(a,b){if(a){var c=a.split("x");c.length===2&&(Ch(b,"u_w",c[0]),Ch(b,"u_h",c[1]))}}function Dh(a,b){a&&(a.length===2?Ch(b,"hl",a):a.length===5&&(Ch(b,"hl",a.substring(0,2)),Ch(b,"gl",a.substring(3,5))))}
function Eh(a){var b=Fh;b=b===void 0?Gh:b;var c;var d=b;if(a&&a.length){for(var e=[],f=0;f<a.length;++f){var g=a[f];g&&e.push({item_id:d(g),quantity:g.quantity,value:g.price,start_date:g.start_date,end_date:g.end_date})}c=e}else c=[];var k;var m=c;if(m){for(var n=[],p=0;p<m.length;p++){var q=m[p],r=[];q&&(r.push(Hh(q.value)),r.push(Hh(q.quantity)),r.push(Hh(q.item_id)),r.push(Hh(q.start_date)),r.push(Hh(q.end_date)),n.push("("+r.join("*")+")"))}k=n.length>0?n.join(""):""}else k="";return k}
function Gh(a){return Ih(a.item_id,a.id,a.item_name)}function Ih(){for(var a=l(ya.apply(0,arguments)),b=a.next();!b.done;b=a.next()){var c=b.value;if(c!==null&&c!==void 0)return c}}function Jh(a){if(a&&a.length){for(var b=[],c=0;c<a.length;++c){var d=a[c];d&&d.estimated_delivery_date?b.push(""+d.estimated_delivery_date):b.push("")}return b.join(",")}}function Ch(a,b,c){c===void 0||c===null||c===""&&!$f[b]||(a[b]=c)}function Hh(a){return typeof a!=="number"&&typeof a!=="string"?"":a.toString()};function Kh(a){return Oh?E.querySelectorAll(a):null}
function Ph(a,b){if(!Oh)return null;if(Element.prototype.closest)try{return a.closest(b)}catch(e){return null}var c=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector,d=a;if(!E.documentElement.contains(d))return null;do{try{if(c.call(d,b))return d}catch(e){break}d=d.parentElement||d.parentNode}while(d!==null&&d.nodeType===1);return null}var Qh=!1;
if(E.querySelectorAll)try{var Rh=E.querySelectorAll(":root");Rh&&Rh.length==1&&Rh[0]==E.documentElement&&(Qh=!0)}catch(a){}var Oh=Qh;function Sh(a){switch(a){case 0:break;case 9:return"e4";case 6:return"e5";case 14:return"e6";default:return"e7"}};var Th=/^[0-9A-Fa-f]{64}$/;function Uh(a){try{return(new TextEncoder).encode(a)}catch(e){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b.push(d):d<2048?b.push(192|d>>6,128|d&63):d<55296||d>=57344?b.push(224|d>>12,128|d>>6&63,128|d&63):(d=65536+((d&1023)<<10|a.charCodeAt(++c)&1023),b.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|d&63))}return new Uint8Array(b)}}
function Vh(a){if(a===""||a==="e0")return Promise.resolve(a);var b;if((b=A.crypto)==null?0:b.subtle){if(Th.test(a))return Promise.resolve(a);try{var c=Uh(a);return A.crypto.subtle.digest("SHA-256",c).then(function(d){var e=Array.from(new Uint8Array(d)).map(function(f){return String.fromCharCode(f)}).join("");return A.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}).catch(function(){return"e2"})}catch(d){return Promise.resolve("e2")}}else return Promise.resolve("e1")};function Wh(a,b){if(a==="")return b;var c=Number(a);return isNaN(c)?b:c};var Xh=[],Yh={};function Zh(a){return Xh[a]===void 0?!1:Xh[a]};var $h=[];function ai(a){switch(a){case 0:return 0;case 46:return 1;case 47:return 2;case 48:return 7;case 79:return 3;case 105:return 4;case 107:return 5;case 124:return 9;case 125:return 6}}function bi(a,b){$h[a]=b;var c=ai(a);c!==void 0&&(Xh[c]=b)}function P(a){bi(a,!0)}
P(35);P(31);P(32);P(33);P(34);
P(50);P(94);
P(17);P(136);
P(16);P(143);P(135);P(80);
P(108);P(6);
P(51);P(4);P(99);
P(131);P(91);P(85);P(106);
P(149);P(119);P(120);

P(104);P(144);
P(107);P(5);
bi(21,!1),P(22);
Yh[1]=Wh('1',6E4);Yh[3]=Wh('10',1);Yh[2]=Wh('',50);P(26);
P(12);P(84);P(111);P(132);var di=!1;
P(112);P(72);
P(147);P(125);
P(115);P(25);
P(75);P(124);
P(87);P(90);P(102);
P(57);


P(89);P(123);P(88);P(28);P(82);
P(54);P(20);P(55);
P(140);P(76);P(141);P(53);
function R(a){return!!$h[a]}function ci(a,b){for(var c=!1,d=!1,e=0;c===d;)if(c=((Math.random()*4294967296|0)&1)===0,d=((Math.random()*4294967296|0)&1)===0,e++,e>30)return;c?P(b):P(a)}function U(a){Va("GTM",a)};
var ji=function(a,b){var c=b===2,d={},e=["tv.1"],f=0;var w=e.join("~"),x=
{userData:d};return b===3||b===1||c?{Ci:w,Cc:x,bc:f,Rh:c?"tv.9~${"+(w+"|encryptRsa}"):"tv.1~${"+(w+"|encrypt}"),encryptionKeyString:c?hi():ii()}:{Ci:w,Cc:x,bc:f}},fi=function(a){return ki.indexOf(a)!==-1},ii=function(){return'{\x22keys\x22:[{\x22id\x22:\x2282fcd1bf-197e-4f38-b2dd-50683b1e78fd\x22,\x22hpkePublicKey\x22:{\x22version\x22:0,\x22params\x22:{\x22kem\x22:\x22DHKEM_P256_HKDF_SHA256\x22,\x22kdf\x22:\x22HKDF_SHA256\x22,\x22aead\x22:\x22AES_128_GCM\x22},\x22publicKey\x22:\x22BDP+lj6oLiQsZMejCyoWpuzeGJ/brSMwKsuiYs4QKdfoFQIZ66JkW3iWp2sqzEfexc9ycb1knLW91SgueO59v6E\x3d\x22}},{\x22id\x22:\x22736fa2d0-161d-4f02-b734-f8243fc43eed\x22,\x22hpkePublicKey\x22:{\x22version\x22:0,\x22params\x22:{\x22kem\x22:\x22DHKEM_P256_HKDF_SHA256\x22,\x22kdf\x22:\x22HKDF_SHA256\x22,\x22aead\x22:\x22AES_128_GCM\x22},\x22publicKey\x22:\x22BDmyOJQqsrapANHHi79LMezdagVFyvQUoxGbFnTug4ZSTemDOdLsbOjHpVcrPsoqylJ14a9nRJf1zEKpVHeB+zc\x3d\x22}},{\x22id\x22:\x2260b22ec4-c331-49fe-a563-d3c2352b67a0\x22,\x22hpkePublicKey\x22:{\x22version\x22:0,\x22params\x22:{\x22kem\x22:\x22DHKEM_P256_HKDF_SHA256\x22,\x22kdf\x22:\x22HKDF_SHA256\x22,\x22aead\x22:\x22AES_128_GCM\x22},\x22publicKey\x22:\x22BC3IXVAp/PDK5GdC6su++MFxtN4rVmVSpyHn1+fVYUCH/pGBr7FUmG82+Zsp4wYnulV2vTyiNhd6BfWHVfoeOnQ\x3d\x22}},{\x22id\x22:\x225b25c038-096b-4545-b921-60387c0e960e\x22,\x22hpkePublicKey\x22:{\x22version\x22:0,\x22params\x22:{\x22kem\x22:\x22DHKEM_P256_HKDF_SHA256\x22,\x22kdf\x22:\x22HKDF_SHA256\x22,\x22aead\x22:\x22AES_128_GCM\x22},\x22publicKey\x22:\x22BJtRWB6qHhudwv+icCi4rj53rn3OoLGOXWUoLrd0EN7s9VBqyLS5cusPigHA0Qt2/m/l/WKZsyw3DSEpDWeUPzE\x3d\x22}},{\x22id\x22:\x2240173339-ea34-4775-82dd-1d8f8bcd498e\x22,\x22hpkePublicKey\x22:{\x22version\x22:0,\x22params\x22:{\x22kem\x22:\x22DHKEM_P256_HKDF_SHA256\x22,\x22kdf\x22:\x22HKDF_SHA256\x22,\x22aead\x22:\x22AES_128_GCM\x22},\x22publicKey\x22:\x22BDSDGev7uvSfjyGxs0SL1DJNWG89CcWPFpT1x8viv3P9A+pigzy2T+CltGT9iNkEO5EgJDthn3mQ8htEvoXYbuY\x3d\x22}}]}'},mi=function(a,b){if(A.Promise){var c=void 0;return c}},oi=function(a,b,c,d){if(A.Promise)try{var e=ni(a);return e}catch(f){}},pi=function(a){if(A.Promise)try{return ni(a)}catch(b){}},qi=function(a){for(var b=a.Vd,c=a.time,d=["tv.1"],e=0,f=!1,g=0;g<b.length;++g){var k=b[g].name,m=b[g].value,n=b[g].index,p=ei[k];p&&m&&(!fi(k)||/^e\d+$/.test(m)||gi.test(m)||Th.test(m))&&(n!==void 0&&(p+=n),d.push(p+"."+m),e++)}b.length===1&&b[0].name==="error_code"&&(e=0,f=!0);
return{Ja:encodeURIComponent(d.join("~")),Ud:e,time:c,rg:f}},ni=function(a){return ri(a).then(function(b){return qi(b)})},zi=function(a){function b(r,u,v,t){var w=si(r);w!==""&&(Th.test(w)?k.push({name:u,value:w,index:t}):k.push({name:u,value:v(w),index:t}))}function c(r,u){var v=r;if(z(v)||Array.isArray(v)){v=ab(r);for(var t=0;t<v.length;++t){var w=si(v[t]),x=Th.test(w);u&&!x&&U(89);!u&&x&&U(88)}}}function d(r,u){var v=r[u];c(v,!1);var t=ti[u];r[t]&&(r[u]&&U(90),v=r[t],c(v,!0));return v}function e(r,
u,v){for(var t=ab(d(r,u)),w=0;w<t.length;++w)b(t[w],u,v)}function f(r,u,v,t){var w=d(r,u);b(w,u,v,t)}function g(r){return function(u){U(64);return r(u)}}var k=[];if(A.location.protocol!=="https:")return k.push({name:"error_code",value:"e3",index:void 0}),k;e(a,"email",ui);e(a,"phone_number",vi);e(a,"first_name",g(wi));e(a,"last_name",g(wi));var m=a.home_address||{};e(m,"street",g(xi));e(m,"city",g(xi));e(m,"postal_code",g(yi));e(m,"region",g(xi));e(m,"country",g(yi));for(var n=ab(a.address||{}),p=
0;p<n.length;p++){var q=n[p];f(q,"first_name",wi,p);f(q,"last_name",wi,p);f(q,"street",xi,p);f(q,"city",xi,p);f(q,"postal_code",yi,p);f(q,"region",xi,p);f(q,"country",yi,p)}return k},Ai=function(a){var b=a?zi(a):[];return qi({Vd:b})},Bi=function(a){return a&&a!=null&&Object.keys(a).length>0&&A.Promise?zi(a).some(function(b){return b.value&&fi(b.name)&&!Th.test(b.value)}):!1},ri=function(a){var b=zi(a);return Ci(b)},si=function(a){return a==null?"":z(a)?lb(String(a)):"e0"},yi=function(a){return a.replace(Di,
"")},wi=function(a){return xi(a.replace(/\s/g,""))},xi=function(a){return lb(a.replace(Ei,"").toLowerCase())},vi=function(a){a=a.replace(/[\s-()/.]/g,"");a.charAt(0)!=="+"&&(a="+"+a);return Fi.test(a)?a:"e0"},ui=function(a){var b=a.toLowerCase().split("@");if(b.length===2){var c=b[0];/^(gmail|googlemail)\./.test(b[1])&&(c=c.replace(/\./g,""));c=c+"@"+b[1];if(Gi.test(c))return c}return"e0"},Ci=function(a){if(!a.some(function(c){return c.value&&fi(c.name)}))return Promise.resolve({Vd:a});if(!A.Promise)return Promise.resolve({Vd:[]});
var b;if(R(58)||R(96))b=Cc();return Promise.all(a.map(function(c){return c.value&&fi(c.name)?Vh(c.value).then(function(d){c.value=d}):Promise.resolve()})).then(function(){var c={Vd:a};if(b!==void 0){var d=Cc();b&&d&&(c.time=Math.round(d)-Math.round(b))}return c}).catch(function(){return{Vd:[]}})},Ei=/[0-9`~!@#$%^&*()_\-+=:;<>,.?|/\\[\]]/g,Gi=/^\S+@\S+\.\S+$/,Fi=/^\+\d{10,15}$/,Di=/[.~]/g,gi=/^[0-9A-Za-z_-]{43}$/,Hi={},ei=(Hi.email="em",Hi.phone_number="pn",Hi.first_name="fn",Hi.last_name="ln",Hi.street=
"sa",Hi.city="ct",Hi.region="rg",Hi.country="co",Hi.postal_code="pc",Hi.error_code="ec",Hi),Ii={},ti=(Ii.email="sha256_email_address",Ii.phone_number="sha256_phone_number",Ii.first_name="sha256_first_name",Ii.last_name="sha256_last_name",Ii.street="sha256_street",Ii);var ki=Object.freeze(["email","phone_number","first_name","last_name","street"]);var Ki={Kn:'101925629~102067555~102067808~102081485~102198178'};var Li={},Mi=A.google_tag_manager=A.google_tag_manager||{};Li.Bh="51e0";Li.Ne=Number("0")||0;Li.vb="dataLayer";Li.Mn="ChEIgLOYvAYQlYjLwt67sdqYARIlAEo2/qBe62SZHP89zm/w2r2X2cZzCLnWeFvbyUSJNUfanXJ9pBoClW0\x3d";var Ni={__cl:1,__ecl:1,__ehl:1,__evl:1,__fal:1,__fil:1,__fsl:1,__hl:1,__jel:1,__lcl:1,__sdl:1,__tl:1,__ytl:1},Oi={__paused:1,__tg:1},Pi;for(Pi in Ni)Ni.hasOwnProperty(Pi)&&(Oi[Pi]=1);var Qi=jb("true"),Ri=!1,Si,Ti=!1;Ti=!0;
Si=Ti;var Ui,Vi=!1;Ui=Vi;var Wi,Xi=!1;Wi=Xi;Li.Ef="www.googletagmanager.com";var Yi=""+Li.Ef+(Si?"/gtag/js":"/gtm.js"),Zi=null,$i=null,aj={},bj={};function cj(){var a=Mi.sequence||1;Mi.sequence=a+1;return a}Li.bl="true";var dj="";Li.Ch=dj;var ej=function(){this.j=new Set},gj=function(){return Array.from(fj.Va.j).join("~")},fj=new function(){this.Va=new ej;this.C=!1;this.j=0;this.P=this.aa=this.Eb=this.K="";this.H=!1};function hj(){var a=fj.K.length;return fj.K[a-1]==="/"?fj.K.substring(0,a-1):fj.K}function ij(){return fj.C?R(82)?fj.j===0:fj.j!==1:!1}function jj(a){for(var b={},c=l(a.split("|")),d=c.next();!d.done;d=c.next())b[d.value]=!0;return b}var kj=new fb,lj={},mj={},pj={name:Li.vb,set:function(a,b){Rc(vb(a,b),lj);nj()},get:function(a){return oj(a,2)},reset:function(){kj=new fb;lj={};nj()}};function oj(a,b){return b!=2?kj.get(a):qj(a)}function qj(a,b){var c=a.split(".");b=b||[];for(var d=lj,e=0;e<c.length;e++){if(d===null)return!1;if(d===void 0)break;d=d[c[e]];if(b.indexOf(d)!==-1)return}return d}function rj(a,b){mj.hasOwnProperty(a)||(kj.set(a,b),Rc(vb(a,b),lj),nj())}
function sj(){for(var a=["gtm.allowlist","gtm.blocklist","gtm.whitelist","gtm.blacklist","tagTypeBlacklist"],b=0;b<a.length;b++){var c=a[b],d=oj(c,1);if(Array.isArray(d)||Qc(d))d=Rc(d,null);mj[c]=d}}function nj(a){gb(mj,function(b,c){kj.set(b,c);Rc(vb(b),lj);Rc(vb(b,c),lj);a&&delete mj[b]})}function tj(a,b){var c,d=(b===void 0?2:b)!==1?qj(a):kj.get(a);Oc(d)==="array"||Oc(d)==="object"?c=Rc(d,null):c=d;return c};
var uj=function(a,b,c){if(!c)return!1;for(var d=String(c.value),e,f=d.replace(/\["?'?/g,".").replace(/"?'?\]/g,"").split(","),g=0;g<f.length;g++){var k=f[g].trim();if(k&&!sb(k,"#")&&!sb(k,".")){if(sb(k,"dataLayer."))e=oj(k.substring(10));else{var m=k.split(".");e=A[m.shift()];for(var n=0;n<m.length;n++)e=e&&e[m[n]]}if(e!==void 0)break}}if(e===void 0&&Oh)try{var p=Kh(d);if(p&&p.length>0){e=[];for(var q=0;q<p.length&&q<(b==="email"||b==="phone_number"?5:1);q++)e.push(tc(p[q])||lb(p[q].value));e=e.length===
1?e[0]:e}}catch(r){U(149)}return e?(a[b]=e,!0):!1},vj=function(a){if(a){var b={},c=!1;c=uj(b,"email",a.email)||c;c=uj(b,"phone_number",a.phone)||c;b.address=[];for(var d=a.name_and_address||[],e=0;e<d.length;e++){var f={};c=uj(f,"first_name",d[e].first_name)||c;c=uj(f,"last_name",d[e].last_name)||c;c=uj(f,"street",d[e].street)||c;c=uj(f,"city",d[e].city)||c;c=uj(f,"region",d[e].region)||c;c=uj(f,"country",d[e].country)||c;c=uj(f,"postal_code",d[e].postal_code)||c;b.address.push(f)}return c?b:void 0}},
wj=function(a,b){switch(a.enhanced_conversions_mode){case "manual":if(b&&Qc(b))return b;var c=a.enhanced_conversions_manual_var;if(c!==void 0)return c;var d=A.enhanced_conversion_data;d&&U(154);return d;case "automatic":return vj(a[N.g.Tg])}},xj=function(a){return Qc(a)?!!a.enable_code:!1};var yj=/:[0-9]+$/,zj=/^\d+\.fls\.doubleclick\.net$/;function Aj(a,b,c,d){for(var e=[],f=l(a.split("&")),g=f.next();!g.done;g=f.next()){var k=l(g.value.split("=")),m=k.next().value,n=sa(k);if(decodeURIComponent(m.replace(/\+/g," "))===b){var p=n.join("=");if(!c)return d?p:decodeURIComponent(p.replace(/\+/g," "));e.push(d?p:decodeURIComponent(p.replace(/\+/g," ")))}}return c?e:void 0}
function Bj(a,b,c,d,e){b&&(b=String(b).toLowerCase());if(b==="protocol"||b==="port")a.protocol=Cj(a.protocol)||Cj(A.location.protocol);b==="port"?a.port=String(Number(a.hostname?a.port:A.location.port)||(a.protocol==="http"?80:a.protocol==="https"?443:"")):b==="host"&&(a.hostname=(a.hostname||A.location.hostname).replace(yj,"").toLowerCase());return Dj(a,b,c,d,e)}
function Dj(a,b,c,d,e){var f,g=Cj(a.protocol);b&&(b=String(b).toLowerCase());switch(b){case "url_no_fragment":f=Ej(a);break;case "protocol":f=g;break;case "host":f=a.hostname.replace(yj,"").toLowerCase();if(c){var k=/^www\d*\./.exec(f);k&&k[0]&&(f=f.substring(k[0].length))}break;case "port":f=String(Number(a.port)||(g==="http"?80:g==="https"?443:""));break;case "path":a.pathname||a.hostname||Va("TAGGING",1);f=a.pathname.substring(0,1)==="/"?a.pathname:"/"+a.pathname;var m=f.split("/");(d||[]).indexOf(m[m.length-
1])>=0&&(m[m.length-1]="");f=m.join("/");break;case "query":f=a.search.replace("?","");e&&(f=Aj(f,e,!1));break;case "extension":var n=a.pathname.split(".");f=n.length>1?n[n.length-1]:"";f=f.split("/")[0];break;case "fragment":f=a.hash.replace("#","");break;default:f=a&&a.href}return f}function Cj(a){return a?a.replace(":","").toLowerCase():""}function Ej(a){var b="";if(a&&a.href){var c=a.href.indexOf("#");b=c<0?a.href:a.href.substring(0,c)}return b}var Fj={},Gj=0;
function Hj(a){var b=Fj[a];if(!b){var c=E.createElement("a");a&&(c.href=a);var d=c.pathname;d[0]!=="/"&&(a||Va("TAGGING",1),d="/"+d);var e=c.hostname.replace(yj,"");b={href:c.href,protocol:c.protocol,host:c.host,hostname:e,pathname:d,search:c.search,hash:c.hash,port:c.port};Gj<5&&(Fj[a]=b,Gj++)}return b}function Ij(a){var b=Hj(A.location.href),c=Bj(b,"host",!1);if(c&&c.match(zj)){var d=Bj(b,"path");if(d){var e=d.split(a+"=");if(e.length>1)return e[1].split(";")[0].split("?")[0]}}};var Jj={"https://www.google.com":"/g","https://www.googleadservices.com":"/as","https://pagead2.googlesyndication.com":"/gs"};function Kj(a,b){if(a){var c=""+a;c.indexOf("http://")!==0&&c.indexOf("https://")!==0&&(c="https://"+c);c[c.length-1]==="/"&&(c=c.substring(0,c.length-1));return Hj(""+c+b).href}}function Lj(a,b){if(ij()||Ui)return Kj(a,b)}function Mj(){return!!Li.Ch&&Li.Ch.split("@@").join("")!=="SGTM_TOKEN"}
function Nj(a){for(var b=l([N.g.Oc,N.g.Db]),c=b.next();!c.done;c=b.next()){var d=V(a,c.value);if(d)return d}}function Oj(a,b){return ij()?""+hj()+(b?Jj[a]||"":""):a};function Pj(a){var b=String(a[Ge.xa]||"").replace(/_/g,"");return sb(b,"cvt")?"cvt":b}var Qj=A.location.search.indexOf("?gtm_latency=")>=0||A.location.search.indexOf("&gtm_latency=")>=0;var Rj={sampleRate:"0.005000",Xk:"",Jn:"0.01"},Sj=Math.random(),Tj;if(!(Tj=Qj)){var Uj=Rj.sampleRate;Tj=Sj<Number(Uj)}var Vj=Tj,Wj=(fc==null?void 0:fc.includes("gtm_debug=d"))||Qj||Sj>=1-Number(Rj.Jn);var Xj=/gtag[.\/]js/,Yj=/gtm[.\/]js/,Zj=!1;function ak(a){if(Zj)return"1";var b,c=(b=a.scriptElement)==null?void 0:b.src;if(c){if(Xj.test(c))return"3";if(Yj.test(c))return"2"}return"0"}function bk(a,b){var c=ck();c.pending||(c.pending=[]);bb(c.pending,function(d){return d.target.ctid===a.ctid&&d.target.isDestination===a.isDestination})||c.pending.push({target:a,onLoad:b})}function dk(){var a=A.google_tags_first_party;Array.isArray(a)||(a=[]);for(var b={},c=l(a),d=c.next();!d.done;d=c.next())b[d.value]=!0;return Object.freeze(b)}
var ek=function(){this.container={};this.destination={};this.canonical={};this.pending=[];this.siloed=[];this.injectedFirstPartyContainers={};this.injectedFirstPartyContainers=dk()};
function ck(){var a=gc("google_tag_data",{}),b=a.tidr;b&&typeof b==="object"||(b=new ek,a.tidr=b);var c=b;c.container||(c.container={});c.destination||(c.destination={});c.canonical||(c.canonical={});c.pending||(c.pending=[]);c.siloed||(c.siloed=[]);c.injectedFirstPartyContainers||(c.injectedFirstPartyContainers=dk());return c};var fk={},gk=!1,Nf={ctid:"G-E48RQQ760P",canonicalContainerId:"169864144",Gk:"G-E48RQQ760P|GT-MB83GG7",Hk:"G-E48RQQ760P"};fk.Ke=jb("");function hk(){return fk.Ke&&ik().some(function(a){return a===Nf.ctid})}function jk(){var a=kk();return gk?a.map(lk):a}
function nk(){var a=ik(),b=gk?a.map(lk):a;if(R(128)&&!gk)for(var c=l([].concat(ta(b))),d=c.next();!d.done;d=c.next()){var e=lk(d.value),f=ck().destination[e];f&&f.state!==0||b.push(e)}return b}function ok(){return pk(Nf.ctid)}function qk(){return pk(Nf.canonicalContainerId||"_"+Nf.ctid)}function kk(){return Nf.Gk?Nf.Gk.split("|"):[Nf.ctid]}function ik(){return Nf.Hk?Nf.Hk.split("|"):[]}function rk(){var a=sk(tk()),b=a&&a.parent;if(b)return sk(b)}
function sk(a){var b=ck();return a.isDestination?b.destination[a.ctid]:b.container[a.ctid]}function pk(a){return gk?lk(a):a}function lk(a){return"siloed_"+a}function uk(a){return R(128)?vk(a):gk?vk(a):a}function vk(a){a=String(a);return sb(a,"siloed_")?a.substring(7):a}
function wk(){if(fj.H){var a=ck();if(a.siloed){for(var b=[],c=kk().map(lk),d=ik().map(lk),e={},f=0;f<a.siloed.length;e={mg:void 0},f++)e.mg=a.siloed[f],!gk&&bb(e.mg.isDestination?d:c,function(g){return function(k){return k===g.mg.ctid}}(e))?gk=!0:b.push(e.mg);a.siloed=b}}}
function xk(){var a=ck();if(a.pending){for(var b,c=[],d=!1,e=jk(),f=nk(),g={},k=0;k<a.pending.length;g={vf:void 0},k++)g.vf=a.pending[k],bb(g.vf.target.isDestination?f:e,function(m){return function(n){return n===m.vf.target.ctid}}(g))?d||(b=g.vf.onLoad,d=!0):c.push(g.vf);a.pending=c;if(b)try{b(qk())}catch(m){}}}
function yk(){for(var a=Nf.ctid,b=jk(),c=nk(),d=function(p,q){var r={canonicalContainerId:Nf.canonicalContainerId,scriptContainerId:a,state:2,containers:b.slice(),destinations:c.slice()};ec&&(r.scriptElement=ec);fc&&(r.scriptSource=fc);if(rk()===void 0){var u;a:{if((r.scriptContainerId||"").indexOf("GTM-")>=0){var v;b:{var t,w=(t=r.scriptElement)==null?void 0:t.src;if(w){for(var x=fj.C,y=Hj(w),B=x?y.pathname:""+y.hostname+y.pathname,C=E.scripts,D="",G=0;G<C.length;++G){var K=C[G];if(!(K.innerHTML.length===
0||!x&&K.innerHTML.indexOf(r.scriptContainerId||"SHOULD_NOT_BE_SET")<0||K.innerHTML.indexOf(B)<0)){if(K.innerHTML.indexOf("(function(w,d,s,l,i)")>=0){v=String(G);break b}D=String(G)}}if(D){v=D;break b}}v=void 0}var F=v;if(F){Zj=!0;u=F;break a}}var S=[].slice.call(document.scripts);u=r.scriptElement?String(S.indexOf(r.scriptElement)):"-1"}r.htmlLoadOrder=u;r.loadScriptType=ak(r)}var M=q?e.destination:e.container,T=M[p];T?(q&&T.state===0&&U(93),Object.assign(T,r)):M[p]=r},e=ck(),f=l(b),g=f.next();!g.done;g=
f.next())d(g.value,!1);for(var k=l(c),m=k.next();!m.done;m=k.next()){var n=m.value;R(128)&&!gk&&sb(n,"siloed_")?delete e.destination[n]:d(n,!0)}e.canonical[qk()]={};xk()}function zk(a){return!!ck().container[a]}function Ak(a){var b=ck().destination[a];return!!b&&!!b.state}function tk(){return{ctid:ok(),isDestination:fk.Ke}}function Bk(a){var b=ck();(b.siloed=b.siloed||[]).push(a)}function Ck(){var a=ck().container,b;for(b in a)if(a.hasOwnProperty(b)&&a[b].state===1)return!0;return!1}
function Dk(){var a={};gb(ck().destination,function(b,c){c.state===0&&(a[vk(b)]=c)});return a}function Ek(a){return!!(a&&a.parent&&a.context&&a.context.source===1&&a.parent.ctid.indexOf("GTM-")!==0)}function Fk(a){var b=ck();return b.destination[a]?1:b.destination[lk(a)]?2:0}var Gk="/td?id="+Nf.ctid,Hk=["v","t","pid","dl","tdp"],Ik=["mcc"],Jk={},Kk={};function Lk(a,b,c){Kk[a]=b;(c===void 0||c)&&Mk(a)}function Mk(a,b){if(Jk[a]===void 0||(b===void 0?0:b))Jk[a]=!0}function Nk(a){a=a===void 0?!1:a;var b=Object.keys(Jk).filter(function(c){return Jk[c]===!0&&Kk[c]!==void 0&&(a||!Ik.includes(c))}).map(function(c){var d=Kk[c];typeof d==="function"&&(d=d());return d?"&"+c+"="+d:""}).join("");return""+Oj("https://www.googletagmanager.com")+Gk+(""+b+"&z=0")}
function Ok(){Object.keys(Jk).forEach(function(a){Hk.indexOf(a)<0&&(Jk[a]=!1)})}function Pk(a){a=a===void 0?!1:a;if(Wj&&Nf.ctid){var b=Nk(a);a?zc(b):pc(b);Ok()}}var Qk={};function Rk(){Object.keys(Jk).filter(function(a){return Jk[a]&&!Hk.includes(a)}).length>0&&Pk(!0)}var Sk=db();function Tk(){Sk=db()}function Uk(){Lk("v","3");Lk("t","t");Lk("pid",function(){return String(Sk)});qc(A,"pagehide",Rk);A.setInterval(Tk,864E5)}function Vk(){var a=gc("google_tag_data",{});return a.ics=a.ics||new Wk}var Wk=function(){this.entries={};this.waitPeriodTimedOut=this.wasSetLate=this.accessedAny=this.accessedDefault=this.usedImplicit=this.usedUpdate=this.usedDefault=this.usedDeclare=this.active=!1;this.j=[]};
Wk.prototype.default=function(a,b,c,d,e,f,g){this.usedDefault||this.usedDeclare||!this.accessedDefault&&!this.accessedAny||(this.wasSetLate=!0);this.usedDefault=this.active=!0;Va("TAGGING",19);b==null?Va("TAGGING",18):Xk(this,a,b==="granted",c,d,e,f,g)};Wk.prototype.waitForUpdate=function(a,b,c){for(var d=0;d<a.length;d++)Xk(this,a[d],void 0,void 0,"","",b,c)};
var Xk=function(a,b,c,d,e,f,g,k){var m=a.entries,n=m[b]||{},p=n.region,q=d&&z(d)?d.toUpperCase():void 0;e=e.toUpperCase();f=f.toUpperCase();if(e===""||q===f||(q===e?p!==f:!q&&!p)){var r=!!(g&&g>0&&n.update===void 0),u={region:q,declare_region:n.declare_region,implicit:n.implicit,default:c!==void 0?c:n.default,declare:n.declare,update:n.update,quiet:r};if(e!==""||n.default!==!1)m[b]=u;r&&A.setTimeout(function(){m[b]===u&&u.quiet&&(Va("TAGGING",2),a.waitPeriodTimedOut=!0,a.clearTimeout(b,void 0,k),
a.notifyListeners())},g)}};h=Wk.prototype;h.clearTimeout=function(a,b,c){var d=[a],e=c.delegatedConsentTypes,f;for(f in e)e.hasOwnProperty(f)&&e[f]===a&&d.push(f);var g=this.entries[a]||{},k=this.getConsentState(a,c);if(g.quiet){g.quiet=!1;for(var m=l(d),n=m.next();!n.done;n=m.next())Yk(this,n.value)}else if(b!==void 0&&k!==b)for(var p=l(d),q=p.next();!q.done;q=p.next())Yk(this,q.value)};
h.update=function(a,b,c){this.usedDefault||this.usedDeclare||this.usedUpdate||!this.accessedAny||(this.wasSetLate=!0);this.usedUpdate=this.active=!0;if(b!=null){var d=this.getConsentState(a,c),e=this.entries;(e[a]=e[a]||{}).update=b==="granted";this.clearTimeout(a,d,c)}};
h.declare=function(a,b,c,d,e){this.usedDeclare=this.active=!0;var f=this.entries,g=f[a]||{},k=g.declare_region,m=c&&z(c)?c.toUpperCase():void 0;d=d.toUpperCase();e=e.toUpperCase();if(d===""||m===e||(m===d?k!==e:!m&&!k)){var n={region:g.region,declare_region:m,declare:b==="granted",implicit:g.implicit,default:g.default,update:g.update,quiet:g.quiet};if(d!==""||g.declare!==!1)f[a]=n}};h.implicit=function(a,b){this.usedImplicit=!0;var c=this.entries,d=c[a]=c[a]||{};d.implicit!==!1&&(d.implicit=b==="granted")};
h.getConsentState=function(a,b){var c=this.entries,d=c[a]||{},e=d.update;if(e!==void 0)return e?1:2;if(b.usedContainerScopedDefaults){var f=b.containerScopedDefaults[a];if(f===3)return 1;if(f===2)return 2}else if(e=d.default,e!==void 0)return e?1:2;if(b==null?0:b.delegatedConsentTypes.hasOwnProperty(a)){var g=b.delegatedConsentTypes[a],k=c[g]||{};e=k.update;if(e!==void 0)return e?1:2;if(b.usedContainerScopedDefaults){var m=b.containerScopedDefaults[g];if(m===3)return 1;if(m===2)return 2}else if(e=
k.default,e!==void 0)return e?1:2}e=d.declare;if(e!==void 0)return e?1:2;e=d.implicit;return e!==void 0?e?3:4:0};h.addListener=function(a,b){this.j.push({consentTypes:a,Nd:b})};var Yk=function(a,b){for(var c=0;c<a.j.length;++c){var d=a.j[c];Array.isArray(d.consentTypes)&&d.consentTypes.indexOf(b)!==-1&&(d.Ik=!0)}};Wk.prototype.notifyListeners=function(a,b){for(var c=0;c<this.j.length;++c){var d=this.j[c];if(d.Ik){d.Ik=!1;try{d.Nd({consentEventId:a,consentPriorityId:b})}catch(e){}}}};var Zk=!1,$k=!1,al={},bl={delegatedConsentTypes:{},corePlatformServices:{},usedCorePlatformServices:!1,selectedAllCorePlatformServices:!1,containerScopedDefaults:(al.ad_storage=1,al.analytics_storage=1,al.ad_user_data=1,al.ad_personalization=1,al),usedContainerScopedDefaults:!1};function cl(a){var b=Vk();b.accessedAny=!0;return(z(a)?[a]:a).every(function(c){switch(b.getConsentState(c,bl)){case 1:case 3:return!0;case 2:case 4:return!1;default:return!0}})}
function dl(a){var b=Vk();b.accessedAny=!0;return b.getConsentState(a,bl)}function el(a){for(var b={},c=l(a),d=c.next();!d.done;d=c.next()){var e=d.value;b[e]=bl.corePlatformServices[e]!==!1}return b}function fl(a){var b=Vk();b.accessedAny=!0;return!(b.entries[a]||{}).quiet}
function gl(){if(!Zh(8))return!1;var a=Vk();a.accessedAny=!0;if(a.active)return!0;if(!bl.usedContainerScopedDefaults)return!1;for(var b=l(Object.keys(bl.containerScopedDefaults)),c=b.next();!c.done;c=b.next())if(bl.containerScopedDefaults[c.value]!==1)return!0;return!1}function hl(a,b){Vk().addListener(a,b)}function il(a,b){Vk().notifyListeners(a,b)}
function jl(a,b){function c(){for(var e=0;e<b.length;e++)if(!fl(b[e]))return!0;return!1}if(c()){var d=!1;hl(b,function(e){d||c()||(d=!0,a(e))})}else a({})}
function kl(a,b){function c(){for(var k=[],m=0;m<e.length;m++){var n=e[m];cl(n)&&!f[n]&&k.push(n)}return k}function d(k){for(var m=0;m<k.length;m++)f[k[m]]=!0}var e=z(b)?[b]:b,f={},g=c();g.length!==e.length&&(d(g),hl(e,function(k){function m(q){q.length!==0&&(d(q),k.consentTypes=q,a(k))}var n=c();if(n.length!==0){var p=Object.keys(f).length;n.length+p>=e.length?m(n):A.setTimeout(function(){m(c())},500)}}))};var ll=["ad_storage","analytics_storage","ad_user_data","ad_personalization"],ml=[N.g.Oc,N.g.Db,N.g.nc,N.g.ib,N.g.pb,N.g.Ba,N.g.sa,N.g.Fa,N.g.Na,N.g.lb],nl=!1,ol=!1,pl={},ql={};function rl(){!ol&&nl&&(ll.some(function(a){return bl.containerScopedDefaults[a]!==1})||sl("mbc"));ol=!0}function sl(a){Wj&&(Lk(a,"1"),Pk())}function tl(a,b){if(!pl[b]&&(pl[b]=!0,ql[b]))for(var c=l(ml),d=c.next();!d.done;d=c.next())if(a.hasOwnProperty(d.value)){sl("erc");break}}function ul(a){Va("HEALTH",a)};var vl;try{vl=JSON.parse(Sa("eyIwIjoiVVMiLCIxIjoiVVMtTkMiLCIyIjpmYWxzZSwiMyI6IiIsIjQiOiIiLCI1Ijp0cnVlLCI2IjpmYWxzZSwiNyI6ImFkX3N0b3JhZ2V8YW5hbHl0aWNzX3N0b3JhZ2V8YWRfdXNlcl9kYXRhfGFkX3BlcnNvbmFsaXphdGlvbiJ9"))}catch(a){U(123),ul(2),vl={}}function wl(){return vl["0"]||""}function xl(){return vl["1"]||""}function yl(){var a=!1;a=!!vl["2"];return a}function zl(){return vl["6"]!==!1}function Al(){var a="";a=vl["4"]||"";return a}
function Bl(){var a=!1;a=!!vl["5"];return a}function Cl(){var a="";a=vl["3"]||"";return a}function Dl(a){return a&&a.indexOf("pending:")===0?El(a.substr(8)):!1}function El(a){if(a==null||a.length===0)return!1;var b=Number(a),c=nb();return b<c+3E5&&b>c-9E5};var Fl="",Gl="",Hl={ctid:"",isDestination:!1},Il=!1,Jl=!1,Kl=!1,Ll=!1,Ml=!1,Nl=!1,Ol=[];function Pl(a){if(Nl&&Ml){var b=gc('google.tagmanager.ta.prodqueue',[]);b.length>=50&&b.shift();b.push(a)}else{var c;(c=Ol)==null||c.push(a)}}function Ql(){Rl();rc(E,"TAProdDebugSignal",Ql)}function Rl(){if(!Kl){Kl=!0;Sl();var a=Ol;Ol=void 0;a==null||a.forEach(function(b){Pl(b)})}}
function Sl(){var a=E.documentElement.getAttribute("data-tag-assistant-prod-present");El(a)?Ml=!0:!Dl(a)||Jl||Ll||(Ll=!0,qc(E,"TAProdDebugSignal",Ql,!1),A.setTimeout(function(){Rl();Jl=!0},200))}
function Tl(a,b){var c;c=c===void 0?{}:c;c.groupId=Fl;var d,e={publicId:Gl};c.eventId!=null&&(e.eventId=c.eventId);c.priorityId!=null&&(e.priorityId=c.priorityId);c.eventName&&(e.eventName=c.eventName);c.groupId&&(e.groupId=c.groupId);c.tagName&&(e.tagName=c.tagName);d={containerProduct:"GTM",key:e,version:'1',messageType:"INIT_PROD"};Il&&(d.containerProduct="OGT");d.key.targetRef=Hl;d.containerLoadSource=a!=null?a:0;b&&(d.parentTargetReference=b);Pl(d)};var Ul=[N.g.N,N.g.U,N.g.O,N.g.za],Vl,Wl;function Xl(a){for(var b=a[N.g.ub],c=Array.isArray(b)?b:[b],d={ff:0};d.ff<c.length;d={ff:d.ff},++d.ff)gb(a,function(e){return function(f,g){if(f!==N.g.ub){var k=c[e.ff],m=wl(),n=xl();$k=!0;Zk&&Va("TAGGING",20);Vk().declare(f,g,k,m,n)}}}(d))}
function Yl(a){rl();!Wl&&Vl&&sl("crc");Wl=!0;var b=a[N.g.ub];b&&U(40);var c=a[N.g.be];c&&U(41);for(var d=Array.isArray(b)?b:[b],e={hf:0};e.hf<d.length;e={hf:e.hf},++e.hf)gb(a,function(f){return function(g,k){if(g!==N.g.ub&&g!==N.g.be){var m=d[f.hf],n=Number(c),p=wl(),q=xl();n=n===void 0?0:n;Zk=!0;$k&&Va("TAGGING",20);Vk().default(g,k,m,p,q,n,bl)}}}(e))}
function Zl(a){bl.usedContainerScopedDefaults=!0;var b=a[N.g.ub];if(b){var c=Array.isArray(b)?b:[b];if(!c.includes(xl())&&!c.includes(wl()))return}gb(a,function(d,e){switch(d){case "ad_storage":case "analytics_storage":case "ad_user_data":case "ad_personalization":break;default:return}bl.usedContainerScopedDefaults=!0;bl.containerScopedDefaults[d]=e==="granted"?3:2})}function $l(a,b){rl();Vl=!0;gb(a,function(c,d){Zk=!0;$k&&Va("TAGGING",20);Vk().update(c,d,bl)});il(b.eventId,b.priorityId)}
function am(a){a.hasOwnProperty("all")&&(bl.selectedAllCorePlatformServices=!0,gb(zh,function(b){bl.corePlatformServices[b]=a.all==="granted";bl.usedCorePlatformServices=!0}));gb(a,function(b,c){b!=="all"&&(bl.corePlatformServices[b]=c==="granted",bl.usedCorePlatformServices=!0)})}function W(a){Array.isArray(a)||(a=[a]);return a.every(function(b){return cl(b)})}function bm(a,b){hl(a,b)}function cm(a,b){kl(a,b)}function dm(a,b){jl(a,b)}
function em(){var a=[N.g.N,N.g.za,N.g.O];Vk().waitForUpdate(a,500,bl)}function fm(a){for(var b=l(a),c=b.next();!c.done;c=b.next()){var d=c.value;Vk().clearTimeout(d,void 0,bl)}il()}var gm=!1,hm=[];var im={jk:"service_worker_endpoint",Dh:"shared_user_id",Eh:"shared_user_id_requested",Pe:"shared_user_id_source",Df:"cookie_deprecation_label"},jm;function km(a){if(!jm){jm={};for(var b=l(Object.keys(im)),c=b.next();!c.done;c=b.next())jm[im[c.value]]=!0}return!!jm[a]}
function lm(a,b){b=b===void 0?!1:b;if(km(a)){var c,d,e=(d=(c=gc("google_tag_data",{})).xcd)!=null?d:c.xcd={};if(e[a])return e[a];if(b){var f=void 0,g=1,k={},m={set:function(n){f=n;m.notify()},get:function(){return f},subscribe:function(n){k[String(g)]=n;return g++},unsubscribe:function(n){var p=String(n);return k.hasOwnProperty(p)?(delete k[p],!0):!1},notify:function(){for(var n=l(Object.keys(k)),p=n.next();!p.done;p=n.next()){var q=p.value;try{k[q](a,f)}catch(r){}}}};return e[a]=m}}}
function mm(a,b){var c=lm(a,!0);c&&c.set(b)}function nm(a){var b;return(b=lm(a))==null?void 0:b.get()}function om(a,b){if(typeof b==="function"){var c;return(c=lm(a,!0))==null?void 0:c.subscribe(b)}}function pm(a,b){var c=lm(a);return c?c.unsubscribe(b):!1};function qm(){if(Mi.pscdl!==void 0)nm(im.Df)===void 0&&mm(im.Df,Mi.pscdl);else{var a=function(c){Mi.pscdl=c;mm(im.Df,c)},b=function(){a("error")};try{cc.cookieDeprecationLabel?(a("pending"),cc.cookieDeprecationLabel.getValue().then(a).catch(b)):a("noapi")}catch(c){b(c)}}};function rm(a,b){b&&gb(b,function(c,d){typeof d!=="object"&&d!==void 0&&(a["1p."+c]=String(d))})};var sm=/[A-Z]+/,tm=/\s/;function um(a,b){if(z(a)){a=lb(a);var c=a.indexOf("-");if(!(c<0)){var d=a.substring(0,c);if(sm.test(d)){var e=a.substring(c+1),f;if(b){var g=function(n){var p=n.indexOf("/");return p<0?[n]:[n.substring(0,p),n.substring(p+1)]};f=g(e);if(d==="DC"&&f.length===2){var k=g(f[1]);k.length===2&&(f[1]=k[0],f.push(k[1]))}}else{f=e.split("/");for(var m=0;m<f.length;m++)if(!f[m]||tm.test(f[m])&&(d!=="AW"||m!==1))return}return{id:a,prefix:d,destinationId:d+"-"+f[0],ids:f}}}}}
function vm(a,b){for(var c={},d=0;d<a.length;++d){var e=um(a[d],b);e&&(c[e.id]=e)}wm(c);var f=[];gb(c,function(g,k){f.push(k)});return f}function wm(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];d.prefix==="AW"&&d.ids[xm[2]]&&b.push(d.destinationId)}for(var e=0;e<b.length;++e)delete a[b[e]]}var ym={},xm=(ym[0]=0,ym[1]=0,ym[2]=1,ym[3]=0,ym[4]=1,ym[5]=2,ym[6]=0,ym[7]=0,ym[8]=0,ym);var zm=Number('')||500,Am={},Bm={},Cm={initialized:11,complete:12,interactive:13},Dm={},Em=Object.freeze((Dm[N.g.Oa]=!0,Dm)),Fm=void 0;function Gm(a,b){if(b.length&&Wj){var c;(c=Am)[a]!=null||(c[a]=[]);Bm[a]!=null||(Bm[a]=[]);var d=b.filter(function(e){return!Bm[a].includes(e)});Am[a].push.apply(Am[a],ta(d));Bm[a].push.apply(Bm[a],ta(d));!Fm&&d.length>0&&(Mk("tdc",!0),Fm=A.setTimeout(function(){Pk();Am={};Fm=void 0},zm))}}
function Hm(a,b,c){if(Wj&&a==="config"){var d,e=(d=um(b))==null?void 0:d.ids;if(!(e&&e.length>1)){var f,g=gc("google_tag_data",{});g.td||(g.td={});f=g.td;var k=Rc(c.K);Rc(c.j,k);var m=[],n;for(n in f)f.hasOwnProperty(n)&&Im(f[n],k).length&&m.push(n);m.length&&(Gm(b,m),Va("TAGGING",Cm[E.readyState]||14));f[b]=k}}}function Jm(a,b){var c={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]=!0);for(var e in a)a.hasOwnProperty(e)&&(c[e]=!0);return c}
function Im(a,b,c,d){c=c===void 0?{}:c;d=d===void 0?"":d;if(a===b)return[];var e=function(r,u){var v;Oc(u)==="object"?v=u[r]:Oc(u)==="array"&&(v=u[r]);return v===void 0?Em[r]:v},f=Jm(a,b),g;for(g in f)if(f.hasOwnProperty(g)){var k=(d?d+".":"")+g,m=e(g,a),n=e(g,b),p=Oc(m)==="object"||Oc(m)==="array",q=Oc(n)==="object"||Oc(n)==="array";if(p&&q)Im(m,n,c,k);else if(p||q||m!==n)c[k]=!0}return Object.keys(c)}
function Km(){Lk("tdc",function(){Fm&&(A.clearTimeout(Fm),Fm=void 0);var a=[],b;for(b in Am)Am.hasOwnProperty(b)&&a.push(b+"*"+Am[b].join("."));return a.length?a.join("!"):void 0},!1)};var Lm=function(a,b,c,d,e,f,g,k,m,n,p){this.eventId=a;this.priorityId=b;this.j=c;this.P=d;this.H=e;this.K=f;this.C=g;this.eventMetadata=k;this.onSuccess=m;this.onFailure=n;this.isGtmEvent=p},Mm=function(a,b){var c=[];switch(b){case 3:c.push(a.j);c.push(a.P);c.push(a.H);c.push(a.K);c.push(a.C);break;case 2:c.push(a.j);break;case 1:c.push(a.P);c.push(a.H);c.push(a.K);c.push(a.C);break;case 4:c.push(a.j),c.push(a.P),c.push(a.H),c.push(a.K)}return c},V=function(a,b,c,d){for(var e=l(Mm(a,d===void 0?3:
d)),f=e.next();!f.done;f=e.next()){var g=f.value;if(g[b]!==void 0)return g[b]}return c},Nm=function(a){for(var b={},c=Mm(a,4),d=l(c),e=d.next();!e.done;e=d.next())for(var f=Object.keys(e.value),g=l(f),k=g.next();!k.done;k=g.next())b[k.value]=1;return Object.keys(b)},Om=function(a,b,c){function d(n){Qc(n)&&gb(n,function(p,q){f=!0;e[p]=q})}var e={},f=!1,g=Mm(a,c===void 0?3:c);g.reverse();for(var k=l(g),m=k.next();!m.done;m=k.next())d(m.value[b]);return f?e:void 0},Pm=function(a){for(var b=[N.g.nd,N.g.jd,
N.g.kd,N.g.ld,N.g.md,N.g.od,N.g.pd],c=Mm(a,3),d=l(c),e=d.next();!e.done;e=d.next()){for(var f=e.value,g={},k=!1,m=l(b),n=m.next();!n.done;n=m.next()){var p=n.value;f[p]!==void 0&&(g[p]=f[p],k=!0)}var q=k?g:void 0;if(q)return q}return{}},Qm=function(a,b){this.eventId=a;this.priorityId=b;this.C={};this.P={};this.j={};this.H={};this.aa={};this.K={};this.eventMetadata={};this.isGtmEvent=!1;this.onSuccess=function(){};this.onFailure=function(){}},Rm=function(a,b){a.C=b;return a},Sm=function(a,b){a.P=b;
return a},Tm=function(a,b){a.j=b;return a},Um=function(a,b){a.H=b;return a},Vm=function(a,b){a.aa=b;return a},Wm=function(a,b){a.K=b;return a},Xm=function(a,b){a.eventMetadata=b||{};return a},Ym=function(a,b){a.onSuccess=b;return a},Zm=function(a,b){a.onFailure=b;return a},$m=function(a,b){a.isGtmEvent=b;return a},an=function(a){return new Lm(a.eventId,a.priorityId,a.C,a.P,a.j,a.H,a.K,a.eventMetadata,a.onSuccess,a.onFailure,a.isGtmEvent)};var bn={Wk:Number("5"),wo:Number("")},cn=[];function dn(a){cn.push(a)}var en="?id="+Nf.ctid,fn=void 0,gn={},hn=void 0,jn=new function(){var a=5;bn.Wk>0&&(a=bn.Wk);this.C=a;this.j=0;this.H=[]},kn=1E3;
function ln(a,b){var c=fn;if(c===void 0)if(b)c=cj();else return"";for(var d=[Oj("https://www.googletagmanager.com"),"/a",en],e=l(cn),f=e.next();!f.done;f=e.next())for(var g=f.value,k=g({eventId:c,dd:!!a}),m=l(k),n=m.next();!n.done;n=m.next()){var p=l(n.value),q=p.next().value,r=p.next().value;d.push("&"+q+"="+r)}d.push("&z=0");return d.join("")}
function mn(){hn&&(A.clearTimeout(hn),hn=void 0);if(fn!==void 0&&nn){var a;(a=gn[fn])||(a=jn.j<jn.C?!1:nb()-jn.H[jn.j%jn.C]<1E3);if(a||kn--<=0)U(1),gn[fn]=!0;else{var b=jn.j++%jn.C;jn.H[b]=nb();var c=ln(!0);pc(c);nn=!1}}}var nn=!1;function on(a){gn[a]||(a!==fn&&(mn(),fn=a),nn=!0,hn||(hn=A.setTimeout(mn,500)),ln().length>=2022&&mn())}var pn=db();function qn(){pn=db()}function rn(){return[["v","3"],["t","t"],["pid",String(pn)]]}var sn={};function tn(a,b,c){Vj&&a!==void 0&&(sn[a]=sn[a]||[],sn[a].push(c+b),on(a))}function un(a){var b=a.eventId,c=a.dd,d=[],e=sn[b]||[];e.length&&d.push(["epr",e.join(".")]);c&&delete sn[b];return d};function vn(a,b){var c=um(pk(a),!0);c&&wn.register(c,b)}function xn(a,b,c,d){var e=um(c,d.isGtmEvent);e&&(Ri&&(d.deferrable=!0),wn.push("event",[b,a],e,d))}function yn(a,b,c,d){var e=um(c,d.isGtmEvent);e&&wn.push("get",[a,b],e,d)}function zn(a){var b=um(pk(a),!0),c;b?c=An(wn,b).j:c={};return c}function Bn(a,b){var c=um(pk(a),!0);if(c){var d=wn,e=Rc(b,null);Rc(An(d,c).j,e);An(d,c).j=e}}
var Cn=function(){this.P={};this.j={};this.C={};this.aa=null;this.K={};this.H=!1;this.status=1},Dn=function(a,b,c,d){this.C=nb();this.j=b;this.args=c;this.messageContext=d;this.type=a},En=function(){this.destinations={};this.j={};this.commands=[]},An=function(a,b){var c=b.destinationId;R(128)&&!gk&&(c=uk(c));return a.destinations[c]=a.destinations[c]||new Cn},Fn=function(a,b,c,d){if(d.j){var e=An(a,d.j),f=e.aa;if(f){var g=d.j.id;R(128)&&!gk&&(g=uk(g));var k=Rc(c,null),m=Rc(e.P[g],null),n=Rc(e.K,null),
p=Rc(e.j,null),q=Rc(a.j,null),r={};if(Vj)try{r=Rc(lj,null)}catch(w){U(72)}var u=d.j.prefix,v=function(w){tn(d.messageContext.eventId,u,w)},t=an($m(Zm(Ym(Xm(Vm(Um(Wm(Tm(Sm(Rm(new Qm(d.messageContext.eventId,d.messageContext.priorityId),k),m),n),p),q),r),d.messageContext.eventMetadata),function(){if(v){var w=v;v=void 0;w("2");if(d.messageContext.onSuccess)d.messageContext.onSuccess()}}),function(){if(v){var w=v;v=void 0;w("3");if(d.messageContext.onFailure)d.messageContext.onFailure()}}),!!d.messageContext.isGtmEvent));
try{tn(d.messageContext.eventId,u,"1"),Hm(d.type,d.j.id,t),f(d.j.id,b,d.C,t)}catch(w){tn(d.messageContext.eventId,u,"4")}}}};En.prototype.register=function(a,b,c){var d=An(this,a);d.status!==3&&(d.aa=b,d.status=3,c&&(Rc(d.j,c),d.j=c),this.flush())};En.prototype.push=function(a,b,c,d){c!==void 0&&(An(this,c).status===1&&(An(this,c).status=2,this.push("require",[{}],c,{})),An(this,c).H&&(d.deferrable=!1));this.commands.push(new Dn(a,c,b,d));d.deferrable||this.flush()};
En.prototype.flush=function(a){for(var b=this,c=[],d=!1,e={};this.commands.length;e={xc:void 0,Uh:void 0}){var f=this.commands[0],g=f.j;if(f.messageContext.deferrable)!g||An(this,g).H?(f.messageContext.deferrable=!1,this.commands.push(f)):c.push(f),this.commands.shift();else{switch(f.type){case "require":if(An(this,g).status!==3&&!a){this.commands.push.apply(this.commands,c);return}break;case "set":gb(f.args[0],function(u,v){Rc(vb(u,v),b.j)});break;case "config":var k=An(this,g);e.xc={};gb(f.args[0],
function(u){return function(v,t){Rc(vb(v,t),u.xc)}}(e));var m=!!e.xc[N.g.uc];delete e.xc[N.g.uc];var n=g.destinationId===g.id;m||(n?k.K={}:k.P[g.id]={});k.H&&m||Fn(this,N.g.da,e.xc,f);k.H=!0;n?Rc(e.xc,k.K):(Rc(e.xc,k.P[g.id]),U(70));d=!0;R(53)&&tl(e.xc,g.id);R(52)&&(nl=!0);break;case "event":e.Uh={};gb(f.args[0],function(u){return function(v,t){Rc(vb(v,t),u.Uh)}}(e));Fn(this,f.args[1],e.Uh,f);var p=void 0;!R(53)||!f.j||(p=f.messageContext.eventMetadata)!=null&&p.em_event||(ql[f.j.id]=!0);R(52)&&(nl=
!0);break;case "get":var q={},r=(q[N.g.Bb]=f.args[0],q[N.g.Pb]=f.args[1],q);Fn(this,N.g.Za,r,f);R(52)&&(nl=!0)}this.commands.shift();Gn(this,f)}}this.commands.push.apply(this.commands,c);d&&this.flush()};var Gn=function(a,b){if(b.type!=="require")if(b.j)for(var c=An(a,b.j).C[b.type]||[],d=0;d<c.length;d++)c[d]();else for(var e in a.destinations)if(a.destinations.hasOwnProperty(e)){var f=a.destinations[e];if(f&&f.C)for(var g=f.C[b.type]||[],k=0;k<g.length;k++)g[k]()}},wn=new En;var Hn=function(a,b){var c=function(){};c.prototype=a.prototype;var d=new c;a.apply(d,Array.prototype.slice.call(arguments,1));return d},In=function(a){var b=a;return function(){if(b){var c=b;b=null;c()}}};var Jn=function(a,b,c){a.addEventListener&&a.addEventListener(b,c,!1)},Kn=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};var Ln,Mn;a:{for(var Nn=["CLOSURE_FLAGS"],On=za,Pn=0;Pn<Nn.length;Pn++)if(On=On[Nn[Pn]],On==null){Mn=null;break a}Mn=On}var Qn=Mn&&Mn[610401301];Ln=Qn!=null?Qn:!1;function Rn(){var a=za.navigator;if(a){var b=a.userAgent;if(b)return b}return""}var Sn,Tn=za.navigator;Sn=Tn?Tn.userAgentData||null:null;function Un(a){return Ln?Sn?Sn.brands.some(function(b){var c;return(c=b.brand)&&c.indexOf(a)!=-1}):!1:!1}function Vn(a){return Rn().indexOf(a)!=-1};function Wn(){return Ln?!!Sn&&Sn.brands.length>0:!1}function Xn(){return Wn()?!1:Vn("Opera")}function Yn(){return Vn("Firefox")||Vn("FxiOS")}function Zn(){return Wn()?Un("Chromium"):(Vn("Chrome")||Vn("CriOS"))&&!(Wn()?0:Vn("Edge"))||Vn("Silk")};var $n=function(a){$n[" "](a);return a};$n[" "]=function(){};var ao=function(a,b,c,d){for(var e=b,f=c.length;(e=a.indexOf(c,e))>=0&&e<d;){var g=a.charCodeAt(e-1);if(g==38||g==63){var k=a.charCodeAt(e+f);if(!k||k==61||k==38||k==35)return e}e+=f+1}return-1},bo=/#|$/,co=function(a,b){var c=a.search(bo),d=ao(a,0,b,c);if(d<0)return null;var e=a.indexOf("&",d);if(e<0||e>c)e=c;d+=b.length+1;return decodeURIComponent(a.slice(d,e!==-1?e:0).replace(/\+/g," "))},eo=/[?&]($|#)/,fo=function(a,b,c){for(var d,e=a.search(bo),f=0,g,k=[];(g=ao(a,f,b,e))>=0;)k.push(a.substring(f,
g)),f=Math.min(a.indexOf("&",g)+1||e,e);k.push(a.slice(f));d=k.join("").replace(eo,"$1");var m,n=c!=null?"="+encodeURIComponent(String(c)):"";var p=b+n;if(p){var q,r=d.indexOf("#");r<0&&(r=d.length);var u=d.indexOf("?"),v;u<0||u>r?(u=r,v=""):v=d.substring(u+1,r);q=[d.slice(0,u),v,d.slice(r)];var t=q[1];q[1]=p?t?t+"&"+p:p:t;m=q[0]+(q[1]?"?"+q[1]:"")+q[2]}else m=d;return m};function go(){return Ln?!!Sn&&!!Sn.platform:!1}function ho(){return Vn("iPhone")&&!Vn("iPod")&&!Vn("iPad")}function io(){ho()||Vn("iPad")||Vn("iPod")};Xn();Wn()||Vn("Trident")||Vn("MSIE");Vn("Edge");!Vn("Gecko")||Rn().toLowerCase().indexOf("webkit")!=-1&&!Vn("Edge")||Vn("Trident")||Vn("MSIE")||Vn("Edge");Rn().toLowerCase().indexOf("webkit")!=-1&&!Vn("Edge")&&Vn("Mobile");go()||Vn("Macintosh");go()||Vn("Windows");(go()?Sn.platform==="Linux":Vn("Linux"))||go()||Vn("CrOS");go()||Vn("Android");ho();Vn("iPad");Vn("iPod");io();Rn().toLowerCase().indexOf("kaios");var jo=function(a){try{var b;if(b=!!a&&a.location.href!=null)a:{try{$n(a.foo);b=!0;break a}catch(c){}b=!1}return b}catch(c){return!1}},ko=function(a,b){if(a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)},lo=function(a){if(A.top==A)return 0;if(a===void 0?0:a){var b=A.location.ancestorOrigins;if(b)return b[b.length-1]==A.location.origin?1:2}return jo(A.top)?1:2},mo=function(a){a=a===void 0?document:a;return a.createElement("img")},no=function(){for(var a=A,b=a;a&&a!=a.parent;)a=
a.parent,jo(a)&&(b=a);return b};function oo(a,b,c,d){d=d===void 0?!1:d;a.google_image_requests||(a.google_image_requests=[]);var e=mo(a.document);if(c){var f=function(){if(c){var g=a.google_image_requests,k=$b(g,e);k>=0&&Array.prototype.splice.call(g,k,1)}Kn(e,"load",f);Kn(e,"error",f)};Jn(e,"load",f);Jn(e,"error",f)}d&&(e.attributionSrc="");e.src=b;a.google_image_requests.push(e)}
var qo=function(a){var b;b=b===void 0?!1:b;var c="https://pagead2.googlesyndication.com/pagead/gen_204?id=tcfe";ko(a,function(d,e){if(d||d===0)c+="&"+e+"="+encodeURIComponent(""+d)});po(c,b)},po=function(a,b){var c=window,d;b=b===void 0?!1:b;d=d===void 0?!1:d;if(c.fetch){var e={keepalive:!0,credentials:"include",redirect:"follow",method:"get",mode:"no-cors"};d&&(e.mode="cors","setAttributionReporting"in XMLHttpRequest.prototype?e.attributionReporting={eventSourceEligible:"true",triggerEligible:"false"}:
e.headers={"Attribution-Reporting-Eligible":"event-source"});c.fetch(a,e)}else oo(c,a,b===void 0?!1:b,d===void 0?!1:d)};var ro=function(){this.P=this.P;this.C=this.C};ro.prototype.P=!1;ro.prototype.dispose=function(){this.P||(this.P=!0,this.Va())};ro.prototype[Symbol.dispose]=function(){this.dispose()};ro.prototype.addOnDisposeCallback=function(a,b){this.P?b!==void 0?a.call(b):a():(this.C||(this.C=[]),b&&(a=a.bind(b)),this.C.push(a))};ro.prototype.Va=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function so(a){a.addtlConsent!==void 0&&typeof a.addtlConsent!=="string"&&(a.addtlConsent=void 0);a.gdprApplies!==void 0&&typeof a.gdprApplies!=="boolean"&&(a.gdprApplies=void 0);return a.tcString!==void 0&&typeof a.tcString!=="string"||a.listenerId!==void 0&&typeof a.listenerId!=="number"?2:a.cmpStatus&&a.cmpStatus!=="error"?0:3}
var to=function(a,b){b=b===void 0?{}:b;ro.call(this);this.j=null;this.aa={};this.jg=0;this.K=null;this.H=a;var c;this.Je=(c=b.Dn)!=null?c:500;var d;this.Eb=(d=b.lo)!=null?d:!1};ra(to,ro);to.prototype.Va=function(){this.aa={};this.K&&(Kn(this.H,"message",this.K),delete this.K);delete this.aa;delete this.H;delete this.j;ro.prototype.Va.call(this)};var vo=function(a){return typeof a.H.__tcfapi==="function"||uo(a)!=null};
to.prototype.addEventListener=function(a){var b=this,c={internalBlockOnErrors:this.Eb},d=In(function(){return a(c)}),e=0;this.Je!==-1&&(e=setTimeout(function(){c.tcString="tcunavailable";c.internalErrorState=1;d()},this.Je));var f=function(g,k){clearTimeout(e);g?(c=g,c.internalErrorState=so(c),c.internalBlockOnErrors=b.Eb,k&&c.internalErrorState===0||(c.tcString="tcunavailable",k||(c.internalErrorState=3))):(c.tcString="tcunavailable",c.internalErrorState=3);a(c)};try{wo(this,"addEventListener",f)}catch(g){c.tcString=
"tcunavailable",c.internalErrorState=3,e&&(clearTimeout(e),e=0),d()}};to.prototype.removeEventListener=function(a){a&&a.listenerId&&wo(this,"removeEventListener",null,a.listenerId)};
var Go=function(a,b,c){var d;d=d===void 0?"755":d;var e;a:{if(a.publisher&&a.publisher.restrictions){var f=a.publisher.restrictions[b];if(f!==void 0){e=f[d===void 0?"755":d];break a}}e=void 0}var g=e;if(g===0)return!1;var k=c;c===2?(k=0,g===2&&(k=1)):c===3&&(k=1,g===1&&(k=0));var m;if(k===0)if(a.purpose&&a.vendor){var n=xo(a.vendor.consents,d===void 0?"755":d);m=n&&b==="1"&&a.purposeOneTreatment&&a.publisherCC==="CH"?!0:n&&xo(a.purpose.consents,b)}else m=!0;else m=k===1?a.purpose&&a.vendor?xo(a.purpose.legitimateInterests,
b)&&xo(a.vendor.legitimateInterests,d===void 0?"755":d):!0:!0;return m},xo=function(a,b){return!(!a||!a[b])},wo=function(a,b,c,d){c||(c=function(){});var e=a.H;if(typeof e.__tcfapi==="function"){var f=e.__tcfapi;f(b,2,c,d)}else if(uo(a)){Ho(a);var g=++a.jg;a.aa[g]=c;if(a.j){var k={};a.j.postMessage((k.__tcfapiCall={command:b,version:2,callId:g,parameter:d},k),"*")}}else c({},!1)},uo=function(a){if(a.j)return a.j;var b;a:{for(var c=a.H,d=0;d<50;++d){var e;try{e=!(!c.frames||!c.frames.__tcfapiLocator)}catch(k){e=
!1}if(e){b=c;break a}var f;b:{try{var g=c.parent;if(g&&g!=c){f=g;break b}}catch(k){}f=null}if(!(c=f))break}b=null}a.j=b;return a.j},Ho=function(a){if(!a.K){var b=function(c){try{var d;d=(typeof c.data==="string"?JSON.parse(c.data):c.data).__tcfapiReturn;a.aa[d.callId](d.returnValue,d.success)}catch(e){}};a.K=b;Jn(a.H,"message",b)}},Io=function(a){if(a.gdprApplies===!1)return!0;a.internalErrorState===void 0&&(a.internalErrorState=so(a));return a.cmpStatus==="error"||a.internalErrorState!==0?a.internalBlockOnErrors?
(qo({e:String(a.internalErrorState)}),!1):!0:a.cmpStatus!=="loaded"||a.eventStatus!=="tcloaded"&&a.eventStatus!=="useractioncomplete"?!1:!0};var Jo={1:0,3:0,4:0,7:3,9:3,10:3};function Ko(){var a=Mi.tcf||{};return Mi.tcf=a}var Lo=function(){return new to(A,{Dn:-1})};
function Mo(){var a=Ko(),b=Lo();vo(b)&&!No()&&!Oo()&&U(124);if(!a.active&&vo(b)){No()&&(a.active=!0,a.Bc={},a.cmpId=0,a.tcfPolicyVersion=0,Vk().active=!0,a.tcString="tcunavailable");em();try{b.addEventListener(function(c){if(c.internalErrorState!==0)Po(a),fm([N.g.N,N.g.za,N.g.O]),Vk().active=!0;else if(a.gdprApplies=c.gdprApplies,a.cmpId=c.cmpId,a.enableAdvertiserConsentMode=c.enableAdvertiserConsentMode,Oo()&&(a.active=!0),!Qo(c)||No()||Oo()){a.tcfPolicyVersion=c.tcfPolicyVersion;var d;if(c.gdprApplies===
!1){var e={},f;for(f in Jo)Jo.hasOwnProperty(f)&&(e[f]=!0);d=e;b.removeEventListener(c)}else if(Qo(c)){var g={},k;for(k in Jo)if(Jo.hasOwnProperty(k))if(k==="1"){var m,n=c,p={vm:!0};p=p===void 0?{}:p;m=Io(n)?n.gdprApplies===!1?!0:n.tcString==="tcunavailable"?!p.Ck:(p.Ck||n.gdprApplies!==void 0||p.vm)&&(p.Ck||typeof n.tcString==="string"&&n.tcString.length)?Go(n,"1",0):!0:!1;g["1"]=m}else g[k]=Go(c,k,Jo[k]);d=g}if(d){a.tcString=c.tcString||"tcempty";a.Bc=d;var q={},r=(q[N.g.N]=a.Bc["1"]?"granted":
"denied",q);a.gdprApplies!==!0?(fm([N.g.N,N.g.za,N.g.O]),Vk().active=!0):(r[N.g.za]=a.Bc["3"]&&a.Bc["4"]?"granted":"denied",typeof a.tcfPolicyVersion==="number"&&a.tcfPolicyVersion>=4?r[N.g.O]=a.Bc["1"]&&a.Bc["7"]?"granted":"denied":fm([N.g.O]),$l(r,{eventId:0},{gdprApplies:a?a.gdprApplies:void 0,tcString:Ro()||""}))}}else fm([N.g.N,N.g.za,N.g.O])})}catch(c){Po(a),fm([N.g.N,N.g.za,N.g.O]),Vk().active=!0}}}function Po(a){a.type="e";a.tcString="tcunavailable"}
function Qo(a){return a.eventStatus==="tcloaded"||a.eventStatus==="useractioncomplete"||a.eventStatus==="cmpuishown"}function No(){return A.gtag_enable_tcf_support===!0}function Oo(){return Ko().enableAdvertiserConsentMode===!0}function Ro(){var a=Ko();if(a.active)return a.tcString}function So(){var a=Ko();if(a.active&&a.gdprApplies!==void 0)return a.gdprApplies?"1":"0"}function To(a){if(!Jo.hasOwnProperty(String(a)))return!0;var b=Ko();return b.active&&b.Bc?!!b.Bc[String(a)]:!0}var Uo=[N.g.N,N.g.U,N.g.O,N.g.za],Vo={},Wo=(Vo[N.g.N]=1,Vo[N.g.U]=2,Vo);function Xo(a){if(a===void 0)return 0;switch(V(a,N.g.qa)){case void 0:return 1;case !1:return 3;default:return 2}}function Yo(a){if(xl()==="US-CO"&&cc.globalPrivacyControl===!0)return!1;var b=Xo(a);if(b===3)return!1;switch(dl(N.g.za)){case 1:case 3:return!0;case 2:return!1;case 4:return b===2;case 0:return!0;default:return!1}}function Zo(){return gl()||!cl(N.g.N)||!cl(N.g.U)}
function $o(){var a={},b;for(b in Wo)Wo.hasOwnProperty(b)&&(a[Wo[b]]=dl(b));return"G1"+De(a[1]||0)+De(a[2]||0)}var ap={},bp=(ap[N.g.N]=0,ap[N.g.U]=1,ap[N.g.O]=2,ap[N.g.za]=3,ap);function cp(a){switch(a){case void 0:return 1;case !0:return 3;case !1:return 2;default:return 0}}
function dp(a){for(var b="1",c=0;c<Uo.length;c++){var d=b,e,f=Uo[c],g=bl.delegatedConsentTypes[f];e=g===void 0?0:bp.hasOwnProperty(g)?12|bp[g]:8;var k=Vk();k.accessedAny=!0;var m=k.entries[f]||{};e=e<<2|cp(m.implicit);b=d+(""+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[e]+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[cp(m.declare)<<4|cp(m.default)<<2|cp(m.update)])}var n=b,p=(xl()==="US-CO"&&cc.globalPrivacyControl===!0?1:0)<<3,q=(gl()?1:0)<<2,r=Xo(a);b=
n+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[p|q|r];return b+=""+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[bl.containerScopedDefaults.ad_storage<<4|bl.containerScopedDefaults.analytics_storage<<2|bl.containerScopedDefaults.ad_user_data]+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[(bl.usedContainerScopedDefaults?1:0)<<2|bl.containerScopedDefaults.ad_personalization]}
function ep(){if(!cl(N.g.O))return"-";for(var a=Object.keys(zh),b=el(a),c="",d=l(a),e=d.next();!e.done;e=d.next()){var f=e.value;b[f]&&(c+=zh[f])}(bl.usedCorePlatformServices?bl.selectedAllCorePlatformServices:1)&&(c+="o");return c||"-"}function fp(){return zl()||(No()||Oo())&&So()==="1"?"1":"0"}function gp(){return(zl()?!0:!(!No()&&!Oo())&&So()==="1")||!cl(N.g.O)}
function hp(){var a="0",b="0",c;var d=Ko();c=d.active?d.cmpId:void 0;typeof c==="number"&&c>=0&&c<=4095&&(a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[c>>6&63],b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[c&63]);var e="0",f;var g=Ko();f=g.active?g.tcfPolicyVersion:void 0;typeof f==="number"&&f>=0&&f<=63&&(e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[f]);var k=0;zl()&&(k|=1);So()==="1"&&(k|=2);No()&&(k|=4);var m;var n=Ko();m=n.enableAdvertiserConsentMode!==
void 0?n.enableAdvertiserConsentMode?"1":"0":void 0;m==="1"&&(k|=8);Vk().waitPeriodTimedOut&&(k|=16);return"1"+a+b+e+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[k]}function ip(){return xl()==="US-CO"};function jp(){var a=!1;return a};var kp={UA:1,AW:2,DC:3,G:4,GF:5,GT:12,GTM:14,HA:6,MC:7};
function lp(a){a=a===void 0?{}:a;var b=Nf.ctid.split("-")[0].toUpperCase(),c={ctid:Nf.ctid,sn:Li.Ne,un:Li.Bh,Um:fk.Ke?2:1,zn:a.zi,Ue:Nf.canonicalContainerId};c.Ue!==a.ya&&(c.ya=a.ya);var d=rk();c.hn=d?d.canonicalContainerId:void 0;Si?(c.xg=kp[b],c.xg||(c.xg=0)):c.xg=Wi?13:10;fj.C?(c.vg=0,c.Xl=2):Ui?c.vg=1:jp()?c.vg=2:c.vg=3;var e={};e[6]=gk;fj.j===2?e[7]=!0:fj.j===1&&(e[2]=!0);if(fc){var f=Bj(Hj(fc),"host");f&&(e[8]=f.match(/^(www\.)?googletagmanager\.com$/)===null)}c.am=e;var g=a.lg,k;var m=c.xg,
n=c.vg;m===void 0?k="":(n||(n=0),k=""+Fe(1,1)+Ce(m<<2|n));var p=c.Xl,q="4"+k+(p?""+Fe(2,1)+Ce(p):""),r,u=c.un;r=u&&Ee.test(u)?""+Fe(3,2)+u:"";var v,t=c.sn;v=t?""+Fe(4,1)+Ce(t):"";var w;var x=c.ctid;if(x&&g){var y=x.split("-"),B=y[0].toUpperCase();if(B!=="GTM"&&B!=="OPT")w="";else{var C=y[1];w=""+Fe(5,3)+Ce(1+C.length)+(c.Um||0)+C}}else w="";var D=c.zn,G=c.Ue,K=c.ya,F=c.uo,S=q+r+v+w+(D?""+Fe(6,1)+Ce(D):"")+(G?""+Fe(7,3)+Ce(G.length)+G:"")+(K?""+Fe(8,3)+Ce(K.length)+K:"")+(F?""+Fe(9,3)+Ce(F.length)+
F:""),M;var T=c.am;T=T===void 0?{}:T;for(var ca=[],da=l(Object.keys(T)),Z=da.next();!Z.done;Z=da.next()){var Q=Z.value;ca[Number(Q)]=T[Q]}if(ca.length){var pa=Fe(10,3),oa;if(ca.length===0)oa=Ce(0);else{for(var ja=[],Ba=0,Ma=!1,ua=0;ua<ca.length;ua++){Ma=!0;var Ta=ua%6;ca[ua]&&(Ba|=1<<Ta);Ta===5&&(ja.push(Ce(Ba)),Ba=0,Ma=!1)}Ma&&ja.push(Ce(Ba));oa=ja.join("")}var cb=oa;M=""+pa+Ce(cb.length)+cb}else M="";var Hc=c.hn;return S+M+(Hc?""+Fe(11,3)+Ce(Hc.length)+Hc:"")};function mp(a){var b=1,c,d,e;if(a)for(b=0,d=a.length-1;d>=0;d--)e=a.charCodeAt(d),b=(b<<6&268435455)+e+(e<<14),c=b&266338304,b=c!==0?b^c>>21:b;return b};function np(a){return a.origin!=="null"};function op(a,b,c,d){var e;if(pp(d)){for(var f=[],g=String(b||qp()).split(";"),k=0;k<g.length;k++){var m=g[k].split("="),n=m[0].replace(/^\s*|\s*$/g,"");if(n&&n===a){var p=m.slice(1).join("=").replace(/^\s*|\s*$/g,"");p&&c&&(p=decodeURIComponent(p));f.push(p)}}e=f}else e=[];return e}
function rp(a,b,c,d,e){if(pp(e)){var f=sp(a,d,e);if(f.length===1)return f[0].id;if(f.length!==0){f=tp(f,function(g){return g.im},b);if(f.length===1)return f[0].id;f=tp(f,function(g){return g.kn},c);return f[0]?f[0].id:void 0}}}function up(a,b,c,d){var e=qp(),f=window;np(f)&&(f.document.cookie=a);var g=qp();return e!==g||c!==void 0&&op(b,g,!1,d).indexOf(c)>=0}
function vp(a,b,c,d){function e(w,x,y){if(y==null)return delete k[x],w;k[x]=y;return w+"; "+x+"="+y}function f(w,x){if(x==null)return w;k[x]=!0;return w+"; "+x}if(!pp(c.Lb))return 2;var g;b==null?g=a+"=deleted; expires="+(new Date(0)).toUTCString():(c.encode&&(b=encodeURIComponent(b)),b=wp(b),g=a+"="+b);var k={};g=e(g,"path",c.path);var m;c.expires instanceof Date?m=c.expires.toUTCString():c.expires!=null&&(m=""+c.expires);g=e(g,"expires",m);g=e(g,"max-age",c.Ym);g=e(g,"samesite",c.vn);c.secure&&
(g=f(g,"secure"));var n=c.domain;if(n&&n.toLowerCase()==="auto"){for(var p=xp(),q=void 0,r=!1,u=0;u<p.length;++u){var v=p[u]!=="none"?p[u]:void 0,t=e(g,"domain",v);t=f(t,c.flags);try{d&&d(a,k)}catch(w){q=w;continue}r=!0;if(!yp(v,c.path)&&up(t,a,b,c.Lb))return 0}if(q&&!r)throw q;return 1}n&&n.toLowerCase()!=="none"&&(g=e(g,"domain",n));g=f(g,c.flags);d&&d(a,k);return yp(n,c.path)?1:up(g,a,b,c.Lb)?0:1}function zp(a,b,c){c.path==null&&(c.path="/");c.domain||(c.domain="auto");return vp(a,b,c)}
function tp(a,b,c){for(var d=[],e=[],f,g=0;g<a.length;g++){var k=a[g],m=b(k);m===c?d.push(k):f===void 0||m<f?(e=[k],f=m):m===f&&e.push(k)}return d.length>0?d:e}function sp(a,b,c){for(var d=[],e=op(a,void 0,void 0,c),f=0;f<e.length;f++){var g=e[f].split("."),k=g.shift();if(!b||!k||b.indexOf(k)!==-1){var m=g.shift();if(m){var n=m.split("-");d.push({id:g.join("."),im:Number(n[0])||1,kn:Number(n[1])||1})}}}return d}function wp(a){a&&a.length>1200&&(a=a.substring(0,1200));return a}
var Ap=/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,Bp=/(^|\.)doubleclick\.net$/i;function yp(a,b){return a!==void 0&&(Bp.test(window.document.location.hostname)||b==="/"&&Ap.test(a))}function Cp(a){if(!a)return 1;var b=a;Zh(7)&&a==="none"&&(b=window.document.location.hostname);b=b.indexOf(".")===0?b.substring(1):b;return b.split(".").length}function Dp(a){if(!a||a==="/")return 1;a[0]!=="/"&&(a="/"+a);a[a.length-1]!=="/"&&(a+="/");return a.split("/").length-1}
function Ep(a,b){var c=""+Cp(a),d=Dp(b);d>1&&(c+="-"+d);return c}
var qp=function(){return np(window)?window.document.cookie:""},pp=function(a){return a&&Zh(8)?(Array.isArray(a)?a:[a]).every(function(b){return fl(b)&&cl(b)}):!0},xp=function(){var a=[],b=window.document.location.hostname.split(".");if(b.length===4){var c=b[b.length-1];if(Number(c).toString()===c)return["none"]}for(var d=b.length-2;d>=0;d--)a.push(b.slice(d).join("."));var e=window.document.location.hostname;Bp.test(e)||Ap.test(e)||a.push("none");return a};function Fp(a){var b=Math.round(Math.random()*2147483647);return a?String(b^mp(a)&2147483647):String(b)}function Gp(a){return[Fp(a),Math.round(nb()/1E3)].join(".")}function Hp(a,b,c,d,e){var f=Cp(b);return rp(a,f,Dp(c),d,e)}function Ip(a,b,c,d){return[b,Ep(c,d),a].join(".")};function Jp(a,b,c,d){var e,f=Number(a.Kb!=null?a.Kb:void 0);f!==0&&(e=new Date((b||nb())+1E3*(f||7776E3)));return{path:a.path,domain:a.domain,flags:a.flags,encode:!!c,expires:e,Lb:d}};var Kp;function Lp(){function a(g){c(g.target||g.srcElement||{})}function b(g){d(g.target||g.srcElement||{})}var c=Mp,d=Np,e=Op();if(!e.init){qc(E,"mousedown",a);qc(E,"keyup",a);qc(E,"submit",b);var f=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){d(this);f.call(this)};e.init=!0}}function Pp(a,b,c,d,e){var f={callback:a,domains:b,fragment:c===2,placement:c,forms:d,sameHost:e};Op().decorators.push(f)}
function Qp(a,b,c){for(var d=Op().decorators,e={},f=0;f<d.length;++f){var g=d[f],k;if(k=!c||g.forms)a:{var m=g.domains,n=a,p=!!g.sameHost;if(m&&(p||n!==E.location.hostname))for(var q=0;q<m.length;q++)if(m[q]instanceof RegExp){if(m[q].test(n)){k=!0;break a}}else if(n.indexOf(m[q])>=0||p&&m[q].indexOf(n)>=0){k=!0;break a}k=!1}if(k){var r=g.placement;r===void 0&&(r=g.fragment?2:1);r===b&&qb(e,g.callback())}}return e}
function Op(){var a=gc("google_tag_data",{}),b=a.gl;b&&b.decorators||(b={decorators:[]},a.gl=b);return b};var Rp=/(.*?)\*(.*?)\*(.*)/,Sp=/^https?:\/\/([^\/]*?)\.?cdn\.ampproject\.org\/?(.*)/,Tp=/^(?:www\.|m\.|amp\.)+/,Up=/([^?#]+)(\?[^#]*)?(#.*)?/;function Vp(a){var b=Up.exec(a);if(b)return{li:b[1],query:b[2],fragment:b[3]}}function Wp(a){return new RegExp("(.*?)(^|&)"+a+"=([^&]*)&?(.*)")}
function Xp(a,b){var c=[cc.userAgent,(new Date).getTimezoneOffset(),cc.userLanguage||cc.language,Math.floor(nb()/60/1E3)-(b===void 0?0:b),a].join("*"),d;if(!(d=Kp)){for(var e=Array(256),f=0;f<256;f++){for(var g=f,k=0;k<8;k++)g=g&1?g>>>1^3988292384:g>>>1;e[f]=g}d=e}Kp=d;for(var m=4294967295,n=0;n<c.length;n++)m=m>>>8^Kp[(m^c.charCodeAt(n))&255];return((m^-1)>>>0).toString(36)}
function Yp(a){return function(b){var c=Hj(A.location.href),d=c.search.replace("?",""),e=Aj(d,"_gl",!1,!0)||"";b.query=Zp(e)||{};var f=Bj(c,"fragment"),g;var k=-1;if(sb(f,"_gl="))k=4;else{var m=f.indexOf("&_gl=");m>0&&(k=m+3+2)}if(k<0)g=void 0;else{var n=f.indexOf("&",k);g=n<0?f.substring(k):f.substring(k,n)}b.fragment=Zp(g||"")||{};a&&$p(c,d,f)}}function aq(a,b){var c=Wp(a).exec(b),d=b;if(c){var e=c[2],f=c[4];d=c[1];f&&(d=d+e+f)}return d}
function $p(a,b,c){function d(g,k){var m=aq("_gl",g);m.length&&(m=k+m);return m}if(bc&&bc.replaceState){var e=Wp("_gl");if(e.test(b)||e.test(c)){var f=Bj(a,"path");b=d(b,"?");c=d(c,"#");bc.replaceState({},"",""+f+b+c)}}}function bq(a,b){var c=Yp(!!b),d=Op();d.data||(d.data={query:{},fragment:{}},c(d.data));var e={},f=d.data;f&&(qb(e,f.query),a&&qb(e,f.fragment));return e}
var Zp=function(a){try{var b=cq(a,3);if(b!==void 0){for(var c={},d=b?b.split("*"):[],e=0;e+1<d.length;e+=2){var f=d[e],g=Sa(d[e+1]);c[f]=g}Va("TAGGING",6);return c}}catch(k){Va("TAGGING",8)}};function cq(a,b){if(a){var c;a:{for(var d=a,e=0;e<3;++e){var f=Rp.exec(d);if(f){c=f;break a}d=decodeURIComponent(d)}c=void 0}var g=c;if(g&&g[1]==="1"){var k=g[3],m;a:{for(var n=g[2],p=0;p<b;++p)if(n===Xp(k,p)){m=!0;break a}m=!1}if(m)return k;Va("TAGGING",7)}}}
function dq(a,b,c,d,e){function f(p){p=aq(a,p);var q=p.charAt(p.length-1);p&&q!=="&"&&(p+="&");return p+n}d=d===void 0?!1:d;e=e===void 0?!1:e;var g=Vp(c);if(!g)return"";var k=g.query||"",m=g.fragment||"",n=a+"="+b;d?m.substring(1).length!==0&&e||(m="#"+f(m.substring(1))):k="?"+f(k.substring(1));return""+g.li+k+m}
function eq(a,b){function c(n,p,q){var r;a:{for(var u in n)if(n.hasOwnProperty(u)){r=!0;break a}r=!1}if(r){var v,t=[],w;for(w in n)if(n.hasOwnProperty(w)){var x=n[w];x!==void 0&&x===x&&x!==null&&x.toString()!=="[object Object]"&&(t.push(w),t.push(Ra(String(x))))}var y=t.join("*");v=["1",Xp(y),y].join("*");d?(Zh(3)||Zh(1)||!p)&&fq("_gl",v,a,p,q):gq("_gl",v,a,p,q)}}var d=(a.tagName||"").toUpperCase()==="FORM",e=Qp(b,1,d),f=Qp(b,2,d),g=Qp(b,4,d),k=Qp(b,3,d);c(e,!1,!1);c(f,!0,!1);Zh(1)&&c(g,!0,!0);for(var m in k)k.hasOwnProperty(m)&&
hq(m,k[m],a)}function hq(a,b,c){c.tagName.toLowerCase()==="a"?gq(a,b,c):c.tagName.toLowerCase()==="form"&&fq(a,b,c)}function gq(a,b,c,d,e){d=d===void 0?!1:d;e=e===void 0?!1:e;var f;if(f=c.href){var g;if(!(g=!Zh(5)||d)){var k=A.location.href,m=Vp(c.href),n=Vp(k);g=!(m&&n&&m.li===n.li&&m.query===n.query&&m.fragment)}f=g}if(f){var p=dq(a,b,c.href,d,e);Tb.test(p)&&(c.href=p)}}
function fq(a,b,c,d,e){d=d===void 0?!1:d;e=e===void 0?!1:e;if(c&&c.action){var f=(c.method||"").toLowerCase();if(f!=="get"||d){if(f==="get"||f==="post"){var g=dq(a,b,c.action,d,e);Tb.test(g)&&(c.action=g)}}else{for(var k=c.childNodes||[],m=!1,n=0;n<k.length;n++){var p=k[n];if(p.name===a){p.setAttribute("value",b);m=!0;break}}if(!m){var q=E.createElement("input");q.setAttribute("type","hidden");q.setAttribute("name",a);q.setAttribute("value",b);c.appendChild(q)}}}}
function Mp(a){try{var b;a:{for(var c=a,d=100;c&&d>0;){if(c.href&&c.nodeName.match(/^a(?:rea)?$/i)){b=c;break a}c=c.parentNode;d--}b=null}var e=b;if(e){var f=e.protocol;f!=="http:"&&f!=="https:"||eq(e,e.hostname)}}catch(g){}}function Np(a){try{if(a.action){var b=Bj(Hj(a.action),"host");eq(a,b)}}catch(c){}}function iq(a,b,c,d){Lp();var e=c==="fragment"?2:1;d=!!d;Pp(a,b,e,d,!1);e===2&&Va("TAGGING",23);d&&Va("TAGGING",24)}function jq(a,b){Lp();Pp(a,[Dj(A.location,"host",!0)],b,!0,!0)}
function kq(){var a=E.location.hostname,b=Sp.exec(E.referrer);if(!b)return!1;var c=b[2],d=b[1],e="";if(c){var f=c.split("/"),g=f[1];e=g==="s"?decodeURIComponent(f[2]):decodeURIComponent(g)}else if(d){if(d.indexOf("xn--")===0)return!1;e=d.replace(/-/g,".").replace(/\.\./g,"-")}var k=a.replace(Tp,""),m=e.replace(Tp,"");return k===m||tb(k,"."+m)}function lq(a,b){return a===!1?!1:a||b||kq()};var mq=["1"],nq={},oq={};function pq(a,b){b=b===void 0?!0:b;var c=qq(a.prefix);if(!nq[c])if(rq(c,a.path,a.domain)){var d=oq[qq(a.prefix)];b&&sq(a,d?d.id:void 0,d?d.fi:void 0)}else{var e=Ij("auiddc");if(e)Va("TAGGING",17),nq[c]=e;else if(b){var f=qq(a.prefix),g=Gp();tq(f,g,a);rq(c,a.path,a.domain)}}}function sq(a,b,c){var d=qq(a.prefix),e=nq[d];if(e){var f=e.split(".");if(f.length===2){var g=Number(f[1])||0;if(g){var k=e;b&&(k=e+"."+b+"."+(c?c:Math.floor(nb()/1E3)));tq(d,k,a,g*1E3)}}}}
function tq(a,b,c,d){var e=Ip(b,"1",c.domain,c.path),f=Jp(c,d);f.Lb=uq();zp(a,e,f)}function rq(a,b,c){var d=Hp(a,b,c,mq,uq());if(!d)return!1;vq(a,d);return!0}function vq(a,b){var c=b.split(".");c.length===5?(nq[a]=c.slice(0,2).join("."),oq[a]={id:c.slice(2,4).join("."),fi:Number(c[4])||0}):c.length===3?oq[a]={id:c.slice(0,2).join("."),fi:Number(c[2])||0}:nq[a]=b}function qq(a){return(a||"_gcl")+"_au"}function wq(a){function b(){cl(c)&&a()}var c=uq();jl(function(){b();cl(c)||kl(b,c)},c)}
function xq(a){var b=bq(!0),c=qq(a.prefix);wq(function(){var d=b[c];if(d){vq(c,d);var e=Number(nq[c].split(".")[1])*1E3;if(e){Va("TAGGING",16);var f=Jp(a,e);f.Lb=uq();var g=Ip(d,"1",a.domain,a.path);zp(c,g,f)}}})}function yq(a,b,c,d,e){e=e||{};var f=function(){var g={},k=Hp(a,e.path,e.domain,mq,uq());k&&(g[a]=k);return g};wq(function(){iq(f,b,c,d)})}function uq(){return["ad_storage","ad_user_data"]};var zq={},Aq=(zq.k={ba:/^[\w-]+$/},zq.b={ba:/^[\w-]+$/,vi:!0},zq.i={ba:/^[1-9]\d*$/},zq.u={ba:/^[1-9]\d*$/},zq);var Bq={},Eq=(Bq[5]={Yk:{2:Cq},Mh:["k","i","b","u"]},Bq[4]={Yk:{2:Cq,GCL:Dq},Mh:["k","i","b"]},Bq);function Fq(a){var b=Eq[5];if(b){var c=a.split(".")[0];if(c){var d=b.Yk[c];if(d)return d(a,5)}}}
function Cq(a,b){var c=a.split(".");if(c.length===3){var d={},e=Eq[b];if(e){for(var f=e.Mh,g=l(c[2].split("$")),k=g.next();!k.done;k=g.next()){var m=k.value,n=m[0];if(f.indexOf(n)!==-1)try{var p=decodeURIComponent(m.substring(1)),q=Aq[n];q&&(q.vi?(d[n]=d[n]||[],d[n].push(p)):d[n]=p)}catch(r){}}return d}}}
function Gq(a,b){var c=Eq[5];if(c){for(var d=[],e=l(c.Mh),f=e.next();!f.done;f=e.next()){var g=f.value,k=Aq[g];if(k){var m=a[g];if(m!==void 0)if(k.vi&&Array.isArray(m))for(var n=l(m),p=n.next();!p.done;p=n.next())d.push(encodeURIComponent(""+g+p.value));else d.push(encodeURIComponent(""+g+m))}}return["2",b||"1",d.join("$")].join(".")}}function Dq(a){var b=a.split(".");b.shift();var c=b.shift(),d=b.shift(),e={};return e.k=d,e.i=c,e.b=b,e};var Hq=new Map([[5,"ad_storage"],[4,["ad_storage","ad_user_data"]]]);function Iq(a){if(Eq[5]){for(var b=[],c=op(a,void 0,void 0,Hq.get(5)),d=l(c),e=d.next();!e.done;e=d.next()){var f=Fq(e.value);f&&(Jq(f),b.push(f))}return b}}function Kq(a,b,c,d){c=c||{};var e=Ep(c.domain,c.path),f=Gq(b,e);if(f){var g=Jp(c,d,void 0,Hq.get(5));zp(a,f,g)}}function Lq(a,b){var c=b.ba;return typeof c==="function"?c(a):c.test(a)}
function Jq(a){for(var b=l(Object.keys(a)),c=b.next(),d={};!c.done;d={We:void 0},c=b.next()){var e=c.value,f=a[e];d.We=Aq[e];d.We?d.We.vi?a[e]=Array.isArray(f)?f.filter(function(g){return function(k){return Lq(k,g.We)}}(d)):void 0:typeof f==="string"&&Lq(f,d.We)||(a[e]=void 0):a[e]=void 0}};function Mq(a){for(var b=[],c=E.cookie.split(";"),d=new RegExp("^\\s*"+(a||"_gac")+"_(UA-\\d+-\\d+)=\\s*(.+?)\\s*$"),e=0;e<c.length;e++){var f=c[e].match(d);f&&b.push({Fi:f[1],value:f[2],timestamp:Number(f[2].split(".")[1])||0})}b.sort(function(g,k){return k.timestamp-g.timestamp});return b}
function Nq(a,b){var c=Mq(a),d={};if(!c||!c.length)return d;for(var e=0;e<c.length;e++){var f=c[e].value.split(".");if(!(f[0]!=="1"||b&&f.length<3||!b&&f.length!==3)&&Number(f[1])){d[c[e].Fi]||(d[c[e].Fi]=[]);var g={version:f[0],timestamp:Number(f[1])*1E3,W:f[2]};b&&f.length>3&&(g.labels=f.slice(3));d[c[e].Fi].push(g)}}return d};function Oq(){var a=String,b=A.location.hostname,c=A.location.pathname,d=b=Bb(b);d.split(".").length>2&&(d=d.replace(/^(www[0-9]*|web|ftp|wap|home|m|w|amp|mobile)\./,""));b=d;c=Bb(c);var e=c.split(";")[0];e=e.replace(/\/(ar|slp|web|index)?\/?$/,"");return a(mp((""+b+e).toLowerCase()))};var Pq=["ad_storage","ad_user_data"];function Qq(){var a=Rq();if(a.error)return a;if(!a.value)return{error:2};var b;try{b=a.value.gclid}catch(c){return{error:11}}return b?{value:b}:{value:void 0}}
function Rq(a){a=a===void 0?!0:a;if(!cl(Pq))return{error:3};try{if(!A.localStorage)return{error:1}}catch(f){return{error:14}}var b={schema:"gcl",version:1},c=void 0;try{c=A.localStorage.getItem("_gcl_ls")}catch(f){return{error:13}}try{if(c){var d=JSON.parse(c);if(d&&typeof d==="object")b=d;else return{error:12}}}catch(f){return{error:8}}if(b.schema!=="gcl")return{error:4};if(b.version!==1)return{error:5};try{var e=Sq(b);a&&e&&Tq({value:b,error:0})}catch(f){return{error:8}}return{value:b,error:0}}
function Sq(a){if(!a||typeof a!=="object")return!1;if("expires"in a&&"value"in a){var b;typeof a.expires==="number"?b=a.expires:b=typeof a.expires==="string"?Number(a.expires):NaN;if(isNaN(b)||!(Date.now()<=b))return a.value=null,a.error=9,!0}else{for(var c=!1,d=l(Object.keys(a)),e=d.next();!e.done;e=d.next())c=Sq(a[e.value])||c;return c}return!1}function Tq(a){if(!a.error&&a.value){var b=a.value,c;try{c=JSON.stringify(b)}catch(d){return}try{A.localStorage.setItem("_gcl_ls",c)}catch(d){}}};var Uq=/^\w+$/,Vq=/^[\w-]+$/,Wq={},Xq=(Wq.aw="_aw",Wq.dc="_dc",Wq.gf="_gf",Wq.gp="_gp",Wq.gs="_gs",Wq.ha="_ha",Wq.ag="_ag",Wq.gb="_gb",Wq);function Yq(){return["ad_storage","ad_user_data"]}function Zq(a){return!Zh(8)||cl(a)}function $q(a,b){function c(){var d=Zq(b);d&&a();return d}jl(function(){c()||kl(c,b)},b)}function ar(a){return br(a).map(function(b){return b.W})}function cr(a){return dr(a).filter(function(b){return b.W}).map(function(b){return b.W})}
function dr(a){var b=er(a.prefix),c=fr("gb",b),d=fr("ag",b);if(!d||!c)return[];var e=function(k){return function(m){m.type=k;return m}},f=br(c).map(e("gb")),g=gr(d).map(e("ag"));return f.concat(g).sort(function(k,m){return m.timestamp-k.timestamp})}function hr(a,b,c,d,e,f){var g=bb(a,function(k){return k.W===c});g?(g.timestamp<d&&(g.timestamp=d,g.Sd=f),g.labels=ir(g.labels||[],e||[])):a.push({version:b,W:c,timestamp:d,labels:e,Sd:f})}
function gr(a){for(var b=Iq(a)||[],c=[],d=l(b),e=d.next();!e.done;e=d.next()){var f=e.value,g=f,k=g.k,m=g.b,n=jr(f);if(n){var p=void 0;Zh(9)&&(p=f.u);hr(c,"2",k,n,m||[],p)}}return c.sort(function(q,r){return r.timestamp-q.timestamp})}function br(a){for(var b=[],c=op(a,E.cookie,void 0,Yq()),d=l(c),e=d.next();!e.done;e=d.next()){var f=kr(e.value);if(f!=null){var g=f;hr(b,g.version,g.W,g.timestamp,g.labels)}}b.sort(function(k,m){return m.timestamp-k.timestamp});return lr(b)}
function mr(a,b){for(var c=[],d=l(a),e=d.next();!e.done;e=d.next()){var f=e.value;c.includes(f)||c.push(f)}for(var g=l(b),k=g.next();!k.done;k=g.next()){var m=k.value;c.includes(m)||c.push(m)}return c}function nr(a,b){var c=bb(a,function(d){return d.W===b.W});c?(c.timestamp<b.timestamp&&(c.timestamp=b.timestamp,c.Sd=b.Sd),c.Qa=c.Qa?b.Qa?c.timestamp<b.timestamp?b.Qa:c.Qa:c.Qa||0:b.Qa||0,c.labels=mr(c.labels||[],b.labels||[]),c.bd=mr(c.bd||[],b.bd||[])):a.push(b)}
function or(){var a=Qq();if(!a||a.error||!a.value||typeof a.value!=="object")return null;var b=a.value;try{if(!("value"in b&&b.value)||typeof b.value!=="object")return null;var c=b.value,d=c.value;return d&&d.match(Vq)?{version:"",W:d,timestamp:Number(c.creationTimeMs)||0,labels:[],Qa:c.linkDecorationSource||0,bd:[2]}:null}catch(e){return null}}
function pr(a){for(var b=[],c=op(a,E.cookie,void 0,Yq()),d=l(c),e=d.next();!e.done;e=d.next()){var f=kr(e.value);f!=null&&(f.Sd=void 0,f.Qa=0,f.bd=[1],nr(b,f))}var g=or();g&&(g.Sd=void 0,g.Qa=g.Qa||0,g.bd=g.bd||[2],nr(b,g));b.sort(function(k,m){return m.timestamp-k.timestamp});return lr(b)}function ir(a,b){if(!a.length)return b;if(!b.length)return a;var c={};return a.concat(b).filter(function(d){return c.hasOwnProperty(d)?!1:c[d]=!0})}
function er(a){return a&&typeof a==="string"&&a.match(Uq)?a:"_gcl"}function qr(a,b,c){var d=Hj(a),e=Bj(d,"query",!1,void 0,"gclsrc"),f={value:Bj(d,"query",!1,void 0,"gclid"),Qa:c?4:2};if(b&&(!f.value||!e)){var g=d.hash.replace("#","");f.value||(f.value=Aj(g,"gclid",!1),f.Qa=3);e||(e=Aj(g,"gclsrc",!1))}return!f.value||e!==void 0&&e!=="aw"&&e!=="aw.ds"?[]:[f]}
function rr(a,b){var c=Hj(a),d=Bj(c,"query",!1,void 0,"gclid"),e=Bj(c,"query",!1,void 0,"gclsrc"),f=Bj(c,"query",!1,void 0,"wbraid");f=zb(f);var g=Bj(c,"query",!1,void 0,"gbraid"),k=Bj(c,"query",!1,void 0,"gad_source"),m=Bj(c,"query",!1,void 0,"dclid");if(b&&!(d&&e&&f&&g)){var n=c.hash.replace("#","");d=d||Aj(n,"gclid",!1);e=e||Aj(n,"gclsrc",!1);f=f||Aj(n,"wbraid",!1);g=g||Aj(n,"gbraid",!1);k=k||Aj(n,"gad_source",!1)}return sr(d,e,m,f,g,k)}function tr(){return rr(A.location.href,!0)}
function sr(a,b,c,d,e,f){var g={},k=function(m,n){g[n]||(g[n]=[]);g[n].push(m)};g.gclid=a;g.gclsrc=b;g.dclid=c;if(a!==void 0&&a.match(Vq))switch(b){case void 0:k(a,"aw");break;case "aw.ds":k(a,"aw");k(a,"dc");break;case "ds":k(a,"dc");break;case "3p.ds":k(a,"dc");break;case "gf":k(a,"gf");break;case "ha":k(a,"ha")}c&&k(c,"dc");d!==void 0&&Vq.test(d)&&(g.wbraid=d,k(d,"gb"));e!==void 0&&Vq.test(e)&&(g.gbraid=e,k(e,"ag"));f!==void 0&&Vq.test(f)&&(g.gad_source=f,k(f,"gs"));return g}
function ur(a){for(var b=tr(),c=!0,d=l(Object.keys(b)),e=d.next();!e.done;e=d.next())if(b[e.value]!==void 0){c=!1;break}c&&(b=rr(A.document.referrer,!1),b.gad_source=void 0);vr(b,!1,a)}
function wr(a){ur(a);var b=qr(A.location.href,!0,!1);b.length||(b=qr(A.document.referrer,!1,!0));if(b.length){var c=b[0];a=a||{};var d=nb(),e=Jp(a,d,!0),f=Yq(),g=function(){if(Zq(f)&&e.expires!==void 0){var k={value:{value:c.value,creationTimeMs:d,linkDecorationSource:c.Qa},expires:Number(e.expires)},m=Rq(!1);!m.error&&m.value&&(m.value.gclid=k,Tq(m))}};jl(function(){g();Zq(f)||kl(g,f)},f)}}
function vr(a,b,c,d,e){c=c||{};e=e||[];var f=er(c.prefix),g=d||nb(),k=Math.round(g/1E3),m=Yq(),n=!1,p=!1,q=function(){if(Zq(m)){var r=Jp(c,g,!0);r.Lb=m;for(var u=function(F,S){var M=fr(F,f);M&&(zp(M,S,r),F!=="gb"&&(n=!0))},v=function(F){var S=["GCL",k,F];e.length>0&&S.push(e.join("."));return S.join(".")},t=l(["aw","dc","gf","ha","gp"]),w=t.next();!w.done;w=t.next()){var x=w.value;a[x]&&u(x,v(a[x][0]))}if(!n&&a.gb){var y=a.gb[0],B=fr("gb",f);!b&&br(B).some(function(F){return F.W===y&&F.labels&&F.labels.length>
0})||u("gb",v(y))}}if(!p&&a.gbraid&&Zq("ad_storage")&&(p=!0,!n)){var C=a.gbraid,D=fr("ag",f);if(b||!gr(D).some(function(F){return F.W===C&&F.labels&&F.labels.length>0})){var G={},K=(G.k=C,G.i=""+k,G.b=e,G);Kq(D,K,c,g)}}xr(a,f,g,c)};jl(function(){q();Zq(m)||kl(q,m)},m)}
function xr(a,b,c,d){if(a.gad_source!==void 0&&Zq("ad_storage")){if(Zh(4)){var e=Dc();if(e==="r"||e==="h")return}var f=a.gad_source,g=fr("gs",b);if(g){var k=Math.round((nb()-(Cc()||0))/1E3),m;if(Zh(9)){var n=Oq(),p={};m=(p.k=f,p.i=""+k,p.u=n,p)}else{var q={};m=(q.k=f,q.i=""+k,q)}Kq(g,m,d,c)}}}
function yr(a,b){var c=bq(!0);$q(function(){for(var d=er(b.prefix),e=0;e<a.length;++e){var f=a[e];if(Xq[f]!==void 0){var g=fr(f,d),k=c[g];if(k){var m=Math.min(zr(k),nb()),n;b:{for(var p=m,q=op(g,E.cookie,void 0,Yq()),r=0;r<q.length;++r)if(zr(q[r])>p){n=!0;break b}n=!1}if(!n){var u=Jp(b,m,!0);u.Lb=Yq();zp(g,k,u)}}}}vr(sr(c.gclid,c.gclsrc),!1,b)},Yq())}
function Ar(a){var b=["ag"],c=bq(!0),d=er(a.prefix);$q(function(){for(var e=0;e<b.length;++e){var f=fr(b[e],d);if(f){var g=c[f];if(g){var k=Fq(g);if(k){var m=jr(k);m||(m=nb());var n;a:{for(var p=m,q=Iq(f),r=0;r<q.length;++r)if(jr(q[r])>p){n=!0;break a}n=!1}if(n)break;k.i=""+Math.round(m/1E3);Kq(f,k,a,m)}}}}},["ad_storage"])}function fr(a,b){var c=Xq[a];if(c!==void 0)return b+c}function zr(a){return Br(a.split(".")).length!==0?(Number(a.split(".")[1])||0)*1E3:0}
function jr(a){return a?(Number(a.i)||0)*1E3:0}function kr(a){var b=Br(a.split("."));return b.length===0?null:{version:b[0],W:b[2],timestamp:(Number(b[1])||0)*1E3,labels:b.slice(3)}}function Br(a){return a.length<3||a[0]!=="GCL"&&a[0]!=="1"||!/^\d+$/.test(a[1])||!Vq.test(a[2])?[]:a}
function Cr(a,b,c,d,e){if(Array.isArray(b)&&np(A)){var f=er(e),g=function(){for(var k={},m=0;m<a.length;++m){var n=fr(a[m],f);if(n){var p=op(n,E.cookie,void 0,Yq());p.length&&(k[n]=p.sort()[p.length-1])}}return k};$q(function(){iq(g,b,c,d)},Yq())}}
function Dr(a,b,c,d){if(Array.isArray(a)&&np(A)){var e=["ag"],f=er(d),g=function(){for(var k={},m=0;m<e.length;++m){var n=fr(e[m],f);if(!n)return{};var p=Iq(n);if(p.length){var q=p.sort(function(r,u){return jr(u)-jr(r)})[0];k[n]=Gq(q)}}return k};$q(function(){iq(g,a,b,c)},["ad_storage"])}}function lr(a){return a.filter(function(b){return Vq.test(b.W)})}
function Er(a,b){if(np(A)){for(var c=er(b.prefix),d={},e=0;e<a.length;e++)Xq[a[e]]&&(d[a[e]]=Xq[a[e]]);$q(function(){gb(d,function(f,g){var k=op(c+g,E.cookie,void 0,Yq());k.sort(function(u,v){return zr(v)-zr(u)});if(k.length){var m=k[0],n=zr(m),p=Br(m.split(".")).length!==0?m.split(".").slice(3):[],q={},r;r=Br(m.split(".")).length!==0?m.split(".")[2]:void 0;q[f]=[r];vr(q,!0,b,n,p)}})},Yq())}}
function Fr(a){var b=["ag"],c=["gbraid"];$q(function(){for(var d=er(a.prefix),e=0;e<b.length;++e){var f=fr(b[e],d);if(!f)break;var g=Iq(f);if(g.length){var k=g.sort(function(q,r){return jr(r)-jr(q)})[0],m=jr(k),n=k.b,p={};p[c[e]]=k.k;vr(p,!0,a,m,n)}}},["ad_storage"])}function Gr(a,b){for(var c=0;c<b.length;++c)if(a[b[c]])return!0;return!1}
function Hr(a){function b(k,m,n){n&&(k[m]=n)}if(gl()){var c=tr(),d;a.includes("gad_source")&&(d=c.gad_source!==void 0?c.gad_source:bq(!1)._gs);if(Gr(c,a)||d){var e={};b(e,"gclid",c.gclid);b(e,"dclid",c.dclid);b(e,"gclsrc",c.gclsrc);b(e,"wbraid",c.wbraid);b(e,"gbraid",c.gbraid);jq(function(){return e},3);var f={},g=(f._up="1",f);b(g,"_gs",d);jq(function(){return g},1)}}}
function Ir(a){if(!Zh(1))return null;var b=bq(!0).gad_source;if(b!=null)return A.location.hash="",b;if(Zh(2)){var c=Hj(A.location.href);b=Bj(c,"query",!1,void 0,"gad_source");if(b!=null)return b;var d=tr();if(Gr(d,a))return"0"}return null}function Jr(a){var b=Ir(a);b!=null&&jq(function(){var c={};return c.gad_source=b,c},4)}
function Kr(a,b,c){var d=[];if(b.length===0)return d;for(var e={},f=0;f<b.length;f++){var g=b[f],k=g.type?g.type:"gcl";(g.labels||[]).indexOf(c)===-1?(a.push(0),e[k]||d.push(g)):a.push(1);e[k]=!0}return d}function Lr(a,b,c,d){var e=[];c=c||{};if(!Zq(Yq()))return e;var f=br(a),g=Kr(e,f,b);if(g.length&&!d)for(var k=l(g),m=k.next();!m.done;m=k.next()){var n=m.value,p=n.timestamp,q=[n.version,Math.round(p/1E3),n.W].concat(n.labels||[],[b]).join("."),r=Jp(c,p,!0);r.Lb=Yq();zp(a,q,r)}return e}
function Mr(a,b){var c=[];b=b||{};var d=dr(b),e=Kr(c,d,a);if(e.length)for(var f=l(e),g=f.next();!g.done;g=f.next()){var k=g.value,m=er(b.prefix),n=fr(k.type,m);if(!n)break;var p=k,q=p.version,r=p.W,u=p.labels,v=p.timestamp,t=Math.round(v/1E3);if(k.type==="ag"){var w={},x=(w.k=r,w.i=""+t,w.b=(u||[]).concat([a]),w);Kq(n,x,b,v)}else if(k.type==="gb"){var y=[q,t,r].concat(u||[],[a]).join("."),B=Jp(b,v,!0);B.Lb=Yq();zp(n,y,B)}}return c}
function Nr(a,b){var c=er(b),d=fr(a,c);if(!d)return 0;var e;e=a==="ag"?gr(d):br(d);for(var f=0,g=0;g<e.length;g++)f=Math.max(f,e[g].timestamp);return f}function Or(a){for(var b=0,c=l(Object.keys(a)),d=c.next();!d.done;d=c.next())for(var e=a[d.value],f=0;f<e.length;f++)b=Math.max(b,Number(e[f].timestamp));return b}function Pr(a){var b=Math.max(Nr("aw",a),Or(Zq(Yq())?Nq():{})),c=Math.max(Nr("gb",a),Or(Zq(Yq())?Nq("_gac_gb",!0):{}));c=Math.max(c,Nr("ag",a));return c>b};
var Qr=function(a,b){var c=Mi.ads_pageview=Mi.ads_pageview||{};if(c[a])return!1;(b===void 0?0:b)||(c[a]=!0);return!0},Rr=function(a){var b=Hj(a);return Ab("gclid dclid gbraid wbraid gclaw gcldc gclha gclgf gclgb _gl".split(" "),b,"0")},Zr=function(a,b,c,d,e){var f=er(a.prefix);if(Qr(f,!0)){var g=tr(),k=[],m=g.gclid,n=g.dclid,p=g.gclsrc||"aw",q=Sr(),r=q.cf,u=q.yk;!m||p!=="aw.ds"&&p!=="aw"&&p!=="ds"&&p!=="3p.ds"||k.push({W:m,df:p});n&&k.push({W:n,df:"ds"});k.length===2&&U(147);k.length===0&&g.wbraid&&
k.push({W:g.wbraid,df:"gb"});k.length===0&&p==="aw.ds"&&k.push({W:"",df:"aw.ds"});Tr(function(){var v=W(Ur());if(v){pq(a);var t=[],w=v?nq[qq(a.prefix)]:void 0;w&&t.push("auid="+w);if(W(N.g.O)){e&&t.push("userId="+e);var x=nm(im.Dh);if(x===void 0)mm(im.Eh,!0);else{var y=nm(im.Pe);t.push("ga_uid="+y+"."+x)}}var B=E.referrer?Bj(Hj(E.referrer),"host"):"",C=v||!d?k:[];C.length===0&&(Vr.test(B)||Wr.test(B))&&C.push({W:"",df:""});if(C.length!==0||r!==void 0){B&&t.push("ref="+encodeURIComponent(B));var D=
Xr();t.push("url="+encodeURIComponent(D));t.push("tft="+nb());var G=Cc();G!==void 0&&t.push("tfd="+Math.round(G));var K=lo(!0);t.push("frm="+K);r!==void 0&&t.push("gad_source="+encodeURIComponent(r));u!==void 0&&t.push("gad_source_src="+encodeURIComponent(u.toString()));if(!c){var F={};c=an(Rm(new Qm(0),(F[N.g.qa]=wn.j[N.g.qa],F)))}t.push("gtm="+lp({ya:b}));Zo()&&t.push("gcs="+$o());t.push("gcd="+dp(c));gp()&&t.push("dma_cps="+ep());t.push("dma="+fp());Yo(c)?t.push("npa=0"):t.push("npa=1");ip()&&
t.push("_ng=1");vo(Lo())&&t.push("tcfd="+hp());var S=So();S&&t.push("gdpr="+S);var M=Ro();M&&t.push("gdpr_consent="+M);R(21)&&t.push("apve=0");R(112)&&bq(!1)._up&&t.push("gtm_up=1");gj()&&t.push("tag_exp="+gj());if(C.length>0)for(var T=0;T<C.length;T++){var ca=C[T],da=ca.W,Z=ca.df;if(!Yr(a.prefix,Z+"."+da,w!==void 0)){var Q='https://adservice.google.com/pagead/regclk?'+t.join("&");da!==""?Q=Z==="gb"?Q+"&wbraid="+da:Q+"&gclid="+da+"&gclsrc="+Z:Z==="aw.ds"&&(Q+="&gclsrc=aw.ds");wc(Q)}}else if(r!==void 0&&
!Yr(a.prefix,"gad",w!==void 0)){var pa='https://adservice.google.com/pagead/regclk?'+t.join("&");wc(pa)}}}})}},Yr=function(a,b,c){var d=Mi.joined_auid=Mi.joined_auid||{},e=(c?a||"_gcl":"")+"."+b;if(d[e])return!0;d[e]=!0;return!1},Sr=function(){var a=Hj(A.location.href),b=void 0,c=void 0,d=Bj(a,"query",!1,void 0,"gad_source"),e,f=a.hash.replace("#","").match($r);e=f?f[1]:void 0;d&&e?(b=d,c=1):d?(b=d,c=2):e&&(b=e,c=3);return{cf:b,yk:c}},Xr=function(){var a=lo(!1)===1?A.top.location.href:A.location.href;
return a=a.replace(/[\?#].*$/,"")},as=function(a){var b=[];gb(a,function(c,d){d=lr(d);for(var e=[],f=0;f<d.length;f++)e.push(d[f].W);e.length&&b.push(c+":"+e.join(","))});return b.join(";")},cs=function(a,b){return bs("dc",a,b)},ds=function(a,b){return bs("aw",a,b)},bs=function(a,b,c){if(a==="aw"||a==="dc"||a==="gb"){var d=Ij("gcl"+a);if(d)return d.split(".")}var e=er(b);if(e==="_gcl"){var f=!W(Ur())&&c,g;g=tr()[a]||[];if(g.length>0)return f?["0"]:g}var k=fr(a,e);return k?ar(k):[]},Tr=function(a){var b=
Ur();dm(function(){a();W(b)||kl(a,b)},b)},Ur=function(){return[N.g.N,N.g.O]},Vr=/^(?:www\.)?google(?:\.com?)?(?:\.[a-z]{2}t?)?$/,Wr=/^www\.googleadservices\.com$/,$r=/^gad_source[_=](\d+)$/;function es(){Mi.dedupe_gclid||(Mi.dedupe_gclid=Gp());return Mi.dedupe_gclid};var fs=/^(www\.)?google(\.com?)?(\.[a-z]{2}t?)?$/,gs=/^www.googleadservices.com$/;function hs(a){a||(a=is());return a.In?!1:a.Gm||a.Hm||a.Km||a.Im||a.cf||a.tm||a.Jm||a.ym?!0:!1}function is(){var a={},b=bq(!0);a.In=!!b._up;var c=tr();a.Gm=c.aw!==void 0;a.Hm=c.dc!==void 0;a.Km=c.wbraid!==void 0;a.Im=c.gbraid!==void 0;a.Jm=c.gclsrc==="aw.ds";a.cf=Sr().cf;var d=E.referrer?Bj(Hj(E.referrer),"host"):"";a.ym=fs.test(d);a.tm=gs.test(d);return a};var js=RegExp("^UA-\\d+-\\d+%3A[\\w-]+(?:%2C[\\w-]+)*(?:%3BUA-\\d+-\\d+%3A[\\w-]+(?:%2C[\\w-]+)*)*$"),ks=/^~?[\w-]+(?:\.~?[\w-]+)*$/,ls=/^\d+\.fls\.doubleclick\.net$/,ms=/;gac=([^;?]+)/,ns=/;gacgb=([^;?]+)/;
function os(a,b){if(ls.test(E.location.host)){var c=E.location.href.match(b);return c&&c.length===2&&c[1].match(js)?decodeURIComponent(c[1]):""}for(var d=[],e=l(Object.keys(a)),f=e.next();!f.done;f=e.next()){for(var g=f.value,k=[],m=a[g],n=0;n<m.length;n++)k.push(m[n].W);d.push(g+":"+k.join(","))}return d.length>0?d.join(";"):""}
function ps(a,b,c){for(var d=Zq(Yq())?Nq("_gac_gb",!0):{},e=[],f=!1,g=l(Object.keys(d)),k=g.next();!k.done;k=g.next()){var m=k.value,n=Lr("_gac_gb_"+m,a,b,c);f=f||n.length!==0&&n.some(function(p){return p===1});e.push(m+":"+n.join(","))}return{sm:f?e.join(";"):"",qm:os(d,ns)}}function qs(a){var b=E.location.href.match(new RegExp(";"+a+"=([^;?]+)"));return b&&b.length===2&&b[1].match(ks)?b[1]:void 0}
function rs(a){var b=Zh(9),c={},d,e,f;ls.test(E.location.host)&&(d=qs("gclgs"),e=qs("gclst"),b&&(f=qs("gcllp")));if(d&&e&&(!b||f))c.ng=d,c.pg=e,c.og=f;else{var g=nb(),k=gr((a||"_gcl")+"_gs"),m=k.map(function(q){return q.W}),n=k.map(function(q){return g-q.timestamp}),p=[];b&&(p=k.map(function(q){return q.Sd}));m.length>0&&n.length>0&&(!b||p.length>0)&&(c.ng=m.join("."),c.pg=n.join("."),b&&p.length>0&&(c.og=p.join(".")))}return c}
function ss(a,b,c,d){d=d===void 0?!1:d;if(ls.test(E.location.host)){var e=qs(c);if(e)return[{W:e}]}else{if(b==="gclid"){var f=(a||"_gcl")+"_aw";return d?pr(f):br(f)}if(b==="wbraid")return br((a||"_gcl")+"_gb");if(b==="braids")return dr({prefix:a})}return[]}function ts(a){return ss(a,"gclid","gclaw").map(function(b){return b.W}).join(".")}
function us(a){var b=ss(a,"gclid","gclaw",!0),c=b.map(function(f){return f.W}).join("."),d=b.map(function(f){return f.Qa||0}).join("."),e=b.map(function(f){for(var g=0,k=l(f.bd||[]),m=k.next();!m.done;m=k.next()){var n=m.value;n===1&&(g|=1);n===2&&(g|=2)}return g.toString()}).join(".");return{W:c,zk:d,Ak:e}}function vs(a){return ss(a,"braids","gclgb").map(function(b){return b.W}).join(".")}function ws(a){return ls.test(E.location.host)?!(qs("gclaw")||qs("gac")):Pr(a)}
function xs(a,b,c){var d;d=c?Mr(a,b):Lr((b&&b.prefix||"_gcl")+"_gb",a,b);return d.length===0||d.every(function(e){return e===0})?"":d.join(".")};function ys(){var a=A.__uspapi;if(Za(a)){var b="";try{a("getUSPData",1,function(c,d){if(d&&c){var e=c.uspString;e&&RegExp("^[\\da-zA-Z-]{1,20}$").test(e)&&(b=e)}})}catch(c){}return b}};
var Cs=function(a){if(a.eventName===N.g.da&&a.metadata.hit_type==="page_view")if(R(22)){a.metadata.redact_click_ids=V(a.m,N.g.la)!=null&&V(a.m,N.g.la)!==!1&&!W([N.g.N,N.g.O]);var b=zs(a),c=V(a.m,N.g.Aa)!==!1;c||(a.j[N.g.pj]="1");var d=er(b.prefix),e=a.metadata.is_server_side_destination;if(!a.metadata.consent_updated&&!a.metadata.user_id_updated){var f=V(a.m,N.g.fb),g=V(a.m,N.g.sa)||{};As({Ld:c,Td:g,Zd:f,yc:b});if(!e&&!Qr(d)){a.isAborted=!0;return}}if(e)a.isAborted=!0;else{a.j[N.g.Jc]=N.g.ic;if(a.metadata.consent_updated)a.j[N.g.Jc]=
N.g.il,a.j[N.g.fc]="1";else if(a.metadata.user_id_updated)a.j[N.g.Jc]=N.g.ol;else{var k=tr();a.j[N.g.he]=k.gclid;a.j[N.g.qe]=k.dclid;a.j[N.g.kj]=k.gclsrc;a.j[N.g.he]||a.j[N.g.qe]||(a.j[N.g.Ff]=k.wbraid,a.j[N.g.Ig]=k.gbraid);a.j[N.g.Ga]=E.referrer?Bj(Hj(E.referrer),"host"):"";a.j[N.g.wa]=Xr();if(R(25)&&fc){var m=Bj(Hj(fc),"host");m&&(a.j[N.g.Hj]=m)}var n=Sr(),p=n.yk;a.j[N.g.cj]=n.cf;a.j[N.g.dj]=p;a.j[N.g.Qb]=lo(!0);var q=is();hs(q)&&(a.j[N.g.zd]="1");a.j[N.g.mj]=es();bq(!1)._up==="1"&&(a.j[N.g.Bj]=
"1")}nl=!0;a.j[N.g.eb]=void 0;a.j[N.g.zb]=void 0;var r=W([N.g.N,N.g.O]);r&&(a.j[N.g.eb]=Bs(),c&&(pq(b),a.j[N.g.zb]=nq[qq(b.prefix)]));a.j[N.g.yb]=void 0;a.j[N.g.ab]=void 0;if(!a.j[N.g.he]&&!a.j[N.g.qe]&&ws(d)){var u=cr(b);u.length>0&&(a.j[N.g.yb]=u.join("."))}else if(!a.j[N.g.Ff]&&r){var v=ar(d+"_aw");v.length>0&&(a.j[N.g.ab]=v.join("."))}R(28)&&(a.j[N.g.Cj]=Dc());a.m.isGtmEvent&&(a.m.j[N.g.qa]=wn.j[N.g.qa]);Yo(a.m)?a.j[N.g.Vb]=!1:a.j[N.g.Vb]=!0;a.metadata.add_tag_timing=!0;var t=ys();t!==void 0&&
(a.j[N.g.Hd]=t||"error");var w=So();w&&(a.j[N.g.oc]=w);var x=Ro();x&&(a.j[N.g.sc]=x);a.metadata.speculative=!1}}else a.isAborted=!0},zs=function(a){var b={prefix:V(a.m,N.g.jb)||V(a.m,N.g.Fa),domain:V(a.m,N.g.Na),Kb:V(a.m,N.g.Ta),flags:V(a.m,N.g.cb)};a.m.isGtmEvent&&(b.path=V(a.m,N.g.lb));return b},Ds=function(a,b){var c,d,e,f,g,k,m,n;c=a.Ld;d=a.Td;e=a.Zd;f=a.ya;g=a.m;k=a.Wd;m=a.no;n=a.Uk;As({Ld:c,Td:d,Zd:e,yc:b});c&&m!==!0&&(n!=null?n=String(n):n=void 0,Zr(b,f,g,k,n))},As=function(a){var b,c,d,e;
b=a.Ld;c=a.Td;d=a.Zd;e=a.yc;b&&(lq(c[N.g.Nc],!!c[N.g.X])&&(yr(Es,e),Ar(e),xq(e)),(R(101)||R(133))&&lo()!==2?wr(e):ur(e),Er(Es,e),Fr(e));c[N.g.X]&&(Cr(Es,c[N.g.X],c[N.g.Sb],!!c[N.g.Cb],e.prefix),Dr(c[N.g.X],c[N.g.Sb],!!c[N.g.Cb],e.prefix),yq(qq(e.prefix),c[N.g.X],c[N.g.Sb],!!c[N.g.Cb],e),yq("FPAU",c[N.g.X],c[N.g.Sb],!!c[N.g.Cb],e));d&&(R(89)?Hr(Fs):Hr(Gs));Jr(Gs)},Hs=function(a,b,c,d){var e,f,g;e=a.Vk;f=a.callback;g=a.Ek;if(typeof f==="function")if(e===N.g.ab&&g===void 0){var k=d(b.prefix,c);k.length===
0?f(void 0):k.length===1?f(k[0]):f(k)}else e===N.g.zb?(U(65),pq(b,!1),f(nq[qq(b.prefix)])):f(g)},Es=["aw","dc","gb"],Gs=["aw","dc","gb","ag"],Fs=["aw","dc","gb","ag","gad_source"];function Is(a){var b=V(a.m,N.g.Rb),c=V(a.m,N.g.qc);b&&!c?(a.eventName!==N.g.da&&a.eventName!==N.g.ed&&U(131),a.isAborted=!0):!b&&c&&(U(132),a.isAborted=!0)}function Js(a){var b=W(N.g.N)?Mi.pscdl:"denied";b!=null&&(a.j[N.g.Jf]=b)}
function Ks(a){var b=lo(!0);a.j[N.g.Qb]=b}function Ls(a){ip()&&(a.j[N.g.Lc]=1)}function Bs(){var a=E.title;if(a===void 0||a==="")return"";var b=function(d){try{return decodeURIComponent(d),!0}catch(e){return!1}};a=encodeURIComponent(a);for(var c=256;c>0&&!b(a.substring(0,c));)c--;return decodeURIComponent(a.substring(0,c))}function Ms(a){Ns(a,"ce",V(a.m,N.g.Ta))}function Ns(a,b,c){a.j[N.g.Id]||(a.j[N.g.Id]={});a.j[N.g.Id][b]=c};function Ts(a,b,c,d){var e=mc(),f;if(e===1)a:{var g=Yi;g=g.toLowerCase();for(var k="https://"+g,m="http://"+g,n=1,p=E.getElementsByTagName("script"),q=0;q<p.length&&q<100;q++){var r=p[q].src;if(r){r=r.toLowerCase();if(r.indexOf(m)===0){f=3;break a}n===1&&r.indexOf(k)===0&&(n=2)}}f=n}else f=e;return(f===2||d||"http:"!==A.location.protocol?a:b)+c};function Us(a){return typeof a!=="object"||a===null?{}:a}function Vs(a){return a===void 0||a===null?"":typeof a==="object"?a.toString():String(a)}function Ws(a){if(a!==void 0&&a!==null)return Vs(a)}function Xs(a){return typeof a==="number"?a:Ws(a)};function it(a){return{getDestinationId:function(){return a.target.destinationId},getEventName:function(){return a.eventName},setEventName:function(b){a.eventName=b},getHitData:function(b){return a.j[b]},setHitData:function(b,c){a.j[b]=c},setHitDataIfNotDefined:function(b,c){a.j[b]===void 0&&(a.j[b]=c)},copyToHitData:function(b,c){a.copyToHitData(b,c)},getMetadata:function(b){return a.metadata[b]},setMetadata:function(b,c){a.metadata[b]=c},isAborted:function(){return a.isAborted},abort:function(){a.isAborted=
!0},getFromEventContext:function(b){return V(a.m,b)},Wb:function(){return a},getHitKeys:function(){return Object.keys(a.j)}}};var kt=function(a){var b=jt[R(128)&&!gk?uk(a.target.destinationId):a.target.destinationId];if(!a.isAborted&&b)for(var c=it(a),d=0;d<b.length;++d){try{b[d](c)}catch(e){a.isAborted=!0}if(a.isAborted)break}},lt=function(a,b){var c=jt[a];c||(c=jt[a]=[]);c.push(b)},jt={};function pt(a){var b,c=A,d=[];try{c.navigation&&c.navigation.entries&&(d=c.navigation.entries())}catch(k){}b=d;for(var e=b.length-1;e>=0;e--){var f=b[e],g=f.url&&f.url.match("[?&#]"+a+"=([^&#]+)");if(g&&g.length===2)return g[1]}};var qt,rt=!1;function st(){rt=!0;qt=qt||{}}function tt(a){rt||st();return qt[a]}function ut(){var a=A.screen;return{width:a?a.width:0,height:a?a.height:0}}
function vt(a){if(E.hidden)return!0;var b=a.getBoundingClientRect();if(b.top===b.bottom||b.left===b.right||!A.getComputedStyle)return!0;var c=A.getComputedStyle(a,null);if(c.visibility==="hidden")return!0;for(var d=a,e=c;d;){if(e.display==="none")return!0;var f=e.opacity,g=e.filter;if(g){var k=g.indexOf("opacity(");k>=0&&(g=g.substring(k+8,g.indexOf(")",k)),g.charAt(g.length-1)==="%"&&(g=g.substring(0,g.length-1)),f=String(Math.min(Number(g),Number(f))))}if(f!==void 0&&Number(f)<=0)return!0;(d=d.parentElement)&&
(e=A.getComputedStyle(d,null))}return!1}
var xt=function(a){var b=wt(),c=b.height,d=b.width,e=a.getBoundingClientRect(),f=e.bottom-e.top,g=e.right-e.left;return f&&g?(1-Math.min((Math.max(0-e.left,0)+Math.max(e.right-d,0))/g,1))*(1-Math.min((Math.max(0-e.top,0)+Math.max(e.bottom-c,0))/f,1)):0},wt=function(){var a=E.body,b=E.documentElement||a&&a.parentElement,c,d;if(E.compatMode&&E.compatMode!=="BackCompat")c=b?b.clientHeight:0,d=b?b.clientWidth:0;else{var e=function(f,g){return f&&g?Math.min(f,g):Math.max(f,g)};c=e(b?b.clientHeight:0,a?
a.clientHeight:0);d=e(b?b.clientWidth:0,a?a.clientWidth:0)}return{width:d,height:c}};var Bt=function(a){if(zt){if(a>=0&&a<At.length&&At[a]){var b;(b=At[a])==null||b.disconnect();At[a]=void 0}}else A.clearInterval(a)},Et=function(a,b,c){for(var d=0;d<c.length;d++)c[d]>1?c[d]=1:c[d]<0&&(c[d]=0);if(zt){var e=!1;H(function(){e||Ct(a,b,c)()});return Dt(function(f){e=!0;for(var g={jf:0};g.jf<f.length;g={jf:g.jf},g.jf++)H(function(k){return function(){a(f[k.jf])}}(g))},
b,c)}return A.setInterval(Ct(a,b,c),1E3)},Ct=function(a,b,c){function d(k,m){var n={top:0,bottom:0,right:0,left:0,width:0,height:0},p={boundingClientRect:k.getBoundingClientRect(),intersectionRatio:m,intersectionRect:n,isIntersecting:m>0,rootBounds:n,target:k,time:nb()};H(function(){a(p)})}for(var e=[],f=[],g=0;g<b.length;g++)e.push(0),f.push(-1);c.sort(function(k,m){return k-m});return function(){for(var k=0;k<b.length;k++){var m=xt(b[k]);if(m>e[k])for(;f[k]<c.length-1&&m>=c[f[k]+1];)d(b[k],m),f[k]++;
else if(m<e[k])for(;f[k]>=0&&m<=c[f[k]];)d(b[k],m),f[k]--;e[k]=m}}},Dt=function(a,b,c){for(var d=new A.IntersectionObserver(a,{threshold:c}),e=0;e<b.length;e++)d.observe(b[e]);for(var f=0;f<At.length;f++)if(!At[f])return At[f]=d,f;return At.push(d)-1},At=[],zt=!(!A.IntersectionObserver||!A.IntersectionObserverEntry);
var Gt=function(a){return a.tagName+":"+a.isVisible+":"+a.Z.length+":"+Ft.test(a.Z)},Ut=function(a){a=a||{Qd:!0,Rd:!0,yg:void 0};a.Gb=a.Gb||{email:!0,phone:!1,address:!1};var b=Ht(a),c=It[b];if(c&&nb()-c.timestamp<200)return c.result;var d=Jt(),e=d.status,f=[],g,k,m=[];if(!R(30)){if(a.Gb&&a.Gb.email){var n=Kt(d.elements);f=Lt(n,a&&a.Xe);g=Mt(f);n.length>10&&(e="3")}!a.yg&&g&&(f=[g]);for(var p=0;p<f.length;p++)m.push(Nt(f[p],!!a.Qd,!!a.Rd));m=m.slice(0,10)}else if(a.Gb){}g&&(k=Nt(g,!!a.Qd,!!a.Rd));var D={elements:m,
oi:k,status:e};It[b]={timestamp:nb(),result:D};return D},Vt=function(a,b){if(a){var c=a.trim().replaceAll(/\s+/g,"").replaceAll(/(\d{2,})\./g,"$1").replaceAll(/-/g,"").replaceAll(/\((\d+)\)/g,"$1");if(b&&c.match(/^\+?\d{3,7}$/))return c;c.charAt(0)!=="+"&&(c="+"+c);if(c.match(/^\+\d{10,15}$/))return c}},Xt=function(a){var b=Wt(/^(\w|[- ])+$/)(a);if(!b)return b;var c=b.replaceAll(/[- ]+/g,"");return c.length>10?void 0:c},Wt=function(a){return function(b){var c=b.match(a);return c?c[0].trim().toLowerCase():
void 0}},Tt=function(a,b,c){var d=a.element,e={Z:a.Z,type:a.ka,tagName:d.tagName};b&&(e.querySelector=Yt(d));c&&(e.isVisible=!vt(d));return e},Nt=function(a,b,c){return Tt({element:a.element,Z:a.Z,ka:St.Nb},b,c)},Ht=function(a){var b=!(a==null||!a.Qd)+"."+!(a==null||!a.Rd);a&&a.Xe&&a.Xe.length&&(b+="."+a.Xe.join("."));a&&a.Gb&&(b+="."+a.Gb.email+"."+a.Gb.phone+"."+a.Gb.address);return b},Mt=function(a){if(a.length!==0){var b;b=Zt(a,function(c){return!$t.test(c.Z)});b=Zt(b,function(c){return c.element.tagName.toUpperCase()===
"INPUT"});b=Zt(b,function(c){return!vt(c.element)});return b[0]}},Lt=function(a,b){if(!b||b.length===0)return a;for(var c=[],d=0;d<a.length;d++){for(var e=!0,f=0;f<b.length;f++){var g=b[f];if(g&&Ph(a[d].element,g)){e=!1;break}}e&&c.push(a[d])}return c},Zt=function(a,b){if(a.length<=1)return a;var c=a.filter(b);return c.length===0?a:c},Yt=function(a){var b;if(a===E.body)b="body";else{var c;if(a.id)c="#"+a.id;else{var d;if(a.parentElement){var e;a:{var f=a.parentElement;if(f){for(var g=0;g<f.childElementCount;g++)if(f.children[g]===
a){e=g+1;break a}e=-1}else e=1}d=Yt(a.parentElement)+">:nth-child("+e.toString()+")"}else d="";c=d}b=c}return b},Kt=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.textContent;d.tagName.toUpperCase()==="INPUT"&&d.value&&(e=d.value);if(e){var f=e.match(au);if(f){var g=f[0],k;if(A.location){var m=Dj(A.location,"host",!0);k=g.toLowerCase().indexOf(m)>=0}else k=!1;k||b.push({element:d,Z:g})}}}return b},Jt=function(){var a=[],b=E.body;if(!b)return{elements:a,status:"4"};for(var c=b.querySelectorAll("*"),
d=0;d<c.length&&d<1E4;d++){var e=c[d];if(!(bu.indexOf(e.tagName.toUpperCase())>=0)&&e.children instanceof HTMLCollection){for(var f=!1,g=0;g<e.childElementCount&&g<1E4;g++)if(!(cu.indexOf(e.children[g].tagName.toUpperCase())>=0)){f=!0;break}(!f||R(30)&&du.indexOf(e.tagName)!==-1)&&a.push(e)}}return{elements:a,status:c.length>1E4?"2":"1"}},eu=!1;var au=/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i,
Ft=/@(gmail|googlemail)\./i,$t=/support|noreply/i,bu="SCRIPT STYLE IMG SVG PATH BR NOSCRIPT TEXTAREA".split(" "),cu=["BR"],St={Nb:"1",Rc:"2",Pc:"3",Qc:"4",de:"5",Me:"6",kg:"7",Gh:"8",Ag:"9",Ah:"10"},It={},du=["INPUT","SELECT"],fu=Wt(/^([^\x00-\x40\x5b-\x60\x7b-\xff]|[.-]|\s)+$/);
var Fu=function(a,b,c){a.j[N.g.Oe]||(a.j[N.g.Oe]={});a.j[N.g.Oe][b]=c},Hu=function(a,b){var c=Gu(a,N.g.xe,a.m.C[N.g.xe]);if(c&&c[b||a.eventName]!==void 0)return c[b||a.eventName]},Iu=function(a){var b=a.metadata.user_data;if(Qc(b))return b},Ju=function(a){if(a.metadata.is_merchant_center||!Nj(a.m))return!1;if(!V(a.m,N.g.Oc)){var b=V(a.m,N.g.nc);return b===!0||b==="true"}return!0},Ku=function(a){return Gu(a,N.g.Mc,V(a.m,N.g.Mc))||!!Gu(a,"google_ng",!1)};var Jf;var Lu=Number('')||5,Mu=Number('')||50,Nu=db();var Su={Rl:Number('')||500,El:Number('')||5E3,Xj:Number('20')||10,fl:Number('')||5E3};function Tu(a){return a.performance&&a.performance.now()||Date.now()}
var Uu=function(a,b){var c;return c};var Vu;function bv(){var a=Mf(Jf.j,"",function(){return{}});try{return a("internal_sw_allowed"),!0}catch(b){return!1}}
function cv(a,b,c){c=c===void 0?!1:c;}
var dv=function(a,b,c,d){};
function ev(a,b,c,d,e){}
function fv(a,b,c,d){}var gv=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);e<128?b[c++]=e:(e<2048?b[c++]=e>>6|192:((e&64512)==55296&&d+1<a.length&&(a.charCodeAt(d+1)&64512)==56320?(e=65536+((e&1023)<<10)+(a.charCodeAt(++d)&1023),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};Yn();ho()||Vn("iPod");Vn("iPad");!Vn("Android")||Zn()||Yn()||Xn()||Vn("Silk");Zn();!Vn("Safari")||Zn()||(Wn()?0:Vn("Coast"))||Xn()||(Wn()?0:Vn("Edge"))||(Wn()?Un("Microsoft Edge"):Vn("Edg/"))||(Wn()?Un("Opera"):Vn("OPR"))||Yn()||Vn("Silk")||Vn("Android")||io();var hv={},iv=null,jv=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);e>255&&(b[c++]=e&255,e>>=8);b[c++]=e}var f=4;f===void 0&&(f=0);if(!iv){iv={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),k=["+/=","+/","-_=","-_.","-_"],m=0;m<5;m++){var n=g.concat(k[m].split(""));hv[m]=n;for(var p=0;p<n.length;p++){var q=n[p];iv[q]===void 0&&(iv[q]=p)}}}for(var r=hv[f],u=Array(Math.floor(b.length/3)),v=r[64]||"",t=0,w=0;t<b.length-2;t+=3){var x=b[t],
y=b[t+1],B=b[t+2],C=r[x>>2],D=r[(x&3)<<4|y>>4],G=r[(y&15)<<2|B>>6],K=r[B&63];u[w++]=""+C+D+G+K}var F=0,S=v;switch(b.length-t){case 2:F=b[t+1],S=r[(F&15)<<2]||v;case 1:var M=b[t];u[w]=""+r[M>>2]+r[(M&3)<<4|F>>4]+S+v}return u.join("")};var kv="platform platformVersion architecture model uaFullVersion bitness fullVersionList wow64".split(" ");function lv(a){var b;return(b=a.google_tag_data)!=null?b:a.google_tag_data={}}function mv(){var a=A.google_tag_data,b;if(a!=null&&a.uach){var c=a.uach,d=Object.assign({},c);c.fullVersionList&&(d.fullVersionList=c.fullVersionList.slice(0));b=d}else b=null;return b}function nv(){var a,b;return(b=(a=A.google_tag_data)==null?void 0:a.uach_promise)!=null?b:null}
function ov(a){var b,c;return typeof((b=a.navigator)==null?void 0:(c=b.userAgentData)==null?void 0:c.getHighEntropyValues)==="function"}function pv(){var a=A;if(!ov(a))return null;var b=lv(a);if(b.uach_promise)return b.uach_promise;var c=a.navigator.userAgentData.getHighEntropyValues(kv).then(function(d){b.uach!=null||(b.uach=d);return d});return b.uach_promise=c};
var rv=function(a,b){if(a){var c=qv(a);Object.assign(b.j,c)}},qv=function(a){var b={};b[N.g.Zf]=a.architecture;b[N.g.cg]=a.bitness;a.fullVersionList&&(b[N.g.dg]=a.fullVersionList.map(function(c){return encodeURIComponent(c.brand||"")+";"+encodeURIComponent(c.version||"")}).join("|"));b[N.g.eg]=a.mobile?"1":"0";b[N.g.fg]=a.model;b[N.g.gg]=a.platform;b[N.g.hg]=a.platformVersion;b[N.g.ig]=a.wow64?"1":"0";return b},tv=function(a){var b=sv.Hn,c=function(g,k){try{a(g,k)}catch(m){}},d=mv();if(d)c(d);else{var e=
nv();if(e){b=Math.min(Math.max(isFinite(b)?b:0,0),1E3);var f=A.setTimeout(function(){c.nf||(c.nf=!0,U(106),c(null,Error("Timeout")))},b);e.then(function(g){c.nf||(c.nf=!0,U(104),A.clearTimeout(f),c(g))}).catch(function(g){c.nf||(c.nf=!0,U(105),A.clearTimeout(f),c(null,g))})}else c(null)}},vv=function(){if(ov(A)&&(uv=nb(),!nv())){var a=pv();a&&(a.then(function(){U(95)}),a.catch(function(){U(96)}))}},uv;function wv(a){var b;b=b===void 0?document:b;var c;return!((c=b.featurePolicy)==null||!c.allowedFeatures().includes(a))};function xv(){return wv("join-ad-interest-group")&&Za(cc.joinAdInterestGroup)}
function yv(a,b){var c=Yh[3]===void 0?1:Yh[3],d='iframe[data-tagging-id="'+b+'"]',e=[];try{if(c===1){var f=E.querySelector(d);f&&(e=[f])}else e=Array.from(E.querySelectorAll(d))}catch(q){}var g;a:{try{g=E.querySelectorAll('iframe[allow="join-ad-interest-group"][data-tagging-id*="-"]');break a}catch(q){}g=void 0}var k=g,m=((k==null?void 0:k.length)||0)>=(Yh[2]===void 0?50:Yh[2]),n;if(n=e.length>=1){var p=Number(e[e.length-1].dataset.loadTime);p!==void 0&&nb()-p<(Yh[1]===void 0?6E4:Yh[1])?(Va("TAGGING",
9),n=!0):n=!1}if(!n){if(c===1)if(e.length>=1)zv(e[0]);else{if(m){Va("TAGGING",10);return}}else e.length>=c?zv(e[0]):m&&zv(k[0]);nc(a,void 0,{allow:"join-ad-interest-group"},{taggingId:b,loadTime:nb()})}}function zv(a){try{a.parentNode.removeChild(a)}catch(b){}}function Av(){return"https://td.doubleclick.net"};function Bv(a){var b=a.location.href;if(a===a.top)return{url:b,Sm:!0};var c=!1,d=a.document;d&&d.referrer&&(b=d.referrer,a.parent===a.top&&(c=!0));var e=a.location.ancestorOrigins;if(e){var f=e[e.length-1];f&&b.indexOf(f)===-1&&(c=!1,b=f)}return{url:b,Sm:c}};
var tw=function(a,b){var c={},d=function(f,g){var k;k=g===!0?"1":g===!1?"0":encodeURIComponent(String(g));c[f]=k};gb(a.j,function(f,g){var k=sw[f];k&&g!==void 0&&g!==""&&(!a.metadata.redact_click_ids||f!==N.g.he&&f!==N.g.qe&&f!==N.g.Ff&&f!==N.g.Ig||(g="0"),d(k,g))});d("gtm",lp({ya:a.metadata.source_canonical_id}));Zo()&&d("gcs",$o());d("gcd",dp(a.m));gp()&&d("dma_cps",ep());d("dma",fp());vo(Lo())&&d("tcfd",hp());gj()&&d("tag_exp",gj());if(a.metadata.add_tag_timing){d("tft",nb());var e=Cc();e!==void 0&&
d("tfd",Math.round(e))}R(22)&&d("apve","1");(R(23)||R(24))&&d("apvf",Ac()?R(24)?"f":"sb":"nf");b(c)},uw=function(a){tw(a,function(b){if(a.metadata.hit_type==="page_view"){var c=[];gb(b,function(e,f){c.push(e+"="+f)});var d=Oj(W([N.g.N,N.g.O])?"https://www.google.com":"https://pagead2.googlesyndication.com",!0)+"/ccm/collect?"+c.join("&");R(24)&&Ac()?zc(d,void 0,{Fk:!0},function(){},function(){pc(d+"&img=1")}):xc(d)||pc(d+"&img=1");if(Za(a.m.onSuccess))a.m.onSuccess()}})},vw={},sw=(vw[N.g.fc]="gcu",
vw[N.g.yb]="gclgb",vw[N.g.ab]="gclaw",vw[N.g.cj]="gad_source",vw[N.g.dj]="gad_source_src",vw[N.g.he]="gclid",vw[N.g.kj]="gclsrc",vw[N.g.Ig]="gbraid",vw[N.g.Ff]="wbraid",vw[N.g.zb]="auid",vw[N.g.mj]="rnd",vw[N.g.pj]="ncl",vw[N.g.Og]="gcldc",vw[N.g.qe]="dclid",vw[N.g.nb]="edid",vw[N.g.Jc]="en",vw[N.g.oc]="gdpr",vw[N.g.ob]="gdid",vw[N.g.Lc]="_ng",vw[N.g.Bj]="gtm_up",vw[N.g.Qb]="frm",vw[N.g.zd]="lps",vw[N.g.De]="did",vw[N.g.Cj]="navt",vw[N.g.wa]="dl",vw[N.g.Ga]="dr",vw[N.g.eb]="dt",vw[N.g.Hj]="scrsrc",
vw[N.g.Wf]="ga_uid",vw[N.g.sc]="gdpr_consent",vw[N.g.Ba]="uid",vw[N.g.Hd]="us_privacy",vw[N.g.Vb]="npa",vw);var ww={J:{Hi:"ads_conversion_hit",ce:"container_execute_start",Ki:"container_setup_end",Bg:"container_setup_start",Ii:"container_blocking_end",Ji:"container_execute_end",Li:"container_yield_end",Cg:"container_yield_start",Nj:"event_execute_end",Mj:"event_evaluation_end",xh:"event_evaluation_start",Oj:"event_setup_end",Ie:"event_setup_start",Qj:"ga4_conversion_hit",Le:"page_load",ao:"pageview",vc:"snippet_load",lk:"tag_callback_error",mk:"tag_callback_failure",nk:"tag_callback_success",pk:"tag_execute_end",
Jd:"tag_execute_start"}};function xw(){function a(c,d){var e=Wa(d);e&&b.push([c,e])}var b=[];a("u","GTM");a("ut","TAGGING");a("h","HEALTH");return b};var yw=!1;
function hx(a,b){}function ix(a,b){}
function jx(a,b){}function kx(a,b){}
function lx(){var a={};return a}
function $w(a){a=a===void 0?!0:a;var b={};return b}
function mx(){}function nx(a,b){}
function ox(a,b,c){}
function px(){}function qx(a,b){var c=A,d,e=c.GooglebQhCsO;e||(e={},c.GooglebQhCsO=e);d=e;if(d[a])return!1;d[a]=[];d[a][0]=b;return!0};function rx(a,b,c,d){var e=co(a,"fmt");if(b){var f=co(a,"random"),g=co(a,"label")||"";if(!f)return!1;var k=jv(decodeURIComponent(g.replace(/\+/g," "))+":"+decodeURIComponent(f.replace(/\+/g," ")));if(!qx(k,b))return!1}e&&Number(e)!==4&&(a=fo(a,"rfmt",e));var m=fo(a,"fmt",4);lc(m,function(){A.google_noFurtherRedirects&&b&&(A.google_noFurtherRedirects=null,b())},c,d,E.getElementsByTagName("script")[0].parentElement||void 0);return!0};function Zx(a,b){if(data.entities){var c=data.entities[a];if(c)return c[b]}};function $x(a,b,c){c=c===void 0?!1:c;ay().addRestriction(0,a,b,c)}function by(a,b,c){c=c===void 0?!1:c;ay().addRestriction(1,a,b,c)}function cy(){var a=qk();return ay().getRestrictions(1,a)}var dy=function(){this.container={};this.j={}},ey=function(a,b){var c=a.container[b];c||(c={_entity:{internal:[],external:[]},_event:{internal:[],external:[]}},a.container[b]=c);return c};
dy.prototype.addRestriction=function(a,b,c,d){d=d===void 0?!1:d;if(!d||!this.j[b]){var e=ey(this,b);a===0?d?e._entity.external.push(c):e._entity.internal.push(c):a===1&&(d?e._event.external.push(c):e._event.internal.push(c))}};
dy.prototype.getRestrictions=function(a,b){var c=ey(this,b);if(a===0){var d,e;return[].concat(ta((c==null?void 0:(d=c._entity)==null?void 0:d.internal)||[]),ta((c==null?void 0:(e=c._entity)==null?void 0:e.external)||[]))}if(a===1){var f,g;return[].concat(ta((c==null?void 0:(f=c._event)==null?void 0:f.internal)||[]),ta((c==null?void 0:(g=c._event)==null?void 0:g.external)||[]))}return[]};
dy.prototype.getExternalRestrictions=function(a,b){var c=ey(this,b),d,e;return a===0?(c==null?void 0:(d=c._entity)==null?void 0:d.external)||[]:(c==null?void 0:(e=c._event)==null?void 0:e.external)||[]};dy.prototype.removeExternalRestrictions=function(a){var b=ey(this,a);b._event&&(b._event.external=[]);b._entity&&(b._entity.external=[]);this.j[a]=!0};function ay(){var a=Mi.r;a||(a=new dy,Mi.r=a);return a};var fy=new RegExp(/^(.*\.)?(google|youtube|blogger|withgoogle)(\.com?)?(\.[a-z]{2})?\.?$/),gy={cl:["ecl"],customPixels:["nonGooglePixels"],ecl:["cl"],ehl:["hl"],gaawc:["googtag"],hl:["ehl"],html:["customScripts","customPixels","nonGooglePixels","nonGoogleScripts","nonGoogleIframes"],customScripts:["html","customPixels","nonGooglePixels","nonGoogleScripts","nonGoogleIframes"],nonGooglePixels:[],nonGoogleScripts:["nonGooglePixels"],nonGoogleIframes:["nonGooglePixels"]},hy={cl:["ecl"],customPixels:["customScripts",
"html"],ecl:["cl"],ehl:["hl"],gaawc:["googtag"],hl:["ehl"],html:["customScripts"],customScripts:["html"],nonGooglePixels:["customPixels","customScripts","html","nonGoogleScripts","nonGoogleIframes"],nonGoogleScripts:["customScripts","html"],nonGoogleIframes:["customScripts","html","nonGoogleScripts"]},iy="google customPixels customScripts html nonGooglePixels nonGoogleScripts nonGoogleIframes".split(" ");
function jy(){var a=oj("gtm.allowlist")||oj("gtm.whitelist");a&&U(9);Si&&(a=["google","gtagfl","lcl","zone"]);fy.test(A.location&&A.location.hostname)&&(Si?U(116):(U(117),ky&&(a=[],window.console&&window.console.log&&window.console.log("GTM blocked. See go/13687728."))));var b=a&&rb(kb(a),gy),c=oj("gtm.blocklist")||oj("gtm.blacklist");c||(c=oj("tagTypeBlacklist"))&&U(3);c?U(8):c=[];fy.test(A.location&&A.location.hostname)&&(c=kb(c),c.push("nonGooglePixels","nonGoogleScripts","sandboxedScripts"));
kb(c).indexOf("google")>=0&&U(2);var d=c&&rb(kb(c),hy),e={};return function(f){var g=f&&f[Ge.xa];if(!g||typeof g!=="string")return!0;g=g.replace(/^_*/,"");if(e[g]!==void 0)return e[g];var k=bj[g]||[],m=!0;if(a){var n;if(n=m)a:{if(b.indexOf(g)<0)if(k&&k.length>0)for(var p=0;p<k.length;p++){if(b.indexOf(k[p])<0){U(11);n=!1;break a}}else{n=!1;break a}n=!0}m=n}var q=!1;if(c){var r=d.indexOf(g)>=0;if(r)q=r;else{var u=eb(d,k||[]);u&&U(10);q=u}}var v=!m||q;v||!(k.indexOf("sandboxedScripts")>=0)||b&&b.indexOf("sandboxedScripts")!==
-1||(v=eb(d,iy));return e[g]=v}}var ky=!1;ky=!0;function ly(){gk&&$x(qk(),function(a){var b=tf(a.entityId),c;if(wf(b)){var d=b[Ge.xa];if(!d)throw Error("Error: No function name given for function call.");var e=lf[d];c=!!e&&!!e.runInSiloedMode}else c=!!Zx(b[Ge.xa],4);return c})}function my(a,b,c,d,e){if(!ny()){var f=d.siloed?lk(a):a;if(!zk(f)){d.siloed&&Bk({ctid:f,isDestination:!1});var g=tk();ck().container[f]={state:1,context:d,parent:g};bk({ctid:f,isDestination:!1},e);var k=oy(a);if(ij())lc(hj()+"/"+k);else{var m=sb(a,"GTM-"),n=Mj(),p=c?"/gtag/js":"/gtm.js",q=Lj(b,p+k);if(!q){var r=Li.Ef+p;n&&fc&&m&&(r=fc.replace(/^(?:https?:\/\/)?/i,"").split(/[?#]/)[0]);q=Ts("https://","http://",r+k)}lc(q)}}}}
function py(a,b,c,d){if(!ny()){var e=c.siloed?lk(a):a;if(!Ak(e))if(!R(130)&&c.siloed||!Ck())if(c.siloed&&Bk({ctid:e,isDestination:!0}),ck().destination[e]={state:1,context:c,parent:tk()},bk({ctid:e,isDestination:!0},d),ij())lc(hj()+("/gtd"+oy(a,!0)));else{var f="/gtag/destination"+oy(a,!0),g=Lj(b,f);g||(g=Ts("https://","http://",Li.Ef+f));lc(g)}else ck().destination[e]={state:0,transportUrl:b,context:c,parent:tk()},bk({ctid:e,isDestination:!0},d),U(91)}}
function oy(a,b){b=b===void 0?!1:b;var c="?id="+encodeURIComponent(a)+"&l="+Li.vb;if(!sb(a,"GTM-")||b)c+="&cx=c";c+="&gtm="+lp();Mj()&&(c+="&sign="+Li.Ch);var d=fj.j;d===1?c+="&fps=fc":d===2&&(c+="&fps=fe");return c}function ny(){if(jp()){return!0}return!1};var qy=!1,ry=0,sy=[];function ty(a){if(!qy){var b=E.createEventObject,c=E.readyState==="complete",d=E.readyState==="interactive";if(!a||a.type!=="readystatechange"||c||!b&&d){qy=!0;for(var e=0;e<sy.length;e++)H(sy[e])}sy.push=function(){for(var f=ya.apply(0,arguments),g=0;g<f.length;g++)H(f[g]);return 0}}}function uy(){if(!qy&&ry<140){ry++;try{var a,b;(b=(a=E.documentElement).doScroll)==null||b.call(a,"left");ty()}catch(c){A.setTimeout(uy,50)}}}function vy(a){qy?a():sy.push(a)};var wy=function(){this.H=0;this.j={}};wy.prototype.addListener=function(a,b,c){var d=++this.H;this.j[a]=this.j[a]||{};this.j[a][String(d)]={listener:b,Mb:c};return d};wy.prototype.removeListener=function(a,b){var c=this.j[a],d=String(b);if(!c||!c[d])return!1;delete c[d];return!0};wy.prototype.C=function(a,b){var c=[];gb(this.j[a],function(d,e){c.indexOf(e.listener)<0&&(e.Mb===void 0||b.indexOf(e.Mb)>=0)&&c.push(e.listener)});return c};
function xy(a,b,c){return{entityType:a,indexInOriginContainer:b,nameInOriginContainer:c,originContainerId:ok()}};var zy=function(a,b){this.j=!1;this.K=[];this.eventData={tags:[]};this.P=!1;this.C=this.H=0;yy(this,a,b)},Ay=function(a,b,c,d){if(Oi.hasOwnProperty(b)||b==="__zone")return-1;var e={};Qc(d)&&(e=Rc(d,e));e.id=c;e.status="timeout";return a.eventData.tags.push(e)-1},By=function(a,b,c,d){var e=a.eventData.tags[b];e&&(e.status=c,e.executionTime=d)},Cy=function(a){if(!a.j){for(var b=a.K,c=0;c<b.length;c++)b[c]();a.j=!0;a.K.length=0}},yy=function(a,b,c){b!==void 0&&a.Re(b);c&&A.setTimeout(function(){Cy(a)},
Number(c))};zy.prototype.Re=function(a){var b=this,c=pb(function(){H(function(){a(ok(),b.eventData)})});this.j?c():this.K.push(c)};var Dy=function(a){a.H++;return pb(function(){a.C++;a.P&&a.C>=a.H&&Cy(a)})},Ey=function(a){a.P=!0;a.C>=a.H&&Cy(a)};var Fy={};function Gy(){return A[Hy()]}
function Hy(){return A.GoogleAnalyticsObject||"ga"}function Ky(){var a=ok();}
function Ly(a,b){return function(){var c=Gy(),d=c&&c.getByName&&c.getByName(a);if(d){var e=d.get("sendHitTask");d.set("sendHitTask",function(f){var g=f.get("hitPayload"),k=f.get("hitCallback"),m=g.indexOf("&tid="+b)<0;m&&(f.set("hitPayload",g.replace(/&tid=UA-[0-9]+-[0-9]+/,"&tid="+b),!0),f.set("hitCallback",void 0,!0));e(f);m&&(f.set("hitPayload",g,!0),f.set("hitCallback",k,!0),f.set("_x_19",void 0,!0),e(f))})}}}var Qy=["es","1"],Ry={},Sy={};function Ty(a,b){if(Vj){var c;c=b.match(/^(gtm|gtag)\./)?encodeURIComponent(b):"*";Ry[a]=[["e",c],["eid",a]];on(a)}}function Uy(a){var b=a.eventId,c=a.dd;if(!Ry[b])return[];var d=[];Sy[b]||d.push(Qy);d.push.apply(d,ta(Ry[b]));c&&(Sy[b]=!0);return d};var Vy={},Wy={},Xy={};function Yy(a,b,c,d){Vj&&R(108)&&((d===void 0?0:d)?(Xy[b]=Xy[b]||0,++Xy[b]):c!==void 0?(Wy[a]=Wy[a]||{},Wy[a][b]=Math.round(c)):(Vy[a]=Vy[a]||{},Vy[a][b]=(Vy[a][b]||0)+1))}function Zy(a){var b=a.eventId,c=a.dd,d=Vy[b]||{},e=[],f;for(f in d)d.hasOwnProperty(f)&&e.push(""+f+d[f]);c&&delete Vy[b];return e.length?[["md",e.join(".")]]:[]}
function $y(a){var b=a.eventId,c=a.dd,d=Wy[b]||{},e=[],f;for(f in d)d.hasOwnProperty(f)&&e.push(""+f+d[f]);c&&delete Wy[b];return e.length?[["mtd",e.join(".")]]:[]}function az(){for(var a=[],b=l(Object.keys(Xy)),c=b.next();!c.done;c=b.next()){var d=c.value;a.push(""+d+Xy[d])}return a.length?[["mec",a.join(".")]]:[]};var bz={},cz={};function dz(a,b,c){if(Vj&&b){var d=Pj(b);bz[a]=bz[a]||[];bz[a].push(c+d);var e=(wf(b)?"1":"2")+d;cz[a]=cz[a]||[];cz[a].push(e);on(a)}}function ez(a){var b=a.eventId,c=a.dd,d=[],e=bz[b]||[];e.length&&d.push(["tr",e.join(".")]);var f=cz[b]||[];f.length&&d.push(["ti",f.join(".")]);c&&(delete bz[b],delete cz[b]);return d};function fz(a,b,c,d){var e=jf[a],f=gz(a,b,c,d);if(!f)return null;var g=xf(e[Ge.kk],c,[]);if(g&&g.length){var k=g[0];f=fz(k.index,{onSuccess:f,onFailure:k.xk===1?b.terminate:f,terminate:b.terminate},c,d)}return f}
function gz(a,b,c,d){function e(){function w(){ul(3);var K=nb()-G;dz(c.id,f,"7");By(c.wc,C,"exception",K);R(93)&&ox(c,f,ww.J.lk);D||(D=!0,k())}if(f[Ge.Jl])k();else{var x=vf(f,c,[]),y=x[Ge.al];if(y!=null)for(var B=0;B<y.length;B++)if(!W(y[B])){k();return}var C=Ay(c.wc,String(f[Ge.xa]),Number(f[Ge.Qe]),x[Ge.METADATA]),D=!1;x.vtp_gtmOnSuccess=function(){if(!D){D=!0;var K=nb()-G;dz(c.id,jf[a],"5");By(c.wc,C,"success",K);R(93)&&ox(c,f,ww.J.nk);g()}};x.vtp_gtmOnFailure=function(){if(!D){D=!0;var K=nb()-
G;dz(c.id,jf[a],"6");By(c.wc,C,"failure",K);R(93)&&ox(c,f,ww.J.mk);k()}};x.vtp_gtmTagId=f.tag_id;x.vtp_gtmEventId=c.id;c.priorityId&&(x.vtp_gtmPriorityId=c.priorityId);dz(c.id,f,"1");R(93)&&nx(c,f);var G=nb();try{yf(x,{event:c,index:a,type:1})}catch(K){w(K)}R(93)&&ox(c,f,ww.J.pk)}}var f=jf[a],g=b.onSuccess,k=b.onFailure,m=b.terminate;if(c.isBlocked(f))return null;var n=xf(f[Ge.qk],c,[]);if(n&&n.length){var p=n[0],q=fz(p.index,{onSuccess:g,onFailure:k,terminate:m},c,d);if(!q)return null;g=q;k=p.xk===
2?m:q}if(f[Ge.bk]||f[Ge.Ll]){var r=f[Ge.bk]?kf:c.An,u=g,v=k;if(!r[a]){var t=hz(a,r,pb(e));g=t.onSuccess;k=t.onFailure}return function(){r[a](u,v)}}return e}function hz(a,b,c){var d=[],e=[];b[a]=iz(d,e,c);return{onSuccess:function(){b[a]=jz;for(var f=0;f<d.length;f++)d[f]()},onFailure:function(){b[a]=kz;for(var f=0;f<e.length;f++)e[f]()}}}function iz(a,b,c){return function(d,e){a.push(d);b.push(e);c()}}function jz(a){a()}function kz(a,b){b()};var nz=function(a,b){for(var c=[],d=0;d<jf.length;d++)if(a[d]){var e=jf[d];var f=Dy(b.wc);try{var g=fz(d,{onSuccess:f,onFailure:f,terminate:f},b,d);if(g){var k=e[Ge.xa];if(!k)throw Error("Error: No function name given for function call.");var m=lf[k];c.push({Rk:d,Jk:(m?m.priorityOverride||0:0)||Zx(e[Ge.xa],1)||0,execute:g})}else lz(d,b),f()}catch(p){f()}}c.sort(mz);for(var n=0;n<c.length;n++)c[n].execute();return c.length>
0};var pz=function(a,b){if(!oz)return!1;var c=a["gtm.triggers"]&&String(a["gtm.triggers"]),d=oz.C(a.event,c?String(c).split(","):[]);if(!d.length)return!1;for(var e=0;e<d.length;++e){var f=Dy(b);try{d[e](a,f)}catch(g){f()}}return!0};function mz(a,b){var c,d=b.Jk,e=a.Jk;c=d>e?1:d<e?-1:0;var f;if(c!==0)f=c;else{var g=a.Rk,k=b.Rk;f=g>k?1:g<k?-1:0}return f}
function lz(a,b){if(Vj){var c=function(d){var e=b.isBlocked(jf[d])?"3":"4",f=xf(jf[d][Ge.kk],b,[]);f&&f.length&&c(f[0].index);dz(b.id,jf[d],e);var g=xf(jf[d][Ge.qk],b,[]);g&&g.length&&c(g[0].index)};c(a)}}var qz=!1,oz;var Kz=function(){oz||(oz=new wy);return oz};
function Lz(a){var b=a["gtm.uniqueEventId"],c=a["gtm.priorityId"],d=a.event;if(R(93)){}if(d==="gtm.js"){if(qz)return!1;qz=!0}var e=!1,f=cy(),g=Rc(a,null);if(!f.every(function(u){return u({originalEventData:g})})){if(d!=="gtm.js"&&d!=="gtm.init"&&d!=="gtm.init_consent")return!1;e=!0}Ty(b,d);var k=a.eventCallback,m=a.eventTimeout,n={id:b,
priorityId:c,name:d,isBlocked:Mz(g,e),An:[],logMacroError:function(){U(6);ul(0)},cachedModelValues:Nz(),wc:new zy(function(){if(R(93)){}k&&
k.apply(k,Array.prototype.slice.call(arguments,0))},m),originalEventData:g};R(108)&&Vj&&(n.reportMacroDiscrepancy=Yy);R(93)&&jx(n.id,n.name);var p=Ef(n);R(93)&&kx(n.id,n.name);e&&(p=Oz(p));if(R(93)){}var q=nz(p,n),r=!1;
r=pz(a,n.wc);Ey(n.wc);d!=="gtm.js"&&d!=="gtm.sync"||Ky();return Pz(p,q)||r}function Nz(){var a={};a.event=tj("event",1);a.ecommerce=tj("ecommerce",1);a.gtm=tj("gtm");a.eventModel=tj("eventModel");return a}
function Mz(a,b){var c=jy();return function(d){if(c(d))return!0;var e=d&&d[Ge.xa];if(!e||typeof e!=="string")return!0;e=e.replace(/^_*/,"");var f,g=qk();f=ay().getRestrictions(0,g);var k=a;b&&(k=Rc(a,null),k["gtm.uniqueEventId"]=Number.MAX_SAFE_INTEGER);for(var m=bj[e]||[],n=l(f),p=n.next();!p.done;p=n.next()){var q=p.value;try{if(!q({entityId:e,securityGroups:m,originalEventData:k}))return!0}catch(r){return!0}}return!1}}
function Oz(a){for(var b=[],c=0;c<a.length;c++)if(a[c]){var d=String(jf[c][Ge.xa]);if(Ni[d]||jf[c][Ge.Ml]!==void 0||Zx(d,2))b[c]=!0}return b}function Pz(a,b){if(!b)return b;for(var c=0;c<a.length;c++)if(a[c]&&jf[c]&&!Oi[String(jf[c][Ge.xa])])return!0;return!1}var Qz=0;function Rz(a){return Wj?R(104)?a===void 0||a===Nf.canonicalContainerId?!0:!1:gk?!1:!0:!1};function Sz(a,b){return arguments.length===1?Tz("set",a):Tz("set",a,b)}function Uz(a,b){return arguments.length===1?Tz("config",a):Tz("config",a,b)}function Vz(a,b,c){c=c||{};c[N.g.rc]=a;return Tz("event",b,c)}function Tz(){return arguments};var Wz=function(){this.messages=[];this.j=[]};Wz.prototype.enqueue=function(a,b,c){var d=this.messages.length+1;a["gtm.uniqueEventId"]=b;a["gtm.priorityId"]=d;var e=Object.assign({},c,{eventId:b,priorityId:d,fromContainerExecution:!0}),f={message:a,notBeforeEventId:b,priorityId:d,messageContext:e};this.messages.push(f);for(var g=0;g<this.j.length;g++)try{this.j[g](f)}catch(k){}};Wz.prototype.listen=function(a){this.j.push(a)};
Wz.prototype.get=function(){for(var a={},b=0;b<this.messages.length;b++){var c=this.messages[b],d=a[c.notBeforeEventId];d||(d=[],a[c.notBeforeEventId]=d);d.push(c)}return a};Wz.prototype.prune=function(a){for(var b=[],c=[],d=0;d<this.messages.length;d++){var e=this.messages[d];e.notBeforeEventId===a?b.push(e):c.push(e)}this.messages=c;return b};function Xz(a,b,c){c.eventMetadata=c.eventMetadata||{};c.eventMetadata.source_canonical_id=Nf.canonicalContainerId;Yz().enqueue(a,b,c)}
function Zz(){var a=$z;Yz().listen(a)}function Yz(){var a=Mi.mb;a||(a=new Wz,Mi.mb=a);return a};var aA={},bA={};function cA(a,b){for(var c=[],d=[],e={},f=0;f<a.length;e={ni:void 0,Wh:void 0},f++){var g=a[f];if(g.indexOf("-")>=0){if(e.ni=um(g,b),e.ni){var k=nk();bb(k,function(r){return function(u){return r.ni.destinationId===u}}(e))?c.push(g):d.push(g)}}else{var m=aA[g]||[];e.Wh={};m.forEach(function(r){return function(u){r.Wh[u]=!0}}(e));for(var n=jk(),p=0;p<n.length;p++)if(e.Wh[n[p]]){c=c.concat(nk());break}var q=bA[g]||[];q.length&&(c=c.concat(q))}}return{Wm:c,Zm:d}}
function dA(a){gb(aA,function(b,c){var d=c.indexOf(a);d>=0&&c.splice(d,1)})}function eA(a){gb(bA,function(b,c){var d=c.indexOf(a);d>=0&&c.splice(d,1)})}var fA="HA GF G UA AW DC MC".split(" "),gA=!1,hA=!1,iA=!1,jA=!1;function kA(a,b){a.hasOwnProperty("gtm.uniqueEventId")||Object.defineProperty(a,"gtm.uniqueEventId",{value:cj()});b.eventId=a["gtm.uniqueEventId"];b.priorityId=a["gtm.priorityId"];return{eventId:b.eventId,priorityId:b.priorityId}}var lA=void 0,mA=void 0;
function nA(a,b,c){var d=Rc(a,null);d.eventId=void 0;d.inheritParentConfig=void 0;Object.keys(b).some(function(f){return b[f]!==void 0})&&U(136);var e=Rc(b,null);Rc(c,e);Xz(Uz(jk()[0],e),a.eventId,d)}function oA(a){for(var b=l([N.g.Oc,N.g.Db]),c=b.next();!c.done;c=b.next()){var d=c.value,e=a&&a[d]||wn.j[d];if(e)return e}}
var pA=[N.g.Oc,N.g.Db,N.g.nc,N.g.ib,N.g.pb,N.g.Ba,N.g.sa,N.g.Fa,N.g.Na,N.g.lb],qA={config:function(a,b){var c=kA(a,b);if(!(a.length<2)&&z(a[1])){var d={};if(a.length>2){if(a[2]!==void 0&&!Qc(a[2])||a.length>3)return;d=a[2]}var e=um(a[1],b.isGtmEvent);if(e){var f,g,k;a:{if(!fk.Ke){var m=sk(tk());if(Ek(m)){var n=m.parent,p=n.isDestination;k={jn:sk(n),Vm:p};break a}}k=void 0}var q=k;q&&(f=q.jn,g=q.Vm);Ty(c.eventId,"gtag.config");var r=e.destinationId,u=e.id!==r;if(u?nk().indexOf(r)===-1:jk().indexOf(r)===
-1){if(!b.inheritParentConfig&&!d[N.g.Rb]){var v=oA(d);if(u)py(r,v,{source:2,fromContainerExecution:b.fromContainerExecution});else if(f!==void 0&&f.containers.indexOf(r)!==-1){var t=d;lA?nA(b,t,lA):mA||(mA=Rc(t,null))}else my(r,v,!0,{source:2,fromContainerExecution:b.fromContainerExecution})}}else{if(f&&(U(128),g&&U(130),b.inheritParentConfig)){var w;var x=d;mA?(nA(b,mA,x),w=!1):(!x[N.g.uc]&&Qi&&lA||(lA=Rc(x,null)),w=!0);w&&f.containers&&f.containers.join(",");return}if(!R(53)){var y=d;if(!iA&&(iA=
!0,hA))for(var B=l(pA),C=B.next();!C.done;C=B.next())if(y.hasOwnProperty(C.value)){sl("erc");break}}Rz()&&(Qz===1&&(Jk.mcc=!1),Qz=2);R(52)||(nl=!0);if(Qi&&!u&&!d[N.g.uc]){var D=jA;jA=!0;if(D)return}gA||U(43);if(!b.noTargetGroup)if(u){eA(e.id);var G=e.id,K=d[N.g.Be]||"default";K=String(K).split(",");for(var F=0;F<K.length;F++){var S=bA[K[F]]||[];bA[K[F]]=S;S.indexOf(G)<0&&S.push(G)}}else{dA(e.id);var M=e.id,T=d[N.g.Be]||"default";T=T.toString().split(",");for(var ca=0;ca<T.length;ca++){var da=aA[T[ca]]||
[];aA[T[ca]]=da;da.indexOf(M)<0&&da.push(M)}}delete d[N.g.Be];var Z=b.eventMetadata||{};Z.hasOwnProperty("is_external_event")||(Z.is_external_event=!b.fromContainerExecution);b.eventMetadata=Z;delete d[N.g.xd];for(var Q=u?[e.id]:nk(),pa=0;pa<Q.length;pa++){var oa=Q[pa];if(!R(128)||gk||!sb(oa,"siloed_")){var ja=d,Ba=oa,Ma=Rc(b,null),ua=um(Ba,Ma.isGtmEvent);ua&&wn.push("config",[ja],ua,Ma)}}}}}},consent:function(a,b){if(a.length===3){U(39);var c=kA(a,b),d=a[1],e;if(R(126)){var f={},g=Us(a[2]),k;for(k in g)if(g.hasOwnProperty(k)){var m=
g[k];f[k]=k===N.g.be?Array.isArray(m)?NaN:Number(m):k===N.g.ub?(Array.isArray(m)?m:[m]).map(Vs):Ws(m)}e=f}else e=a[2];var n=e;b.fromContainerExecution||(n[N.g.O]&&U(139),n[N.g.za]&&U(140));d==="default"?Yl(n):d==="update"?$l(n,c):d==="declare"&&b.fromContainerExecution&&Xl(n)}},event:function(a,b){var c=a[1];if(!(a.length<2)&&z(c)){var d=void 0;if(a.length>2){if(!Qc(a[2])&&a[2]!==void 0||a.length>3)return;d=a[2]}var e=d,f={},g=(f.event=c,f);e&&(g.eventModel=Rc(e,null),e[N.g.xd]&&(g.eventCallback=
e[N.g.xd]),e[N.g.ye]&&(g.eventTimeout=e[N.g.ye]));var k=kA(a,b),m=k.eventId,n=k.priorityId;g["gtm.uniqueEventId"]=m;n&&(g["gtm.priorityId"]=n);if(c==="optimize.callback")return g.eventModel=g.eventModel||{},g;var p;var q=d,r=q&&q[N.g.rc];r===void 0&&(r=oj(N.g.rc,2),r===void 0&&(r="default"));if(z(r)||Array.isArray(r)){var u;u=b.isGtmEvent?z(r)?[r]:r:r.toString().replace(/\s+/g,"").split(",");var v=cA(u,b.isGtmEvent),t=v.Wm,w=v.Zm;if(w.length)for(var x=oA(q),y=0;y<w.length;y++){var B=um(w[y],b.isGtmEvent);
B&&py(B.destinationId,x,{source:3,fromContainerExecution:b.fromContainerExecution})}p=vm(t,b.isGtmEvent)}else p=void 0;var C=p;if(C){var D;!C.length||((D=b.eventMetadata)==null?0:D.em_event)||(hA=!0);Ty(m,c);for(var G=[],K=0;K<C.length;K++){var F=C[K],S=Rc(b,null);if(fA.indexOf(uk(F.prefix))!==-1){var M=Rc(d,null),T=S.eventMetadata||{};T.hasOwnProperty("is_external_event")||(T.is_external_event=!S.fromContainerExecution);S.eventMetadata=T;delete M[N.g.xd];xn(c,M,F.id,S);Rz(T.source_canonical_id)&&
Qz===0&&(Lk("mcc","1"),Qz=1);R(52)||(nl=!0)}G.push(F.id)}g.eventModel=g.eventModel||{};C.length>0?g.eventModel[N.g.rc]=G.join():delete g.eventModel[N.g.rc];gA||U(43);b.noGtmEvent===void 0&&b.eventMetadata&&b.eventMetadata.syn_or_mod&&(b.noGtmEvent=!0);g.eventModel[N.g.qc]&&(b.noGtmEvent=!0);return b.noGtmEvent?void 0:g}}},get:function(a,b){U(53);if(a.length===4&&z(a[1])&&z(a[2])&&Za(a[3])){var c=um(a[1],b.isGtmEvent),d=String(a[2]),e=a[3];if(c){gA||U(43);var f=oA();if(!bb(nk(),function(k){return c.destinationId===
k}))py(c.destinationId,f,{source:4,fromContainerExecution:b.fromContainerExecution});else if(fA.indexOf(uk(c.prefix))!==-1){R(52)||(nl=!0);kA(a,b);var g={};Rc((g[N.g.Bb]=d,g[N.g.Pb]=e,g),null);yn(d,function(k){H(function(){e(k)})},c.id,b)}}}},js:function(a,b){if(a.length===2&&a[1].getTime){gA=!0;var c=kA(a,b),d=c.eventId,e=c.priorityId,f={};return f.event="gtm.js",f["gtm.start"]=a[1].getTime(),f["gtm.uniqueEventId"]=d,f["gtm.priorityId"]=e,f}},policy:function(a){if(a.length===3&&z(a[1])&&Za(a[2])){if(Kf(a[1],
a[2]),U(74),a[1]==="all"){U(75);var b=!1;try{b=a[2](ok(),"unknown",{})}catch(c){}b||U(76)}}else U(73)},set:function(a,b){var c=void 0;a.length===2&&Qc(a[1])?c=Rc(a[1],null):a.length===3&&z(a[1])&&(c={},Qc(a[2])||Array.isArray(a[2])?c[a[1]]=Rc(a[2],null):c[a[1]]=a[2]);if(c){var d=kA(a,b),e=d.eventId,f=d.priorityId;Rc(c,null);var g=Rc(c,null);wn.push("set",[g],void 0,b);c["gtm.uniqueEventId"]=e;f&&(c["gtm.priorityId"]=f);delete c.event;b.overwriteModelFields=!0;return c}}},rA={policy:!0};var tA=function(a){if(sA(a))return a;this.value=a};tA.prototype.getUntrustedMessageValue=function(){return this.value};var sA=function(a){return!a||Oc(a)!=="object"||Qc(a)?!1:"getUntrustedMessageValue"in a};tA.prototype.getUntrustedMessageValue=tA.prototype.getUntrustedMessageValue;var uA=!1,vA=[];function wA(){if(!uA){uA=!0;for(var a=0;a<vA.length;a++)H(vA[a])}}function xA(a){uA?H(a):vA.push(a)};var yA=0,zA={},AA=[],BA=[],CA=!1,DA=!1;function EA(a,b){return a.messageContext.eventId-b.messageContext.eventId||a.messageContext.priorityId-b.messageContext.priorityId}function FA(a,b,c){a.eventCallback=b;c&&(a.eventTimeout=c);return GA(a)}function HA(a,b){if(!$a(b)||b<0)b=0;var c=Mi[Li.vb],d=0,e=!1,f=void 0;f=A.setTimeout(function(){e||(e=!0,a());f=void 0},b);return function(){var g=c?c.subscribers:1;++d===g&&(f&&(A.clearTimeout(f),f=void 0),e||(a(),e=!0))}}
function IA(a,b){var c=a._clear||b.overwriteModelFields;gb(a,function(e,f){e!=="_clear"&&(c&&rj(e),rj(e,f))});Zi||(Zi=a["gtm.start"]);var d=a["gtm.uniqueEventId"];if(!a.event)return!1;typeof d!=="number"&&(d=cj(),a["gtm.uniqueEventId"]=d,rj("gtm.uniqueEventId",d));return Lz(a)}function JA(a){if(a==null||typeof a!=="object")return!1;if(a.event)return!0;if(hb(a)){var b=a[0];if(b==="config"||b==="event"||b==="js"||b==="get")return!0}return!1}
function KA(){var a;if(BA.length)a=BA.shift();else if(AA.length)a=AA.shift();else return;var b;var c=a;if(CA||!JA(c.message))b=c;else{CA=!0;var d=c.message["gtm.uniqueEventId"];typeof d!=="number"&&(d=c.message["gtm.uniqueEventId"]=cj());var e={},f={message:(e.event="gtm.init_consent",e["gtm.uniqueEventId"]=d-2,e),messageContext:{eventId:d-2}},g={},k={message:(g.event="gtm.init",g["gtm.uniqueEventId"]=d-1,g),messageContext:{eventId:d-1}};AA.unshift(k,c);Wj&&Pk();b=f}return b}
function LA(){for(var a=!1,b;!DA&&(b=KA());){DA=!0;delete lj.eventModel;nj();var c=b,d=c.message,e=c.messageContext;if(d==null)DA=!1;else{e.fromContainerExecution&&sj();try{if(Za(d))try{d.call(pj)}catch(v){}else if(Array.isArray(d)){if(z(d[0])){var f=d[0].split("."),g=f.pop(),k=d.slice(1),m=oj(f.join("."),2);if(m!=null)try{m[g].apply(m,k)}catch(v){}}}else{var n=void 0;if(hb(d))a:{if(d.length&&z(d[0])){var p=qA[d[0]];if(p&&(!e.fromContainerExecution||!rA[d[0]])){n=p(d,e);break a}}n=void 0}else n=d;
n&&(a=IA(n,e)||a)}}finally{e.fromContainerExecution&&nj(!0);var q=d["gtm.uniqueEventId"];if(typeof q==="number"){for(var r=zA[String(q)]||[],u=0;u<r.length;u++)BA.push(MA(r[u]));r.length&&BA.sort(EA);delete zA[String(q)];q>yA&&(yA=q)}DA=!1}}}return!a}
function NA(){if(R(93)){var a=!fj.H;}var b=LA();if(R(93)){}try{var c=ok(),d=A[Li.vb].hide;if(d&&d[c]!==void 0&&d.end){d[c]=!1;var e=!0,f;for(f in d)if(d.hasOwnProperty(f)&&d[f]===
!0){e=!1;break}e&&(d.end(),d.end=null)}}catch(g){}return b}function $z(a){if(yA<a.notBeforeEventId){var b=String(a.notBeforeEventId);zA[b]=zA[b]||[];zA[b].push(a)}else BA.push(MA(a)),BA.sort(EA),H(function(){DA||LA()})}function MA(a){return{message:a.message,messageContext:a.messageContext}}
function OA(){function a(f){var g={};if(sA(f)){var k=f;f=sA(k)?k.getUntrustedMessageValue():void 0;g.fromContainerExecution=!0}return{message:f,messageContext:g}}var b=gc(Li.vb,[]),c=Mi[Li.vb]=Mi[Li.vb]||{};c.pruned===!0&&U(83);zA=Yz().get();Zz();vy(function(){if(!c.gtmDom){c.gtmDom=!0;var f={};b.push((f.event="gtm.dom",f))}});xA(function(){if(!c.gtmLoad){c.gtmLoad=!0;var f={};b.push((f.event="gtm.load",f))}});c.subscribers=(c.subscribers||0)+1;var d=b.push;b.push=function(){var f;if(Mi.SANDBOXED_JS_SEMAPHORE>
0){f=[];for(var g=0;g<arguments.length;g++)f[g]=new tA(arguments[g])}else f=[].slice.call(arguments,0);var k=f.map(function(q){return a(q)});AA.push.apply(AA,k);var m=d.apply(b,f),n=Math.max(100,Number("1000")||300);if(this.length>n)for(U(4),c.pruned=!0;this.length>n;)this.shift();var p=typeof m!=="boolean"||m;return LA()&&p};var e=b.slice(0).map(function(f){return a(f)});AA.push.apply(AA,e);if(!fj.H){if(R(93)){}H(NA)}}var GA=function(a){return A[Li.vb].push(a)};var PA=/^(https?:)?\/\//;

function jB(){};var kB=function(){};kB.prototype.toString=function(){return"undefined"};var lB=new kB;function sB(a,b){function c(g){var k=Hj(g),m=Bj(k,"protocol"),n=Bj(k,"host",!0),p=Bj(k,"port"),q=Bj(k,"path").toLowerCase().replace(/\/$/,"");if(m===void 0||m==="http"&&p==="80"||m==="https"&&p==="443")m="web",p="default";return[m,n,p,q]}for(var d=c(String(a)),e=c(String(b)),f=0;f<d.length;f++)if(d[f]!==e[f])return!1;return!0}
function tB(a){return uB(a)?1:0}
function uB(a){var b=a.arg0,c=a.arg1;if(a.any_of&&Array.isArray(c)){for(var d=0;d<c.length;d++){var e=Rc(a,{});Rc({arg1:c[d],any_of:void 0},e);if(tB(e))return!0}return!1}switch(a["function"]){case "_cn":return mg(b,c);case "_css":var f;a:{if(b)try{for(var g=0;g<ig.length;g++){var k=ig[g];if(b[k]!=null){f=b[k](c);break a}}}catch(m){}f=!1}return f;case "_ew":return jg(b,c);case "_eq":return ng(b,c);case "_ge":return og(b,c);case "_gt":return qg(b,c);case "_lc":return String(b).split(",").indexOf(String(c))>=
0;case "_le":return pg(b,c);case "_lt":return rg(b,c);case "_re":return lg(b,c,a.ignore_case);case "_sw":return sg(b,c);case "_um":return sB(b,c)}return!1};function vB(){var a;a=a===void 0?"":a;var b,c;return((b=data)==null?0:(c=b.blob)==null?0:c.hasOwnProperty(1))?String(data.blob[1]):a};function wB(){var a=[["cv",R(132)?vB():"1"],["rv",Li.Bh],["tc",jf.filter(function(b){return b}).length]];Li.Ne&&a.push(["x",Li.Ne]);gj()&&a.push(["tag_exp",gj()]);return a};var xB={},yB=(xB[1]={},xB[2]={},xB[3]={},xB[4]={},xB);function zB(a){switch(a){case "script-src":case "script-src-elem":return 1;case "frame-src":return 4;case "connect-src":return 2;case "img-src":return 3}}function AB(){R(49)&&Wj&&A.addEventListener("securitypolicyviolation",function(a){if(a.disposition==="enforce"){var b=zB(a.effectiveDirective);if(b){var c;var d;b:{try{var e=new URL(a.blockedURI);d=e.origin+e.pathname;break b}catch(g){}d=void 0}var f=d;c=f?yB[b][f]:void 0;c&&(Qk[String(c.endpoint)]=!0,Lk("csp",Object.keys(Qk).join("~")))}}})};var BB={},CB={};function DB(){var a=0;return function(b){switch(b){case 1:a|=1;break;case 2:a|=2;break;case 3:a|=4}return a}}function EB(a,b,c,d){if(Vj){var e=String(c)+b;BB[a]=BB[a]||[];BB[a].push(e);CB[a]=CB[a]||[];CB[a].push(d+b)}}function FB(a){var b=a.eventId,c=a.dd,d=[],e=BB[b]||[];e.length&&d.push(["hf",e.join(".")]);var f=CB[b]||[];f.length&&d.push(["ht",f.join(".")]);c&&(delete BB[b],delete CB[b]);return d};function GB(){return!1}function HB(){var a={};return function(b,c,d){}};function IB(){var a=JB;return function(b,c,d){var e=d&&d.event;b==="__html"&&R(97)||KB(c);var f=sb(b,"__cvt_")?void 0:1,g=new La;gb(c,function(r,u){var v=dd(u,void 0,f);v===void 0&&u!==void 0&&U(44);g.set(r,v)});a.j.j.C=Cf();var k={tk:Rf(b),eventId:e==null?void 0:e.id,priorityId:e!==void 0?e.priorityId:void 0,Re:e!==void 0?function(r){e.wc.Re(r)}:void 0,rb:function(){return b},log:function(){},om:{index:d==null?void 0:d.index,type:d==null?void 0:d.type,name:d==null?void 0:d.name},tn:!!Zx(b,3),originalEventData:e==
null?void 0:e.originalEventData};e&&e.cachedModelValues&&(k.cachedModelValues={gtm:e.cachedModelValues.gtm,ecommerce:e.cachedModelValues.ecommerce});if(GB()){var m=HB(),n,p;k.Ya={Ei:[],Se:{},Ib:function(r,u,v){u===1&&(n=r);u===7&&(p=v);m(r,u,v)},wg:bh()};k.log=function(r){var u=ya.apply(1,arguments);n&&m(n,4,{level:r,source:p,message:u})}}var q=Ae(a,k,[b,g]);a.j.j.C=void 0;q instanceof Aa&&q.type==="return"&&(q=q.data);return I(q,void 0,f)}}
function KB(a){var b=a.gtmOnSuccess,c=a.gtmOnFailure;Za(b)&&(a.gtmOnSuccess=function(){H(b)});Za(c)&&(a.gtmOnFailure=function(){H(c)})};function LB(a){}LB.F="internal.addAdsClickIds";function MB(a,b){var c=this;}MB.R="addConsentListener";var NB=!1;function OB(a){for(var b=0;b<a.length;++b)if(NB)try{a[b]()}catch(c){U(77)}else a[b]()}function PB(a,b,c){var d=this,e;J(this.getName(),["eventName:!string","callback:!Fn","triggerId:?string"],arguments),OB([function(){L(d,"listen_data_layer",a)}]),e=Kz().addListener(a,I(b),c);return e}PB.F="internal.addDataLayerEventListener";function QB(a,b,c){}QB.R="addDocumentEventListener";function RB(a,b,c,d){}RB.R="addElementEventListener";function SB(a){return a.D.j};function TB(a){}TB.R="addEventCallback";
var UB=function(a){return typeof a==="string"?a:String(cj())},XB=function(a,b){VB(a,"init",!1)||(WB(a,"init",!0),b())},VB=function(a,b,c){var d=YB(a);return ob(d,b,c)},ZB=function(a,b,c,d){var e=YB(a),f=ob(e,b,d);e[b]=c(f)},WB=function(a,b,c){YB(a)[b]=c},YB=function(a){Mi.hasOwnProperty("autoEventsSettings")||(Mi.autoEventsSettings={});var b=Mi.autoEventsSettings;b.hasOwnProperty(a)||(b[a]={});return b[a]},$B=function(a,b,c){var d={event:b,"gtm.element":a,"gtm.elementClasses":Bc(a,"className"),"gtm.elementId":a.for||
sc(a,"id")||"","gtm.elementTarget":a.formTarget||Bc(a,"target")||""};c&&(d["gtm.triggers"]=c.join(","));d["gtm.elementUrl"]=(a.attributes&&a.attributes.formaction?a.formAction:"")||a.action||Bc(a,"href")||a.src||a.code||a.codebase||"";return d};
var bC=function(a,b,c){if(!a.elements)return 0;for(var d=b.dataset[c],e=0,f=1;e<a.elements.length;e++){var g=a.elements[e];if(aC(g)){if(g.dataset[c]===d)return f;f++}}return 0},cC=function(a){if(a.form){var b;return((b=a.form)==null?0:b.tagName)?a.form:E.getElementById(a.form)}return vc(a,["form"],100)},aC=function(a){var b=a.tagName.toLowerCase();return dC.indexOf(b)<0||b==="input"&&eC.indexOf(a.type.toLowerCase())>=0?!1:!0},dC=["input","select","textarea"],eC=["button","hidden","image","reset",
"submit"];
function iC(a){}iC.F="internal.addFormAbandonmentListener";function jC(a,b,c,d){}
jC.F="internal.addFormData";var kC={},lC=[],mC={},nC=0,oC=0;
var qC=function(){qc(E,"change",function(a){for(var b=0;b<lC.length;b++)lC[b](a)});qc(A,"pagehide",function(){pC()})},pC=function(){gb(mC,function(a,b){var c=kC[a];c&&gb(b,function(d,e){rC(e,c)})})},uC=function(a,b){var c=""+a;if(kC[c])kC[c].push(b);else{var d=[b];kC[c]=d;var e=mC[c];e||(e={},mC[c]=e);lC.push(function(f){var g=f.target;if(g){var k=cC(g);if(k){var m=sC(k,"gtmFormInteractId",function(){return nC++}),n=sC(g,"gtmFormInteractFieldId",function(){return oC++}),p=e[m];p?(p.ac&&(A.clearTimeout(p.ac),
p.Jb.dataset.gtmFormInteractFieldId!==n&&rC(p,d)),p.Jb=g,tC(p,d,a)):(e[m]={form:k,Jb:g,zf:0,ac:null},tC(e[m],d,a))}}})}},rC=function(a,b){var c=a.form,d=a.Jb,e=$B(c,"gtm.formInteract"),f=c.action;f&&f.tagName&&(f=c.cloneNode(!1).action);e["gtm.elementUrl"]=f;e["gtm.interactedFormName"]=c.getAttribute("name");e["gtm.interactedFormLength"]=c.length;e["gtm.interactedFormField"]=d;e["gtm.interactedFormFieldPosition"]=bC(c,d,"gtmFormInteractFieldId");e["gtm.interactSequenceNumber"]=a.zf;e["gtm.interactedFormFieldId"]=
d.id;e["gtm.interactedFormFieldName"]=d.getAttribute("name");e["gtm.interactedFormFieldType"]=d.getAttribute("type");for(var g=0;g<b.length;g++)b[g](e);a.zf++;a.ac=null},tC=function(a,b,c){c?a.ac=A.setTimeout(function(){rC(a,b)},c):rC(a,b)},sC=function(a,b,c){var d=a.dataset[b];if(d)return d;d=String(c());return a.dataset[b]=d};
function vC(a,b){J(this.getName(),["callback:!Fn","options:?*"],arguments);var c=I(b)||{},d=Number(c.interval);if(!d||d<0)d=0;var e=I(a),f;VB("pix.fil","init")?f=VB("pix.fil","reg"):(qC(),f=uC,WB("pix.fil","reg",uC),WB("pix.fil","init",!0));f(d,e);}vC.F="internal.addFormInteractionListener";
var xC=function(a,b,c){var d=$B(a,"gtm.formSubmit");d["gtm.interactedFormName"]=a.getAttribute("name");d["gtm.interactedFormLength"]=a.length;d["gtm.willOpenInCurrentWindow"]=!b&&wC(a);c&&c.value&&(d["gtm.formSubmitButtonText"]=c.value);var e=a.action;e&&e.tagName&&(e=a.cloneNode(!1).action);d["gtm.elementUrl"]=e;d["gtm.formCanceled"]=b;return d},yC=function(a,b){var c=VB("pix.fsl",a?"nv.mwt":"mwt",0);A.setTimeout(b,c)},zC=function(a,b,c,d,e){var f=VB("pix.fsl",c?"nv.mwt":"mwt",0),g=VB("pix.fsl",
c?"runIfCanceled":"runIfUncanceled",[]);if(!g.length)return!0;var k=xC(a,c,e);U(121);if(k["gtm.elementUrl"]==="https://www.facebook.com/tr/")return U(122),!0;if(d&&f){for(var m=yb(b,g.length),n=0;n<g.length;++n)g[n](k,m);return m.done}for(var p=0;p<g.length;++p)g[p](k,function(){});return!0},AC=function(){var a=[],b=function(c){return bb(a,function(d){return d.form===c})};return{store:function(c,d){var e=b(c);e?e.button=d:a.push({form:c,button:d})},get:function(c){var d=b(c);return d?d.button:null}}},
wC=function(a){var b=Bc(a,"target");return b&&b!=="_self"&&b!=="_parent"&&b!=="_top"?!1:!0},BC=function(){var a=AC(),b=HTMLFormElement.prototype.submit;qc(E,"click",function(c){var d=c.target;if(d){var e=vc(d,["button","input"],100);if(e&&(e.type==="submit"||e.type==="image")&&e.name&&sc(e,"value")){var f=cC(e);f&&a.store(f,e)}}},!1);qc(E,"submit",function(c){var d=c.target;if(!d)return c.returnValue;var e=c.defaultPrevented||c.returnValue===!1,f=wC(d)&&!e,g=a.get(d),k=!0,m=function(){if(k){var n,
p={};g&&(n=E.createElement("input"),n.type="hidden",n.name=g.name,n.value=g.value,d.appendChild(n),g.getAttribute("formaction")&&(p.action=d.getAttribute("action"),Zb(d,g.getAttribute("formaction"))),g.hasAttribute("formenctype")&&(p.enctype=d.getAttribute("enctype"),d.setAttribute("enctype",g.getAttribute("formenctype"))),g.hasAttribute("formmethod")&&(p.method=d.getAttribute("method"),d.setAttribute("method",g.getAttribute("formmethod"))),g.hasAttribute("formvalidate")&&(p.validate=d.getAttribute("validate"),
d.setAttribute("validate",g.getAttribute("formvalidate"))),g.hasAttribute("formtarget")&&(p.target=d.getAttribute("target"),d.setAttribute("target",g.getAttribute("formtarget"))));b.call(d);n&&(d.removeChild(n),p.hasOwnProperty("action")&&Zb(d,p.action),p.hasOwnProperty("enctype")&&d.setAttribute("enctype",p.enctype),p.hasOwnProperty("method")&&d.setAttribute("method",p.method),p.hasOwnProperty("validate")&&d.setAttribute("validate",p.validate),p.hasOwnProperty("target")&&d.setAttribute("target",
p.target))}};if(zC(d,m,e,f,g))return k=!1,c.returnValue;yC(e,m);e||(c.preventDefault&&c.preventDefault(),c.returnValue=!1);return!1},!1);HTMLFormElement.prototype.submit=function(){var c=this,d=!0,e=function(){d&&b.call(c)};zC(c,e,!1,wC(c))?(b.call(c),d=!1):yC(!1,e)}};
function CC(a,b){J(this.getName(),["callback:!Fn","options:?PixieMap"],arguments);var c=I(b,this.D,1)||{},d=c.waitForCallbacks,e=c.waitForCallbacksTimeout,f=c.checkValidation;e=e&&e>0?e:2E3;var g=I(a,this.D,1);if(d){var k=function(n){return Math.max(e,n)};ZB("pix.fsl","mwt",k,0);f||ZB("pix.fsl","nv.mwt",k,0)}var m=function(n){n.push(g);return n};ZB("pix.fsl","runIfUncanceled",m,[]);f||ZB("pix.fsl","runIfCanceled",m,[]);VB("pix.fsl",
"init")||(BC(),WB("pix.fsl","init",!0));}CC.F="internal.addFormSubmitListener";
function HC(a){}HC.F="internal.addGaSendListener";function IC(a){if(!a)return{};var b=a.om;return xy(b.type,b.index,b.name)}function JC(a){return a?{originatingEntity:IC(a)}:{}};function RC(a){var b=Mi.zones;return b?b.getIsAllowedFn(jk(),a):function(){return!0}}
function SC(){by(qk(),function(a){var b=a.originalEventData["gtm.uniqueEventId"],c=Mi.zones;return c?c.isActive(jk(),b):!0});$x(qk(),function(a){var b,c;b=a.entityId;c=a.securityGroups;return RC(Number(a.originalEventData["gtm.uniqueEventId"]))(b,c)})};var TC=function(a,b){this.tagId=a;this.Ue=b};
function UC(a,b){var c=this,d=void 0;
return d}UC.F="internal.loadGoogleTag";function VC(a){return new Wc("",function(b){var c=this.evaluate(b);if(c instanceof Wc)return new Wc("",function(){var d=ya.apply(0,arguments),e=this,f=Rc(SB(this),null);f.eventId=a.eventId;f.priorityId=a.priorityId;f.originalEventData=a.originalEventData;var g=d.map(function(m){return e.evaluate(m)}),k=Ha(this.D);k.j=f;return c.tb.apply(c,[k].concat(ta(g)))})})};function WC(a,b,c){var d=this;}WC.F="internal.addGoogleTagRestriction";var XC={},YC=[];
function eD(a,b){}
eD.F="internal.addHistoryChangeListener";function fD(a,b,c){}fD.R="addWindowEventListener";function gD(a,b){return!0}gD.R="aliasInWindow";function hD(a,b,c){}hD.F="internal.appendRemoteConfigParameter";function iD(a){var b;return b}iD.R="callInWindow";function jD(a){}jD.R="callLater";function kD(a){}kD.F="callOnDomReady";function lD(a){}lD.F="callOnWindowLoad";function mD(a,b){var c;return c}mD.F="internal.computeGtmParameter";function nD(a,b){var c=this;}nD.F="internal.consentScheduleFirstTry";function oD(a,b){var c=this;}oD.F="internal.consentScheduleRetry";function pD(a){var b;return b}pD.F="internal.copyFromCrossContainerData";function qD(a,b){var c;var d=dd(c,this.D,sb(SB(this).rb(),"__cvt_")?2:1);d===void 0&&c!==void 0&&U(45);return d}qD.R="copyFromDataLayer";
function rD(a){var b=void 0;return b}rD.F="internal.copyFromDataLayerCache";function sD(a){var b;return b}sD.R="copyFromWindow";function tD(a){var b=void 0;return dd(b,this.D,1)}tD.F="internal.copyKeyFromWindow";var uD=function(a,b,c){this.eventName=b;this.m=c;this.j={};this.isAborted=!1;this.target=a;this.metadata=Rc(c.eventMetadata||{},{})};uD.prototype.copyToHitData=function(a,b,c){var d=V(this.m,a);d===void 0&&(d=b);if(d!==void 0&&c!==void 0&&z(d)&&R(85))try{d=c(d)}catch(e){}d!==void 0&&(this.j[a]=d)};var Gu=function(a,b,c){var d=a.target.destinationId;R(128)&&!gk&&(d=uk(d));var e=tt(d);return e&&e[b]!==void 0?e[b]:c};function vD(a,b){var c;J(this.getName(),["preHit:!PixieMap","dustOptions:?PixieMap"],arguments);var d=I(b)||{},e=I(a,this.D,1).Wb(),f=e.m;d.omitEventContext&&(f=an(new Qm(e.m.eventId,e.m.priorityId)));var g=new uD(e.target,e.eventName,f);d.omitHitData||Rc(e.j,g.j);d.omitMetadata?g.metadata={}:Rc(e.metadata,g.metadata);g.isAborted=e.isAborted;c=dd(it(g),this.D,1);return c}vD.F="internal.copyPreHit";function wD(a,b){var c=null;return dd(c,this.D,2)}wD.R="createArgumentsQueue";function xD(a){return dd(function(c){var d=Gy();if(typeof c==="function")d(function(){c(function(f,g,k){var m=Gy(),n=m&&m.getByName&&
m.getByName(f);return(new A.gaplugins.Linker(n)).decorate(g,k)})});else if(Array.isArray(c)){var e=String(c[0]).split(".");b[e.length===1?e[0]:e[1]]&&d.apply(null,c)}else if(c==="isLoaded")return!!d.loaded},this.D,1)}xD.F="internal.createGaCommandQueue";function yD(a){return dd(function(){if(!Za(e.push))throw Error("Object at "+a+" in window is not an array.");e.push.apply(e,Array.prototype.slice.call(arguments,0))},this.D,sb(SB(this).rb(),
"__cvt_")?2:1)}yD.R="createQueue";function zD(a,b){var c=null;J(this.getName(),["pattern:!string","flags:?string"],arguments);try{var d=(b||"").split("").filter(function(e){return"ig".indexOf(e)>=0}).join("");c=new ad(new RegExp(a,d))}catch(e){}return c}zD.F="internal.createRegex";function AD(){var a={};return a};function BD(a){}BD.F="internal.declareConsentState";function CD(a){var b="";return b}CD.F="internal.decodeUrlHtmlEntities";function DD(a,b,c){var d;return d}DD.F="internal.decorateUrlWithGaCookies";function ED(){}ED.F="internal.deferCustomEvents";function FD(a){var b;L(this,"detect_user_provided_data","auto");var c=I(a)||{},d=Ut({Qd:!!c.includeSelector,Rd:!!c.includeVisibility,Xe:c.excludeElementSelectors,Gb:c.fieldFilters,yg:!!c.selectMultipleElements});b=new La;var e=new Uc;b.set("elements",e);for(var f=d.elements,g=0;g<f.length;g++)e.push(GD(f[g]));d.oi!==void 0&&b.set("preferredEmailElement",GD(d.oi));b.set("status",d.status);if(R(117)&&c.performDataLayerSearch){}return b}
var HD=function(a){switch(a){case St.Nb:return"email";case St.Rc:return"phone_number";case St.Pc:return"first_name";case St.Qc:return"last_name";case St.Gh:return"street";case St.Ag:return"city";case St.Ah:return"region";case St.Me:return"postal_code";case St.de:return"country"}},GD=function(a){var b=new La;b.set("userData",a.Z);b.set("tagName",a.tagName);a.querySelector!==void 0&&b.set("querySelector",a.querySelector);a.isVisible!==void 0&&b.set("isVisible",a.isVisible);if(R(30)){}else switch(a.type){case St.Nb:b.set("type","email")}return b};FD.F="internal.detectUserProvidedData";
function KD(a,b){return b}KD.F="internal.enableAutoEventOnClick";var ND=function(a){if(!LD){var b=function(){var c=E.body;if(c)if(MD)(new MutationObserver(function(){for(var e=0;e<LD.length;e++)H(LD[e])})).observe(c,{childList:!0,subtree:!0});else{var d=!1;qc(c,"DOMNodeInserted",function(){d||(d=!0,H(function(){d=!1;for(var e=0;e<LD.length;e++)H(LD[e])}))})}};LD=[];E.body?b():H(b)}LD.push(a)},MD=!!A.MutationObserver,LD;
function SD(a,b){return b}SD.F="internal.enableAutoEventOnElementVisibility";function TD(){}TD.F="internal.enableAutoEventOnError";var UD={},VD=[],WD={},XD=0,YD=0;
var $D=function(){gb(WD,function(a,b){var c=UD[a];c&&gb(b,function(d,e){ZD(e,c)})})},cE=function(a,b){var c=""+b;if(UD[c])UD[c].push(a);else{var d=[a];UD[c]=d;var e=WD[c];e||(e={},WD[c]=e);VD.push(function(f){var g=f.target;if(g){var k=cC(g);if(k){var m=aE(k,"gtmFormInteractId",function(){return XD++}),n=aE(g,"gtmFormInteractFieldId",function(){return YD++});if(m!==null&&n!==null){var p=e[m];p?(p.ac&&(A.clearTimeout(p.ac),p.Jb.getAttribute("data-gtm-form-interact-field-id")!==n&&ZD(p,d)),p.Jb=g,bE(p,
d,b)):(e[m]={form:k,Jb:g,zf:0,ac:null},bE(e[m],d,b))}}}})}},ZD=function(a,b){var c=a.form,d=a.Jb,e=$B(c,"gtm.formInteract",b),f=c.action;f&&f.tagName&&(f=c.cloneNode(!1).action);e["gtm.elementUrl"]=f;e["gtm.interactedFormName"]=c.getAttribute("name")!=null?c.getAttribute("name"):void 0;e["gtm.interactedFormLength"]=c.length;e["gtm.interactedFormField"]=d;e["gtm.interactedFormFieldId"]=d.id;e["gtm.interactedFormFieldName"]=d.getAttribute("name")!=null?d.getAttribute("name"):void 0;e["gtm.interactedFormFieldPosition"]=
bC(c,d,"gtmFormInteractFieldId");e["gtm.interactedFormFieldType"]=d.getAttribute("type")!=null?d.getAttribute("type"):void 0;e["gtm.interactSequenceNumber"]=a.zf;GA(e);a.zf++;a.ac=null},bE=function(a,b,c){c?a.ac=A.setTimeout(function(){ZD(a,b)},c):ZD(a,b)},aE=function(a,b,c){var d;try{if(d=a.dataset[b])return d;d=String(c());a.dataset[b]=d}catch(e){d=null}return d};
function dE(a,b){var c=this;J(this.getName(),["options:?PixieMap","triggerId:?*"],arguments);OB([function(){L(c,"detect_form_interaction_events")}]);b=UB(b);var d=a&&Number(a.get("interval"));d>0&&isFinite(d)||(d=0);if(VB("fil","init",!1)){var e=VB("fil","reg");if(e)e(b,d);else throw Error("Failed to register trigger: "+b);}else qc(E,"change",function(f){for(var g=0;g<VD.length;g++)VD[g](f)}),qc(A,"pagehide",function(){$D()}),
cE(b,d),WB("fil","reg",cE),WB("fil","init",!0);return b}dE.F="internal.enableAutoEventOnFormInteraction";
var eE=function(a,b,c,d,e){var f=VB("fsl",c?"nv.mwt":"mwt",0),g;g=c?VB("fsl","nv.ids",[]):VB("fsl","ids",[]);if(!g.length)return!0;var k=$B(a,"gtm.formSubmit",g),m=a.action;m&&m.tagName&&(m=a.cloneNode(!1).action);U(121);if(m==="https://www.facebook.com/tr/")return U(122),!0;k["gtm.elementUrl"]=m;k["gtm.formCanceled"]=c;a.getAttribute("name")!=null&&(k["gtm.interactedFormName"]=a.getAttribute("name"));e&&(k["gtm.formSubmitElement"]=e,k["gtm.formSubmitElementText"]=e.value);if(d&&f){if(!FA(k,HA(b,
f),f))return!1}else FA(k,function(){},f||2E3);return!0},fE=function(){var a=[],b=function(c){return bb(a,function(d){return d.form===c})};return{store:function(c,d){var e=b(c);e?e.button=d:a.push({form:c,button:d})},get:function(c){var d=b(c);if(d)return d.button}}},gE=function(a){var b=a.target;return b&&b!=="_self"&&b!=="_parent"&&b!=="_top"?!1:!0},hE=function(){var a=fE(),b=HTMLFormElement.prototype.submit;qc(E,"click",function(c){var d=c.target;if(d){var e=vc(d,["button","input"],100);if(e&&(e.type===
"submit"||e.type==="image")&&e.name&&sc(e,"value")){var f=cC(e);f&&a.store(f,e)}}},!1);qc(E,"submit",function(c){var d=c.target;if(!d)return c.returnValue;var e=c.defaultPrevented||c.returnValue===!1,f=gE(d)&&!e,g=a.get(d),k=!0;if(eE(d,function(){if(k){var m=null,n={};g&&(m=E.createElement("input"),m.type="hidden",m.name=g.name,m.value=g.value,d.appendChild(m),g.hasAttribute("formaction")&&(n.action=d.getAttribute("action"),Zb(d,g.getAttribute("formaction"))),g.hasAttribute("formenctype")&&(n.enctype=
d.getAttribute("enctype"),d.setAttribute("enctype",g.getAttribute("formenctype"))),g.hasAttribute("formmethod")&&(n.method=d.getAttribute("method"),d.setAttribute("method",g.getAttribute("formmethod"))),g.hasAttribute("formvalidate")&&(n.validate=d.getAttribute("validate"),d.setAttribute("validate",g.getAttribute("formvalidate"))),g.hasAttribute("formtarget")&&(n.target=d.getAttribute("target"),d.setAttribute("target",g.getAttribute("formtarget"))));b.call(d);m&&(d.removeChild(m),n.hasOwnProperty("action")&&
Zb(d,n.action),n.hasOwnProperty("enctype")&&d.setAttribute("enctype",n.enctype),n.hasOwnProperty("method")&&d.setAttribute("method",n.method),n.hasOwnProperty("validate")&&d.setAttribute("validate",n.validate),n.hasOwnProperty("target")&&d.setAttribute("target",n.target))}},e,f,g))k=!1;else return e||(c.preventDefault&&c.preventDefault(),c.returnValue=!1),!1;return c.returnValue},!1);HTMLFormElement.prototype.submit=function(){var c=this,d=!0;eE(c,function(){d&&b.call(c)},!1,gE(c))&&(b.call(c),d=
!1)}};
function iE(a,b){var c=this;J(this.getName(),["options:?PixieMap","triggerId:?*"],arguments);var d=a&&a.get("waitForTags");OB([function(){L(c,"detect_form_submit_events",{waitForTags:!!d})}]);var e=a&&a.get("checkValidation");b=UB(b);if(d){var f=Number(a.get("waitForTagsTimeout"));f>0&&isFinite(f)||(f=2E3);var g=function(m){return Math.max(f,m)};ZB("fsl","mwt",g,0);e||ZB("fsl","nv.mwt",g,0)}var k=function(m){m.push(b);return m};
ZB("fsl","ids",k,[]);e||ZB("fsl","nv.ids",k,[]);VB("fsl","init",!1)||(hE(),WB("fsl","init",!0));return b}iE.F="internal.enableAutoEventOnFormSubmit";
function nE(){var a=this;}nE.F="internal.enableAutoEventOnGaSend";var oE={},pE=[];
var rE=function(a,b){var c=""+b;if(oE[c])oE[c].push(a);else{var d=[a];oE[c]=d;var e=qE("gtm.historyChange-v2"),f=-1;pE.push(function(g){f>=0&&A.clearTimeout(f);b?f=A.setTimeout(function(){e(g,d);f=-1},b):e(g,d)})}},qE=function(a){var b=A.location.href,c={source:null,state:A.history.state||null,url:Ej(Hj(b)),La:Bj(Hj(b),"fragment")};return function(d,e){var f=c,g={};g[f.source]=!0;g[d.source]=!0;if(!g.popstate||!g.hashchange||f.La!==d.La){var k={event:a,"gtm.historyChangeSource":d.source,"gtm.oldUrlFragment":c.La,
"gtm.newUrlFragment":d.La,"gtm.oldHistoryState":c.state,"gtm.newHistoryState":d.state,"gtm.oldUrl":c.url,"gtm.newUrl":d.url};e&&(k["gtm.triggers"]=e.join(","));c=d;GA(k)}}},sE=function(a,b){var c=A.history,d=c[a];if(Za(d))try{c[a]=function(e,f,g){d.apply(c,[].slice.call(arguments,0));var k=A.location.href;b({source:a,state:e,url:Ej(Hj(k)),La:Bj(Hj(k),"fragment")})}}catch(e){}},uE=function(a){A.addEventListener("popstate",function(b){var c=tE(b);a({source:"popstate",state:b.state,url:Ej(Hj(c)),La:Bj(Hj(c),
"fragment")})})},vE=function(a){A.addEventListener("hashchange",function(b){var c=tE(b);a({source:"hashchange",state:null,url:Ej(Hj(c)),La:Bj(Hj(c),"fragment")})})},tE=function(a){var b,c;return((b=a.target)==null?void 0:(c=b.location)==null?void 0:c.href)||A.location.href};
function wE(a,b){var c=this;J(this.getName(),["options:?PixieMap","triggerId:?*"],arguments);OB([function(){L(c,"detect_history_change_events")}]);var d=a&&a.get("useV2EventName")?"ehl":"hl",e=Number(a&&a.get("interval"));e>0&&isFinite(e)||(e=0);if(!VB(d,"init",!1)){var f;d==="ehl"?(f=function(k){for(var m=0;m<pE.length;m++)pE[m](k)},b=UB(b),rE(b,e),WB(d,"reg",rE)):f=qE("gtm.historyChange");vE(f);uE(f);sE("pushState",f);
sE("replaceState",f);WB(d,"init",!0)}else if(d==="ehl"){var g=VB(d,"reg");g&&(b=UB(b),g(b,e))}d==="hl"&&(b=void 0);return b}wE.F="internal.enableAutoEventOnHistoryChange";var xE=["http://","https://","javascript:","file://"];
var yE=function(a,b){if(a.which===2||a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)return!1;var c=Bc(b,"href");if(c.indexOf(":")!==-1&&!xE.some(function(k){return sb(c,k)}))return!1;var d=c.indexOf("#"),e=Bc(b,"target");if(e&&e!=="_self"&&e!=="_parent"&&e!=="_top"||d===0)return!1;if(d>0){var f=Ej(Hj(c)),g=Ej(Hj(A.location.href));return f!==g}return!0},zE=function(a,b){for(var c=Bj(Hj((b.attributes&&b.attributes.formaction?b.formAction:"")||b.action||Bc(b,"href")||b.src||b.code||b.codebase||""),"host"),
d=0;d<a.length;d++)try{if((new RegExp(a[d])).test(c))return!1}catch(e){}return!0},AE=function(){function a(c){var d=c.target;if(d&&c.which!==3&&!(c.j||c.timeStamp&&c.timeStamp===b)){b=c.timeStamp;d=vc(d,["a","area"],100);if(!d)return c.returnValue;var e=c.defaultPrevented||c.returnValue===!1,f=VB("lcl",e?"nv.mwt":"mwt",0),g;g=e?VB("lcl","nv.ids",[]):VB("lcl","ids",[]);for(var k=[],m=0;m<g.length;m++){var n=g[m],p=VB("lcl","aff.map",{})[n];p&&!zE(p,d)||k.push(n)}if(k.length){var q=yE(c,d),r=$B(d,"gtm.linkClick",
k);r["gtm.elementText"]=tc(d);r["gtm.willOpenInNewWindow"]=!q;if(q&&!e&&f&&d.href){var u=!!bb(String(Bc(d,"rel")||"").split(" "),function(x){return x.toLowerCase()==="noreferrer"}),v=A[(Bc(d,"target")||"_self").substring(1)],t=!0,w=HA(function(){var x;if(x=t&&v){var y;a:if(u){var B;try{B=new MouseEvent(c.type,{bubbles:!0})}catch(C){if(!E.createEvent){y=!1;break a}B=E.createEvent("MouseEvents");B.initEvent(c.type,!0,!0)}B.j=!0;c.target.dispatchEvent(B);y=!0}else y=!1;x=!y}x&&(v.location.href=Bc(d,
"href"))},f);if(FA(r,w,f))t=!1;else return c.preventDefault&&c.preventDefault(),c.returnValue=!1}else FA(r,function(){},f||2E3);return!0}}}var b=0;qc(E,"click",a,!1);qc(E,"auxclick",a,!1)};
function BE(a,b){var c=this;J(this.getName(),["dustOptions:?PixieMap","triggerId:?*"],arguments);var d=I(a);OB([function(){L(c,"detect_link_click_events",d)}]);var e=d&&!!d.waitForTags,f=d&&!!d.checkValidation,g=d?d.affiliateDomains:void 0;b=UB(b);if(e){var k=Number(d.waitForTagsTimeout);k>0&&isFinite(k)||(k=2E3);var m=function(p){return Math.max(k,p)};ZB("lcl","mwt",m,0);f||ZB("lcl","nv.mwt",m,0)}var n=function(p){p.push(b);
return p};ZB("lcl","ids",n,[]);f||ZB("lcl","nv.ids",n,[]);g&&ZB("lcl","aff.map",function(p){p[b]=g;return p},{});VB("lcl","init",!1)||(AE(),WB("lcl","init",!0));return b}BE.F="internal.enableAutoEventOnLinkClick";var CE,DE;
var EE=function(a){return VB("sdl",a,{})},FE=function(a,b,c){if(b){var d=Array.isArray(a)?a:[a];ZB("sdl",c,function(e){for(var f=0;f<d.length;f++){var g=String(d[f]);e.hasOwnProperty(g)||(e[g]=[]);e[g].push(b)}return e},{})}},IE=function(){function a(){GE();HE(a,!0)}return a},JE=function(){function a(){f?e=A.setTimeout(a,c):(e=0,GE(),HE(b));f=!1}function b(){d&&CE();e?f=!0:(e=A.setTimeout(a,c),WB("sdl","pending",!0))}var c=250,d=!1;E.scrollingElement&&E.documentElement&&(c=50,d=!0);var e=0,f=!1;return b},
HE=function(a,b){VB("sdl","init",!1)&&!KE()&&(b?rc(A,"scrollend",a):rc(A,"scroll",a),rc(A,"resize",a),WB("sdl","init",!1))},GE=function(){var a=CE(),b=a.depthX,c=a.depthY,d=b/DE.scrollWidth*100,e=c/DE.scrollHeight*100;LE(b,"horiz.pix","PIXELS","horizontal");LE(d,"horiz.pct","PERCENT","horizontal");LE(c,"vert.pix","PIXELS","vertical");LE(e,"vert.pct","PERCENT","vertical");WB("sdl","pending",!1)},LE=function(a,b,c,d){var e=EE(b),f={},g;for(g in e)if(f={Yd:f.Yd},f.Yd=g,e.hasOwnProperty(f.Yd)){var k=
Number(f.Yd);if(!(a<k)){var m={};GA((m.event="gtm.scrollDepth",m["gtm.scrollThreshold"]=k,m["gtm.scrollUnits"]=c.toLowerCase(),m["gtm.scrollDirection"]=d,m["gtm.triggers"]=e[f.Yd].join(","),m));ZB("sdl",b,function(n){return function(p){delete p[n.Yd];return p}}(f),{})}}},NE=function(){ZB("sdl","scr",function(a){a||(a=E.scrollingElement||E.body&&E.body.parentNode);return DE=a},!1);ZB("sdl","depth",function(a){a||(a=ME());return CE=a},!1)},ME=function(){var a=0,b=0;return function(){var c=wt(),d=c.height;
a=Math.max(DE.scrollLeft+c.width,a);b=Math.max(DE.scrollTop+d,b);return{depthX:a,depthY:b}}},KE=function(){return!!(Object.keys(EE("horiz.pix")).length||Object.keys(EE("horiz.pct")).length||Object.keys(EE("vert.pix")).length||Object.keys(EE("vert.pct")).length)};
function OE(a,b){var c=this;J(this.getName(),["options:!PixieMap","triggerId:?*"],arguments);OB([function(){L(c,"detect_scroll_events")}]);NE();if(!DE)return;b=UB(b);var d=I(a);switch(d.horizontalThresholdUnits){case "PIXELS":FE(d.horizontalThresholds,b,"horiz.pix");break;case "PERCENT":FE(d.horizontalThresholds,b,"horiz.pct")}switch(d.verticalThresholdUnits){case "PIXELS":FE(d.verticalThresholds,b,"vert.pix");break;case "PERCENT":FE(d.verticalThresholds,
b,"vert.pct")}VB("sdl","init",!1)?VB("sdl","pending",!1)||H(function(){GE()}):(WB("sdl","init",!0),WB("sdl","pending",!0),H(function(){GE();if(KE()){var e=JE();"onscrollend"in A?(e=IE(),qc(A,"scrollend",e)):qc(A,"scroll",e);qc(A,"resize",e)}else WB("sdl","init",!1)}));return b}OE.F="internal.enableAutoEventOnScroll";function PE(a){return function(){if(a.limit&&a.ii>=a.limit)a.ug&&A.clearInterval(a.ug);else{a.ii++;var b=nb();GA({event:a.eventName,"gtm.timerId":a.ug,"gtm.timerEventNumber":a.ii,"gtm.timerInterval":a.interval,"gtm.timerLimit":a.limit,"gtm.timerStartTime":a.Qk,"gtm.timerCurrentTime":b,"gtm.timerElapsedTime":b-a.Qk,"gtm.triggers":a.Gn})}}}
function QE(a,b){
return b}QE.F="internal.enableAutoEventOnTimer";
var RE=function(a,b,c){function d(){var g=a();f+=e?(nb()-e)*g.playbackRate/1E3:0;e=nb()}var e=0,f=0;return{createEvent:function(g,k,m){var n=a(),p=n.Qh,q=m?Math.round(m):k?Math.round(n.Qh*k):Math.round(n.uk),r=k!==void 0?Math.round(k*100):p<=0?0:Math.round(q/p*100),u=E.hidden?!1:xt(c)>=.5;d();var v=void 0;b!==void 0&&(v=[b]);var t=$B(c,"gtm.video",v);t["gtm.videoProvider"]="youtube";t["gtm.videoStatus"]=g;t["gtm.videoUrl"]=n.url;t["gtm.videoTitle"]=n.title;t["gtm.videoDuration"]=Math.round(p);t["gtm.videoCurrentTime"]=
Math.round(q);t["gtm.videoElapsedTime"]=Math.round(f);t["gtm.videoPercent"]=r;t["gtm.videoVisible"]=u;return t},Nk:function(){e=nb()},Kd:function(){d()}}};var Vb=wa(["data-gtm-yt-inspected-"]),SE=["www.youtube.com","www.youtube-nocookie.com"],TE,UE=!1;
var VE=function(a,b,c){var d=a.map(function(g){return{Ka:g,yf:g,wf:void 0}});if(!b.length)return d;var e=b.map(function(g){return{Ka:g*c,yf:void 0,wf:g}});if(!d.length)return e;var f=d.concat(e);f.sort(function(g,k){return g.Ka-k.Ka});return f},WE=function(a){a=a===void 0?[]:a;for(var b=[],c=0;c<a.length;c++)a[c]<0||b.push(a[c]);b.sort(function(d,e){return d-e});return b},XE=function(a){a=a===void 0?[]:a;for(var b=[],c=0;c<a.length;c++)a[c]>100||a[c]<0||(b[c]=a[c]/100);b.sort(function(d,e){return d-
e});return b},YE=function(a,b){var c,d;function e(){u=RE(function(){return{url:w,title:x,Qh:t,uk:a.getCurrentTime(),playbackRate:y}},b.Mb,a.getIframe());t=0;x=w="";y=1;return f}function f(G){switch(G){case 1:t=Math.round(a.getDuration());w=a.getVideoUrl();if(a.getVideoData){var K=a.getVideoData();x=K?K.title:""}y=a.getPlaybackRate();b.Kh?GA(u.createEvent("start")):u.Kd();v=VE(b.si,b.ri,a.getDuration());return g(G);default:return f}}function g(){B=a.getCurrentTime();C=mb().getTime();u.Nk();r();return k}
function k(G){var K;switch(G){case 0:return n(G);case 2:K="pause";case 3:var F=a.getCurrentTime()-B;K=Math.abs((mb().getTime()-C)/1E3*y-F)>1?"seek":K||"buffering";a.getCurrentTime()&&(b.Jh?GA(u.createEvent(K)):u.Kd());q();return m;case -1:return e(G);default:return k}}function m(G){switch(G){case 0:return n(G);case 1:return g(G);case -1:return e(G);default:return m}}function n(){for(;d;){var G=c;A.clearTimeout(d);G()}b.Ih&&GA(u.createEvent("complete",1));return e(-1)}function p(){}function q(){d&&
(A.clearTimeout(d),d=0,c=p)}function r(){if(v.length&&y!==0){var G=-1,K;do{K=v[0];if(K.Ka>a.getDuration())return;G=(K.Ka-a.getCurrentTime())/y;if(G<0&&(v.shift(),v.length===0))return}while(G<0);c=function(){d=0;c=p;v.length>0&&v[0].Ka===K.Ka&&(v.shift(),GA(u.createEvent("progress",K.wf,K.yf)));r()};d=A.setTimeout(c,G*1E3)}}var u,v=[],t,w,x,y,B,C,D=e(-1);d=0;c=p;return{onStateChange:function(G){D=D(G)},onPlaybackRateChange:function(G){B=a.getCurrentTime();C=mb().getTime();u.Kd();y=G;q();r()}}},$E=
function(a){H(function(){function b(){for(var d=c.getElementsByTagName("iframe"),e=d.length,f=0;f<e;f++)ZE(d[f],a)}var c=E;b();ND(b)})},ZE=function(a,b){if(!a.getAttribute("data-gtm-yt-inspected-"+b.Mb)&&(Yb(a,"data-gtm-yt-inspected-"+b.Mb),aF(a,b.bf))){a.id||(a.id=bF());var c=A.YT,d=c.get(a.id);d||(d=new c.Player(a.id));var e=YE(d,b),f={},g;for(g in e)f={pf:f.pf},f.pf=g,e.hasOwnProperty(f.pf)&&d.addEventListener(f.pf,function(k){return function(m){return e[k.pf](m.data)}}(f))}},aF=function(a,b){var c=
a.getAttribute("src");if(cF(c,"embed/")){if(c.indexOf("enablejsapi=1")>0)return!0;if(b){var d;var e=c.indexOf("?")!==-1?"&":"?";c.indexOf("origin=")>-1?d=c+e+"enablejsapi=1":(TE||(TE=E.location.protocol+"//"+E.location.hostname,E.location.port&&(TE+=":"+E.location.port)),d=c+e+"enablejsapi=1&origin="+encodeURIComponent(TE));var f;f=Hb(d);a.src=Ib(f).toString();return!0}}return!1},cF=function(a,b){if(!a)return!1;for(var c=0;c<SE.length;c++)if(a.indexOf("//"+SE[c]+"/"+b)>=0)return!0;return!1},bF=function(){var a=
""+Math.round(Math.random()*1E9);return E.getElementById(a)?bF():a};
function dF(a,b){var c=this;var d=function(){$E(p)};J(this.getName(),["dustOptions:!PixieMap","triggerId:?*"],arguments);OB([function(){L(c,"detect_youtube_activity_events",{fixMissingApi:!!a.get("fixMissingApi")})}]);b=UB(b);var e=!!a.get("captureStart"),f=!!a.get("captureComplete"),g=!!a.get("capturePause"),k=XE(I(a.get("progressThresholdsPercent"))),m=WE(I(a.get("progressThresholdsTimeInSeconds"))),n=!!a.get("fixMissingApi");
if(!(e||f||g||k.length||m.length))return;var p={Kh:e,Ih:f,Jh:g,ri:k,si:m,bf:n,Mb:b},q=A.YT;if(q)return q.ready&&q.ready(d),b;var r=A.onYouTubeIframeAPIReady;A.onYouTubeIframeAPIReady=function(){r&&r();d()};H(function(){for(var u=E.getElementsByTagName("script"),v=u.length,t=0;t<v;t++){var w=u[t].getAttribute("src");if(cF(w,"iframe_api")||cF(w,"player_api"))return b}for(var x=E.getElementsByTagName("iframe"),y=x.length,B=0;B<y;B++)if(!UE&&aF(x[B],p.bf))return lc("https://www.youtube.com/iframe_api"),
UE=!0,b});return b}dF.F="internal.enableAutoEventOnYouTubeActivity";function eF(a,b){J(this.getName(),["booleanExpression:!string","context:?PixieMap"],arguments);var c=b?I(b):{},d=a,e=!1;var f=JSON.parse(d);if(!f)throw Error("Invalid boolean expression string was given.");e=Rg(f,c);return e}eF.F="internal.evaluateBooleanExpression";var fF;function gF(a){var b=!1;return b}gF.F="internal.evaluateMatchingRules";function OF(){return To(7)&&To(9)&&To(10)};function JG(a,b,c,d){}JG.F="internal.executeEventProcessor";function KG(a){var b;return dd(b,this.D,1)}KG.F="internal.executeJavascriptString";function LG(a){var b;return b};function MG(a){var b={};return dd(b)}MG.F="internal.getAdsCookieWritingOptions";function NG(a){var b=!1;return b}NG.F="internal.getAllowAdPersonalization";function OG(a,b){b=b===void 0?!0:b;var c;return c}OG.F="internal.getAuid";var PG=null;
function QG(){var a=new La;L(this,"read_container_data"),R(45)&&PG?a=PG:(a.set("containerId",'G-E48RQQ760P'),a.set("version",'1'),a.set("environmentName",''),a.set("debugMode",Sf),a.set("previewMode",Tf.Sk),a.set("environmentMode",Tf.jm),a.set("firstPartyServing",ij()||Ui),a.set("containerUrl",fc),a.Ia(),R(45)&&(PG=a));return a}
QG.R="getContainerVersion";function RG(a,b){b=b===void 0?!0:b;var c;return c}RG.R="getCookieValues";function SG(){return wl()}SG.F="internal.getCountryCode";function TG(){var a=[];a=nk();return dd(a)}TG.F="internal.getDestinationIds";function UG(a){var b=new La;return b}UG.F="internal.getDeveloperIds";function VG(a,b){var c=null;return c}VG.F="internal.getElementAttribute";function WG(a){var b=null;return b}WG.F="internal.getElementById";function XG(a){var b="";return b}XG.F="internal.getElementInnerText";function YG(a,b){var c=null;return c}YG.F="internal.getElementProperty";function ZG(a){var b;return b}ZG.F="internal.getElementValue";function $G(a){var b=0;return b}$G.F="internal.getElementVisibilityRatio";function aH(a){var b=null;return b}aH.F="internal.getElementsByCssSelector";
function bH(a){var b;J(this.getName(),["keyPath:!string"],arguments);L(this,"read_event_data",a);var c;a:{var d=a,e=SB(this).originalEventData;if(e){for(var f=e,g={},k={},m={},n=[],p=d.split("\\\\"),q=0;q<p.length;q++){for(var r=p[q].split("\\."),u=0;u<r.length;u++){for(var v=r[u].split("."),t=0;t<v.length;t++)n.push(v[t]),t!==v.length-1&&n.push(m);u!==r.length-1&&n.push(k)}q!==p.length-1&&n.push(g)}for(var w=[],x="",y=l(n),B=y.next();!B.done;B=
y.next()){var C=B.value;C===m?(w.push(x),x=""):x=C===g?x+"\\":C===k?x+".":x+C}x&&w.push(x);for(var D=l(w),G=D.next();!G.done;G=D.next()){if(f==null){c=void 0;break a}f=f[G.value]}c=f}else c=void 0}b=dd(c,this.D,1);return b}bH.F="internal.getEventData";var cH={};cH.enableAWFledge=R(31);cH.enableAdsConversionValidation=R(16);cH.enableAdsSupernovaParams=R(27);cH.enableAutoPhoneAndAddressDetection=R(29);cH.enableAutoPiiOnPhoneAndAddress=R(30);cH.enableCachedEcommerceData=R(37);cH.enableCloudRecommentationsErrorLogging=R(38);cH.enableCloudRecommentationsSchemaIngestion=R(39);cH.enableCloudRetailInjectPurchaseMetadata=R(41);cH.enableCloudRetailLogging=R(40);cH.enableCloudRetailPageCategories=R(42);cH.enableConsentDisclosureActivity=R(44);
cH.enableDCFledge=R(50);cH.enableDataLayerSearchExperiment=R(117);cH.enableDecodeUri=R(85);cH.enableDeferAllEnhancedMeasurement=R(51);cH.enableFormSkipValidation=R(80);cH.enableGa4OutboundClicksFix=R(88);cH.enableGaAdsConversions=R(109);cH.enableMerchantRenameForBasketData=R(103);cH.enableUnsiloedModeGtmTags=R(129);cH.enableUrlDecodeEventUsage=R(131);cH.enableZoneConfigInChildContainers=R(134);cH.useEnableAutoEventOnFormApis=R(146);cH.autoPiiEligible=Bl();function dH(){return dd(cH)}dH.F="internal.getFlags";
function eH(){return new ad(lB)}eH.F="internal.getHtmlId";function fH(a){var b;return b}fH.F="internal.getIframingState";function gH(a,b){var c={};return dd(c)}gH.F="internal.getLinkerValueFromLocation";function hH(){var a=new La;return a}hH.F="internal.getPrivacyStrings";function iH(a,b){var c;J(this.getName(),["targetId:!string","name:!string"],arguments);var d=tt(a)||{};c=dd(d[b],this.D);return c}iH.F="internal.getProductSettingsParameter";function jH(a,b){var c;J(this.getName(),["queryKey:!string","retrieveAll:?boolean"],arguments);L(this,"get_url","query",a);var d=Bj(Hj(A.location.href),"query"),e=Aj(d,a,b);c=dd(e,this.D);return c}jH.R="getQueryParameters";function kH(a,b){var c;return c}kH.R="getReferrerQueryParameters";function lH(a){var b="";return b}lH.R="getReferrerUrl";function mH(){return xl()}mH.F="internal.getRegionCode";function nH(a,b){var c;J(this.getName(),["targetId:!string","name:!string"],arguments);var d=zn(a);c=dd(d[b],this.D);return c}nH.F="internal.getRemoteConfigParameter";function oH(){var a=new La;a.set("width",0);a.set("height",0);return a}oH.F="internal.getScreenDimensions";function pH(){var a="";return a}pH.F="internal.getTopSameDomainUrl";function qH(){var a="";return a}qH.F="internal.getTopWindowUrl";function rH(a){var b="";J(this.getName(),["component:?string"],arguments),L(this,"get_url",a),b=Bj(Hj(A.location.href),a);return b}rH.R="getUrl";function sH(){L(this,"get_user_agent");return cc.userAgent}sH.F="internal.getUserAgent";function tH(){var a;return dd(a?qv(a):null)}tH.F="internal.getUserAgentClientHints";var vH=function(a){var b=a.eventName===N.g.ic&&gl()&&Ju(a),c=a.metadata.is_sgtm_service_worker,d=a.metadata.batch_on_navigation,e=a.metadata.is_conversion,f=a.metadata.is_session_start,g=a.metadata.create_dc_join,k=a.metadata.create_google_join,m=a.metadata.euid_mode_enabled&&!!Iu(a);return!(!Ac()&&cc.sendBeacon===void 0||e||m||f||g||k||b||c||!d&&uH)},uH=!1;
var wH=function(a){var b=0,c=0;return{start:function(){b=nb()},stop:function(){c=this.get()},get:function(){var d=0;a.Zh()&&(d=nb()-b);return d+c}}},xH=function(){this.j=void 0;this.C=0;this.isActive=this.isVisible=this.H=!1;this.P=this.K=void 0};h=xH.prototype;h.Gl=function(a){var b=this;if(!this.j){this.H=E.hasFocus();this.isVisible=!E.hidden;this.isActive=!0;var c=function(d,e,f){qc(d,e,function(g){b.j.stop();f(g);b.Zh()&&b.j.start()})};c(A,"focus",function(){b.H=!0});c(A,"blur",function(){b.H=
!1});c(A,"pageshow",function(d){b.isActive=!0;d.persisted&&U(56);b.P&&b.P()});c(A,"pagehide",function(){b.isActive=!1;b.K&&b.K()});c(E,"visibilitychange",function(){b.isVisible=!E.hidden});Ju(a)&&!hc("Firefox")&&!hc("FxiOS")&&c(A,"beforeunload",function(){uH=!0});this.wi(!0);this.C=0}};h.wi=function(a){if((a===void 0?0:a)||this.j)this.C+=this.qg(),this.j=wH(this),this.Zh()&&this.j.start()};h.En=function(a){var b=this.qg();b>0&&(a.j[N.g.te]=b)};h.Fm=function(a){a.j[N.g.te]=void 0;this.wi();this.C=
0};h.Zh=function(){return this.H&&this.isVisible&&this.isActive};h.xm=function(){return this.C+this.qg()};h.qg=function(){return this.j&&this.j.get()||0};h.rn=function(a){this.K=a};h.Mk=function(a){this.P=a};var zH=function(a){var b=a.metadata.event_usage;if(Array.isArray(b))for(var c=0;c<b.length;c++)yH(b[c]);var d=Wa("GA4_EVENT");d&&(a.j._eu=d)},AH=function(){delete Ua.GA4_EVENT},yH=function(a){Va("GA4_EVENT",a)};function BH(){return A.gaGlobal=A.gaGlobal||{}}function CH(){var a=BH();a.hid=a.hid||db();return a.hid}function DH(a,b){var c=BH();if(c.vid===void 0||b&&!c.from_cookie)c.vid=a,c.from_cookie=b};
var EH=function(a,b,c){var d=a.metadata.client_id_source;if(d===void 0||c<=d)a.j[N.g.ib]=b,a.metadata.client_id_source=c},GH=function(a,b){var c=a.j[N.g.ib];if(V(a.m,N.g.Rb)&&V(a.m,N.g.qc)||b&&c===b)return c;if(c){c=""+c;if(!FH(c,a))return U(31),a.isAborted=!0,"";DH(c,W(N.g.U));return c}U(32);a.isAborted=!0;return""},HH=["GA1"],IH=function(a){var b=a.metadata.cookie_options,c=b.prefix+"_ga",d=Hp(c,b.domain,b.path,HH,N.g.U);if(!d){var e=String(V(a.m,N.g.Hc,""));e&&e!==c&&(d=Hp(e,b.domain,b.path,HH,
N.g.U))}return d},FH=function(a,b){var c;var d=b.metadata.cookie_options,e=d.prefix+"_ga",f=Jp(d,void 0,void 0,N.g.U);if(V(b.m,N.g.mc)===!1&&IH(b)===a)c=!0;else{var g=Ip(a,HH[0],d.domain,d.path);c=zp(e,g,f)!==1}return c};
var LH=function(a,b,c){if(!b)return a;if(!a)return b;var d=JH(a);if(!d)return b;var e,f=ib((e=V(c.m,N.g.Ed))!=null?e:30);if(!(Math.floor(c.metadata.event_start_timestamp_ms/1E3)>d.rf+f*60))return a;var g=JH(b);if(!g)return a;g.Yc=d.Yc+1;var k;return(k=KH(g.sessionId,g.Yc,g.Xd,g.rf,g.ei,g.Uc,g.Md))!=null?k:b},OH=function(a,b){var c=b.metadata.cookie_options,d=MH(b,c),e=Ip(a,NH[0],c.domain,c.path),f={Lb:N.g.U,domain:c.domain,path:c.path,expires:c.Kb?new Date(nb()+Number(c.Kb)*1E3):void 0,flags:c.flags};
zp(d,void 0,f);return zp(d,e,f)!==1},PH=function(a){var b=a.metadata.cookie_options,c=MH(a,b),d=Hp(c,b.domain,b.path,NH,N.g.U);if(!d)return d;var e=op(c,void 0,void 0,N.g.U);if(d&&e.length>1){U(114);for(var f=void 0,g=void 0,k=0;k<e.length;k++){var m=e[k].split(".");if(!(m.length<7)){var n=Number(m[5]);n&&(!g||n>g)&&(g=n,f=e[k])}}f&&!tb(f,d)&&(U(115),d=f.split(".").slice(2).join("."))}return d},QH=function(a){return KH(a.j[N.g.pb],a.j[N.g.Ge],a.j[N.g.Fe],Math.floor(a.metadata.event_start_timestamp_ms/
1E3),a.metadata.join_timer_sec||0,!!a.metadata[N.g.Nf],a.j[N.g.ue])},KH=function(a,b,c,d,e,f,g){if(a&&b){var k=[a,b,ib(c),d,e];k.push(f?"1":"0");k.push(g||"0");return k.join(".")}},MH=function(a,b){return b.prefix+"_ga_"+a.target.ids[xm[0]]},NH=["GS1"],JH=function(a){if(a){var b=a.split(".");if(!(b.length<5||b.length>7)){b.length<7&&U(67);var c=Number(b[1]),d=Number(b[3]),e=Number(b[4]||0);c||U(118);d||U(119);isNaN(e)&&U(120);if(c&&d&&!isNaN(e))return{sessionId:b[0],Yc:c,Xd:!!Number(b[2]),rf:d,ei:e,
Uc:b[5]==="1",Md:b[6]!=="0"?b[6]:void 0}}}};
var RH=function(a){var b=V(a.m,N.g.sa),c=a.m.C[N.g.sa];if(c===b)return c;var d=Rc(b,null);c&&c[N.g.X]&&(d[N.g.X]=(d[N.g.X]||[]).concat(c[N.g.X]));return d},SH=function(a,b){var c=bq(!0);return c._up!=="1"?{}:{clientId:c[a],Xa:c[b]}},TH=function(a,b,c){var d=bq(!0),e=d[b];e&&(EH(a,e,2),FH(e,a));var f=d[c];f&&OH(f,a);return{clientId:e,Xa:f}},UH=function(){var a=Dj(A.location,"host"),b=Dj(Hj(E.referrer),"host");return a&&b?a===b||a.indexOf("."+b)>=0||b.indexOf("."+a)>=0?!0:!1:!1},VH=function(a){if(!V(a.m,
N.g.fb))return{};var b=a.metadata.cookie_options,c=b.prefix+"_ga",d=MH(a,b);jq(function(){var e;if(W("analytics_storage"))e={};else{var f={};e=(f._up="1",f[c]=a.j[N.g.ib],f[d]=QH(a),f)}return e},1);return!W("analytics_storage")&&UH()?SH(c,d):{}},XH=function(a){var b=RH(a)||{},c=a.metadata.cookie_options,d=c.prefix+"_ga",e=MH(a,c),f={};lq(b[N.g.Nc],!!b[N.g.X])&&(f=TH(a,d,e),f.clientId&&f.Xa&&(WH=!0));b[N.g.X]&&iq(function(){var g={},k=IH(a);k&&(g[d]=k);var m=PH(a);m&&(g[e]=m);var n=op("FPLC",void 0,
void 0,N.g.U);n.length&&(g._fplc=n[0]);return g},b[N.g.X],b[N.g.Sb],!!b[N.g.Cb]);return f},WH=!1;var YH=function(a){if(!a.metadata.is_merchant_center&&Nj(a.m)){var b=RH(a)||{},c=(lq(b[N.g.Nc],!!b[N.g.X])?bq(!0)._fplc:void 0)||(op("FPLC",void 0,void 0,N.g.U).length>0?void 0:"0");a.j._fplc=c}};function ZH(a){if(Ju(a)||ij())a.j[N.g.Lj]=xl()||wl();!Ju(a)&&ij()&&(a.j[N.g.Uj]="::")}function $H(a){if(R(81)&&ij()){Ms(a);Ns(a,"cpf",Xs(V(a.m,N.g.Fa)));var b=V(a.m,N.g.mc);Ns(a,"cu",b===!0?1:b===!1?0:void 0);Ns(a,"cf",Xs(V(a.m,N.g.cb)));Ns(a,"cd",Ep(Ws(V(a.m,N.g.Na)),Ws(V(a.m,N.g.lb))))}};var bI=function(a,b){var c=Mi.grl;c||(c=aI(),Mi.grl=c);c(b)||(U(35),a.isAborted=!0)},aI=function(){var a=nb(),b=a+864E5,c=20,d=5E3;return function(e){var f=nb();f>=b&&(b=f+864E5,d=5E3);c=Math.min(c+(f-a)/1E3*5,20);a=f;var g=!1;d<1||c<1||(g=!0,d--,c--);e&&(e.hm=d,e.Zl=c);return g}};
var cI=function(a){if(V(a.m,N.g.yd)!==void 0)a.copyToHitData(N.g.yd);else{var b=V(a.m,N.g.Tf),c,d;a:{if(WH){var e=RH(a)||{};if(e&&e[N.g.X])for(var f=Bj(Hj(a.j[N.g.Ga]),"host",!0),g=e[N.g.X],k=0;k<g.length;k++)if(g[k]instanceof RegExp){if(g[k].test(f)){d=!0;break a}}else if(f.indexOf(g[k])>=0){d=!0;break a}}d=!1}if(!(c=d)){var m;if(m=b)a:{for(var n=b.include_conditions||[],p=Bj(Hj(a.j[N.g.Ga]),"host",!0),q=0;q<n.length;q++)if(n[q].test(p)){m=!0;break a}m=!1}c=m}c&&(a.j[N.g.yd]="1",yH(4))}};
var dI=function(a,b){Zo()&&(a.gcs=$o(),b.metadata.is_consent_update&&(a.gcu="1"));a.gcd=dp(b.m);Yo(b.m)?a.npa="0":a.npa="1";ip()&&(a._ng="1")},gI=function(a){if(a.metadata.is_merchant_center)return{url:Oj("https://www.merchant-center-analytics.goog")+"/mc/collect",endpoint:20};var b=Kj(Nj(a.m),"/g/collect");if(b)return{url:b,endpoint:16};if(ij())return{url:""+hj()+"/g/collect",endpoint:16};var c=Ku(a),d=V(a.m,N.g.hb);return c&&!yl()&&d!==!1&&OF()&&W(N.g.N)&&W(N.g.U)?{url:eI(),endpoint:17}:{url:fI(),
endpoint:16}},eI=function(){var a;hI&&Al()!==""&&(a=Al());return"https://"+(a?a+".":"")+"analytics.google.com/g/collect"},fI=function(){var a="www";hI&&Al()&&(a=Al());return"https://"+a+".google-analytics.com/g/collect"},hI=!1;hI=!0;var iI={};iI[N.g.ib]="cid";iI[N.g.Kg]="gcut";iI[N.g.kc]="are";iI[N.g.Jf]="pscdl";iI[N.g.Of]="_fid";iI[N.g.eh]="_geo";iI[N.g.ob]="gdid";iI[N.g.Lc]=
"_ng";iI[N.g.Qb]="frm";iI[N.g.yd]="ir";iI[N.g.Ua]="ul";iI[N.g.ph]="pae";iI[N.g.Ee]="_rdi";iI[N.g.Ub]="sr";iI[N.g.Jj]="tid";iI[N.g.Yf]="tt";iI[N.g.Gd]="ec_mode";iI[N.g.Vj]="gtm_up";iI[N.g.Zf]="uaa";iI[N.g.cg]="uab";iI[N.g.dg]="uafvl";iI[N.g.eg]="uamb";iI[N.g.fg]="uam";iI[N.g.gg]="uap";iI[N.g.hg]="uapv";iI[N.g.ig]="uaw";iI[N.g.Lj]="ur";iI[N.g.Uj]="_uip";iI[N.g.zd]="lps";iI[N.g.fd]="gclgs",iI[N.g.hd]="gclst",iI[N.g.gd]="gcllp";var jI={};jI[N.g.jd]="cc";jI[N.g.kd]="ci";jI[N.g.ld]="cm";jI[N.g.md]="cn";jI[N.g.od]="cs";jI[N.g.pd]="ck";jI[N.g.Ca]=
"cu";jI[N.g.wa]="dl";jI[N.g.Ga]="dr";jI[N.g.eb]="dt";jI[N.g.Fe]="seg";jI[N.g.pb]="sid";jI[N.g.Ge]="sct";jI[N.g.Ba]="uid";R(136)&&(jI[N.g.Cd]="dp");var kI={};kI[N.g.te]="_et";kI[N.g.nb]="edid";var lI={};lI[N.g.jd]=
"cc";lI[N.g.kd]="ci";lI[N.g.ld]="cm";lI[N.g.md]="cn";lI[N.g.od]="cs";lI[N.g.pd]="ck";var mI={},nI=(mI[N.g.Ha]=1,mI),oI=function(a,b,c){var d={},e={},f={};d.v="2";d.tid=a.target.destinationId;d.gtm=lp({ya:a.metadata.source_canonical_id});d._p=R(149)?Zi:CH();if(c&&(c.Ud>0||c.rg)&&(R(113)||(d.em=c.Ja),c.ja)){var g=c.ja.zc;g&&!R(11)&&(g=g.replace(/./g,"*"));g&&(d.eme=g);d._es=c.ja.status;c.ja.time!==void 0&&(d._est=c.ja.time)}a.metadata.create_google_join&&(d._gaz=1);dI(d,a);gp()&&(d.dma_cps=ep());d.dma=
fp();vo(Lo())&&(d.tcfd=hp());gj()&&(d.tag_exp=gj());var k=a.j[N.g.ob];k&&(d.gdid=k);e.en=String(a.eventName);a.metadata.is_first_visit&&(e._fv=a.metadata.is_first_visit_conversion?2:1);a.metadata.is_new_to_site&&(e._nsi=1);a.metadata.is_session_start&&(e._ss=a.metadata.is_session_start_conversion?2:1);a.metadata.is_conversion&&(e._c=1);a.metadata.is_external_event&&(e._ee=1);if(a.metadata.is_ecommerce){var m=a.j[N.g.fa]||V(a.m,N.g.fa);if(Array.isArray(m))for(var n=0;n<m.length&&n<200;n++)e["pr"+(n+
1)]=Xf(m[n])}var p=a.j[N.g.nb];p&&(e.edid=p);var q=function(v,t){if(typeof t!=="object"||!nI[v]){var w="ep."+v,x="epn."+v;v=$a(t)?x:w;var y=$a(t)?w:x;e.hasOwnProperty(y)&&delete e[y];e[v]=String(t)}};gb(a.j,function(v,t){if(t!==void 0&&!lh.hasOwnProperty(v)){t===null&&(t="");var w;var x=t;v!==N.g.ue?w=!1:a.metadata.euid_mode_enabled||Ju(a)?(d.ecid=x,w=!0):w=void 0;if(!w&&v!==N.g.Nf){var y=t;t===!0&&(y="1");t===!1&&(y="0");y=String(y);var B;if(iI[v])B=iI[v],d[B]=y;else if(jI[v])B=jI[v],f[B]=y;else if(kI[v])B=
kI[v],e[B]=y;else if(v.charAt(0)==="_")d[v]=y;else{var C;lI[v]?C=!0:v!==N.g.nd?C=!1:(typeof t!=="object"&&q(v,t),C=!0);C||q(v,t)}}}});(function(v){Ju(a)&&typeof v==="object"&&gb(v||{},function(t,w){typeof w!=="object"&&(d["sst."+t]=String(w))})})(a.j[N.g.Oe]);rm(d,a.j[N.g.Id]);var r=a.j[N.g.qb]||{};R(94)&&V(a.m,N.g.hb,void 0,4)===!1&&(d.ngs="1");gb(r,function(v,t){t!==void 0&&((t===null&&(t=""),v!==N.g.Ba||f.uid)?b[v]!==t&&(e[($a(t)?"upn.":"up.")+String(v)]=String(t),b[v]=t):f.uid=String(t))});var u=
gI(a);eg.call(this,{ma:d,Zc:f,Th:e},u.url,u.endpoint,Ju(a),void 0)};ra(oI,eg);var pI=function(a){this.H=a;this.j=""},qI=function(a,b){a.C=b;return a},rI=function(a,b){b=a.j+b;for(var c=b.indexOf("\n\n");c!==-1;){var d=a,e;a:{var f=l(b.substring(0,c).split("\n")),g=f.next().value,k=f.next().value;if(g.indexOf("event: message")===0&&k.indexOf("data: ")===0)try{e=JSON.parse(k.substring(k.indexOf(":")+1));break a}catch(F){}e=void 0}var m=d,n=e;if(n){var p=n.send_pixel,q=n.options,r=m.H;if(p){var u=p||[];if(Array.isArray(u))for(var v=Qc(q)?q:{},t=l(u),w=t.next();!w.done;w=t.next())r(w.value,
v)}var x=n.create_iframe,y=n.options,B=m.C;if(x&&B){var C=x||[];if(Array.isArray(C))for(var D=Qc(y)?y:{},G=l(C),K=G.next();!K.done;K=G.next())B(K.value,D)}}b=b.substring(c+2);c=b.indexOf("\n\n")}a.j=b};function sI(a){var b=a.search;return a.protocol+"//"+a.hostname+a.pathname+(b?b+"&richsstsse":"?richsstsse")};
var tI=function(a,b){return a.replace(/\$\{([^\}]+)\}/g,function(c,d){return b[d]||c})},uI=function(a){var b={},c="",d=a.pathname.indexOf("/g/collect");d>=0&&(c=a.pathname.substring(0,d));b.transport_url=a.protocol+"//"+a.hostname+c;return b},vI=function(a,b,c){var d=0,e=new A.XMLHttpRequest;e.withCredentials=!0;e.onprogress=function(f){if(e.status===200){var g=e.responseText.substring(d);d=f.loaded;rI(c,g)}};e.open(b?"POST":"GET",a);e.setAttributionReporting&&e.setAttributionReporting({eventSourceEligible:!1,triggerEligible:!0});
e.send(b)},xI=function(a,b,c){var d=Object.assign({},wI);b&&(d.body=b,d.method="POST");A.fetch(a,d).then(function(e){if(e.ok&&e.body){var f=e.body.getReader(),g=new TextDecoder;return new Promise(function(k){function m(){f.read().then(function(n){var p;p=n.done;var q=g.decode(n.value,{stream:!p});rI(c,q);p?k():m()}).catch(function(){k()})}m()})}}).catch(function(){R(116)&&(a+="&_z=retryFetch",b?xc(a,b):wc(a))})},yI=function(a,b){return qI(new pI(function(c,d){var e=tI(c,a);b&&(e=e.replace("_is_sw=0",
b));var f={};d.attribution_reporting&&(f.attributionsrc="");pc(e,void 0,void 0,f)}),function(c,d){var e=tI(c,a),f=d.dedupe_key;f&&yv(e,f)})},zI=function(a,b,c,d){var e=yI(c,d);Ac()?xI(a,b,e):vI(a,b,e)},AI=function(a,b){var c=Hj(a),d=uI(c),e=sI(c);R(121)?fv(e,b,d,function(f){zI(e,b,d,f)}):zI(e,b,d)},wI=Object.freeze({cache:"no-store",credentials:"include",method:"GET",keepalive:!0,redirect:"follow"});
var BI=function(a,b,c){var d=a+"?"+b;c?xc(d,c):wc(d)},DI=function(a,b,c,d){var e=b,f=Cc();f!==void 0&&(e+="&tfd="+Math.round(f));b=e;var g=a+"?"+b;CI&&(d=!sb(g,fI())&&!sb(g,eI()));if(d&&!uH)AI(g,c);else{var k=b;Ac()?zc(a+"?"+k,c,{Fk:!0})||BI(a,k,c):BI(a,k,c)}},EI=function(a,b){function c(v){n.push(v+"="+encodeURIComponent(""+a.ma[v]))}var d=b.xn,e=b.yn,f=b.zm,g=b.Pm,k=b.Om,m=b.qn;if(d||e){var n=[];a.ma._ng&&c("_ng");c("tid");c("cid");c("gtm");n.push("aip=1");a.Zc.uid&&!k&&n.push("uid="+encodeURIComponent(""+
a.Zc.uid));var p=function(){c("dma");a.ma.dma_cps!=null&&c("dma_cps");a.ma.gcs!=null&&c("gcs");c("gcd");a.ma.npa!=null&&c("npa")};p();a.ma.frm!=null&&c("frm");d&&(gj()&&n.push("tag_exp="+gj()),BI("https://stats.g.doubleclick.net/g/collect","v=2&"+n.join("&")),n.join("&"));if(e){var q=function(){var v=Av()+"/td/ga/rul?";n=[];c("tid");n.push("gacid="+encodeURIComponent(String(a.ma.cid)));c("gtm");p();c("pscdl");a.ma._ng!=null&&c("_ng");n.push("aip=1");n.push("fledge=1");a.ma.frm!=null&&c("frm");gj()&&
n.push("tag_exp="+gj());n.push("z="+db());var t=v+n.join("&");yv(t,a.ma.tid)};gj()&&n.push("tag_exp="+gj());n.push("z="+db());if(!g){var r=f&&sb(f,"google.")&&f!=="google.com"?"https://www.%/ads/ga-audiences?v=1&t=sr&slf_rd=1&_r=4&".replace("%",f):void 0;if(r){var u=r+n.join("&");pc(u)}}R(94)&&m&&!uH&&q()}}},CI=!1;var FI=function(){this.K=1;this.P={};this.H=
-1;this.C=new Yf};FI.prototype.j=function(a,b){var c=this,d=new oI(a,this.P,b),e=vH(a);e&&this.C.P(d)||this.flush();if(e&&this.C.add(d)){if(this.H<0){var f=A.setTimeout,g;Ju(a)?GI?(GI=!1,g=HI):g=II:g=5E3;this.H=f.call(A,function(){c.flush()},g)}}else{var k=ag(d,this.K++);DI(d.baseUrl,k.params,k.body,d.H);var m=a.metadata.create_dc_join,n=a.metadata.create_google_join,p=V(a.m,N.g.Ea)!==!1,q=Yo(a.m),r={eventId:a.m.eventId,priorityId:a.m.priorityId},u=a.j[N.g.ph],v={xn:m,yn:n,zm:Cl(),ko:p,jo:q,Pm:yl(),
Om:a.metadata.euid_mode_enabled,oo:r,qn:u,m:a.m};EI(d,v)}hx(a.m.eventId,a.eventName)};FI.prototype.add=function(a){!a.metadata.euid_mode_enabled||uH||R(113)?this.j(a):this.aa(a)};FI.prototype.flush=function(){if(this.C.events.length){var a=cg(this.C,this.K++);DI(this.C.baseUrl,a.params,a.body,this.C.C);this.C=new Yf;this.H>=0&&(A.clearTimeout(this.H),this.H=-1)}};FI.prototype.aa=function(a){var b=this,c=Iu(a);if(Bi(c)){var d=oi(c,R(86));d?d.then(function(g){b.j(a,g)},function(){b.j(a)}):this.j(a)}else{var e=
Ai(c);if(R(86)){var f=mi(e);f?f.then(function(g){b.j(a,g)},function(){b.j(a,e)}):this.j(a,e)}else this.j(a,e)}};var HI=Wh('',500),II=Wh('',5E3),GI=!0;
var JI=function(a,b,c){c===void 0&&(c={});if(b==null)return c;if(typeof b==="object")for(var d=l(Object.keys(b)),e=d.next();!e.done;e=d.next()){var f=e.value;JI(a+"."+f,b[f],c)}else c[a]=b;return c},KI=function(a){for(var b={},c=l(a),d=c.next();!d.done;d=c.next()){var e=d.value;b[e]=!!W(e)}return b},MI=function(a,b){var c=LI.filter(function(e){return!W(e)});if(c.length){var d=KI(c);bm(c,function(){for(var e=KI(c),f=[],g=l(c),k=g.next();!k.done;k=g.next()){var m=k.value;!d[m]&&e[m]&&f.push(m);e[m]&&
(d[m]=!0)}if(f.length){b.metadata.is_consent_update=!0;var n=f.map(function(p){return vh[p]}).join(".");n&&Fu(b,"gcut",n);a(b)}})}},NI=function(a){R(141)&&Ju(a)&&Fu(a,"navt",Dc())},OI=function(a){R(140)&&Ju(a)&&Fu(a,"lpc",Oq())},PI=function(a){if(R(142)&&Ju(a)){var b=V(a.m,N.g.Tb),c;b===!0&&(c="1");b===!1&&(c="0");c&&Fu(a,"rdp",c)}},QI=function(a){R(138)&&Ju(a)&&V(a.m,N.g.ie,!0)===!1&&(a.j[N.g.ie]=0)},RI=function(a,b){if(Ju(b)){var c=b.metadata.is_conversion;(b.eventName==="page_view"||c)&&MI(a,b)}},
SI=function(a){if(Ju(a)&&a.eventName===N.g.ed&&a.metadata.is_consent_update){var b=a.j[N.g.Kg];b&&(Fu(a,"gcut",b),Fu(a,"syn",1))}},TI=function(a){R(139)&&Ju(a)&&V(a.m,N.g.Ea)!==!1&&wv("join-ad-interest-group")&&Za(cc.joinAdInterestGroup)&&Fu(a,"flg",1)},UI=function(a){Ju(a)&&(a.metadata.speculative=!1)},VI=function(a){Ju(a)&&(a.metadata.speculative&&Fu(a,"sp",1),a.metadata.is_syn&&Fu(a,"syn",1),a.metadata.em_event&&(Fu(a,"em_event",1),Fu(a,"sp",1)))},WI=function(a){if(Ju(a)){var b=Zi;b&&Fu(a,"tft",
Number(b))}},XI=function(a){function b(e){var f=JI(N.g.Ha,e);gb(f,function(g,k){a.j[g]=k})}if(Ju(a)){var c=Gu(a,"ccd_add_1p_data",!1)?1:0;Fu(a,"ude",c);var d=V(a.m,N.g.Ha);d!==void 0?(b(d),a.j[N.g.Gd]="c"):b(a.metadata.user_data);a.metadata.user_data=void 0}},YI=function(a){if(Ju(a)){var b=ys();b&&Fu(a,"us_privacy",b);var c=So();c&&Fu(a,"gdpr",c);var d=Ro();d&&Fu(a,"gdpr_consent",d)}},ZI=function(a){Ju(a)&&gl()&&V(a.m,N.g.la)&&Fu(a,"adr",1)},$I=function(a){if(Ju(a)){var b=hI?Al():"";b&&Fu(a,"gcsub",
b)}},aJ=function(a){if(Ju(a)){V(a.m,N.g.hb,void 0,4)===!1&&Fu(a,"ngs",1);yl()&&Fu(a,"ga_rd",1);OF()||Fu(a,"ngst",1);var b=Cl();b&&Fu(a,"etld",b)}},bJ=function(a){},cJ=function(a){Ju(a)&&gl()&&Fu(a,"rnd",es())},LI=[N.g.N,N.g.O];
var dJ=function(a,b){var c;a:{var d=QH(a);if(d){if(OH(d,a)){c=d;break a}U(25);a.isAborted=!0}c=void 0}var e=c;return{clientId:GH(a,b),Xa:e}},eJ=function(a,b,c,d,e){var f=Ws(V(a.m,N.g.ib));if(V(a.m,N.g.Rb)&&V(a.m,N.g.qc))f?EH(a,f,1):(U(127),a.isAborted=!0);else{var g=f?1:8;a.metadata.is_new_to_site=!1;f||(f=IH(a),g=3);f||(f=b,g=5);if(!f){var k=W(N.g.U),m=BH();f=!m.from_cookie||k?m.vid:void 0;g=6}f?f=""+f:(f=Gp(),g=7,a.metadata.is_first_visit=a.metadata.is_new_to_site=!0);EH(a,f,g)}var n=Math.floor(a.metadata.event_start_timestamp_ms/
1E3),p=void 0;a.metadata.is_new_to_site||(p=PH(a)||c);var q=ib(V(a.m,N.g.Ed,30));q=Math.min(475,q);q=Math.max(5,q);var r=ib(V(a.m,N.g.Vf,1E4)),u=JH(p);a.metadata.is_first_visit=!1;a.metadata.is_session_start=!1;a.metadata.join_timer_sec=0;u&&u.ei&&(a.metadata.join_timer_sec=Math.max(0,u.ei-Math.max(0,n-u.rf)));var v=!1;u||(v=a.metadata.is_first_visit=!0,u={sessionId:String(n),Yc:1,Xd:!1,rf:n,Uc:!1,Md:void 0});n>u.rf+q*60&&(v=!0,u.sessionId=String(n),u.Yc++,u.Xd=!1,u.Md=void 0);if(v)a.metadata.is_session_start=
!0,d.Fm(a);else if(d.xm()>r||a.eventName===N.g.ic)u.Xd=!0;a.metadata.euid_mode_enabled?V(a.m,N.g.Ba)?u.Uc=!0:(u.Uc&&!R(12)&&(u.Md=void 0),u.Uc=!1):u.Uc=!1;var t=u.Md;if(a.metadata.euid_mode_enabled||Ju(a)){var w=V(a.m,N.g.ue),x=w?1:8;w||(w=t,x=4);w||(w=Fp(),x=7);var y=w.toString(),B=x,C=a.metadata.enhanced_client_id_source;if(C===void 0||B<=C)a.j[N.g.ue]=y,a.metadata.enhanced_client_id_source=B}e?(a.copyToHitData(N.g.pb,u.sessionId),a.copyToHitData(N.g.Ge,u.Yc),a.copyToHitData(N.g.Fe,u.Xd?1:0)):(a.j[N.g.pb]=
u.sessionId,a.j[N.g.Ge]=u.Yc,a.j[N.g.Fe]=u.Xd?1:0);a.metadata[N.g.Nf]=u.Uc?1:0};var fJ=window,gJ=document,hJ=function(a){var b=fJ._gaUserPrefs;if(b&&b.ioo&&b.ioo()||gJ.documentElement.hasAttribute("data-google-analytics-opt-out")||a&&fJ["ga-disable-"+a]===!0)return!0;try{var c=fJ.external;if(c&&c._gaUserPrefs&&c._gaUserPrefs=="oo")return!0}catch(p){}for(var d=[],e=String(gJ.cookie).split(";"),f=0;f<e.length;f++){var g=e[f].split("="),k=g[0].replace(/^\s*|\s*$/g,"");if(k&&k=="AMP_TOKEN"){var m=g.slice(1).join("=").replace(/^\s*|\s*$/g,"");m&&(m=decodeURIComponent(m));d.push(m)}}for(var n=
0;n<d.length;n++)if(d[n]=="$OPT_OUT")return!0;return gJ.getElementById("__gaOptOutExtension")?!0:!1};
var jJ=function(a){return!a||iJ.test(a)||nh.hasOwnProperty(a)},kJ=function(a){var b=N.g.Ub,c;c||(c=function(){});a.j[b]!==void 0&&(a.j[b]=c(a.j[b]))},lJ=function(a){var b=a.indexOf("?"),c=b===-1?a:a.substring(0,b);try{c=decodeURIComponent(c)}catch(d){}return b===-1?c:""+c+a.substring(b)},mJ=function(a){V(a.m,N.g.fb)&&(W(N.g.U)||V(a.m,N.g.ib)||(a.j[N.g.Vj]=!0));var b;var c;c=c===void 0?3:c;var d=A.location.href;if(d){var e=Hj(d).search.replace("?",""),f=Aj(e,"_gl",!1,!0)||"";b=f?cq(f,c)!==void 0:!1}else b=
!1;b&&Ju(a)&&Fu(a,"glv",1);if(a.eventName!==N.g.da)return{};V(a.m,N.g.fb)&&Hr(["aw","dc"]);Jr(["aw","dc"]);var g=XH(a),k=VH(a);return Object.keys(g).length?g:k},nJ=function(a){var b=xb(Om(a.m,N.g.ia,1),".");b&&(a.j[N.g.ob]=b);var c=xb(Om(a.m,N.g.ia,2),".");c&&(a.j[N.g.nb]=c)},sv={lm:"",Hn:Number("")},oJ={},pJ=(oJ[N.g.jd]=1,oJ[N.g.kd]=1,oJ[N.g.ld]=1,oJ[N.g.md]=1,oJ[N.g.od]=1,oJ[N.g.pd]=1,oJ),iJ=/^(_|ga_|google_|gtag\.|firebase_).*$/,qJ=[Cs,
nJ,kt],rJ=function(a){this.H=a;this.j=this.Xa=this.clientId=void 0;this.Va=this.P=!1;this.Eb=0;this.K=!1;this.aa=new FI;this.C=new xH};h=rJ.prototype;h.on=function(a,b,c){var d=this,e=um(this.H);if(e)if(c.eventMetadata.is_external_event&&a.charAt(0)==="_")c.onFailure();else{a!==N.g.da&&a!==N.g.Za&&jJ(a)&&U(58);sJ(c.j);var f=new uD(e,a,c);f.metadata.event_start_timestamp_ms=b;var g=[N.g.U],k=Ju(f);f.metadata.is_server_side_destination=k;if(Gu(f,N.g.Mc,V(f.m,N.g.Mc))||k)g.push(N.g.N),g.push(N.g.O);
tv(function(){dm(function(){d.pn(f)},g)});this.mn(a,c,f)}else c.onFailure()};h.mn=function(a,b,c){var d=um(this.H);if(R(83)&&a===N.g.da&&Gu(c,"ga4_ads_linked",!1)){var e=function(){for(var k=l(qJ),m=k.next();!m.done;m=k.next()){var n=m.value;n(f);if(f.isAborted)break}f.metadata.speculative||f.isAborted||uw(f)},f=new uD(d,a,b);f.metadata.hit_type="page_view";f.metadata.speculative=!0;f.metadata.is_server_side_destination=c.metadata.is_server_side_destination;var g=[N.g.N,N.g.O];dm(function(){e();W(g)||
cm(function(k){var m,n;m=k.consentEventId;n=k.consentPriorityId;f.metadata.consent_updated=!0;f.metadata.consent_event_id=m;f.metadata.consent_priority_id=n;e()},g)},g)}};h.pn=function(a){var b=this;this.j=a;try{tJ(a);uJ(a);vJ(a);wJ(a);R(127)&&(a.isAborted=!0);Is(a);var c={};bI(a,c);if(a.isAborted){a.m.onFailure();AH();return}var d=c.Zl;c.hm===0&&yH(25);d===0&&yH(26);xJ(a);yJ(a);this.Hl(a);this.C.En(a);zJ(a);AJ(a);BJ(a);this.Lk(mJ(a));var e=a.eventName===N.g.da;e&&(this.K=!0);CJ(a);e&&!a.isAborted&&
this.Eb++>0&&yH(17);DJ(a);eJ(a,this.clientId,this.Xa,this.C,!this.Va);EJ(a);FJ(a);GJ(a);HJ(a);IJ(a);JJ(a);KJ(a);LJ(a);YH(a);cI(a);cJ(a);bJ(a);aJ(a);$I(a);ZI(a);YI(a);WI(a);VI(a);TI(a);SI(a);QI(a);PI(a);OI(a);NI(a);ZH(a);$H(a);MJ(a);NJ(a);OJ(a);PJ(a);Ks(a);Js(a);QJ(a);RJ(a);kt(a);SJ(a);XI(a);UI(a);TJ(a);!this.K&&a.metadata.em_event&&yH(18);zH(a);if(a.metadata.speculative||a.isAborted){a.m.onFailure();AH();return}this.Lk(dJ(a,this.clientId));this.Va=!0;this.Bn(a);UJ(a);RI(function(f){b.rk(f)},a);this.C.wi();
VJ(a);if(a.isAborted){a.m.onFailure();AH();return}this.rk(a);a.m.onSuccess()}catch(f){a.m.onFailure()}AH()};h.rk=function(a){this.aa.add(a)};h.Lk=function(a){var b=a.clientId,c=a.Xa;b&&c&&(this.clientId=b,this.Xa=c)};h.flush=function(){this.aa.flush()};h.Bn=function(a){var b=this;if(!this.P){var c=W(N.g.O),d=W(N.g.U);bm([N.g.O,N.g.U],function(){var e=W(N.g.O),f=W(N.g.U),g=!1,k={},m={};if(d!==f&&b.j&&b.Xa&&b.clientId){var n=b.clientId,p;var q=JH(b.Xa);p=q?q.Md:void 0;if(f){var r=IH(b.j);if(r){b.clientId=
r;var u=PH(b.j);u&&(b.Xa=LH(u,b.Xa,b.j))}else FH(b.clientId,b.j),DH(b.clientId,!0);OH(b.Xa,b.j);g=!0;k[N.g.bh]=n;R(75)&&p&&(k[N.g.yl]=p)}else b.Xa=void 0,b.clientId=void 0,A.gaGlobal={}}e&&!c&&(g=!0,m.is_consent_update=!0,k[N.g.Kg]=vh[N.g.O]);if(g){var v=Vz(b.H,N.g.ed,k);Xz(v,a.m.eventId,{eventMetadata:m})}d=f;c=e});this.P=!0}};h.Hl=function(a){a.eventName!==N.g.Za&&this.C.Gl(a)};var vJ=function(a){var b=E.location.protocol;b!=="http:"&&b!=="https:"&&(U(29),a.isAborted=!0)},wJ=function(a){cc&&cc.loadPurpose===
"preview"&&(U(30),a.isAborted=!0)},xJ=function(a){var b={prefix:String(V(a.m,N.g.Fa,"")),path:String(V(a.m,N.g.lb,"/")),flags:String(V(a.m,N.g.cb,"")),domain:String(V(a.m,N.g.Na,"auto")),Kb:Number(V(a.m,N.g.Ta,63072E3))};a.metadata.cookie_options=b},zJ=function(a){if(a.metadata.is_merchant_center)a.metadata.euid_mode_enabled=!1;else if(Gu(a,"ccd_add_1p_data",!1)||Gu(a,"ccd_add_ec_stitching",!1))a.metadata.euid_mode_enabled=!0},AJ=function(a){if(a.metadata.euid_mode_enabled&&Gu(a,"ccd_add_1p_data",
!1)){var b=a.m.C[N.g.He];if(xj(b)){var c=V(a.m,N.g.Ha);c===null?a.metadata.user_data_from_code=null:(b.enable_code&&Qc(c)&&(a.metadata.user_data_from_code=c),Qc(b.selectors)&&!a.metadata.user_data_from_manual&&(a.metadata.user_data_from_manual=vj(b.selectors)))}}},BJ=function(a){if(R(84)&&!R(83)&&Gu(a,"ga4_ads_linked",!1)&&a.eventName===N.g.da){var b=V(a.m,N.g.Aa)!==!1;if(b){var c=zs(a);c.Kb&&(c.Kb=Math.min(c.Kb,7776E3));As({Ld:b,Td:Us(V(a.m,N.g.sa)),Zd:!!V(a.m,N.g.fb),yc:c})}}},MJ=function(a){if(!ov(A))U(87);
else if(uv!==void 0){U(85);var b=mv();b?V(a.m,N.g.Ee)&&!Ju(a)||rv(b,a):U(86)}},CJ=function(a){a.eventName===N.g.da&&(V(a.m,N.g.Oa,!0)?(a.m.j[N.g.ia]&&(a.m.H[N.g.ia]=a.m.j[N.g.ia],a.m.j[N.g.ia]=void 0,a.j[N.g.ia]=void 0),a.eventName=N.g.ic):a.isAborted=!0)},yJ=function(a){function b(c,d){lh[c]||d===void 0||(a.j[c]=d)}gb(a.m.H,b);gb(a.m.j,b)},EJ=function(a){var b=Pm(a.m),c=function(d,e){pJ[d]&&(a.j[d]=e)};Qc(b[N.g.nd])?gb(b[N.g.nd],function(d,e){c((N.g.nd+"_"+d).toLowerCase(),e)}):gb(b,c)},DJ=nJ,UJ=
function(a){if(R(121)&&W(N.g.U)){Ju(a)&&(a.metadata.is_sgtm_service_worker=!0,Ju(a)&&Fu(a,"sw_exp",1));a:{}}},QJ=function(a){if(a.eventName===N.g.Za){var b=V(a.m,N.g.Bb);V(a.m,N.g.Pb)(a.j[b]||V(a.m,b));a.isAborted=!0}},FJ=function(a){if(!V(a.m,N.g.qc)||
!V(a.m,N.g.Rb)){var b=a.copyToHitData,c=N.g.wa,d="",e=E.location;if(e){var f=e.pathname||"";f.charAt(0)!=="/"&&(f="/"+f);var g=e.search||"";if(g&&g[0]==="?")for(var k=g.substring(1).split("&"),m=0;m<k.length;++m){var n=k[m].split("=");n&&n.length===2&&n[0]==="wbraid"&&(g=g.replace(/([?&])wbraid=[^&]+/,"$1wbraid="+zb(n[1])))}d=e.protocol+"//"+e.hostname+f+g}b.call(a,c,d,lJ);var p=a.copyToHitData,q=N.g.Ga,r;a:{var u=op("_opt_expid",void 0,void 0,N.g.U)[0];if(u){var v=decodeURIComponent(u).split("$");
if(v.length===3){r=v[2];break a}}if(Mi.ga4_referrer_override!==void 0)r=Mi.ga4_referrer_override;else{var t=oj("gtm.gtagReferrer."+a.target.destinationId),w=E.referrer;r=t?""+t:w}}p.call(a,q,r||void 0,lJ);a.copyToHitData(N.g.eb,E.title);a.copyToHitData(N.g.Ua,(cc.language||"").toLowerCase());var x=ut();a.copyToHitData(N.g.Ub,x.width+"x"+x.height);R(136)&&a.copyToHitData(N.g.Cd,void 0,lJ);R(91)&&hs()&&a.copyToHitData(N.g.zd,"1")}},IJ=function(a){a.metadata.create_dc_join=!1;a.metadata.create_google_join=
!1;if(!(ij()||R(6)&&Ju(a)||a.metadata.is_merchant_center||V(a.m,N.g.hb)===!1)&&OF()&&W(N.g.N)){var b=Ku(a);(a.metadata.is_session_start||V(a.m,N.g.bh))&&(a.metadata.create_dc_join=!!b);var c=a.metadata.join_timer_sec;b&&(c||0)===0&&(a.metadata.join_timer_sec=60,a.metadata.create_google_join=!0)}},LJ=function(a){a.copyToHitData(N.g.Yf);for(var b=V(a.m,N.g.Pf)||[],c=0;c<b.length;c++){var d=b[c];if(d.rule_result){a.copyToHitData(N.g.Yf,d.traffic_type);yH(3);break}}},VJ=function(a){a.copyToHitData(N.g.eh);
V(a.m,N.g.Ee)&&(a.j[N.g.Ee]=!0,Ju(a)||kJ(a))},RJ=function(a){a.copyToHitData(N.g.Ba);a.copyToHitData(N.g.qb)},GJ=function(a){Gu(a,"google_ng")&&!yl()?a.copyToHitData(N.g.Lc,1):Ls(a)},OJ=function(a){if(V(a.m,N.g.Ea)!==!1&&Yo(a.m)){var b=Ku(a),c=V(a.m,N.g.hb);b&&c!==!1&&OF()&&W(N.g.N)&&cl(N.g.O)&&el(["ads"]).ads&&xv()&&(a.j[N.g.ph]=!0)}},TJ=function(a){var b=V(a.m,N.g.Rb);b&&yH(12);a.metadata.em_event&&yH(14);var c=sk(tk());(b||Ek(c)||c&&c.parent&&c.context&&c.context.source===5)&&yH(19)},tJ=function(a){if(hJ(a.target.destinationId))U(28),
a.isAborted=!0;else if(R(135)){var b=rk();if(b&&Array.isArray(b.destinations))for(var c=0;c<b.destinations.length;c++)if(hJ(b.destinations[c])){U(125);a.isAborted=!0;break}}},NJ=function(a){wv("attribution-reporting")&&(a.j[N.g.kc]="1")},uJ=function(a){if(sv.lm.replace(/\s+/g,"").split(",").indexOf(a.eventName)>=0)a.isAborted=!0;else{var b=Hu(a);b&&b.blacklisted&&(a.isAborted=!0)}},JJ=function(a){var b=function(c){return!!c&&c.conversion};a.metadata.is_conversion=b(Hu(a));a.metadata.is_first_visit&&
(a.metadata.is_first_visit_conversion=b(Hu(a,"first_visit")));a.metadata.is_session_start&&(a.metadata.is_session_start_conversion=b(Hu(a,"session_start")))},KJ=function(a){ph.hasOwnProperty(a.eventName)&&(a.metadata.is_ecommerce=!0,a.copyToHitData(N.g.fa),a.copyToHitData(N.g.Ca))},SJ=function(a){if(R(90)&&(!R(13)||!Ju(a))&&a.metadata.is_conversion&&W(N.g.N)&&Gu(a,"ga4_ads_linked",!1)){var b=zs(a),c=er(b.prefix),d=rs(c);a.j[N.g.fd]=d.ng;a.j[N.g.hd]=d.pg;a.j[N.g.gd]=d.og}},PJ=function(a){if(R(109)){var b=
Al();b&&(a.metadata.ga4_collection_subdomain=b)}},HJ=function(a){a.metadata.is_google_signals_allowed=Ku(a)&&V(a.m,N.g.hb)!==!1&&OF()&&!yl()};function sJ(a){gb(a,function(c){c.charAt(0)==="_"&&delete a[c]});var b=a[N.g.qb]||{};gb(b,function(c){c.charAt(0)==="_"&&delete b[c]})}var XJ=function(a){if(!WJ(a)){var b=!1,c=function(){!b&&WJ(a)&&(b=!0,rc(E,"visibilitychange",c),R(4)&&rc(E,"prerenderingchange",c),U(55))};qc(E,"visibilitychange",c);R(4)&&qc(E,"prerenderingchange",c);U(54)}},WJ=function(a){if(R(4)&&"prerendering"in E?E.prerendering:E.visibilityState==="prerender")return!1;a();return!0};function YJ(a,b){XJ(function(){var c=um(a);if(c){var d=ZJ(c,b);vn(a,d)}});}function ZJ(a,b){var c=function(){};var d=new rJ(a.id),e=a.prefix==="MC";c=function(f,g,k,m){e&&(m.eventMetadata.is_merchant_center=!0);d.on(g,k,m)};gk||$J(a,d,b);return c}
function $J(a,b,c){var d=b.C,e={},f={eventId:c,eventMetadata:(e.batch_on_navigation=!0,e)};R(51)&&(f.deferrable=!0);d.rn(function(){uH=!0;wn.flush();d.qg()>=1E3&&cc.sendBeacon!==void 0&&xn(N.g.ed,{},a.id,f);b.flush();d.Mk(function(){uH=!1;d.Mk()})});};var aK=ZJ;function cK(a,b,c){var d=this;}cK.F="internal.gtagConfig";function dK(){var a={};return a};
function fK(a,b){}fK.R="gtagSet";function gK(){var a={};return a};function hK(a,b){}hK.R="injectHiddenIframe";var iK=DB();
function jK(a,b,c,d,e){var f=this;}jK.F="internal.injectHtml";var nK={};
function pK(a,b,c,d){}var qK={dl:1,id:1},rK={};
function sK(a,b,c,d){}pK.R="injectScript";sK.F="internal.injectScript";function tK(a){var b=!0;return b}tK.R="isConsentGranted";function uK(a){var b=!1;return b}uK.F="internal.isDebugMode";function vK(){return zl()}vK.F="internal.isDmaRegion";function wK(a){var b=!1;return b}wK.F="internal.isEntityInfrastructure";function xK(){var a=!1;return a}xK.F="internal.isLandingPage";function yK(){var a=Xg(function(b){SB(this).log("error",b)});a.R="JSON";return a};function zK(a){var b=void 0;return dd(b)}zK.F="internal.legacyParseUrl";function AK(){return!1}
var BK={getItem:function(a){var b=null;return b},setItem:function(a,b){return!1},removeItem:function(a){}};function CK(){}CK.R="logToConsole";function DK(a,b){}DK.F="internal.mergeRemoteConfig";function EK(a,b,c){c=c===void 0?!0:c;var d=[];return dd(d)}EK.F="internal.parseCookieValuesFromString";function FK(a){var b=void 0;if(typeof a!=="string")return;a&&sb(a,"//")&&(a=E.location.protocol+a);if(typeof URL==="function"){var c;a:{var d;try{d=new URL(a)}catch(w){c=void 0;break a}for(var e={},f=Array.from(d.searchParams),g=0;g<f.length;g++){var k=f[g][0],m=f[g][1];e.hasOwnProperty(k)?typeof e[k]==="string"?e[k]=[e[k],m]:e[k].push(m):e[k]=m}c=dd({href:d.href,origin:d.origin,protocol:d.protocol,username:d.username,password:d.password,host:d.host,
hostname:d.hostname,port:d.port,pathname:d.pathname,search:d.search,searchParams:e,hash:d.hash})}return c}var n;try{n=Hj(a)}catch(w){return}if(!n.protocol||!n.host)return;var p={};if(n.search)for(var q=n.search.replace("?","").split("&"),r=0;r<q.length;r++){var u=q[r].split("="),v=u[0],t=decodeURIComponent(u.splice(1).join("=")).replace(/\+/g," ");p.hasOwnProperty(v)?typeof p[v]==="string"?p[v]=[p[v],t]:p[v].push(t):p[v]=t}n.searchParams=p;n.origin=n.protocol+"//"+n.host;n.username="";n.password=
"";b=dd(n);return b}FK.R="parseUrl";function GK(a){}GK.F="internal.processAsNewEvent";function HK(a,b,c){var d;return d}HK.F="internal.pushToDataLayer";function IK(a){var b=!1;J(this.getName(),["permission:!string"],[a]);for(var c=Array.prototype.slice.call(arguments,0),d=0;d<c.length;++d)c[d]=I(c[d],this.D,1);c.unshift(this);try{L.apply(null,c),b=!0}catch(e){return!1}return b}IK.R="queryPermission";function JK(){var a="";return a}JK.R="readCharacterSet";function KK(){return Li.vb}KK.F="internal.readDataLayerName";function LK(){var a="";return a}LK.R="readTitle";function MK(a,b){var c=this;J(this.getName(),["destinationId:!string","callback:!Fn"],arguments),lt(a,function(d){b.invoke(c.D,dd(d,c.D,1))});}MK.F="internal.registerCcdCallback";function NK(a){return!0}
NK.F="internal.registerDestination";var OK=["config","event","get","set"];function PK(a,b,c){}PK.F="internal.registerGtagCommandListener";function QK(a,b){var c=!1;return c}QK.F="internal.removeDataLayerEventListener";function RK(a,b){}
RK.F="internal.removeFormData";function SK(){}SK.R="resetDataLayer";function TK(a,b,c){var d=void 0;return d}TK.F="internal.scrubUrlParams";function UK(a){}UK.F="internal.sendAdsHit";function VK(a,b,c,d){J(this.getName(),["destinationIds:!*","eventName:!*","eventParameters:?PixieMap","messageContext:?PixieMap"],arguments);var e=c?I(c):{},f=I(a);Array.isArray(f)||(f=[f]);b=String(b);var g=d?I(d):{},k=SB(this);g.originatingEntity=IC(k);var m=f;for(var n=0;n<m.length;n++){var p=m[n];if(typeof p==="string"){var q=
{};Rc(e,q);var r={};Rc(g,r);var u=Vz(p,b,q);Xz(u,g.eventId||k.eventId,r)}}}VK.F="internal.sendGtagEvent";function WK(a,b,c){}WK.R="sendPixel";function XK(a,b){}XK.F="internal.setAnchorHref";function YK(a){}YK.F="internal.setContainerConsentDefaults";function ZK(a,b,c,d){var e=this;d=d===void 0?!0:d;var f=!1;return f}ZK.R="setCookie";function $K(a){}$K.F="internal.setCorePlatformServices";function aL(a,b){}aL.F="internal.setDataLayerValue";function bL(a){}bL.R="setDefaultConsentState";function cL(a,b){}cL.F="internal.setDelegatedConsentType";function dL(a,b){}dL.F="internal.setFormAction";function eL(a,b,c){}eL.F="internal.setInCrossContainerData";function fL(a,b,c){return!1}fL.R="setInWindow";function gL(a,b,c){J(this.getName(),["targetId:!string","name:!string","value:!*"],arguments);var d=tt(a)||{};d[b]=I(c,this.D);var e=a;rt||st();qt[e]=d;}gL.F="internal.setProductSettingsParameter";function hL(a,b,c){J(this.getName(),["targetId:!string","name:!string","value:!*"],arguments);for(var d=b.split("."),e=zn(a),f=0;f<d.length-1;f++){if(e[d[f]]===void 0)e[d[f]]={};else if(!Qc(e[d[f]]))throw Error("setRemoteConfigParameter failed, path contains a non-object type: "+d[f]);e=e[d[f]]}e[d[f]]=I(c,this.D,1);}hL.F="internal.setRemoteConfigParameter";function iL(a,b,c,d){var e=this;}iL.R="sha256";function jL(a,b,c){}
jL.F="internal.sortRemoteConfigParameters";function kL(a,b){var c=void 0;return c}kL.F="internal.subscribeToCrossContainerData";var lL={},mL={};lL.getItem=function(a){var b=null;L(this,"access_template_storage");var c=SB(this).rb();mL[c]&&(b=mL[c].hasOwnProperty("gtm."+a)?mL[c]["gtm."+a]:null);return b};lL.setItem=function(a,b){L(this,"access_template_storage");var c=SB(this).rb();mL[c]=mL[c]||{};mL[c]["gtm."+a]=b;};
lL.removeItem=function(a){L(this,"access_template_storage");var b=SB(this).rb();if(!mL[b]||!mL[b].hasOwnProperty("gtm."+a))return;delete mL[b]["gtm."+a];};lL.clear=function(){L(this,"access_template_storage"),delete mL[SB(this).rb()];};lL.R="templateStorage";function nL(a,b){var c=!1;return c}nL.F="internal.testRegex";function oL(a){var b;return b};function pL(a){var b;return b}pL.F="internal.unsiloId";function qL(a,b){var c;return c}qL.F="internal.unsubscribeFromCrossContainerData";function rL(a){}rL.R="updateConsentState";var sL;function tL(a,b,c){sL=sL||new hh;sL.add(a,b,c)}function uL(a,b){var c=sL=sL||new hh;if(c.j.hasOwnProperty(a))throw Error("Attempting to add a private function which already exists: "+a+".");if(c.contains(a))throw Error("Attempting to add a private function with an existing API name: "+a+".");c.j[a]=Za(b)?Eg(a,b):Fg(a,b)}
function vL(){return function(a){var b;var c=sL;if(c.contains(a))b=c.get(a,this);else{var d;if(d=c.j.hasOwnProperty(a)){var e=!1,f=this.D.j;if(f){var g=f.rb();if(g){g.indexOf("__cvt_")!==0&&(e=!0);}}else e=!0;d=e}if(d){var k=c.j.hasOwnProperty(a)?c.j[a]:void 0;
b=k}else throw Error(a+" is not a valid API name.");}return b}};function wL(){var a=function(c){return void uL(c.F,c)},b=function(c){return void tL(c.R,c)};b(MB);b(TB);b(gD);b(iD);b(jD);b(qD);b(sD);b(wD);b(yK());b(yD);b(QG);b(RG);b(jH);b(kH);b(lH);b(rH);b(fK);b(hK);b(pK);b(tK);b(CK);b(FK);b(IK);b(JK);b(LK);b(WK);b(ZK);b(bL);b(fL);b(iL);b(lL);b(rL);tL("Math",Jg());tL("Object",fh);tL("TestHelper",jh());tL("assertApi",Gg);tL("assertThat",Hg);tL("decodeUri",Lg);tL("decodeUriComponent",Mg);tL("encodeUri",Ng);tL("encodeUriComponent",Og);tL("fail",Tg);tL("generateRandom",
Ug);tL("getTimestamp",Vg);tL("getTimestampMillis",Vg);tL("getType",Wg);tL("makeInteger",Yg);tL("makeNumber",Zg);tL("makeString",$g);tL("makeTableMap",ah);tL("mock",dh);tL("mockObject",eh);tL("fromBase64",LG,!("atob"in A));tL("localStorage",BK,!AK());tL("toBase64",oL,!("btoa"in A));a(LB);a(PB);a(jC);a(vC);a(CC);a(HC);a(WC);a(eD);a(hD);a(kD);a(lD);a(mD);a(nD);a(oD);a(pD);a(rD);a(tD);a(vD);a(xD);a(zD);a(BD);a(CD);a(DD);a(ED);a(FD);a(KD);a(SD);a(TD);a(dE);a(iE);a(nE);a(wE);a(BE);a(OE);a(QE);a(dF);a(eF);
a(gF);a(JG);a(KG);a(MG);a(NG);a(OG);a(SG);a(TG);a(UG);a(VG);a(WG);a(XG);a(YG);a(ZG);a($G);a(aH);a(bH);a(dH);a(eH);a(fH);a(gH);a(hH);a(iH);a(mH);a(nH);a(oH);a(pH);a(qH);a(tH);a(cK);a(jK);a(sK);a(uK);a(vK);a(wK);a(xK);a(zK);a(UC);a(DK);a(EK);a(GK);a(HK);a(KK);a(MK);a(NK);a(PK);a(QK);a(RK);a(TK);a(UK);a(VK);a(XK);a(YK);a($K);a(aL);a(cL);a(dL);a(eL);a(gL);a(hL);a(jL);a(kL);a(nL);a(pL);a(qL);uL("internal.CrossContainerSchema",AD());uL("internal.GtagSchema",dK());uL("internal.IframingStateSchema",gK());

return vL()};var JB;function xL(){JB.j.j.H=function(a,b,c){Mi.SANDBOXED_JS_SEMAPHORE=Mi.SANDBOXED_JS_SEMAPHORE||0;Mi.SANDBOXED_JS_SEMAPHORE++;try{return a.apply(b,c)}finally{Mi.SANDBOXED_JS_SEMAPHORE--}}}function yL(a){a&&gb(a,function(b,c){for(var d=0;d<c.length;d++){var e=c[d].replace(/^_*/,"");bj[e]=bj[e]||[];bj[e].push(b)}})};function zL(a){Xz(Sz("developer_id."+a,!0),0,{})};var AL=Array.isArray;function BL(a,b){return Rc(a,b||null)}function X(a){return window.encodeURIComponent(a)}function CL(a,b,c){pc(a,b,c)}function DL(a,b){if(!a)return!1;var c=Bj(Hj(a),"host");if(!c)return!1;for(var d=0;b&&d<b.length;d++){var e=b[d]&&b[d].toLowerCase();if(e){var f=c.length-e.length;f>0&&e.charAt(0)!=="."&&(f--,e="."+e);if(f>=0&&c.indexOf(e,f)===f)return!0}}return!1}
function EL(a,b,c){for(var d={},e=!1,f=0;a&&f<a.length;f++)a[f]&&a[f].hasOwnProperty(b)&&a[f].hasOwnProperty(c)&&(d[a[f][b]]=a[f][c],e=!0);return e?d:null}var NL=A.clearTimeout,OL=A.setTimeout;function PL(a,b,c){if(jp()){b&&H(b)}else return lc(a,b,c)}function QL(){return A.location.href}function RL(a,b){return oj(a,b||2)}function SL(a,b){A[a]=b}function TL(a,b,c){b&&(A[a]===void 0||c&&!A[a])&&(A[a]=b);return A[a]}function UL(a,b){if(jp()){b&&H(b)}else nc(a,b)}
var VL={};var Y={securityGroups:{}};

Y.securityGroups.access_template_storage=["google"],Y.__access_template_storage=function(){return{assert:function(){},M:function(){return{}}}},Y.__access_template_storage.o="access_template_storage",Y.__access_template_storage.isVendorTemplate=!0,Y.__access_template_storage.priorityOverride=0,Y.__access_template_storage.isInfrastructure=!1,Y.__access_template_storage.runInSiloedMode=!1;
Y.securityGroups.v=["google"],Y.__v=function(a){var b=a.vtp_name;if(!b||!b.replace)return!1;var c=RL(b.replace(/\\\./g,"."),a.vtp_dataLayerVersion||1);return c!==void 0?c:a.vtp_defaultValue},Y.__v.o="v",Y.__v.isVendorTemplate=!0,Y.__v.priorityOverride=0,Y.__v.isInfrastructure=!0,Y.__v.runInSiloedMode=!1;

Y.securityGroups.read_event_data=["google"],function(){function a(b,c){return{key:c}}(function(b){Y.__read_event_data=b;Y.__read_event_data.o="read_event_data";Y.__read_event_data.isVendorTemplate=!0;Y.__read_event_data.priorityOverride=0;Y.__read_event_data.isInfrastructure=!1;Y.__read_event_data.runInSiloedMode=!1})(function(b){var c=b.vtp_eventDataAccess,d=b.vtp_keyPatterns||[],e=b.vtp_createPermissionError;return{assert:function(f,g){if(g!=null&&!z(g))throw e(f,{key:g},"Key must be a string.");
if(c!=="any"){try{if(c==="specific"&&g!=null&&hg(g,d))return}catch(k){throw e(f,{key:g},"Invalid key filter.");}throw e(f,{key:g},"Prohibited read from event data.");}},M:a}})}();
Y.securityGroups.detect_youtube_activity_events=["google"],function(){function a(b,c){return{options:{fixMissingApi:!!c.fixMissingApi}}}(function(b){Y.__detect_youtube_activity_events=b;Y.__detect_youtube_activity_events.o="detect_youtube_activity_events";Y.__detect_youtube_activity_events.isVendorTemplate=!0;Y.__detect_youtube_activity_events.priorityOverride=0;Y.__detect_youtube_activity_events.isInfrastructure=!1;Y.__detect_youtube_activity_events.runInSiloedMode=!1})(function(b){var c=!!b.vtp_allowFixMissingJavaScriptApi,
d=b.vtp_createPermissionError;return{assert:function(e,f){if(!c&&f&&f.fixMissingApi)throw d(e,{},"Prohibited option: fixMissingApi.");},M:a}})}();


Y.securityGroups.detect_history_change_events=["google"],function(){function a(){return{}}(function(b){Y.__detect_history_change_events=b;Y.__detect_history_change_events.o="detect_history_change_events";Y.__detect_history_change_events.isVendorTemplate=!0;Y.__detect_history_change_events.priorityOverride=0;Y.__detect_history_change_events.isInfrastructure=!1;Y.__detect_history_change_events.runInSiloedMode=!1})(function(){return{assert:function(){},M:a}})}();



Y.securityGroups.detect_link_click_events=["google"],function(){function a(b,c){return{options:c}}(function(b){Y.__detect_link_click_events=b;Y.__detect_link_click_events.o="detect_link_click_events";Y.__detect_link_click_events.isVendorTemplate=!0;Y.__detect_link_click_events.priorityOverride=0;Y.__detect_link_click_events.isInfrastructure=!1;Y.__detect_link_click_events.runInSiloedMode=!1})(function(b){var c=b.vtp_allowWaitForTags,d=b.vtp_createPermissionError;return{assert:function(e,f){if(!c&&
f&&f.waitForTags)throw d(e,{},"Prohibited option waitForTags.");},M:a}})}();
Y.securityGroups.detect_form_submit_events=["google"],function(){function a(b,c){return{options:c}}(function(b){Y.__detect_form_submit_events=b;Y.__detect_form_submit_events.o="detect_form_submit_events";Y.__detect_form_submit_events.isVendorTemplate=!0;Y.__detect_form_submit_events.priorityOverride=0;Y.__detect_form_submit_events.isInfrastructure=!1;Y.__detect_form_submit_events.runInSiloedMode=!1})(function(b){var c=b.vtp_allowWaitForTags,d=b.vtp_createPermissionError;return{assert:function(e,f){if(!c&&
f&&f.waitForTags)throw d(e,{},"Prohibited option waitForTags.");},M:a}})}();Y.securityGroups.read_container_data=["google"],Y.__read_container_data=function(){return{assert:function(){},M:function(){return{}}}},Y.__read_container_data.o="read_container_data",Y.__read_container_data.isVendorTemplate=!0,Y.__read_container_data.priorityOverride=0,Y.__read_container_data.isInfrastructure=!1,Y.__read_container_data.runInSiloedMode=!1;

Y.securityGroups.listen_data_layer=["google"],function(){function a(b,c){return{eventName:c}}(function(b){Y.__listen_data_layer=b;Y.__listen_data_layer.o="listen_data_layer";Y.__listen_data_layer.isVendorTemplate=!0;Y.__listen_data_layer.priorityOverride=0;Y.__listen_data_layer.isInfrastructure=!1;Y.__listen_data_layer.runInSiloedMode=!1})(function(b){var c=b.vtp_accessType,d=b.vtp_allowedEvents||[],e=b.vtp_createPermissionError;return{assert:function(f,g){if(!z(g))throw e(f,{eventName:g},"Event name must be a string.");
if(!(c==="any"||c==="specific"&&d.indexOf(g)>=0))throw e(f,{eventName:g},"Prohibited listen on data layer event.");},M:a}})}();
Y.securityGroups.detect_user_provided_data=["google"],function(){function a(b,c){return{dataSource:c}}(function(b){Y.__detect_user_provided_data=b;Y.__detect_user_provided_data.o="detect_user_provided_data";Y.__detect_user_provided_data.isVendorTemplate=!0;Y.__detect_user_provided_data.priorityOverride=0;Y.__detect_user_provided_data.isInfrastructure=!1;Y.__detect_user_provided_data.runInSiloedMode=!1})(function(b){var c=b.vtp_createPermissionError;return{assert:function(d,e){if(e!=="auto"&&e!=="manual"&&
e!=="code")throw c(d,{},"Unknown user provided data source.");if(b.vtp_limitDataSources)if(e!=="auto"||b.vtp_allowAutoDataSources){if(e==="manual"&&!b.vtp_allowManualDataSources)throw c(d,{},"Detection of user provided data via manually specified CSS selectors is not allowed.");if(e==="code"&&!b.vtp_allowCodeDataSources)throw c(d,{},"Detection of user provided data from an in-page variable is not allowed.");}else throw c(d,{},"Automatic detection of user provided data is not allowed.");},M:a}})}();



Y.securityGroups.get_url=["google"],function(){function a(b,c,d){return{component:c,queryKey:d}}(function(b){Y.__get_url=b;Y.__get_url.o="get_url";Y.__get_url.isVendorTemplate=!0;Y.__get_url.priorityOverride=0;Y.__get_url.isInfrastructure=!1;Y.__get_url.runInSiloedMode=!1})(function(b){var c=b.vtp_urlParts==="any"?null:[];c&&(b.vtp_protocol&&c.push("protocol"),b.vtp_host&&c.push("host"),b.vtp_port&&c.push("port"),b.vtp_path&&c.push("path"),b.vtp_extension&&c.push("extension"),b.vtp_query&&c.push("query"),
b.vtp_fragment&&c.push("fragment"));var d=c&&b.vtp_queriesAllowed!=="any"?b.vtp_queryKeys||[]:null,e=b.vtp_createPermissionError;return{assert:function(f,g,k){if(g){if(!z(g))throw e(f,{},"URL component must be a string.");if(c&&c.indexOf(g)<0)throw e(f,{},"Prohibited URL component: "+g);if(g==="query"&&d){if(!k)throw e(f,{},"Prohibited from getting entire URL query when query keys are specified.");if(!z(k))throw e(f,{},"Query key must be a string.");if(d.indexOf(k)<0)throw e(f,{},"Prohibited query key: "+
k);}}else if(c)throw e(f,{},"Prohibited from getting entire URL when components are specified.");},M:a}})}();




Y.securityGroups.gct=["google"],function(){function a(b){for(var c=[],d=0;d<b.length;d++)try{c.push(new RegExp(b[d]))}catch(e){}return c}(function(b){Y.__gct=b;Y.__gct.o="gct";Y.__gct.isVendorTemplate=!0;Y.__gct.priorityOverride=0;Y.__gct.isInfrastructure=!1;Y.__gct.runInSiloedMode=!0})(function(b){var c={},d=b.vtp_sessionDuration;d>0&&(c[N.g.Ed]=d);c[N.g.xe]=b.vtp_eventSettings;c[N.g.Qg]=b.vtp_dynamicEventSettings;c[N.g.Mc]=b.vtp_googleSignals===1;c[N.g.fh]=b.vtp_foreignTld;c[N.g.ah]=b.vtp_restrictDomain===
1;c[N.g.Pf]=b.vtp_internalTrafficResults;var e=N.g.sa,f=b.vtp_linker;f&&f[N.g.X]&&(f[N.g.X]=a(f[N.g.X]));c[e]=f;var g=N.g.Tf,k=b.vtp_referralExclusionDefinition;k&&k.include_conditions&&(k.include_conditions=a(k.include_conditions));c[g]=k;var m=uk(b.vtp_trackingId);Bn(m,c);YJ(m,b.vtp_gtmEventId);H(b.vtp_gtmOnSuccess)})}();



Y.securityGroups.get=["google"],Y.__get=function(a){var b=a.vtp_settings,c=b.eventParameters||{},d=String(a.vtp_eventName),e={};e.eventId=a.vtp_gtmEventId;e.priorityId=a.vtp_gtmPriorityId;a.vtp_deferrable&&(e.deferrable=!0);var f=Vz(String(b.streamId),d,c);Xz(f,e.eventId,e);a.vtp_gtmOnSuccess()},Y.__get.o="get",Y.__get.isVendorTemplate=!0,Y.__get.priorityOverride=0,Y.__get.isInfrastructure=!1,Y.__get.runInSiloedMode=!1;
Y.securityGroups.detect_scroll_events=["google"],function(){function a(){return{}}(function(b){Y.__detect_scroll_events=b;Y.__detect_scroll_events.o="detect_scroll_events";Y.__detect_scroll_events.isVendorTemplate=!0;Y.__detect_scroll_events.priorityOverride=0;Y.__detect_scroll_events.isInfrastructure=!1;Y.__detect_scroll_events.runInSiloedMode=!1})(function(){return{assert:function(){},M:a}})}();



Y.securityGroups.detect_form_interaction_events=["google"],function(){function a(){return{}}(function(b){Y.__detect_form_interaction_events=b;Y.__detect_form_interaction_events.o="detect_form_interaction_events";Y.__detect_form_interaction_events.isVendorTemplate=!0;Y.__detect_form_interaction_events.priorityOverride=0;Y.__detect_form_interaction_events.isInfrastructure=!1;Y.__detect_form_interaction_events.runInSiloedMode=!1})(function(){return{assert:function(){},M:a}})}();

var WL={dataLayer:pj,callback:function(a){aj.hasOwnProperty(a)&&Za(aj[a])&&aj[a]();delete aj[a]},bootstrap:0};
function XL(){Mi[ok()]=Mi[ok()]||WL;yk();Ck()||gb(Dk(),function(d,e){py(d,e.transportUrl,e.context);U(92)});qb(bj,Y.securityGroups);var a=sk(tk()),b,c=a==null?void 0:(b=a.context)==null?void 0:b.source;Tl(c,a==null?void 0:a.parent);c!==2&&c!==4&&c!==3||U(142);qf={bm:Hf}}var YL=!1;
(function(a){function b(){n=E.documentElement.getAttribute("data-tag-assistant-present");El(n)&&(m=k.Pj)}function c(){m&&fc?g(m):a()}if(!A["__TAGGY_INSTALLED"]){var d=!1;if(E.referrer){var e=Hj(E.referrer);d=Dj(e,"host")==="cct.google"}if(!d){var f=op("googTaggyReferrer");d=!(!f.length||!f[0].length)}d&&(A["__TAGGY_INSTALLED"]=!0,lc("https://cct.google/taggy/agent.js"))}var g=function(v){var t="GTM",w="GTM";Si&&(t="OGT",w="GTAG");var x=A["google.tagmanager.debugui2.queue"];x||(x=
[],A["google.tagmanager.debugui2.queue"]=x,lc("https://"+Li.Ef+"/debug/bootstrap?id="+Nf.ctid+"&src="+w+"&cond="+v+"&gtm="+lp()));var y={messageType:"CONTAINER_STARTING",data:{scriptSource:fc,containerProduct:t,debug:!1,id:Nf.ctid,targetRef:{ctid:Nf.ctid,isDestination:hk()},aliases:kk(),destinations:ik()}};y.data.resume=function(){a()};Li.bl&&(y.data.initialPublish=!0);x.push(y)},k={Dl:1,Rj:2,hk:3,Ri:4,Pj:5};k[k.Dl]="GTM_DEBUG_LEGACY_PARAM";k[k.Rj]="GTM_DEBUG_PARAM";k[k.hk]="REFERRER";k[k.Ri]="COOKIE";k[k.Pj]="EXTENSION_PARAM";
var m=void 0,n=void 0,p=Bj(A.location,"query",!1,void 0,"gtm_debug");El(p)&&(m=k.Rj);if(!m&&E.referrer){var q=Hj(E.referrer);Dj(q,"host")==="tagassistant.google.com"&&(m=k.hk)}if(!m){var r=op("__TAG_ASSISTANT");r.length&&r[0].length&&(m=k.Ri)}m||b();if(!m&&Dl(n)){var u=!1;qc(E,"TADebugSignal",function(){u||(u=!0,b(),c())},!1);A.setTimeout(function(){u||(u=!0,b(),c())},200)}else c()})(function(){try{var a;if(!(a=YL)){var b;a:{for(var c=ck(),d=l(jk()),e=d.next();!e.done;e=d.next())if(c.injectedFirstPartyContainers[e.value]){b=
!0;break a}b=!1}a=!b}if(a){var f=fj.Va,g=Ki.Kn;f.j=new Set;if(g!=="")for(var k=l(g.split("~")),m=k.next();!m.done;m=k.next()){var n=Number(m.value);isNaN(n)||f.j.add(n)}
fj.K="";fj.Eb="ad_storage|analytics_storage|ad_user_data|ad_personalization";fj.aa="ad_storage|analytics_storage|ad_user_data";fj.P="5190";fj.P="5190";wk();if(R(93)){}Xh[8]=!0;var p=Nf.ctid,q=hk();R(110)&&(Nl=!0,Fl="",Gl=p,Il=Si,Hl={ctid:p,isDestination:q},Sl());if(!gm){gm=!0;for(var r=hm.length-1;r>=0;r--)hm[r]();hm=[]}Mo();qm();var u=qk();if(ck().canonical[u]){var v=Mi.zones;v&&v.unregisterChild(jk());ay().removeExternalRestrictions(qk());}else{vv();ly();for(var t=data.resource||{},w=t.macros||[],x=0;x<w.length;x++)ff.push(w[x]);for(var y=t.tags||[],B=0;B<y.length;B++)jf.push(y[B]);for(var C=t.predicates||[],D=0;D<C.length;D++)hf.push(C[D]);for(var G=t.rules||[],K=0;K<G.length;K++){for(var F=G[K],S={},M=0;M<F.length;M++){var T=F[M][0];S[T]=Array.prototype.slice.call(F[M],1);T!=="if"&&T!=="unless"||pf(S[T])}gf.push(S)}lf=
Y;mf=tB;Jf=new Qf;var ca=data.sandboxed_scripts,da=data.security_groups;a:{var Z=data.runtime||[],Q=data.runtime_lines;JB=new ye;xL();ef=IB();var pa=JB,oa=wL(),ja=new Wc("require",oa);ja.Ia();pa.j.j.set("require",ja);for(var Ba=[],Ma=0;Ma<Z.length;Ma++){var ua=Z[Ma];if(!Array.isArray(ua)||ua.length<3){if(ua.length===0)continue;break a}Q&&Q[Ma]&&Q[Ma].length&&Af(ua,Q[Ma]);try{JB.execute(ua),R(108)&&Vj&&ua[0]===50&&Ba.push(ua[1])}catch(yo){}}R(108)&&(rf=Ba)}if(ca&&ca.length)for(var Ta=["sandboxedScripts"],
cb=0;cb<ca.length;cb++){var Hc=ca[cb].replace(/^_*/,"");bj[Hc]=Ta}yL(da);XL();if(!Wi)for(var Te=zl()?jj(fj.aa):jj(fj.Eb),Ue=0;Ue<Ul.length;Ue++){var rz=Ul[Ue],ZL=rz,$L=Te[rz]?"granted":"denied";Vk().implicit(ZL,$L)}OA();qy=!1;ry=0;if(E.readyState==="interactive"&&!E.createEventObject||E.readyState==="complete")ty();else{qc(E,"DOMContentLoaded",ty);qc(E,"readystatechange",ty);if(E.createEventObject&&E.documentElement.doScroll){var sz=!0;try{sz=!A.frameElement}catch(yo){}sz&&uy()}qc(A,"load",ty)}uA=
!1;E.readyState==="complete"?wA():qc(A,"load",wA);Vj&&(dn(rn),A.setInterval(qn,864E5),dn(wB),dn(Uy),dn(xw),dn(un),dn(FB),dn(ez),R(108)&&(dn(Zy),dn($y),dn(az)),AB());if(Wj){Uk();Km();var tz,uz=Hj(A.location.href);(tz=uz.hostname+uz.pathname)&&Lk("dl",encodeURIComponent(tz));var zo;var vz=Nf.ctid;if(vz){var bM=fk.Ke?1:0,Lh,wz=sk(tk());Lh=wz&&
wz.context;zo=vz+";"+Nf.canonicalContainerId+";"+(Lh&&Lh.fromContainerExecution?1:0)+";"+(Lh&&Lh.source||0)+";"+bM}else zo=void 0;var xz=zo;xz&&Lk("tdp",xz);var yz=lo(!0);yz!==void 0&&Lk("frm",String(yz));var Ao;var Mh=sk(tk());if(Mh){for(;Mh.parent;){var zz=sk(Mh.parent);if(!zz)break;Mh=zz}Ao=Mh}else Ao=void 0;var Ve=Ao;if(!Ve)U(144);else if(R(55)||Ve.canonicalContainerId){var Bo;a:{var Az,Bz=(Az=Ve.scriptElement)==null?void 0:Az.src;if(Bz){var Co;try{var Cz;Co=(Cz=Ec())==null?void 0:Cz.getEntriesByType("resource")}catch(yo){}if(Co){for(var Dz=
-1,Ez=l(Co),Do=Ez.next();!Do.done;Do=Ez.next()){var Fz=Do.value;if(Fz.initiatorType==="script"){Dz+=1;var Eo=Fz.name,Fo=Bz;R(54)&&(Eo=Eo.replace(PA,""),Fo=Fo.replace(PA,""));if(Eo===Fo){Bo=Dz;break a}}}U(146)}else U(145)}Bo=void 0}var Gz=Bo;Gz!==void 0&&(Ve.canonicalContainerId&&Lk("rtg",String(Ve.canonicalContainerId)),Lk("slo",String(Gz)),Lk("hlo",Ve.htmlLoadOrder||"-1"),Lk("lst",String(Ve.loadScriptType||"0")))}var mk;var Nh=rk();if(Nh)if(Nh.canonicalContainerId)mk=Nh.canonicalContainerId;else{var Hz,
Iz=Nh.scriptContainerId||((Hz=Nh.destinations)==null?void 0:Hz[0]);mk=Iz?"_"+Iz:void 0}else mk=void 0;var Jz=mk;Jz&&Lk("pcid",Jz);R(36)&&(Lk("bt",String(fj.C?2:Ui?1:0)),Lk("ct",String(fj.C?0:Ui?1:jp()?2:3)))}jB();ul(1);SC();$i=nb();WL.bootstrap=$i;fj.H&&NA();if(R(93)){}R(123)&&(typeof A.name==="string"&&sb(A.name,"web-pixel-sandbox-CUSTOM")&&Fc()?zL("dMDg0Yz"):A.Shopify&&Fc()&&zL("dNTU0Yz"))}}}catch(yo){if(ul(4),Vj){var cM=ln(!0,!0);pc(cM)}}});

})()

</script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-E48RQQ760P');
    </script>
    <!-- Google adsense -->
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9565992688718976" crossorigin="anonymous"></script>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Base Defense - GNHUSTGames</title>

    <!-- Standardised web app manifest -->
    <link rel="manifest" href="appmanifest.json">

    <!-- Allow fullscreen mode on iOS devices. (These are Apple specific meta tags.) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" sizes="256x256" href="icon-256.png">
    <meta name="HandheldFriendly" content="true">

    <!-- Chrome for Android web app tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="256x256" href="icon-256.png">

    <!-- All margins and padding must be zero for the canvas to fill the screen. -->
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
        }
        
        html,
        body {
            background: #000;
            color: #fff;
            overflow: hidden;
            touch-action: none;
            -ms-touch-action: none;
        }
        
        canvas {
            touch-action-delay: none;
            touch-action: none;
            -ms-touch-action: none;
        }
    </style>


<script>"use strict";

(function() {

    class OfflineClient {
        constructor() {
            // Create a BroadcastChannel, if supported.
            this._broadcastChannel = (typeof BroadcastChannel === "undefined" ? null : new BroadcastChannel("offline"));

            // Queue of messages received before a message callback is set.
            this._queuedMessages = [];

            // The message callback.
            this._onMessageCallback = null;

            // If BroadcastChannel is supported, listen for messages.
            if (this._broadcastChannel)
                this._broadcastChannel.onmessage = (e => this._OnBroadcastChannelMessage(e));
        }

        _OnBroadcastChannelMessage(e) {
            // Have a message callback set: just forward the call.
            if (this._onMessageCallback) {
                this._onMessageCallback(e);
                return;
            }

            // Otherwise the app hasn't loaded far enough to set a message callback.
            // Buffer the incoming messages to replay when the app sets a callback.
            this._queuedMessages.push(e);
        }

        SetMessageCallback(f) {
            this._onMessageCallback = f;

            // Replay any queued messages through the handler, then clear the queue.
            for (let e of this._queuedMessages)
                this._onMessageCallback(e);

            this._queuedMessages.length = 0;
        }
    };

    // Create the offline client ASAP so we receive and start queueing any messages the SW broadcasts.
    window.OfflineClientInfo = new OfflineClient();

}());</script><script type="text/javascript" async="" id="locus">console.log("NULL.JS")</script><script type="text/javascript" async="" crossorigin="anonymous" data-ad-client="ca-pub-2316275586951220" data-ad-frequency-hint="30s" allow="autoplay" data-ad-channel="4089988593" id="afg">console.log("NULL.JS")</script><base href="https://gnhustgames.github.io/base-defense/"></head>

<body>
    <div id="fb-root"></div>

    <script>
        // Issue a warning if trying to preview an exported project on disk.
        (function() {
            // Check for running exported on file protocol
            if (window.location.protocol.substr(0, 4) === "file") {
                alert("Exported games won't work until you upload them. (When running on the file:/// protocol, browsers block many features from working for security reasons.)");
            }
        })();
    </script>

    <!-- The canvas must be inside a div called c2canvasdiv -->
    <div id="c2canvasdiv" style="width: 1158px; height: 651px; margin-left: 0px; margin-top: 21px;">

        <!-- The canvas the project will render to.  If you change its ID, don't forget to change the
		ID the runtime looks for in the jQuery events above (ready() and cr_sizeCanvas()). -->
        <canvas id="c2canvas" width="1448" height="814" style="width: 1158px; height: 651px;">
			<!-- This text is displayed if the visitor's browser does not support HTML5.
			You can change it, but it is a good idea to link to a description of a browser
			and provide some links to download some popular HTML5-compatible browsers. -->
			<h1>Your browser does not appear to support HTML5.  Try upgrading your browser to the latest version.  <a>What is a browser?</a>
			<br><br><a>Microsoft Internet Explorer</a><br>
			<a>Mozilla Firefox</a><br>
			<a>Google Chrome</a><br>
			<a>Apple Safari</a></h1>
		</canvas>

    </div>

    <!-- Pages load faster with scripts at the bottom -->

    <!-- Construct 2 exported games require jQuery. -->
    <script>/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */ ! function(a, b) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
        if (!a.document) throw new Error("jQuery requires a window with a document");
        return b(a)
    } : b(a)
}("undefined" != typeof window ? window : this, function(a, b) {
    var c = [],
        d = c.slice,
        e = c.concat,
        f = c.push,
        g = c.indexOf,
        h = {},
        i = h.toString,
        j = h.hasOwnProperty,
        k = {},
        l = a.document,
        m = "2.1.1",
        n = function(a, b) {
            return new n.fn.init(a, b)
        },
        o = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        p = /^-ms-/,
        q = /-([\da-z])/gi,
        r = function(a, b) {
            return b.toUpperCase()
        };
    n.fn = n.prototype = {
        jquery: m,
        constructor: n,
        selector: "",
        length: 0,
        toArray: function() {
            return d.call(this)
        },
        get: function(a) {
            return null != a ? 0 > a ? this[a + this.length] : this[a] : d.call(this)
        },
        pushStack: function(a) {
            var b = n.merge(this.constructor(), a);
            return b.prevObject = this, b.context = this.context, b
        },
        each: function(a, b) {
            return n.each(this, a, b)
        },
        map: function(a) {
            return this.pushStack(n.map(this, function(b, c) {
                return a.call(b, c, b)
            }))
        },
        slice: function() {
            return this.pushStack(d.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(a) {
            var b = this.length,
                c = +a + (0 > a ? b : 0);
            return this.pushStack(c >= 0 && b > c ? [this[c]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: f,
        sort: c.sort,
        splice: c.splice
    }, n.extend = n.fn.extend = function() {
        var a, b, c, d, e, f, g = arguments[0] || {},
            h = 1,
            i = arguments.length,
            j = !1;
        for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || n.isFunction(g) || (g = {}), h === i && (g = this, h--); i > h; h++)
            if (null != (a = arguments[h]))
                for (b in a) c = g[b], d = a[b], g !== d && (j && d && (n.isPlainObject(d) || (e = n.isArray(d))) ? (e ? (e = !1, f = c && n.isArray(c) ? c : []) : f = c && n.isPlainObject(c) ? c : {}, g[b] = n.extend(j, f, d)) : void 0 !== d && (g[b] = d));
        return g
    }, n.extend({
        expando: "jQuery" + (m + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(a) {
            throw new Error(a)
        },
        noop: function() {},
        isFunction: function(a) {
            return "function" === n.type(a)
        },
        isArray: Array.isArray,
        isWindow: function(a) {
            return null != a && a === a.window
        },
        isNumeric: function(a) {
            return !n.isArray(a) && a - parseFloat(a) >= 0
        },
        isPlainObject: function(a) {
            return "object" !== n.type(a) || a.nodeType || n.isWindow(a) ? !1 : a.constructor && !j.call(a.constructor.prototype, "isPrototypeOf") ? !1 : !0
        },
        isEmptyObject: function(a) {
            var b;
            for (b in a) return !1;
            return !0
        },
        type: function(a) {
            return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? h[i.call(a)] || "object" : typeof a
        },
        globalEval: function(a) {
            var b, c = eval;
            a = n.trim(a), a && (1 === a.indexOf("use strict") ? (b = l.createElement("script"), b.text = a, l.head.appendChild(b).parentNode.removeChild(b)) : c(a))
        },
        camelCase: function(a) {
            return a.replace(p, "ms-").replace(q, r)
        },
        nodeName: function(a, b) {
            return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
        },
        each: function(a, b, c) {
            var d, e = 0,
                f = a.length,
                g = s(a);
            if (c) {
                if (g) {
                    for (; f > e; e++)
                        if (d = b.apply(a[e], c), d === !1) break
                } else
                    for (e in a)
                        if (d = b.apply(a[e], c), d === !1) break
            } else if (g) {
                for (; f > e; e++)
                    if (d = b.call(a[e], e, a[e]), d === !1) break
            } else
                for (e in a)
                    if (d = b.call(a[e], e, a[e]), d === !1) break;
            return a
        },
        trim: function(a) {
            return null == a ? "" : (a + "").replace(o, "")
        },
        makeArray: function(a, b) {
            var c = b || [];
            return null != a && (s(Object(a)) ? n.merge(c, "string" == typeof a ? [a] : a) : f.call(c, a)), c
        },
        inArray: function(a, b, c) {
            return null == b ? -1 : g.call(b, a, c)
        },
        merge: function(a, b) {
            for (var c = +b.length, d = 0, e = a.length; c > d; d++) a[e++] = b[d];
            return a.length = e, a
        },
        grep: function(a, b, c) {
            for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f), d !== h && e.push(a[f]);
            return e
        },
        map: function(a, b, c) {
            var d, f = 0,
                g = a.length,
                h = s(a),
                i = [];
            if (h)
                for (; g > f; f++) d = b(a[f], f, c), null != d && i.push(d);
            else
                for (f in a) d = b(a[f], f, c), null != d && i.push(d);
            return e.apply([], i)
        },
        guid: 1,
        proxy: function(a, b) {
            var c, e, f;
            return "string" == typeof b && (c = a[b], b = a, a = c), n.isFunction(a) ? (e = d.call(arguments, 2), f = function() {
                return a.apply(b || this, e.concat(d.call(arguments)))
            }, f.guid = a.guid = a.guid || n.guid++, f) : void 0
        },
        now: Date.now,
        support: k
    }), n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
        h["[object " + b + "]"] = b.toLowerCase()
    });

    function s(a) {
        var b = a.length,
            c = n.type(a);
        return "function" === c || n.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
    }
    var t = function(a) {
        var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u = "sizzle" + -new Date,
            v = a.document,
            w = 0,
            x = 0,
            y = gb(),
            z = gb(),
            A = gb(),
            B = function(a, b) {
                return a === b && (l = !0), 0
            },
            C = "undefined",
            D = 1 << 31,
            E = {}.hasOwnProperty,
            F = [],
            G = F.pop,
            H = F.push,
            I = F.push,
            J = F.slice,
            K = F.indexOf || function(a) {
                for (var b = 0, c = this.length; c > b; b++)
                    if (this[b] === a) return b;
                return -1
            },
            L = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            M = "[\\x20\\t\\r\\n\\f]",
            N = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
            O = N.replace("w", "w#"),
            P = "\\[" + M + "*(" + N + ")(?:" + M + "*([*^$|!~]?=)" + M + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + O + "))|)" + M + "*\\]",
            Q = ":(" + N + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + P + ")*)|.*)\\)|)",
            R = new RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"),
            S = new RegExp("^" + M + "*," + M + "*"),
            T = new RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"),
            U = new RegExp("=" + M + "*([^\\]'\"]*?)" + M + "*\\]", "g"),
            V = new RegExp(Q),
            W = new RegExp("^" + O + "$"),
            X = {
                ID: new RegExp("^#(" + N + ")"),
                CLASS: new RegExp("^\\.(" + N + ")"),
                TAG: new RegExp("^(" + N.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + P),
                PSEUDO: new RegExp("^" + Q),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + M + "*(even|odd|(([+-]|)(\\d*)n|)" + M + "*(?:([+-]|)" + M + "*(\\d+)|))" + M + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + L + ")$", "i"),
                needsContext: new RegExp("^" + M + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + M + "*((?:-\\d)?\\d*)" + M + "*\\)|)(?=[^-]|$)", "i")
            },
            Y = /^(?:input|select|textarea|button)$/i,
            Z = /^h\d$/i,
            $ = /^[^{]+\{\s*\[native \w/,
            _ = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            ab = /[+~]/,
            bb = /'|\\/g,
            cb = new RegExp("\\\\([\\da-f]{1,6}" + M + "?|(" + M + ")|.)", "ig"),
            db = function(a, b, c) {
                var d = "0x" + b - 65536;
                return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
            };
        try {
            I.apply(F = J.call(v.childNodes), v.childNodes), F[v.childNodes.length].nodeType
        } catch (eb) {
            I = {
                apply: F.length ? function(a, b) {
                    H.apply(a, J.call(b))
                } : function(a, b) {
                    var c = a.length,
                        d = 0;
                    while (a[c++] = b[d++]);
                    a.length = c - 1
                }
            }
        }

        function fb(a, b, d, e) {
            var f, h, j, k, l, o, r, s, w, x;
            if ((b ? b.ownerDocument || b : v) !== n && m(b), b = b || n, d = d || [], !a || "string" != typeof a) return d;
            if (1 !== (k = b.nodeType) && 9 !== k) return [];
            if (p && !e) {
                if (f = _.exec(a))
                    if (j = f[1]) {
                        if (9 === k) {
                            if (h = b.getElementById(j), !h || !h.parentNode) return d;
                            if (h.id === j) return d.push(h), d
                        } else if (b.ownerDocument && (h = b.ownerDocument.getElementById(j)) && t(b, h) && h.id === j) return d.push(h), d
                    } else {
                        if (f[2]) return I.apply(d, b.getElementsByTagName(a)), d;
                        if ((j = f[3]) && c.getElementsByClassName && b.getElementsByClassName) return I.apply(d, b.getElementsByClassName(j)), d
                    }
                if (c.qsa && (!q || !q.test(a))) {
                    if (s = r = u, w = b, x = 9 === k && a, 1 === k && "object" !== b.nodeName.toLowerCase()) {
                        o = g(a), (r = b.getAttribute("id")) ? s = r.replace(bb, "\\$&") : b.setAttribute("id", s), s = "[id='" + s + "'] ", l = o.length;
                        while (l--) o[l] = s + qb(o[l]);
                        w = ab.test(a) && ob(b.parentNode) || b, x = o.join(",")
                    }
                    if (x) try {
                        return I.apply(d, w.querySelectorAll(x)), d
                    } catch (y) {} finally {
                        r || b.removeAttribute("id")
                    }
                }
            }
            return i(a.replace(R, "$1"), b, d, e)
        }

        function gb() {
            var a = [];

            function b(c, e) {
                return a.push(c + " ") > d.cacheLength && delete b[a.shift()], b[c + " "] = e
            }
            return b
        }

        function hb(a) {
            return a[u] = !0, a
        }

        function ib(a) {
            var b = n.createElement("div");
            try {
                return !!a(b)
            } catch (c) {
                return !1
            } finally {
                b.parentNode && b.parentNode.removeChild(b), b = null
            }
        }

        function jb(a, b) {
            var c = a.split("|"),
                e = a.length;
            while (e--) d.attrHandle[c[e]] = b
        }

        function kb(a, b) {
            var c = b && a,
                d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || D) - (~a.sourceIndex || D);
            if (d) return d;
            if (c)
                while (c = c.nextSibling)
                    if (c === b) return -1;
            return a ? 1 : -1
        }

        function lb(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return "input" === c && b.type === a
            }
        }

        function mb(a) {
            return function(b) {
                var c = b.nodeName.toLowerCase();
                return ("input" === c || "button" === c) && b.type === a
            }
        }

        function nb(a) {
            return hb(function(b) {
                return b = +b, hb(function(c, d) {
                    var e, f = a([], c.length, b),
                        g = f.length;
                    while (g--) c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                })
            })
        }

        function ob(a) {
            return a && typeof a.getElementsByTagName !== C && a
        }
        c = fb.support = {}, f = fb.isXML = function(a) {
            var b = a && (a.ownerDocument || a).documentElement;
            return b ? "HTML" !== b.nodeName : !1
        }, m = fb.setDocument = function(a) {
            var b, e = a ? a.ownerDocument || a : v,
                g = e.defaultView;
            return e !== n && 9 === e.nodeType && e.documentElement ? (n = e, o = e.documentElement, p = !f(e), g && g !== g.top && (g.addEventListener ? g.addEventListener("unload", function() {
                m()
            }, !1) : g.attachEvent && g.attachEvent("onunload", function() {
                m()
            })), c.attributes = ib(function(a) {
                return a.className = "i", !a.getAttribute("className")
            }), c.getElementsByTagName = ib(function(a) {
                return a.appendChild(e.createComment("")), !a.getElementsByTagName("*").length
            }), c.getElementsByClassName = $.test(e.getElementsByClassName) && ib(function(a) {
                return a.innerHTML = "<div class='a'></div><div class='a i'></div>", a.firstChild.className = "i", 2 === a.getElementsByClassName("i").length
            }), c.getById = ib(function(a) {
                return o.appendChild(a).id = u, !e.getElementsByName || !e.getElementsByName(u).length
            }), c.getById ? (d.find.ID = function(a, b) {
                if (typeof b.getElementById !== C && p) {
                    var c = b.getElementById(a);
                    return c && c.parentNode ? [c] : []
                }
            }, d.filter.ID = function(a) {
                var b = a.replace(cb, db);
                return function(a) {
                    return a.getAttribute("id") === b
                }
            }) : (delete d.find.ID, d.filter.ID = function(a) {
                var b = a.replace(cb, db);
                return function(a) {
                    var c = typeof a.getAttributeNode !== C && a.getAttributeNode("id");
                    return c && c.value === b
                }
            }), d.find.TAG = c.getElementsByTagName ? function(a, b) {
                return typeof b.getElementsByTagName !== C ? b.getElementsByTagName(a) : void 0
            } : function(a, b) {
                var c, d = [],
                    e = 0,
                    f = b.getElementsByTagName(a);
                if ("*" === a) {
                    while (c = f[e++]) 1 === c.nodeType && d.push(c);
                    return d
                }
                return f
            }, d.find.CLASS = c.getElementsByClassName && function(a, b) {
                return typeof b.getElementsByClassName !== C && p ? b.getElementsByClassName(a) : void 0
            }, r = [], q = [], (c.qsa = $.test(e.querySelectorAll)) && (ib(function(a) {
                a.innerHTML = "<select msallowclip=''><option selected=''></option></select>", a.querySelectorAll("[msallowclip^='']").length && q.push("[*^$]=" + M + "*(?:''|\"\")"), a.querySelectorAll("[selected]").length || q.push("\\[" + M + "*(?:value|" + L + ")"), a.querySelectorAll(":checked").length || q.push(":checked")
            }), ib(function(a) {
                var b = e.createElement("input");
                b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("name", "D"), a.querySelectorAll("[name=d]").length && q.push("name" + M + "*[*^$|!~]?="), a.querySelectorAll(":enabled").length || q.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), q.push(",.*:")
            })), (c.matchesSelector = $.test(s = o.matches || o.webkitMatchesSelector || o.mozMatchesSelector || o.oMatchesSelector || o.msMatchesSelector)) && ib(function(a) {
                c.disconnectedMatch = s.call(a, "div"), s.call(a, "[s!='']:x"), r.push("!=", Q)
            }), q = q.length && new RegExp(q.join("|")), r = r.length && new RegExp(r.join("|")), b = $.test(o.compareDocumentPosition), t = b || $.test(o.contains) ? function(a, b) {
                var c = 9 === a.nodeType ? a.documentElement : a,
                    d = b && b.parentNode;
                return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
            } : function(a, b) {
                if (b)
                    while (b = b.parentNode)
                        if (b === a) return !0;
                return !1
            }, B = b ? function(a, b) {
                if (a === b) return l = !0, 0;
                var d = !a.compareDocumentPosition - !b.compareDocumentPosition;
                return d ? d : (d = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & d || !c.sortDetached && b.compareDocumentPosition(a) === d ? a === e || a.ownerDocument === v && t(v, a) ? -1 : b === e || b.ownerDocument === v && t(v, b) ? 1 : k ? K.call(k, a) - K.call(k, b) : 0 : 4 & d ? -1 : 1)
            } : function(a, b) {
                if (a === b) return l = !0, 0;
                var c, d = 0,
                    f = a.parentNode,
                    g = b.parentNode,
                    h = [a],
                    i = [b];
                if (!f || !g) return a === e ? -1 : b === e ? 1 : f ? -1 : g ? 1 : k ? K.call(k, a) - K.call(k, b) : 0;
                if (f === g) return kb(a, b);
                c = a;
                while (c = c.parentNode) h.unshift(c);
                c = b;
                while (c = c.parentNode) i.unshift(c);
                while (h[d] === i[d]) d++;
                return d ? kb(h[d], i[d]) : h[d] === v ? -1 : i[d] === v ? 1 : 0
            }, e) : n
        }, fb.matches = function(a, b) {
            return fb(a, null, null, b)
        }, fb.matchesSelector = function(a, b) {
            if ((a.ownerDocument || a) !== n && m(a), b = b.replace(U, "='$1']"), !(!c.matchesSelector || !p || r && r.test(b) || q && q.test(b))) try {
                var d = s.call(a, b);
                if (d || c.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d
            } catch (e) {}
            return fb(b, n, null, [a]).length > 0
        }, fb.contains = function(a, b) {
            return (a.ownerDocument || a) !== n && m(a), t(a, b)
        }, fb.attr = function(a, b) {
            (a.ownerDocument || a) !== n && m(a);
            var e = d.attrHandle[b.toLowerCase()],
                f = e && E.call(d.attrHandle, b.toLowerCase()) ? e(a, b, !p) : void 0;
            return void 0 !== f ? f : c.attributes || !p ? a.getAttribute(b) : (f = a.getAttributeNode(b)) && f.specified ? f.value : null
        }, fb.error = function(a) {
            throw new Error("Syntax error, unrecognized expression: " + a)
        }, fb.uniqueSort = function(a) {
            var b, d = [],
                e = 0,
                f = 0;
            if (l = !c.detectDuplicates, k = !c.sortStable && a.slice(0), a.sort(B), l) {
                while (b = a[f++]) b === a[f] && (e = d.push(f));
                while (e--) a.splice(d[e], 1)
            }
            return k = null, a
        }, e = fb.getText = function(a) {
            var b, c = "",
                d = 0,
                f = a.nodeType;
            if (f) {
                if (1 === f || 9 === f || 11 === f) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += e(a)
                } else if (3 === f || 4 === f) return a.nodeValue
            } else
                while (b = a[d++]) c += e(b);
            return c
        }, d = fb.selectors = {
            cacheLength: 50,
            createPseudo: hb,
            match: X,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(a) {
                    return a[1] = a[1].replace(cb, db), a[3] = (a[3] || a[4] || a[5] || "").replace(cb, db), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                },
                CHILD: function(a) {
                    return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || fb.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && fb.error(a[0]), a
                },
                PSEUDO: function(a) {
                    var b, c = !a[6] && a[2];
                    return X.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && V.test(c) && (b = g(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
                }
            },
            filter: {
                TAG: function(a) {
                    var b = a.replace(cb, db).toLowerCase();
                    return "*" === a ? function() {
                        return !0
                    } : function(a) {
                        return a.nodeName && a.nodeName.toLowerCase() === b
                    }
                },
                CLASS: function(a) {
                    var b = y[a + " "];
                    return b || (b = new RegExp("(^|" + M + ")" + a + "(" + M + "|$)")) && y(a, function(a) {
                        return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== C && a.getAttribute("class") || "")
                    })
                },
                ATTR: function(a, b, c) {
                    return function(d) {
                        var e = fb.attr(d, a);
                        return null == e ? "!=" === b : b ? (e += "", "=" === b ? e === c : "!=" === b ? e !== c : "^=" === b ? c && 0 === e.indexOf(c) : "*=" === b ? c && e.indexOf(c) > -1 : "$=" === b ? c && e.slice(-c.length) === c : "~=" === b ? (" " + e + " ").indexOf(c) > -1 : "|=" === b ? e === c || e.slice(0, c.length + 1) === c + "-" : !1) : !0
                    }
                },
                CHILD: function(a, b, c, d, e) {
                    var f = "nth" !== a.slice(0, 3),
                        g = "last" !== a.slice(-4),
                        h = "of-type" === b;
                    return 1 === d && 0 === e ? function(a) {
                        return !!a.parentNode
                    } : function(b, c, i) {
                        var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling",
                            q = b.parentNode,
                            r = h && b.nodeName.toLowerCase(),
                            s = !i && !h;
                        if (q) {
                            if (f) {
                                while (p) {
                                    l = b;
                                    while (l = l[p])
                                        if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                    o = p = "only" === a && !o && "nextSibling"
                                }
                                return !0
                            }
                            if (o = [g ? q.firstChild : q.lastChild], g && s) {
                                k = q[u] || (q[u] = {}), j = k[a] || [], n = j[0] === w && j[1], m = j[0] === w && j[2], l = n && q.childNodes[n];
                                while (l = ++n && l && l[p] || (m = n = 0) || o.pop())
                                    if (1 === l.nodeType && ++m && l === b) {
                                        k[a] = [w, n, m];
                                        break
                                    }
                            } else if (s && (j = (b[u] || (b[u] = {}))[a]) && j[0] === w) m = j[1];
                            else
                                while (l = ++n && l && l[p] || (m = n = 0) || o.pop())
                                    if ((h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) && ++m && (s && ((l[u] || (l[u] = {}))[a] = [w, m]), l === b)) break;
                            return m -= e, m === d || m % d === 0 && m / d >= 0
                        }
                    }
                },
                PSEUDO: function(a, b) {
                    var c, e = d.pseudos[a] || d.setFilters[a.toLowerCase()] || fb.error("unsupported pseudo: " + a);
                    return e[u] ? e(b) : e.length > 1 ? (c = [a, a, "", b], d.setFilters.hasOwnProperty(a.toLowerCase()) ? hb(function(a, c) {
                        var d, f = e(a, b),
                            g = f.length;
                        while (g--) d = K.call(a, f[g]), a[d] = !(c[d] = f[g])
                    }) : function(a) {
                        return e(a, 0, c)
                    }) : e
                }
            },
            pseudos: {
                not: hb(function(a) {
                    var b = [],
                        c = [],
                        d = h(a.replace(R, "$1"));
                    return d[u] ? hb(function(a, b, c, e) {
                        var f, g = d(a, null, e, []),
                            h = a.length;
                        while (h--)(f = g[h]) && (a[h] = !(b[h] = f))
                    }) : function(a, e, f) {
                        return b[0] = a, d(b, null, f, c), !c.pop()
                    }
                }),
                has: hb(function(a) {
                    return function(b) {
                        return fb(a, b).length > 0
                    }
                }),
                contains: hb(function(a) {
                    return function(b) {
                        return (b.textContent || b.innerText || e(b)).indexOf(a) > -1
                    }
                }),
                lang: hb(function(a) {
                    return W.test(a || "") || fb.error("unsupported lang: " + a), a = a.replace(cb, db).toLowerCase(),
                        function(b) {
                            var c;
                            do
                                if (c = p ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-"); while ((b = b.parentNode) && 1 === b.nodeType);
                            return !1
                        }
                }),
                target: function(b) {
                    var c = a.location && a.location.hash;
                    return c && c.slice(1) === b.id
                },
                root: function(a) {
                    return a === o
                },
                focus: function(a) {
                    return a === n.activeElement && (!n.hasFocus || n.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                },
                enabled: function(a) {
                    return a.disabled === !1
                },
                disabled: function(a) {
                    return a.disabled === !0
                },
                checked: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && !!a.checked || "option" === b && !!a.selected
                },
                selected: function(a) {
                    return a.parentNode && a.parentNode.selectedIndex, a.selected === !0
                },
                empty: function(a) {
                    for (a = a.firstChild; a; a = a.nextSibling)
                        if (a.nodeType < 6) return !1;
                    return !0
                },
                parent: function(a) {
                    return !d.pseudos.empty(a)
                },
                header: function(a) {
                    return Z.test(a.nodeName)
                },
                input: function(a) {
                    return Y.test(a.nodeName)
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return "input" === b && "button" === a.type || "button" === b
                },
                text: function(a) {
                    var b;
                    return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
                },
                first: nb(function() {
                    return [0]
                }),
                last: nb(function(a, b) {
                    return [b - 1]
                }),
                eq: nb(function(a, b, c) {
                    return [0 > c ? c + b : c]
                }),
                even: nb(function(a, b) {
                    for (var c = 0; b > c; c += 2) a.push(c);
                    return a
                }),
                odd: nb(function(a, b) {
                    for (var c = 1; b > c; c += 2) a.push(c);
                    return a
                }),
                lt: nb(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; --d >= 0;) a.push(d);
                    return a
                }),
                gt: nb(function(a, b, c) {
                    for (var d = 0 > c ? c + b : c; ++d < b;) a.push(d);
                    return a
                })
            }
        }, d.pseudos.nth = d.pseudos.eq;
        for (b in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            }) d.pseudos[b] = lb(b);
        for (b in {
                submit: !0,
                reset: !0
            }) d.pseudos[b] = mb(b);

        function pb() {}
        pb.prototype = d.filters = d.pseudos, d.setFilters = new pb, g = fb.tokenize = function(a, b) {
            var c, e, f, g, h, i, j, k = z[a + " "];
            if (k) return b ? 0 : k.slice(0);
            h = a, i = [], j = d.preFilter;
            while (h) {
                (!c || (e = S.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), c = !1, (e = T.exec(h)) && (c = e.shift(), f.push({
                    value: c,
                    type: e[0].replace(R, " ")
                }), h = h.slice(c.length));
                for (g in d.filter) !(e = X[g].exec(h)) || j[g] && !(e = j[g](e)) || (c = e.shift(), f.push({
                    value: c,
                    type: g,
                    matches: e
                }), h = h.slice(c.length));
                if (!c) break
            }
            return b ? h.length : h ? fb.error(a) : z(a, i).slice(0)
        };

        function qb(a) {
            for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
            return d
        }

        function rb(a, b, c) {
            var d = b.dir,
                e = c && "parentNode" === d,
                f = x++;
            return b.first ? function(b, c, f) {
                while (b = b[d])
                    if (1 === b.nodeType || e) return a(b, c, f)
            } : function(b, c, g) {
                var h, i, j = [w, f];
                if (g) {
                    while (b = b[d])
                        if ((1 === b.nodeType || e) && a(b, c, g)) return !0
                } else
                    while (b = b[d])
                        if (1 === b.nodeType || e) {
                            if (i = b[u] || (b[u] = {}), (h = i[d]) && h[0] === w && h[1] === f) return j[2] = h[2];
                            if (i[d] = j, j[2] = a(b, c, g)) return !0
                        }
            }
        }

        function sb(a) {
            return a.length > 1 ? function(b, c, d) {
                var e = a.length;
                while (e--)
                    if (!a[e](b, c, d)) return !1;
                return !0
            } : a[0]
        }

        function tb(a, b, c) {
            for (var d = 0, e = b.length; e > d; d++) fb(a, b[d], c);
            return c
        }

        function ub(a, b, c, d, e) {
            for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
            return g
        }

        function vb(a, b, c, d, e, f) {
            return d && !d[u] && (d = vb(d)), e && !e[u] && (e = vb(e, f)), hb(function(f, g, h, i) {
                var j, k, l, m = [],
                    n = [],
                    o = g.length,
                    p = f || tb(b || "*", h.nodeType ? [h] : h, []),
                    q = !a || !f && b ? p : ub(p, m, a, h, i),
                    r = c ? e || (f ? a : o || d) ? [] : g : q;
                if (c && c(q, r, h, i), d) {
                    j = ub(r, n), d(j, [], h, i), k = j.length;
                    while (k--)(l = j[k]) && (r[n[k]] = !(q[n[k]] = l))
                }
                if (f) {
                    if (e || a) {
                        if (e) {
                            j = [], k = r.length;
                            while (k--)(l = r[k]) && j.push(q[k] = l);
                            e(null, r = [], j, i)
                        }
                        k = r.length;
                        while (k--)(l = r[k]) && (j = e ? K.call(f, l) : m[k]) > -1 && (f[j] = !(g[j] = l))
                    }
                } else r = ub(r === g ? r.splice(o, r.length) : r), e ? e(null, g, r, i) : I.apply(g, r)
            })
        }

        function wb(a) {
            for (var b, c, e, f = a.length, g = d.relative[a[0].type], h = g || d.relative[" "], i = g ? 1 : 0, k = rb(function(a) {
                    return a === b
                }, h, !0), l = rb(function(a) {
                    return K.call(b, a) > -1
                }, h, !0), m = [function(a, c, d) {
                    return !g && (d || c !== j) || ((b = c).nodeType ? k(a, c, d) : l(a, c, d))
                }]; f > i; i++)
                if (c = d.relative[a[i].type]) m = [rb(sb(m), c)];
                else {
                    if (c = d.filter[a[i].type].apply(null, a[i].matches), c[u]) {
                        for (e = ++i; f > e; e++)
                            if (d.relative[a[e].type]) break;
                        return vb(i > 1 && sb(m), i > 1 && qb(a.slice(0, i - 1).concat({
                            value: " " === a[i - 2].type ? "*" : ""
                        })).replace(R, "$1"), c, e > i && wb(a.slice(i, e)), f > e && wb(a = a.slice(e)), f > e && qb(a))
                    }
                    m.push(c)
                }
            return sb(m)
        }

        function xb(a, b) {
            var c = b.length > 0,
                e = a.length > 0,
                f = function(f, g, h, i, k) {
                    var l, m, o, p = 0,
                        q = "0",
                        r = f && [],
                        s = [],
                        t = j,
                        u = f || e && d.find.TAG("*", k),
                        v = w += null == t ? 1 : Math.random() || .1,
                        x = u.length;
                    for (k && (j = g !== n && g); q !== x && null != (l = u[q]); q++) {
                        if (e && l) {
                            m = 0;
                            while (o = a[m++])
                                if (o(l, g, h)) {
                                    i.push(l);
                                    break
                                }
                            k && (w = v)
                        }
                        c && ((l = !o && l) && p--, f && r.push(l))
                    }
                    if (p += q, c && q !== p) {
                        m = 0;
                        while (o = b[m++]) o(r, s, g, h);
                        if (f) {
                            if (p > 0)
                                while (q--) r[q] || s[q] || (s[q] = G.call(i));
                            s = ub(s)
                        }
                        I.apply(i, s), k && !f && s.length > 0 && p + b.length > 1 && fb.uniqueSort(i)
                    }
                    return k && (w = v, j = t), r
                };
            return c ? hb(f) : f
        }
        return h = fb.compile = function(a, b) {
            var c, d = [],
                e = [],
                f = A[a + " "];
            if (!f) {
                b || (b = g(a)), c = b.length;
                while (c--) f = wb(b[c]), f[u] ? d.push(f) : e.push(f);
                f = A(a, xb(e, d)), f.selector = a
            }
            return f
        }, i = fb.select = function(a, b, e, f) {
            var i, j, k, l, m, n = "function" == typeof a && a,
                o = !f && g(a = n.selector || a);
            if (e = e || [], 1 === o.length) {
                if (j = o[0] = o[0].slice(0), j.length > 2 && "ID" === (k = j[0]).type && c.getById && 9 === b.nodeType && p && d.relative[j[1].type]) {
                    if (b = (d.find.ID(k.matches[0].replace(cb, db), b) || [])[0], !b) return e;
                    n && (b = b.parentNode), a = a.slice(j.shift().value.length)
                }
                i = X.needsContext.test(a) ? 0 : j.length;
                while (i--) {
                    if (k = j[i], d.relative[l = k.type]) break;
                    if ((m = d.find[l]) && (f = m(k.matches[0].replace(cb, db), ab.test(j[0].type) && ob(b.parentNode) || b))) {
                        if (j.splice(i, 1), a = f.length && qb(j), !a) return I.apply(e, f), e;
                        break
                    }
                }
            }
            return (n || h(a, o))(f, b, !p, e, ab.test(a) && ob(b.parentNode) || b), e
        }, c.sortStable = u.split("").sort(B).join("") === u, c.detectDuplicates = !!l, m(), c.sortDetached = ib(function(a) {
            return 1 & a.compareDocumentPosition(n.createElement("div"))
        }), ib(function(a) {
            return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href")
        }) || jb("type|href|height|width", function(a, b, c) {
            return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
        }), c.attributes && ib(function(a) {
            return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value")
        }) || jb("value", function(a, b, c) {
            return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue
        }), ib(function(a) {
            return null == a.getAttribute("disabled")
        }) || jb(L, function(a, b, c) {
            var d;
            return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
        }), fb
    }(a);
    n.find = t, n.expr = t.selectors, n.expr[":"] = n.expr.pseudos, n.unique = t.uniqueSort, n.text = t.getText, n.isXMLDoc = t.isXML, n.contains = t.contains;
    var u = n.expr.match.needsContext,
        v = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        w = /^.[^:#\[\.,]*$/;

    function x(a, b, c) {
        if (n.isFunction(b)) return n.grep(a, function(a, d) {
            return !!b.call(a, d, a) !== c
        });
        if (b.nodeType) return n.grep(a, function(a) {
            return a === b !== c
        });
        if ("string" == typeof b) {
            if (w.test(b)) return n.filter(b, a, c);
            b = n.filter(b, a)
        }
        return n.grep(a, function(a) {
            return g.call(b, a) >= 0 !== c
        })
    }
    n.filter = function(a, b, c) {
        var d = b[0];
        return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? n.find.matchesSelector(d, a) ? [d] : [] : n.find.matches(a, n.grep(b, function(a) {
            return 1 === a.nodeType
        }))
    }, n.fn.extend({
        find: function(a) {
            var b, c = this.length,
                d = [],
                e = this;
            if ("string" != typeof a) return this.pushStack(n(a).filter(function() {
                for (b = 0; c > b; b++)
                    if (n.contains(e[b], this)) return !0
            }));
            for (b = 0; c > b; b++) n.find(a, e[b], d);
            return d = this.pushStack(c > 1 ? n.unique(d) : d), d.selector = this.selector ? this.selector + " " + a : a, d
        },
        filter: function(a) {
            return this.pushStack(x(this, a || [], !1))
        },
        not: function(a) {
            return this.pushStack(x(this, a || [], !0))
        },
        is: function(a) {
            return !!x(this, "string" == typeof a && u.test(a) ? n(a) : a || [], !1).length
        }
    });
    var y, z = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        A = n.fn.init = function(a, b) {
            var c, d;
            if (!a) return this;
            if ("string" == typeof a) {
                if (c = "<" === a[0] && ">" === a[a.length - 1] && a.length >= 3 ? [null, a, null] : z.exec(a), !c || !c[1] && b) return !b || b.jquery ? (b || y).find(a) : this.constructor(b).find(a);
                if (c[1]) {
                    if (b = b instanceof n ? b[0] : b, n.merge(this, n.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : l, !0)), v.test(c[1]) && n.isPlainObject(b))
                        for (c in b) n.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                    return this
                }
                return d = l.getElementById(c[2]), d && d.parentNode && (this.length = 1, this[0] = d), this.context = l, this.selector = a, this
            }
            return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : n.isFunction(a) ? "undefined" != typeof y.ready ? y.ready(a) : a(n) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), n.makeArray(a, this))
        };
    A.prototype = n.fn, y = n(l);
    var B = /^(?:parents|prev(?:Until|All))/,
        C = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    n.extend({
        dir: function(a, b, c) {
            var d = [],
                e = void 0 !== c;
            while ((a = a[b]) && 9 !== a.nodeType)
                if (1 === a.nodeType) {
                    if (e && n(a).is(c)) break;
                    d.push(a)
                }
            return d
        },
        sibling: function(a, b) {
            for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
            return c
        }
    }), n.fn.extend({
        has: function(a) {
            var b = n(a, this),
                c = b.length;
            return this.filter(function() {
                for (var a = 0; c > a; a++)
                    if (n.contains(this, b[a])) return !0
            })
        },
        closest: function(a, b) {
            for (var c, d = 0, e = this.length, f = [], g = u.test(a) || "string" != typeof a ? n(a, b || this.context) : 0; e > d; d++)
                for (c = this[d]; c && c !== b; c = c.parentNode)
                    if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && n.find.matchesSelector(c, a))) {
                        f.push(c);
                        break
                    }
            return this.pushStack(f.length > 1 ? n.unique(f) : f)
        },
        index: function(a) {
            return a ? "string" == typeof a ? g.call(n(a), this[0]) : g.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(a, b) {
            return this.pushStack(n.unique(n.merge(this.get(), n(a, b))))
        },
        addBack: function(a) {
            return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
        }
    });

    function D(a, b) {
        while ((a = a[b]) && 1 !== a.nodeType);
        return a
    }
    n.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && 11 !== b.nodeType ? b : null
        },
        parents: function(a) {
            return n.dir(a, "parentNode")
        },
        parentsUntil: function(a, b, c) {
            return n.dir(a, "parentNode", c)
        },
        next: function(a) {
            return D(a, "nextSibling")
        },
        prev: function(a) {
            return D(a, "previousSibling")
        },
        nextAll: function(a) {
            return n.dir(a, "nextSibling")
        },
        prevAll: function(a) {
            return n.dir(a, "previousSibling")
        },
        nextUntil: function(a, b, c) {
            return n.dir(a, "nextSibling", c)
        },
        prevUntil: function(a, b, c) {
            return n.dir(a, "previousSibling", c)
        },
        siblings: function(a) {
            return n.sibling((a.parentNode || {}).firstChild, a)
        },
        children: function(a) {
            return n.sibling(a.firstChild)
        },
        contents: function(a) {
            return a.contentDocument || n.merge([], a.childNodes)
        }
    }, function(a, b) {
        n.fn[a] = function(c, d) {
            var e = n.map(this, b, c);
            return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = n.filter(d, e)), this.length > 1 && (C[a] || n.unique(e), B.test(a) && e.reverse()), this.pushStack(e)
        }
    });
    var E = /\S+/g,
        F = {};

    function G(a) {
        var b = F[a] = {};
        return n.each(a.match(E) || [], function(a, c) {
            b[c] = !0
        }), b
    }
    n.Callbacks = function(a) {
        a = "string" == typeof a ? F[a] || G(a) : n.extend({}, a);
        var b, c, d, e, f, g, h = [],
            i = !a.once && [],
            j = function(l) {
                for (b = a.memory && l, c = !0, g = e || 0, e = 0, f = h.length, d = !0; h && f > g; g++)
                    if (h[g].apply(l[0], l[1]) === !1 && a.stopOnFalse) {
                        b = !1;
                        break
                    }
                d = !1, h && (i ? i.length && j(i.shift()) : b ? h = [] : k.disable())
            },
            k = {
                add: function() {
                    if (h) {
                        var c = h.length;
                        ! function g(b) {
                            n.each(b, function(b, c) {
                                var d = n.type(c);
                                "function" === d ? a.unique && k.has(c) || h.push(c) : c && c.length && "string" !== d && g(c)
                            })
                        }(arguments), d ? f = h.length : b && (e = c, j(b))
                    }
                    return this
                },
                remove: function() {
                    return h && n.each(arguments, function(a, b) {
                        var c;
                        while ((c = n.inArray(b, h, c)) > -1) h.splice(c, 1), d && (f >= c && f--, g >= c && g--)
                    }), this
                },
                has: function(a) {
                    return a ? n.inArray(a, h) > -1 : !(!h || !h.length)
                },
                empty: function() {
                    return h = [], f = 0, this
                },
                disable: function() {
                    return h = i = b = void 0, this
                },
                disabled: function() {
                    return !h
                },
                lock: function() {
                    return i = void 0, b || k.disable(), this
                },
                locked: function() {
                    return !i
                },
                fireWith: function(a, b) {
                    return !h || c && !i || (b = b || [], b = [a, b.slice ? b.slice() : b], d ? i.push(b) : j(b)), this
                },
                fire: function() {
                    return k.fireWith(this, arguments), this
                },
                fired: function() {
                    return !!c
                }
            };
        return k
    }, n.extend({
        Deferred: function(a) {
            var b = [
                    ["resolve", "done", n.Callbacks("once memory"), "resolved"],
                    ["reject", "fail", n.Callbacks("once memory"), "rejected"],
                    ["notify", "progress", n.Callbacks("memory")]
                ],
                c = "pending",
                d = {
                    state: function() {
                        return c
                    },
                    always: function() {
                        return e.done(arguments).fail(arguments), this
                    },
                    then: function() {
                        var a = arguments;
                        return n.Deferred(function(c) {
                            n.each(b, function(b, f) {
                                var g = n.isFunction(a[b]) && a[b];
                                e[f[1]](function() {
                                    var a = g && g.apply(this, arguments);
                                    a && n.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
                                })
                            }), a = null
                        }).promise()
                    },
                    promise: function(a) {
                        return null != a ? n.extend(a, d) : d
                    }
                },
                e = {};
            return d.pipe = d.then, n.each(b, function(a, f) {
                var g = f[2],
                    h = f[3];
                d[f[1]] = g.add, h && g.add(function() {
                    c = h
                }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                    return e[f[0] + "With"](this === e ? d : this, arguments), this
                }, e[f[0] + "With"] = g.fireWith
            }), d.promise(e), a && a.call(e, e), e
        },
        when: function(a) {
            var b = 0,
                c = d.call(arguments),
                e = c.length,
                f = 1 !== e || a && n.isFunction(a.promise) ? e : 0,
                g = 1 === f ? a : n.Deferred(),
                h = function(a, b, c) {
                    return function(e) {
                        b[a] = this, c[a] = arguments.length > 1 ? d.call(arguments) : e, c === i ? g.notifyWith(b, c) : --f || g.resolveWith(b, c)
                    }
                },
                i, j, k;
            if (e > 1)
                for (i = new Array(e), j = new Array(e), k = new Array(e); e > b; b++) c[b] && n.isFunction(c[b].promise) ? c[b].promise().done(h(b, k, c)).fail(g.reject).progress(h(b, j, i)) : --f;
            return f || g.resolveWith(k, c), g.promise()
        }
    });
    var H;
    n.fn.ready = function(a) {
        return n.ready.promise().done(a), this
    }, n.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(a) {
            a ? n.readyWait++ : n.ready(!0)
        },
        ready: function(a) {
            (a === !0 ? --n.readyWait : n.isReady) || (n.isReady = !0, a !== !0 && --n.readyWait > 0 || (H.resolveWith(l, [n]), n.fn.triggerHandler && (n(l).triggerHandler("ready"), n(l).off("ready"))))
        }
    });

    function I() {
        l.removeEventListener("DOMContentLoaded", I, !1), a.removeEventListener("load", I, !1), n.ready()
    }
    n.ready.promise = function(b) {
        return H || (H = n.Deferred(), "complete" === l.readyState ? setTimeout(n.ready) : (l.addEventListener("DOMContentLoaded", I, !1), a.addEventListener("load", I, !1))), H.promise(b)
    }, n.ready.promise();
    var J = n.access = function(a, b, c, d, e, f, g) {
        var h = 0,
            i = a.length,
            j = null == c;
        if ("object" === n.type(c)) {
            e = !0;
            for (h in c) n.access(a, b, h, c[h], !0, f, g)
        } else if (void 0 !== d && (e = !0, n.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function(a, b, c) {
                return j.call(n(a), c)
            })), b))
            for (; i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
        return e ? a : j ? b.call(a) : i ? b(a[0], c) : f
    };
    n.acceptData = function(a) {
        return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType
    };

    function K() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {}
            }
        }), this.expando = n.expando + Math.random()
    }
    K.uid = 1, K.accepts = n.acceptData, K.prototype = {
        key: function(a) {
            if (!K.accepts(a)) return 0;
            var b = {},
                c = a[this.expando];
            if (!c) {
                c = K.uid++;
                try {
                    b[this.expando] = {
                        value: c
                    }, Object.defineProperties(a, b)
                } catch (d) {
                    b[this.expando] = c, n.extend(a, b)
                }
            }
            return this.cache[c] || (this.cache[c] = {}), c
        },
        set: function(a, b, c) {
            var d, e = this.key(a),
                f = this.cache[e];
            if ("string" == typeof b) f[b] = c;
            else if (n.isEmptyObject(f)) n.extend(this.cache[e], b);
            else
                for (d in b) f[d] = b[d];
            return f
        },
        get: function(a, b) {
            var c = this.cache[this.key(a)];
            return void 0 === b ? c : c[b]
        },
        access: function(a, b, c) {
            var d;
            return void 0 === b || b && "string" == typeof b && void 0 === c ? (d = this.get(a, b), void 0 !== d ? d : this.get(a, n.camelCase(b))) : (this.set(a, b, c), void 0 !== c ? c : b)
        },
        remove: function(a, b) {
            var c, d, e, f = this.key(a),
                g = this.cache[f];
            if (void 0 === b) this.cache[f] = {};
            else {
                n.isArray(b) ? d = b.concat(b.map(n.camelCase)) : (e = n.camelCase(b), b in g ? d = [b, e] : (d = e, d = d in g ? [d] : d.match(E) || [])), c = d.length;
                while (c--) delete g[d[c]]
            }
        },
        hasData: function(a) {
            return !n.isEmptyObject(this.cache[a[this.expando]] || {})
        },
        discard: function(a) {
            a[this.expando] && delete this.cache[a[this.expando]]
        }
    };
    var L = new K,
        M = new K,
        N = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        O = /([A-Z])/g;

    function P(a, b, c) {
        var d;
        if (void 0 === c && 1 === a.nodeType)
            if (d = "data-" + b.replace(O, "-$1").toLowerCase(), c = a.getAttribute(d), "string" == typeof c) {
                try {
                    c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : N.test(c) ? n.parseJSON(c) : c
                } catch (e) {}
                M.set(a, b, c)
            } else c = void 0;
        return c
    }
    n.extend({
        hasData: function(a) {
            return M.hasData(a) || L.hasData(a)
        },
        data: function(a, b, c) {
            return M.access(a, b, c)
        },
        removeData: function(a, b) {
            M.remove(a, b)
        },
        _data: function(a, b, c) {
            return L.access(a, b, c)
        },
        _removeData: function(a, b) {
            L.remove(a, b)
        }
    }), n.fn.extend({
        data: function(a, b) {
            var c, d, e, f = this[0],
                g = f && f.attributes;
            if (void 0 === a) {
                if (this.length && (e = M.get(f), 1 === f.nodeType && !L.get(f, "hasDataAttrs"))) {
                    c = g.length;
                    while (c--) g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = n.camelCase(d.slice(5)), P(f, d, e[d])));
                    L.set(f, "hasDataAttrs", !0)
                }
                return e
            }
            return "object" == typeof a ? this.each(function() {
                M.set(this, a)
            }) : J(this, function(b) {
                var c, d = n.camelCase(a);
                if (f && void 0 === b) {
                    if (c = M.get(f, a), void 0 !== c) return c;
                    if (c = M.get(f, d), void 0 !== c) return c;
                    if (c = P(f, d, void 0), void 0 !== c) return c
                } else this.each(function() {
                    var c = M.get(this, d);
                    M.set(this, d, b), -1 !== a.indexOf("-") && void 0 !== c && M.set(this, a, b)
                })
            }, null, b, arguments.length > 1, null, !0)
        },
        removeData: function(a) {
            return this.each(function() {
                M.remove(this, a)
            })
        }
    }), n.extend({
        queue: function(a, b, c) {
            var d;
            return a ? (b = (b || "fx") + "queue", d = L.get(a, b), c && (!d || n.isArray(c) ? d = L.access(a, b, n.makeArray(c)) : d.push(c)), d || []) : void 0
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = n.queue(a, b),
                d = c.length,
                e = c.shift(),
                f = n._queueHooks(a, b),
                g = function() {
                    n.dequeue(a, b)
                };
            "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire()
        },
        _queueHooks: function(a, b) {
            var c = b + "queueHooks";
            return L.get(a, c) || L.access(a, c, {
                empty: n.Callbacks("once memory").add(function() {
                    L.remove(a, [b + "queue", c])
                })
            })
        }
    }), n.fn.extend({
        queue: function(a, b) {
            var c = 2;
            return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? n.queue(this[0], a) : void 0 === b ? this : this.each(function() {
                var c = n.queue(this, a, b);
                n._queueHooks(this, a), "fx" === a && "inprogress" !== c[0] && n.dequeue(this, a)
            })
        },
        dequeue: function(a) {
            return this.each(function() {
                n.dequeue(this, a)
            })
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", [])
        },
        promise: function(a, b) {
            var c, d = 1,
                e = n.Deferred(),
                f = this,
                g = this.length,
                h = function() {
                    --d || e.resolveWith(f, [f])
                };
            "string" != typeof a && (b = a, a = void 0), a = a || "fx";
            while (g--) c = L.get(f[g], a + "queueHooks"), c && c.empty && (d++, c.empty.add(h));
            return h(), e.promise(b)
        }
    });
    var Q = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        R = ["Top", "Right", "Bottom", "Left"],
        S = function(a, b) {
            return a = b || a, "none" === n.css(a, "display") || !n.contains(a.ownerDocument, a)
        },
        T = /^(?:checkbox|radio)$/i;
    ! function() {
        var a = l.createDocumentFragment(),
            b = a.appendChild(l.createElement("div")),
            c = l.createElement("input");
        c.setAttribute("type", "radio"), c.setAttribute("checked", "checked"), c.setAttribute("name", "t"), b.appendChild(c), k.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, b.innerHTML = "<textarea>x</textarea>", k.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue
    }();
    var U = "undefined";
    k.focusinBubbles = "onfocusin" in a;
    var V = /^key/,
        W = /^(?:mouse|pointer|contextmenu)|click/,
        X = /^(?:focusinfocus|focusoutblur)$/,
        Y = /^([^.]*)(?:\.(.+)|)$/;

    function Z() {
        return !0
    }

    function $() {
        return !1
    }

    function _() {
        try {
            return l.activeElement
        } catch (a) {}
    }
    n.event = {
        global: {},
        add: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, o, p, q, r = L.get(a);
            if (r) {
                c.handler && (f = c, c = f.handler, e = f.selector), c.guid || (c.guid = n.guid++), (i = r.events) || (i = r.events = {}), (g = r.handle) || (g = r.handle = function(b) {
                    return typeof n !== U && n.event.triggered !== b.type ? n.event.dispatch.apply(a, arguments) : void 0
                }), b = (b || "").match(E) || [""], j = b.length;
                while (j--) h = Y.exec(b[j]) || [], o = q = h[1], p = (h[2] || "").split(".").sort(), o && (l = n.event.special[o] || {}, o = (e ? l.delegateType : l.bindType) || o, l = n.event.special[o] || {}, k = n.extend({
                    type: o,
                    origType: q,
                    data: d,
                    handler: c,
                    guid: c.guid,
                    selector: e,
                    needsContext: e && n.expr.match.needsContext.test(e),
                    namespace: p.join(".")
                }, f), (m = i[o]) || (m = i[o] = [], m.delegateCount = 0, l.setup && l.setup.call(a, d, p, g) !== !1 || a.addEventListener && a.addEventListener(o, g, !1)), l.add && (l.add.call(a, k), k.handler.guid || (k.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, k) : m.push(k), n.event.global[o] = !0)
            }
        },
        remove: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, o, p, q, r = L.hasData(a) && L.get(a);
            if (r && (i = r.events)) {
                b = (b || "").match(E) || [""], j = b.length;
                while (j--)
                    if (h = Y.exec(b[j]) || [], o = q = h[1], p = (h[2] || "").split(".").sort(), o) {
                        l = n.event.special[o] || {}, o = (d ? l.delegateType : l.bindType) || o, m = i[o] || [], h = h[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), g = f = m.length;
                        while (f--) k = m[f], !e && q !== k.origType || c && c.guid !== k.guid || h && !h.test(k.namespace) || d && d !== k.selector && ("**" !== d || !k.selector) || (m.splice(f, 1), k.selector && m.delegateCount--, l.remove && l.remove.call(a, k));
                        g && !m.length && (l.teardown && l.teardown.call(a, p, r.handle) !== !1 || n.removeEvent(a, o, r.handle), delete i[o])
                    } else
                        for (o in i) n.event.remove(a, o + b[j], c, d, !0);
                n.isEmptyObject(i) && (delete r.handle, L.remove(a, "events"))
            }
        },
        trigger: function(b, c, d, e) {
            var f, g, h, i, k, m, o, p = [d || l],
                q = j.call(b, "type") ? b.type : b,
                r = j.call(b, "namespace") ? b.namespace.split(".") : [];
            if (g = h = d = d || l, 3 !== d.nodeType && 8 !== d.nodeType && !X.test(q + n.event.triggered) && (q.indexOf(".") >= 0 && (r = q.split("."), q = r.shift(), r.sort()), k = q.indexOf(":") < 0 && "on" + q, b = b[n.expando] ? b : new n.Event(q, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = r.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + r.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : n.makeArray(c, [b]), o = n.event.special[q] || {}, e || !o.trigger || o.trigger.apply(d, c) !== !1)) {
                if (!e && !o.noBubble && !n.isWindow(d)) {
                    for (i = o.delegateType || q, X.test(i + q) || (g = g.parentNode); g; g = g.parentNode) p.push(g), h = g;
                    h === (d.ownerDocument || l) && p.push(h.defaultView || h.parentWindow || a)
                }
                f = 0;
                while ((g = p[f++]) && !b.isPropagationStopped()) b.type = f > 1 ? i : o.bindType || q, m = (L.get(g, "events") || {})[b.type] && L.get(g, "handle"), m && m.apply(g, c), m = k && g[k], m && m.apply && n.acceptData(g) && (b.result = m.apply(g, c), b.result === !1 && b.preventDefault());
                return b.type = q, e || b.isDefaultPrevented() || o._default && o._default.apply(p.pop(), c) !== !1 || !n.acceptData(d) || k && n.isFunction(d[q]) && !n.isWindow(d) && (h = d[k], h && (d[k] = null), n.event.triggered = q, d[q](), n.event.triggered = void 0, h && (d[k] = h)), b.result
            }
        },
        dispatch: function(a) {
            a = n.event.fix(a);
            var b, c, e, f, g, h = [],
                i = d.call(arguments),
                j = (L.get(this, "events") || {})[a.type] || [],
                k = n.event.special[a.type] || {};
            if (i[0] = a, a.delegateTarget = this, !k.preDispatch || k.preDispatch.call(this, a) !== !1) {
                h = n.event.handlers.call(this, a, j), b = 0;
                while ((f = h[b++]) && !a.isPropagationStopped()) {
                    a.currentTarget = f.elem, c = 0;
                    while ((g = f.handlers[c++]) && !a.isImmediatePropagationStopped())(!a.namespace_re || a.namespace_re.test(g.namespace)) && (a.handleObj = g, a.data = g.data, e = ((n.event.special[g.origType] || {}).handle || g.handler).apply(f.elem, i), void 0 !== e && (a.result = e) === !1 && (a.preventDefault(), a.stopPropagation()))
                }
                return k.postDispatch && k.postDispatch.call(this, a), a.result
            }
        },
        handlers: function(a, b) {
            var c, d, e, f, g = [],
                h = b.delegateCount,
                i = a.target;
            if (h && i.nodeType && (!a.button || "click" !== a.type))
                for (; i !== this; i = i.parentNode || this)
                    if (i.disabled !== !0 || "click" !== a.type) {
                        for (d = [], c = 0; h > c; c++) f = b[c], e = f.selector + " ", void 0 === d[e] && (d[e] = f.needsContext ? n(e, this).index(i) >= 0 : n.find(e, this, null, [i]).length), d[e] && d.push(f);
                        d.length && g.push({
                            elem: i,
                            handlers: d
                        })
                    }
            return h < b.length && g.push({
                elem: this,
                handlers: b.slice(h)
            }), g
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, b) {
                var c, d, e, f = b.button;
                return null == a.pageX && null != b.clientX && (c = a.target.ownerDocument || l, d = c.documentElement, e = c.body, a.pageX = b.clientX + (d && d.scrollLeft || e && e.scrollLeft || 0) - (d && d.clientLeft || e && e.clientLeft || 0), a.pageY = b.clientY + (d && d.scrollTop || e && e.scrollTop || 0) - (d && d.clientTop || e && e.clientTop || 0)), a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a
            }
        },
        fix: function(a) {
            if (a[n.expando]) return a;
            var b, c, d, e = a.type,
                f = a,
                g = this.fixHooks[e];
            g || (this.fixHooks[e] = g = W.test(e) ? this.mouseHooks : V.test(e) ? this.keyHooks : {}), d = g.props ? this.props.concat(g.props) : this.props, a = new n.Event(f), b = d.length;
            while (b--) c = d[b], a[c] = f[c];
            return a.target || (a.target = l), 3 === a.target.nodeType && (a.target = a.target.parentNode), g.filter ? g.filter(a, f) : a
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    return this !== _() && this.focus ? (this.focus(), !1) : void 0
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    return this === _() && this.blur ? (this.blur(), !1) : void 0
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    return "checkbox" === this.type && this.click && n.nodeName(this, "input") ? (this.click(), !1) : void 0
                },
                _default: function(a) {
                    return n.nodeName(a.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(a) {
                    void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = n.extend(new n.Event, c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? n.event.trigger(e, null, b) : n.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault()
        }
    }, n.removeEvent = function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1)
    }, n.Event = function(a, b) {
        return this instanceof n.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? Z : $) : this.type = a, b && n.extend(this, b), this.timeStamp = a && a.timeStamp || n.now(), void(this[n.expando] = !0)) : new n.Event(a, b)
    }, n.Event.prototype = {
        isDefaultPrevented: $,
        isPropagationStopped: $,
        isImmediatePropagationStopped: $,
        preventDefault: function() {
            var a = this.originalEvent;
            this.isDefaultPrevented = Z, a && a.preventDefault && a.preventDefault()
        },
        stopPropagation: function() {
            var a = this.originalEvent;
            this.isPropagationStopped = Z, a && a.stopPropagation && a.stopPropagation()
        },
        stopImmediatePropagation: function() {
            var a = this.originalEvent;
            this.isImmediatePropagationStopped = Z, a && a.stopImmediatePropagation && a.stopImmediatePropagation(), this.stopPropagation()
        }
    }, n.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(a, b) {
        n.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c, d = this,
                    e = a.relatedTarget,
                    f = a.handleObj;
                return (!e || e !== d && !n.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b), c
            }
        }
    }), k.focusinBubbles || n.each({
        focus: "focusin",
        blur: "focusout"
    }, function(a, b) {
        var c = function(a) {
            n.event.simulate(b, a.target, n.event.fix(a), !0)
        };
        n.event.special[b] = {
            setup: function() {
                var d = this.ownerDocument || this,
                    e = L.access(d, b);
                e || d.addEventListener(a, c, !0), L.access(d, b, (e || 0) + 1)
            },
            teardown: function() {
                var d = this.ownerDocument || this,
                    e = L.access(d, b) - 1;
                e ? L.access(d, b, e) : (d.removeEventListener(a, c, !0), L.remove(d, b))
            }
        }
    }), n.fn.extend({
        on: function(a, b, c, d, e) {
            var f, g;
            if ("object" == typeof a) {
                "string" != typeof b && (c = c || b, b = void 0);
                for (g in a) this.on(g, b, c, a[g], e);
                return this
            }
            if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = $;
            else if (!d) return this;
            return 1 === e && (f = d, d = function(a) {
                return n().off(a), f.apply(this, arguments)
            }, d.guid = f.guid || (f.guid = n.guid++)), this.each(function() {
                n.event.add(this, a, d, c, b)
            })
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1)
        },
        off: function(a, b, c) {
            var d, e;
            if (a && a.preventDefault && a.handleObj) return d = a.handleObj, n(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), this;
            if ("object" == typeof a) {
                for (e in a) this.off(e, b, a[e]);
                return this
            }
            return (b === !1 || "function" == typeof b) && (c = b, b = void 0), c === !1 && (c = $), this.each(function() {
                n.event.remove(this, a, c, b)
            })
        },
        trigger: function(a, b) {
            return this.each(function() {
                n.event.trigger(a, b, this)
            })
        },
        triggerHandler: function(a, b) {
            var c = this[0];
            return c ? n.event.trigger(a, b, c, !0) : void 0
        }
    });
    var ab = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        bb = /<([\w:]+)/,
        cb = /<|&#?\w+;/,
        db = /<(?:script|style|link)/i,
        eb = /checked\s*(?:[^=]|=\s*.checked.)/i,
        fb = /^$|\/(?:java|ecma)script/i,
        gb = /^true\/(.*)/,
        hb = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        ib = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    ib.optgroup = ib.option, ib.tbody = ib.tfoot = ib.colgroup = ib.caption = ib.thead, ib.th = ib.td;

    function jb(a, b) {
        return n.nodeName(a, "table") && n.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
    }

    function kb(a) {
        return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a
    }

    function lb(a) {
        var b = gb.exec(a.type);
        return b ? a.type = b[1] : a.removeAttribute("type"), a
    }

    function mb(a, b) {
        for (var c = 0, d = a.length; d > c; c++) L.set(a[c], "globalEval", !b || L.get(b[c], "globalEval"))
    }

    function nb(a, b) {
        var c, d, e, f, g, h, i, j;
        if (1 === b.nodeType) {
            if (L.hasData(a) && (f = L.access(a), g = L.set(b, f), j = f.events)) {
                delete g.handle, g.events = {};
                for (e in j)
                    for (c = 0, d = j[e].length; d > c; c++) n.event.add(b, e, j[e][c])
            }
            M.hasData(a) && (h = M.access(a), i = n.extend({}, h), M.set(b, i))
        }
    }

    function ob(a, b) {
        var c = a.getElementsByTagName ? a.getElementsByTagName(b || "*") : a.querySelectorAll ? a.querySelectorAll(b || "*") : [];
        return void 0 === b || b && n.nodeName(a, b) ? n.merge([a], c) : c
    }

    function pb(a, b) {
        var c = b.nodeName.toLowerCase();
        "input" === c && T.test(a.type) ? b.checked = a.checked : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue)
    }
    n.extend({
        clone: function(a, b, c) {
            var d, e, f, g, h = a.cloneNode(!0),
                i = n.contains(a.ownerDocument, a);
            if (!(k.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || n.isXMLDoc(a)))
                for (g = ob(h), f = ob(a), d = 0, e = f.length; e > d; d++) pb(f[d], g[d]);
            if (b)
                if (c)
                    for (f = f || ob(a), g = g || ob(h), d = 0, e = f.length; e > d; d++) nb(f[d], g[d]);
                else nb(a, h);
            return g = ob(h, "script"), g.length > 0 && mb(g, !i && ob(a, "script")), h
        },
        buildFragment: function(a, b, c, d) {
            for (var e, f, g, h, i, j, k = b.createDocumentFragment(), l = [], m = 0, o = a.length; o > m; m++)
                if (e = a[m], e || 0 === e)
                    if ("object" === n.type(e)) n.merge(l, e.nodeType ? [e] : e);
                    else if (cb.test(e)) {
                f = f || k.appendChild(b.createElement("div")), g = (bb.exec(e) || ["", ""])[1].toLowerCase(), h = ib[g] || ib._default, f.innerHTML = h[1] + e.replace(ab, "<$1></$2>") + h[2], j = h[0];
                while (j--) f = f.lastChild;
                n.merge(l, f.childNodes), f = k.firstChild, f.textContent = ""
            } else l.push(b.createTextNode(e));
            k.textContent = "", m = 0;
            while (e = l[m++])
                if ((!d || -1 === n.inArray(e, d)) && (i = n.contains(e.ownerDocument, e), f = ob(k.appendChild(e), "script"), i && mb(f), c)) {
                    j = 0;
                    while (e = f[j++]) fb.test(e.type || "") && c.push(e)
                }
            return k
        },
        cleanData: function(a) {
            for (var b, c, d, e, f = n.event.special, g = 0; void 0 !== (c = a[g]); g++) {
                if (n.acceptData(c) && (e = c[L.expando], e && (b = L.cache[e]))) {
                    if (b.events)
                        for (d in b.events) f[d] ? n.event.remove(c, d) : n.removeEvent(c, d, b.handle);
                    L.cache[e] && delete L.cache[e]
                }
                delete M.cache[c[M.expando]]
            }
        }
    }), n.fn.extend({
        text: function(a) {
            return J(this, function(a) {
                return void 0 === a ? n.text(this) : this.empty().each(function() {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = a)
                })
            }, null, a, arguments.length)
        },
        append: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = jb(this, a);
                    b.appendChild(a)
                }
            })
        },
        prepend: function() {
            return this.domManip(arguments, function(a) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var b = jb(this, a);
                    b.insertBefore(a, b.firstChild)
                }
            })
        },
        before: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this)
            })
        },
        after: function() {
            return this.domManip(arguments, function(a) {
                this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
            })
        },
        remove: function(a, b) {
            for (var c, d = a ? n.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || n.cleanData(ob(c)), c.parentNode && (b && n.contains(c.ownerDocument, c) && mb(ob(c, "script")), c.parentNode.removeChild(c));
            return this
        },
        empty: function() {
            for (var a, b = 0; null != (a = this[b]); b++) 1 === a.nodeType && (n.cleanData(ob(a, !1)), a.textContent = "");
            return this
        },
        clone: function(a, b) {
            return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                return n.clone(this, a, b)
            })
        },
        html: function(a) {
            return J(this, function(a) {
                var b = this[0] || {},
                    c = 0,
                    d = this.length;
                if (void 0 === a && 1 === b.nodeType) return b.innerHTML;
                if ("string" == typeof a && !db.test(a) && !ib[(bb.exec(a) || ["", ""])[1].toLowerCase()]) {
                    a = a.replace(ab, "<$1></$2>");
                    try {
                        for (; d > c; c++) b = this[c] || {}, 1 === b.nodeType && (n.cleanData(ob(b, !1)), b.innerHTML = a);
                        b = 0
                    } catch (e) {}
                }
                b && this.empty().append(a)
            }, null, a, arguments.length)
        },
        replaceWith: function() {
            var a = arguments[0];
            return this.domManip(arguments, function(b) {
                a = this.parentNode, n.cleanData(ob(this)), a && a.replaceChild(b, this)
            }), a && (a.length || a.nodeType) ? this : this.remove()
        },
        detach: function(a) {
            return this.remove(a, !0)
        },
        domManip: function(a, b) {
            a = e.apply([], a);
            var c, d, f, g, h, i, j = 0,
                l = this.length,
                m = this,
                o = l - 1,
                p = a[0],
                q = n.isFunction(p);
            if (q || l > 1 && "string" == typeof p && !k.checkClone && eb.test(p)) return this.each(function(c) {
                var d = m.eq(c);
                q && (a[0] = p.call(this, c, d.html())), d.domManip(a, b)
            });
            if (l && (c = n.buildFragment(a, this[0].ownerDocument, !1, this), d = c.firstChild, 1 === c.childNodes.length && (c = d), d)) {
                for (f = n.map(ob(c, "script"), kb), g = f.length; l > j; j++) h = c, j !== o && (h = n.clone(h, !0, !0), g && n.merge(f, ob(h, "script"))), b.call(this[j], h, j);
                if (g)
                    for (i = f[f.length - 1].ownerDocument, n.map(f, lb), j = 0; g > j; j++) h = f[j], fb.test(h.type || "") && !L.access(h, "globalEval") && n.contains(i, h) && (h.src ? n._evalUrl && n._evalUrl(h.src) : n.globalEval(h.textContent.replace(hb, "")))
            }
            return this
        }
    }), n.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(a, b) {
        n.fn[a] = function(a) {
            for (var c, d = [], e = n(a), g = e.length - 1, h = 0; g >= h; h++) c = h === g ? this : this.clone(!0), n(e[h])[b](c), f.apply(d, c.get());
            return this.pushStack(d)
        }
    });
    var qb, rb = {};

    function sb(b, c) {
        var d, e = n(c.createElement(b)).appendTo(c.body),
            f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display : n.css(e[0], "display");
        return e.detach(), f
    }

    function tb(a) {
        var b = l,
            c = rb[a];
        return c || (c = sb(a, b), "none" !== c && c || (qb = (qb || n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = qb[0].contentDocument, b.write(), b.close(), c = sb(a, b), qb.detach()), rb[a] = c), c
    }
    var ub = /^margin/,
        vb = new RegExp("^(" + Q + ")(?!px)[a-z%]+$", "i"),
        wb = function(a) {
            return a.ownerDocument.defaultView.getComputedStyle(a, null)
        };

    function xb(a, b, c) {
        var d, e, f, g, h = a.style;
        return c = c || wb(a), c && (g = c.getPropertyValue(b) || c[b]), c && ("" !== g || n.contains(a.ownerDocument, a) || (g = n.style(a, b)), vb.test(g) && ub.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)), void 0 !== g ? g + "" : g
    }

    function yb(a, b) {
        return {
            get: function() {
                return a() ? void delete this.get : (this.get = b).apply(this, arguments)
            }
        }
    }! function() {
        var b, c, d = l.documentElement,
            e = l.createElement("div"),
            f = l.createElement("div");
        if (f.style) {
            f.style.backgroundClip = "content-box", f.cloneNode(!0).style.backgroundClip = "", k.clearCloneStyle = "content-box" === f.style.backgroundClip, e.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", e.appendChild(f);

            function g() {
                f.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", f.innerHTML = "", d.appendChild(e);
                var g = a.getComputedStyle(f, null);
                b = "1%" !== g.top, c = "4px" === g.width, d.removeChild(e)
            }
            a.getComputedStyle && n.extend(k, {
                pixelPosition: function() {
                    return g(), b
                },
                boxSizingReliable: function() {
                    return null == c && g(), c
                },
                reliableMarginRight: function() {
                    var b, c = f.appendChild(l.createElement("div"));
                    return c.style.cssText = f.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", c.style.marginRight = c.style.width = "0", f.style.width = "1px", d.appendChild(e), b = !parseFloat(a.getComputedStyle(c, null).marginRight), d.removeChild(e), b
                }
            })
        }
    }(), n.swap = function(a, b, c, d) {
        var e, f, g = {};
        for (f in b) g[f] = a.style[f], a.style[f] = b[f];
        e = c.apply(a, d || []);
        for (f in b) a.style[f] = g[f];
        return e
    };
    var zb = /^(none|table(?!-c[ea]).+)/,
        Ab = new RegExp("^(" + Q + ")(.*)$", "i"),
        Bb = new RegExp("^([+-])=(" + Q + ")", "i"),
        Cb = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        Db = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        Eb = ["Webkit", "O", "Moz", "ms"];

    function Fb(a, b) {
        if (b in a) return b;
        var c = b[0].toUpperCase() + b.slice(1),
            d = b,
            e = Eb.length;
        while (e--)
            if (b = Eb[e] + c, b in a) return b;
        return d
    }

    function Gb(a, b, c) {
        var d = Ab.exec(b);
        return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
    }

    function Hb(a, b, c, d, e) {
        for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += n.css(a, c + R[f], !0, e)), d ? ("content" === c && (g -= n.css(a, "padding" + R[f], !0, e)), "margin" !== c && (g -= n.css(a, "border" + R[f] + "Width", !0, e))) : (g += n.css(a, "padding" + R[f], !0, e), "padding" !== c && (g += n.css(a, "border" + R[f] + "Width", !0, e)));
        return g
    }

    function Ib(a, b, c) {
        var d = !0,
            e = "width" === b ? a.offsetWidth : a.offsetHeight,
            f = wb(a),
            g = "border-box" === n.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
            if (e = xb(a, b, f), (0 > e || null == e) && (e = a.style[b]), vb.test(e)) return e;
            d = g && (k.boxSizingReliable() || e === a.style[b]), e = parseFloat(e) || 0
        }
        return e + Hb(a, b, c || (g ? "border" : "content"), d, f) + "px"
    }

    function Jb(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = L.get(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && S(d) && (f[g] = L.access(d, "olddisplay", tb(d.nodeName)))) : (e = S(d), "none" === c && e || L.set(d, "olddisplay", e ? c : n.css(d, "display"))));
        for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
        return a
    }
    n.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = xb(a, "opacity");
                        return "" === c ? "1" : c
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": "cssFloat"
        },
        style: function(a, b, c, d) {
            if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                var e, f, g, h = n.camelCase(b),
                    i = a.style;
                return b = n.cssProps[h] || (n.cssProps[h] = Fb(i, h)), g = n.cssHooks[b] || n.cssHooks[h], void 0 === c ? g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b] : (f = typeof c, "string" === f && (e = Bb.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(n.css(a, b)), f = "number"), null != c && c === c && ("number" !== f || n.cssNumber[h] || (c += "px"), k.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), g && "set" in g && void 0 === (c = g.set(a, c, d)) || (i[b] = c)), void 0)
            }
        },
        css: function(a, b, c, d) {
            var e, f, g, h = n.camelCase(b);
            return b = n.cssProps[h] || (n.cssProps[h] = Fb(a.style, h)), g = n.cssHooks[b] || n.cssHooks[h], g && "get" in g && (e = g.get(a, !0, c)), void 0 === e && (e = xb(a, b, d)), "normal" === e && b in Db && (e = Db[b]), "" === c || c ? (f = parseFloat(e), c === !0 || n.isNumeric(f) ? f || 0 : e) : e
        }
    }), n.each(["height", "width"], function(a, b) {
        n.cssHooks[b] = {
            get: function(a, c, d) {
                return c ? zb.test(n.css(a, "display")) && 0 === a.offsetWidth ? n.swap(a, Cb, function() {
                    return Ib(a, b, d)
                }) : Ib(a, b, d) : void 0
            },
            set: function(a, c, d) {
                var e = d && wb(a);
                return Gb(a, c, d ? Hb(a, b, d, "border-box" === n.css(a, "boxSizing", !1, e), e) : 0)
            }
        }
    }), n.cssHooks.marginRight = yb(k.reliableMarginRight, function(a, b) {
        return b ? n.swap(a, {
            display: "inline-block"
        }, xb, [a, "marginRight"]) : void 0
    }), n.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(a, b) {
        n.cssHooks[a + b] = {
            expand: function(c) {
                for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + R[d] + b] = f[d] || f[d - 2] || f[0];
                return e
            }
        }, ub.test(a) || (n.cssHooks[a + b].set = Gb)
    }), n.fn.extend({
        css: function(a, b) {
            return J(this, function(a, b, c) {
                var d, e, f = {},
                    g = 0;
                if (n.isArray(b)) {
                    for (d = wb(a), e = b.length; e > g; g++) f[b[g]] = n.css(a, b[g], !1, d);
                    return f
                }
                return void 0 !== c ? n.style(a, b, c) : n.css(a, b)
            }, a, b, arguments.length > 1)
        },
        show: function() {
            return Jb(this, !0)
        },
        hide: function() {
            return Jb(this)
        },
        toggle: function(a) {
            return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                S(this) ? n(this).show() : n(this).hide()
            })
        }
    });

    function Kb(a, b, c, d, e) {
        return new Kb.prototype.init(a, b, c, d, e)
    }
    n.Tween = Kb, Kb.prototype = {
        constructor: Kb,
        init: function(a, b, c, d, e, f) {
            this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || (n.cssNumber[c] ? "" : "px")
        },
        cur: function() {
            var a = Kb.propHooks[this.prop];
            return a && a.get ? a.get(this) : Kb.propHooks._default.get(this)
        },
        run: function(a) {
            var b, c = Kb.propHooks[this.prop];
            return this.pos = b = this.options.duration ? n.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : Kb.propHooks._default.set(this), this
        }
    }, Kb.prototype.init.prototype = Kb.prototype, Kb.propHooks = {
        _default: {
            get: function(a) {
                var b;
                return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = n.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
            },
            set: function(a) {
                n.fx.step[a.prop] ? n.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[n.cssProps[a.prop]] || n.cssHooks[a.prop]) ? n.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
            }
        }
    }, Kb.propHooks.scrollTop = Kb.propHooks.scrollLeft = {
        set: function(a) {
            a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
        }
    }, n.easing = {
        linear: function(a) {
            return a
        },
        swing: function(a) {
            return .5 - Math.cos(a * Math.PI) / 2
        }
    }, n.fx = Kb.prototype.init, n.fx.step = {};
    var Lb, Mb, Nb = /^(?:toggle|show|hide)$/,
        Ob = new RegExp("^(?:([+-])=|)(" + Q + ")([a-z%]*)$", "i"),
        Pb = /queueHooks$/,
        Qb = [Vb],
        Rb = {
            "*": [function(a, b) {
                var c = this.createTween(a, b),
                    d = c.cur(),
                    e = Ob.exec(b),
                    f = e && e[3] || (n.cssNumber[a] ? "" : "px"),
                    g = (n.cssNumber[a] || "px" !== f && +d) && Ob.exec(n.css(c.elem, a)),
                    h = 1,
                    i = 20;
                if (g && g[3] !== f) {
                    f = f || g[3], e = e || [], g = +d || 1;
                    do h = h || ".5", g /= h, n.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i)
                }
                return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), c
            }]
        };

    function Sb() {
        return setTimeout(function() {
            Lb = void 0
        }), Lb = n.now()
    }

    function Tb(a, b) {
        var c, d = 0,
            e = {
                height: a
            };
        for (b = b ? 1 : 0; 4 > d; d += 2 - b) c = R[d], e["margin" + c] = e["padding" + c] = a;
        return b && (e.opacity = e.width = a), e
    }

    function Ub(a, b, c) {
        for (var d, e = (Rb[b] || []).concat(Rb["*"]), f = 0, g = e.length; g > f; f++)
            if (d = e[f].call(c, b, a)) return d
    }

    function Vb(a, b, c) {
        var d, e, f, g, h, i, j, k, l = this,
            m = {},
            o = a.style,
            p = a.nodeType && S(a),
            q = L.get(a, "fxshow");
        c.queue || (h = n._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function() {
            h.unqueued || i()
        }), h.unqueued++, l.always(function() {
            l.always(function() {
                h.unqueued--, n.queue(a, "fx").length || h.empty.fire()
            })
        })), 1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [o.overflow, o.overflowX, o.overflowY], j = n.css(a, "display"), k = "none" === j ? L.get(a, "olddisplay") || tb(a.nodeName) : j, "inline" === k && "none" === n.css(a, "float") && (o.display = "inline-block")), c.overflow && (o.overflow = "hidden", l.always(function() {
            o.overflow = c.overflow[0], o.overflowX = c.overflow[1], o.overflowY = c.overflow[2]
        }));
        for (d in b)
            if (e = b[d], Nb.exec(e)) {
                if (delete b[d], f = f || "toggle" === e, e === (p ? "hide" : "show")) {
                    if ("show" !== e || !q || void 0 === q[d]) continue;
                    p = !0
                }
                m[d] = q && q[d] || n.style(a, d)
            } else j = void 0;
        if (n.isEmptyObject(m)) "inline" === ("none" === j ? tb(a.nodeName) : j) && (o.display = j);
        else {
            q ? "hidden" in q && (p = q.hidden) : q = L.access(a, "fxshow", {}), f && (q.hidden = !p), p ? n(a).show() : l.done(function() {
                n(a).hide()
            }), l.done(function() {
                var b;
                L.remove(a, "fxshow");
                for (b in m) n.style(a, b, m[b])
            });
            for (d in m) g = Ub(p ? q[d] : 0, d, l), d in q || (q[d] = g.start, p && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
        }
    }

    function Wb(a, b) {
        var c, d, e, f, g;
        for (c in a)
            if (d = n.camelCase(c), e = b[d], f = a[c], n.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = n.cssHooks[d], g && "expand" in g) {
                f = g.expand(f), delete a[d];
                for (c in f) c in a || (a[c] = f[c], b[c] = e)
            } else b[d] = e
    }

    function Xb(a, b, c) {
        var d, e, f = 0,
            g = Qb.length,
            h = n.Deferred().always(function() {
                delete i.elem
            }),
            i = function() {
                if (e) return !1;
                for (var b = Lb || Sb(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
                return h.notifyWith(a, [j, f, c]), 1 > f && i ? c : (h.resolveWith(a, [j]), !1)
            },
            j = h.promise({
                elem: a,
                props: n.extend({}, b),
                opts: n.extend(!0, {
                    specialEasing: {}
                }, c),
                originalProperties: b,
                originalOptions: c,
                startTime: Lb || Sb(),
                duration: c.duration,
                tweens: [],
                createTween: function(b, c) {
                    var d = n.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                    return j.tweens.push(d), d
                },
                stop: function(b) {
                    var c = 0,
                        d = b ? j.tweens.length : 0;
                    if (e) return this;
                    for (e = !0; d > c; c++) j.tweens[c].run(1);
                    return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this
                }
            }),
            k = j.props;
        for (Wb(k, j.opts.specialEasing); g > f; f++)
            if (d = Qb[f].call(j, a, k, j.opts)) return d;
        return n.map(k, Ub, j), n.isFunction(j.opts.start) && j.opts.start.call(a, j), n.fx.timer(n.extend(i, {
            elem: a,
            anim: j,
            queue: j.opts.queue
        })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
    }
    n.Animation = n.extend(Xb, {
            tweener: function(a, b) {
                n.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
                for (var c, d = 0, e = a.length; e > d; d++) c = a[d], Rb[c] = Rb[c] || [], Rb[c].unshift(b)
            },
            prefilter: function(a, b) {
                b ? Qb.unshift(a) : Qb.push(a)
            }
        }), n.speed = function(a, b, c) {
            var d = a && "object" == typeof a ? n.extend({}, a) : {
                complete: c || !c && b || n.isFunction(a) && a,
                duration: a,
                easing: c && b || b && !n.isFunction(b) && b
            };
            return d.duration = n.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in n.fx.speeds ? n.fx.speeds[d.duration] : n.fx.speeds._default, (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
                n.isFunction(d.old) && d.old.call(this), d.queue && n.dequeue(this, d.queue)
            }, d
        }, n.fn.extend({
            fadeTo: function(a, b, c, d) {
                return this.filter(S).css("opacity", 0).show().end().animate({
                    opacity: b
                }, a, c, d)
            },
            animate: function(a, b, c, d) {
                var e = n.isEmptyObject(a),
                    f = n.speed(b, c, d),
                    g = function() {
                        var b = Xb(this, n.extend({}, a), f);
                        (e || L.get(this, "finish")) && b.stop(!0)
                    };
                return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
            },
            stop: function(a, b, c) {
                var d = function(a) {
                    var b = a.stop;
                    delete a.stop, b(c)
                };
                return "string" != typeof a && (c = b, b = a, a = void 0), b && a !== !1 && this.queue(a || "fx", []), this.each(function() {
                    var b = !0,
                        e = null != a && a + "queueHooks",
                        f = n.timers,
                        g = L.get(this);
                    if (e) g[e] && g[e].stop && d(g[e]);
                    else
                        for (e in g) g[e] && g[e].stop && Pb.test(e) && d(g[e]);
                    for (e = f.length; e--;) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1));
                    (b || !c) && n.dequeue(this, a)
                })
            },
            finish: function(a) {
                return a !== !1 && (a = a || "fx"), this.each(function() {
                    var b, c = L.get(this),
                        d = c[a + "queue"],
                        e = c[a + "queueHooks"],
                        f = n.timers,
                        g = d ? d.length : 0;
                    for (c.finish = !0, n.queue(this, a, []), e && e.stop && e.stop.call(this, !0), b = f.length; b--;) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
                    for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                    delete c.finish
                })
            }
        }), n.each(["toggle", "show", "hide"], function(a, b) {
            var c = n.fn[b];
            n.fn[b] = function(a, d, e) {
                return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(Tb(b, !0), a, d, e)
            }
        }), n.each({
            slideDown: Tb("show"),
            slideUp: Tb("hide"),
            slideToggle: Tb("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function(a, b) {
            n.fn[a] = function(a, c, d) {
                return this.animate(b, a, c, d)
            }
        }), n.timers = [], n.fx.tick = function() {
            var a, b = 0,
                c = n.timers;
            for (Lb = n.now(); b < c.length; b++) a = c[b], a() || c[b] !== a || c.splice(b--, 1);
            c.length || n.fx.stop(), Lb = void 0
        }, n.fx.timer = function(a) {
            n.timers.push(a), a() ? n.fx.start() : n.timers.pop()
        }, n.fx.interval = 13, n.fx.start = function() {
            Mb || (Mb = setInterval(n.fx.tick, n.fx.interval))
        }, n.fx.stop = function() {
            clearInterval(Mb), Mb = null
        }, n.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        }, n.fn.delay = function(a, b) {
            return a = n.fx ? n.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
                var d = setTimeout(b, a);
                c.stop = function() {
                    clearTimeout(d)
                }
            })
        },
        function() {
            var a = l.createElement("input"),
                b = l.createElement("select"),
                c = b.appendChild(l.createElement("option"));
            a.type = "checkbox", k.checkOn = "" !== a.value, k.optSelected = c.selected, b.disabled = !0, k.optDisabled = !c.disabled, a = l.createElement("input"), a.value = "t", a.type = "radio", k.radioValue = "t" === a.value
        }();
    var Yb, Zb, $b = n.expr.attrHandle;
    n.fn.extend({
        attr: function(a, b) {
            return J(this, n.attr, a, b, arguments.length > 1)
        },
        removeAttr: function(a) {
            return this.each(function() {
                n.removeAttr(this, a)
            })
        }
    }), n.extend({
        attr: function(a, b, c) {
            var d, e, f = a.nodeType;
            if (a && 3 !== f && 8 !== f && 2 !== f) return typeof a.getAttribute === U ? n.prop(a, b, c) : (1 === f && n.isXMLDoc(a) || (b = b.toLowerCase(), d = n.attrHooks[b] || (n.expr.match.bool.test(b) ? Zb : Yb)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = n.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : void n.removeAttr(a, b))
        },
        removeAttr: function(a, b) {
            var c, d, e = 0,
                f = b && b.match(E);
            if (f && 1 === a.nodeType)
                while (c = f[e++]) d = n.propFix[c] || c, n.expr.match.bool.test(c) && (a[d] = !1), a.removeAttribute(c)
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (!k.radioValue && "radio" === b && n.nodeName(a, "input")) {
                        var c = a.value;
                        return a.setAttribute("type", b), c && (a.value = c), b
                    }
                }
            }
        }
    }), Zb = {
        set: function(a, b, c) {
            return b === !1 ? n.removeAttr(a, c) : a.setAttribute(c, c), c
        }
    }, n.each(n.expr.match.bool.source.match(/\w+/g), function(a, b) {
        var c = $b[b] || n.find.attr;
        $b[b] = function(a, b, d) {
            var e, f;
            return d || (f = $b[b], $b[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, $b[b] = f), e
        }
    });
    var _b = /^(?:input|select|textarea|button)$/i;
    n.fn.extend({
        prop: function(a, b) {
            return J(this, n.prop, a, b, arguments.length > 1)
        },
        removeProp: function(a) {
            return this.each(function() {
                delete this[n.propFix[a] || a]
            })
        }
    }), n.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(a, b, c) {
            var d, e, f, g = a.nodeType;
            if (a && 3 !== g && 8 !== g && 2 !== g) return f = 1 !== g || !n.isXMLDoc(a), f && (b = n.propFix[b] || b, e = n.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    return a.hasAttribute("tabindex") || _b.test(a.nodeName) || a.href ? a.tabIndex : -1
                }
            }
        }
    }), k.optSelected || (n.propHooks.selected = {
        get: function(a) {
            var b = a.parentNode;
            return b && b.parentNode && b.parentNode.selectedIndex, null
        }
    }), n.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        n.propFix[this.toLowerCase()] = this
    });
    var ac = /[\t\r\n\f]/g;
    n.fn.extend({
        addClass: function(a) {
            var b, c, d, e, f, g, h = "string" == typeof a && a,
                i = 0,
                j = this.length;
            if (n.isFunction(a)) return this.each(function(b) {
                n(this).addClass(a.call(this, b, this.className))
            });
            if (h)
                for (b = (a || "").match(E) || []; j > i; i++)
                    if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(ac, " ") : " ")) {
                        f = 0;
                        while (e = b[f++]) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                        g = n.trim(d), c.className !== g && (c.className = g)
                    }
            return this
        },
        removeClass: function(a) {
            var b, c, d, e, f, g, h = 0 === arguments.length || "string" == typeof a && a,
                i = 0,
                j = this.length;
            if (n.isFunction(a)) return this.each(function(b) {
                n(this).removeClass(a.call(this, b, this.className))
            });
            if (h)
                for (b = (a || "").match(E) || []; j > i; i++)
                    if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(ac, " ") : "")) {
                        f = 0;
                        while (e = b[f++])
                            while (d.indexOf(" " + e + " ") >= 0) d = d.replace(" " + e + " ", " ");
                        g = a ? n.trim(d) : "", c.className !== g && (c.className = g)
                    }
            return this
        },
        toggleClass: function(a, b) {
            var c = typeof a;
            return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(n.isFunction(a) ? function(c) {
                n(this).toggleClass(a.call(this, c, this.className, b), b)
            } : function() {
                if ("string" === c) {
                    var b, d = 0,
                        e = n(this),
                        f = a.match(E) || [];
                    while (b = f[d++]) e.hasClass(b) ? e.removeClass(b) : e.addClass(b)
                } else(c === U || "boolean" === c) && (this.className && L.set(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : L.get(this, "__className__") || "")
            })
        },
        hasClass: function(a) {
            for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)
                if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(ac, " ").indexOf(b) >= 0) return !0;
            return !1
        }
    });
    var bc = /\r/g;
    n.fn.extend({
        val: function(a) {
            var b, c, d, e = this[0]; {
                if (arguments.length) return d = n.isFunction(a), this.each(function(c) {
                    var e;
                    1 === this.nodeType && (e = d ? a.call(this, c, n(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : n.isArray(e) && (e = n.map(e, function(a) {
                        return null == a ? "" : a + ""
                    })), b = n.valHooks[this.type] || n.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
                });
                if (e) return b = n.valHooks[e.type] || n.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, "string" == typeof c ? c.replace(bc, "") : null == c ? "" : c)
            }
        }
    }), n.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = n.find.attr(a, "value");
                    return null != b ? b : n.trim(n.text(a))
                }
            },
            select: {
                get: function(a) {
                    for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++)
                        if (c = d[i], !(!c.selected && i !== e || (k.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && n.nodeName(c.parentNode, "optgroup"))) {
                            if (b = n(c).val(), f) return b;
                            g.push(b)
                        }
                    return g
                },
                set: function(a, b) {
                    var c, d, e = a.options,
                        f = n.makeArray(b),
                        g = e.length;
                    while (g--) d = e[g], (d.selected = n.inArray(d.value, f) >= 0) && (c = !0);
                    return c || (a.selectedIndex = -1), f
                }
            }
        }
    }), n.each(["radio", "checkbox"], function() {
        n.valHooks[this] = {
            set: function(a, b) {
                return n.isArray(b) ? a.checked = n.inArray(n(a).val(), b) >= 0 : void 0
            }
        }, k.checkOn || (n.valHooks[this].get = function(a) {
            return null === a.getAttribute("value") ? "on" : a.value
        })
    }), n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
        n.fn[b] = function(a, c) {
            return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
        }
    }), n.fn.extend({
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a)
        },
        bind: function(a, b, c) {
            return this.on(a, null, b, c)
        },
        unbind: function(a, b) {
            return this.off(a, null, b)
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d)
        },
        undelegate: function(a, b, c) {
            return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
        }
    });
    var cc = n.now(),
        dc = /\?/;
    n.parseJSON = function(a) {
        return JSON.parse(a + "")
    }, n.parseXML = function(a) {
        var b, c;
        if (!a || "string" != typeof a) return null;
        try {
            c = new DOMParser, b = c.parseFromString(a, "text/xml")
        } catch (d) {
            b = void 0
        }
        return (!b || b.getElementsByTagName("parsererror").length) && n.error("Invalid XML: " + a), b
    };
    var ec, fc, gc = /#.*$/,
        hc = /([?&])_=[^&]*/,
        ic = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        jc = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        kc = /^(?:GET|HEAD)$/,
        lc = /^\/\//,
        mc = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
        nc = {},
        oc = {},
        pc = "*/".concat("*");
    try {
        fc = location.href
    } catch (qc) {
        fc = l.createElement("a"), fc.href = "", fc = fc.href
    }
    ec = mc.exec(fc.toLowerCase()) || [];

    function rc(a) {
        return function(b, c) {
            "string" != typeof b && (c = b, b = "*");
            var d, e = 0,
                f = b.toLowerCase().match(E) || [];
            if (n.isFunction(c))
                while (d = f[e++]) "+" === d[0] ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
        }
    }

    function sc(a, b, c, d) {
        var e = {},
            f = a === oc;

        function g(h) {
            var i;
            return e[h] = !0, n.each(a[h] || [], function(a, h) {
                var j = h(b, c, d);
                return "string" != typeof j || f || e[j] ? f ? !(i = j) : void 0 : (b.dataTypes.unshift(j), g(j), !1)
            }), i
        }
        return g(b.dataTypes[0]) || !e["*"] && g("*")
    }

    function tc(a, b) {
        var c, d, e = n.ajaxSettings.flatOptions || {};
        for (c in b) void 0 !== b[c] && ((e[c] ? a : d || (d = {}))[c] = b[c]);
        return d && n.extend(!0, a, d), a
    }

    function uc(a, b, c) {
        var d, e, f, g, h = a.contents,
            i = a.dataTypes;
        while ("*" === i[0]) i.shift(), void 0 === d && (d = a.mimeType || b.getResponseHeader("Content-Type"));
        if (d)
            for (e in h)
                if (h[e] && h[e].test(d)) {
                    i.unshift(e);
                    break
                }
        if (i[0] in c) f = i[0];
        else {
            for (e in c) {
                if (!i[0] || a.converters[e + " " + i[0]]) {
                    f = e;
                    break
                }
                g || (g = e)
            }
            f = f || g
        }
        return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0
    }

    function vc(a, b, c, d) {
        var e, f, g, h, i, j = {},
            k = a.dataTypes.slice();
        if (k[1])
            for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
        f = k.shift();
        while (f)
            if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift())
                if ("*" === f) f = i;
                else if ("*" !== i && i !== f) {
            if (g = j[i + " " + f] || j["* " + f], !g)
                for (e in j)
                    if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                        g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                        break
                    }
            if (g !== !0)
                if (g && a["throws"]) b = g(b);
                else try {
                    b = g(b)
                } catch (l) {
                    return {
                        state: "parsererror",
                        error: g ? l : "No conversion from " + i + " to " + f
                    }
                }
        }
        return {
            state: "success",
            data: b
        }
    }
    n.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: fc,
            type: "GET",
            isLocal: jc.test(ec[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": pc,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": n.parseJSON,
                "text xml": n.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(a, b) {
            return b ? tc(tc(a, n.ajaxSettings), b) : tc(n.ajaxSettings, a)
        },
        ajaxPrefilter: rc(nc),
        ajaxTransport: rc(oc),
        ajax: function(a, b) {
            "object" == typeof a && (b = a, a = void 0), b = b || {};
            var c, d, e, f, g, h, i, j, k = n.ajaxSetup({}, b),
                l = k.context || k,
                m = k.context && (l.nodeType || l.jquery) ? n(l) : n.event,
                o = n.Deferred(),
                p = n.Callbacks("once memory"),
                q = k.statusCode || {},
                r = {},
                s = {},
                t = 0,
                u = "canceled",
                v = {
                    readyState: 0,
                    getResponseHeader: function(a) {
                        var b;
                        if (2 === t) {
                            if (!f) {
                                f = {};
                                while (b = ic.exec(e)) f[b[1].toLowerCase()] = b[2]
                            }
                            b = f[a.toLowerCase()]
                        }
                        return null == b ? null : b
                    },
                    getAllResponseHeaders: function() {
                        return 2 === t ? e : null
                    },
                    setRequestHeader: function(a, b) {
                        var c = a.toLowerCase();
                        return t || (a = s[c] = s[c] || a, r[a] = b), this
                    },
                    overrideMimeType: function(a) {
                        return t || (k.mimeType = a), this
                    },
                    statusCode: function(a) {
                        var b;
                        if (a)
                            if (2 > t)
                                for (b in a) q[b] = [q[b], a[b]];
                            else v.always(a[v.status]);
                        return this
                    },
                    abort: function(a) {
                        var b = a || u;
                        return c && c.abort(b), x(0, b), this
                    }
                };
            if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, k.url = ((a || k.url || fc) + "").replace(gc, "").replace(lc, ec[1] + "//"), k.type = b.method || b.type || k.method || k.type, k.dataTypes = n.trim(k.dataType || "*").toLowerCase().match(E) || [""], null == k.crossDomain && (h = mc.exec(k.url.toLowerCase()), k.crossDomain = !(!h || h[1] === ec[1] && h[2] === ec[2] && (h[3] || ("http:" === h[1] ? "80" : "443")) === (ec[3] || ("http:" === ec[1] ? "80" : "443")))), k.data && k.processData && "string" != typeof k.data && (k.data = n.param(k.data, k.traditional)), sc(nc, k, b, v), 2 === t) return v;
            i = k.global, i && 0 === n.active++ && n.event.trigger("ajaxStart"), k.type = k.type.toUpperCase(), k.hasContent = !kc.test(k.type), d = k.url, k.hasContent || (k.data && (d = k.url += (dc.test(d) ? "&" : "?") + k.data, delete k.data), k.cache === !1 && (k.url = hc.test(d) ? d.replace(hc, "$1_=" + cc++) : d + (dc.test(d) ? "&" : "?") + "_=" + cc++)), k.ifModified && (n.lastModified[d] && v.setRequestHeader("If-Modified-Since", n.lastModified[d]), n.etag[d] && v.setRequestHeader("If-None-Match", n.etag[d])), (k.data && k.hasContent && k.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", k.contentType), v.setRequestHeader("Accept", k.dataTypes[0] && k.accepts[k.dataTypes[0]] ? k.accepts[k.dataTypes[0]] + ("*" !== k.dataTypes[0] ? ", " + pc + "; q=0.01" : "") : k.accepts["*"]);
            for (j in k.headers) v.setRequestHeader(j, k.headers[j]);
            if (k.beforeSend && (k.beforeSend.call(l, v, k) === !1 || 2 === t)) return v.abort();
            u = "abort";
            for (j in {
                    success: 1,
                    error: 1,
                    complete: 1
                }) v[j](k[j]);
            if (c = sc(oc, k, b, v)) {
                v.readyState = 1, i && m.trigger("ajaxSend", [v, k]), k.async && k.timeout > 0 && (g = setTimeout(function() {
                    v.abort("timeout")
                }, k.timeout));
                try {
                    t = 1, c.send(r, x)
                } catch (w) {
                    if (!(2 > t)) throw w;
                    x(-1, w)
                }
            } else x(-1, "No Transport");

            function x(a, b, f, h) {
                var j, r, s, u, w, x = b;
                2 !== t && (t = 2, g && clearTimeout(g), c = void 0, e = h || "", v.readyState = a > 0 ? 4 : 0, j = a >= 200 && 300 > a || 304 === a, f && (u = uc(k, v, f)), u = vc(k, u, v, j), j ? (k.ifModified && (w = v.getResponseHeader("Last-Modified"), w && (n.lastModified[d] = w), w = v.getResponseHeader("etag"), w && (n.etag[d] = w)), 204 === a || "HEAD" === k.type ? x = "nocontent" : 304 === a ? x = "notmodified" : (x = u.state, r = u.data, s = u.error, j = !s)) : (s = x, (a || !x) && (x = "error", 0 > a && (a = 0))), v.status = a, v.statusText = (b || x) + "", j ? o.resolveWith(l, [r, x, v]) : o.rejectWith(l, [v, x, s]), v.statusCode(q), q = void 0, i && m.trigger(j ? "ajaxSuccess" : "ajaxError", [v, k, j ? r : s]), p.fireWith(l, [v, x]), i && (m.trigger("ajaxComplete", [v, k]), --n.active || n.event.trigger("ajaxStop")))
            }
            return v
        },
        getJSON: function(a, b, c) {
            return n.get(a, b, c, "json")
        },
        getScript: function(a, b) {
            return n.get(a, void 0, b, "script")
        }
    }), n.each(["get", "post"], function(a, b) {
        n[b] = function(a, c, d, e) {
            return n.isFunction(c) && (e = e || d, d = c, c = void 0), n.ajax({
                url: a,
                type: b,
                dataType: e,
                data: c,
                success: d
            })
        }
    }), n.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(a, b) {
        n.fn[b] = function(a) {
            return this.on(b, a)
        }
    }), n._evalUrl = function(a) {
        return n.ajax({
            url: a,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            "throws": !0
        })
    }, n.fn.extend({
        wrapAll: function(a) {
            var b;
            return n.isFunction(a) ? this.each(function(b) {
                n(this).wrapAll(a.call(this, b))
            }) : (this[0] && (b = n(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), b.map(function() {
                var a = this;
                while (a.firstElementChild) a = a.firstElementChild;
                return a
            }).append(this)), this)
        },
        wrapInner: function(a) {
            return this.each(n.isFunction(a) ? function(b) {
                n(this).wrapInner(a.call(this, b))
            } : function() {
                var b = n(this),
                    c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a)
            })
        },
        wrap: function(a) {
            var b = n.isFunction(a);
            return this.each(function(c) {
                n(this).wrapAll(b ? a.call(this, c) : a)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                n.nodeName(this, "body") || n(this).replaceWith(this.childNodes)
            }).end()
        }
    }), n.expr.filters.hidden = function(a) {
        return a.offsetWidth <= 0 && a.offsetHeight <= 0
    }, n.expr.filters.visible = function(a) {
        return !n.expr.filters.hidden(a)
    };
    var wc = /%20/g,
        xc = /\[\]$/,
        yc = /\r?\n/g,
        zc = /^(?:submit|button|image|reset|file)$/i,
        Ac = /^(?:input|select|textarea|keygen)/i;

    function Bc(a, b, c, d) {
        var e;
        if (n.isArray(b)) n.each(b, function(b, e) {
            c || xc.test(a) ? d(a, e) : Bc(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
        });
        else if (c || "object" !== n.type(b)) d(a, b);
        else
            for (e in b) Bc(a + "[" + e + "]", b[e], c, d)
    }
    n.param = function(a, b) {
        var c, d = [],
            e = function(a, b) {
                b = n.isFunction(b) ? b() : null == b ? "" : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
            };
        if (void 0 === b && (b = n.ajaxSettings && n.ajaxSettings.traditional), n.isArray(a) || a.jquery && !n.isPlainObject(a)) n.each(a, function() {
            e(this.name, this.value)
        });
        else
            for (c in a) Bc(c, a[c], b, e);
        return d.join("&").replace(wc, "+")
    }, n.fn.extend({
        serialize: function() {
            return n.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var a = n.prop(this, "elements");
                return a ? n.makeArray(a) : this
            }).filter(function() {
                var a = this.type;
                return this.name && !n(this).is(":disabled") && Ac.test(this.nodeName) && !zc.test(a) && (this.checked || !T.test(a))
            }).map(function(a, b) {
                var c = n(this).val();
                return null == c ? null : n.isArray(c) ? n.map(c, function(a) {
                    return {
                        name: b.name,
                        value: a.replace(yc, "\r\n")
                    }
                }) : {
                    name: b.name,
                    value: c.replace(yc, "\r\n")
                }
            }).get()
        }
    }), n.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest
        } catch (a) {}
    };
    var Cc = 0,
        Dc = {},
        Ec = {
            0: 200,
            1223: 204
        },
        Fc = n.ajaxSettings.xhr();
    a.ActiveXObject && n(a).on("unload", function() {
        for (var a in Dc) Dc[a]()
    }), k.cors = !!Fc && "withCredentials" in Fc, k.ajax = Fc = !!Fc, n.ajaxTransport(function(a) {
        var b;
        return k.cors || Fc && !a.crossDomain ? {
            send: function(c, d) {
                var e, f = a.xhr(),
                    g = ++Cc;
                if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
                    for (e in a.xhrFields) f[e] = a.xhrFields[e];
                a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType), a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                for (e in c) f.setRequestHeader(e, c[e]);
                b = function(a) {
                    return function() {
                        b && (delete Dc[g], b = f.onload = f.onerror = null, "abort" === a ? f.abort() : "error" === a ? d(f.status, f.statusText) : d(Ec[f.status] || f.status, f.statusText, "string" == typeof f.responseText ? {
                            text: f.responseText
                        } : void 0, f.getAllResponseHeaders()))
                    }
                }, f.onload = b(), f.onerror = b("error"), b = Dc[g] = b("abort");
                try {
                    f.send(a.hasContent && a.data || null)
                } catch (h) {
                    if (b) throw h
                }
            },
            abort: function() {
                b && b()
            }
        } : void 0
    }), n.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(a) {
                return n.globalEval(a), a
            }
        }
    }), n.ajaxPrefilter("script", function(a) {
        void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET")
    }), n.ajaxTransport("script", function(a) {
        if (a.crossDomain) {
            var b, c;
            return {
                send: function(d, e) {
                    b = n("\x3cscript\x3e").prop({
                        async: !0,
                        charset: a.scriptCharset,
                        src: a.url
                    }).on("load error", c = function(a) {
                        b.remove(), c = null, a && e("error" === a.type ? 404 : 200, a.type)
                    }), l.head.appendChild(b[0])
                },
                abort: function() {
                    c && c()
                }
            }
        }
    });
    var Gc = [],
        Hc = /(=)\?(?=&|$)|\?\?/;
    n.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var a = Gc.pop() || n.expando + "_" + cc++;
            return this[a] = !0, a
        }
    }), n.ajaxPrefilter("json jsonp", function(b, c, d) {
        var e, f, g, h = b.jsonp !== !1 && (Hc.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && Hc.test(b.data) && "data");
        return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = n.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(Hc, "$1" + e) : b.jsonp !== !1 && (b.url += (dc.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), b.converters["script json"] = function() {
            return g || n.error(e + " was not called"), g[0]
        }, b.dataTypes[0] = "json", f = a[e], a[e] = function() {
            g = arguments
        }, d.always(function() {
            a[e] = f, b[e] && (b.jsonpCallback = c.jsonpCallback, Gc.push(e)), g && n.isFunction(f) && f(g[0]), g = f = void 0
        }), "script") : void 0
    }), n.parseHTML = function(a, b, c) {
        if (!a || "string" != typeof a) return null;
        "boolean" == typeof b && (c = b, b = !1), b = b || l;
        var d = v.exec(a),
            e = !c && [];
        return d ? [b.createElement(d[1])] : (d = n.buildFragment([a], b, e), e && e.length && n(e).remove(), n.merge([], d.childNodes))
    };
    var Ic = n.fn.load;
    n.fn.load = function(a, b, c) {
        if ("string" != typeof a && Ic) return Ic.apply(this, arguments);
        var d, e, f, g = this,
            h = a.indexOf(" ");
        return h >= 0 && (d = n.trim(a.slice(h)), a = a.slice(0, h)), n.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (e = "POST"), g.length > 0 && n.ajax({
            url: a,
            type: e,
            dataType: "html",
            data: b
        }).done(function(a) {
            f = arguments, g.html(d ? n("<div>").append(n.parseHTML(a)).find(d) : a)
        }).complete(c && function(a, b) {
            g.each(c, f || [a.responseText, b, a])
        }), this
    }, n.expr.filters.animated = function(a) {
        return n.grep(n.timers, function(b) {
            return a === b.elem
        }).length
    };
    var Jc = a.document.documentElement;

    function Kc(a) {
        return n.isWindow(a) ? a : 9 === a.nodeType && a.defaultView
    }
    n.offset = {
        setOffset: function(a, b, c) {
            var d, e, f, g, h, i, j, k = n.css(a, "position"),
                l = n(a),
                m = {};
            "static" === k && (a.style.position = "relative"), h = l.offset(), f = n.css(a, "top"), i = n.css(a, "left"), j = ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1, j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), n.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m)
        }
    }, n.fn.extend({
        offset: function(a) {
            if (arguments.length) return void 0 === a ? this : this.each(function(b) {
                n.offset.setOffset(this, a, b)
            });
            var b, c, d = this[0],
                e = {
                    top: 0,
                    left: 0
                },
                f = d && d.ownerDocument;
            if (f) return b = f.documentElement, n.contains(b, d) ? (typeof d.getBoundingClientRect !== U && (e = d.getBoundingClientRect()), c = Kc(f), {
                top: e.top + c.pageYOffset - b.clientTop,
                left: e.left + c.pageXOffset - b.clientLeft
            }) : e
        },
        position: function() {
            if (this[0]) {
                var a, b, c = this[0],
                    d = {
                        top: 0,
                        left: 0
                    };
                return "fixed" === n.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), n.nodeName(a[0], "html") || (d = a.offset()), d.top += n.css(a[0], "borderTopWidth", !0), d.left += n.css(a[0], "borderLeftWidth", !0)), {
                    top: b.top - d.top - n.css(c, "marginTop", !0),
                    left: b.left - d.left - n.css(c, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                var a = this.offsetParent || Jc;
                while (a && !n.nodeName(a, "html") && "static" === n.css(a, "position")) a = a.offsetParent;
                return a || Jc
            })
        }
    }), n.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(b, c) {
        var d = "pageYOffset" === c;
        n.fn[b] = function(e) {
            return J(this, function(b, e, f) {
                var g = Kc(b);
                return void 0 === f ? g ? g[c] : b[e] : void(g ? g.scrollTo(d ? a.pageXOffset : f, d ? f : a.pageYOffset) : b[e] = f)
            }, b, e, arguments.length, null)
        }
    }), n.each(["top", "left"], function(a, b) {
        n.cssHooks[b] = yb(k.pixelPosition, function(a, c) {
            return c ? (c = xb(a, b), vb.test(c) ? n(a).position()[b] + "px" : c) : void 0
        })
    }), n.each({
        Height: "height",
        Width: "width"
    }, function(a, b) {
        n.each({
            padding: "inner" + a,
            content: b,
            "": "outer" + a
        }, function(c, d) {
            n.fn[d] = function(d, e) {
                var f = arguments.length && (c || "boolean" != typeof d),
                    g = c || (d === !0 || e === !0 ? "margin" : "border");
                return J(this, function(b, c, d) {
                    var e;
                    return n.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? n.css(b, c, g) : n.style(b, c, d, g)
                }, b, f ? d : void 0, f, null)
            }
        })
    }), n.fn.size = function() {
        return this.length
    }, n.fn.andSelf = n.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
        return n
    });
    var Lc = a.jQuery,
        Mc = a.$;
    return n.noConflict = function(b) {
        return a.$ === n && (a.$ = Mc), b && a.jQuery === n && (a.jQuery = Lc), n
    }, typeof b === U && (a.jQuery = a.$ = n), n
});</script>



    <!-- The runtime script.  You can rename it, but don't forget to rename the reference here as well.
    This file will have been minified and obfuscated if you enabled "Minify script" during export. -->
    <script>// Generated by Construct 2, the HTML5 game and app creator :: https://www.construct.net
var cr = {};
cr.plugins_ = {};
cr.behaviors = {};
if (typeof Object.getPrototypeOf !== "function") {
    if (typeof "test".__proto__ === "object") {
        Object.getPrototypeOf = function(object) {
            return object.__proto__;
        };
    } else {
        Object.getPrototypeOf = function(object) {
            return object.constructor.prototype;
        };
    }
}
(function() {
    cr.logexport = function(msg) {
        if (window.console && window.console.log)
            window.console.log(msg);
    };
    cr.logerror = function(msg) {
        if (window.console && window.console.error)
            window.console.error(msg);
    };
    cr.seal = function(x) {
        return x;
    };
    cr.freeze = function(x) {
        return x;
    };
    cr.is_undefined = function(x) {
        return typeof x === "undefined";
    };
    cr.is_number = function(x) {
        return typeof x === "number";
    };
    cr.is_string = function(x) {
        return typeof x === "string";
    };
    cr.isPOT = function(x) {
        return x > 0 && ((x - 1) & x) === 0;
    };
    cr.nextHighestPowerOfTwo = function(x) {
        --x;
        for (var i = 1; i < 32; i <<= 1) {
            x = x | x >> i;
        }
        return x + 1;
    }
    cr.abs = function(x) {
        return (x < 0 ? -x : x);
    };
    cr.max = function(a, b) {
        return (a > b ? a : b);
    };
    cr.min = function(a, b) {
        return (a < b ? a : b);
    };
    cr.PI = Math.PI;
    cr.round = function(x) {
        return (x + 0.5) | 0;
    };
    cr.floor = function(x) {
        if (x >= 0)
            return x | 0;
        else
            return (x | 0) - 1; // correctly round down when negative
    };
    cr.ceil = function(x) {
        var f = x | 0;
        return (f === x ? f : f + 1);
    };

    function Vector2(x, y) {
        this.x = x;
        this.y = y;
        cr.seal(this);
    };
    Vector2.prototype.offset = function(px, py) {
        this.x += px;
        this.y += py;
        return this;
    };
    Vector2.prototype.mul = function(px, py) {
        this.x *= px;
        this.y *= py;
        return this;
    };
    cr.vector2 = Vector2;
    cr.segments_intersect = function(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {
        var max_ax, min_ax, max_ay, min_ay, max_bx, min_bx, max_by, min_by;
        if (a1x < a2x) {
            min_ax = a1x;
            max_ax = a2x;
        } else {
            min_ax = a2x;
            max_ax = a1x;
        }
        if (b1x < b2x) {
            min_bx = b1x;
            max_bx = b2x;
        } else {
            min_bx = b2x;
            max_bx = b1x;
        }
        if (max_ax < min_bx || min_ax > max_bx)
            return false;
        if (a1y < a2y) {
            min_ay = a1y;
            max_ay = a2y;
        } else {
            min_ay = a2y;
            max_ay = a1y;
        }
        if (b1y < b2y) {
            min_by = b1y;
            max_by = b2y;
        } else {
            min_by = b2y;
            max_by = b1y;
        }
        if (max_ay < min_by || min_ay > max_by)
            return false;
        var dpx = b1x - a1x + b2x - a2x;
        var dpy = b1y - a1y + b2y - a2y;
        var qax = a2x - a1x;
        var qay = a2y - a1y;
        var qbx = b2x - b1x;
        var qby = b2y - b1y;
        var d = cr.abs(qay * qbx - qby * qax);
        var la = qbx * dpy - qby * dpx;
        if (cr.abs(la) > d)
            return false;
        var lb = qax * dpy - qay * dpx;
        return cr.abs(lb) <= d;
    };

    function Rect(left, top, right, bottom) {
        this.set(left, top, right, bottom);
        cr.seal(this);
    };
    Rect.prototype.set = function(left, top, right, bottom) {
        this.left = left;
        this.top = top;
        this.right = right;
        this.bottom = bottom;
    };
    Rect.prototype.copy = function(r) {
        this.left = r.left;
        this.top = r.top;
        this.right = r.right;
        this.bottom = r.bottom;
    };
    Rect.prototype.width = function() {
        return this.right - this.left;
    };
    Rect.prototype.height = function() {
        return this.bottom - this.top;
    };
    Rect.prototype.offset = function(px, py) {
        this.left += px;
        this.top += py;
        this.right += px;
        this.bottom += py;
        return this;
    };
    Rect.prototype.normalize = function() {
        var temp = 0;
        if (this.left > this.right) {
            temp = this.left;
            this.left = this.right;
            this.right = temp;
        }
        if (this.top > this.bottom) {
            temp = this.top;
            this.top = this.bottom;
            this.bottom = temp;
        }
    };
    Rect.prototype.intersects_rect = function(rc) {
        return !(rc.right < this.left || rc.bottom < this.top || rc.left > this.right || rc.top > this.bottom);
    };
    Rect.prototype.intersects_rect_off = function(rc, ox, oy) {
        return !(rc.right + ox < this.left || rc.bottom + oy < this.top || rc.left + ox > this.right || rc.top + oy > this.bottom);
    };
    Rect.prototype.contains_pt = function(x, y) {
        return (x >= this.left && x <= this.right) && (y >= this.top && y <= this.bottom);
    };
    Rect.prototype.equals = function(r) {
        return this.left === r.left && this.top === r.top && this.right === r.right && this.bottom === r.bottom;
    };
    cr.rect = Rect;

    function Quad() {
        this.tlx = 0;
        this.tly = 0;
        this.trx = 0;
        this.try_ = 0; // is a keyword otherwise!
        this.brx = 0;
        this.bry = 0;
        this.blx = 0;
        this.bly = 0;
        cr.seal(this);
    };
    Quad.prototype.set_from_rect = function(rc) {
        this.tlx = rc.left;
        this.tly = rc.top;
        this.trx = rc.right;
        this.try_ = rc.top;
        this.brx = rc.right;
        this.bry = rc.bottom;
        this.blx = rc.left;
        this.bly = rc.bottom;
    };
    Quad.prototype.set_from_rotated_rect = function(rc, a) {
        if (a === 0) {
            this.set_from_rect(rc);
        } else {
            var sin_a = Math.sin(a);
            var cos_a = Math.cos(a);
            var left_sin_a = rc.left * sin_a;
            var top_sin_a = rc.top * sin_a;
            var right_sin_a = rc.right * sin_a;
            var bottom_sin_a = rc.bottom * sin_a;
            var left_cos_a = rc.left * cos_a;
            var top_cos_a = rc.top * cos_a;
            var right_cos_a = rc.right * cos_a;
            var bottom_cos_a = rc.bottom * cos_a;
            this.tlx = left_cos_a - top_sin_a;
            this.tly = top_cos_a + left_sin_a;
            this.trx = right_cos_a - top_sin_a;
            this.try_ = top_cos_a + right_sin_a;
            this.brx = right_cos_a - bottom_sin_a;
            this.bry = bottom_cos_a + right_sin_a;
            this.blx = left_cos_a - bottom_sin_a;
            this.bly = bottom_cos_a + left_sin_a;
        }
    };
    Quad.prototype.offset = function(px, py) {
        this.tlx += px;
        this.tly += py;
        this.trx += px;
        this.try_ += py;
        this.brx += px;
        this.bry += py;
        this.blx += px;
        this.bly += py;
        return this;
    };
    var minresult = 0;
    var maxresult = 0;

    function minmax4(a, b, c, d) {
        if (a < b) {
            if (c < d) {
                if (a < c)
                    minresult = a;
                else
                    minresult = c;
                if (b > d)
                    maxresult = b;
                else
                    maxresult = d;
            } else {
                if (a < d)
                    minresult = a;
                else
                    minresult = d;
                if (b > c)
                    maxresult = b;
                else
                    maxresult = c;
            }
        } else {
            if (c < d) {
                if (b < c)
                    minresult = b;
                else
                    minresult = c;
                if (a > d)
                    maxresult = a;
                else
                    maxresult = d;
            } else {
                if (b < d)
                    minresult = b;
                else
                    minresult = d;
                if (a > c)
                    maxresult = a;
                else
                    maxresult = c;
            }
        }
    };
    Quad.prototype.bounding_box = function(rc) {
        minmax4(this.tlx, this.trx, this.brx, this.blx);
        rc.left = minresult;
        rc.right = maxresult;
        minmax4(this.tly, this.try_, this.bry, this.bly);
        rc.top = minresult;
        rc.bottom = maxresult;
    };
    Quad.prototype.contains_pt = function(x, y) {
        var tlx = this.tlx;
        var tly = this.tly;
        var v0x = this.trx - tlx;
        var v0y = this.try_ - tly;
        var v1x = this.brx - tlx;
        var v1y = this.bry - tly;
        var v2x = x - tlx;
        var v2y = y - tly;
        var dot00 = v0x * v0x + v0y * v0y
        var dot01 = v0x * v1x + v0y * v1y
        var dot02 = v0x * v2x + v0y * v2y
        var dot11 = v1x * v1x + v1y * v1y
        var dot12 = v1x * v2x + v1y * v2y
        var invDenom = 1.0 / (dot00 * dot11 - dot01 * dot01);
        var u = (dot11 * dot02 - dot01 * dot12) * invDenom;
        var v = (dot00 * dot12 - dot01 * dot02) * invDenom;
        if ((u >= 0.0) && (v > 0.0) && (u + v < 1))
            return true;
        v0x = this.blx - tlx;
        v0y = this.bly - tly;
        var dot00 = v0x * v0x + v0y * v0y
        var dot01 = v0x * v1x + v0y * v1y
        var dot02 = v0x * v2x + v0y * v2y
        invDenom = 1.0 / (dot00 * dot11 - dot01 * dot01);
        u = (dot11 * dot02 - dot01 * dot12) * invDenom;
        v = (dot00 * dot12 - dot01 * dot02) * invDenom;
        return (u >= 0.0) && (v > 0.0) && (u + v < 1);
    };
    Quad.prototype.at = function(i, xory) {
        if (xory) {
            switch (i) {
                case 0:
                    return this.tlx;
                case 1:
                    return this.trx;
                case 2:
                    return this.brx;
                case 3:
                    return this.blx;
                case 4:
                    return this.tlx;
                default:
                    return this.tlx;
            }
        } else {
            switch (i) {
                case 0:
                    return this.tly;
                case 1:
                    return this.try_;
                case 2:
                    return this.bry;
                case 3:
                    return this.bly;
                case 4:
                    return this.tly;
                default:
                    return this.tly;
            }
        }
    };
    Quad.prototype.midX = function() {
        return (this.tlx + this.trx + this.brx + this.blx) / 4;
    };
    Quad.prototype.midY = function() {
        return (this.tly + this.try_ + this.bry + this.bly) / 4;
    };
    Quad.prototype.intersects_segment = function(x1, y1, x2, y2) {
        if (this.contains_pt(x1, y1) || this.contains_pt(x2, y2))
            return true;
        var a1x, a1y, a2x, a2y;
        var i;
        for (i = 0; i < 4; i++) {
            a1x = this.at(i, true);
            a1y = this.at(i, false);
            a2x = this.at(i + 1, true);
            a2y = this.at(i + 1, false);
            if (cr.segments_intersect(x1, y1, x2, y2, a1x, a1y, a2x, a2y))
                return true;
        }
        return false;
    };
    Quad.prototype.intersects_quad = function(rhs) {
        var midx = rhs.midX();
        var midy = rhs.midY();
        if (this.contains_pt(midx, midy))
            return true;
        midx = this.midX();
        midy = this.midY();
        if (rhs.contains_pt(midx, midy))
            return true;
        var a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y;
        var i, j;
        for (i = 0; i < 4; i++) {
            for (j = 0; j < 4; j++) {
                a1x = this.at(i, true);
                a1y = this.at(i, false);
                a2x = this.at(i + 1, true);
                a2y = this.at(i + 1, false);
                b1x = rhs.at(j, true);
                b1y = rhs.at(j, false);
                b2x = rhs.at(j + 1, true);
                b2y = rhs.at(j + 1, false);
                if (cr.segments_intersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y))
                    return true;
            }
        }
        return false;
    };
    cr.quad = Quad;
    cr.RGB = function(red, green, blue) {
        return Math.max(Math.min(red, 255), 0) |
            (Math.max(Math.min(green, 255), 0) << 8) |
            (Math.max(Math.min(blue, 255), 0) << 16);
    };
    cr.GetRValue = function(rgb) {
        return rgb & 0xFF;
    };
    cr.GetGValue = function(rgb) {
        return (rgb & 0xFF00) >> 8;
    };
    cr.GetBValue = function(rgb) {
        return (rgb & 0xFF0000) >> 16;
    };
    cr.shallowCopy = function(a, b, allowOverwrite) {
        var attr;
        for (attr in b) {
            if (b.hasOwnProperty(attr)) {;
                a[attr] = b[attr];
            }
        }
        return a;
    };
    cr.arrayRemove = function(arr, index) {
        var i, len;
        index = cr.floor(index);
        if (index < 0 || index >= arr.length)
            return; // index out of bounds
        for (i = index, len = arr.length - 1; i < len; i++)
            arr[i] = arr[i + 1];
        cr.truncateArray(arr, len);
    };
    cr.truncateArray = function(arr, index) {
        arr.length = index;
    };
    cr.clearArray = function(arr) {
        cr.truncateArray(arr, 0);
    };
    cr.shallowAssignArray = function(dest, src) {
        cr.clearArray(dest);
        var i, len;
        for (i = 0, len = src.length; i < len; ++i)
            dest[i] = src[i];
    };
    cr.appendArray = function(a, b) {
        a.push.apply(a, b);
    };
    cr.fastIndexOf = function(arr, item) {
        var i, len;
        for (i = 0, len = arr.length; i < len; ++i) {
            if (arr[i] === item)
                return i;
        }
        return -1;
    };
    cr.arrayFindRemove = function(arr, item) {
        var index = cr.fastIndexOf(arr, item);
        if (index !== -1)
            cr.arrayRemove(arr, index);
    };
    cr.clamp = function(x, a, b) {
        if (x < a)
            return a;
        else if (x > b)
            return b;
        else
            return x;
    };
    cr.to_radians = function(x) {
        return x / (180.0 / cr.PI);
    };
    cr.to_degrees = function(x) {
        return x * (180.0 / cr.PI);
    };
    cr.clamp_angle_degrees = function(a) {
        a %= 360; // now in (-360, 360) range
        if (a < 0)
            a += 360; // now in [0, 360) range
        return a;
    };
    cr.clamp_angle = function(a) {
        a %= 2 * cr.PI; // now in (-2pi, 2pi) range
        if (a < 0)
            a += 2 * cr.PI; // now in [0, 2pi) range
        return a;
    };
    cr.to_clamped_degrees = function(x) {
        return cr.clamp_angle_degrees(cr.to_degrees(x));
    };
    cr.to_clamped_radians = function(x) {
        return cr.clamp_angle(cr.to_radians(x));
    };
    cr.angleTo = function(x1, y1, x2, y2) {
        var dx = x2 - x1;
        var dy = y2 - y1;
        return Math.atan2(dy, dx);
    };
    cr.angleDiff = function(a1, a2) {
        if (a1 === a2)
            return 0;
        var s1 = Math.sin(a1);
        var c1 = Math.cos(a1);
        var s2 = Math.sin(a2);
        var c2 = Math.cos(a2);
        var n = s1 * s2 + c1 * c2;
        if (n >= 1)
            return 0;
        if (n <= -1)
            return cr.PI;
        return Math.acos(n);
    };
    cr.angleRotate = function(start, end, step) {
        var ss = Math.sin(start);
        var cs = Math.cos(start);
        var se = Math.sin(end);
        var ce = Math.cos(end);
        if (Math.acos(ss * se + cs * ce) > step) {
            if (cs * se - ss * ce > 0)
                return cr.clamp_angle(start + step);
            else
                return cr.clamp_angle(start - step);
        } else
            return cr.clamp_angle(end);
    };
    cr.angleClockwise = function(a1, a2) {
        var s1 = Math.sin(a1);
        var c1 = Math.cos(a1);
        var s2 = Math.sin(a2);
        var c2 = Math.cos(a2);
        return c1 * s2 - s1 * c2 <= 0;
    };
    cr.rotatePtAround = function(px, py, a, ox, oy, getx) {
        if (a === 0)
            return getx ? px : py;
        var sin_a = Math.sin(a);
        var cos_a = Math.cos(a);
        px -= ox;
        py -= oy;
        var left_sin_a = px * sin_a;
        var top_sin_a = py * sin_a;
        var left_cos_a = px * cos_a;
        var top_cos_a = py * cos_a;
        px = left_cos_a - top_sin_a;
        py = top_cos_a + left_sin_a;
        px += ox;
        py += oy;
        return getx ? px : py;
    }
    cr.distanceTo = function(x1, y1, x2, y2) {
        var dx = x2 - x1;
        var dy = y2 - y1;
        return Math.sqrt(dx * dx + dy * dy);
    };
    cr.xor = function(x, y) {
        return !x !== !y;
    };
    cr.lerp = function(a, b, x) {
        return a + (b - a) * x;
    };
    cr.unlerp = function(a, b, c) {
        if (a === b)
            return 0; // avoid divide by 0
        return (c - a) / (b - a);
    };
    cr.anglelerp = function(a, b, x) {
        var diff = cr.angleDiff(a, b);
        if (cr.angleClockwise(b, a)) {
            return a + diff * x;
        } else {
            return a - diff * x;
        }
    };
    cr.qarp = function(a, b, c, x) {
        return cr.lerp(cr.lerp(a, b, x), cr.lerp(b, c, x), x);
    };
    cr.cubic = function(a, b, c, d, x) {
        return cr.lerp(cr.qarp(a, b, c, x), cr.qarp(b, c, d, x), x);
    };
    cr.cosp = function(a, b, x) {
        return (a + b + (a - b) * Math.cos(x * Math.PI)) / 2;
    };
    cr.hasAnyOwnProperty = function(o) {
        var p;
        for (p in o) {
            if (o.hasOwnProperty(p))
                return true;
        }
        return false;
    };
    cr.wipe = function(obj) {
        var p;
        for (p in obj) {
            if (obj.hasOwnProperty(p))
                delete obj[p];
        }
    };
    var startup_time = +(new Date());
    cr.performance_now = function() {
        if (typeof window["performance"] !== "undefined") {
            var winperf = window["performance"];
            if (typeof winperf.now !== "undefined")
                return winperf.now();
            else if (typeof winperf["webkitNow"] !== "undefined")
                return winperf["webkitNow"]();
            else if (typeof winperf["mozNow"] !== "undefined")
                return winperf["mozNow"]();
            else if (typeof winperf["msNow"] !== "undefined")
                return winperf["msNow"]();
        }
        return Date.now() - startup_time;
    };
    var isChrome = false;
    var isSafari = false;
    var isiOS = false;
    var isEjecta = false;
    if (typeof window !== "undefined") // not c2 editor
    {
        isChrome = /chrome/i.test(navigator.userAgent) || /chromium/i.test(navigator.userAgent);
        isSafari = !isChrome && /safari/i.test(navigator.userAgent);
        isiOS = /(iphone|ipod|ipad)/i.test(navigator.userAgent);
        isEjecta = window["c2ejecta"];
    }
    var supports_set = ((!isSafari && !isEjecta && !isiOS) && (typeof Set !== "undefined" && typeof Set.prototype["forEach"] !== "undefined"));

    function ObjectSet_() {
        this.s = null;
        this.items = null; // lazy allocated (hopefully results in better GC performance)
        this.item_count = 0;
        if (supports_set) {
            this.s = new Set();
        }
        this.values_cache = [];
        this.cache_valid = true;
        cr.seal(this);
    };
    ObjectSet_.prototype.contains = function(x) {
        if (this.isEmpty())
            return false;
        if (supports_set)
            return this.s["has"](x);
        else
            return (this.items && this.items.hasOwnProperty(x));
    };
    ObjectSet_.prototype.add = function(x) {
        if (supports_set) {
            if (!this.s["has"](x)) {
                this.s["add"](x);
                this.cache_valid = false;
            }
        } else {
            var str = x.toString();
            var items = this.items;
            if (!items) {
                this.items = {};
                this.items[str] = x;
                this.item_count = 1;
                this.cache_valid = false;
            } else if (!items.hasOwnProperty(str)) {
                items[str] = x;
                this.item_count++;
                this.cache_valid = false;
            }
        }
    };
    ObjectSet_.prototype.remove = function(x) {
        if (this.isEmpty())
            return;
        if (supports_set) {
            if (this.s["has"](x)) {
                this.s["delete"](x);
                this.cache_valid = false;
            }
        } else if (this.items) {
            var str = x.toString();
            var items = this.items;
            if (items.hasOwnProperty(str)) {
                delete items[str];
                this.item_count--;
                this.cache_valid = false;
            }
        }
    };
    ObjectSet_.prototype.clear = function( /*wipe_*/ ) {
        if (this.isEmpty())
            return;
        if (supports_set) {
            this.s["clear"](); // best!
        } else {
            this.items = null; // creates garbage; will lazy allocate on next add()
            this.item_count = 0;
        }
        cr.clearArray(this.values_cache);
        this.cache_valid = true;
    };
    ObjectSet_.prototype.isEmpty = function() {
        return this.count() === 0;
    };
    ObjectSet_.prototype.count = function() {
        if (supports_set)
            return this.s["size"];
        else
            return this.item_count;
    };
    var current_arr = null;
    var current_index = 0;

    function set_append_to_arr(x) {
        current_arr[current_index++] = x;
    };
    ObjectSet_.prototype.update_cache = function() {
        if (this.cache_valid)
            return;
        if (supports_set) {
            cr.clearArray(this.values_cache);
            current_arr = this.values_cache;
            current_index = 0;
            this.s["forEach"](set_append_to_arr);;
            current_arr = null;
            current_index = 0;
        } else {
            var values_cache = this.values_cache;
            cr.clearArray(values_cache);
            var p, n = 0,
                items = this.items;
            if (items) {
                for (p in items) {
                    if (items.hasOwnProperty(p))
                        values_cache[n++] = items[p];
                }
            };
        }
        this.cache_valid = true;
    };
    ObjectSet_.prototype.valuesRef = function() {
        this.update_cache();
        return this.values_cache;
    };
    cr.ObjectSet = ObjectSet_;
    var tmpSet = new cr.ObjectSet();
    cr.removeArrayDuplicates = function(arr) {
        var i, len;
        for (i = 0, len = arr.length; i < len; ++i) {
            tmpSet.add(arr[i]);
        }
        cr.shallowAssignArray(arr, tmpSet.valuesRef());
        tmpSet.clear();
    };
    cr.arrayRemoveAllFromObjectSet = function(arr, remset) {
        if (supports_set)
            cr.arrayRemoveAll_set(arr, remset.s);
        else
            cr.arrayRemoveAll_arr(arr, remset.valuesRef());
    };
    cr.arrayRemoveAll_set = function(arr, s) {
        var i, j, len, item;
        for (i = 0, j = 0, len = arr.length; i < len; ++i) {
            item = arr[i];
            if (!s["has"](item)) // not an item to remove
                arr[j++] = item; // keep it
        }
        cr.truncateArray(arr, j);
    };
    cr.arrayRemoveAll_arr = function(arr, rem) {
        var i, j, len, item;
        for (i = 0, j = 0, len = arr.length; i < len; ++i) {
            item = arr[i];
            if (cr.fastIndexOf(rem, item) === -1) // not an item to remove
                arr[j++] = item; // keep it
        }
        cr.truncateArray(arr, j);
    };

    function KahanAdder_() {
        this.c = 0;
        this.y = 0;
        this.t = 0;
        this.sum = 0;
        cr.seal(this);
    };
    KahanAdder_.prototype.add = function(v) {
        this.y = v - this.c;
        this.t = this.sum + this.y;
        this.c = (this.t - this.sum) - this.y;
        this.sum = this.t;
    };
    KahanAdder_.prototype.reset = function() {
        this.c = 0;
        this.y = 0;
        this.t = 0;
        this.sum = 0;
    };
    cr.KahanAdder = KahanAdder_;
    cr.regexp_escape = function(text) {
        return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    };

    function CollisionPoly_(pts_array_) {
        this.pts_cache = [];
        this.bboxLeft = 0;
        this.bboxTop = 0;
        this.bboxRight = 0;
        this.bboxBottom = 0;
        this.convexpolys = null; // for physics behavior to cache separated polys
        this.set_pts(pts_array_);
        cr.seal(this);
    };
    CollisionPoly_.prototype.set_pts = function(pts_array_) {
        this.pts_array = pts_array_;
        this.pts_count = pts_array_.length / 2; // x, y, x, y... in array
        this.pts_cache.length = pts_array_.length;
        this.cache_width = -1;
        this.cache_height = -1;
        this.cache_angle = 0;
    };
    CollisionPoly_.prototype.is_empty = function() {
        return !this.pts_array.length;
    };
    CollisionPoly_.prototype.update_bbox = function() {
        var myptscache = this.pts_cache;
        var bboxLeft_ = myptscache[0];
        var bboxRight_ = bboxLeft_;
        var bboxTop_ = myptscache[1];
        var bboxBottom_ = bboxTop_;
        var x, y, i = 1,
            i2, len = this.pts_count;
        for (; i < len; ++i) {
            i2 = i * 2;
            x = myptscache[i2];
            y = myptscache[i2 + 1];
            if (x < bboxLeft_)
                bboxLeft_ = x;
            if (x > bboxRight_)
                bboxRight_ = x;
            if (y < bboxTop_)
                bboxTop_ = y;
            if (y > bboxBottom_)
                bboxBottom_ = y;
        }
        this.bboxLeft = bboxLeft_;
        this.bboxRight = bboxRight_;
        this.bboxTop = bboxTop_;
        this.bboxBottom = bboxBottom_;
    };
    CollisionPoly_.prototype.set_from_rect = function(rc, offx, offy) {
        this.pts_cache.length = 8;
        this.pts_count = 4;
        var myptscache = this.pts_cache;
        myptscache[0] = rc.left - offx;
        myptscache[1] = rc.top - offy;
        myptscache[2] = rc.right - offx;
        myptscache[3] = rc.top - offy;
        myptscache[4] = rc.right - offx;
        myptscache[5] = rc.bottom - offy;
        myptscache[6] = rc.left - offx;
        myptscache[7] = rc.bottom - offy;
        this.cache_width = rc.right - rc.left;
        this.cache_height = rc.bottom - rc.top;
        this.update_bbox();
    };
    CollisionPoly_.prototype.set_from_quad = function(q, offx, offy, w, h) {
        this.pts_cache.length = 8;
        this.pts_count = 4;
        var myptscache = this.pts_cache;
        myptscache[0] = q.tlx - offx;
        myptscache[1] = q.tly - offy;
        myptscache[2] = q.trx - offx;
        myptscache[3] = q.try_ - offy;
        myptscache[4] = q.brx - offx;
        myptscache[5] = q.bry - offy;
        myptscache[6] = q.blx - offx;
        myptscache[7] = q.bly - offy;
        this.cache_width = w;
        this.cache_height = h;
        this.update_bbox();
    };
    CollisionPoly_.prototype.set_from_poly = function(r) {
        this.pts_count = r.pts_count;
        cr.shallowAssignArray(this.pts_cache, r.pts_cache);
        this.bboxLeft = r.bboxLeft;
        this.bboxTop - r.bboxTop;
        this.bboxRight = r.bboxRight;
        this.bboxBottom = r.bboxBottom;
    };
    CollisionPoly_.prototype.cache_poly = function(w, h, a) {
        if (this.cache_width === w && this.cache_height === h && this.cache_angle === a)
            return; // cache up-to-date
        this.cache_width = w;
        this.cache_height = h;
        this.cache_angle = a;
        var i, i2, i21, len, x, y;
        var sina = 0;
        var cosa = 1;
        var myptsarray = this.pts_array;
        var myptscache = this.pts_cache;
        if (a !== 0) {
            sina = Math.sin(a);
            cosa = Math.cos(a);
        }
        for (i = 0, len = this.pts_count; i < len; i++) {
            i2 = i * 2;
            i21 = i2 + 1;
            x = myptsarray[i2] * w;
            y = myptsarray[i21] * h;
            myptscache[i2] = (x * cosa) - (y * sina);
            myptscache[i21] = (y * cosa) + (x * sina);
        }
        this.update_bbox();
    };
    CollisionPoly_.prototype.contains_pt = function(a2x, a2y) {
        var myptscache = this.pts_cache;
        if (a2x === myptscache[0] && a2y === myptscache[1])
            return true;
        var i, i2, imod, len = this.pts_count;
        var a1x = this.bboxLeft - 110;
        var a1y = this.bboxTop - 101;
        var a3x = this.bboxRight + 131
        var a3y = this.bboxBottom + 120;
        var b1x, b1y, b2x, b2y;
        var count1 = 0,
            count2 = 0;
        for (i = 0; i < len; i++) {
            i2 = i * 2;
            imod = ((i + 1) % len) * 2;
            b1x = myptscache[i2];
            b1y = myptscache[i2 + 1];
            b2x = myptscache[imod];
            b2y = myptscache[imod + 1];
            if (cr.segments_intersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y))
                count1++;
            if (cr.segments_intersect(a3x, a3y, a2x, a2y, b1x, b1y, b2x, b2y))
                count2++;
        }
        return (count1 % 2 === 1) || (count2 % 2 === 1);
    };
    CollisionPoly_.prototype.intersects_poly = function(rhs, offx, offy) {
        var rhspts = rhs.pts_cache;
        var mypts = this.pts_cache;
        if (this.contains_pt(rhspts[0] + offx, rhspts[1] + offy))
            return true;
        if (rhs.contains_pt(mypts[0] - offx, mypts[1] - offy))
            return true;
        var i, i2, imod, leni, j, j2, jmod, lenj;
        var a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y;
        for (i = 0, leni = this.pts_count; i < leni; i++) {
            i2 = i * 2;
            imod = ((i + 1) % leni) * 2;
            a1x = mypts[i2];
            a1y = mypts[i2 + 1];
            a2x = mypts[imod];
            a2y = mypts[imod + 1];
            for (j = 0, lenj = rhs.pts_count; j < lenj; j++) {
                j2 = j * 2;
                jmod = ((j + 1) % lenj) * 2;
                b1x = rhspts[j2] + offx;
                b1y = rhspts[j2 + 1] + offy;
                b2x = rhspts[jmod] + offx;
                b2y = rhspts[jmod + 1] + offy;
                if (cr.segments_intersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y))
                    return true;
            }
        }
        return false;
    };
    CollisionPoly_.prototype.intersects_segment = function(offx, offy, x1, y1, x2, y2) {
        var mypts = this.pts_cache;
        if (this.contains_pt(x1 - offx, y1 - offy))
            return true;
        var i, leni, i2, imod;
        var a1x, a1y, a2x, a2y;
        for (i = 0, leni = this.pts_count; i < leni; i++) {
            i2 = i * 2;
            imod = ((i + 1) % leni) * 2;
            a1x = mypts[i2] + offx;
            a1y = mypts[i2 + 1] + offy;
            a2x = mypts[imod] + offx;
            a2y = mypts[imod + 1] + offy;
            if (cr.segments_intersect(x1, y1, x2, y2, a1x, a1y, a2x, a2y))
                return true;
        }
        return false;
    };
    CollisionPoly_.prototype.mirror = function(px) {
        var i, leni, i2;
        for (i = 0, leni = this.pts_count; i < leni; ++i) {
            i2 = i * 2;
            this.pts_cache[i2] = px * 2 - this.pts_cache[i2];
        }
    };
    CollisionPoly_.prototype.flip = function(py) {
        var i, leni, i21;
        for (i = 0, leni = this.pts_count; i < leni; ++i) {
            i21 = i * 2 + 1;
            this.pts_cache[i21] = py * 2 - this.pts_cache[i21];
        }
    };
    CollisionPoly_.prototype.diag = function() {
        var i, leni, i2, i21, temp;
        for (i = 0, leni = this.pts_count; i < leni; ++i) {
            i2 = i * 2;
            i21 = i2 + 1;
            temp = this.pts_cache[i2];
            this.pts_cache[i2] = this.pts_cache[i21];
            this.pts_cache[i21] = temp;
        }
    };
    cr.CollisionPoly = CollisionPoly_;

    function SparseGrid_(cellwidth_, cellheight_) {
        this.cellwidth = cellwidth_;
        this.cellheight = cellheight_;
        this.cells = {};
    };
    SparseGrid_.prototype.totalCellCount = 0;
    SparseGrid_.prototype.getCell = function(x_, y_, create_if_missing) {
        var ret;
        var col = this.cells[x_];
        if (!col) {
            if (create_if_missing) {
                ret = allocGridCell(this, x_, y_);
                this.cells[x_] = {};
                this.cells[x_][y_] = ret;
                return ret;
            } else
                return null;
        }
        ret = col[y_];
        if (ret)
            return ret;
        else if (create_if_missing) {
            ret = allocGridCell(this, x_, y_);
            this.cells[x_][y_] = ret;
            return ret;
        } else
            return null;
    };
    SparseGrid_.prototype.XToCell = function(x_) {
        return cr.floor(x_ / this.cellwidth);
    };
    SparseGrid_.prototype.YToCell = function(y_) {
        return cr.floor(y_ / this.cellheight);
    };
    SparseGrid_.prototype.update = function(inst, oldrange, newrange) {
        var x, lenx, y, leny, cell;
        if (oldrange) {
            for (x = oldrange.left, lenx = oldrange.right; x <= lenx; ++x) {
                for (y = oldrange.top, leny = oldrange.bottom; y <= leny; ++y) {
                    if (newrange && newrange.contains_pt(x, y))
                        continue; // is still in this cell
                    cell = this.getCell(x, y, false); // don't create if missing
                    if (!cell)
                        continue; // cell does not exist yet
                    cell.remove(inst);
                    if (cell.isEmpty()) {
                        freeGridCell(cell);
                        this.cells[x][y] = null;
                    }
                }
            }
        }
        if (newrange) {
            for (x = newrange.left, lenx = newrange.right; x <= lenx; ++x) {
                for (y = newrange.top, leny = newrange.bottom; y <= leny; ++y) {
                    if (oldrange && oldrange.contains_pt(x, y))
                        continue; // is still in this cell
                    this.getCell(x, y, true).insert(inst);
                }
            }
        }
    };
    SparseGrid_.prototype.queryRange = function(rc, result) {
        var x, lenx, ystart, y, leny, cell;
        x = this.XToCell(rc.left);
        ystart = this.YToCell(rc.top);
        lenx = this.XToCell(rc.right);
        leny = this.YToCell(rc.bottom);
        for (; x <= lenx; ++x) {
            for (y = ystart; y <= leny; ++y) {
                cell = this.getCell(x, y, false);
                if (!cell)
                    continue;
                cell.dump(result);
            }
        }
    };
    cr.SparseGrid = SparseGrid_;

    function RenderGrid_(cellwidth_, cellheight_) {
        this.cellwidth = cellwidth_;
        this.cellheight = cellheight_;
        this.cells = {};
    };
    RenderGrid_.prototype.totalCellCount = 0;
    RenderGrid_.prototype.getCell = function(x_, y_, create_if_missing) {
        var ret;
        var col = this.cells[x_];
        if (!col) {
            if (create_if_missing) {
                ret = allocRenderCell(this, x_, y_);
                this.cells[x_] = {};
                this.cells[x_][y_] = ret;
                return ret;
            } else
                return null;
        }
        ret = col[y_];
        if (ret)
            return ret;
        else if (create_if_missing) {
            ret = allocRenderCell(this, x_, y_);
            this.cells[x_][y_] = ret;
            return ret;
        } else
            return null;
    };
    RenderGrid_.prototype.XToCell = function(x_) {
        return cr.floor(x_ / this.cellwidth);
    };
    RenderGrid_.prototype.YToCell = function(y_) {
        return cr.floor(y_ / this.cellheight);
    };
    RenderGrid_.prototype.update = function(inst, oldrange, newrange) {
        var x, lenx, y, leny, cell;
        if (oldrange) {
            for (x = oldrange.left, lenx = oldrange.right; x <= lenx; ++x) {
                for (y = oldrange.top, leny = oldrange.bottom; y <= leny; ++y) {
                    if (newrange && newrange.contains_pt(x, y))
                        continue; // is still in this cell
                    cell = this.getCell(x, y, false); // don't create if missing
                    if (!cell)
                        continue; // cell does not exist yet
                    cell.remove(inst);
                    if (cell.isEmpty()) {
                        freeRenderCell(cell);
                        this.cells[x][y] = null;
                    }
                }
            }
        }
        if (newrange) {
            for (x = newrange.left, lenx = newrange.right; x <= lenx; ++x) {
                for (y = newrange.top, leny = newrange.bottom; y <= leny; ++y) {
                    if (oldrange && oldrange.contains_pt(x, y))
                        continue; // is still in this cell
                    this.getCell(x, y, true).insert(inst);
                }
            }
        }
    };
    RenderGrid_.prototype.queryRange = function(left, top, right, bottom, result) {
        var x, lenx, ystart, y, leny, cell;
        x = this.XToCell(left);
        ystart = this.YToCell(top);
        lenx = this.XToCell(right);
        leny = this.YToCell(bottom);
        for (; x <= lenx; ++x) {
            for (y = ystart; y <= leny; ++y) {
                cell = this.getCell(x, y, false);
                if (!cell)
                    continue;
                cell.dump(result);
            }
        }
    };
    RenderGrid_.prototype.markRangeChanged = function(rc) {
        var x, lenx, ystart, y, leny, cell;
        x = rc.left;
        ystart = rc.top;
        lenx = rc.right;
        leny = rc.bottom;
        for (; x <= lenx; ++x) {
            for (y = ystart; y <= leny; ++y) {
                cell = this.getCell(x, y, false);
                if (!cell)
                    continue;
                cell.is_sorted = false;
            }
        }
    };
    cr.RenderGrid = RenderGrid_;
    var gridcellcache = [];

    function allocGridCell(grid_, x_, y_) {
        var ret;
        SparseGrid_.prototype.totalCellCount++;
        if (gridcellcache.length) {
            ret = gridcellcache.pop();
            ret.grid = grid_;
            ret.x = x_;
            ret.y = y_;
            return ret;
        } else
            return new cr.GridCell(grid_, x_, y_);
    };

    function freeGridCell(c) {
        SparseGrid_.prototype.totalCellCount--;
        c.objects.clear();
        if (gridcellcache.length < 1000)
            gridcellcache.push(c);
    };

    function GridCell_(grid_, x_, y_) {
        this.grid = grid_;
        this.x = x_;
        this.y = y_;
        this.objects = new cr.ObjectSet();
    };
    GridCell_.prototype.isEmpty = function() {
        return this.objects.isEmpty();
    };
    GridCell_.prototype.insert = function(inst) {
        this.objects.add(inst);
    };
    GridCell_.prototype.remove = function(inst) {
        this.objects.remove(inst);
    };
    GridCell_.prototype.dump = function(result) {
        cr.appendArray(result, this.objects.valuesRef());
    };
    cr.GridCell = GridCell_;
    var rendercellcache = [];

    function allocRenderCell(grid_, x_, y_) {
        var ret;
        RenderGrid_.prototype.totalCellCount++;
        if (rendercellcache.length) {
            ret = rendercellcache.pop();
            ret.grid = grid_;
            ret.x = x_;
            ret.y = y_;
            return ret;
        } else
            return new cr.RenderCell(grid_, x_, y_);
    };

    function freeRenderCell(c) {
        RenderGrid_.prototype.totalCellCount--;
        c.reset();
        if (rendercellcache.length < 1000)
            rendercellcache.push(c);
    };

    function RenderCell_(grid_, x_, y_) {
        this.grid = grid_;
        this.x = x_;
        this.y = y_;
        this.objects = []; // array which needs to be sorted by Z order
        this.is_sorted = true; // whether array is in correct sort order or not
        this.pending_removal = new cr.ObjectSet();
        this.any_pending_removal = false;
    };
    RenderCell_.prototype.isEmpty = function() {
        if (!this.objects.length) {;;
            return true;
        }
        if (this.objects.length > this.pending_removal.count())
            return false;;
        this.flush_pending(); // takes fast path and just resets state
        return true;
    };
    RenderCell_.prototype.insert = function(inst) {
        if (this.pending_removal.contains(inst)) {
            this.pending_removal.remove(inst);
            if (this.pending_removal.isEmpty())
                this.any_pending_removal = false;
            return;
        }
        if (this.objects.length) {
            var top = this.objects[this.objects.length - 1];
            if (top.get_zindex() > inst.get_zindex())
                this.is_sorted = false; // 'inst' should be somewhere beneath 'top'
            this.objects.push(inst);
        } else {
            this.objects.push(inst);
            this.is_sorted = true;
        };
    };
    RenderCell_.prototype.remove = function(inst) {
        this.pending_removal.add(inst);
        this.any_pending_removal = true;
        if (this.pending_removal.count() >= 30)
            this.flush_pending();
    };
    RenderCell_.prototype.flush_pending = function() {;
        if (!this.any_pending_removal)
            return; // not changed
        if (this.pending_removal.count() === this.objects.length) {
            this.reset();
            return;
        }
        cr.arrayRemoveAllFromObjectSet(this.objects, this.pending_removal);
        this.pending_removal.clear();
        this.any_pending_removal = false;
    };

    function sortByInstanceZIndex(a, b) {
        return a.zindex - b.zindex;
    };
    RenderCell_.prototype.ensure_sorted = function() {
        if (this.is_sorted)
            return; // already sorted
        this.objects.sort(sortByInstanceZIndex);
        this.is_sorted = true;
    };
    RenderCell_.prototype.reset = function() {
        cr.clearArray(this.objects);
        this.is_sorted = true;
        this.pending_removal.clear();
        this.any_pending_removal = false;
    };
    RenderCell_.prototype.dump = function(result) {
        this.flush_pending();
        this.ensure_sorted();
        if (this.objects.length)
            result.push(this.objects);
    };
    cr.RenderCell = RenderCell_;
    var fxNames = ["lighter",
        "xor",
        "copy",
        "destination-over",
        "source-in",
        "destination-in",
        "source-out",
        "destination-out",
        "source-atop",
        "destination-atop"
    ];
    cr.effectToCompositeOp = function(effect) {
        if (effect <= 0 || effect >= 11)
            return "source-over";
        return fxNames[effect - 1]; // not including "none" so offset by 1
    };
    cr.setGLBlend = function(this_, effect, gl) {
        if (!gl)
            return;
        this_.srcBlend = gl.ONE;
        this_.destBlend = gl.ONE_MINUS_SRC_ALPHA;
        switch (effect) {
            case 1: // lighter (additive)
                this_.srcBlend = gl.ONE;
                this_.destBlend = gl.ONE;
                break;
            case 2: // xor
                break; // todo
            case 3: // copy
                this_.srcBlend = gl.ONE;
                this_.destBlend = gl.ZERO;
                break;
            case 4: // destination-over
                this_.srcBlend = gl.ONE_MINUS_DST_ALPHA;
                this_.destBlend = gl.ONE;
                break;
            case 5: // source-in
                this_.srcBlend = gl.DST_ALPHA;
                this_.destBlend = gl.ZERO;
                break;
            case 6: // destination-in
                this_.srcBlend = gl.ZERO;
                this_.destBlend = gl.SRC_ALPHA;
                break;
            case 7: // source-out
                this_.srcBlend = gl.ONE_MINUS_DST_ALPHA;
                this_.destBlend = gl.ZERO;
                break;
            case 8: // destination-out
                this_.srcBlend = gl.ZERO;
                this_.destBlend = gl.ONE_MINUS_SRC_ALPHA;
                break;
            case 9: // source-atop
                this_.srcBlend = gl.DST_ALPHA;
                this_.destBlend = gl.ONE_MINUS_SRC_ALPHA;
                break;
            case 10: // destination-atop
                this_.srcBlend = gl.ONE_MINUS_DST_ALPHA;
                this_.destBlend = gl.SRC_ALPHA;
                break;
        }
    };
    cr.round6dp = function(x) {
        return Math.round(x * 1000000) / 1000000;
    };
    /*
    var localeCompare_options = {
    	"usage": "search",
    	"sensitivity": "accent"
    };
    var has_localeCompare = !!"a".localeCompare;
    var localeCompare_works1 = (has_localeCompare && "a".localeCompare("A", undefined, localeCompare_options) === 0);
    var localeCompare_works2 = (has_localeCompare && "a".localeCompare("", undefined, localeCompare_options) !== 0);
    var supports_localeCompare = (has_localeCompare && localeCompare_works1 && localeCompare_works2);
    */
    cr.equals_nocase = function(a, b) {
        if (typeof a !== "string" || typeof b !== "string")
            return false;
        if (a.length !== b.length)
            return false;
        if (a === b)
            return true;
        /*
        if (supports_localeCompare)
        {
        	return (a.localeCompare(b, undefined, localeCompare_options) === 0);
        }
        else
        {
        */
        return a.toLowerCase() === b.toLowerCase();
    };
    cr.isCanvasInputEvent = function(e) {
        var target = e.target;
        if (!target)
            return true;
        if (target === document || target === window)
            return true;
        if (document && document.body && target === document.body)
            return true;
        if (cr.equals_nocase(target.tagName, "canvas"))
            return true;
        return false;
    };
}());
var MatrixArray = typeof Float32Array !== "undefined" ? Float32Array : Array,
    glMatrixArrayType = MatrixArray,
    vec3 = {},
    mat3 = {},
    mat4 = {},
    quat4 = {};
vec3.create = function(a) {
    var b = new MatrixArray(3);
    a && (b[0] = a[0], b[1] = a[1], b[2] = a[2]);
    return b
};
vec3.set = function(a, b) {
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    return b
};
vec3.add = function(a, b, c) {
    if (!c || a === c) return a[0] += b[0], a[1] += b[1], a[2] += b[2], a;
    c[0] = a[0] + b[0];
    c[1] = a[1] + b[1];
    c[2] = a[2] + b[2];
    return c
};
vec3.subtract = function(a, b, c) {
    if (!c || a === c) return a[0] -= b[0], a[1] -= b[1], a[2] -= b[2], a;
    c[0] = a[0] - b[0];
    c[1] = a[1] - b[1];
    c[2] = a[2] - b[2];
    return c
};
vec3.negate = function(a, b) {
    b || (b = a);
    b[0] = -a[0];
    b[1] = -a[1];
    b[2] = -a[2];
    return b
};
vec3.scale = function(a, b, c) {
    if (!c || a === c) return a[0] *= b, a[1] *= b, a[2] *= b, a;
    c[0] = a[0] * b;
    c[1] = a[1] * b;
    c[2] = a[2] * b;
    return c
};
vec3.normalize = function(a, b) {
    b || (b = a);
    var c = a[0],
        d = a[1],
        e = a[2],
        g = Math.sqrt(c * c + d * d + e * e);
    if (g) {
        if (g === 1) return b[0] = c, b[1] = d, b[2] = e, b
    } else return b[0] = 0, b[1] = 0, b[2] = 0, b;
    g = 1 / g;
    b[0] = c * g;
    b[1] = d * g;
    b[2] = e * g;
    return b
};
vec3.cross = function(a, b, c) {
    c || (c = a);
    var d = a[0],
        e = a[1],
        a = a[2],
        g = b[0],
        f = b[1],
        b = b[2];
    c[0] = e * b - a * f;
    c[1] = a * g - d * b;
    c[2] = d * f - e * g;
    return c
};
vec3.length = function(a) {
    var b = a[0],
        c = a[1],
        a = a[2];
    return Math.sqrt(b * b + c * c + a * a)
};
vec3.dot = function(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]
};
vec3.direction = function(a, b, c) {
    c || (c = a);
    var d = a[0] - b[0],
        e = a[1] - b[1],
        a = a[2] - b[2],
        b = Math.sqrt(d * d + e * e + a * a);
    if (!b) return c[0] = 0, c[1] = 0, c[2] = 0, c;
    b = 1 / b;
    c[0] = d * b;
    c[1] = e * b;
    c[2] = a * b;
    return c
};
vec3.lerp = function(a, b, c, d) {
    d || (d = a);
    d[0] = a[0] + c * (b[0] - a[0]);
    d[1] = a[1] + c * (b[1] - a[1]);
    d[2] = a[2] + c * (b[2] - a[2]);
    return d
};
vec3.str = function(a) {
    return "[" + a[0] + ", " + a[1] + ", " + a[2] + "]"
};
mat3.create = function(a) {
    var b = new MatrixArray(9);
    a && (b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b[4] = a[4], b[5] = a[5], b[6] = a[6], b[7] = a[7], b[8] = a[8]);
    return b
};
mat3.set = function(a, b) {
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    b[3] = a[3];
    b[4] = a[4];
    b[5] = a[5];
    b[6] = a[6];
    b[7] = a[7];
    b[8] = a[8];
    return b
};
mat3.identity = function(a) {
    a[0] = 1;
    a[1] = 0;
    a[2] = 0;
    a[3] = 0;
    a[4] = 1;
    a[5] = 0;
    a[6] = 0;
    a[7] = 0;
    a[8] = 1;
    return a
};
mat3.transpose = function(a, b) {
    if (!b || a === b) {
        var c = a[1],
            d = a[2],
            e = a[5];
        a[1] = a[3];
        a[2] = a[6];
        a[3] = c;
        a[5] = a[7];
        a[6] = d;
        a[7] = e;
        return a
    }
    b[0] = a[0];
    b[1] = a[3];
    b[2] = a[6];
    b[3] = a[1];
    b[4] = a[4];
    b[5] = a[7];
    b[6] = a[2];
    b[7] = a[5];
    b[8] = a[8];
    return b
};
mat3.toMat4 = function(a, b) {
    b || (b = mat4.create());
    b[15] = 1;
    b[14] = 0;
    b[13] = 0;
    b[12] = 0;
    b[11] = 0;
    b[10] = a[8];
    b[9] = a[7];
    b[8] = a[6];
    b[7] = 0;
    b[6] = a[5];
    b[5] = a[4];
    b[4] = a[3];
    b[3] = 0;
    b[2] = a[2];
    b[1] = a[1];
    b[0] = a[0];
    return b
};
mat3.str = function(a) {
    return "[" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + "]"
};
mat4.create = function(a) {
    var b = new MatrixArray(16);
    a && (b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3], b[4] = a[4], b[5] = a[5], b[6] = a[6], b[7] = a[7], b[8] = a[8], b[9] = a[9], b[10] = a[10], b[11] = a[11], b[12] = a[12], b[13] = a[13], b[14] = a[14], b[15] = a[15]);
    return b
};
mat4.set = function(a, b) {
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    b[3] = a[3];
    b[4] = a[4];
    b[5] = a[5];
    b[6] = a[6];
    b[7] = a[7];
    b[8] = a[8];
    b[9] = a[9];
    b[10] = a[10];
    b[11] = a[11];
    b[12] = a[12];
    b[13] = a[13];
    b[14] = a[14];
    b[15] = a[15];
    return b
};
mat4.identity = function(a) {
    a[0] = 1;
    a[1] = 0;
    a[2] = 0;
    a[3] = 0;
    a[4] = 0;
    a[5] = 1;
    a[6] = 0;
    a[7] = 0;
    a[8] = 0;
    a[9] = 0;
    a[10] = 1;
    a[11] = 0;
    a[12] = 0;
    a[13] = 0;
    a[14] = 0;
    a[15] = 1;
    return a
};
mat4.transpose = function(a, b) {
    if (!b || a === b) {
        var c = a[1],
            d = a[2],
            e = a[3],
            g = a[6],
            f = a[7],
            h = a[11];
        a[1] = a[4];
        a[2] = a[8];
        a[3] = a[12];
        a[4] = c;
        a[6] = a[9];
        a[7] = a[13];
        a[8] = d;
        a[9] = g;
        a[11] = a[14];
        a[12] = e;
        a[13] = f;
        a[14] = h;
        return a
    }
    b[0] = a[0];
    b[1] = a[4];
    b[2] = a[8];
    b[3] = a[12];
    b[4] = a[1];
    b[5] = a[5];
    b[6] = a[9];
    b[7] = a[13];
    b[8] = a[2];
    b[9] = a[6];
    b[10] = a[10];
    b[11] = a[14];
    b[12] = a[3];
    b[13] = a[7];
    b[14] = a[11];
    b[15] = a[15];
    return b
};
mat4.determinant = function(a) {
    var b = a[0],
        c = a[1],
        d = a[2],
        e = a[3],
        g = a[4],
        f = a[5],
        h = a[6],
        i = a[7],
        j = a[8],
        k = a[9],
        l = a[10],
        n = a[11],
        o = a[12],
        m = a[13],
        p = a[14],
        a = a[15];
    return o * k * h * e - j * m * h * e - o * f * l * e + g * m * l * e + j * f * p * e - g * k * p * e - o * k * d * i + j * m * d * i + o * c * l * i - b * m * l * i - j * c * p * i + b * k * p * i + o * f * d * n - g * m * d * n - o * c * h * n + b * m * h * n + g * c * p * n - b * f * p * n - j * f * d * a + g * k * d * a + j * c * h * a - b * k * h * a - g * c * l * a + b * f * l * a
};
mat4.inverse = function(a, b) {
    b || (b = a);
    var c = a[0],
        d = a[1],
        e = a[2],
        g = a[3],
        f = a[4],
        h = a[5],
        i = a[6],
        j = a[7],
        k = a[8],
        l = a[9],
        n = a[10],
        o = a[11],
        m = a[12],
        p = a[13],
        r = a[14],
        s = a[15],
        A = c * h - d * f,
        B = c * i - e * f,
        t = c * j - g * f,
        u = d * i - e * h,
        v = d * j - g * h,
        w = e * j - g * i,
        x = k * p - l * m,
        y = k * r - n * m,
        z = k * s - o * m,
        C = l * r - n * p,
        D = l * s - o * p,
        E = n * s - o * r,
        q = 1 / (A * E - B * D + t * C + u * z - v * y + w * x);
    b[0] = (h * E - i * D + j * C) * q;
    b[1] = (-d * E + e * D - g * C) * q;
    b[2] = (p * w - r * v + s * u) * q;
    b[3] = (-l * w + n * v - o * u) * q;
    b[4] = (-f * E + i * z - j * y) * q;
    b[5] = (c * E - e * z + g * y) * q;
    b[6] = (-m * w + r * t - s * B) * q;
    b[7] = (k * w - n * t + o * B) * q;
    b[8] = (f * D - h * z + j * x) * q;
    b[9] = (-c * D + d * z - g * x) * q;
    b[10] = (m * v - p * t + s * A) * q;
    b[11] = (-k * v + l * t - o * A) * q;
    b[12] = (-f * C + h * y - i * x) * q;
    b[13] = (c * C - d * y + e * x) * q;
    b[14] = (-m * u + p * B - r * A) * q;
    b[15] = (k * u - l * B + n * A) * q;
    return b
};
mat4.toRotationMat = function(a, b) {
    b || (b = mat4.create());
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    b[3] = a[3];
    b[4] = a[4];
    b[5] = a[5];
    b[6] = a[6];
    b[7] = a[7];
    b[8] = a[8];
    b[9] = a[9];
    b[10] = a[10];
    b[11] = a[11];
    b[12] = 0;
    b[13] = 0;
    b[14] = 0;
    b[15] = 1;
    return b
};
mat4.toMat3 = function(a, b) {
    b || (b = mat3.create());
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    b[3] = a[4];
    b[4] = a[5];
    b[5] = a[6];
    b[6] = a[8];
    b[7] = a[9];
    b[8] = a[10];
    return b
};
mat4.toInverseMat3 = function(a, b) {
    var c = a[0],
        d = a[1],
        e = a[2],
        g = a[4],
        f = a[5],
        h = a[6],
        i = a[8],
        j = a[9],
        k = a[10],
        l = k * f - h * j,
        n = -k * g + h * i,
        o = j * g - f * i,
        m = c * l + d * n + e * o;
    if (!m) return null;
    m = 1 / m;
    b || (b = mat3.create());
    b[0] = l * m;
    b[1] = (-k * d + e * j) * m;
    b[2] = (h * d - e * f) * m;
    b[3] = n * m;
    b[4] = (k * c - e * i) * m;
    b[5] = (-h * c + e * g) * m;
    b[6] = o * m;
    b[7] = (-j * c + d * i) * m;
    b[8] = (f * c - d * g) * m;
    return b
};
mat4.multiply = function(a, b, c) {
    c || (c = a);
    var d = a[0],
        e = a[1],
        g = a[2],
        f = a[3],
        h = a[4],
        i = a[5],
        j = a[6],
        k = a[7],
        l = a[8],
        n = a[9],
        o = a[10],
        m = a[11],
        p = a[12],
        r = a[13],
        s = a[14],
        a = a[15],
        A = b[0],
        B = b[1],
        t = b[2],
        u = b[3],
        v = b[4],
        w = b[5],
        x = b[6],
        y = b[7],
        z = b[8],
        C = b[9],
        D = b[10],
        E = b[11],
        q = b[12],
        F = b[13],
        G = b[14],
        b = b[15];
    c[0] = A * d + B * h + t * l + u * p;
    c[1] = A * e + B * i + t * n + u * r;
    c[2] = A * g + B * j + t * o + u * s;
    c[3] = A * f + B * k + t * m + u * a;
    c[4] = v * d + w * h + x * l + y * p;
    c[5] = v * e + w * i + x * n + y * r;
    c[6] = v * g + w * j + x * o + y * s;
    c[7] = v * f + w * k + x * m + y * a;
    c[8] = z * d + C * h + D * l + E * p;
    c[9] = z * e + C * i + D * n + E * r;
    c[10] = z * g + C *
        j + D * o + E * s;
    c[11] = z * f + C * k + D * m + E * a;
    c[12] = q * d + F * h + G * l + b * p;
    c[13] = q * e + F * i + G * n + b * r;
    c[14] = q * g + F * j + G * o + b * s;
    c[15] = q * f + F * k + G * m + b * a;
    return c
};
mat4.multiplyVec3 = function(a, b, c) {
    c || (c = b);
    var d = b[0],
        e = b[1],
        b = b[2];
    c[0] = a[0] * d + a[4] * e + a[8] * b + a[12];
    c[1] = a[1] * d + a[5] * e + a[9] * b + a[13];
    c[2] = a[2] * d + a[6] * e + a[10] * b + a[14];
    return c
};
mat4.multiplyVec4 = function(a, b, c) {
    c || (c = b);
    var d = b[0],
        e = b[1],
        g = b[2],
        b = b[3];
    c[0] = a[0] * d + a[4] * e + a[8] * g + a[12] * b;
    c[1] = a[1] * d + a[5] * e + a[9] * g + a[13] * b;
    c[2] = a[2] * d + a[6] * e + a[10] * g + a[14] * b;
    c[3] = a[3] * d + a[7] * e + a[11] * g + a[15] * b;
    return c
};
mat4.translate = function(a, b, c) {
    var d = b[0],
        e = b[1],
        b = b[2],
        g, f, h, i, j, k, l, n, o, m, p, r;
    if (!c || a === c) return a[12] = a[0] * d + a[4] * e + a[8] * b + a[12], a[13] = a[1] * d + a[5] * e + a[9] * b + a[13], a[14] = a[2] * d + a[6] * e + a[10] * b + a[14], a[15] = a[3] * d + a[7] * e + a[11] * b + a[15], a;
    g = a[0];
    f = a[1];
    h = a[2];
    i = a[3];
    j = a[4];
    k = a[5];
    l = a[6];
    n = a[7];
    o = a[8];
    m = a[9];
    p = a[10];
    r = a[11];
    c[0] = g;
    c[1] = f;
    c[2] = h;
    c[3] = i;
    c[4] = j;
    c[5] = k;
    c[6] = l;
    c[7] = n;
    c[8] = o;
    c[9] = m;
    c[10] = p;
    c[11] = r;
    c[12] = g * d + j * e + o * b + a[12];
    c[13] = f * d + k * e + m * b + a[13];
    c[14] = h * d + l * e + p * b + a[14];
    c[15] = i * d + n * e + r * b + a[15];
    return c
};
mat4.scale = function(a, b, c) {
    var d = b[0],
        e = b[1],
        b = b[2];
    if (!c || a === c) return a[0] *= d, a[1] *= d, a[2] *= d, a[3] *= d, a[4] *= e, a[5] *= e, a[6] *= e, a[7] *= e, a[8] *= b, a[9] *= b, a[10] *= b, a[11] *= b, a;
    c[0] = a[0] * d;
    c[1] = a[1] * d;
    c[2] = a[2] * d;
    c[3] = a[3] * d;
    c[4] = a[4] * e;
    c[5] = a[5] * e;
    c[6] = a[6] * e;
    c[7] = a[7] * e;
    c[8] = a[8] * b;
    c[9] = a[9] * b;
    c[10] = a[10] * b;
    c[11] = a[11] * b;
    c[12] = a[12];
    c[13] = a[13];
    c[14] = a[14];
    c[15] = a[15];
    return c
};
mat4.rotate = function(a, b, c, d) {
    var e = c[0],
        g = c[1],
        c = c[2],
        f = Math.sqrt(e * e + g * g + c * c),
        h, i, j, k, l, n, o, m, p, r, s, A, B, t, u, v, w, x, y, z;
    if (!f) return null;
    f !== 1 && (f = 1 / f, e *= f, g *= f, c *= f);
    h = Math.sin(b);
    i = Math.cos(b);
    j = 1 - i;
    b = a[0];
    f = a[1];
    k = a[2];
    l = a[3];
    n = a[4];
    o = a[5];
    m = a[6];
    p = a[7];
    r = a[8];
    s = a[9];
    A = a[10];
    B = a[11];
    t = e * e * j + i;
    u = g * e * j + c * h;
    v = c * e * j - g * h;
    w = e * g * j - c * h;
    x = g * g * j + i;
    y = c * g * j + e * h;
    z = e * c * j + g * h;
    e = g * c * j - e * h;
    g = c * c * j + i;
    d ? a !== d && (d[12] = a[12], d[13] = a[13], d[14] = a[14], d[15] = a[15]) : d = a;
    d[0] = b * t + n * u + r * v;
    d[1] = f * t + o * u + s * v;
    d[2] = k * t + m * u + A *
        v;
    d[3] = l * t + p * u + B * v;
    d[4] = b * w + n * x + r * y;
    d[5] = f * w + o * x + s * y;
    d[6] = k * w + m * x + A * y;
    d[7] = l * w + p * x + B * y;
    d[8] = b * z + n * e + r * g;
    d[9] = f * z + o * e + s * g;
    d[10] = k * z + m * e + A * g;
    d[11] = l * z + p * e + B * g;
    return d
};
mat4.rotateX = function(a, b, c) {
    var d = Math.sin(b),
        b = Math.cos(b),
        e = a[4],
        g = a[5],
        f = a[6],
        h = a[7],
        i = a[8],
        j = a[9],
        k = a[10],
        l = a[11];
    c ? a !== c && (c[0] = a[0], c[1] = a[1], c[2] = a[2], c[3] = a[3], c[12] = a[12], c[13] = a[13], c[14] = a[14], c[15] = a[15]) : c = a;
    c[4] = e * b + i * d;
    c[5] = g * b + j * d;
    c[6] = f * b + k * d;
    c[7] = h * b + l * d;
    c[8] = e * -d + i * b;
    c[9] = g * -d + j * b;
    c[10] = f * -d + k * b;
    c[11] = h * -d + l * b;
    return c
};
mat4.rotateY = function(a, b, c) {
    var d = Math.sin(b),
        b = Math.cos(b),
        e = a[0],
        g = a[1],
        f = a[2],
        h = a[3],
        i = a[8],
        j = a[9],
        k = a[10],
        l = a[11];
    c ? a !== c && (c[4] = a[4], c[5] = a[5], c[6] = a[6], c[7] = a[7], c[12] = a[12], c[13] = a[13], c[14] = a[14], c[15] = a[15]) : c = a;
    c[0] = e * b + i * -d;
    c[1] = g * b + j * -d;
    c[2] = f * b + k * -d;
    c[3] = h * b + l * -d;
    c[8] = e * d + i * b;
    c[9] = g * d + j * b;
    c[10] = f * d + k * b;
    c[11] = h * d + l * b;
    return c
};
mat4.rotateZ = function(a, b, c) {
    var d = Math.sin(b),
        b = Math.cos(b),
        e = a[0],
        g = a[1],
        f = a[2],
        h = a[3],
        i = a[4],
        j = a[5],
        k = a[6],
        l = a[7];
    c ? a !== c && (c[8] = a[8], c[9] = a[9], c[10] = a[10], c[11] = a[11], c[12] = a[12], c[13] = a[13], c[14] = a[14], c[15] = a[15]) : c = a;
    c[0] = e * b + i * d;
    c[1] = g * b + j * d;
    c[2] = f * b + k * d;
    c[3] = h * b + l * d;
    c[4] = e * -d + i * b;
    c[5] = g * -d + j * b;
    c[6] = f * -d + k * b;
    c[7] = h * -d + l * b;
    return c
};
mat4.frustum = function(a, b, c, d, e, g, f) {
    f || (f = mat4.create());
    var h = b - a,
        i = d - c,
        j = g - e;
    f[0] = e * 2 / h;
    f[1] = 0;
    f[2] = 0;
    f[3] = 0;
    f[4] = 0;
    f[5] = e * 2 / i;
    f[6] = 0;
    f[7] = 0;
    f[8] = (b + a) / h;
    f[9] = (d + c) / i;
    f[10] = -(g + e) / j;
    f[11] = -1;
    f[12] = 0;
    f[13] = 0;
    f[14] = -(g * e * 2) / j;
    f[15] = 0;
    return f
};
mat4.perspective = function(a, b, c, d, e) {
    a = c * Math.tan(a * Math.PI / 360);
    b *= a;
    return mat4.frustum(-b, b, -a, a, c, d, e)
};
mat4.ortho = function(a, b, c, d, e, g, f) {
    f || (f = mat4.create());
    var h = b - a,
        i = d - c,
        j = g - e;
    f[0] = 2 / h;
    f[1] = 0;
    f[2] = 0;
    f[3] = 0;
    f[4] = 0;
    f[5] = 2 / i;
    f[6] = 0;
    f[7] = 0;
    f[8] = 0;
    f[9] = 0;
    f[10] = -2 / j;
    f[11] = 0;
    f[12] = -(a + b) / h;
    f[13] = -(d + c) / i;
    f[14] = -(g + e) / j;
    f[15] = 1;
    return f
};
mat4.lookAt = function(a, b, c, d) {
    d || (d = mat4.create());
    var e, g, f, h, i, j, k, l, n = a[0],
        o = a[1],
        a = a[2];
    g = c[0];
    f = c[1];
    e = c[2];
    c = b[1];
    j = b[2];
    if (n === b[0] && o === c && a === j) return mat4.identity(d);
    c = n - b[0];
    j = o - b[1];
    k = a - b[2];
    l = 1 / Math.sqrt(c * c + j * j + k * k);
    c *= l;
    j *= l;
    k *= l;
    b = f * k - e * j;
    e = e * c - g * k;
    g = g * j - f * c;
    (l = Math.sqrt(b * b + e * e + g * g)) ? (l = 1 / l, b *= l, e *= l, g *= l) : g = e = b = 0;
    f = j * g - k * e;
    h = k * b - c * g;
    i = c * e - j * b;
    (l = Math.sqrt(f * f + h * h + i * i)) ? (l = 1 / l, f *= l, h *= l, i *= l) : i = h = f = 0;
    d[0] = b;
    d[1] = f;
    d[2] = c;
    d[3] = 0;
    d[4] = e;
    d[5] = h;
    d[6] = j;
    d[7] = 0;
    d[8] = g;
    d[9] = i;
    d[10] = k;
    d[11] =
        0;
    d[12] = -(b * n + e * o + g * a);
    d[13] = -(f * n + h * o + i * a);
    d[14] = -(c * n + j * o + k * a);
    d[15] = 1;
    return d
};
mat4.fromRotationTranslation = function(a, b, c) {
    c || (c = mat4.create());
    var d = a[0],
        e = a[1],
        g = a[2],
        f = a[3],
        h = d + d,
        i = e + e,
        j = g + g,
        a = d * h,
        k = d * i;
    d *= j;
    var l = e * i;
    e *= j;
    g *= j;
    h *= f;
    i *= f;
    f *= j;
    c[0] = 1 - (l + g);
    c[1] = k + f;
    c[2] = d - i;
    c[3] = 0;
    c[4] = k - f;
    c[5] = 1 - (a + g);
    c[6] = e + h;
    c[7] = 0;
    c[8] = d + i;
    c[9] = e - h;
    c[10] = 1 - (a + l);
    c[11] = 0;
    c[12] = b[0];
    c[13] = b[1];
    c[14] = b[2];
    c[15] = 1;
    return c
};
mat4.str = function(a) {
    return "[" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ", " + a[9] + ", " + a[10] + ", " + a[11] + ", " + a[12] + ", " + a[13] + ", " + a[14] + ", " + a[15] + "]"
};
quat4.create = function(a) {
    var b = new MatrixArray(4);
    a && (b[0] = a[0], b[1] = a[1], b[2] = a[2], b[3] = a[3]);
    return b
};
quat4.set = function(a, b) {
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    b[3] = a[3];
    return b
};
quat4.calculateW = function(a, b) {
    var c = a[0],
        d = a[1],
        e = a[2];
    if (!b || a === b) return a[3] = -Math.sqrt(Math.abs(1 - c * c - d * d - e * e)), a;
    b[0] = c;
    b[1] = d;
    b[2] = e;
    b[3] = -Math.sqrt(Math.abs(1 - c * c - d * d - e * e));
    return b
};
quat4.inverse = function(a, b) {
    if (!b || a === b) return a[0] *= -1, a[1] *= -1, a[2] *= -1, a;
    b[0] = -a[0];
    b[1] = -a[1];
    b[2] = -a[2];
    b[3] = a[3];
    return b
};
quat4.length = function(a) {
    var b = a[0],
        c = a[1],
        d = a[2],
        a = a[3];
    return Math.sqrt(b * b + c * c + d * d + a * a)
};
quat4.normalize = function(a, b) {
    b || (b = a);
    var c = a[0],
        d = a[1],
        e = a[2],
        g = a[3],
        f = Math.sqrt(c * c + d * d + e * e + g * g);
    if (f === 0) return b[0] = 0, b[1] = 0, b[2] = 0, b[3] = 0, b;
    f = 1 / f;
    b[0] = c * f;
    b[1] = d * f;
    b[2] = e * f;
    b[3] = g * f;
    return b
};
quat4.multiply = function(a, b, c) {
    c || (c = a);
    var d = a[0],
        e = a[1],
        g = a[2],
        a = a[3],
        f = b[0],
        h = b[1],
        i = b[2],
        b = b[3];
    c[0] = d * b + a * f + e * i - g * h;
    c[1] = e * b + a * h + g * f - d * i;
    c[2] = g * b + a * i + d * h - e * f;
    c[3] = a * b - d * f - e * h - g * i;
    return c
};
quat4.multiplyVec3 = function(a, b, c) {
    c || (c = b);
    var d = b[0],
        e = b[1],
        g = b[2],
        b = a[0],
        f = a[1],
        h = a[2],
        a = a[3],
        i = a * d + f * g - h * e,
        j = a * e + h * d - b * g,
        k = a * g + b * e - f * d,
        d = -b * d - f * e - h * g;
    c[0] = i * a + d * -b + j * -h - k * -f;
    c[1] = j * a + d * -f + k * -b - i * -h;
    c[2] = k * a + d * -h + i * -f - j * -b;
    return c
};
quat4.toMat3 = function(a, b) {
    b || (b = mat3.create());
    var c = a[0],
        d = a[1],
        e = a[2],
        g = a[3],
        f = c + c,
        h = d + d,
        i = e + e,
        j = c * f,
        k = c * h;
    c *= i;
    var l = d * h;
    d *= i;
    e *= i;
    f *= g;
    h *= g;
    g *= i;
    b[0] = 1 - (l + e);
    b[1] = k + g;
    b[2] = c - h;
    b[3] = k - g;
    b[4] = 1 - (j + e);
    b[5] = d + f;
    b[6] = c + h;
    b[7] = d - f;
    b[8] = 1 - (j + l);
    return b
};
quat4.toMat4 = function(a, b) {
    b || (b = mat4.create());
    var c = a[0],
        d = a[1],
        e = a[2],
        g = a[3],
        f = c + c,
        h = d + d,
        i = e + e,
        j = c * f,
        k = c * h;
    c *= i;
    var l = d * h;
    d *= i;
    e *= i;
    f *= g;
    h *= g;
    g *= i;
    b[0] = 1 - (l + e);
    b[1] = k + g;
    b[2] = c - h;
    b[3] = 0;
    b[4] = k - g;
    b[5] = 1 - (j + e);
    b[6] = d + f;
    b[7] = 0;
    b[8] = c + h;
    b[9] = d - f;
    b[10] = 1 - (j + l);
    b[11] = 0;
    b[12] = 0;
    b[13] = 0;
    b[14] = 0;
    b[15] = 1;
    return b
};
quat4.slerp = function(a, b, c, d) {
    d || (d = a);
    var e = a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3],
        g, f;
    if (Math.abs(e) >= 1) return d !== a && (d[0] = a[0], d[1] = a[1], d[2] = a[2], d[3] = a[3]), d;
    g = Math.acos(e);
    f = Math.sqrt(1 - e * e);
    if (Math.abs(f) < 0.001) return d[0] = a[0] * 0.5 + b[0] * 0.5, d[1] = a[1] * 0.5 + b[1] * 0.5, d[2] = a[2] * 0.5 + b[2] * 0.5, d[3] = a[3] * 0.5 + b[3] * 0.5, d;
    e = Math.sin((1 - c) * g) / f;
    c = Math.sin(c * g) / f;
    d[0] = a[0] * e + b[0] * c;
    d[1] = a[1] * e + b[1] * c;
    d[2] = a[2] * e + b[2] * c;
    d[3] = a[3] * e + b[3] * c;
    return d
};
quat4.str = function(a) {
    return "[" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + "]"
};
(function() {
    var MAX_VERTICES = 8000; // equates to 2500 objects being drawn
    var MAX_INDICES = (MAX_VERTICES / 2) * 3; // 6 indices for every 4 vertices
    var MAX_POINTS = 8000;
    var MULTI_BUFFERS = 4; // cycle 4 buffers to try and avoid blocking
    var BATCH_NULL = 0;
    var BATCH_QUAD = 1;
    var BATCH_SETTEXTURE = 2;
    var BATCH_SETOPACITY = 3;
    var BATCH_SETBLEND = 4;
    var BATCH_UPDATEMODELVIEW = 5;
    var BATCH_RENDERTOTEXTURE = 6;
    var BATCH_CLEAR = 7;
    var BATCH_POINTS = 8;
    var BATCH_SETPROGRAM = 9;
    var BATCH_SETPROGRAMPARAMETERS = 10;
    var BATCH_SETTEXTURE1 = 11;
    var BATCH_SETCOLOR = 12;
    var BATCH_SETDEPTHTEST = 13;
    var BATCH_SETEARLYZMODE = 14;
    /*
    var lose_ext = null;
    window.lose_context = function ()
    {
    	if (!lose_ext)
    	{
    		console.log("WEBGL_lose_context not supported");
    		return;
    	}
    	lose_ext.loseContext();
    };
    window.restore_context = function ()
    {
    	if (!lose_ext)
    	{
    		console.log("WEBGL_lose_context not supported");
    		return;
    	}
    	lose_ext.restoreContext();
    };
    */
    var tempMat4 = mat4.create();

    function GLWrap_(gl, isMobile, enableFrontToBack) {
        this.isIE = /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent);
        this.width = 0; // not yet known, wait for call to setSize()
        this.height = 0;
        this.enableFrontToBack = !!enableFrontToBack;
        this.isEarlyZPass = false;
        this.isBatchInEarlyZPass = false;
        this.currentZ = 0;
        this.zNear = 1;
        this.zFar = 1000;
        this.zIncrement = ((this.zFar - this.zNear) / 32768);
        this.zA = this.zFar / (this.zFar - this.zNear);
        this.zB = this.zFar * this.zNear / (this.zNear - this.zFar);
        this.kzA = 65536 * this.zA;
        this.kzB = 65536 * this.zB;
        this.cam = vec3.create([0, 0, 100]); // camera position
        this.look = vec3.create([0, 0, 0]); // lookat position
        this.up = vec3.create([0, 1, 0]); // up vector
        this.worldScale = vec3.create([1, 1, 1]); // world scaling factor
        this.enable_mipmaps = true;
        this.matP = mat4.create(); // perspective matrix
        this.matMV = mat4.create(); // model view matrix
        this.lastMV = mat4.create();
        this.currentMV = mat4.create();
        this.gl = gl;
        this.version = (this.gl.getParameter(this.gl.VERSION).indexOf("WebGL 2") === 0 ? 2 : 1);
        this.initState();
    };
    GLWrap_.prototype.initState = function() {
        var gl = this.gl;
        var i, len;
        this.lastOpacity = 1;
        this.lastTexture0 = null; // last bound to TEXTURE0
        this.lastTexture1 = null; // last bound to TEXTURE1
        this.currentOpacity = 1;
        gl.clearColor(0, 0, 0, 0);
        gl.clear(gl.COLOR_BUFFER_BIT);
        gl.enable(gl.BLEND);
        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);
        gl.disable(gl.CULL_FACE);
        gl.disable(gl.STENCIL_TEST);
        gl.disable(gl.DITHER);
        if (this.enableFrontToBack) {
            gl.enable(gl.DEPTH_TEST);
            gl.depthFunc(gl.LEQUAL);
        } else {
            gl.disable(gl.DEPTH_TEST);
        }
        this.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);
        this.lastSrcBlend = gl.ONE;
        this.lastDestBlend = gl.ONE_MINUS_SRC_ALPHA;
        this.vertexData = new Float32Array(MAX_VERTICES * (this.enableFrontToBack ? 3 : 2));
        this.texcoordData = new Float32Array(MAX_VERTICES * 2);
        this.pointData = new Float32Array(MAX_POINTS * 4);
        this.pointBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, this.pointBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, this.pointData.byteLength, gl.DYNAMIC_DRAW);
        this.vertexBuffers = new Array(MULTI_BUFFERS);
        this.texcoordBuffers = new Array(MULTI_BUFFERS);
        for (i = 0; i < MULTI_BUFFERS; i++) {
            this.vertexBuffers[i] = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffers[i]);
            gl.bufferData(gl.ARRAY_BUFFER, this.vertexData.byteLength, gl.DYNAMIC_DRAW);
            this.texcoordBuffers[i] = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, this.texcoordBuffers[i]);
            gl.bufferData(gl.ARRAY_BUFFER, this.texcoordData.byteLength, gl.DYNAMIC_DRAW);
        }
        this.curBuffer = 0;
        this.indexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
        var indexData = new Uint16Array(MAX_INDICES);
        i = 0, len = MAX_INDICES;
        var fv = 0;
        while (i < len) {
            indexData[i++] = fv; // top left
            indexData[i++] = fv + 1; // top right
            indexData[i++] = fv + 2; // bottom right (first tri)
            indexData[i++] = fv; // top left
            indexData[i++] = fv + 2; // bottom right
            indexData[i++] = fv + 3; // bottom left
            fv += 4;
        }
        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indexData, gl.STATIC_DRAW);
        this.vertexPtr = 0;
        this.texPtr = 0;
        this.pointPtr = 0;
        var fsSource, vsSource;
        this.shaderPrograms = [];
        fsSource = [
            "varying mediump vec2 vTex;",
            "uniform lowp float opacity;",
            "uniform lowp sampler2D samplerFront;",
            "void main(void) {",
            "	gl_FragColor = texture2D(samplerFront, vTex);",
            "	gl_FragColor *= opacity;",
            "}"
        ].join("\n");
        if (this.enableFrontToBack) {
            vsSource = [
                "attribute highp vec3 aPos;",
                "attribute mediump vec2 aTex;",
                "varying mediump vec2 vTex;",
                "uniform highp mat4 matP;",
                "uniform highp mat4 matMV;",
                "void main(void) {",
                "	gl_Position = matP * matMV * vec4(aPos.x, aPos.y, aPos.z, 1.0);",
                "	vTex = aTex;",
                "}"
            ].join("\n");
        } else {
            vsSource = [
                "attribute highp vec2 aPos;",
                "attribute mediump vec2 aTex;",
                "varying mediump vec2 vTex;",
                "uniform highp mat4 matP;",
                "uniform highp mat4 matMV;",
                "void main(void) {",
                "	gl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);",
                "	vTex = aTex;",
                "}"
            ].join("\n");
        }
        var shaderProg = this.createShaderProgram({
            src: fsSource
        }, vsSource, "<default>");;
        this.shaderPrograms.push(shaderProg); // Default shader is always shader 0
        fsSource = [
            "uniform mediump sampler2D samplerFront;",
            "varying lowp float opacity;",
            "void main(void) {",
            "	gl_FragColor = texture2D(samplerFront, gl_PointCoord);",
            "	gl_FragColor *= opacity;",
            "}"
        ].join("\n");
        var pointVsSource = [
            "attribute vec4 aPos;",
            "varying float opacity;",
            "uniform mat4 matP;",
            "uniform mat4 matMV;",
            "void main(void) {",
            "	gl_Position = matP * matMV * vec4(aPos.x, aPos.y, 0.0, 1.0);",
            "	gl_PointSize = aPos.z;",
            "	opacity = aPos.w;",
            "}"
        ].join("\n");
        shaderProg = this.createShaderProgram({
            src: fsSource
        }, pointVsSource, "<point>");;
        this.shaderPrograms.push(shaderProg); // Point shader is always shader 1
        fsSource = [
            "varying mediump vec2 vTex;",
            "uniform lowp sampler2D samplerFront;",
            "void main(void) {",
            "	if (texture2D(samplerFront, vTex).a < 1.0)",
            "		discard;", // discarding non-opaque fragments
            "}"
        ].join("\n");
        var shaderProg = this.createShaderProgram({
            src: fsSource
        }, vsSource, "<earlyz>");;
        this.shaderPrograms.push(shaderProg); // Early-Z shader is always shader 2
        fsSource = [
            "uniform lowp vec4 colorFill;",
            "void main(void) {",
            "	gl_FragColor = colorFill;",
            "}"
        ].join("\n");
        var shaderProg = this.createShaderProgram({
            src: fsSource
        }, vsSource, "<fill>");;
        this.shaderPrograms.push(shaderProg); // Fill-color shader is always shader 3
        for (var shader_name in cr.shaders) {
            if (cr.shaders.hasOwnProperty(shader_name))
                this.shaderPrograms.push(this.createShaderProgram(cr.shaders[shader_name], vsSource, shader_name));
        }
        gl.activeTexture(gl.TEXTURE0);
        gl.bindTexture(gl.TEXTURE_2D, null);
        this.batch = [];
        this.batchPtr = 0;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
        this.lastProgram = -1; // start -1 so first switchProgram can do work
        this.currentProgram = -1; // current program during batch execution
        this.currentShader = null;
        this.fbo = gl.createFramebuffer();
        this.renderToTex = null;
        this.depthBuffer = null;
        this.attachedDepthBuffer = false; // wait until first size call to attach, otherwise it has no storage
        if (this.enableFrontToBack) {
            this.depthBuffer = gl.createRenderbuffer();
        }
        this.tmpVec3 = vec3.create([0, 0, 0]);;
        var pointsizes = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);
        this.minPointSize = pointsizes[0];
        this.maxPointSize = pointsizes[1];
        if (this.maxPointSize > 2048)
            this.maxPointSize = 2048;;
        this.switchProgram(0);
        cr.seal(this);
    };

    function GLShaderProgram(gl, shaderProgram, name) {
        this.gl = gl;
        this.shaderProgram = shaderProgram;
        this.name = name;
        this.locAPos = gl.getAttribLocation(shaderProgram, "aPos");
        this.locATex = gl.getAttribLocation(shaderProgram, "aTex");
        this.locMatP = gl.getUniformLocation(shaderProgram, "matP");
        this.locMatMV = gl.getUniformLocation(shaderProgram, "matMV");
        this.locOpacity = gl.getUniformLocation(shaderProgram, "opacity");
        this.locColorFill = gl.getUniformLocation(shaderProgram, "colorFill");
        this.locSamplerFront = gl.getUniformLocation(shaderProgram, "samplerFront");
        this.locSamplerBack = gl.getUniformLocation(shaderProgram, "samplerBack");
        this.locDestStart = gl.getUniformLocation(shaderProgram, "destStart");
        this.locDestEnd = gl.getUniformLocation(shaderProgram, "destEnd");
        this.locSeconds = gl.getUniformLocation(shaderProgram, "seconds");
        this.locPixelWidth = gl.getUniformLocation(shaderProgram, "pixelWidth");
        this.locPixelHeight = gl.getUniformLocation(shaderProgram, "pixelHeight");
        this.locLayerScale = gl.getUniformLocation(shaderProgram, "layerScale");
        this.locLayerAngle = gl.getUniformLocation(shaderProgram, "layerAngle");
        this.locViewOrigin = gl.getUniformLocation(shaderProgram, "viewOrigin");
        this.locScrollPos = gl.getUniformLocation(shaderProgram, "scrollPos");
        this.hasAnyOptionalUniforms = !!(this.locPixelWidth || this.locPixelHeight || this.locSeconds || this.locSamplerBack || this.locDestStart || this.locDestEnd || this.locLayerScale || this.locLayerAngle || this.locViewOrigin || this.locScrollPos);
        this.lpPixelWidth = -999; // set to something unlikely so never counts as cached on first set
        this.lpPixelHeight = -999;
        this.lpOpacity = 1;
        this.lpDestStartX = 0.0;
        this.lpDestStartY = 0.0;
        this.lpDestEndX = 1.0;
        this.lpDestEndY = 1.0;
        this.lpLayerScale = 1.0;
        this.lpLayerAngle = 0.0;
        this.lpViewOriginX = 0.0;
        this.lpViewOriginY = 0.0;
        this.lpScrollPosX = 0.0;
        this.lpScrollPosY = 0.0;
        this.lpSeconds = 0.0;
        this.lastCustomParams = [];
        this.lpMatMV = mat4.create();
        if (this.locOpacity)
            gl.uniform1f(this.locOpacity, 1);
        if (this.locColorFill)
            gl.uniform4f(this.locColorFill, 1.0, 1.0, 1.0, 1.0);
        if (this.locSamplerFront)
            gl.uniform1i(this.locSamplerFront, 0);
        if (this.locSamplerBack)
            gl.uniform1i(this.locSamplerBack, 1);
        if (this.locDestStart)
            gl.uniform2f(this.locDestStart, 0.0, 0.0);
        if (this.locDestEnd)
            gl.uniform2f(this.locDestEnd, 1.0, 1.0);
        if (this.locLayerScale)
            gl.uniform1f(this.locLayerScale, 1.0);
        if (this.locLayerAngle)
            gl.uniform1f(this.locLayerAngle, 0.0);
        if (this.locViewOrigin)
            gl.uniform2f(this.locViewOrigin, 0.0, 0.0);
        if (this.locScrollPos)
            gl.uniform2f(this.locScrollPos, 0.0, 0.0);
        if (this.locSeconds)
            gl.uniform1f(this.locSeconds, 0.0);
        this.hasCurrentMatMV = false; // matMV needs updating
    };

    function areMat4sEqual(a, b) {
        return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] &&
            a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] &&
            a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] &&
            a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];
    };
    GLShaderProgram.prototype.updateMatMV = function(mv) {
        if (areMat4sEqual(this.lpMatMV, mv))
            return; // no change, save the expensive GL call
        mat4.set(mv, this.lpMatMV);
        this.gl.uniformMatrix4fv(this.locMatMV, false, mv);
    };
    GLWrap_.prototype.createShaderProgram = function(shaderEntry, vsSource, name) {
        var gl = this.gl;
        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fragmentShader, shaderEntry.src);
        gl.compileShader(fragmentShader);
        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
            var compilationlog = gl.getShaderInfoLog(fragmentShader);
            gl.deleteShader(fragmentShader);
            throw new Error("error compiling fragment shader: " + compilationlog);
        }
        var vertexShader = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vertexShader, vsSource);
        gl.compileShader(vertexShader);
        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
            var compilationlog = gl.getShaderInfoLog(vertexShader);
            gl.deleteShader(fragmentShader);
            gl.deleteShader(vertexShader);
            throw new Error("error compiling vertex shader: " + compilationlog);
        }
        var shaderProgram = gl.createProgram();
        gl.attachShader(shaderProgram, fragmentShader);
        gl.attachShader(shaderProgram, vertexShader);
        gl.linkProgram(shaderProgram);
        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
            var compilationlog = gl.getProgramInfoLog(shaderProgram);
            gl.deleteShader(fragmentShader);
            gl.deleteShader(vertexShader);
            gl.deleteProgram(shaderProgram);
            throw new Error("error linking shader program: " + compilationlog);
        }
        gl.useProgram(shaderProgram);
        gl.deleteShader(fragmentShader);
        gl.deleteShader(vertexShader);
        var ret = new GLShaderProgram(gl, shaderProgram, name);
        ret.extendBoxHorizontal = shaderEntry.extendBoxHorizontal || 0;
        ret.extendBoxVertical = shaderEntry.extendBoxVertical || 0;
        ret.crossSampling = !!shaderEntry.crossSampling;
        ret.preservesOpaqueness = !!shaderEntry.preservesOpaqueness;
        ret.animated = !!shaderEntry.animated;
        ret.parameters = shaderEntry.parameters || [];
        var i, len;
        for (i = 0, len = ret.parameters.length; i < len; i++) {
            ret.parameters[i][1] = gl.getUniformLocation(shaderProgram, ret.parameters[i][0]);
            ret.lastCustomParams.push(0);
            gl.uniform1f(ret.parameters[i][1], 0);
        }
        cr.seal(ret);
        return ret;
    };
    GLWrap_.prototype.getShaderIndex = function(name_) {
        var i, len;
        for (i = 0, len = this.shaderPrograms.length; i < len; i++) {
            if (this.shaderPrograms[i].name === name_)
                return i;
        }
        return -1;
    };
    GLWrap_.prototype.project = function(x, y, out) {
        var mv = this.matMV;
        var proj = this.matP;
        var fTempo = [0, 0, 0, 0, 0, 0, 0, 0];
        fTempo[0] = mv[0] * x + mv[4] * y + mv[12];
        fTempo[1] = mv[1] * x + mv[5] * y + mv[13];
        fTempo[2] = mv[2] * x + mv[6] * y + mv[14];
        fTempo[3] = mv[3] * x + mv[7] * y + mv[15];
        fTempo[4] = proj[0] * fTempo[0] + proj[4] * fTempo[1] + proj[8] * fTempo[2] + proj[12] * fTempo[3];
        fTempo[5] = proj[1] * fTempo[0] + proj[5] * fTempo[1] + proj[9] * fTempo[2] + proj[13] * fTempo[3];
        fTempo[6] = proj[2] * fTempo[0] + proj[6] * fTempo[1] + proj[10] * fTempo[2] + proj[14] * fTempo[3];
        fTempo[7] = -fTempo[2];
        if (fTempo[7] === 0.0) //The w value
            return;
        fTempo[7] = 1.0 / fTempo[7];
        fTempo[4] *= fTempo[7];
        fTempo[5] *= fTempo[7];
        fTempo[6] *= fTempo[7];
        out[0] = (fTempo[4] * 0.5 + 0.5) * this.width;
        out[1] = (fTempo[5] * 0.5 + 0.5) * this.height;
    };
    GLWrap_.prototype.setSize = function(w, h, force) {
        if (this.width === w && this.height === h && !force)
            return;
        this.endBatch();
        var gl = this.gl;
        this.width = w;
        this.height = h;
        gl.viewport(0, 0, w, h);
        mat4.lookAt(this.cam, this.look, this.up, this.matMV);
        if (this.enableFrontToBack) {
            mat4.ortho(-w / 2, w / 2, h / 2, -h / 2, this.zNear, this.zFar, this.matP);
            this.worldScale[0] = 1;
            this.worldScale[1] = 1;
        } else {
            mat4.perspective(45, w / h, this.zNear, this.zFar, this.matP);
            var tl = [0, 0];
            var br = [0, 0];
            this.project(0, 0, tl);
            this.project(1, 1, br);
            this.worldScale[0] = 1 / (br[0] - tl[0]);
            this.worldScale[1] = -1 / (br[1] - tl[1]);
        }
        var i, len, s;
        for (i = 0, len = this.shaderPrograms.length; i < len; i++) {
            s = this.shaderPrograms[i];
            s.hasCurrentMatMV = false;
            if (s.locMatP) {
                gl.useProgram(s.shaderProgram);
                gl.uniformMatrix4fv(s.locMatP, false, this.matP);
            }
        }
        gl.useProgram(this.shaderPrograms[this.lastProgram].shaderProgram);
        gl.bindTexture(gl.TEXTURE_2D, null);
        gl.activeTexture(gl.TEXTURE1);
        gl.bindTexture(gl.TEXTURE_2D, null);
        gl.activeTexture(gl.TEXTURE0);
        this.lastTexture0 = null;
        this.lastTexture1 = null;
        if (this.depthBuffer) {
            gl.bindFramebuffer(gl.FRAMEBUFFER, this.fbo);
            gl.bindRenderbuffer(gl.RENDERBUFFER, this.depthBuffer);
            gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, this.width, this.height);
            if (!this.attachedDepthBuffer) {
                gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, this.depthBuffer);
                this.attachedDepthBuffer = true;
            }
            gl.bindRenderbuffer(gl.RENDERBUFFER, null);
            gl.bindFramebuffer(gl.FRAMEBUFFER, null);
            this.renderToTex = null;
        }
    };
    GLWrap_.prototype.resetModelView = function() {
        mat4.lookAt(this.cam, this.look, this.up, this.matMV);
        mat4.scale(this.matMV, this.worldScale);
    };
    GLWrap_.prototype.translate = function(x, y) {
        if (x === 0 && y === 0)
            return;
        this.tmpVec3[0] = x; // * this.worldScale[0];
        this.tmpVec3[1] = y; // * this.worldScale[1];
        this.tmpVec3[2] = 0;
        mat4.translate(this.matMV, this.tmpVec3);
    };
    GLWrap_.prototype.scale = function(x, y) {
        if (x === 1 && y === 1)
            return;
        this.tmpVec3[0] = x;
        this.tmpVec3[1] = y;
        this.tmpVec3[2] = 1;
        mat4.scale(this.matMV, this.tmpVec3);
    };
    GLWrap_.prototype.rotateZ = function(a) {
        if (a === 0)
            return;
        mat4.rotateZ(this.matMV, a);
    };
    GLWrap_.prototype.updateModelView = function() {
        if (areMat4sEqual(this.lastMV, this.matMV))
            return;
        var b = this.pushBatch();
        b.type = BATCH_UPDATEMODELVIEW;
        if (b.mat4param)
            mat4.set(this.matMV, b.mat4param);
        else
            b.mat4param = mat4.create(this.matMV);
        mat4.set(this.matMV, this.lastMV);
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    /*
    var debugBatch = false;
    jQuery(document).mousedown(
    	function(info) {
    		if (info.which === 2)
    			debugBatch = true;
    	}
    );
    */
    GLWrap_.prototype.setEarlyZIndex = function(i) {
        if (!this.enableFrontToBack)
            return;
        if (i > 32760)
            i = 32760;
        this.currentZ = this.cam[2] - this.zNear - i * this.zIncrement;
    };

    function GLBatchJob(type_, glwrap_) {
        this.type = type_;
        this.glwrap = glwrap_;
        this.gl = glwrap_.gl;
        this.opacityParam = 0; // for setOpacity()
        this.startIndex = 0; // for quad()
        this.indexCount = 0; // "
        this.texParam = null; // for setTexture()
        this.mat4param = null; // for updateModelView()
        this.shaderParams = []; // for user parameters
        cr.seal(this);
    };
    GLBatchJob.prototype.doSetEarlyZPass = function() {
        var gl = this.gl;
        var glwrap = this.glwrap;
        if (this.startIndex !== 0) // enable
        {
            gl.depthMask(true); // enable depth writes
            gl.colorMask(false, false, false, false); // disable color writes
            gl.disable(gl.BLEND); // no color writes so disable blend
            gl.bindFramebuffer(gl.FRAMEBUFFER, glwrap.fbo);
            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, null, 0);
            gl.clear(gl.DEPTH_BUFFER_BIT); // auto-clear depth buffer
            gl.bindFramebuffer(gl.FRAMEBUFFER, null);
            glwrap.isBatchInEarlyZPass = true;
        } else {
            gl.depthMask(false); // disable depth writes, only test existing depth values
            gl.colorMask(true, true, true, true); // enable color writes
            gl.enable(gl.BLEND); // turn blending back on
            glwrap.isBatchInEarlyZPass = false;
        }
    };
    GLBatchJob.prototype.doSetTexture = function() {
        this.gl.bindTexture(this.gl.TEXTURE_2D, this.texParam);
    };
    GLBatchJob.prototype.doSetTexture1 = function() {
        var gl = this.gl;
        gl.activeTexture(gl.TEXTURE1);
        gl.bindTexture(gl.TEXTURE_2D, this.texParam);
        gl.activeTexture(gl.TEXTURE0);
    };
    GLBatchJob.prototype.doSetOpacity = function() {
        var o = this.opacityParam;
        var glwrap = this.glwrap;
        glwrap.currentOpacity = o;
        var curProg = glwrap.currentShader;
        if (curProg.locOpacity && curProg.lpOpacity !== o) {
            curProg.lpOpacity = o;
            this.gl.uniform1f(curProg.locOpacity, o);
        }
    };
    GLBatchJob.prototype.doQuad = function() {
        this.gl.drawElements(this.gl.TRIANGLES, this.indexCount, this.gl.UNSIGNED_SHORT, this.startIndex);
    };
    GLBatchJob.prototype.doSetBlend = function() {
        this.gl.blendFunc(this.startIndex, this.indexCount);
    };
    GLBatchJob.prototype.doUpdateModelView = function() {
        var i, len, s, shaderPrograms = this.glwrap.shaderPrograms,
            currentProgram = this.glwrap.currentProgram;
        for (i = 0, len = shaderPrograms.length; i < len; i++) {
            s = shaderPrograms[i];
            if (i === currentProgram && s.locMatMV) {
                s.updateMatMV(this.mat4param);
                s.hasCurrentMatMV = true;
            } else
                s.hasCurrentMatMV = false;
        }
        mat4.set(this.mat4param, this.glwrap.currentMV);
    };
    GLBatchJob.prototype.doRenderToTexture = function() {
        var gl = this.gl;
        var glwrap = this.glwrap;
        if (this.texParam) {
            if (glwrap.lastTexture1 === this.texParam) {
                gl.activeTexture(gl.TEXTURE1);
                gl.bindTexture(gl.TEXTURE_2D, null);
                glwrap.lastTexture1 = null;
                gl.activeTexture(gl.TEXTURE0);
            }
            gl.bindFramebuffer(gl.FRAMEBUFFER, glwrap.fbo);
            if (!glwrap.isBatchInEarlyZPass) {
                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.texParam, 0);
            }
        } else {
            if (!glwrap.enableFrontToBack) {
                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, null, 0);
            }
            gl.bindFramebuffer(gl.FRAMEBUFFER, null);
        }
    };
    GLBatchJob.prototype.doClear = function() {
        var gl = this.gl;
        var mode = this.startIndex;
        if (mode === 0) // clear whole surface
        {
            gl.clearColor(this.mat4param[0], this.mat4param[1], this.mat4param[2], this.mat4param[3]);
            gl.clear(gl.COLOR_BUFFER_BIT);
        } else if (mode === 1) // clear rectangle
        {
            gl.enable(gl.SCISSOR_TEST);
            gl.scissor(this.mat4param[0], this.mat4param[1], this.mat4param[2], this.mat4param[3]);
            gl.clearColor(0, 0, 0, 0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.disable(gl.SCISSOR_TEST);
        } else // clear depth
        {
            gl.clear(gl.DEPTH_BUFFER_BIT);
        }
    };
    GLBatchJob.prototype.doSetDepthTestEnabled = function() {
        var gl = this.gl;
        var enable = this.startIndex;
        if (enable !== 0) {
            gl.enable(gl.DEPTH_TEST);
        } else {
            gl.disable(gl.DEPTH_TEST);
        }
    };
    GLBatchJob.prototype.doPoints = function() {
        var gl = this.gl;
        var glwrap = this.glwrap;
        if (glwrap.enableFrontToBack)
            gl.disable(gl.DEPTH_TEST);
        var s = glwrap.shaderPrograms[1];
        gl.useProgram(s.shaderProgram);
        if (!s.hasCurrentMatMV && s.locMatMV) {
            s.updateMatMV(glwrap.currentMV);
            s.hasCurrentMatMV = true;
        }
        gl.enableVertexAttribArray(s.locAPos);
        gl.bindBuffer(gl.ARRAY_BUFFER, glwrap.pointBuffer);
        gl.vertexAttribPointer(s.locAPos, 4, gl.FLOAT, false, 0, 0);
        gl.drawArrays(gl.POINTS, this.startIndex / 4, this.indexCount);
        s = glwrap.currentShader;
        gl.useProgram(s.shaderProgram);
        if (s.locAPos >= 0) {
            gl.enableVertexAttribArray(s.locAPos);
            gl.bindBuffer(gl.ARRAY_BUFFER, glwrap.vertexBuffers[glwrap.curBuffer]);
            gl.vertexAttribPointer(s.locAPos, glwrap.enableFrontToBack ? 3 : 2, gl.FLOAT, false, 0, 0);
        }
        if (s.locATex >= 0) {
            gl.enableVertexAttribArray(s.locATex);
            gl.bindBuffer(gl.ARRAY_BUFFER, glwrap.texcoordBuffers[glwrap.curBuffer]);
            gl.vertexAttribPointer(s.locATex, 2, gl.FLOAT, false, 0, 0);
        }
        if (glwrap.enableFrontToBack)
            gl.enable(gl.DEPTH_TEST);
    };
    GLBatchJob.prototype.doSetProgram = function() {
        var gl = this.gl;
        var glwrap = this.glwrap;
        var s = glwrap.shaderPrograms[this.startIndex]; // recycled param to save memory
        glwrap.currentProgram = this.startIndex; // current batch program
        glwrap.currentShader = s;
        gl.useProgram(s.shaderProgram); // switch to
        if (!s.hasCurrentMatMV && s.locMatMV) {
            s.updateMatMV(glwrap.currentMV);
            s.hasCurrentMatMV = true;
        }
        if (s.locOpacity && s.lpOpacity !== glwrap.currentOpacity) {
            s.lpOpacity = glwrap.currentOpacity;
            gl.uniform1f(s.locOpacity, glwrap.currentOpacity);
        }
        if (s.locAPos >= 0) {
            gl.enableVertexAttribArray(s.locAPos);
            gl.bindBuffer(gl.ARRAY_BUFFER, glwrap.vertexBuffers[glwrap.curBuffer]);
            gl.vertexAttribPointer(s.locAPos, glwrap.enableFrontToBack ? 3 : 2, gl.FLOAT, false, 0, 0);
        }
        if (s.locATex >= 0) {
            gl.enableVertexAttribArray(s.locATex);
            gl.bindBuffer(gl.ARRAY_BUFFER, glwrap.texcoordBuffers[glwrap.curBuffer]);
            gl.vertexAttribPointer(s.locATex, 2, gl.FLOAT, false, 0, 0);
        }
    }
    GLBatchJob.prototype.doSetColor = function() {
        var s = this.glwrap.currentShader;
        var mat4param = this.mat4param;
        this.gl.uniform4f(s.locColorFill, mat4param[0], mat4param[1], mat4param[2], mat4param[3]);
    };
    GLBatchJob.prototype.doSetProgramParameters = function() {
        var i, len, s = this.glwrap.currentShader;
        var gl = this.gl;
        var mat4param = this.mat4param;
        if (s.locSamplerBack && this.glwrap.lastTexture1 !== this.texParam) {
            gl.activeTexture(gl.TEXTURE1);
            gl.bindTexture(gl.TEXTURE_2D, this.texParam);
            this.glwrap.lastTexture1 = this.texParam;
            gl.activeTexture(gl.TEXTURE0);
        }
        var v = mat4param[0];
        var v2;
        if (s.locPixelWidth && v !== s.lpPixelWidth) {
            s.lpPixelWidth = v;
            gl.uniform1f(s.locPixelWidth, v);
        }
        v = mat4param[1];
        if (s.locPixelHeight && v !== s.lpPixelHeight) {
            s.lpPixelHeight = v;
            gl.uniform1f(s.locPixelHeight, v);
        }
        v = mat4param[2];
        v2 = mat4param[3];
        if (s.locDestStart && (v !== s.lpDestStartX || v2 !== s.lpDestStartY)) {
            s.lpDestStartX = v;
            s.lpDestStartY = v2;
            gl.uniform2f(s.locDestStart, v, v2);
        }
        v = mat4param[4];
        v2 = mat4param[5];
        if (s.locDestEnd && (v !== s.lpDestEndX || v2 !== s.lpDestEndY)) {
            s.lpDestEndX = v;
            s.lpDestEndY = v2;
            gl.uniform2f(s.locDestEnd, v, v2);
        }
        v = mat4param[6];
        if (s.locLayerScale && v !== s.lpLayerScale) {
            s.lpLayerScale = v;
            gl.uniform1f(s.locLayerScale, v);
        }
        v = mat4param[7];
        if (s.locLayerAngle && v !== s.lpLayerAngle) {
            s.lpLayerAngle = v;
            gl.uniform1f(s.locLayerAngle, v);
        }
        v = mat4param[8];
        v2 = mat4param[9];
        if (s.locViewOrigin && (v !== s.lpViewOriginX || v2 !== s.lpViewOriginY)) {
            s.lpViewOriginX = v;
            s.lpViewOriginY = v2;
            gl.uniform2f(s.locViewOrigin, v, v2);
        }
        v = mat4param[10];
        v2 = mat4param[11];
        if (s.locScrollPos && (v !== s.lpScrollPosX || v2 !== s.lpScrollPosY)) {
            s.lpScrollPosX = v;
            s.lpScrollPosY = v2;
            gl.uniform2f(s.locScrollPos, v, v2);
        }
        v = mat4param[12];
        if (s.locSeconds && v !== s.lpSeconds) {
            s.lpSeconds = v;
            gl.uniform1f(s.locSeconds, v);
        }
        if (s.parameters.length) {
            for (i = 0, len = s.parameters.length; i < len; i++) {
                v = this.shaderParams[i];
                if (v !== s.lastCustomParams[i]) {
                    s.lastCustomParams[i] = v;
                    gl.uniform1f(s.parameters[i][1], v);
                }
            }
        }
    };
    GLWrap_.prototype.pushBatch = function() {
        if (this.batchPtr === this.batch.length)
            this.batch.push(new GLBatchJob(BATCH_NULL, this));
        return this.batch[this.batchPtr++];
    };
    GLWrap_.prototype.endBatch = function() {
        if (this.batchPtr === 0)
            return;
        if (this.gl.isContextLost())
            return;
        var gl = this.gl;
        if (this.pointPtr > 0) {
            gl.bindBuffer(gl.ARRAY_BUFFER, this.pointBuffer);
            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.pointData.subarray(0, this.pointPtr));
            if (s && s.locAPos >= 0 && s.name === "<point>")
                gl.vertexAttribPointer(s.locAPos, 4, gl.FLOAT, false, 0, 0);
        }
        if (this.vertexPtr > 0) {
            var s = this.currentShader;
            gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffers[this.curBuffer]);
            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.vertexData.subarray(0, this.vertexPtr));
            if (s && s.locAPos >= 0 && s.name !== "<point>")
                gl.vertexAttribPointer(s.locAPos, this.enableFrontToBack ? 3 : 2, gl.FLOAT, false, 0, 0);
            gl.bindBuffer(gl.ARRAY_BUFFER, this.texcoordBuffers[this.curBuffer]);
            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.texcoordData.subarray(0, this.texPtr));
            if (s && s.locATex >= 0 && s.name !== "<point>")
                gl.vertexAttribPointer(s.locATex, 2, gl.FLOAT, false, 0, 0);
        }
        var i, len, b;
        for (i = 0, len = this.batchPtr; i < len; i++) {
            b = this.batch[i];
            switch (b.type) {
                case 1:
                    b.doQuad();
                    break;
                case 2:
                    b.doSetTexture();
                    break;
                case 3:
                    b.doSetOpacity();
                    break;
                case 4:
                    b.doSetBlend();
                    break;
                case 5:
                    b.doUpdateModelView();
                    break;
                case 6:
                    b.doRenderToTexture();
                    break;
                case 7:
                    b.doClear();
                    break;
                case 8:
                    b.doPoints();
                    break;
                case 9:
                    b.doSetProgram();
                    break;
                case 10:
                    b.doSetProgramParameters();
                    break;
                case 11:
                    b.doSetTexture1();
                    break;
                case 12:
                    b.doSetColor();
                    break;
                case 13:
                    b.doSetDepthTestEnabled();
                    break;
                case 14:
                    b.doSetEarlyZPass();
                    break;
            }
        }
        this.batchPtr = 0;
        this.vertexPtr = 0;
        this.texPtr = 0;
        this.pointPtr = 0;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
        this.isBatchInEarlyZPass = false;
        this.curBuffer++;
        if (this.curBuffer >= MULTI_BUFFERS)
            this.curBuffer = 0;
    };
    GLWrap_.prototype.setOpacity = function(op) {
        if (op === this.lastOpacity)
            return;
        if (this.isEarlyZPass)
            return; // ignore
        var b = this.pushBatch();
        b.type = BATCH_SETOPACITY;
        b.opacityParam = op;
        this.lastOpacity = op;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.setTexture = function(tex) {
        if (tex === this.lastTexture0)
            return;;
        var b = this.pushBatch();
        b.type = BATCH_SETTEXTURE;
        b.texParam = tex;
        this.lastTexture0 = tex;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.setBlend = function(s, d) {
        if (s === this.lastSrcBlend && d === this.lastDestBlend)
            return;
        if (this.isEarlyZPass)
            return; // ignore
        var b = this.pushBatch();
        b.type = BATCH_SETBLEND;
        b.startIndex = s; // recycle params to save memory
        b.indexCount = d;
        this.lastSrcBlend = s;
        this.lastDestBlend = d;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.isPremultipliedAlphaBlend = function() {
        return (this.lastSrcBlend === this.gl.ONE && this.lastDestBlend === this.gl.ONE_MINUS_SRC_ALPHA);
    };
    GLWrap_.prototype.setAlphaBlend = function() {
        this.setBlend(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);
    };
    GLWrap_.prototype.setNoPremultiplyAlphaBlend = function() {
        this.setBlend(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);
    };
    var LAST_VERTEX = MAX_VERTICES * 2 - 8;
    GLWrap_.prototype.quad = function(tlx, tly, trx, try_, brx, bry, blx, bly) {
        if (this.vertexPtr >= LAST_VERTEX)
            this.endBatch();
        var v = this.vertexPtr; // vertex cursor
        var t = this.texPtr;
        var vd = this.vertexData; // vertex data array
        var td = this.texcoordData; // texture coord data array
        var currentZ = this.currentZ;
        if (this.hasQuadBatchTop) {
            this.batch[this.batchPtr - 1].indexCount += 6;
        } else {
            var b = this.pushBatch();
            b.type = BATCH_QUAD;
            b.startIndex = this.enableFrontToBack ? v : (v / 2) * 3;
            b.indexCount = 6;
            this.hasQuadBatchTop = true;
            this.hasPointBatchTop = false;
        }
        if (this.enableFrontToBack) {
            vd[v++] = tlx;
            vd[v++] = tly;
            vd[v++] = currentZ;
            vd[v++] = trx;
            vd[v++] = try_;
            vd[v++] = currentZ;
            vd[v++] = brx;
            vd[v++] = bry;
            vd[v++] = currentZ;
            vd[v++] = blx;
            vd[v++] = bly;
            vd[v++] = currentZ;
        } else {
            vd[v++] = tlx;
            vd[v++] = tly;
            vd[v++] = trx;
            vd[v++] = try_;
            vd[v++] = brx;
            vd[v++] = bry;
            vd[v++] = blx;
            vd[v++] = bly;
        }
        td[t++] = 0;
        td[t++] = 0;
        td[t++] = 1;
        td[t++] = 0;
        td[t++] = 1;
        td[t++] = 1;
        td[t++] = 0;
        td[t++] = 1;
        this.vertexPtr = v;
        this.texPtr = t;
    };
    GLWrap_.prototype.quadTex = function(tlx, tly, trx, try_, brx, bry, blx, bly, rcTex) {
        if (this.vertexPtr >= LAST_VERTEX)
            this.endBatch();
        var v = this.vertexPtr; // vertex cursor
        var t = this.texPtr;
        var vd = this.vertexData; // vertex data array
        var td = this.texcoordData; // texture coord data array
        var currentZ = this.currentZ;
        if (this.hasQuadBatchTop) {
            this.batch[this.batchPtr - 1].indexCount += 6;
        } else {
            var b = this.pushBatch();
            b.type = BATCH_QUAD;
            b.startIndex = this.enableFrontToBack ? v : (v / 2) * 3;
            b.indexCount = 6;
            this.hasQuadBatchTop = true;
            this.hasPointBatchTop = false;
        }
        var rc_left = rcTex.left;
        var rc_top = rcTex.top;
        var rc_right = rcTex.right;
        var rc_bottom = rcTex.bottom;
        if (this.enableFrontToBack) {
            vd[v++] = tlx;
            vd[v++] = tly;
            vd[v++] = currentZ;
            vd[v++] = trx;
            vd[v++] = try_;
            vd[v++] = currentZ;
            vd[v++] = brx;
            vd[v++] = bry;
            vd[v++] = currentZ;
            vd[v++] = blx;
            vd[v++] = bly;
            vd[v++] = currentZ;
        } else {
            vd[v++] = tlx;
            vd[v++] = tly;
            vd[v++] = trx;
            vd[v++] = try_;
            vd[v++] = brx;
            vd[v++] = bry;
            vd[v++] = blx;
            vd[v++] = bly;
        }
        td[t++] = rc_left;
        td[t++] = rc_top;
        td[t++] = rc_right;
        td[t++] = rc_top;
        td[t++] = rc_right;
        td[t++] = rc_bottom;
        td[t++] = rc_left;
        td[t++] = rc_bottom;
        this.vertexPtr = v;
        this.texPtr = t;
    };
    GLWrap_.prototype.quadTexUV = function(tlx, tly, trx, try_, brx, bry, blx, bly, tlu, tlv, tru, trv, bru, brv, blu, blv) {
        if (this.vertexPtr >= LAST_VERTEX)
            this.endBatch();
        var v = this.vertexPtr; // vertex cursor
        var t = this.texPtr;
        var vd = this.vertexData; // vertex data array
        var td = this.texcoordData; // texture coord data array
        var currentZ = this.currentZ;
        if (this.hasQuadBatchTop) {
            this.batch[this.batchPtr - 1].indexCount += 6;
        } else {
            var b = this.pushBatch();
            b.type = BATCH_QUAD;
            b.startIndex = this.enableFrontToBack ? v : (v / 2) * 3;
            b.indexCount = 6;
            this.hasQuadBatchTop = true;
            this.hasPointBatchTop = false;
        }
        if (this.enableFrontToBack) {
            vd[v++] = tlx;
            vd[v++] = tly;
            vd[v++] = currentZ;
            vd[v++] = trx;
            vd[v++] = try_;
            vd[v++] = currentZ;
            vd[v++] = brx;
            vd[v++] = bry;
            vd[v++] = currentZ;
            vd[v++] = blx;
            vd[v++] = bly;
            vd[v++] = currentZ;
        } else {
            vd[v++] = tlx;
            vd[v++] = tly;
            vd[v++] = trx;
            vd[v++] = try_;
            vd[v++] = brx;
            vd[v++] = bry;
            vd[v++] = blx;
            vd[v++] = bly;
        }
        td[t++] = tlu;
        td[t++] = tlv;
        td[t++] = tru;
        td[t++] = trv;
        td[t++] = bru;
        td[t++] = brv;
        td[t++] = blu;
        td[t++] = blv;
        this.vertexPtr = v;
        this.texPtr = t;
    };
    GLWrap_.prototype.convexPoly = function(pts) {
        var pts_count = pts.length / 2;;
        var tris = pts_count - 2; // 3 points = 1 tri, 4 points = 2 tris, 5 points = 3 tris etc.
        var last_tri = tris - 1;
        var p0x = pts[0];
        var p0y = pts[1];
        var i, i2, p1x, p1y, p2x, p2y, p3x, p3y;
        for (i = 0; i < tris; i += 2) // draw 2 triangles at a time
        {
            i2 = i * 2;
            p1x = pts[i2 + 2];
            p1y = pts[i2 + 3];
            p2x = pts[i2 + 4];
            p2y = pts[i2 + 5];
            if (i === last_tri) {
                this.quad(p0x, p0y, p1x, p1y, p2x, p2y, p2x, p2y);
            } else {
                p3x = pts[i2 + 6];
                p3y = pts[i2 + 7];
                this.quad(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y);
            }
        }
    };
    var LAST_POINT = MAX_POINTS - 4;
    GLWrap_.prototype.point = function(x_, y_, size_, opacity_) {
        if (this.pointPtr >= LAST_POINT)
            this.endBatch();
        var p = this.pointPtr; // point cursor
        var pd = this.pointData; // point data array
        if (this.hasPointBatchTop) {
            this.batch[this.batchPtr - 1].indexCount++;
        } else {
            var b = this.pushBatch();
            b.type = BATCH_POINTS;
            b.startIndex = p;
            b.indexCount = 1;
            this.hasPointBatchTop = true;
            this.hasQuadBatchTop = false;
        }
        pd[p++] = x_;
        pd[p++] = y_;
        pd[p++] = size_;
        pd[p++] = opacity_;
        this.pointPtr = p;
    };
    GLWrap_.prototype.switchProgram = function(progIndex) {
        if (this.lastProgram === progIndex)
            return; // no change
        var shaderProg = this.shaderPrograms[progIndex];
        if (!shaderProg) {
            if (this.lastProgram === 0)
                return; // already on default shader
            progIndex = 0;
            shaderProg = this.shaderPrograms[0];
        }
        var b = this.pushBatch();
        b.type = BATCH_SETPROGRAM;
        b.startIndex = progIndex;
        this.lastProgram = progIndex;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.programUsesDest = function(progIndex) {
        var s = this.shaderPrograms[progIndex];
        return !!(s.locDestStart || s.locDestEnd);
    };
    GLWrap_.prototype.programUsesCrossSampling = function(progIndex) {
        var s = this.shaderPrograms[progIndex];
        return !!(s.locDestStart || s.locDestEnd || s.crossSampling);
    };
    GLWrap_.prototype.programPreservesOpaqueness = function(progIndex) {
        return this.shaderPrograms[progIndex].preservesOpaqueness;
    };
    GLWrap_.prototype.programExtendsBox = function(progIndex) {
        var s = this.shaderPrograms[progIndex];
        return s.extendBoxHorizontal !== 0 || s.extendBoxVertical !== 0;
    };
    GLWrap_.prototype.getProgramBoxExtendHorizontal = function(progIndex) {
        return this.shaderPrograms[progIndex].extendBoxHorizontal;
    };
    GLWrap_.prototype.getProgramBoxExtendVertical = function(progIndex) {
        return this.shaderPrograms[progIndex].extendBoxVertical;
    };
    GLWrap_.prototype.getProgramParameterType = function(progIndex, paramIndex) {
        return this.shaderPrograms[progIndex].parameters[paramIndex][2];
    };
    GLWrap_.prototype.programIsAnimated = function(progIndex) {
        return this.shaderPrograms[progIndex].animated;
    };
    GLWrap_.prototype.setProgramParameters = function(backTex, pixelWidth, pixelHeight, destStartX, destStartY, destEndX, destEndY, layerScale, layerAngle, viewOriginLeft, viewOriginTop, scrollPosX, scrollPosY, seconds, params) {
        var i, len;
        var s = this.shaderPrograms[this.lastProgram];
        var b, mat4param, shaderParams;
        if (s.hasAnyOptionalUniforms || params.length) {
            b = this.pushBatch();
            b.type = BATCH_SETPROGRAMPARAMETERS;
            if (b.mat4param)
                mat4.set(this.matMV, b.mat4param);
            else
                b.mat4param = mat4.create();
            mat4param = b.mat4param;
            mat4param[0] = pixelWidth;
            mat4param[1] = pixelHeight;
            mat4param[2] = destStartX;
            mat4param[3] = destStartY;
            mat4param[4] = destEndX;
            mat4param[5] = destEndY;
            mat4param[6] = layerScale;
            mat4param[7] = layerAngle;
            mat4param[8] = viewOriginLeft;
            mat4param[9] = viewOriginTop;
            mat4param[10] = scrollPosX;
            mat4param[11] = scrollPosY;
            mat4param[12] = seconds;
            if (s.locSamplerBack) {;
                b.texParam = backTex;
            } else
                b.texParam = null;
            if (params.length) {
                shaderParams = b.shaderParams;
                shaderParams.length = params.length;
                for (i = 0, len = params.length; i < len; i++)
                    shaderParams[i] = params[i];
            }
            this.hasQuadBatchTop = false;
            this.hasPointBatchTop = false;
        }
    };
    GLWrap_.prototype.clear = function(r, g, b_, a) {
        var b = this.pushBatch();
        b.type = BATCH_CLEAR;
        b.startIndex = 0; // clear all mode
        if (!b.mat4param)
            b.mat4param = mat4.create();
        b.mat4param[0] = r;
        b.mat4param[1] = g;
        b.mat4param[2] = b_;
        b.mat4param[3] = a;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.clearRect = function(x, y, w, h) {
        if (w < 0 || h < 0)
            return; // invalid clear area
        var b = this.pushBatch();
        b.type = BATCH_CLEAR;
        b.startIndex = 1; // clear rect mode
        if (!b.mat4param)
            b.mat4param = mat4.create();
        b.mat4param[0] = x;
        b.mat4param[1] = y;
        b.mat4param[2] = w;
        b.mat4param[3] = h;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.clearDepth = function() {
        var b = this.pushBatch();
        b.type = BATCH_CLEAR;
        b.startIndex = 2; // clear depth mode
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.setEarlyZPass = function(e) {
        if (!this.enableFrontToBack)
            return; // no depth buffer in use
        e = !!e;
        if (this.isEarlyZPass === e)
            return; // no change
        var b = this.pushBatch();
        b.type = BATCH_SETEARLYZMODE;
        b.startIndex = (e ? 1 : 0);
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
        this.isEarlyZPass = e;
        this.renderToTex = null;
        if (this.isEarlyZPass) {
            this.switchProgram(2); // early Z program
        } else {
            this.switchProgram(0); // normal rendering
        }
    };
    GLWrap_.prototype.setDepthTestEnabled = function(e) {
        if (!this.enableFrontToBack)
            return; // no depth buffer in use
        var b = this.pushBatch();
        b.type = BATCH_SETDEPTHTEST;
        b.startIndex = (e ? 1 : 0);
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.fullscreenQuad = function() {
        mat4.set(this.lastMV, tempMat4);
        this.resetModelView();
        this.updateModelView();
        var halfw = this.width / 2;
        var halfh = this.height / 2;
        this.quad(-halfw, halfh, halfw, halfh, halfw, -halfh, -halfw, -halfh);
        mat4.set(tempMat4, this.matMV);
        this.updateModelView();
    };
    GLWrap_.prototype.setColorFillMode = function(r_, g_, b_, a_) {
        this.switchProgram(3);
        var b = this.pushBatch();
        b.type = BATCH_SETCOLOR;
        if (!b.mat4param)
            b.mat4param = mat4.create();
        b.mat4param[0] = r_;
        b.mat4param[1] = g_;
        b.mat4param[2] = b_;
        b.mat4param[3] = a_;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    GLWrap_.prototype.setTextureFillMode = function() {;
        this.switchProgram(0);
    };
    GLWrap_.prototype.restoreEarlyZMode = function() {;
        this.switchProgram(2);
    };
    GLWrap_.prototype.present = function() {
        this.endBatch();
        this.gl.flush();
        /*
		if (debugBatch)
		{
;
			debugBatch = false;
		}
		*/
    };

    function nextHighestPowerOfTwo(x) {
        --x;
        for (var i = 1; i < 32; i <<= 1) {
            x = x | x >> i;
        }
        return x + 1;
    }
    var all_textures = [];
    var textures_by_src = {};
    GLWrap_.prototype.contextLost = function() {
        cr.clearArray(all_textures);
        textures_by_src = {};
    };
    var BF_RGBA8 = 0;
    var BF_RGB8 = 1;
    var BF_RGBA4 = 2;
    var BF_RGB5_A1 = 3;
    var BF_RGB565 = 4;
    GLWrap_.prototype.loadTexture = function(img, tiling, linearsampling, pixelformat, tiletype, nomip) {
        tiling = !!tiling;
        linearsampling = !!linearsampling;
        var tex_key = img.src + "," + tiling + "," + linearsampling + (tiling ? ("," + tiletype) : "");
        var webGL_texture = null;
        if (typeof img.src !== "undefined" && textures_by_src.hasOwnProperty(tex_key)) {
            webGL_texture = textures_by_src[tex_key];
            webGL_texture.c2refcount++;
            return webGL_texture;
        }
        this.endBatch();;
        var gl = this.gl;
        var isPOT = (cr.isPOT(img.width) && cr.isPOT(img.height));
        webGL_texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, webGL_texture);
        gl.pixelStorei(gl["UNPACK_PREMULTIPLY_ALPHA_WEBGL"], true);
        var internalformat = gl.RGBA;
        var format = gl.RGBA;
        var type = gl.UNSIGNED_BYTE;
        if (pixelformat && !this.isIE) {
            switch (pixelformat) {
                case BF_RGB8:
                    internalformat = gl.RGB;
                    format = gl.RGB;
                    break;
                case BF_RGBA4:
                    type = gl.UNSIGNED_SHORT_4_4_4_4;
                    break;
                case BF_RGB5_A1:
                    type = gl.UNSIGNED_SHORT_5_5_5_1;
                    break;
                case BF_RGB565:
                    internalformat = gl.RGB;
                    format = gl.RGB;
                    type = gl.UNSIGNED_SHORT_5_6_5;
                    break;
            }
        }
        if (this.version === 1 && !isPOT && tiling) {
            var canvas = document.createElement("canvas");
            canvas.width = cr.nextHighestPowerOfTwo(img.width);
            canvas.height = cr.nextHighestPowerOfTwo(img.height);
            var ctx = canvas.getContext("2d");
            if (typeof ctx["imageSmoothingEnabled"] !== "undefined") {
                ctx["imageSmoothingEnabled"] = linearsampling;
            } else {
                ctx["webkitImageSmoothingEnabled"] = linearsampling;
                ctx["mozImageSmoothingEnabled"] = linearsampling;
                ctx["msImageSmoothingEnabled"] = linearsampling;
            }
            ctx.drawImage(img,
                0, 0, img.width, img.height,
                0, 0, canvas.width, canvas.height);
            gl.texImage2D(gl.TEXTURE_2D, 0, internalformat, format, type, canvas);
        } else
            gl.texImage2D(gl.TEXTURE_2D, 0, internalformat, format, type, img);
        if (tiling) {
            if (tiletype === "repeat-x") {
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
            } else if (tiletype === "repeat-y") {
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
            } else {
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
            }
        } else {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        }
        if (linearsampling) {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
            if ((isPOT || this.version >= 2) && this.enable_mipmaps && !nomip) {
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
                gl.generateMipmap(gl.TEXTURE_2D);
            } else
                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
        } else {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
        }
        gl.bindTexture(gl.TEXTURE_2D, null);
        this.lastTexture0 = null;
        webGL_texture.c2width = img.width;
        webGL_texture.c2height = img.height;
        webGL_texture.c2refcount = 1;
        webGL_texture.c2texkey = tex_key;
        all_textures.push(webGL_texture);
        textures_by_src[tex_key] = webGL_texture;
        return webGL_texture;
    };
    GLWrap_.prototype.createEmptyTexture = function(w, h, linearsampling, _16bit, tiling) {
        this.endBatch();
        var gl = this.gl;
        if (this.isIE)
            _16bit = false;
        var webGL_texture = gl.createTexture();
        gl.bindTexture(gl.TEXTURE_2D, webGL_texture);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, w, h, 0, gl.RGBA, _16bit ? gl.UNSIGNED_SHORT_4_4_4_4 : gl.UNSIGNED_BYTE, null);
        if (tiling) {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);
        } else {
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
        }
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, linearsampling ? gl.LINEAR : gl.NEAREST);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, linearsampling ? gl.LINEAR : gl.NEAREST);
        gl.bindTexture(gl.TEXTURE_2D, null);
        this.lastTexture0 = null;
        webGL_texture.c2width = w;
        webGL_texture.c2height = h;
        all_textures.push(webGL_texture);
        return webGL_texture;
    };
    GLWrap_.prototype.videoToTexture = function(video_, texture_, _16bit) {
        this.endBatch();
        var gl = this.gl;
        if (this.isIE)
            _16bit = false;
        gl.bindTexture(gl.TEXTURE_2D, texture_);
        gl.pixelStorei(gl["UNPACK_PREMULTIPLY_ALPHA_WEBGL"], true);
        try {
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, _16bit ? gl.UNSIGNED_SHORT_4_4_4_4 : gl.UNSIGNED_BYTE, video_);
        } catch (e) {
            if (console && console.error)
                console.error("Error updating WebGL texture: ", e);
        }
        gl.bindTexture(gl.TEXTURE_2D, null);
        this.lastTexture0 = null;
    };
    GLWrap_.prototype.deleteTexture = function(tex) {
        if (!tex)
            return;
        if (typeof tex.c2refcount !== "undefined" && tex.c2refcount > 1) {
            tex.c2refcount--;
            return;
        }
        this.endBatch();
        if (tex === this.lastTexture0) {
            this.gl.bindTexture(this.gl.TEXTURE_2D, null);
            this.lastTexture0 = null;
        }
        if (tex === this.lastTexture1) {
            this.gl.activeTexture(this.gl.TEXTURE1);
            this.gl.bindTexture(this.gl.TEXTURE_2D, null);
            this.gl.activeTexture(this.gl.TEXTURE0);
            this.lastTexture1 = null;
        }
        cr.arrayFindRemove(all_textures, tex);
        if (typeof tex.c2texkey !== "undefined")
            delete textures_by_src[tex.c2texkey];
        this.gl.deleteTexture(tex);
    };
    GLWrap_.prototype.estimateVRAM = function() {
        var total = this.width * this.height * 4 * 2;
        var i, len, t;
        for (i = 0, len = all_textures.length; i < len; i++) {
            t = all_textures[i];
            total += (t.c2width * t.c2height * 4);
        }
        return total;
    };
    GLWrap_.prototype.textureCount = function() {
        return all_textures.length;
    };
    GLWrap_.prototype.setRenderingToTexture = function(tex) {
        if (tex === this.renderToTex)
            return;;
        var b = this.pushBatch();
        b.type = BATCH_RENDERTOTEXTURE;
        b.texParam = tex;
        this.renderToTex = tex;
        this.hasQuadBatchTop = false;
        this.hasPointBatchTop = false;
    };
    cr.GLWrap = GLWrap_;
}());;
(function() {
    var raf = window["requestAnimationFrame"] ||
        window["mozRequestAnimationFrame"] ||
        window["webkitRequestAnimationFrame"] ||
        window["msRequestAnimationFrame"] ||
        window["oRequestAnimationFrame"];

    function Runtime(canvas) {
        if (!canvas || (!canvas.getContext && !canvas["dc"]))
            return;
        if (canvas["c2runtime"])
            return;
        else
            canvas["c2runtime"] = this;
        var self = this;
        this.isCrosswalk = /crosswalk/i.test(navigator.userAgent) || /xwalk/i.test(navigator.userAgent) || !!(typeof window["c2isCrosswalk"] !== "undefined" && window["c2isCrosswalk"]);
        this.isCordova = this.isCrosswalk || (typeof window["device"] !== "undefined" && (typeof window["device"]["cordova"] !== "undefined" || typeof window["device"]["phonegap"] !== "undefined")) || (typeof window["c2iscordova"] !== "undefined" && window["c2iscordova"]);
        this.isPhoneGap = this.isCordova;
        this.isDirectCanvas = !!canvas["dc"];
        this.isAppMobi = (typeof window["AppMobi"] !== "undefined" || this.isDirectCanvas);
        this.isCocoonJs = !!window["c2cocoonjs"];
        this.isEjecta = !!window["c2ejecta"];
        if (this.isCocoonJs) {
            CocoonJS["App"]["onSuspended"].addEventListener(function() {
                self["setSuspended"](true);
            });
            CocoonJS["App"]["onActivated"].addEventListener(function() {
                self["setSuspended"](false);
            });
        }
        if (this.isEjecta) {
            document.addEventListener("pagehide", function() {
                self["setSuspended"](true);
            });
            document.addEventListener("pageshow", function() {
                self["setSuspended"](false);
            });
            document.addEventListener("resize", function() {
                self["setSize"](window.innerWidth, window.innerHeight);
            });
        }
        this.isDomFree = (this.isDirectCanvas || this.isCocoonJs || this.isEjecta);
        this.isMicrosoftEdge = /edge\//i.test(navigator.userAgent);
        this.isIE = (/msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent) || /iemobile/i.test(navigator.userAgent)) && !this.isMicrosoftEdge;
        this.isTizen = /tizen/i.test(navigator.userAgent);
        this.isAndroid = /android/i.test(navigator.userAgent) && !this.isTizen && !this.isIE && !this.isMicrosoftEdge; // IE mobile and Tizen masquerade as Android
        this.isiPhone = (/iphone/i.test(navigator.userAgent) || /ipod/i.test(navigator.userAgent)) && !this.isIE && !this.isMicrosoftEdge; // treat ipod as an iphone; IE mobile masquerades as iPhone
        this.isiPad = /ipad/i.test(navigator.userAgent);
        this.isiOS = this.isiPhone || this.isiPad || this.isEjecta;
        this.isiPhoneiOS6 = (this.isiPhone && /os\s6/i.test(navigator.userAgent));
        this.isChrome = (/chrome/i.test(navigator.userAgent) || /chromium/i.test(navigator.userAgent)) && !this.isIE && !this.isMicrosoftEdge; // note true on Chromium-based webview on Android 4.4+; IE 'Edge' mode also pretends to be Chrome
        this.isAmazonWebApp = /amazonwebappplatform/i.test(navigator.userAgent);
        this.isFirefox = /firefox/i.test(navigator.userAgent);
        this.isSafari = /safari/i.test(navigator.userAgent) && !this.isChrome && !this.isIE && !this.isMicrosoftEdge; // Chrome and IE Mobile masquerade as Safari
        this.isWindows = /windows/i.test(navigator.userAgent);
        this.isNWjs = (typeof window["c2nodewebkit"] !== "undefined" || typeof window["c2nwjs"] !== "undefined" || /nodewebkit/i.test(navigator.userAgent) || /nwjs/i.test(navigator.userAgent));
        this.isNodeWebkit = this.isNWjs; // old name for backwards compat
        this.isArcade = (typeof window["is_scirra_arcade"] !== "undefined");
        this.isWindows8App = !!(typeof window["c2isWindows8"] !== "undefined" && window["c2isWindows8"]);
        this.isWindows8Capable = !!(typeof window["c2isWindows8Capable"] !== "undefined" && window["c2isWindows8Capable"]);
        this.isWindowsPhone8 = !!(typeof window["c2isWindowsPhone8"] !== "undefined" && window["c2isWindowsPhone8"]);
        this.isWindowsPhone81 = !!(typeof window["c2isWindowsPhone81"] !== "undefined" && window["c2isWindowsPhone81"]);
        this.isWindows10 = !!window["cr_windows10"];
        this.isWinJS = (this.isWindows8App || this.isWindows8Capable || this.isWindowsPhone81 || this.isWindows10); // note not WP8.0
        this.isBlackberry10 = !!(typeof window["c2isBlackberry10"] !== "undefined" && window["c2isBlackberry10"]);
        this.isAndroidStockBrowser = (this.isAndroid && !this.isChrome && !this.isCrosswalk && !this.isFirefox && !this.isAmazonWebApp && !this.isDomFree);
        this.devicePixelRatio = 1;
        this.isMobile = (this.isCordova || this.isCrosswalk || this.isAppMobi || this.isCocoonJs || this.isAndroid || this.isiOS || this.isWindowsPhone8 || this.isWindowsPhone81 || this.isBlackberry10 || this.isTizen || this.isEjecta);
        if (!this.isMobile) {
            this.isMobile = /(blackberry|bb10|playbook|palm|symbian|nokia|windows\s+ce|phone|mobile|tablet|kindle|silk)/i.test(navigator.userAgent);
        }
        this.isWKWebView = !!(this.isiOS && this.isCordova && window["webkit"]);
        if (typeof cr_is_preview !== "undefined" && !this.isNWjs && (window.location.search === "?nw" || /nodewebkit/i.test(navigator.userAgent) || /nwjs/i.test(navigator.userAgent))) {
            this.isNWjs = true;
        }
        this.isDebug = (typeof cr_is_preview !== "undefined" && window.location.search.indexOf("debug") > -1);
        this.canvas = canvas;
        this.canvasdiv = document.getElementById("c2canvasdiv");
        this.gl = null;
        this.glwrap = null;
        this.glUnmaskedRenderer = "(unavailable)";
        this.enableFrontToBack = false;
        this.earlyz_index = 0;
        this.ctx = null;
        this.firstInFullscreen = false;
        this.oldWidth = 0; // for restoring non-fullscreen canvas after fullscreen
        this.oldHeight = 0;
        this.canvas.oncontextmenu = function(e) {
            if (e.preventDefault) e.preventDefault();
            return false;
        };
        this.canvas.onselectstart = function(e) {
            if (e.preventDefault) e.preventDefault();
            return false;
        };
        this.canvas.ontouchstart = function(e) {
            if (e.preventDefault) e.preventDefault();
            return false;
        };
        if (this.isDirectCanvas)
            window["c2runtime"] = this;
        if (this.isNWjs) {
            window["ondragover"] = function(e) {
                e.preventDefault();
                return false;
            };
            window["ondrop"] = function(e) {
                e.preventDefault();
                return false;
            };
            if (window["nwgui"] && window["nwgui"]["App"]["clearCache"])
                window["nwgui"]["App"]["clearCache"]();
        }
        if (this.isAndroidStockBrowser && typeof jQuery !== "undefined") {
            jQuery("canvas").parents("*").css("overflow", "visible");
        }
        this.width = canvas.width;
        this.height = canvas.height;
        this.draw_width = this.width;
        this.draw_height = this.height;
        this.cssWidth = this.width;
        this.cssHeight = this.height;
        this.lastWindowWidth = window.innerWidth;
        this.lastWindowHeight = window.innerHeight;
        this.forceCanvasAlpha = false; // note: now unused, left for backwards compat since plugins could modify it
        this.redraw = true;
        this.isSuspended = false;
        if (!Date.now) {
            Date.now = function now() {
                return +new Date();
            };
        }
        this.plugins = [];
        this.types = {};
        this.types_by_index = [];
        this.behaviors = [];
        this.layouts = {};
        this.layouts_by_index = [];
        this.eventsheets = {};
        this.eventsheets_by_index = [];
        this.wait_for_textures = []; // for blocking until textures loaded
        this.triggers_to_postinit = [];
        this.all_global_vars = [];
        this.all_local_vars = [];
        this.solidBehavior = null;
        this.jumpthruBehavior = null;
        this.shadowcasterBehavior = null;
        this.deathRow = {};
        this.hasPendingInstances = false; // true if anything exists in create row or death row
        this.isInClearDeathRow = false;
        this.isInOnDestroy = 0; // needs to support recursion so increments and decrements and is true if > 0
        this.isRunningEvents = false;
        this.isEndingLayout = false;
        this.createRow = [];
        this.isLoadingState = false;
        this.saveToSlot = "";
        this.loadFromSlot = "";
        this.loadFromJson = null; // set to string when there is something to try to load
        this.lastSaveJson = "";
        this.signalledContinuousPreview = false;
        this.suspendDrawing = false; // for hiding display until continuous preview loads
        this.fireOnCreateAfterLoad = []; // for delaying "On create" triggers until loading complete
        this.dt = 0;
        this.dt1 = 0;
        this.minimumFramerate = 30;
        this.logictime = 0; // used to calculate CPUUtilisation
        this.cpuutilisation = 0;
        this.timescale = 1.0;
        this.kahanTime = new cr.KahanAdder();
        this.wallTime = new cr.KahanAdder();
        this.last_tick_time = 0;
        this.fps = 0;
        this.last_fps_time = 0;
        this.tickcount = 0;
        this.tickcount_nosave = 0; // same as tickcount but never saved/loaded
        this.execcount = 0;
        this.framecount = 0; // for fps
        this.objectcount = 0;
        this.changelayout = null;
        this.destroycallbacks = [];
        this.event_stack = [];
        this.event_stack_index = -1;
        this.localvar_stack = [
            []
        ];
        this.localvar_stack_index = 0;
        this.trigger_depth = 0; // recursion depth for triggers
        this.pushEventStack(null);
        this.loop_stack = [];
        this.loop_stack_index = -1;
        this.next_uid = 0;
        this.next_puid = 0; // permanent unique ids
        this.layout_first_tick = true;
        this.family_count = 0;
        this.suspend_events = [];
        this.raf_id = -1;
        this.timeout_id = -1;
        this.isloading = true;
        this.loadingprogress = 0;
        this.isNodeFullscreen = false;
        this.stackLocalCount = 0; // number of stack-based local vars for recursion
        this.audioInstance = null;
        this.had_a_click = false;
        this.isInUserInputEvent = false;
        this.objects_to_pretick = new cr.ObjectSet();
        this.objects_to_tick = new cr.ObjectSet();
        this.objects_to_tick2 = new cr.ObjectSet();
        this.registered_collisions = [];
        this.temp_poly = new cr.CollisionPoly([]);
        this.temp_poly2 = new cr.CollisionPoly([]);
        this.allGroups = []; // array of all event groups
        this.groups_by_name = {};
        this.cndsBySid = {};
        this.actsBySid = {};
        this.varsBySid = {};
        this.blocksBySid = {};
        this.running_layout = null; // currently running layout
        this.layer_canvas = null; // for layers "render-to-texture"
        this.layer_ctx = null;
        this.layer_tex = null;
        this.layout_tex = null;
        this.layout_canvas = null;
        this.layout_ctx = null;
        this.is_WebGL_context_lost = false;
        this.uses_background_blending = false; // if any shader uses background blending, so entire layout renders to texture
        this.fx_tex = [null, null];
        this.fullscreen_scaling = 0;
        this.files_subfolder = ""; // path with project files
        this.objectsByUid = {}; // maps every in-use UID (as a string) to its instance
        this.loaderlogos = null;
        this.snapshotCanvas = null;
        this.snapshotData = "";
        this.objectRefTable = [];
        this.requestProjectData();
    };
    Runtime.prototype.requestProjectData = function() {
        var self = this;
        if (this.isWKWebView) {
            this.fetchLocalFileViaCordovaAsText("data.js", function(str) {
                self.loadProject(JSON.parse(str));
            }, function(err) {
                alert("Error fetching data.js");
            });
            return;
        }
        var xhr;
        if (this.isWindowsPhone8)
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        else
            xhr = new XMLHttpRequest();
        var datajs_filename = "data.js";
        if (this.isWindows8App || this.isWindowsPhone8 || this.isWindowsPhone81 || this.isWindows10)
            datajs_filename = "data.json";
        xhr.open("GET", datajs_filename, true);
        var supportsJsonResponse = false;
        if (!this.isDomFree && ("response" in xhr) && ("responseType" in xhr)) {
            try {
                xhr["responseType"] = "json";
                supportsJsonResponse = (xhr["responseType"] === "json");
            } catch (e) {
                supportsJsonResponse = false;
            }
        }
        if (!supportsJsonResponse && ("responseType" in xhr)) {
            try {
                xhr["responseType"] = "text";
            } catch (e) {}
        }
        if ("overrideMimeType" in xhr) {
            try {
                xhr["overrideMimeType"]("application/json; charset=utf-8");
            } catch (e) {}
        }
        if (this.isWindowsPhone8) {
            xhr.onreadystatechange = function() {
                if (xhr.readyState !== 4)
                    return;
                self.loadProject(JSON.parse(xhr["responseText"]));
            };
        } else {
            xhr.onload = function() {
                if (supportsJsonResponse) {
                    self.loadProject(xhr["response"]); // already parsed by browser
                } else {
                    if (self.isEjecta) {
                        var str = xhr["responseText"];
                        str = str.substr(str.indexOf("{")); // trim any BOM
                        self.loadProject(JSON.parse(str));
                    } else {
                        self.loadProject(JSON.parse(xhr["responseText"])); // forced to sync parse JSON
                    }
                }
            };
            xhr.onerror = function(e) {
                cr.logerror("Error requesting " + datajs_filename + ":");
                cr.logerror(e);
            };
        }
        xhr.send();
    };
    Runtime.prototype.initRendererAndLoader = function() {
        var self = this;
        var i, len, j, lenj, k, lenk, t, s, l, y;
        this.isRetina = ((!this.isDomFree || this.isEjecta || this.isCordova) && this.useHighDpi && !this.isAndroidStockBrowser);
        if (this.fullscreen_mode === 0 && this.isiOS)
            this.isRetina = false;
        this.devicePixelRatio = (this.isRetina ? (window["devicePixelRatio"] || window["webkitDevicePixelRatio"] || window["mozDevicePixelRatio"] || window["msDevicePixelRatio"] || 1) : 1);
        if (typeof window["StatusBar"] === "object")
            window["StatusBar"]["hide"]();
        this.ClearDeathRow();
        var attribs;
        if (this.fullscreen_mode > 0)
            this["setSize"](window.innerWidth, window.innerHeight, true);
        this.canvas.addEventListener("webglcontextlost", function(ev) {
            ev.preventDefault();
            self.onContextLost();
            cr.logexport("[Construct 2] WebGL context lost");
            window["cr_setSuspended"](true); // stop rendering
        }, false);
        this.canvas.addEventListener("webglcontextrestored", function(ev) {
            self.glwrap.initState();
            self.glwrap.setSize(self.glwrap.width, self.glwrap.height, true);
            self.layer_tex = null;
            self.layout_tex = null;
            self.fx_tex[0] = null;
            self.fx_tex[1] = null;
            self.onContextRestored();
            self.redraw = true;
            cr.logexport("[Construct 2] WebGL context restored");
            window["cr_setSuspended"](false); // resume rendering
        }, false);
        try {
            if (this.enableWebGL && (this.isCocoonJs || this.isEjecta || !this.isDomFree)) {
                attribs = {
                    "alpha": true,
                    "depth": false,
                    "antialias": false,
                    "powerPreference": "high-performance",
                    "failIfMajorPerformanceCaveat": true
                };
                if (!this.isAndroid)
                    this.gl = this.canvas.getContext("webgl2", attribs);
                if (!this.gl) {
                    this.gl = (this.canvas.getContext("webgl", attribs) ||
                        this.canvas.getContext("experimental-webgl", attribs));
                }
            }
        } catch (e) {}
        if (this.gl) {
            var isWebGL2 = (this.gl.getParameter(this.gl.VERSION).indexOf("WebGL 2") === 0);
            var debug_ext = this.gl.getExtension("WEBGL_debug_renderer_info");
            if (debug_ext) {
                var unmasked_vendor = this.gl.getParameter(debug_ext.UNMASKED_VENDOR_WEBGL);
                var unmasked_renderer = this.gl.getParameter(debug_ext.UNMASKED_RENDERER_WEBGL);
                this.glUnmaskedRenderer = unmasked_renderer + " [" + unmasked_vendor + "]";
            }
            if (this.enableFrontToBack)
                this.glUnmaskedRenderer += " [front-to-back enabled]";;
            if (!this.isDomFree) {
                this.overlay_canvas = document.createElement("canvas");
                jQuery(this.overlay_canvas).appendTo(this.canvas.parentNode);
                this.overlay_canvas.oncontextmenu = function(e) {
                    return false;
                };
                this.overlay_canvas.onselectstart = function(e) {
                    return false;
                };
                this.overlay_canvas.width = Math.round(this.cssWidth * this.devicePixelRatio);
                this.overlay_canvas.height = Math.round(this.cssHeight * this.devicePixelRatio);
                jQuery(this.overlay_canvas).css({
                    "width": this.cssWidth + "px",
                    "height": this.cssHeight + "px"
                });
                this.positionOverlayCanvas();
                this.overlay_ctx = this.overlay_canvas.getContext("2d");
            }
            this.glwrap = new cr.GLWrap(this.gl, this.isMobile, this.enableFrontToBack);
            this.glwrap.setSize(this.canvas.width, this.canvas.height);
            this.glwrap.enable_mipmaps = (this.downscalingQuality !== 0);
            this.ctx = null;
            for (i = 0, len = this.types_by_index.length; i < len; i++) {
                t = this.types_by_index[i];
                for (j = 0, lenj = t.effect_types.length; j < lenj; j++) {
                    s = t.effect_types[j];
                    s.shaderindex = this.glwrap.getShaderIndex(s.id);
                    s.preservesOpaqueness = this.glwrap.programPreservesOpaqueness(s.shaderindex);
                    this.uses_background_blending = this.uses_background_blending || this.glwrap.programUsesDest(s.shaderindex);
                }
            }
            for (i = 0, len = this.layouts_by_index.length; i < len; i++) {
                l = this.layouts_by_index[i];
                for (j = 0, lenj = l.effect_types.length; j < lenj; j++) {
                    s = l.effect_types[j];
                    s.shaderindex = this.glwrap.getShaderIndex(s.id);
                    s.preservesOpaqueness = this.glwrap.programPreservesOpaqueness(s.shaderindex);
                }
                l.updateActiveEffects(); // update preserves opaqueness flag
                for (j = 0, lenj = l.layers.length; j < lenj; j++) {
                    y = l.layers[j];
                    for (k = 0, lenk = y.effect_types.length; k < lenk; k++) {
                        s = y.effect_types[k];
                        s.shaderindex = this.glwrap.getShaderIndex(s.id);
                        s.preservesOpaqueness = this.glwrap.programPreservesOpaqueness(s.shaderindex);
                        this.uses_background_blending = this.uses_background_blending || this.glwrap.programUsesDest(s.shaderindex);
                    }
                    y.updateActiveEffects(); // update preserves opaqueness flag
                }
            }
        } else {
            if (this.fullscreen_mode > 0 && this.isDirectCanvas) {;
                this.canvas = null;
                document.oncontextmenu = function(e) {
                    return false;
                };
                document.onselectstart = function(e) {
                    return false;
                };
                this.ctx = AppMobi["canvas"]["getContext"]("2d");
                try {
                    this.ctx["samplingMode"] = this.linearSampling ? "smooth" : "sharp";
                    this.ctx["globalScale"] = 1;
                    this.ctx["HTML5CompatibilityMode"] = true;
                    this.ctx["imageSmoothingEnabled"] = this.linearSampling;
                } catch (e) {}
                if (this.width !== 0 && this.height !== 0) {
                    this.ctx.width = this.width;
                    this.ctx.height = this.height;
                }
            }
            if (!this.ctx) {;
                if (this.isCocoonJs) {
                    attribs = {
                        "antialias": !!this.linearSampling,
                        "alpha": true
                    };
                    this.ctx = this.canvas.getContext("2d", attribs);
                } else {
                    attribs = {
                        "alpha": true
                    };
                    this.ctx = this.canvas.getContext("2d", attribs);
                }
                this.setCtxImageSmoothingEnabled(this.ctx, this.linearSampling);
            }
            this.overlay_canvas = null;
            this.overlay_ctx = null;
        }
        this.tickFunc = function(timestamp) {
            self.tick(false, timestamp);
        };
        if (window != window.top && !this.isDomFree && !this.isWinJS && !this.isWindowsPhone8) {
            document.addEventListener("mousedown", function() {
                window.focus();
            }, true);
            document.addEventListener("touchstart", function() {
                window.focus();
            }, true);
        }
        if (typeof cr_is_preview !== "undefined") {
            if (this.isCocoonJs)
                console.log("[Construct 2] In preview-over-wifi via CocoonJS mode");
            if (window.location.search.indexOf("continuous") > -1) {
                cr.logexport("Reloading for continuous preview");
                this.loadFromSlot = "__c2_continuouspreview";
                this.suspendDrawing = true;
            }
            if (this.pauseOnBlur && !this.isMobile) {
                jQuery(window).focus(function() {
                    self["setSuspended"](false);
                });
                jQuery(window).blur(function() {
                    var parent = window.parent;
                    if (!parent || !parent.document.hasFocus())
                        self["setSuspended"](true);
                });
            }
        }
        window.addEventListener("blur", function() {
            self.onWindowBlur();
        });
        if (!this.isDomFree) {
            var unfocusFormControlFunc = function(e) {
                if (cr.isCanvasInputEvent(e) && document["activeElement"] && document["activeElement"] !== document.getElementsByTagName("body")[0] && document["activeElement"].blur) {
                    try {
                        document["activeElement"].blur();
                    } catch (e) {}
                }
            }
            if (typeof PointerEvent !== "undefined") {
                document.addEventListener("pointerdown", unfocusFormControlFunc);
            } else if (window.navigator["msPointerEnabled"]) {
                document.addEventListener("MSPointerDown", unfocusFormControlFunc);
            } else {
                document.addEventListener("touchstart", unfocusFormControlFunc);
            }
            document.addEventListener("mousedown", unfocusFormControlFunc);
        }
        if (this.fullscreen_mode === 0 && this.isRetina && this.devicePixelRatio > 1) {
            this["setSize"](this.original_width, this.original_height, true);
        }
        this.tryLockOrientation();
        this.getready(); // determine things to preload
        this.go(); // run loading screen
        this.extra = {};
        cr.seal(this);
    };
    var webkitRepaintFlag = false;
    Runtime.prototype["setSize"] = function(w, h, force) {
        var offx = 0,
            offy = 0;
        var neww = 0,
            newh = 0,
            intscale = 0;
        if (this.lastWindowWidth === w && this.lastWindowHeight === h && !force)
            return;
        this.lastWindowWidth = w;
        this.lastWindowHeight = h;
        var mode = this.fullscreen_mode;
        var orig_aspect, cur_aspect;
        var isfullscreen = (document["mozFullScreen"] || document["webkitIsFullScreen"] || !!document["msFullscreenElement"] || document["fullScreen"] || this.isNodeFullscreen) && !this.isCordova;
        if (!isfullscreen && this.fullscreen_mode === 0 && !force)
            return; // ignore size events when not fullscreen and not using a fullscreen-in-browser mode
        if (isfullscreen)
            mode = this.fullscreen_scaling;
        var dpr = this.devicePixelRatio;
        if (mode >= 4) {
            if (mode === 5 && dpr !== 1) // integer scaling
            {
                w += 1;
                h += 1;
            }
            orig_aspect = this.original_width / this.original_height;
            cur_aspect = w / h;
            if (cur_aspect > orig_aspect) {
                neww = h * orig_aspect;
                if (mode === 5) // integer scaling
                {
                    intscale = (neww * dpr) / this.original_width;
                    if (intscale > 1)
                        intscale = Math.floor(intscale);
                    else if (intscale < 1)
                        intscale = 1 / Math.ceil(1 / intscale);
                    neww = this.original_width * intscale / dpr;
                    newh = this.original_height * intscale / dpr;
                    offx = (w - neww) / 2;
                    offy = (h - newh) / 2;
                    w = neww;
                    h = newh;
                } else {
                    offx = (w - neww) / 2;
                    w = neww;
                }
            } else {
                newh = w / orig_aspect;
                if (mode === 5) // integer scaling
                {
                    intscale = (newh * dpr) / this.original_height;
                    if (intscale > 1)
                        intscale = Math.floor(intscale);
                    else if (intscale < 1)
                        intscale = 1 / Math.ceil(1 / intscale);
                    neww = this.original_width * intscale / dpr;
                    newh = this.original_height * intscale / dpr;
                    offx = (w - neww) / 2;
                    offy = (h - newh) / 2;
                    w = neww;
                    h = newh;
                } else {
                    offy = (h - newh) / 2;
                    h = newh;
                }
            }
        } else if (isfullscreen && mode === 0) {
            offx = Math.floor((w - this.original_width) / 2);
            offy = Math.floor((h - this.original_height) / 2);
            w = this.original_width;
            h = this.original_height;
        }
        if (mode < 2)
            this.aspect_scale = dpr;
        this.cssWidth = Math.round(w);
        this.cssHeight = Math.round(h);
        this.width = Math.round(w * dpr);
        this.height = Math.round(h * dpr);
        this.redraw = true;
        if (this.wantFullscreenScalingQuality) {
            this.draw_width = this.width;
            this.draw_height = this.height;
            this.fullscreenScalingQuality = true;
        } else {
            if ((this.width < this.original_width && this.height < this.original_height) || mode === 1) {
                this.draw_width = this.width;
                this.draw_height = this.height;
                this.fullscreenScalingQuality = true;
            } else {
                this.draw_width = this.original_width;
                this.draw_height = this.original_height;
                this.fullscreenScalingQuality = false;
                /*var orig_aspect = this.original_width / this.original_height;
                var cur_aspect = this.width / this.height;
                if ((this.fullscreen_mode !== 2 && cur_aspect > orig_aspect) || (this.fullscreen_mode === 2 && cur_aspect < orig_aspect))
                	this.aspect_scale = this.height / this.original_height;
                else
                	this.aspect_scale = this.width / this.original_width;*/
                if (mode === 2) // scale inner
                {
                    orig_aspect = this.original_width / this.original_height;
                    cur_aspect = this.lastWindowWidth / this.lastWindowHeight;
                    if (cur_aspect < orig_aspect)
                        this.draw_width = this.draw_height * cur_aspect;
                    else if (cur_aspect > orig_aspect)
                        this.draw_height = this.draw_width / cur_aspect;
                } else if (mode === 3) {
                    orig_aspect = this.original_width / this.original_height;
                    cur_aspect = this.lastWindowWidth / this.lastWindowHeight;
                    if (cur_aspect > orig_aspect)
                        this.draw_width = this.draw_height * cur_aspect;
                    else if (cur_aspect < orig_aspect)
                        this.draw_height = this.draw_width / cur_aspect;
                }
            }
        }
        if (this.canvasdiv && !this.isDomFree) {
            jQuery(this.canvasdiv).css({
                "width": Math.round(w) + "px",
                "height": Math.round(h) + "px",
                "margin-left": Math.floor(offx) + "px",
                "margin-top": Math.floor(offy) + "px"
            });
            if (typeof cr_is_preview !== "undefined") {
                jQuery("#borderwrap").css({
                    "width": Math.round(w) + "px",
                    "height": Math.round(h) + "px"
                });
            }
        }
        if (this.canvas) {
            this.canvas.width = Math.round(w * dpr);
            this.canvas.height = Math.round(h * dpr);
            if (this.isEjecta) {
                this.canvas.style.left = Math.floor(offx) + "px";
                this.canvas.style.top = Math.floor(offy) + "px";
                this.canvas.style.width = Math.round(w) + "px";
                this.canvas.style.height = Math.round(h) + "px";
            } else if (this.isRetina && !this.isDomFree) {
                this.canvas.style.width = Math.round(w) + "px";
                this.canvas.style.height = Math.round(h) + "px";
            }
        }
        if (this.overlay_canvas) {
            this.overlay_canvas.width = Math.round(w * dpr);
            this.overlay_canvas.height = Math.round(h * dpr);
            this.overlay_canvas.style.width = this.cssWidth + "px";
            this.overlay_canvas.style.height = this.cssHeight + "px";
        }
        if (this.glwrap) {
            this.glwrap.setSize(Math.round(w * dpr), Math.round(h * dpr));
        }
        if (this.isDirectCanvas && this.ctx) {
            this.ctx.width = Math.round(w);
            this.ctx.height = Math.round(h);
        }
        if (this.ctx) {
            this.setCtxImageSmoothingEnabled(this.ctx, this.linearSampling);
        }
        this.tryLockOrientation();
        if (this.isiPhone && !this.isCordova) {
            window.scrollTo(0, 0);
        }
    };
    Runtime.prototype.tryLockOrientation = function() {
        if (!this.autoLockOrientation || this.orientations === 0)
            return;
        var orientation = "portrait";
        if (this.orientations === 2)
            orientation = "landscape";
        try {
            if (screen["orientation"] && screen["orientation"]["lock"])
                screen["orientation"]["lock"](orientation).catch(function() {});
            else if (screen["lockOrientation"])
                screen["lockOrientation"](orientation);
            else if (screen["webkitLockOrientation"])
                screen["webkitLockOrientation"](orientation);
            else if (screen["mozLockOrientation"])
                screen["mozLockOrientation"](orientation);
            else if (screen["msLockOrientation"])
                screen["msLockOrientation"](orientation);
        } catch (e) {
            if (console && console.warn)
                console.warn("Failed to lock orientation: ", e);
        }
    };
    Runtime.prototype.onContextLost = function() {
        this.glwrap.contextLost();
        this.is_WebGL_context_lost = true;
        var i, len, t;
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            t = this.types_by_index[i];
            if (t.onLostWebGLContext)
                t.onLostWebGLContext();
        }
    };
    Runtime.prototype.onContextRestored = function() {
        this.is_WebGL_context_lost = false;
        var i, len, t;
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            t = this.types_by_index[i];
            if (t.onRestoreWebGLContext)
                t.onRestoreWebGLContext();
        }
    };
    Runtime.prototype.positionOverlayCanvas = function() {
        if (this.isDomFree)
            return;
        var isfullscreen = (document["mozFullScreen"] || document["webkitIsFullScreen"] || document["fullScreen"] || !!document["msFullscreenElement"] || this.isNodeFullscreen) && !this.isCordova;
        var overlay_position = isfullscreen ? jQuery(this.canvas).offset() : jQuery(this.canvas).position();
        overlay_position.position = "absolute";
        jQuery(this.overlay_canvas).css(overlay_position);
    };
    var caf = window["cancelAnimationFrame"] ||
        window["mozCancelAnimationFrame"] ||
        window["webkitCancelAnimationFrame"] ||
        window["msCancelAnimationFrame"] ||
        window["oCancelAnimationFrame"];
    Runtime.prototype["setSuspended"] = function(s) {
        var i, len;
        var self = this;
        if (s && !this.isSuspended) {
            cr.logexport("[Construct 2] Suspending");
            this.isSuspended = true; // next tick will be last
            if (this.raf_id !== -1 && caf) // note: CocoonJS does not implement cancelAnimationFrame
                caf(this.raf_id);
            if (this.timeout_id !== -1)
                clearTimeout(this.timeout_id);
            for (i = 0, len = this.suspend_events.length; i < len; i++)
                this.suspend_events[i](true);
        } else if (!s && this.isSuspended) {
            cr.logexport("[Construct 2] Resuming");
            this.isSuspended = false;
            this.last_tick_time = cr.performance_now(); // ensure first tick is a zero-dt one
            this.last_fps_time = cr.performance_now(); // reset FPS counter
            this.framecount = 0;
            this.logictime = 0;
            for (i = 0, len = this.suspend_events.length; i < len; i++)
                this.suspend_events[i](false);
            this.tick(false); // kick off runtime again
        }
    };
    Runtime.prototype.addSuspendCallback = function(f) {
        this.suspend_events.push(f);
    };
    Runtime.prototype.GetObjectReference = function(i) {;
        return this.objectRefTable[i];
    };
    Runtime.prototype.loadProject = function(data_response) {;
        if (!data_response || !data_response["project"])
            cr.logerror("Project model unavailable");
        var pm = data_response["project"];
        this.name = pm[0];
        this.first_layout = pm[1];
        this.fullscreen_mode = pm[12]; // 0 = off, 1 = crop, 2 = scale inner, 3 = scale outer, 4 = letterbox scale, 5 = integer letterbox scale
        this.fullscreen_mode_set = pm[12];
        this.original_width = pm[10];
        this.original_height = pm[11];
        this.parallax_x_origin = this.original_width / 2;
        this.parallax_y_origin = this.original_height / 2;
        if (this.isDomFree && !this.isEjecta && (pm[12] >= 4 || pm[12] === 0)) {
            cr.logexport("[Construct 2] Letterbox scale fullscreen modes are not supported on this platform - falling back to 'Scale outer'");
            this.fullscreen_mode = 3;
            this.fullscreen_mode_set = 3;
        }
        this.uses_loader_layout = pm[18];
        this.loaderstyle = pm[19];
        if (this.loaderstyle === 0) {
            var loaderImage = new Image();
            loaderImage.crossOrigin = "anonymous";
            this.setImageSrc(loaderImage, "loading-logo.png");
            this.loaderlogos = {
                logo: loaderImage
            };
        } else if (this.loaderstyle === 4) // c2 splash
        {
            var loaderC2logo_1024 = new Image();
            loaderC2logo_1024.src = "";
            var loaderC2logo_512 = new Image();
            loaderC2logo_512.src = "";
            var loaderC2logo_256 = new Image();
            loaderC2logo_256.src = "";
            var loaderC2logo_128 = new Image();
            loaderC2logo_128.src = "";
            var loaderPowered_1024 = new Image();
            loaderPowered_1024.src = "";
            var loaderPowered_512 = new Image();
            loaderPowered_512.src = "";
            var loaderPowered_256 = new Image();
            loaderPowered_256.src = "";
            var loaderPowered_128 = new Image();
            loaderPowered_128.src = "";
            var loaderWebsite_1024 = new Image();
            loaderWebsite_1024.src = "";
            var loaderWebsite_512 = new Image();
            loaderWebsite_512.src = "";
            var loaderWebsite_256 = new Image();
            loaderWebsite_256.src = "";
            var loaderWebsite_128 = new Image();
            loaderWebsite_128.src = "";
            this.loaderlogos = {
                logo: [loaderC2logo_1024, loaderC2logo_512, loaderC2logo_256, loaderC2logo_128],
                powered: [loaderPowered_1024, loaderPowered_512, loaderPowered_256, loaderPowered_128],
                website: [loaderWebsite_1024, loaderWebsite_512, loaderWebsite_256, loaderWebsite_128]
            };
        }
        this.next_uid = pm[21];
        this.objectRefTable = cr.getObjectRefTable();
        this.system = new cr.system_object(this);
        var i, len, j, lenj, k, lenk, idstr, m, b, t, f, p;
        var plugin, plugin_ctor;
        for (i = 0, len = pm[2].length; i < len; i++) {
            m = pm[2][i];
            p = this.GetObjectReference(m[0]);;
            cr.add_common_aces(m, p.prototype);
            plugin = new p(this);
            plugin.singleglobal = m[1];
            plugin.is_world = m[2];
            plugin.is_rotatable = m[5];
            plugin.must_predraw = m[9];
            if (plugin.onCreate)
                plugin.onCreate(); // opportunity to override default ACEs
            cr.seal(plugin);
            this.plugins.push(plugin);
        }
        this.objectRefTable = cr.getObjectRefTable();
        for (i = 0, len = pm[3].length; i < len; i++) {
            m = pm[3][i];
            plugin_ctor = this.GetObjectReference(m[1]);;
            plugin = null;
            for (j = 0, lenj = this.plugins.length; j < lenj; j++) {
                if (this.plugins[j] instanceof plugin_ctor) {
                    plugin = this.plugins[j];
                    break;
                }
            };;
            var type_inst = new plugin.Type(plugin);;
            type_inst.name = m[0];
            type_inst.is_family = m[2];
            type_inst.instvar_sids = m[3].slice(0);
            type_inst.vars_count = m[3].length;
            type_inst.behs_count = m[4];
            type_inst.fx_count = m[5];
            type_inst.sid = m[11];
            if (type_inst.is_family) {
                type_inst.members = []; // types in this family
                type_inst.family_index = this.family_count++;
                type_inst.families = null;
            } else {
                type_inst.members = null;
                type_inst.family_index = -1;
                type_inst.families = []; // families this type belongs to
            }
            type_inst.family_var_map = null;
            type_inst.family_beh_map = null;
            type_inst.family_fx_map = null;
            type_inst.is_contained = false;
            type_inst.container = null;
            if (m[6]) {
                type_inst.texture_file = m[6][0];
                type_inst.texture_filesize = m[6][1];
                type_inst.texture_pixelformat = m[6][2];
            } else {
                type_inst.texture_file = null;
                type_inst.texture_filesize = 0;
                type_inst.texture_pixelformat = 0; // rgba8
            }
            if (m[7]) {
                type_inst.animations = m[7];
            } else {
                type_inst.animations = null;
            }
            type_inst.index = i; // save index in to types array in type
            type_inst.instances = []; // all instances of this type
            type_inst.deadCache = []; // destroyed instances to recycle next create
            type_inst.solstack = [new cr.selection(type_inst)]; // initialise SOL stack with one empty SOL
            type_inst.cur_sol = 0;
            type_inst.default_instance = null;
            type_inst.default_layerindex = 0;
            type_inst.stale_iids = true;
            type_inst.updateIIDs = cr.type_updateIIDs;
            type_inst.getFirstPicked = cr.type_getFirstPicked;
            type_inst.getPairedInstance = cr.type_getPairedInstance;
            type_inst.getCurrentSol = cr.type_getCurrentSol;
            type_inst.pushCleanSol = cr.type_pushCleanSol;
            type_inst.pushCopySol = cr.type_pushCopySol;
            type_inst.popSol = cr.type_popSol;
            type_inst.getBehaviorByName = cr.type_getBehaviorByName;
            type_inst.getBehaviorIndexByName = cr.type_getBehaviorIndexByName;
            type_inst.getEffectIndexByName = cr.type_getEffectIndexByName;
            type_inst.applySolToContainer = cr.type_applySolToContainer;
            type_inst.getInstanceByIID = cr.type_getInstanceByIID;
            type_inst.collision_grid = new cr.SparseGrid(this.original_width, this.original_height);
            type_inst.any_cell_changed = true;
            type_inst.any_instance_parallaxed = false;
            type_inst.extra = {};
            type_inst.toString = cr.type_toString;
            type_inst.behaviors = [];
            for (j = 0, lenj = m[8].length; j < lenj; j++) {
                b = m[8][j];
                var behavior_ctor = this.GetObjectReference(b[1]);
                var behavior_plugin = null;
                for (k = 0, lenk = this.behaviors.length; k < lenk; k++) {
                    if (this.behaviors[k] instanceof behavior_ctor) {
                        behavior_plugin = this.behaviors[k];
                        break;
                    }
                }
                if (!behavior_plugin) {
                    behavior_plugin = new behavior_ctor(this);
                    behavior_plugin.my_types = []; // types using this behavior
                    behavior_plugin.my_instances = new cr.ObjectSet(); // instances of this behavior
                    if (behavior_plugin.onCreate)
                        behavior_plugin.onCreate();
                    cr.seal(behavior_plugin);
                    this.behaviors.push(behavior_plugin);
                    if (cr.behaviors.solid && behavior_plugin instanceof cr.behaviors.solid)
                        this.solidBehavior = behavior_plugin;
                    if (cr.behaviors.jumpthru && behavior_plugin instanceof cr.behaviors.jumpthru)
                        this.jumpthruBehavior = behavior_plugin;
                    if (cr.behaviors.shadowcaster && behavior_plugin instanceof cr.behaviors.shadowcaster)
                        this.shadowcasterBehavior = behavior_plugin;
                }
                if (behavior_plugin.my_types.indexOf(type_inst) === -1)
                    behavior_plugin.my_types.push(type_inst);
                var behavior_type = new behavior_plugin.Type(behavior_plugin, type_inst);
                behavior_type.name = b[0];
                behavior_type.sid = b[2];
                behavior_type.onCreate();
                cr.seal(behavior_type);
                type_inst.behaviors.push(behavior_type);
            }
            type_inst.global = m[9];
            type_inst.isOnLoaderLayout = m[10];
            type_inst.effect_types = [];
            for (j = 0, lenj = m[12].length; j < lenj; j++) {
                type_inst.effect_types.push({
                    id: m[12][j][0],
                    name: m[12][j][1],
                    shaderindex: -1,
                    preservesOpaqueness: false,
                    active: true,
                    index: j
                });
            }
            type_inst.tile_poly_data = m[13];
            if (!this.uses_loader_layout || type_inst.is_family || type_inst.isOnLoaderLayout || !plugin.is_world) {
                type_inst.onCreate();
                cr.seal(type_inst);
            }
            if (type_inst.name)
                this.types[type_inst.name] = type_inst;
            this.types_by_index.push(type_inst);
            if (plugin.singleglobal) {
                var instance = new plugin.Instance(type_inst);
                instance.uid = this.next_uid++;
                instance.puid = this.next_puid++;
                instance.iid = 0;
                instance.get_iid = cr.inst_get_iid;
                instance.toString = cr.inst_toString;
                instance.properties = m[14];
                instance.onCreate();
                cr.seal(instance);
                type_inst.instances.push(instance);
                this.objectsByUid[instance.uid.toString()] = instance;
            }
        }
        for (i = 0, len = pm[4].length; i < len; i++) {
            var familydata = pm[4][i];
            var familytype = this.types_by_index[familydata[0]];
            var familymember;
            for (j = 1, lenj = familydata.length; j < lenj; j++) {
                familymember = this.types_by_index[familydata[j]];
                familymember.families.push(familytype);
                familytype.members.push(familymember);
            }
        }
        for (i = 0, len = pm[28].length; i < len; i++) {
            var containerdata = pm[28][i];
            var containertypes = [];
            for (j = 0, lenj = containerdata.length; j < lenj; j++)
                containertypes.push(this.types_by_index[containerdata[j]]);
            for (j = 0, lenj = containertypes.length; j < lenj; j++) {
                containertypes[j].is_contained = true;
                containertypes[j].container = containertypes;
            }
        }
        if (this.family_count > 0) {
            for (i = 0, len = this.types_by_index.length; i < len; i++) {
                t = this.types_by_index[i];
                if (t.is_family || !t.families.length)
                    continue;
                t.family_var_map = new Array(this.family_count);
                t.family_beh_map = new Array(this.family_count);
                t.family_fx_map = new Array(this.family_count);
                var all_fx = [];
                var varsum = 0;
                var behsum = 0;
                var fxsum = 0;
                for (j = 0, lenj = t.families.length; j < lenj; j++) {
                    f = t.families[j];
                    t.family_var_map[f.family_index] = varsum;
                    varsum += f.vars_count;
                    t.family_beh_map[f.family_index] = behsum;
                    behsum += f.behs_count;
                    t.family_fx_map[f.family_index] = fxsum;
                    fxsum += f.fx_count;
                    for (k = 0, lenk = f.effect_types.length; k < lenk; k++)
                        all_fx.push(cr.shallowCopy({}, f.effect_types[k]));
                }
                t.effect_types = all_fx.concat(t.effect_types);
                for (j = 0, lenj = t.effect_types.length; j < lenj; j++)
                    t.effect_types[j].index = j;
            }
        }
        for (i = 0, len = pm[5].length; i < len; i++) {
            m = pm[5][i];
            var layout = new cr.layout(this, m);
            cr.seal(layout);
            this.layouts[layout.name] = layout;
            this.layouts_by_index.push(layout);
        }
        for (i = 0, len = pm[6].length; i < len; i++) {
            m = pm[6][i];
            var sheet = new cr.eventsheet(this, m);
            cr.seal(sheet);
            this.eventsheets[sheet.name] = sheet;
            this.eventsheets_by_index.push(sheet);
        }
        for (i = 0, len = this.eventsheets_by_index.length; i < len; i++)
            this.eventsheets_by_index[i].postInit();
        for (i = 0, len = this.eventsheets_by_index.length; i < len; i++)
            this.eventsheets_by_index[i].updateDeepIncludes();
        for (i = 0, len = this.triggers_to_postinit.length; i < len; i++)
            this.triggers_to_postinit[i].postInit();
        cr.clearArray(this.triggers_to_postinit)
        this.audio_to_preload = pm[7];
        this.files_subfolder = pm[8];
        this.pixel_rounding = pm[9];
        this.aspect_scale = 1.0;
        this.enableWebGL = pm[13];
        this.linearSampling = pm[14];
        this.clearBackground = pm[15];
        this.versionstr = pm[16];
        this.useHighDpi = pm[17];
        this.orientations = pm[20]; // 0 = any, 1 = portrait, 2 = landscape
        this.autoLockOrientation = (this.orientations > 0);
        this.pauseOnBlur = pm[22];
        this.wantFullscreenScalingQuality = pm[23]; // false = low quality, true = high quality
        this.fullscreenScalingQuality = this.wantFullscreenScalingQuality;
        this.downscalingQuality = pm[24]; // 0 = low (mips off), 1 = medium (mips on, dense spritesheet), 2 = high (mips on, sparse spritesheet)
        this.preloadSounds = pm[25]; // 0 = no, 1 = yes
        this.projectName = pm[26];
        this.enableFrontToBack = pm[27] && !this.isIE; // front-to-back renderer disabled in IE (but not Edge)
        this.start_time = Date.now();
        cr.clearArray(this.objectRefTable);
        this.initRendererAndLoader();
    };
    var anyImageHadError = false;
    var MAX_PARALLEL_IMAGE_LOADS = 100;
    var currentlyActiveImageLoads = 0;
    var imageLoadQueue = []; // array of [img, srcToSet]
    Runtime.prototype.queueImageLoad = function(img_, src_) {
        var self = this;
        var doneFunc = function() {
            currentlyActiveImageLoads--;
            self.maybeLoadNextImages();
        };
        img_.addEventListener("load", doneFunc);
        img_.addEventListener("error", doneFunc);
        imageLoadQueue.push([img_, src_]);
        this.maybeLoadNextImages();
    };
    Runtime.prototype.maybeLoadNextImages = function() {
        var next;
        while (imageLoadQueue.length && currentlyActiveImageLoads < MAX_PARALLEL_IMAGE_LOADS) {
            currentlyActiveImageLoads++;
            next = imageLoadQueue.shift();
            this.setImageSrc(next[0], next[1]);
        }
    };
    Runtime.prototype.waitForImageLoad = function(img_, src_) {
        img_["cocoonLazyLoad"] = true;
        img_.onerror = function(e) {
            img_.c2error = true;
            anyImageHadError = true;
            if (console && console.error)
                console.error("Error loading image '" + img_.src + "': ", e);
        };
        if (this.isEjecta) {
            img_.src = src_;
        } else if (!img_.src) {
            if (typeof XAPKReader !== "undefined") {
                XAPKReader.get(src_, function(expanded_url) {
                    img_.src = expanded_url;
                }, function(e) {
                    img_.c2error = true;
                    anyImageHadError = true;
                    if (console && console.error)
                        console.error("Error extracting image '" + src_ + "' from expansion file: ", e);
                });
            } else {
                img_.crossOrigin = "anonymous"; // required for Arcade sandbox compatibility
                this.queueImageLoad(img_, src_); // use a queue to avoid requesting all images simultaneously
            }
        }
        this.wait_for_textures.push(img_);
    };
    Runtime.prototype.findWaitingTexture = function(src_) {
        var i, len;
        for (i = 0, len = this.wait_for_textures.length; i < len; i++) {
            if (this.wait_for_textures[i].cr_src === src_)
                return this.wait_for_textures[i];
        }
        return null;
    };
    var audio_preload_totalsize = 0;
    var audio_preload_started = false;
    Runtime.prototype.getready = function() {
        if (!this.audioInstance)
            return;
        audio_preload_totalsize = this.audioInstance.setPreloadList(this.audio_to_preload);
    };
    Runtime.prototype.areAllTexturesAndSoundsLoaded = function() {
        var totalsize = audio_preload_totalsize;
        var completedsize = 0;
        var audiocompletedsize = 0;
        var ret = true;
        var i, len, img;
        for (i = 0, len = this.wait_for_textures.length; i < len; i++) {
            img = this.wait_for_textures[i];
            var filesize = img.cr_filesize;
            if (!filesize || filesize <= 0)
                filesize = 50000;
            totalsize += filesize;
            if (!!img.src && (img.complete || img["loaded"]) && !img.c2error)
                completedsize += filesize;
            else
                ret = false; // not all textures loaded
        }
        if (ret && this.preloadSounds && this.audioInstance) {
            if (!audio_preload_started) {
                this.audioInstance.startPreloads();
                audio_preload_started = true;
            }
            audiocompletedsize = this.audioInstance.getPreloadedSize();
            completedsize += audiocompletedsize;
            if (audiocompletedsize < audio_preload_totalsize)
                ret = false; // not done yet
        }
        if (totalsize == 0)
            this.progress = 1; // indicate to C2 splash loader that it can finish now
        else
            this.progress = (completedsize / totalsize);
        return ret;
    };
    var isC2SplashDone = false;
    Runtime.prototype.go = function() {
        if (!this.ctx && !this.glwrap)
            return;
        var ctx = this.ctx || this.overlay_ctx;
        if (this.overlay_canvas)
            this.positionOverlayCanvas();
        var curwidth = window.innerWidth;
        var curheight = window.innerHeight;
        if (this.lastWindowWidth !== curwidth || this.lastWindowHeight !== curheight) {
            this["setSize"](curwidth, curheight);
        }
        this.progress = 0;
        this.last_progress = -1;
        var self = this;
        if (this.areAllTexturesAndSoundsLoaded() && (this.loaderstyle !== 4 || isC2SplashDone)) {
            this.go_loading_finished();
        } else {
            var ms_elapsed = Date.now() - this.start_time;
            if (ctx) {
                var overlay_width = this.width;
                var overlay_height = this.height;
                var dpr = this.devicePixelRatio;
                if (this.loaderstyle < 3 && (this.isCocoonJs || (ms_elapsed >= 500 && this.last_progress != this.progress))) {
                    ctx.clearRect(0, 0, overlay_width, overlay_height);
                    var mx = overlay_width / 2;
                    var my = overlay_height / 2;
                    var haslogo = (this.loaderstyle === 0 && this.loaderlogos.logo.complete);
                    var hlw = 40 * dpr;
                    var hlh = 0;
                    var logowidth = 80 * dpr;
                    var logoheight;
                    if (haslogo) {
                        var loaderLogoImage = this.loaderlogos.logo;
                        logowidth = loaderLogoImage.width * dpr;
                        logoheight = loaderLogoImage.height * dpr;
                        hlw = logowidth / 2;
                        hlh = logoheight / 2;
                        ctx.drawImage(loaderLogoImage, cr.floor(mx - hlw), cr.floor(my - hlh), logowidth, logoheight);
                    }
                    if (this.loaderstyle <= 1) {
                        my += hlh + (haslogo ? 12 * dpr : 0);
                        mx -= hlw;
                        mx = cr.floor(mx) + 0.5;
                        my = cr.floor(my) + 0.5;
                        ctx.fillStyle = anyImageHadError ? "red" : "DodgerBlue";
                        ctx.fillRect(mx, my, Math.floor(logowidth * this.progress), 6 * dpr);
                        ctx.strokeStyle = "black";
                        ctx.strokeRect(mx, my, logowidth, 6 * dpr);
                        ctx.strokeStyle = "white";
                        ctx.strokeRect(mx - 1 * dpr, my - 1 * dpr, logowidth + 2 * dpr, 8 * dpr);
                    } else if (this.loaderstyle === 2) {
                        ctx.font = (this.isEjecta ? "12pt ArialMT" : "12pt Arial");
                        ctx.fillStyle = anyImageHadError ? "#f00" : "#999";
                        ctx.textBaseLine = "middle";
                        var percent_text = Math.round(this.progress * 100) + "%";
                        var text_dim = ctx.measureText ? ctx.measureText(percent_text) : null;
                        var text_width = text_dim ? text_dim.width : 0;
                        ctx.fillText(percent_text, mx - (text_width / 2), my);
                    }
                    this.last_progress = this.progress;
                } else if (this.loaderstyle === 4) {
                    this.draw_c2_splash_loader(ctx);
                    if (raf)
                        raf(function() {
                            self.go();
                        });
                    else
                        setTimeout(function() {
                            self.go();
                        }, 16);
                    return;
                }
            }
            setTimeout(function() {
                self.go();
            }, (this.isCocoonJs ? 10 : 100));
        }
    };
    var splashStartTime = -1;
    var splashFadeInDuration = 300;
    var splashFadeOutDuration = 300;
    var splashAfterFadeOutWait = (typeof cr_is_preview === "undefined" ? 200 : 0);
    var splashIsFadeIn = true;
    var splashIsFadeOut = false;
    var splashFadeInFinish = 0;
    var splashFadeOutStart = 0;
    var splashMinDisplayTime = (typeof cr_is_preview === "undefined" ? 3000 : 0);
    var renderViaCanvas = null;
    var renderViaCtx = null;
    var splashFrameNumber = 0;

    function maybeCreateRenderViaCanvas(w, h) {
        if (!renderViaCanvas || renderViaCanvas.width !== w || renderViaCanvas.height !== h) {
            renderViaCanvas = document.createElement("canvas");
            renderViaCanvas.width = w;
            renderViaCanvas.height = h;
            renderViaCtx = renderViaCanvas.getContext("2d");
        }
    };

    function mipImage(arr, size) {
        if (size <= 128)
            return arr[3];
        else if (size <= 256)
            return arr[2];
        else if (size <= 512)
            return arr[1];
        else
            return arr[0];
    };
    Runtime.prototype.draw_c2_splash_loader = function(ctx) {
        if (isC2SplashDone)
            return;
        var w = Math.ceil(this.width);
        var h = Math.ceil(this.height);
        var dpr = this.devicePixelRatio;
        var logoimages = this.loaderlogos.logo;
        var poweredimages = this.loaderlogos.powered;
        var websiteimages = this.loaderlogos.website;
        for (var i = 0; i < 4; ++i) {
            if (!logoimages[i].complete || !poweredimages[i].complete || !websiteimages[i].complete)
                return;
        }
        if (splashFrameNumber === 0)
            splashStartTime = Date.now();
        var nowTime = Date.now();
        var isRenderingVia = false;
        var renderToCtx = ctx;
        var drawW, drawH;
        if (splashIsFadeIn || splashIsFadeOut) {
            ctx.clearRect(0, 0, w, h);
            maybeCreateRenderViaCanvas(w, h);
            renderToCtx = renderViaCtx;
            isRenderingVia = true;
            if (splashIsFadeIn && splashFrameNumber === 1)
                splashStartTime = Date.now();
        } else {
            ctx.globalAlpha = 1;
        }
        renderToCtx.fillStyle = "#333333";
        renderToCtx.fillRect(0, 0, w, h);
        if (this.cssHeight > 256) {
            drawW = cr.clamp(h * 0.22, 105, w * 0.6);
            drawH = drawW * 0.25;
            renderToCtx.drawImage(mipImage(poweredimages, drawW), w * 0.5 - drawW / 2, h * 0.2 - drawH / 2, drawW, drawH);
            drawW = Math.min(h * 0.395, w * 0.95);
            drawH = drawW;
            renderToCtx.drawImage(mipImage(logoimages, drawW), w * 0.5 - drawW / 2, h * 0.485 - drawH / 2, drawW, drawH);
            drawW = cr.clamp(h * 0.22, 105, w * 0.6);
            drawH = drawW * 0.25;
            renderToCtx.drawImage(mipImage(websiteimages, drawW), w * 0.5 - drawW / 2, h * 0.868 - drawH / 2, drawW, drawH);
            renderToCtx.fillStyle = "#3C3C3C";
            drawW = w;
            drawH = Math.max(h * 0.005, 2);
            renderToCtx.fillRect(0, h * 0.8 - drawH / 2, drawW, drawH);
            renderToCtx.fillStyle = anyImageHadError ? "red" : "#E0FF65";
            drawW = w * this.progress;
            renderToCtx.fillRect(w * 0.5 - drawW / 2, h * 0.8 - drawH / 2, drawW, drawH);
        } else {
            drawW = h * 0.55;
            drawH = drawW;
            renderToCtx.drawImage(mipImage(logoimages, drawW), w * 0.5 - drawW / 2, h * 0.45 - drawH / 2, drawW, drawH);
            renderToCtx.fillStyle = "#3C3C3C";
            drawW = w;
            drawH = Math.max(h * 0.005, 2);
            renderToCtx.fillRect(0, h * 0.85 - drawH / 2, drawW, drawH);
            renderToCtx.fillStyle = anyImageHadError ? "red" : "#E0FF65";
            drawW = w * this.progress;
            renderToCtx.fillRect(w * 0.5 - drawW / 2, h * 0.85 - drawH / 2, drawW, drawH);
        }
        if (isRenderingVia) {
            if (splashIsFadeIn) {
                if (splashFrameNumber === 0)
                    ctx.globalAlpha = 0;
                else
                    ctx.globalAlpha = Math.min((nowTime - splashStartTime) / splashFadeInDuration, 1);
            } else if (splashIsFadeOut) {
                ctx.globalAlpha = Math.max(1 - (nowTime - splashFadeOutStart) / splashFadeOutDuration, 0);
            }
            ctx.drawImage(renderViaCanvas, 0, 0, w, h);
        }
        if (splashIsFadeIn && nowTime - splashStartTime >= splashFadeInDuration && splashFrameNumber >= 2) {
            splashIsFadeIn = false;
            splashFadeInFinish = nowTime;
        }
        if (!splashIsFadeIn && nowTime - splashFadeInFinish >= splashMinDisplayTime && !splashIsFadeOut && this.progress >= 1) {
            splashIsFadeOut = true;
            splashFadeOutStart = nowTime;
        }
        if ((splashIsFadeOut && nowTime - splashFadeOutStart >= splashFadeOutDuration + splashAfterFadeOutWait) ||
            (typeof cr_is_preview !== "undefined" && this.progress >= 1 && Date.now() - splashStartTime < 500)) {
            isC2SplashDone = true;
            splashIsFadeIn = false;
            splashIsFadeOut = false;
            renderViaCanvas = null;
            renderViaCtx = null;
            this.loaderlogos = null;
        }
        ++splashFrameNumber;
    };
    Runtime.prototype.go_loading_finished = function() {
        if (this.overlay_canvas) {
            this.canvas.parentNode.removeChild(this.overlay_canvas);
            this.overlay_ctx = null;
            this.overlay_canvas = null;
        }
        this.start_time = Date.now();
        this.last_fps_time = cr.performance_now(); // for counting framerate
        var i, len, t;
        if (this.uses_loader_layout) {
            for (i = 0, len = this.types_by_index.length; i < len; i++) {
                t = this.types_by_index[i];
                if (!t.is_family && !t.isOnLoaderLayout && t.plugin.is_world) {
                    t.onCreate();
                    cr.seal(t);
                }
            }
        } else
            this.isloading = false;
        for (i = 0, len = this.layouts_by_index.length; i < len; i++) {
            this.layouts_by_index[i].createGlobalNonWorlds();
        }
        if (this.fullscreen_mode >= 2) {
            var orig_aspect = this.original_width / this.original_height;
            var cur_aspect = this.width / this.height;
            if ((this.fullscreen_mode !== 2 && cur_aspect > orig_aspect) || (this.fullscreen_mode === 2 && cur_aspect < orig_aspect))
                this.aspect_scale = this.height / this.original_height;
            else
                this.aspect_scale = this.width / this.original_width;
        }
        if (this.first_layout)
            this.layouts[this.first_layout].startRunning();
        else
            this.layouts_by_index[0].startRunning();;
        if (!this.uses_loader_layout) {
            this.loadingprogress = 1;
            this.trigger(cr.system_object.prototype.cnds.OnLoadFinished, null);
            if (window["C2_RegisterSW"]) // note not all platforms use SW
                window["C2_RegisterSW"]();
        }
        if (navigator["splashscreen"] && navigator["splashscreen"]["hide"])
            navigator["splashscreen"]["hide"]();
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            t = this.types_by_index[i];
            if (t.onAppBegin)
                t.onAppBegin();
        }
        if (document["hidden"] || document["webkitHidden"] || document["mozHidden"] || document["msHidden"]) {
            window["cr_setSuspended"](true); // stop rendering
        } else {
            this.tick(false);
        }
        if (this.isDirectCanvas)
            AppMobi["webview"]["execute"]("onGameReady();");
    };
    Runtime.prototype.tick = function(background_wake, timestamp, debug_step) {
        if (!this.running_layout)
            return;
        var nowtime = cr.performance_now();
        var logic_start = nowtime;
        if (!debug_step && this.isSuspended && !background_wake)
            return;
        if (!background_wake) {
            if (raf)
                this.raf_id = raf(this.tickFunc);
            else {
                this.timeout_id = setTimeout(this.tickFunc, this.isMobile ? 1 : 16);
            }
        }
        var raf_time = timestamp || nowtime;
        var fsmode = this.fullscreen_mode;
        var isfullscreen = (document["mozFullScreen"] || document["webkitIsFullScreen"] || document["fullScreen"] || !!document["msFullscreenElement"]) && !this.isCordova;
        if ((isfullscreen || this.isNodeFullscreen) && this.fullscreen_scaling > 0)
            fsmode = this.fullscreen_scaling;
        if (fsmode > 0) // r222: experimentally enabling this workaround for all platforms
        {
            var curwidth = window.innerWidth;
            var curheight = window.innerHeight;
            if (this.lastWindowWidth !== curwidth || this.lastWindowHeight !== curheight) {
                this["setSize"](curwidth, curheight);
            }
        }
        if (!this.isDomFree) {
            if (isfullscreen) {
                if (!this.firstInFullscreen)
                    this.firstInFullscreen = true;
            } else {
                if (this.firstInFullscreen) {
                    this.firstInFullscreen = false;
                    if (this.fullscreen_mode === 0) {
                        this["setSize"](Math.round(this.oldWidth / this.devicePixelRatio), Math.round(this.oldHeight / this.devicePixelRatio), true);
                    }
                } else {
                    this.oldWidth = this.width;
                    this.oldHeight = this.height;
                }
            }
        }
        if (this.isloading) {
            var done = this.areAllTexturesAndSoundsLoaded(); // updates this.progress
            this.loadingprogress = this.progress;
            if (done) {
                this.isloading = false;
                this.progress = 1;
                this.trigger(cr.system_object.prototype.cnds.OnLoadFinished, null);
                if (window["C2_RegisterSW"])
                    window["C2_RegisterSW"]();
            }
        }
        this.logic(raf_time);
        if ((this.redraw || this.isCocoonJs) && !this.is_WebGL_context_lost && !this.suspendDrawing && !background_wake) {
            this.redraw = false;
            if (this.glwrap)
                this.drawGL();
            else
                this.draw();
            if (this.snapshotCanvas) {
                if (this.canvas && this.canvas.toDataURL) {
                    this.snapshotData = this.canvas.toDataURL(this.snapshotCanvas[0], this.snapshotCanvas[1]);
                    if (window["cr_onSnapshot"])
                        window["cr_onSnapshot"](this.snapshotData);
                    this.trigger(cr.system_object.prototype.cnds.OnCanvasSnapshot, null);
                }
                this.snapshotCanvas = null;
            }
        }
        if (!this.hit_breakpoint) {
            this.tickcount++;
            this.tickcount_nosave++;
            this.execcount++;
            this.framecount++;
        }
        this.logictime += cr.performance_now() - logic_start;
    };
    Runtime.prototype.logic = function(cur_time) {
        var i, leni, j, lenj, k, lenk, type, inst, binst;
        if (cur_time - this.last_fps_time >= 1000) // every 1 second
        {
            this.last_fps_time += 1000;
            if (cur_time - this.last_fps_time >= 1000)
                this.last_fps_time = cur_time;
            this.fps = this.framecount;
            this.framecount = 0;
            this.cpuutilisation = this.logictime;
            this.logictime = 0;
        }
        var wallDt = 0;
        if (this.last_tick_time !== 0) {
            var ms_diff = cur_time - this.last_tick_time;
            if (ms_diff < 0)
                ms_diff = 0;
            wallDt = ms_diff / 1000.0; // dt measured in seconds
            this.dt1 = wallDt;
            if (this.dt1 > 0.5)
                this.dt1 = 0;
            else if (this.dt1 > 1 / this.minimumFramerate)
                this.dt1 = 1 / this.minimumFramerate;
        }
        this.last_tick_time = cur_time;
        this.dt = this.dt1 * this.timescale;
        this.kahanTime.add(this.dt);
        this.wallTime.add(wallDt); // prevent min/max framerate affecting wall clock
        var isfullscreen = (document["mozFullScreen"] || document["webkitIsFullScreen"] || document["fullScreen"] || !!document["msFullscreenElement"] || this.isNodeFullscreen) && !this.isCordova;
        if (this.fullscreen_mode >= 2 /* scale */ || (isfullscreen && this.fullscreen_scaling > 0)) {
            var orig_aspect = this.original_width / this.original_height;
            var cur_aspect = this.width / this.height;
            var mode = this.fullscreen_mode;
            if (isfullscreen && this.fullscreen_scaling > 0)
                mode = this.fullscreen_scaling;
            if ((mode !== 2 && cur_aspect > orig_aspect) || (mode === 2 && cur_aspect < orig_aspect)) {
                this.aspect_scale = this.height / this.original_height;
            } else {
                this.aspect_scale = this.width / this.original_width;
            }
            if (this.running_layout) {
                this.running_layout.scrollToX(this.running_layout.scrollX);
                this.running_layout.scrollToY(this.running_layout.scrollY);
            }
        } else
            this.aspect_scale = (this.isRetina ? this.devicePixelRatio : 1);
        this.ClearDeathRow();
        this.isInOnDestroy++;
        this.system.runWaits(); // prevent instance list changing
        this.isInOnDestroy--;
        this.ClearDeathRow(); // allow instance list changing
        this.isInOnDestroy++;
        var tickarr = this.objects_to_pretick.valuesRef();
        for (i = 0, leni = tickarr.length; i < leni; i++)
            tickarr[i].pretick();
        for (i = 0, leni = this.types_by_index.length; i < leni; i++) {
            type = this.types_by_index[i];
            if (type.is_family || (!type.behaviors.length && !type.families.length))
                continue;
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                inst = type.instances[j];
                for (k = 0, lenk = inst.behavior_insts.length; k < lenk; k++) {
                    inst.behavior_insts[k].tick();
                }
            }
        }
        for (i = 0, leni = this.types_by_index.length; i < leni; i++) {
            type = this.types_by_index[i];
            if (type.is_family || (!type.behaviors.length && !type.families.length))
                continue; // type doesn't have any behaviors
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                inst = type.instances[j];
                for (k = 0, lenk = inst.behavior_insts.length; k < lenk; k++) {
                    binst = inst.behavior_insts[k];
                    if (binst.posttick)
                        binst.posttick();
                }
            }
        }
        tickarr = this.objects_to_tick.valuesRef();
        for (i = 0, leni = tickarr.length; i < leni; i++)
            tickarr[i].tick();
        this.isInOnDestroy--; // end preventing instance lists from being changed
        this.handleSaveLoad(); // save/load now if queued
        i = 0;
        while (this.changelayout && i++ < 10) {
            this.doChangeLayout(this.changelayout);
        }
        for (i = 0, leni = this.eventsheets_by_index.length; i < leni; i++)
            this.eventsheets_by_index[i].hasRun = false;
        if (this.running_layout.event_sheet)
            this.running_layout.event_sheet.run();
        cr.clearArray(this.registered_collisions);
        this.layout_first_tick = false;
        this.isInOnDestroy++; // prevent instance lists from being changed
        for (i = 0, leni = this.types_by_index.length; i < leni; i++) {
            type = this.types_by_index[i];
            if (type.is_family || (!type.behaviors.length && !type.families.length))
                continue; // type doesn't have any behaviors
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                var inst = type.instances[j];
                for (k = 0, lenk = inst.behavior_insts.length; k < lenk; k++) {
                    binst = inst.behavior_insts[k];
                    if (binst.tick2)
                        binst.tick2();
                }
            }
        }
        tickarr = this.objects_to_tick2.valuesRef();
        for (i = 0, leni = tickarr.length; i < leni; i++)
            tickarr[i].tick2();
        this.isInOnDestroy--; // end preventing instance lists from being changed
    };
    Runtime.prototype.onWindowBlur = function() {
        var i, leni, j, lenj, k, lenk, type, inst, binst;
        for (i = 0, leni = this.types_by_index.length; i < leni; i++) {
            type = this.types_by_index[i];
            if (type.is_family)
                continue;
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                inst = type.instances[j];
                if (inst.onWindowBlur)
                    inst.onWindowBlur();
                if (!inst.behavior_insts)
                    continue; // single-globals don't have behavior_insts
                for (k = 0, lenk = inst.behavior_insts.length; k < lenk; k++) {
                    binst = inst.behavior_insts[k];
                    if (binst.onWindowBlur)
                        binst.onWindowBlur();
                }
            }
        }
    };
    Runtime.prototype.doChangeLayout = function(changeToLayout) {
        var prev_layout = this.running_layout;
        this.running_layout.stopRunning();
        var i, len, j, lenj, k, lenk, type, inst, binst;
        if (this.glwrap) {
            for (i = 0, len = this.types_by_index.length; i < len; i++) {
                type = this.types_by_index[i];
                if (type.is_family)
                    continue;
                if (type.unloadTextures && (!type.global || type.instances.length === 0) && changeToLayout.initial_types.indexOf(type) === -1) {
                    type.unloadTextures();
                }
            }
        }
        if (prev_layout == changeToLayout)
            cr.clearArray(this.system.waits);
        cr.clearArray(this.registered_collisions);
        this.runLayoutChangeMethods(true);
        changeToLayout.startRunning();
        this.runLayoutChangeMethods(false);
        this.redraw = true;
        this.layout_first_tick = true;
        this.ClearDeathRow();
    };
    Runtime.prototype.runLayoutChangeMethods = function(isBeforeChange) {
        var i, len, beh, type, j, lenj, inst, k, lenk, binst;
        for (i = 0, len = this.behaviors.length; i < len; i++) {
            beh = this.behaviors[i];
            if (isBeforeChange) {
                if (beh.onBeforeLayoutChange)
                    beh.onBeforeLayoutChange();
            } else {
                if (beh.onLayoutChange)
                    beh.onLayoutChange();
            }
        }
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            type = this.types_by_index[i];
            if (!type.global && !type.plugin.singleglobal)
                continue;
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                inst = type.instances[j];
                if (isBeforeChange) {
                    if (inst.onBeforeLayoutChange)
                        inst.onBeforeLayoutChange();
                } else {
                    if (inst.onLayoutChange)
                        inst.onLayoutChange();
                }
                if (inst.behavior_insts) {
                    for (k = 0, lenk = inst.behavior_insts.length; k < lenk; k++) {
                        binst = inst.behavior_insts[k];
                        if (isBeforeChange) {
                            if (binst.onBeforeLayoutChange)
                                binst.onBeforeLayoutChange();
                        } else {
                            if (binst.onLayoutChange)
                                binst.onLayoutChange();
                        }
                    }
                }
            }
        }
    };
    Runtime.prototype.pretickMe = function(inst) {
        this.objects_to_pretick.add(inst);
    };
    Runtime.prototype.unpretickMe = function(inst) {
        this.objects_to_pretick.remove(inst);
    };
    Runtime.prototype.tickMe = function(inst) {
        this.objects_to_tick.add(inst);
    };
    Runtime.prototype.untickMe = function(inst) {
        this.objects_to_tick.remove(inst);
    };
    Runtime.prototype.tick2Me = function(inst) {
        this.objects_to_tick2.add(inst);
    };
    Runtime.prototype.untick2Me = function(inst) {
        this.objects_to_tick2.remove(inst);
    };
    Runtime.prototype.getDt = function(inst) {
        if (!inst || inst.my_timescale === -1.0)
            return this.dt;
        return this.dt1 * inst.my_timescale;
    };
    Runtime.prototype.draw = function() {
        this.running_layout.draw(this.ctx);
        if (this.isDirectCanvas)
            this.ctx["present"]();
    };
    Runtime.prototype.drawGL = function() {
        if (this.enableFrontToBack) {
            this.earlyz_index = 1; // start from front, 1-based to avoid exactly equalling near plane Z value
            this.running_layout.drawGL_earlyZPass(this.glwrap);
        }
        this.running_layout.drawGL(this.glwrap);
        this.glwrap.present();
    };
    Runtime.prototype.addDestroyCallback = function(f) {
        if (f)
            this.destroycallbacks.push(f);
    };
    Runtime.prototype.removeDestroyCallback = function(f) {
        cr.arrayFindRemove(this.destroycallbacks, f);
    };
    Runtime.prototype.getObjectByUID = function(uid_) {;
        var uidstr = uid_.toString();
        if (this.objectsByUid.hasOwnProperty(uidstr))
            return this.objectsByUid[uidstr];
        else
            return null;
    };
    var objectset_cache = [];

    function alloc_objectset() {
        if (objectset_cache.length)
            return objectset_cache.pop();
        else
            return new cr.ObjectSet();
    };

    function free_objectset(s) {
        s.clear();
        objectset_cache.push(s);
    };
    Runtime.prototype.DestroyInstance = function(inst) {
        var i, len;
        var type = inst.type;
        var typename = type.name;
        var has_typename = this.deathRow.hasOwnProperty(typename);
        var obj_set = null;
        if (has_typename) {
            obj_set = this.deathRow[typename];
            if (obj_set.contains(inst))
                return; // already had DestroyInstance called
        } else {
            obj_set = alloc_objectset();
            this.deathRow[typename] = obj_set;
        }
        obj_set.add(inst);
        this.hasPendingInstances = true;
        if (inst.is_contained) {
            for (i = 0, len = inst.siblings.length; i < len; i++) {
                this.DestroyInstance(inst.siblings[i]);
            }
        }
        if (this.isInClearDeathRow)
            obj_set.values_cache.push(inst);
        if (!this.isEndingLayout) {
            this.isInOnDestroy++; // support recursion
            this.trigger(Object.getPrototypeOf(inst.type.plugin).cnds.OnDestroyed, inst);
            this.isInOnDestroy--;
        }
    };
    Runtime.prototype.ClearDeathRow = function() {
        if (!this.hasPendingInstances)
            return;
        var inst, type, instances;
        var i, j, leni, lenj, obj_set;
        this.isInClearDeathRow = true;
        for (i = 0, leni = this.createRow.length; i < leni; ++i) {
            inst = this.createRow[i];
            type = inst.type;
            type.instances.push(inst);
            for (j = 0, lenj = type.families.length; j < lenj; ++j) {
                type.families[j].instances.push(inst);
                type.families[j].stale_iids = true;
            }
        }
        cr.clearArray(this.createRow);
        this.IterateDeathRow(); // moved to separate function so for-in performance doesn't hobble entire function
        cr.wipe(this.deathRow); // all objectsets have already been recycled
        this.isInClearDeathRow = false;
        this.hasPendingInstances = false;
    };
    Runtime.prototype.IterateDeathRow = function() {
        for (var p in this.deathRow) {
            if (this.deathRow.hasOwnProperty(p)) {
                this.ClearDeathRowForType(this.deathRow[p]);
            }
        }
    };
    Runtime.prototype.ClearDeathRowForType = function(obj_set) {
        var arr = obj_set.valuesRef(); // get array of items from set
        ;
        var type = arr[0].type;;;
        var i, len, j, lenj, w, f, layer_instances, inst;
        cr.arrayRemoveAllFromObjectSet(type.instances, obj_set);
        type.stale_iids = true;
        if (type.instances.length === 0)
            type.any_instance_parallaxed = false;
        for (i = 0, len = type.families.length; i < len; ++i) {
            f = type.families[i];
            cr.arrayRemoveAllFromObjectSet(f.instances, obj_set);
            f.stale_iids = true;
        }
        for (i = 0, len = this.system.waits.length; i < len; ++i) {
            w = this.system.waits[i];
            if (w.sols.hasOwnProperty(type.index))
                cr.arrayRemoveAllFromObjectSet(w.sols[type.index].insts, obj_set);
            if (!type.is_family) {
                for (j = 0, lenj = type.families.length; j < lenj; ++j) {
                    f = type.families[j];
                    if (w.sols.hasOwnProperty(f.index))
                        cr.arrayRemoveAllFromObjectSet(w.sols[f.index].insts, obj_set);
                }
            }
        }
        var first_layer = arr[0].layer;
        if (first_layer) {
            if (first_layer.useRenderCells) {
                layer_instances = first_layer.instances;
                for (i = 0, len = layer_instances.length; i < len; ++i) {
                    inst = layer_instances[i];
                    if (!obj_set.contains(inst))
                        continue; // not destroying this instance
                    inst.update_bbox();
                    first_layer.render_grid.update(inst, inst.rendercells, null);
                    inst.rendercells.set(0, 0, -1, -1);
                }
            }
            cr.arrayRemoveAllFromObjectSet(first_layer.instances, obj_set);
            first_layer.setZIndicesStaleFrom(0);
        }
        for (i = 0; i < arr.length; ++i) // check array length every time in case it changes
        {
            this.ClearDeathRowForSingleInstance(arr[i], type);
        }
        free_objectset(obj_set);
        this.redraw = true;
    };
    Runtime.prototype.ClearDeathRowForSingleInstance = function(inst, type) {
        var i, len, binst;
        for (i = 0, len = this.destroycallbacks.length; i < len; ++i)
            this.destroycallbacks[i](inst);
        if (inst.collcells) {
            type.collision_grid.update(inst, inst.collcells, null);
        }
        var layer = inst.layer;
        if (layer) {
            layer.removeFromInstanceList(inst, true); // remove from both instance list and render grid
        }
        if (inst.behavior_insts) {
            for (i = 0, len = inst.behavior_insts.length; i < len; ++i) {
                binst = inst.behavior_insts[i];
                if (binst.onDestroy)
                    binst.onDestroy();
                binst.behavior.my_instances.remove(inst);
            }
        }
        this.objects_to_pretick.remove(inst);
        this.objects_to_tick.remove(inst);
        this.objects_to_tick2.remove(inst);
        if (inst.onDestroy)
            inst.onDestroy();
        if (this.objectsByUid.hasOwnProperty(inst.uid.toString()))
            delete this.objectsByUid[inst.uid.toString()];
        this.objectcount--;
        if (type.deadCache.length < 100)
            type.deadCache.push(inst);
    };
    Runtime.prototype.createInstance = function(type, layer, sx, sy) {
        if (type.is_family) {
            var i = cr.floor(Math.random() * type.members.length);
            return this.createInstance(type.members[i], layer, sx, sy);
        }
        if (!type.default_instance) {
            return null;
        }
        return this.createInstanceFromInit(type.default_instance, layer, false, sx, sy, false);
    };
    var all_behaviors = [];
    Runtime.prototype.createInstanceFromInit = function(initial_inst, layer, is_startup_instance, sx, sy, skip_siblings) {
        var i, len, j, lenj, p, effect_fallback, x, y;
        if (!initial_inst)
            return null;
        var type = this.types_by_index[initial_inst[1]];;;
        var is_world = type.plugin.is_world;;
        if (this.isloading && is_world && !type.isOnLoaderLayout)
            return null;
        if (is_world && !this.glwrap && initial_inst[0][11] === 11)
            return null;
        var original_layer = layer;
        if (!is_world)
            layer = null;
        var inst;
        if (type.deadCache.length) {
            inst = type.deadCache.pop();
            inst.recycled = true;
            type.plugin.Instance.call(inst, type);
        } else {
            inst = new type.plugin.Instance(type);
            inst.recycled = false;
        }
        if (is_startup_instance && !skip_siblings && !this.objectsByUid.hasOwnProperty(initial_inst[2].toString()))
            inst.uid = initial_inst[2];
        else
            inst.uid = this.next_uid++;
        this.objectsByUid[inst.uid.toString()] = inst;
        inst.puid = this.next_puid++;
        inst.iid = type.instances.length;
        for (i = 0, len = this.createRow.length; i < len; ++i) {
            if (this.createRow[i].type === type)
                inst.iid++;
        }
        inst.get_iid = cr.inst_get_iid;
        inst.toString = cr.inst_toString;
        var initial_vars = initial_inst[3];
        if (inst.recycled) {
            cr.wipe(inst.extra);
        } else {
            inst.extra = {};
            if (typeof cr_is_preview !== "undefined") {
                inst.instance_var_names = [];
                inst.instance_var_names.length = initial_vars.length;
                for (i = 0, len = initial_vars.length; i < len; i++)
                    inst.instance_var_names[i] = initial_vars[i][1];
            }
            inst.instance_vars = [];
            inst.instance_vars.length = initial_vars.length;
        }
        for (i = 0, len = initial_vars.length; i < len; i++)
            inst.instance_vars[i] = initial_vars[i][0];
        if (is_world) {
            var wm = initial_inst[0];;
            inst.x = cr.is_undefined(sx) ? wm[0] : sx;
            inst.y = cr.is_undefined(sy) ? wm[1] : sy;
            inst.z = wm[2];
            inst.width = wm[3];
            inst.height = wm[4];
            inst.depth = wm[5];
            inst.angle = wm[6];
            inst.opacity = wm[7];
            inst.hotspotX = wm[8];
            inst.hotspotY = wm[9];
            inst.blend_mode = wm[10];
            effect_fallback = wm[11];
            if (!this.glwrap && type.effect_types.length) // no WebGL renderer and shaders used
                inst.blend_mode = effect_fallback; // use fallback blend mode - destroy mode was handled above
            inst.compositeOp = cr.effectToCompositeOp(inst.blend_mode);
            if (this.gl)
                cr.setGLBlend(inst, inst.blend_mode, this.gl);
            if (inst.recycled) {
                for (i = 0, len = wm[12].length; i < len; i++) {
                    for (j = 0, lenj = wm[12][i].length; j < lenj; j++)
                        inst.effect_params[i][j] = wm[12][i][j];
                }
                inst.bbox.set(0, 0, 0, 0);
                inst.collcells.set(0, 0, -1, -1);
                inst.rendercells.set(0, 0, -1, -1);
                inst.bquad.set_from_rect(inst.bbox);
                cr.clearArray(inst.bbox_changed_callbacks);
            } else {
                inst.effect_params = wm[12].slice(0);
                for (i = 0, len = inst.effect_params.length; i < len; i++)
                    inst.effect_params[i] = wm[12][i].slice(0);
                inst.active_effect_types = [];
                inst.active_effect_flags = [];
                inst.active_effect_flags.length = type.effect_types.length;
                inst.bbox = new cr.rect(0, 0, 0, 0);
                inst.collcells = new cr.rect(0, 0, -1, -1);
                inst.rendercells = new cr.rect(0, 0, -1, -1);
                inst.bquad = new cr.quad();
                inst.bbox_changed_callbacks = [];
                inst.set_bbox_changed = cr.set_bbox_changed;
                inst.add_bbox_changed_callback = cr.add_bbox_changed_callback;
                inst.contains_pt = cr.inst_contains_pt;
                inst.update_bbox = cr.update_bbox;
                inst.update_render_cell = cr.update_render_cell;
                inst.update_collision_cell = cr.update_collision_cell;
                inst.get_zindex = cr.inst_get_zindex;
            }
            inst.tilemap_exists = false;
            inst.tilemap_width = 0;
            inst.tilemap_height = 0;
            inst.tilemap_data = null;
            if (wm.length === 14) {
                inst.tilemap_exists = true;
                inst.tilemap_width = wm[13][0];
                inst.tilemap_height = wm[13][1];
                inst.tilemap_data = wm[13][2];
            }
            for (i = 0, len = type.effect_types.length; i < len; i++)
                inst.active_effect_flags[i] = true;
            inst.shaders_preserve_opaqueness = true;
            inst.updateActiveEffects = cr.inst_updateActiveEffects;
            inst.updateActiveEffects();
            inst.uses_shaders = !!inst.active_effect_types.length;
            inst.bbox_changed = true;
            inst.cell_changed = true;
            type.any_cell_changed = true;
            inst.visible = true;
            inst.my_timescale = -1.0;
            inst.layer = layer;
            inst.zindex = layer.instances.length; // will be placed at top of current layer
            inst.earlyz_index = 0;
            if (typeof inst.collision_poly === "undefined")
                inst.collision_poly = null;
            inst.collisionsEnabled = true;
            this.redraw = true;
        }
        var initial_props, binst;
        cr.clearArray(all_behaviors);
        for (i = 0, len = type.families.length; i < len; i++) {
            all_behaviors.push.apply(all_behaviors, type.families[i].behaviors);
        }
        all_behaviors.push.apply(all_behaviors, type.behaviors);
        if (inst.recycled) {
            for (i = 0, len = all_behaviors.length; i < len; i++) {
                var btype = all_behaviors[i];
                binst = inst.behavior_insts[i];
                binst.recycled = true;
                btype.behavior.Instance.call(binst, btype, inst);
                initial_props = initial_inst[4][i];
                for (j = 0, lenj = initial_props.length; j < lenj; j++)
                    binst.properties[j] = initial_props[j];
                binst.onCreate();
                btype.behavior.my_instances.add(inst);
            }
        } else {
            inst.behavior_insts = [];
            for (i = 0, len = all_behaviors.length; i < len; i++) {
                var btype = all_behaviors[i];
                var binst = new btype.behavior.Instance(btype, inst);
                binst.recycled = false;
                binst.properties = initial_inst[4][i].slice(0);
                binst.onCreate();
                cr.seal(binst);
                inst.behavior_insts.push(binst);
                btype.behavior.my_instances.add(inst);
            }
        }
        initial_props = initial_inst[5];
        if (inst.recycled) {
            for (i = 0, len = initial_props.length; i < len; i++)
                inst.properties[i] = initial_props[i];
        } else
            inst.properties = initial_props.slice(0);
        this.createRow.push(inst);
        this.hasPendingInstances = true;
        if (layer) {;
            layer.appendToInstanceList(inst, true);
            if (layer.parallaxX !== 1 || layer.parallaxY !== 1)
                type.any_instance_parallaxed = true;
        }
        this.objectcount++;
        if (type.is_contained) {
            inst.is_contained = true;
            if (inst.recycled)
                cr.clearArray(inst.siblings);
            else
                inst.siblings = []; // note: should not include self in siblings
            if (!is_startup_instance && !skip_siblings) // layout links initial instances
            {
                for (i = 0, len = type.container.length; i < len; i++) {
                    if (type.container[i] === type)
                        continue;
                    if (!type.container[i].default_instance) {
                        return null;
                    }
                    inst.siblings.push(this.createInstanceFromInit(type.container[i].default_instance, original_layer, false, is_world ? inst.x : sx, is_world ? inst.y : sy, true));
                }
                for (i = 0, len = inst.siblings.length; i < len; i++) {
                    inst.siblings[i].siblings.push(inst);
                    for (j = 0; j < len; j++) {
                        if (i !== j)
                            inst.siblings[i].siblings.push(inst.siblings[j]);
                    }
                }
            }
        } else {
            inst.is_contained = false;
            inst.siblings = null;
        }
        inst.onCreate();
        if (!inst.recycled)
            cr.seal(inst);
        for (i = 0, len = inst.behavior_insts.length; i < len; i++) {
            if (inst.behavior_insts[i].postCreate)
                inst.behavior_insts[i].postCreate();
        }
        return inst;
    };
    Runtime.prototype.getLayerByName = function(layer_name) {
        var i, len;
        for (i = 0, len = this.running_layout.layers.length; i < len; i++) {
            var layer = this.running_layout.layers[i];
            if (cr.equals_nocase(layer.name, layer_name))
                return layer;
        }
        return null;
    };
    Runtime.prototype.getLayerByNumber = function(index) {
        index = cr.floor(index);
        if (index < 0)
            index = 0;
        if (index >= this.running_layout.layers.length)
            index = this.running_layout.layers.length - 1;
        return this.running_layout.layers[index];
    };
    Runtime.prototype.getLayer = function(l) {
        if (cr.is_number(l))
            return this.getLayerByNumber(l);
        else
            return this.getLayerByName(l.toString());
    };
    Runtime.prototype.clearSol = function(solModifiers) {
        var i, len;
        for (i = 0, len = solModifiers.length; i < len; i++) {
            solModifiers[i].getCurrentSol().select_all = true;
        }
    };
    Runtime.prototype.pushCleanSol = function(solModifiers) {
        var i, len;
        for (i = 0, len = solModifiers.length; i < len; i++) {
            solModifiers[i].pushCleanSol();
        }
    };
    Runtime.prototype.pushCopySol = function(solModifiers) {
        var i, len;
        for (i = 0, len = solModifiers.length; i < len; i++) {
            solModifiers[i].pushCopySol();
        }
    };
    Runtime.prototype.popSol = function(solModifiers) {
        var i, len;
        for (i = 0, len = solModifiers.length; i < len; i++) {
            solModifiers[i].popSol();
        }
    };
    Runtime.prototype.updateAllCells = function(type) {
        if (!type.any_cell_changed)
            return; // all instances must already be up-to-date
        var i, len, instances = type.instances;
        for (i = 0, len = instances.length; i < len; ++i) {
            instances[i].update_collision_cell();
        }
        var createRow = this.createRow;
        for (i = 0, len = createRow.length; i < len; ++i) {
            if (createRow[i].type === type)
                createRow[i].update_collision_cell();
        }
        type.any_cell_changed = false;
    };
    Runtime.prototype.getCollisionCandidates = function(layer, rtype, bbox, candidates) {
        var i, len, t;
        var is_parallaxed = (layer ? (layer.parallaxX !== 1 || layer.parallaxY !== 1) : false);
        if (rtype.is_family) {
            for (i = 0, len = rtype.members.length; i < len; ++i) {
                t = rtype.members[i];
                if (is_parallaxed || t.any_instance_parallaxed) {
                    cr.appendArray(candidates, t.instances);
                } else {
                    this.updateAllCells(t);
                    t.collision_grid.queryRange(bbox, candidates);
                }
            }
        } else {
            if (is_parallaxed || rtype.any_instance_parallaxed) {
                cr.appendArray(candidates, rtype.instances);
            } else {
                this.updateAllCells(rtype);
                rtype.collision_grid.queryRange(bbox, candidates);
            }
        }
    };
    Runtime.prototype.getTypesCollisionCandidates = function(layer, types, bbox, candidates) {
        var i, len;
        for (i = 0, len = types.length; i < len; ++i) {
            this.getCollisionCandidates(layer, types[i], bbox, candidates);
        }
    };
    Runtime.prototype.getSolidCollisionCandidates = function(layer, bbox, candidates) {
        var solid = this.getSolidBehavior();
        if (!solid)
            return null;
        this.getTypesCollisionCandidates(layer, solid.my_types, bbox, candidates);
    };
    Runtime.prototype.getJumpthruCollisionCandidates = function(layer, bbox, candidates) {
        var jumpthru = this.getJumpthruBehavior();
        if (!jumpthru)
            return null;
        this.getTypesCollisionCandidates(layer, jumpthru.my_types, bbox, candidates);
    };
    Runtime.prototype.testAndSelectCanvasPointOverlap = function(type, ptx, pty, inverted) {
        var sol = type.getCurrentSol();
        var i, j, inst, len;
        var orblock = this.getCurrentEventStack().current_event.orblock;
        var lx, ly, arr;
        if (sol.select_all) {
            if (!inverted) {
                sol.select_all = false;
                cr.clearArray(sol.instances); // clear contents
            }
            for (i = 0, len = type.instances.length; i < len; i++) {
                inst = type.instances[i];
                inst.update_bbox();
                lx = inst.layer.canvasToLayer(ptx, pty, true);
                ly = inst.layer.canvasToLayer(ptx, pty, false);
                if (inst.contains_pt(lx, ly)) {
                    if (inverted)
                        return false;
                    else
                        sol.instances.push(inst);
                } else if (orblock)
                    sol.else_instances.push(inst);
            }
        } else {
            j = 0;
            arr = (orblock ? sol.else_instances : sol.instances);
            for (i = 0, len = arr.length; i < len; i++) {
                inst = arr[i];
                inst.update_bbox();
                lx = inst.layer.canvasToLayer(ptx, pty, true);
                ly = inst.layer.canvasToLayer(ptx, pty, false);
                if (inst.contains_pt(lx, ly)) {
                    if (inverted)
                        return false;
                    else if (orblock)
                        sol.instances.push(inst);
                    else {
                        sol.instances[j] = sol.instances[i];
                        j++;
                    }
                }
            }
            if (!inverted)
                arr.length = j;
        }
        type.applySolToContainer();
        if (inverted)
            return true; // did not find anything overlapping
        else
            return sol.hasObjects();
    };
    Runtime.prototype.testOverlap = function(a, b) {
        if (!a || !b || a === b || !a.collisionsEnabled || !b.collisionsEnabled)
            return false;
        a.update_bbox();
        b.update_bbox();
        var layera = a.layer;
        var layerb = b.layer;
        var different_layers = (layera !== layerb && (layera.parallaxX !== layerb.parallaxX || layerb.parallaxY !== layerb.parallaxY || layera.scale !== layerb.scale || layera.angle !== layerb.angle || layera.zoomRate !== layerb.zoomRate));
        var i, len, i2, i21, x, y, haspolya, haspolyb, polya, polyb;
        if (!different_layers) // same layers: easy check
        {
            if (!a.bbox.intersects_rect(b.bbox))
                return false;
            if (!a.bquad.intersects_quad(b.bquad))
                return false;
            if (a.tilemap_exists && b.tilemap_exists)
                return false;
            if (a.tilemap_exists)
                return this.testTilemapOverlap(a, b);
            if (b.tilemap_exists)
                return this.testTilemapOverlap(b, a);
            haspolya = (a.collision_poly && !a.collision_poly.is_empty());
            haspolyb = (b.collision_poly && !b.collision_poly.is_empty());
            if (!haspolya && !haspolyb)
                return true;
            if (haspolya) {
                a.collision_poly.cache_poly(a.width, a.height, a.angle);
                polya = a.collision_poly;
            } else {
                this.temp_poly.set_from_quad(a.bquad, a.x, a.y, a.width, a.height);
                polya = this.temp_poly;
            }
            if (haspolyb) {
                b.collision_poly.cache_poly(b.width, b.height, b.angle);
                polyb = b.collision_poly;
            } else {
                this.temp_poly.set_from_quad(b.bquad, b.x, b.y, b.width, b.height);
                polyb = this.temp_poly;
            }
            return polya.intersects_poly(polyb, b.x - a.x, b.y - a.y);
        } else // different layers: need to do full translated check
        {
            haspolya = (a.collision_poly && !a.collision_poly.is_empty());
            haspolyb = (b.collision_poly && !b.collision_poly.is_empty());
            if (haspolya) {
                a.collision_poly.cache_poly(a.width, a.height, a.angle);
                this.temp_poly.set_from_poly(a.collision_poly);
            } else {
                this.temp_poly.set_from_quad(a.bquad, a.x, a.y, a.width, a.height);
            }
            polya = this.temp_poly;
            if (haspolyb) {
                b.collision_poly.cache_poly(b.width, b.height, b.angle);
                this.temp_poly2.set_from_poly(b.collision_poly);
            } else {
                this.temp_poly2.set_from_quad(b.bquad, b.x, b.y, b.width, b.height);
            }
            polyb = this.temp_poly2;
            for (i = 0, len = polya.pts_count; i < len; i++) {
                i2 = i * 2;
                i21 = i2 + 1;
                x = polya.pts_cache[i2];
                y = polya.pts_cache[i21];
                polya.pts_cache[i2] = layera.layerToCanvas(x + a.x, y + a.y, true);
                polya.pts_cache[i21] = layera.layerToCanvas(x + a.x, y + a.y, false);
            }
            polya.update_bbox();
            for (i = 0, len = polyb.pts_count; i < len; i++) {
                i2 = i * 2;
                i21 = i2 + 1;
                x = polyb.pts_cache[i2];
                y = polyb.pts_cache[i21];
                polyb.pts_cache[i2] = layerb.layerToCanvas(x + b.x, y + b.y, true);
                polyb.pts_cache[i21] = layerb.layerToCanvas(x + b.x, y + b.y, false);
            }
            polyb.update_bbox();
            return polya.intersects_poly(polyb, 0, 0);
        }
    };
    var tmpQuad = new cr.quad();
    var tmpRect = new cr.rect(0, 0, 0, 0);
    var collrect_candidates = [];
    Runtime.prototype.testTilemapOverlap = function(tm, a) {
        var i, len, c, rc;
        var bbox = a.bbox;
        var tmx = tm.x;
        var tmy = tm.y;
        tm.getCollisionRectCandidates(bbox, collrect_candidates);
        var collrects = collrect_candidates;
        var haspolya = (a.collision_poly && !a.collision_poly.is_empty());
        for (i = 0, len = collrects.length; i < len; ++i) {
            c = collrects[i];
            rc = c.rc;
            if (bbox.intersects_rect_off(rc, tmx, tmy)) {
                tmpQuad.set_from_rect(rc);
                tmpQuad.offset(tmx, tmy);
                if (tmpQuad.intersects_quad(a.bquad)) {
                    if (haspolya) {
                        a.collision_poly.cache_poly(a.width, a.height, a.angle);
                        if (c.poly) {
                            if (c.poly.intersects_poly(a.collision_poly, a.x - (tmx + rc.left), a.y - (tmy + rc.top))) {
                                cr.clearArray(collrect_candidates);
                                return true;
                            }
                        } else {
                            this.temp_poly.set_from_quad(tmpQuad, 0, 0, rc.right - rc.left, rc.bottom - rc.top);
                            if (this.temp_poly.intersects_poly(a.collision_poly, a.x, a.y)) {
                                cr.clearArray(collrect_candidates);
                                return true;
                            }
                        }
                    } else {
                        if (c.poly) {
                            this.temp_poly.set_from_quad(a.bquad, 0, 0, a.width, a.height);
                            if (c.poly.intersects_poly(this.temp_poly, -(tmx + rc.left), -(tmy + rc.top))) {
                                cr.clearArray(collrect_candidates);
                                return true;
                            }
                        } else {
                            cr.clearArray(collrect_candidates);
                            return true;
                        }
                    }
                }
            }
        }
        cr.clearArray(collrect_candidates);
        return false;
    };
    Runtime.prototype.testRectOverlap = function(r, b) {
        if (!b || !b.collisionsEnabled)
            return false;
        b.update_bbox();
        var layerb = b.layer;
        var haspolyb, polyb;
        if (!b.bbox.intersects_rect(r))
            return false;
        if (b.tilemap_exists) {
            b.getCollisionRectCandidates(r, collrect_candidates);
            var collrects = collrect_candidates;
            var i, len, c, tilerc;
            var tmx = b.x;
            var tmy = b.y;
            for (i = 0, len = collrects.length; i < len; ++i) {
                c = collrects[i];
                tilerc = c.rc;
                if (r.intersects_rect_off(tilerc, tmx, tmy)) {
                    if (c.poly) {
                        this.temp_poly.set_from_rect(r, 0, 0);
                        if (c.poly.intersects_poly(this.temp_poly, -(tmx + tilerc.left), -(tmy + tilerc.top))) {
                            cr.clearArray(collrect_candidates);
                            return true;
                        }
                    } else {
                        cr.clearArray(collrect_candidates);
                        return true;
                    }
                }
            }
            cr.clearArray(collrect_candidates);
            return false;
        } else {
            tmpQuad.set_from_rect(r);
            if (!b.bquad.intersects_quad(tmpQuad))
                return false;
            haspolyb = (b.collision_poly && !b.collision_poly.is_empty());
            if (!haspolyb)
                return true;
            b.collision_poly.cache_poly(b.width, b.height, b.angle);
            tmpQuad.offset(-r.left, -r.top);
            this.temp_poly.set_from_quad(tmpQuad, 0, 0, 1, 1);
            return b.collision_poly.intersects_poly(this.temp_poly, r.left - b.x, r.top - b.y);
        }
    };
    Runtime.prototype.testSegmentOverlap = function(x1, y1, x2, y2, b) {
        if (!b || !b.collisionsEnabled)
            return false;
        b.update_bbox();
        var layerb = b.layer;
        var haspolyb, polyb;
        tmpRect.set(cr.min(x1, x2), cr.min(y1, y2), cr.max(x1, x2), cr.max(y1, y2));
        if (!b.bbox.intersects_rect(tmpRect))
            return false;
        if (b.tilemap_exists) {
            b.getCollisionRectCandidates(tmpRect, collrect_candidates);
            var collrects = collrect_candidates;
            var i, len, c, tilerc;
            var tmx = b.x;
            var tmy = b.y;
            for (i = 0, len = collrects.length; i < len; ++i) {
                c = collrects[i];
                tilerc = c.rc;
                if (tmpRect.intersects_rect_off(tilerc, tmx, tmy)) {
                    tmpQuad.set_from_rect(tilerc);
                    tmpQuad.offset(tmx, tmy);
                    if (tmpQuad.intersects_segment(x1, y1, x2, y2)) {
                        if (c.poly) {
                            if (c.poly.intersects_segment(tmx + tilerc.left, tmy + tilerc.top, x1, y1, x2, y2)) {
                                cr.clearArray(collrect_candidates);
                                return true;
                            }
                        } else {
                            cr.clearArray(collrect_candidates);
                            return true;
                        }
                    }
                }
            }
            cr.clearArray(collrect_candidates);
            return false;
        } else {
            if (!b.bquad.intersects_segment(x1, y1, x2, y2))
                return false;
            haspolyb = (b.collision_poly && !b.collision_poly.is_empty());
            if (!haspolyb)
                return true;
            b.collision_poly.cache_poly(b.width, b.height, b.angle);
            return b.collision_poly.intersects_segment(b.x, b.y, x1, y1, x2, y2);
        }
    };
    Runtime.prototype.typeHasBehavior = function(t, b) {
        if (!b)
            return false;
        var i, len, j, lenj, f;
        for (i = 0, len = t.behaviors.length; i < len; i++) {
            if (t.behaviors[i].behavior instanceof b)
                return true;
        }
        if (!t.is_family) {
            for (i = 0, len = t.families.length; i < len; i++) {
                f = t.families[i];
                for (j = 0, lenj = f.behaviors.length; j < lenj; j++) {
                    if (f.behaviors[j].behavior instanceof b)
                        return true;
                }
            }
        }
        return false;
    };
    Runtime.prototype.typeHasNoSaveBehavior = function(t) {
        return this.typeHasBehavior(t, cr.behaviors.NoSave);
    };
    Runtime.prototype.typeHasPersistBehavior = function(t) {
        return this.typeHasBehavior(t, cr.behaviors.Persist);
    };
    Runtime.prototype.getSolidBehavior = function() {
        return this.solidBehavior;
    };
    Runtime.prototype.getJumpthruBehavior = function() {
        return this.jumpthruBehavior;
    };
    var candidates = [];
    Runtime.prototype.testOverlapSolid = function(inst) {
        var i, len, s;
        inst.update_bbox();
        this.getSolidCollisionCandidates(inst.layer, inst.bbox, candidates);
        for (i = 0, len = candidates.length; i < len; ++i) {
            s = candidates[i];
            if (!s.extra["solidEnabled"])
                continue;
            if (this.testOverlap(inst, s)) {
                cr.clearArray(candidates);
                return s;
            }
        }
        cr.clearArray(candidates);
        return null;
    };
    Runtime.prototype.testRectOverlapSolid = function(r) {
        var i, len, s;
        this.getSolidCollisionCandidates(null, r, candidates);
        for (i = 0, len = candidates.length; i < len; ++i) {
            s = candidates[i];
            if (!s.extra["solidEnabled"])
                continue;
            if (this.testRectOverlap(r, s)) {
                cr.clearArray(candidates);
                return s;
            }
        }
        cr.clearArray(candidates);
        return null;
    };
    var jumpthru_array_ret = [];
    Runtime.prototype.testOverlapJumpThru = function(inst, all) {
        var ret = null;
        if (all) {
            ret = jumpthru_array_ret;
            cr.clearArray(ret);
        }
        inst.update_bbox();
        this.getJumpthruCollisionCandidates(inst.layer, inst.bbox, candidates);
        var i, len, j;
        for (i = 0, len = candidates.length; i < len; ++i) {
            j = candidates[i];
            if (!j.extra["jumpthruEnabled"])
                continue;
            if (this.testOverlap(inst, j)) {
                if (all)
                    ret.push(j);
                else {
                    cr.clearArray(candidates);
                    return j;
                }
            }
        }
        cr.clearArray(candidates);
        return ret;
    };
    Runtime.prototype.pushOutSolid = function(inst, xdir, ydir, dist, include_jumpthrus, specific_jumpthru) {
        var push_dist = dist || 50;
        var oldx = inst.x
        var oldy = inst.y;
        var i;
        var last_overlapped = null,
            secondlast_overlapped = null;
        for (i = 0; i < push_dist; i++) {
            inst.x = (oldx + (xdir * i));
            inst.y = (oldy + (ydir * i));
            inst.set_bbox_changed();
            if (!this.testOverlap(inst, last_overlapped)) {
                last_overlapped = this.testOverlapSolid(inst);
                if (last_overlapped)
                    secondlast_overlapped = last_overlapped;
                if (!last_overlapped) {
                    if (include_jumpthrus) {
                        if (specific_jumpthru)
                            last_overlapped = (this.testOverlap(inst, specific_jumpthru) ? specific_jumpthru : null);
                        else
                            last_overlapped = this.testOverlapJumpThru(inst);
                        if (last_overlapped)
                            secondlast_overlapped = last_overlapped;
                    }
                    if (!last_overlapped) {
                        if (secondlast_overlapped)
                            this.pushInFractional(inst, xdir, ydir, secondlast_overlapped, 16);
                        return true;
                    }
                }
            }
        }
        inst.x = oldx;
        inst.y = oldy;
        inst.set_bbox_changed();
        return false;
    };
    Runtime.prototype.pushOutSolidAxis = function(inst, xdir, ydir, dist) {
        dist = dist || 50;
        var oldX = inst.x;
        var oldY = inst.y;
        var lastOverlapped = null;
        var secondLastOverlapped = null;
        var i, which, sign;
        for (i = 0; i < dist; ++i) {
            for (which = 0; which < 2; ++which) {
                sign = which * 2 - 1; // -1 or 1
                inst.x = oldX + (xdir * i * sign);
                inst.y = oldY + (ydir * i * sign);
                inst.set_bbox_changed();
                if (!this.testOverlap(inst, lastOverlapped)) {
                    lastOverlapped = this.testOverlapSolid(inst);
                    if (lastOverlapped) {
                        secondLastOverlapped = lastOverlapped;
                    } else {
                        if (secondLastOverlapped)
                            this.pushInFractional(inst, xdir * sign, ydir * sign, secondLastOverlapped, 16);
                        return true;
                    }
                }
            }
        }
        inst.x = oldX;
        inst.y = oldY;
        inst.set_bbox_changed();
        return false;
    };
    Runtime.prototype.pushOut = function(inst, xdir, ydir, dist, otherinst) {
        var push_dist = dist || 50;
        var oldx = inst.x
        var oldy = inst.y;
        var i;
        for (i = 0; i < push_dist; i++) {
            inst.x = (oldx + (xdir * i));
            inst.y = (oldy + (ydir * i));
            inst.set_bbox_changed();
            if (!this.testOverlap(inst, otherinst))
                return true;
        }
        inst.x = oldx;
        inst.y = oldy;
        inst.set_bbox_changed();
        return false;
    };
    Runtime.prototype.pushInFractional = function(inst, xdir, ydir, obj, limit) {
        var divisor = 2;
        var frac;
        var forward = false;
        var overlapping = false;
        var bestx = inst.x;
        var besty = inst.y;
        while (divisor <= limit) {
            frac = 1 / divisor;
            divisor *= 2;
            inst.x += xdir * frac * (forward ? 1 : -1);
            inst.y += ydir * frac * (forward ? 1 : -1);
            inst.set_bbox_changed();
            if (this.testOverlap(inst, obj)) {
                forward = true;
                overlapping = true;
            } else {
                forward = false;
                overlapping = false;
                bestx = inst.x;
                besty = inst.y;
            }
        }
        if (overlapping) {
            inst.x = bestx;
            inst.y = besty;
            inst.set_bbox_changed();
        }
    };
    Runtime.prototype.pushOutSolidNearest = function(inst, max_dist_) {
        var max_dist = (cr.is_undefined(max_dist_) ? 100 : max_dist_);
        var dist = 0;
        var oldx = inst.x
        var oldy = inst.y;
        var dir = 0;
        var dx = 0,
            dy = 0;
        var last_overlapped = this.testOverlapSolid(inst);
        if (!last_overlapped)
            return true; // already clear of solids
        while (dist <= max_dist) {
            switch (dir) {
                case 0:
                    dx = 0;
                    dy = -1;
                    dist++;
                    break;
                case 1:
                    dx = 1;
                    dy = -1;
                    break;
                case 2:
                    dx = 1;
                    dy = 0;
                    break;
                case 3:
                    dx = 1;
                    dy = 1;
                    break;
                case 4:
                    dx = 0;
                    dy = 1;
                    break;
                case 5:
                    dx = -1;
                    dy = 1;
                    break;
                case 6:
                    dx = -1;
                    dy = 0;
                    break;
                case 7:
                    dx = -1;
                    dy = -1;
                    break;
            }
            dir = (dir + 1) % 8;
            inst.x = cr.floor(oldx + (dx * dist));
            inst.y = cr.floor(oldy + (dy * dist));
            inst.set_bbox_changed();
            if (!this.testOverlap(inst, last_overlapped)) {
                last_overlapped = this.testOverlapSolid(inst);
                if (!last_overlapped)
                    return true;
            }
        }
        inst.x = oldx;
        inst.y = oldy;
        inst.set_bbox_changed();
        return false;
    };
    Runtime.prototype.registerCollision = function(a, b) {
        if (!a.collisionsEnabled || !b.collisionsEnabled)
            return;
        this.registered_collisions.push([a, b]);
    };
    Runtime.prototype.addRegisteredCollisionCandidates = function(inst, otherType, arr) {
        var i, len, r, otherInst;
        for (i = 0, len = this.registered_collisions.length; i < len; ++i) {
            r = this.registered_collisions[i];
            if (r[0] === inst)
                otherInst = r[1];
            else if (r[1] === inst)
                otherInst = r[0];
            else
                continue;
            if (otherType.is_family) {
                if (otherType.members.indexOf(otherType) === -1)
                    continue;
            } else {
                if (otherInst.type !== otherType)
                    continue;
            }
            if (arr.indexOf(otherInst) === -1)
                arr.push(otherInst);
        }
    };
    Runtime.prototype.checkRegisteredCollision = function(a, b) {
        var i, len, x;
        for (i = 0, len = this.registered_collisions.length; i < len; i++) {
            x = this.registered_collisions[i];
            if ((x[0] === a && x[1] === b) || (x[0] === b && x[1] === a))
                return true;
        }
        return false;
    };
    Runtime.prototype.calculateSolidBounceAngle = function(inst, startx, starty, obj) {
        var objx = inst.x;
        var objy = inst.y;
        var radius = cr.max(10, cr.distanceTo(startx, starty, objx, objy));
        var startangle = cr.angleTo(startx, starty, objx, objy);
        var firstsolid = obj || this.testOverlapSolid(inst);
        if (!firstsolid)
            return cr.clamp_angle(startangle + cr.PI);
        var cursolid = firstsolid;
        var i, curangle, anticlockwise_free_angle, clockwise_free_angle;
        var increment = cr.to_radians(5); // 5 degree increments
        for (i = 1; i < 36; i++) {
            curangle = startangle - i * increment;
            inst.x = startx + Math.cos(curangle) * radius;
            inst.y = starty + Math.sin(curangle) * radius;
            inst.set_bbox_changed();
            if (!this.testOverlap(inst, cursolid)) {
                cursolid = obj ? null : this.testOverlapSolid(inst);
                if (!cursolid) {
                    anticlockwise_free_angle = curangle;
                    break;
                }
            }
        }
        if (i === 36)
            anticlockwise_free_angle = cr.clamp_angle(startangle + cr.PI);
        var cursolid = firstsolid;
        for (i = 1; i < 36; i++) {
            curangle = startangle + i * increment;
            inst.x = startx + Math.cos(curangle) * radius;
            inst.y = starty + Math.sin(curangle) * radius;
            inst.set_bbox_changed();
            if (!this.testOverlap(inst, cursolid)) {
                cursolid = obj ? null : this.testOverlapSolid(inst);
                if (!cursolid) {
                    clockwise_free_angle = curangle;
                    break;
                }
            }
        }
        if (i === 36)
            clockwise_free_angle = cr.clamp_angle(startangle + cr.PI);
        inst.x = objx;
        inst.y = objy;
        inst.set_bbox_changed();
        if (clockwise_free_angle === anticlockwise_free_angle)
            return clockwise_free_angle;
        var half_diff = cr.angleDiff(clockwise_free_angle, anticlockwise_free_angle) / 2;
        var normal;
        if (cr.angleClockwise(clockwise_free_angle, anticlockwise_free_angle)) {
            normal = cr.clamp_angle(anticlockwise_free_angle + half_diff + cr.PI);
        } else {
            normal = cr.clamp_angle(clockwise_free_angle + half_diff);
        };
        var vx = Math.cos(startangle);
        var vy = Math.sin(startangle);
        var nx = Math.cos(normal);
        var ny = Math.sin(normal);
        var v_dot_n = vx * nx + vy * ny;
        var rx = vx - 2 * v_dot_n * nx;
        var ry = vy - 2 * v_dot_n * ny;
        return cr.angleTo(0, 0, rx, ry);
    };
    var triggerSheetIndex = -1;
    Runtime.prototype.trigger = function(method, inst, value /* for fast triggers */ ) {;
        if (!this.running_layout)
            return false;
        var sheet = this.running_layout.event_sheet;
        if (!sheet)
            return false; // no event sheet active; nothing to trigger
        var ret = false;
        var r, i, len;
        triggerSheetIndex++;
        var deep_includes = sheet.deep_includes;
        for (i = 0, len = deep_includes.length; i < len; ++i) {
            r = this.triggerOnSheet(method, inst, deep_includes[i], value);
            ret = ret || r;
        }
        r = this.triggerOnSheet(method, inst, sheet, value);
        ret = ret || r;
        triggerSheetIndex--;
        return ret;
    };
    Runtime.prototype.triggerOnSheet = function(method, inst, sheet, value) {
        var ret = false;
        var i, leni, r, families;
        if (!inst) {
            r = this.triggerOnSheetForTypeName(method, inst, "system", sheet, value);
            ret = ret || r;
        } else {
            r = this.triggerOnSheetForTypeName(method, inst, inst.type.name, sheet, value);
            ret = ret || r;
            families = inst.type.families;
            for (i = 0, leni = families.length; i < leni; ++i) {
                r = this.triggerOnSheetForTypeName(method, inst, families[i].name, sheet, value);
                ret = ret || r;
            }
        }
        return ret; // true if anything got triggered
    };
    Runtime.prototype.triggerOnSheetForTypeName = function(method, inst, type_name, sheet, value) {
        var i, leni;
        var ret = false,
            ret2 = false;
        var trig, index;
        var fasttrigger = (typeof value !== "undefined");
        var triggers = (fasttrigger ? sheet.fasttriggers : sheet.triggers);
        var obj_entry = triggers[type_name];
        if (!obj_entry)
            return ret;
        var triggers_list = null;
        for (i = 0, leni = obj_entry.length; i < leni; ++i) {
            if (obj_entry[i].method == method) {
                triggers_list = obj_entry[i].evs;
                break;
            }
        }
        if (!triggers_list)
            return ret;
        var triggers_to_fire;
        if (fasttrigger) {
            triggers_to_fire = triggers_list[value];
        } else {
            triggers_to_fire = triggers_list;
        }
        if (!triggers_to_fire)
            return null;
        for (i = 0, leni = triggers_to_fire.length; i < leni; i++) {
            trig = triggers_to_fire[i][0];
            index = triggers_to_fire[i][1];
            ret2 = this.executeSingleTrigger(inst, type_name, trig, index);
            ret = ret || ret2;
        }
        return ret;
    };
    Runtime.prototype.executeSingleTrigger = function(inst, type_name, trig, index) {
        var i, leni;
        var ret = false;
        this.trigger_depth++;
        var current_event = this.getCurrentEventStack().current_event;
        if (current_event)
            this.pushCleanSol(current_event.solModifiersIncludingParents);
        var isrecursive = (this.trigger_depth > 1); // calling trigger from inside another trigger
        this.pushCleanSol(trig.solModifiersIncludingParents);
        if (isrecursive)
            this.pushLocalVarStack();
        var event_stack = this.pushEventStack(trig);
        event_stack.current_event = trig;
        if (inst) {
            var sol = this.types[type_name].getCurrentSol();
            sol.select_all = false;
            cr.clearArray(sol.instances);
            sol.instances[0] = inst;
            this.types[type_name].applySolToContainer();
        }
        var ok_to_run = true;
        if (trig.parent) {
            var temp_parents_arr = event_stack.temp_parents_arr;
            var cur_parent = trig.parent;
            while (cur_parent) {
                temp_parents_arr.push(cur_parent);
                cur_parent = cur_parent.parent;
            }
            temp_parents_arr.reverse();
            for (i = 0, leni = temp_parents_arr.length; i < leni; i++) {
                if (!temp_parents_arr[i].run_pretrigger()) // parent event failed
                {
                    ok_to_run = false;
                    break;
                }
            }
        }
        if (ok_to_run) {
            this.execcount++;
            if (trig.orblock)
                trig.run_orblocktrigger(index);
            else
                trig.run();
            ret = ret || event_stack.last_event_true;
        }
        this.popEventStack();
        if (isrecursive)
            this.popLocalVarStack();
        this.popSol(trig.solModifiersIncludingParents);
        if (current_event)
            this.popSol(current_event.solModifiersIncludingParents);
        if (this.hasPendingInstances && this.isInOnDestroy === 0 && triggerSheetIndex === 0 && !this.isRunningEvents) {
            this.ClearDeathRow();
        }
        this.trigger_depth--;
        return ret;
    };
    Runtime.prototype.getCurrentCondition = function() {
        var evinfo = this.getCurrentEventStack();
        return evinfo.current_event.conditions[evinfo.cndindex];
    };
    Runtime.prototype.getCurrentConditionObjectType = function() {
        var cnd = this.getCurrentCondition();
        return cnd.type;
    };
    Runtime.prototype.isCurrentConditionFirst = function() {
        var evinfo = this.getCurrentEventStack();
        return evinfo.cndindex === 0;
    };
    Runtime.prototype.getCurrentAction = function() {
        var evinfo = this.getCurrentEventStack();
        return evinfo.current_event.actions[evinfo.actindex];
    };
    Runtime.prototype.pushLocalVarStack = function() {
        this.localvar_stack_index++;
        if (this.localvar_stack_index >= this.localvar_stack.length)
            this.localvar_stack.push([]);
    };
    Runtime.prototype.popLocalVarStack = function() {;
        this.localvar_stack_index--;
    };
    Runtime.prototype.getCurrentLocalVarStack = function() {
        return this.localvar_stack[this.localvar_stack_index];
    };
    Runtime.prototype.pushEventStack = function(cur_event) {
        this.event_stack_index++;
        if (this.event_stack_index >= this.event_stack.length)
            this.event_stack.push(new cr.eventStackFrame());
        var ret = this.getCurrentEventStack();
        ret.reset(cur_event);
        return ret;
    };
    Runtime.prototype.popEventStack = function() {;
        this.event_stack_index--;
    };
    Runtime.prototype.getCurrentEventStack = function() {
        return this.event_stack[this.event_stack_index];
    };
    Runtime.prototype.pushLoopStack = function(name_) {
        this.loop_stack_index++;
        if (this.loop_stack_index >= this.loop_stack.length) {
            this.loop_stack.push(cr.seal({
                name: name_,
                index: 0,
                stopped: false
            }));
        }
        var ret = this.getCurrentLoop();
        ret.name = name_;
        ret.index = 0;
        ret.stopped = false;
        return ret;
    };
    Runtime.prototype.popLoopStack = function() {;
        this.loop_stack_index--;
    };
    Runtime.prototype.getCurrentLoop = function() {
        return this.loop_stack[this.loop_stack_index];
    };
    Runtime.prototype.getEventVariableByName = function(name, scope) {
        var i, leni, j, lenj, sheet, e;
        while (scope) {
            for (i = 0, leni = scope.subevents.length; i < leni; i++) {
                e = scope.subevents[i];
                if (e instanceof cr.eventvariable && cr.equals_nocase(name, e.name))
                    return e;
            }
            scope = scope.parent;
        }
        for (i = 0, leni = this.eventsheets_by_index.length; i < leni; i++) {
            sheet = this.eventsheets_by_index[i];
            for (j = 0, lenj = sheet.events.length; j < lenj; j++) {
                e = sheet.events[j];
                if (e instanceof cr.eventvariable && cr.equals_nocase(name, e.name))
                    return e;
            }
        }
        return null;
    };
    Runtime.prototype.getLayoutBySid = function(sid_) {
        var i, len;
        for (i = 0, len = this.layouts_by_index.length; i < len; i++) {
            if (this.layouts_by_index[i].sid === sid_)
                return this.layouts_by_index[i];
        }
        return null;
    };
    Runtime.prototype.getObjectTypeBySid = function(sid_) {
        var i, len;
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            if (this.types_by_index[i].sid === sid_)
                return this.types_by_index[i];
        }
        return null;
    };
    Runtime.prototype.getGroupBySid = function(sid_) {
        var i, len;
        for (i = 0, len = this.allGroups.length; i < len; i++) {
            if (this.allGroups[i].sid === sid_)
                return this.allGroups[i];
        }
        return null;
    };
    Runtime.prototype.doCanvasSnapshot = function(format_, quality_) {
        this.snapshotCanvas = [format_, quality_];
        this.redraw = true; // force redraw so snapshot is always taken
    };

    function IsIndexedDBAvailable() {
        try {
            return !!window.indexedDB;
        } catch (e) {
            return false;
        }
    };

    function makeSaveDb(e) {
        var db = e.target.result;
        db.createObjectStore("saves", {
            keyPath: "slot"
        });
    };

    function IndexedDB_WriteSlot(slot_, data_, oncomplete_, onerror_) {
        try {
            var request = indexedDB.open("_C2SaveStates");
            request.onupgradeneeded = makeSaveDb;
            request.onerror = onerror_;
            request.onsuccess = function(e) {
                var db = e.target.result;
                db.onerror = onerror_;
                var transaction = db.transaction(["saves"], "readwrite");
                var objectStore = transaction.objectStore("saves");
                var putReq = objectStore.put({
                    "slot": slot_,
                    "data": data_
                });
                putReq.onsuccess = oncomplete_;
            };
        } catch (err) {
            onerror_(err);
        }
    };

    function IndexedDB_ReadSlot(slot_, oncomplete_, onerror_) {
        try {
            var request = indexedDB.open("_C2SaveStates");
            request.onupgradeneeded = makeSaveDb;
            request.onerror = onerror_;
            request.onsuccess = function(e) {
                var db = e.target.result;
                db.onerror = onerror_;
                var transaction = db.transaction(["saves"]);
                var objectStore = transaction.objectStore("saves");
                var readReq = objectStore.get(slot_);
                readReq.onsuccess = function(e) {
                    if (readReq.result)
                        oncomplete_(readReq.result["data"]);
                    else
                        oncomplete_(null);
                };
            };
        } catch (err) {
            onerror_(err);
        }
    };
    Runtime.prototype.signalContinuousPreview = function() {
        this.signalledContinuousPreview = true;
    };

    function doContinuousPreviewReload() {
        cr.logexport("Reloading for continuous preview");
        if (!!window["c2cocoonjs"]) {
            CocoonJS["App"]["reload"]();
        } else {
            if (window.location.search.indexOf("continuous") > -1)
                window.location.reload(true);
            else
                window.location = window.location + "?continuous";
        }
    };
    Runtime.prototype.handleSaveLoad = function() {
        var self = this;
        var savingToSlot = this.saveToSlot;
        var savingJson = this.lastSaveJson;
        var loadingFromSlot = this.loadFromSlot;
        var continuous = false;
        if (this.signalledContinuousPreview) {
            continuous = true;
            savingToSlot = "__c2_continuouspreview";
            this.signalledContinuousPreview = false;
        }
        if (savingToSlot.length) {
            this.ClearDeathRow();
            savingJson = this.saveToJSONString();
            if (IsIndexedDBAvailable() && !this.isCocoonJs) {
                IndexedDB_WriteSlot(savingToSlot, savingJson, function() {
                    cr.logexport("Saved state to IndexedDB storage (" + savingJson.length + " bytes)");
                    self.lastSaveJson = savingJson;
                    self.trigger(cr.system_object.prototype.cnds.OnSaveComplete, null);
                    self.lastSaveJson = "";
                    if (continuous)
                        doContinuousPreviewReload();
                }, function(e) {
                    try {
                        localStorage.setItem("__c2save_" + savingToSlot, savingJson);
                        cr.logexport("Saved state to WebStorage (" + savingJson.length + " bytes)");
                        self.lastSaveJson = savingJson;
                        self.trigger(cr.system_object.prototype.cnds.OnSaveComplete, null);
                        self.lastSaveJson = "";
                        if (continuous)
                            doContinuousPreviewReload();
                    } catch (f) {
                        cr.logexport("Failed to save game state: " + e + "; " + f);
                        self.trigger(cr.system_object.prototype.cnds.OnSaveFailed, null);
                    }
                });
            } else {
                try {
                    localStorage.setItem("__c2save_" + savingToSlot, savingJson);
                    cr.logexport("Saved state to WebStorage (" + savingJson.length + " bytes)");
                    self.lastSaveJson = savingJson;
                    this.trigger(cr.system_object.prototype.cnds.OnSaveComplete, null);
                    self.lastSaveJson = "";
                    if (continuous)
                        doContinuousPreviewReload();
                } catch (e) {
                    cr.logexport("Error saving to WebStorage: " + e);
                    self.trigger(cr.system_object.prototype.cnds.OnSaveFailed, null);
                }
            }
            this.saveToSlot = "";
            this.loadFromSlot = "";
            this.loadFromJson = null;
        }
        if (loadingFromSlot.length) {
            if (IsIndexedDBAvailable() && !this.isCocoonJs) {
                IndexedDB_ReadSlot(loadingFromSlot, function(result_) {
                    if (result_) {
                        self.loadFromJson = result_;
                        cr.logexport("Loaded state from IndexedDB storage (" + self.loadFromJson.length + " bytes)");
                    } else {
                        self.loadFromJson = localStorage.getItem("__c2save_" + loadingFromSlot) || "";
                        cr.logexport("Loaded state from WebStorage (" + self.loadFromJson.length + " bytes)");
                    }
                    self.suspendDrawing = false;
                    if (!self.loadFromJson) {
                        self.loadFromJson = null;
                        self.trigger(cr.system_object.prototype.cnds.OnLoadFailed, null);
                    }
                }, function(e) {
                    self.loadFromJson = localStorage.getItem("__c2save_" + loadingFromSlot) || "";
                    cr.logexport("Loaded state from WebStorage (" + self.loadFromJson.length + " bytes)");
                    self.suspendDrawing = false;
                    if (!self.loadFromJson) {
                        self.loadFromJson = null;
                        self.trigger(cr.system_object.prototype.cnds.OnLoadFailed, null);
                    }
                });
            } else {
                try {
                    this.loadFromJson = localStorage.getItem("__c2save_" + loadingFromSlot) || "";
                    cr.logexport("Loaded state from WebStorage (" + this.loadFromJson.length + " bytes)");
                } catch (e) {
                    this.loadFromJson = null;
                }
                this.suspendDrawing = false;
                if (!self.loadFromJson) {
                    self.loadFromJson = null;
                    self.trigger(cr.system_object.prototype.cnds.OnLoadFailed, null);
                }
            }
            this.loadFromSlot = "";
            this.saveToSlot = "";
        }
        if (this.loadFromJson !== null) {
            this.ClearDeathRow();
            var ok = this.loadFromJSONString(this.loadFromJson);
            if (ok) {
                this.lastSaveJson = this.loadFromJson;
                this.trigger(cr.system_object.prototype.cnds.OnLoadComplete, null);
                this.lastSaveJson = "";
            } else {
                self.trigger(cr.system_object.prototype.cnds.OnLoadFailed, null);
            }
            this.loadFromJson = null;
        }
    };

    function CopyExtraObject(extra) {
        var p, ret = {};
        for (p in extra) {
            if (extra.hasOwnProperty(p)) {
                if (extra[p] instanceof cr.ObjectSet)
                    continue;
                if (extra[p] && typeof extra[p].c2userdata !== "undefined")
                    continue;
                if (p === "spriteCreatedDestroyCallback")
                    continue;
                ret[p] = extra[p];
            }
        }
        return ret;
    };
    Runtime.prototype.saveToJSONString = function() {
        var i, len, j, lenj, type, layout, typeobj, g, c, a, v, p;
        var o = {
            "c2save": true,
            "version": 1,
            "rt": {
                "time": this.kahanTime.sum,
                "walltime": this.wallTime.sum,
                "timescale": this.timescale,
                "tickcount": this.tickcount,
                "execcount": this.execcount,
                "next_uid": this.next_uid,
                "running_layout": this.running_layout.sid,
                "start_time_offset": (Date.now() - this.start_time)
            },
            "types": {},
            "layouts": {},
            "events": {
                "groups": {},
                "cnds": {},
                "acts": {},
                "vars": {}
            }
        };
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            type = this.types_by_index[i];
            if (type.is_family || this.typeHasNoSaveBehavior(type))
                continue;
            typeobj = {
                "instances": []
            };
            if (cr.hasAnyOwnProperty(type.extra))
                typeobj["ex"] = CopyExtraObject(type.extra);
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                typeobj["instances"].push(this.saveInstanceToJSON(type.instances[j]));
            }
            o["types"][type.sid.toString()] = typeobj;
        }
        for (i = 0, len = this.layouts_by_index.length; i < len; i++) {
            layout = this.layouts_by_index[i];
            o["layouts"][layout.sid.toString()] = layout.saveToJSON();
        }
        var ogroups = o["events"]["groups"];
        for (i = 0, len = this.allGroups.length; i < len; i++) {
            g = this.allGroups[i];
            ogroups[g.sid.toString()] = this.groups_by_name[g.group_name].group_active;
        }
        var ocnds = o["events"]["cnds"];
        for (p in this.cndsBySid) {
            if (this.cndsBySid.hasOwnProperty(p)) {
                c = this.cndsBySid[p];
                if (cr.hasAnyOwnProperty(c.extra))
                    ocnds[p] = {
                        "ex": CopyExtraObject(c.extra)
                    };
            }
        }
        var oacts = o["events"]["acts"];
        for (p in this.actsBySid) {
            if (this.actsBySid.hasOwnProperty(p)) {
                a = this.actsBySid[p];
                if (cr.hasAnyOwnProperty(a.extra))
                    oacts[p] = {
                        "ex": CopyExtraObject(a.extra)
                    };
            }
        }
        var ovars = o["events"]["vars"];
        for (p in this.varsBySid) {
            if (this.varsBySid.hasOwnProperty(p)) {
                v = this.varsBySid[p];
                if (!v.is_constant && (!v.parent || v.is_static))
                    ovars[p] = v.data;
            }
        }
        o["system"] = this.system.saveToJSON();
        return JSON.stringify(o);
    };
    Runtime.prototype.refreshUidMap = function() {
        var i, len, type, j, lenj, inst;
        this.objectsByUid = {};
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            type = this.types_by_index[i];
            if (type.is_family)
                continue;
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                inst = type.instances[j];
                this.objectsByUid[inst.uid.toString()] = inst;
            }
        }
    };
    Runtime.prototype.loadFromJSONString = function(str) {
        var o;
        try {
            o = JSON.parse(str);
        } catch (e) {
            return false;
        }
        if (!o["c2save"])
            return false; // probably not a c2 save state
        if (o["version"] > 1)
            return false; // from future version of c2; assume not compatible
        this.isLoadingState = true;
        var rt = o["rt"];
        this.kahanTime.reset();
        this.kahanTime.sum = rt["time"];
        this.wallTime.reset();
        this.wallTime.sum = rt["walltime"] || 0;
        this.timescale = rt["timescale"];
        this.tickcount = rt["tickcount"];
        this.execcount = rt["execcount"];
        this.start_time = Date.now() - rt["start_time_offset"];
        var layout_sid = rt["running_layout"];
        if (layout_sid !== this.running_layout.sid) {
            var changeToLayout = this.getLayoutBySid(layout_sid);
            if (changeToLayout)
                this.doChangeLayout(changeToLayout);
            else
                return; // layout that was saved on has gone missing (deleted?)
        }
        var i, len, j, lenj, k, lenk, p, type, existing_insts, load_insts, inst, binst, layout, layer, g, iid, t;
        var otypes = o["types"];
        for (p in otypes) {
            if (otypes.hasOwnProperty(p)) {
                type = this.getObjectTypeBySid(parseInt(p, 10));
                if (!type || type.is_family || this.typeHasNoSaveBehavior(type))
                    continue;
                if (otypes[p]["ex"])
                    type.extra = otypes[p]["ex"];
                else
                    cr.wipe(type.extra);
                existing_insts = type.instances;
                load_insts = otypes[p]["instances"];
                for (i = 0, len = cr.min(existing_insts.length, load_insts.length); i < len; i++) {
                    this.loadInstanceFromJSON(existing_insts[i], load_insts[i]);
                }
                for (i = load_insts.length, len = existing_insts.length; i < len; i++)
                    this.DestroyInstance(existing_insts[i]);
                for (i = existing_insts.length, len = load_insts.length; i < len; i++) {
                    layer = null;
                    if (type.plugin.is_world) {
                        layer = this.running_layout.getLayerBySid(load_insts[i]["w"]["l"]);
                        if (!layer)
                            continue;
                    }
                    inst = this.createInstanceFromInit(type.default_instance, layer, false, 0, 0, true);
                    this.loadInstanceFromJSON(inst, load_insts[i]);
                }
                type.stale_iids = true;
            }
        }
        this.ClearDeathRow();
        this.refreshUidMap();
        var olayouts = o["layouts"];
        for (p in olayouts) {
            if (olayouts.hasOwnProperty(p)) {
                layout = this.getLayoutBySid(parseInt(p, 10));
                if (!layout)
                    continue; // must've gone missing
                layout.loadFromJSON(olayouts[p]);
            }
        }
        var ogroups = o["events"]["groups"];
        for (p in ogroups) {
            if (ogroups.hasOwnProperty(p)) {
                g = this.getGroupBySid(parseInt(p, 10));
                if (g && this.groups_by_name[g.group_name])
                    this.groups_by_name[g.group_name].setGroupActive(ogroups[p]);
            }
        }
        var ocnds = o["events"]["cnds"];
        for (p in this.cndsBySid) {
            if (this.cndsBySid.hasOwnProperty(p)) {
                if (ocnds.hasOwnProperty(p)) {
                    this.cndsBySid[p].extra = ocnds[p]["ex"];
                } else {
                    this.cndsBySid[p].extra = {};
                }
            }
        }
        var oacts = o["events"]["acts"];
        for (p in this.actsBySid) {
            if (this.actsBySid.hasOwnProperty(p)) {
                if (oacts.hasOwnProperty(p)) {
                    this.actsBySid[p].extra = oacts[p]["ex"];
                } else {
                    this.actsBySid[p].extra = {};
                }
            }
        }
        var ovars = o["events"]["vars"];
        for (p in ovars) {
            if (ovars.hasOwnProperty(p) && this.varsBySid.hasOwnProperty(p)) {
                this.varsBySid[p].data = ovars[p];
            }
        }
        this.next_uid = rt["next_uid"];
        this.isLoadingState = false;
        for (i = 0, len = this.fireOnCreateAfterLoad.length; i < len; ++i) {
            inst = this.fireOnCreateAfterLoad[i];
            this.trigger(Object.getPrototypeOf(inst.type.plugin).cnds.OnCreated, inst);
        }
        cr.clearArray(this.fireOnCreateAfterLoad);
        this.system.loadFromJSON(o["system"]);
        for (i = 0, len = this.types_by_index.length; i < len; i++) {
            type = this.types_by_index[i];
            if (type.is_family || this.typeHasNoSaveBehavior(type))
                continue;
            for (j = 0, lenj = type.instances.length; j < lenj; j++) {
                inst = type.instances[j];
                if (type.is_contained) {
                    iid = inst.get_iid();
                    cr.clearArray(inst.siblings);
                    for (k = 0, lenk = type.container.length; k < lenk; k++) {
                        t = type.container[k];
                        if (type === t)
                            continue;;
                        inst.siblings.push(t.instances[iid]);
                    }
                }
                if (inst.afterLoad)
                    inst.afterLoad();
                if (inst.behavior_insts) {
                    for (k = 0, lenk = inst.behavior_insts.length; k < lenk; k++) {
                        binst = inst.behavior_insts[k];
                        if (binst.afterLoad)
                            binst.afterLoad();
                    }
                }
            }
        }
        this.redraw = true;
        return true;
    };
    Runtime.prototype.saveInstanceToJSON = function(inst, state_only) {
        var i, len, world, behinst, et;
        var type = inst.type;
        var plugin = type.plugin;
        var o = {};
        if (state_only)
            o["c2"] = true; // mark as known json data from Construct 2
        else
            o["uid"] = inst.uid;
        if (cr.hasAnyOwnProperty(inst.extra))
            o["ex"] = CopyExtraObject(inst.extra);
        if (inst.instance_vars && inst.instance_vars.length) {
            o["ivs"] = {};
            for (i = 0, len = inst.instance_vars.length; i < len; i++) {
                o["ivs"][inst.type.instvar_sids[i].toString()] = inst.instance_vars[i];
            }
        }
        if (plugin.is_world) {
            world = {
                "x": inst.x,
                "y": inst.y,
                "w": inst.width,
                "h": inst.height,
                "l": inst.layer.sid,
                "zi": inst.get_zindex()
            };
            if (inst.angle !== 0)
                world["a"] = inst.angle;
            if (inst.opacity !== 1)
                world["o"] = inst.opacity;
            if (inst.hotspotX !== 0.5)
                world["hX"] = inst.hotspotX;
            if (inst.hotspotY !== 0.5)
                world["hY"] = inst.hotspotY;
            if (inst.blend_mode !== 0)
                world["bm"] = inst.blend_mode;
            if (!inst.visible)
                world["v"] = inst.visible;
            if (!inst.collisionsEnabled)
                world["ce"] = inst.collisionsEnabled;
            if (inst.my_timescale !== -1)
                world["mts"] = inst.my_timescale;
            if (type.effect_types.length) {
                world["fx"] = [];
                for (i = 0, len = type.effect_types.length; i < len; i++) {
                    et = type.effect_types[i];
                    world["fx"].push({
                        "name": et.name,
                        "active": inst.active_effect_flags[et.index],
                        "params": inst.effect_params[et.index]
                    });
                }
            }
            o["w"] = world;
        }
        if (inst.behavior_insts && inst.behavior_insts.length) {
            o["behs"] = {};
            for (i = 0, len = inst.behavior_insts.length; i < len; i++) {
                behinst = inst.behavior_insts[i];
                if (behinst.saveToJSON)
                    o["behs"][behinst.type.sid.toString()] = behinst.saveToJSON();
            }
        }
        if (inst.saveToJSON)
            o["data"] = inst.saveToJSON();
        return o;
    };
    Runtime.prototype.getInstanceVarIndexBySid = function(type, sid_) {
        var i, len;
        for (i = 0, len = type.instvar_sids.length; i < len; i++) {
            if (type.instvar_sids[i] === sid_)
                return i;
        }
        return -1;
    };
    Runtime.prototype.getBehaviorIndexBySid = function(inst, sid_) {
        var i, len;
        for (i = 0, len = inst.behavior_insts.length; i < len; i++) {
            if (inst.behavior_insts[i].type.sid === sid_)
                return i;
        }
        return -1;
    };
    Runtime.prototype.loadInstanceFromJSON = function(inst, o, state_only) {
        var p, i, len, iv, oivs, world, fxindex, obehs, behindex, value;
        var oldlayer;
        var type = inst.type;
        var plugin = type.plugin;
        if (state_only) {
            if (!o["c2"])
                return;
        } else
            inst.uid = o["uid"];
        if (o["ex"])
            inst.extra = o["ex"];
        else
            cr.wipe(inst.extra);
        oivs = o["ivs"];
        if (oivs) {
            for (p in oivs) {
                if (oivs.hasOwnProperty(p)) {
                    iv = this.getInstanceVarIndexBySid(type, parseInt(p, 10));
                    if (iv < 0 || iv >= inst.instance_vars.length)
                        continue; // must've gone missing
                    value = oivs[p];
                    if (value === null)
                        value = NaN;
                    inst.instance_vars[iv] = value;
                }
            }
        }
        if (plugin.is_world) {
            world = o["w"];
            if (inst.layer.sid !== world["l"]) {
                oldlayer = inst.layer;
                inst.layer = this.running_layout.getLayerBySid(world["l"]);
                if (inst.layer) {
                    oldlayer.removeFromInstanceList(inst, true);
                    inst.layer.appendToInstanceList(inst, true);
                    inst.set_bbox_changed();
                    inst.layer.setZIndicesStaleFrom(0);
                } else {
                    inst.layer = oldlayer;
                    if (!state_only)
                        this.DestroyInstance(inst);
                }
            }
            inst.x = world["x"];
            inst.y = world["y"];
            inst.width = world["w"];
            inst.height = world["h"];
            inst.zindex = world["zi"];
            inst.angle = world.hasOwnProperty("a") ? world["a"] : 0;
            inst.opacity = world.hasOwnProperty("o") ? world["o"] : 1;
            inst.hotspotX = world.hasOwnProperty("hX") ? world["hX"] : 0.5;
            inst.hotspotY = world.hasOwnProperty("hY") ? world["hY"] : 0.5;
            inst.visible = world.hasOwnProperty("v") ? world["v"] : true;
            inst.collisionsEnabled = world.hasOwnProperty("ce") ? world["ce"] : true;
            inst.my_timescale = world.hasOwnProperty("mts") ? world["mts"] : -1;
            inst.blend_mode = world.hasOwnProperty("bm") ? world["bm"] : 0;;
            inst.compositeOp = cr.effectToCompositeOp(inst.blend_mode);
            if (this.gl)
                cr.setGLBlend(inst, inst.blend_mode, this.gl);
            inst.set_bbox_changed();
            if (world.hasOwnProperty("fx")) {
                for (i = 0, len = world["fx"].length; i < len; i++) {
                    fxindex = type.getEffectIndexByName(world["fx"][i]["name"]);
                    if (fxindex < 0)
                        continue; // must've gone missing
                    inst.active_effect_flags[fxindex] = world["fx"][i]["active"];
                    inst.effect_params[fxindex] = world["fx"][i]["params"];
                }
            }
            inst.updateActiveEffects();
        }
        obehs = o["behs"];
        if (obehs) {
            for (p in obehs) {
                if (obehs.hasOwnProperty(p)) {
                    behindex = this.getBehaviorIndexBySid(inst, parseInt(p, 10));
                    if (behindex < 0)
                        continue; // must've gone missing
                    inst.behavior_insts[behindex].loadFromJSON(obehs[p]);
                }
            }
        }
        if (o["data"])
            inst.loadFromJSON(o["data"]);
    };
    Runtime.prototype.fetchLocalFileViaCordova = function(filename, successCallback, errorCallback) {
        var path = cordova["file"]["applicationDirectory"] + "www/" + filename;
        window["resolveLocalFileSystemURL"](path, function(entry) {
            entry.file(successCallback, errorCallback);
        }, errorCallback);
    };
    Runtime.prototype.fetchLocalFileViaCordovaAsText = function(filename, successCallback, errorCallback) {
        this.fetchLocalFileViaCordova(filename, function(file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                successCallback(e.target.result);
            };
            reader.onerror = errorCallback;
            reader.readAsText(file);
        }, errorCallback);
    };
    var queuedArrayBufferReads = [];
    var activeArrayBufferReads = 0;
    var MAX_ARRAYBUFFER_READS = 8;
    Runtime.prototype.maybeStartNextArrayBufferRead = function() {
        if (!queuedArrayBufferReads.length)
            return; // none left
        if (activeArrayBufferReads >= MAX_ARRAYBUFFER_READS)
            return; // already got maximum number in-flight
        activeArrayBufferReads++;
        var job = queuedArrayBufferReads.shift();
        this.doFetchLocalFileViaCordovaAsArrayBuffer(job.filename, job.successCallback, job.errorCallback);
    };
    Runtime.prototype.fetchLocalFileViaCordovaAsArrayBuffer = function(filename, successCallback_, errorCallback_) {
        var self = this;
        queuedArrayBufferReads.push({
            filename: filename,
            successCallback: function(result) {
                activeArrayBufferReads--;
                self.maybeStartNextArrayBufferRead();
                successCallback_(result);
            },
            errorCallback: function(err) {
                activeArrayBufferReads--;
                self.maybeStartNextArrayBufferRead();
                errorCallback_(err);
            }
        });
        this.maybeStartNextArrayBufferRead();
    };
    Runtime.prototype.doFetchLocalFileViaCordovaAsArrayBuffer = function(filename, successCallback, errorCallback) {
        this.fetchLocalFileViaCordova(filename, function(file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                successCallback(e.target.result);
            };
            reader.readAsArrayBuffer(file);
        }, errorCallback);
    };
    Runtime.prototype.fetchLocalFileViaCordovaAsURL = function(filename, successCallback, errorCallback) {
        var blobType = "";
        var lowername = filename.toLowerCase();
        var ext3 = lowername.substr(lowername.length - 4);
        var ext4 = lowername.substr(lowername.length - 5);
        if (ext3 === ".mp4")
            blobType = "video/mp4";
        else if (ext4 === ".webm")
            blobType = "video/webm"; // use video type but hopefully works with audio too
        else if (ext3 === ".m4a")
            blobType = "audio/mp4";
        else if (ext3 === ".mp3")
            blobType = "audio/mpeg";
        this.fetchLocalFileViaCordovaAsArrayBuffer(filename, function(arrayBuffer) {
            var blob = new Blob([arrayBuffer], {
                type: blobType
            });
            var url = URL.createObjectURL(blob);
            successCallback(url);
        }, errorCallback);
    };
    Runtime.prototype.isAbsoluteUrl = function(url) {
        return /^(?:[a-z]+:)?\/\//.test(url) || url.substr(0, 5) === "data:" || url.substr(0, 5) === "blob:";
    };
    Runtime.prototype.setImageSrc = function(img, src) {
        if (this.isWKWebView && !this.isAbsoluteUrl(src)) {
            this.fetchLocalFileViaCordovaAsURL(src, function(url) {
                img.src = url;
            }, function(err) {
                alert("Failed to load image: " + err);
            });
        } else {
            img.src = src;
        }
    };
    Runtime.prototype.setCtxImageSmoothingEnabled = function(ctx, e) {
        if (typeof ctx["imageSmoothingEnabled"] !== "undefined") {
            ctx["imageSmoothingEnabled"] = e;
        } else {
            ctx["webkitImageSmoothingEnabled"] = e;
            ctx["mozImageSmoothingEnabled"] = e;
            ctx["msImageSmoothingEnabled"] = e;
        }
    };
    cr.runtime = Runtime;
    cr.createRuntime = function(canvasid) {
        return new Runtime(document.getElementById(canvasid));
    };
    cr.createDCRuntime = function(w, h) {
        return new Runtime({
            "dc": true,
            "width": w,
            "height": h
        });
    };
    window["cr_createRuntime"] = cr.createRuntime;
    window["cr_createDCRuntime"] = cr.createDCRuntime;
    window["createCocoonJSRuntime"] = function() {
        window["c2cocoonjs"] = true;
        var canvas = document.createElement("screencanvas") || document.createElement("canvas");
        canvas.screencanvas = true;
        document.body.appendChild(canvas);
        var rt = new Runtime(canvas);
        window["c2runtime"] = rt;
        window.addEventListener("orientationchange", function() {
            window["c2runtime"]["setSize"](window.innerWidth, window.innerHeight);
        });
        window["c2runtime"]["setSize"](window.innerWidth, window.innerHeight);
        return rt;
    };
    window["createEjectaRuntime"] = function() {
        var canvas = document.getElementById("canvas");
        var rt = new Runtime(canvas);
        window["c2runtime"] = rt;
        window["c2runtime"]["setSize"](window.innerWidth, window.innerHeight);
        return rt;
    };
}());
window["cr_getC2Runtime"] = function() {
    var canvas = document.getElementById("c2canvas");
    if (canvas)
        return canvas["c2runtime"];
    else if (window["c2runtime"])
        return window["c2runtime"];
    else
        return null;
}
window["cr_getSnapshot"] = function(format_, quality_) {
    var runtime = window["cr_getC2Runtime"]();
    if (runtime)
        runtime.doCanvasSnapshot(format_, quality_);
}
window["cr_sizeCanvas"] = function(w, h) {
    if (w === 0 || h === 0)
        return;
    var runtime = window["cr_getC2Runtime"]();
    if (runtime)
        runtime["setSize"](w, h);
}
window["cr_setSuspended"] = function(s) {
    var runtime = window["cr_getC2Runtime"]();
    if (runtime)
        runtime["setSuspended"](s);
};
(function() {
    function Layout(runtime, m) {
        this.runtime = runtime;
        this.event_sheet = null;
        this.scrollX = (this.runtime.original_width / 2);
        this.scrollY = (this.runtime.original_height / 2);
        this.scale = 1.0;
        this.angle = 0;
        this.first_visit = true;
        this.name = m[0];
        this.originalWidth = m[1];
        this.originalHeight = m[2];
        this.width = m[1];
        this.height = m[2];
        this.unbounded_scrolling = m[3];
        this.sheetname = m[4];
        this.sid = m[5];
        var lm = m[6];
        var i, len;
        this.layers = [];
        this.initial_types = [];
        for (i = 0, len = lm.length; i < len; i++) {
            var layer = new cr.layer(this, lm[i]);
            layer.number = i;
            cr.seal(layer);
            this.layers.push(layer);
        }
        var im = m[7];
        this.initial_nonworld = [];
        for (i = 0, len = im.length; i < len; i++) {
            var inst = im[i];
            var type = this.runtime.types_by_index[inst[1]];;
            if (!type.default_instance)
                type.default_instance = inst;
            this.initial_nonworld.push(inst);
            if (this.initial_types.indexOf(type) === -1)
                this.initial_types.push(type);
        }
        this.effect_types = [];
        this.active_effect_types = [];
        this.shaders_preserve_opaqueness = true;
        this.effect_params = [];
        for (i = 0, len = m[8].length; i < len; i++) {
            this.effect_types.push({
                id: m[8][i][0],
                name: m[8][i][1],
                shaderindex: -1,
                preservesOpaqueness: false,
                active: true,
                index: i
            });
            this.effect_params.push(m[8][i][2].slice(0));
        }
        this.updateActiveEffects();
        this.rcTex = new cr.rect(0, 0, 1, 1);
        this.rcTex2 = new cr.rect(0, 0, 1, 1);
        this.persist_data = {};
    };
    Layout.prototype.saveObjectToPersist = function(inst) {
        var sidStr = inst.type.sid.toString();
        if (!this.persist_data.hasOwnProperty(sidStr))
            this.persist_data[sidStr] = [];
        var type_persist = this.persist_data[sidStr];
        type_persist.push(this.runtime.saveInstanceToJSON(inst));
    };
    Layout.prototype.hasOpaqueBottomLayer = function() {
        var layer = this.layers[0];
        return !layer.transparent && layer.opacity === 1.0 && !layer.forceOwnTexture && layer.visible;
    };
    Layout.prototype.updateActiveEffects = function() {
        cr.clearArray(this.active_effect_types);
        this.shaders_preserve_opaqueness = true;
        var i, len, et;
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            et = this.effect_types[i];
            if (et.active) {
                this.active_effect_types.push(et);
                if (!et.preservesOpaqueness)
                    this.shaders_preserve_opaqueness = false;
            }
        }
    };
    Layout.prototype.getEffectByName = function(name_) {
        var i, len, et;
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            et = this.effect_types[i];
            if (et.name === name_)
                return et;
        }
        return null;
    };
    var created_instances = [];

    function sort_by_zindex(a, b) {
        return a.zindex - b.zindex;
    };
    var first_layout = true;
    Layout.prototype.startRunning = function() {
        if (this.sheetname) {
            this.event_sheet = this.runtime.eventsheets[this.sheetname];;
            this.event_sheet.updateDeepIncludes();
        }
        this.runtime.running_layout = this;
        this.width = this.originalWidth;
        this.height = this.originalHeight;
        this.scrollX = (this.runtime.original_width / 2);
        this.scrollY = (this.runtime.original_height / 2);
        var i, k, len, lenk, type, type_instances, initial_inst, inst, iid, t, s, p, q, type_data, layer;
        for (i = 0, len = this.runtime.types_by_index.length; i < len; i++) {
            type = this.runtime.types_by_index[i];
            if (type.is_family)
                continue; // instances are only transferred for their real type
            type_instances = type.instances;
            for (k = 0, lenk = type_instances.length; k < lenk; k++) {
                inst = type_instances[k];
                if (inst.layer) {
                    var num = inst.layer.number;
                    if (num >= this.layers.length)
                        num = this.layers.length - 1;
                    inst.layer = this.layers[num];
                    if (inst.layer.instances.indexOf(inst) === -1)
                        inst.layer.instances.push(inst);
                    inst.layer.zindices_stale = true;
                }
            }
        }
        if (!first_layout) {
            for (i = 0, len = this.layers.length; i < len; ++i) {
                this.layers[i].instances.sort(sort_by_zindex);
            }
        }
        var layer;
        cr.clearArray(created_instances);
        this.boundScrolling();
        for (i = 0, len = this.layers.length; i < len; i++) {
            layer = this.layers[i];
            layer.createInitialInstances(); // fills created_instances
            layer.updateViewport(null);
        }
        var uids_changed = false;
        if (!this.first_visit) {
            for (p in this.persist_data) {
                if (this.persist_data.hasOwnProperty(p)) {
                    type = this.runtime.getObjectTypeBySid(parseInt(p, 10));
                    if (!type || type.is_family || !this.runtime.typeHasPersistBehavior(type))
                        continue;
                    type_data = this.persist_data[p];
                    for (i = 0, len = type_data.length; i < len; i++) {
                        layer = null;
                        if (type.plugin.is_world) {
                            layer = this.getLayerBySid(type_data[i]["w"]["l"]);
                            if (!layer)
                                continue;
                        }
                        inst = this.runtime.createInstanceFromInit(type.default_instance, layer, false, 0, 0, true);
                        this.runtime.loadInstanceFromJSON(inst, type_data[i]);
                        uids_changed = true;
                        created_instances.push(inst);
                    }
                    cr.clearArray(type_data);
                }
            }
            for (i = 0, len = this.layers.length; i < len; i++) {
                this.layers[i].instances.sort(sort_by_zindex);
                this.layers[i].zindices_stale = true; // in case of duplicates/holes
            }
        }
        if (uids_changed) {
            this.runtime.ClearDeathRow();
            this.runtime.refreshUidMap();
        }
        for (i = 0; i < created_instances.length; i++) {
            inst = created_instances[i];
            if (!inst.type.is_contained)
                continue;
            iid = inst.get_iid();
            for (k = 0, lenk = inst.type.container.length; k < lenk; k++) {
                t = inst.type.container[k];
                if (inst.type === t)
                    continue;
                if (t.instances.length > iid)
                    inst.siblings.push(t.instances[iid]);
                else {
                    if (!t.default_instance) {} else {
                        s = this.runtime.createInstanceFromInit(t.default_instance, inst.layer, true, inst.x, inst.y, true);
                        this.runtime.ClearDeathRow();
                        t.updateIIDs();
                        inst.siblings.push(s);
                        created_instances.push(s); // come back around and link up its own instances too
                    }
                }
            }
        }
        for (i = 0, len = this.initial_nonworld.length; i < len; i++) {
            initial_inst = this.initial_nonworld[i];
            type = this.runtime.types_by_index[initial_inst[1]];
            if (!type.is_contained) {
                inst = this.runtime.createInstanceFromInit(this.initial_nonworld[i], null, true);
            };
        }
        this.runtime.changelayout = null;
        this.runtime.ClearDeathRow();
        if (this.runtime.ctx && !this.runtime.isDomFree) {
            for (i = 0, len = this.runtime.types_by_index.length; i < len; i++) {
                t = this.runtime.types_by_index[i];
                if (t.is_family || !t.instances.length || !t.preloadCanvas2D)
                    continue;
                t.preloadCanvas2D(this.runtime.ctx);
            }
        }
        /*
        if (this.runtime.glwrap)
        {
        	console.log("Estimated VRAM at layout start: " + this.runtime.glwrap.textureCount() + " textures, approx. " + Math.round(this.runtime.glwrap.estimateVRAM() / 1024) + " kb");
        }
        */
        if (this.runtime.isLoadingState) {
            cr.shallowAssignArray(this.runtime.fireOnCreateAfterLoad, created_instances);
        } else {
            for (i = 0, len = created_instances.length; i < len; i++) {
                inst = created_instances[i];
                this.runtime.trigger(Object.getPrototypeOf(inst.type.plugin).cnds.OnCreated, inst);
            }
        }
        cr.clearArray(created_instances);
        if (!this.runtime.isLoadingState) {
            this.runtime.trigger(cr.system_object.prototype.cnds.OnLayoutStart, null);
        }
        this.first_visit = false;
    };
    Layout.prototype.createGlobalNonWorlds = function() {
        var i, k, len, initial_inst, inst, type;
        for (i = 0, k = 0, len = this.initial_nonworld.length; i < len; i++) {
            initial_inst = this.initial_nonworld[i];
            type = this.runtime.types_by_index[initial_inst[1]];
            if (type.global) {
                if (!type.is_contained) {
                    inst = this.runtime.createInstanceFromInit(initial_inst, null, true);
                }
            } else {
                this.initial_nonworld[k] = initial_inst;
                k++;
            }
        }
        cr.truncateArray(this.initial_nonworld, k);
    };
    Layout.prototype.stopRunning = function() {;
        /*
        if (this.runtime.glwrap)
        {
        	console.log("Estimated VRAM at layout end: " + this.runtime.glwrap.textureCount() + " textures, approx. " + Math.round(this.runtime.glwrap.estimateVRAM() / 1024) + " kb");
        }
        */
        if (!this.runtime.isLoadingState) {
            this.runtime.trigger(cr.system_object.prototype.cnds.OnLayoutEnd, null);
        }
        this.runtime.isEndingLayout = true;
        cr.clearArray(this.runtime.system.waits);
        var i, leni, j, lenj;
        var layer_instances, inst, type;
        if (!this.first_visit) {
            for (i = 0, leni = this.layers.length; i < leni; i++) {
                this.layers[i].updateZIndices();
                layer_instances = this.layers[i].instances;
                for (j = 0, lenj = layer_instances.length; j < lenj; j++) {
                    inst = layer_instances[j];
                    if (!inst.type.global) {
                        if (this.runtime.typeHasPersistBehavior(inst.type))
                            this.saveObjectToPersist(inst);
                    }
                }
            }
        }
        for (i = 0, leni = this.layers.length; i < leni; i++) {
            layer_instances = this.layers[i].instances;
            for (j = 0, lenj = layer_instances.length; j < lenj; j++) {
                inst = layer_instances[j];
                if (!inst.type.global) {
                    this.runtime.DestroyInstance(inst);
                }
            }
            this.runtime.ClearDeathRow();
            cr.clearArray(layer_instances);
            this.layers[i].zindices_stale = true;
        }
        for (i = 0, leni = this.runtime.types_by_index.length; i < leni; i++) {
            type = this.runtime.types_by_index[i];
            if (type.global || type.plugin.is_world || type.plugin.singleglobal || type.is_family)
                continue;
            for (j = 0, lenj = type.instances.length; j < lenj; j++)
                this.runtime.DestroyInstance(type.instances[j]);
            this.runtime.ClearDeathRow();
        }
        first_layout = false;
        this.runtime.isEndingLayout = false;
    };
    var temp_rect = new cr.rect(0, 0, 0, 0);
    Layout.prototype.recreateInitialObjects = function(type, x1, y1, x2, y2) {
        temp_rect.set(x1, y1, x2, y2);
        var i, len;
        for (i = 0, len = this.layers.length; i < len; i++) {
            this.layers[i].recreateInitialObjects(type, temp_rect);
        }
    };
    Layout.prototype.draw = function(ctx) {
        var layout_canvas;
        var layout_ctx = ctx;
        var ctx_changed = false;
        var render_offscreen = !this.runtime.fullscreenScalingQuality;
        if (render_offscreen) {
            if (!this.runtime.layout_canvas) {
                this.runtime.layout_canvas = document.createElement("canvas");
                layout_canvas = this.runtime.layout_canvas;
                layout_canvas.width = this.runtime.draw_width;
                layout_canvas.height = this.runtime.draw_height;
                this.runtime.layout_ctx = layout_canvas.getContext("2d");
                ctx_changed = true;
            }
            layout_canvas = this.runtime.layout_canvas;
            layout_ctx = this.runtime.layout_ctx;
            if (layout_canvas.width !== this.runtime.draw_width) {
                layout_canvas.width = this.runtime.draw_width;
                ctx_changed = true;
            }
            if (layout_canvas.height !== this.runtime.draw_height) {
                layout_canvas.height = this.runtime.draw_height;
                ctx_changed = true;
            }
            if (ctx_changed) {
                this.runtime.setCtxImageSmoothingEnabled(layout_ctx, this.runtime.linearSampling);
            }
        }
        layout_ctx.globalAlpha = 1;
        layout_ctx.globalCompositeOperation = "source-over";
        if (this.runtime.clearBackground && !this.hasOpaqueBottomLayer())
            layout_ctx.clearRect(0, 0, this.runtime.draw_width, this.runtime.draw_height);
        var i, len, l;
        for (i = 0, len = this.layers.length; i < len; i++) {
            l = this.layers[i];
            if (l.visible && l.opacity > 0 && l.blend_mode !== 11 && (l.instances.length || !l.transparent))
                l.draw(layout_ctx);
            else
                l.updateViewport(null); // even if not drawing, keep viewport up to date
        }
        if (render_offscreen) {
            ctx.drawImage(layout_canvas, 0, 0, this.runtime.width, this.runtime.height);
        }
    };
    Layout.prototype.drawGL_earlyZPass = function(glw) {
        glw.setEarlyZPass(true);
        if (!this.runtime.layout_tex) {
            this.runtime.layout_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
        }
        if (this.runtime.layout_tex.c2width !== this.runtime.draw_width || this.runtime.layout_tex.c2height !== this.runtime.draw_height) {
            glw.deleteTexture(this.runtime.layout_tex);
            this.runtime.layout_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
        }
        glw.setRenderingToTexture(this.runtime.layout_tex);
        if (!this.runtime.fullscreenScalingQuality) {
            glw.setSize(this.runtime.draw_width, this.runtime.draw_height);
        }
        var i, l;
        for (i = this.layers.length - 1; i >= 0; --i) {
            l = this.layers[i];
            if (l.visible && l.opacity === 1 && l.shaders_preserve_opaqueness &&
                l.blend_mode === 0 && (l.instances.length || !l.transparent)) {
                l.drawGL_earlyZPass(glw);
            } else {
                l.updateViewport(null); // even if not drawing, keep viewport up to date
            }
        }
        glw.setEarlyZPass(false);
    };
    Layout.prototype.drawGL = function(glw) {
        var render_to_texture = (this.active_effect_types.length > 0 ||
            this.runtime.uses_background_blending ||
            !this.runtime.fullscreenScalingQuality ||
            this.runtime.enableFrontToBack);
        if (render_to_texture) {
            if (!this.runtime.layout_tex) {
                this.runtime.layout_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
            }
            if (this.runtime.layout_tex.c2width !== this.runtime.draw_width || this.runtime.layout_tex.c2height !== this.runtime.draw_height) {
                glw.deleteTexture(this.runtime.layout_tex);
                this.runtime.layout_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
            }
            glw.setRenderingToTexture(this.runtime.layout_tex);
            if (!this.runtime.fullscreenScalingQuality) {
                glw.setSize(this.runtime.draw_width, this.runtime.draw_height);
            }
        } else {
            if (this.runtime.layout_tex) {
                glw.setRenderingToTexture(null);
                glw.deleteTexture(this.runtime.layout_tex);
                this.runtime.layout_tex = null;
            }
        }
        if (this.runtime.clearBackground && !this.hasOpaqueBottomLayer())
            glw.clear(0, 0, 0, 0);
        var i, len, l;
        for (i = 0, len = this.layers.length; i < len; i++) {
            l = this.layers[i];
            if (l.visible && l.opacity > 0 && (l.instances.length || !l.transparent))
                l.drawGL(glw);
            else
                l.updateViewport(null); // even if not drawing, keep viewport up to date
        }
        if (render_to_texture) {
            if (this.active_effect_types.length === 0 ||
                (this.active_effect_types.length === 1 && this.runtime.fullscreenScalingQuality)) {
                if (this.active_effect_types.length === 1) {
                    var etindex = this.active_effect_types[0].index;
                    glw.switchProgram(this.active_effect_types[0].shaderindex);
                    glw.setProgramParameters(null, // backTex
                        1.0 / this.runtime.draw_width, // pixelWidth
                        1.0 / this.runtime.draw_height, // pixelHeight
                        0.0, 0.0, // destStart
                        1.0, 1.0, // destEnd
                        this.scale, // layerScale
                        this.angle, // layerAngle
                        0.0, 0.0, // viewOrigin
                        this.runtime.draw_width / 2, this.runtime.draw_height / 2, // scrollPos
                        this.runtime.kahanTime.sum, // seconds
                        this.effect_params[etindex]); // fx parameters
                    if (glw.programIsAnimated(this.active_effect_types[0].shaderindex))
                        this.runtime.redraw = true;
                } else
                    glw.switchProgram(0);
                if (!this.runtime.fullscreenScalingQuality) {
                    glw.setSize(this.runtime.width, this.runtime.height);
                }
                glw.setRenderingToTexture(null); // to backbuffer
                glw.setDepthTestEnabled(false); // ignore depth buffer, copy full texture
                glw.setOpacity(1);
                glw.setTexture(this.runtime.layout_tex);
                glw.setAlphaBlend();
                glw.resetModelView();
                glw.updateModelView();
                var halfw = this.runtime.width / 2;
                var halfh = this.runtime.height / 2;
                glw.quad(-halfw, halfh, halfw, halfh, halfw, -halfh, -halfw, -halfh);
                glw.setTexture(null);
                glw.setDepthTestEnabled(true); // turn depth test back on
            } else {
                this.renderEffectChain(glw, null, null, null);
            }
        }
    };
    Layout.prototype.getRenderTarget = function() {
        if (this.active_effect_types.length > 0 ||
            this.runtime.uses_background_blending ||
            !this.runtime.fullscreenScalingQuality ||
            this.runtime.enableFrontToBack) {
            return this.runtime.layout_tex;
        } else {
            return null;
        }
    };
    Layout.prototype.getMinLayerScale = function() {
        var m = this.layers[0].getScale();
        var i, len, l;
        for (i = 1, len = this.layers.length; i < len; i++) {
            l = this.layers[i];
            if (l.parallaxX === 0 && l.parallaxY === 0)
                continue;
            if (l.getScale() < m)
                m = l.getScale();
        }
        return m;
    };
    Layout.prototype.scrollToX = function(x) {
        if (!this.unbounded_scrolling) {
            var widthBoundary = (this.runtime.draw_width * (1 / this.getMinLayerScale()) / 2);
            if (x > this.width - widthBoundary)
                x = this.width - widthBoundary;
            if (x < widthBoundary)
                x = widthBoundary;
        }
        if (this.scrollX !== x) {
            this.scrollX = x;
            this.runtime.redraw = true;
        }
    };
    Layout.prototype.scrollToY = function(y) {
        if (!this.unbounded_scrolling) {
            var heightBoundary = (this.runtime.draw_height * (1 / this.getMinLayerScale()) / 2);
            if (y > this.height - heightBoundary)
                y = this.height - heightBoundary;
            if (y < heightBoundary)
                y = heightBoundary;
        }
        if (this.scrollY !== y) {
            this.scrollY = y;
            this.runtime.redraw = true;
        }
    };
    Layout.prototype.boundScrolling = function() {
        this.scrollToX(this.scrollX);
        this.scrollToY(this.scrollY);
    };
    Layout.prototype.renderEffectChain = function(glw, layer, inst, rendertarget) {
        var active_effect_types = inst ?
            inst.active_effect_types :
            layer ?
            layer.active_effect_types :
            this.active_effect_types;
        var layerScale = 1,
            layerAngle = 0,
            viewOriginLeft = 0,
            viewOriginTop = 0,
            viewOriginRight = this.runtime.draw_width,
            viewOriginBottom = this.runtime.draw_height;
        if (inst) {
            layerScale = inst.layer.getScale();
            layerAngle = inst.layer.getAngle();
            viewOriginLeft = inst.layer.viewLeft;
            viewOriginTop = inst.layer.viewTop;
            viewOriginRight = inst.layer.viewRight;
            viewOriginBottom = inst.layer.viewBottom;
        } else if (layer) {
            layerScale = layer.getScale();
            layerAngle = layer.getAngle();
            viewOriginLeft = layer.viewLeft;
            viewOriginTop = layer.viewTop;
            viewOriginRight = layer.viewRight;
            viewOriginBottom = layer.viewBottom;
        }
        var fx_tex = this.runtime.fx_tex;
        var i, len, last, temp, fx_index = 0,
            other_fx_index = 1;
        var y, h;
        var windowWidth = this.runtime.draw_width;
        var windowHeight = this.runtime.draw_height;
        var halfw = windowWidth / 2;
        var halfh = windowHeight / 2;
        var rcTex = layer ? layer.rcTex : this.rcTex;
        var rcTex2 = layer ? layer.rcTex2 : this.rcTex2;
        var screenleft = 0,
            clearleft = 0;
        var screentop = 0,
            cleartop = 0;
        var screenright = windowWidth,
            clearright = windowWidth;
        var screenbottom = windowHeight,
            clearbottom = windowHeight;
        var boxExtendHorizontal = 0;
        var boxExtendVertical = 0;
        var inst_layer_angle = inst ? inst.layer.getAngle() : 0;
        if (inst) {
            for (i = 0, len = active_effect_types.length; i < len; i++) {
                boxExtendHorizontal += glw.getProgramBoxExtendHorizontal(active_effect_types[i].shaderindex);
                boxExtendVertical += glw.getProgramBoxExtendVertical(active_effect_types[i].shaderindex);
            }
            var bbox = inst.bbox;
            screenleft = layer.layerToCanvas(bbox.left, bbox.top, true, true);
            screentop = layer.layerToCanvas(bbox.left, bbox.top, false, true);
            screenright = layer.layerToCanvas(bbox.right, bbox.bottom, true, true);
            screenbottom = layer.layerToCanvas(bbox.right, bbox.bottom, false, true);
            if (inst_layer_angle !== 0) {
                var screentrx = layer.layerToCanvas(bbox.right, bbox.top, true, true);
                var screentry = layer.layerToCanvas(bbox.right, bbox.top, false, true);
                var screenblx = layer.layerToCanvas(bbox.left, bbox.bottom, true, true);
                var screenbly = layer.layerToCanvas(bbox.left, bbox.bottom, false, true);
                temp = Math.min(screenleft, screenright, screentrx, screenblx);
                screenright = Math.max(screenleft, screenright, screentrx, screenblx);
                screenleft = temp;
                temp = Math.min(screentop, screenbottom, screentry, screenbly);
                screenbottom = Math.max(screentop, screenbottom, screentry, screenbly);
                screentop = temp;
            }
            screenleft -= boxExtendHorizontal;
            screentop -= boxExtendVertical;
            screenright += boxExtendHorizontal;
            screenbottom += boxExtendVertical;
            rcTex2.left = screenleft / windowWidth;
            rcTex2.top = 1 - screentop / windowHeight;
            rcTex2.right = screenright / windowWidth;
            rcTex2.bottom = 1 - screenbottom / windowHeight;
            clearleft = screenleft = cr.floor(screenleft);
            cleartop = screentop = cr.floor(screentop);
            clearright = screenright = cr.ceil(screenright);
            clearbottom = screenbottom = cr.ceil(screenbottom);
            clearleft -= boxExtendHorizontal;
            cleartop -= boxExtendVertical;
            clearright += boxExtendHorizontal;
            clearbottom += boxExtendVertical;
            if (screenleft < 0) screenleft = 0;
            if (screentop < 0) screentop = 0;
            if (screenright > windowWidth) screenright = windowWidth;
            if (screenbottom > windowHeight) screenbottom = windowHeight;
            if (clearleft < 0) clearleft = 0;
            if (cleartop < 0) cleartop = 0;
            if (clearright > windowWidth) clearright = windowWidth;
            if (clearbottom > windowHeight) clearbottom = windowHeight;
            rcTex.left = screenleft / windowWidth;
            rcTex.top = 1 - screentop / windowHeight;
            rcTex.right = screenright / windowWidth;
            rcTex.bottom = 1 - screenbottom / windowHeight;
        } else {
            rcTex.left = rcTex2.left = 0;
            rcTex.top = rcTex2.top = 0;
            rcTex.right = rcTex2.right = 1;
            rcTex.bottom = rcTex2.bottom = 1;
        }
        var pre_draw = (inst && (glw.programUsesDest(active_effect_types[0].shaderindex) || boxExtendHorizontal !== 0 || boxExtendVertical !== 0 || inst.opacity !== 1 || inst.type.plugin.must_predraw)) || (layer && !inst && layer.opacity !== 1);
        glw.setAlphaBlend();
        if (pre_draw) {
            if (!fx_tex[fx_index]) {
                fx_tex[fx_index] = glw.createEmptyTexture(windowWidth, windowHeight, this.runtime.linearSampling);
            }
            if (fx_tex[fx_index].c2width !== windowWidth || fx_tex[fx_index].c2height !== windowHeight) {
                glw.deleteTexture(fx_tex[fx_index]);
                fx_tex[fx_index] = glw.createEmptyTexture(windowWidth, windowHeight, this.runtime.linearSampling);
            }
            glw.switchProgram(0);
            glw.setRenderingToTexture(fx_tex[fx_index]);
            h = clearbottom - cleartop;
            y = (windowHeight - cleartop) - h;
            glw.clearRect(clearleft, y, clearright - clearleft, h);
            if (inst) {
                inst.drawGL(glw);
            } else {
                glw.setTexture(this.runtime.layer_tex);
                glw.setOpacity(layer.opacity);
                glw.resetModelView();
                glw.translate(-halfw, -halfh);
                glw.updateModelView();
                glw.quadTex(screenleft, screenbottom, screenright, screenbottom, screenright, screentop, screenleft, screentop, rcTex);
            }
            rcTex2.left = rcTex2.top = 0;
            rcTex2.right = rcTex2.bottom = 1;
            if (inst) {
                temp = rcTex.top;
                rcTex.top = rcTex.bottom;
                rcTex.bottom = temp;
            }
            fx_index = 1;
            other_fx_index = 0;
        }
        glw.setOpacity(1);
        var last = active_effect_types.length - 1;
        var post_draw = glw.programUsesCrossSampling(active_effect_types[last].shaderindex) ||
            (!layer && !inst && !this.runtime.fullscreenScalingQuality);
        var etindex = 0;
        for (i = 0, len = active_effect_types.length; i < len; i++) {
            if (!fx_tex[fx_index]) {
                fx_tex[fx_index] = glw.createEmptyTexture(windowWidth, windowHeight, this.runtime.linearSampling);
            }
            if (fx_tex[fx_index].c2width !== windowWidth || fx_tex[fx_index].c2height !== windowHeight) {
                glw.deleteTexture(fx_tex[fx_index]);
                fx_tex[fx_index] = glw.createEmptyTexture(windowWidth, windowHeight, this.runtime.linearSampling);
            }
            glw.switchProgram(active_effect_types[i].shaderindex);
            etindex = active_effect_types[i].index;
            if (glw.programIsAnimated(active_effect_types[i].shaderindex))
                this.runtime.redraw = true;
            if (i == 0 && !pre_draw) {
                glw.setRenderingToTexture(fx_tex[fx_index]);
                h = clearbottom - cleartop;
                y = (windowHeight - cleartop) - h;
                glw.clearRect(clearleft, y, clearright - clearleft, h);
                if (inst) {
                    var pixelWidth;
                    var pixelHeight;
                    if (inst.curFrame && inst.curFrame.texture_img) {
                        var img = inst.curFrame.texture_img;
                        pixelWidth = 1.0 / img.width;
                        pixelHeight = 1.0 / img.height;
                    } else {
                        pixelWidth = 1.0 / inst.width;
                        pixelHeight = 1.0 / inst.height;
                    }
                    glw.setProgramParameters(rendertarget, // backTex
                        pixelWidth,
                        pixelHeight,
                        rcTex2.left, rcTex2.top, // destStart
                        rcTex2.right, rcTex2.bottom, // destEnd
                        layerScale,
                        layerAngle,
                        viewOriginLeft, viewOriginTop,
                        (viewOriginLeft + viewOriginRight) / 2, (viewOriginTop + viewOriginBottom) / 2,
                        this.runtime.kahanTime.sum,
                        inst.effect_params[etindex]); // fx params
                    inst.drawGL(glw);
                } else {
                    glw.setProgramParameters(rendertarget, // backTex
                        1.0 / windowWidth, // pixelWidth
                        1.0 / windowHeight, // pixelHeight
                        0.0, 0.0, // destStart
                        1.0, 1.0, // destEnd
                        layerScale,
                        layerAngle,
                        viewOriginLeft, viewOriginTop,
                        (viewOriginLeft + viewOriginRight) / 2, (viewOriginTop + viewOriginBottom) / 2,
                        this.runtime.kahanTime.sum,
                        layer ? // fx params
                        layer.effect_params[etindex] :
                        this.effect_params[etindex]);
                    glw.setTexture(layer ? this.runtime.layer_tex : this.runtime.layout_tex);
                    glw.resetModelView();
                    glw.translate(-halfw, -halfh);
                    glw.updateModelView();
                    glw.quadTex(screenleft, screenbottom, screenright, screenbottom, screenright, screentop, screenleft, screentop, rcTex);
                }
                rcTex2.left = rcTex2.top = 0;
                rcTex2.right = rcTex2.bottom = 1;
                if (inst && !post_draw) {
                    temp = screenbottom;
                    screenbottom = screentop;
                    screentop = temp;
                }
            } else {
                glw.setProgramParameters(rendertarget, // backTex
                    1.0 / windowWidth, // pixelWidth
                    1.0 / windowHeight, // pixelHeight
                    rcTex2.left, rcTex2.top, // destStart
                    rcTex2.right, rcTex2.bottom, // destEnd
                    layerScale,
                    layerAngle,
                    viewOriginLeft, viewOriginTop,
                    (viewOriginLeft + viewOriginRight) / 2, (viewOriginTop + viewOriginBottom) / 2,
                    this.runtime.kahanTime.sum,
                    inst ? // fx params
                    inst.effect_params[etindex] :
                    layer ?
                    layer.effect_params[etindex] :
                    this.effect_params[etindex]);
                glw.setTexture(null);
                if (i === last && !post_draw) {
                    if (inst)
                        glw.setBlend(inst.srcBlend, inst.destBlend);
                    else if (layer)
                        glw.setBlend(layer.srcBlend, layer.destBlend);
                    glw.setRenderingToTexture(rendertarget);
                } else {
                    glw.setRenderingToTexture(fx_tex[fx_index]);
                    h = clearbottom - cleartop;
                    y = (windowHeight - cleartop) - h;
                    glw.clearRect(clearleft, y, clearright - clearleft, h);
                }
                glw.setTexture(fx_tex[other_fx_index]);
                glw.resetModelView();
                glw.translate(-halfw, -halfh);
                glw.updateModelView();
                glw.quadTex(screenleft, screenbottom, screenright, screenbottom, screenright, screentop, screenleft, screentop, rcTex);
                if (i === last && !post_draw)
                    glw.setTexture(null);
            }
            fx_index = (fx_index === 0 ? 1 : 0);
            other_fx_index = (fx_index === 0 ? 1 : 0); // will be opposite to fx_index since it was just assigned
        }
        if (post_draw) {
            glw.switchProgram(0);
            if (inst)
                glw.setBlend(inst.srcBlend, inst.destBlend);
            else if (layer)
                glw.setBlend(layer.srcBlend, layer.destBlend);
            else {
                if (!this.runtime.fullscreenScalingQuality) {
                    glw.setSize(this.runtime.width, this.runtime.height);
                    halfw = this.runtime.width / 2;
                    halfh = this.runtime.height / 2;
                    screenleft = 0;
                    screentop = 0;
                    screenright = this.runtime.width;
                    screenbottom = this.runtime.height;
                }
            }
            glw.setRenderingToTexture(rendertarget);
            glw.setTexture(fx_tex[other_fx_index]);
            glw.resetModelView();
            glw.translate(-halfw, -halfh);
            glw.updateModelView();
            if (inst && active_effect_types.length === 1 && !pre_draw)
                glw.quadTex(screenleft, screentop, screenright, screentop, screenright, screenbottom, screenleft, screenbottom, rcTex);
            else
                glw.quadTex(screenleft, screenbottom, screenright, screenbottom, screenright, screentop, screenleft, screentop, rcTex);
            glw.setTexture(null);
        }
    };
    Layout.prototype.getLayerBySid = function(sid_) {
        var i, len;
        for (i = 0, len = this.layers.length; i < len; i++) {
            if (this.layers[i].sid === sid_)
                return this.layers[i];
        }
        return null;
    };
    Layout.prototype.saveToJSON = function() {
        var i, len, layer, et;
        var o = {
            "sx": this.scrollX,
            "sy": this.scrollY,
            "s": this.scale,
            "a": this.angle,
            "w": this.width,
            "h": this.height,
            "fv": this.first_visit, // added r127
            "persist": this.persist_data,
            "fx": [],
            "layers": {}
        };
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            et = this.effect_types[i];
            o["fx"].push({
                "name": et.name,
                "active": et.active,
                "params": this.effect_params[et.index]
            });
        }
        for (i = 0, len = this.layers.length; i < len; i++) {
            layer = this.layers[i];
            o["layers"][layer.sid.toString()] = layer.saveToJSON();
        }
        return o;
    };
    Layout.prototype.loadFromJSON = function(o) {
        var i, j, len, fx, p, layer;
        this.scrollX = o["sx"];
        this.scrollY = o["sy"];
        this.scale = o["s"];
        this.angle = o["a"];
        this.width = o["w"];
        this.height = o["h"];
        this.persist_data = o["persist"];
        if (typeof o["fv"] !== "undefined")
            this.first_visit = o["fv"];
        var ofx = o["fx"];
        for (i = 0, len = ofx.length; i < len; i++) {
            fx = this.getEffectByName(ofx[i]["name"]);
            if (!fx)
                continue; // must've gone missing
            fx.active = ofx[i]["active"];
            this.effect_params[fx.index] = ofx[i]["params"];
        }
        this.updateActiveEffects();
        var olayers = o["layers"];
        for (p in olayers) {
            if (olayers.hasOwnProperty(p)) {
                layer = this.getLayerBySid(parseInt(p, 10));
                if (!layer)
                    continue; // must've gone missing
                layer.loadFromJSON(olayers[p]);
            }
        }
    };
    cr.layout = Layout;

    function Layer(layout, m) {
        this.layout = layout;
        this.runtime = layout.runtime;
        this.instances = []; // running instances
        this.scale = 1.0;
        this.angle = 0;
        this.disableAngle = false;
        this.tmprect = new cr.rect(0, 0, 0, 0);
        this.tmpquad = new cr.quad();
        this.viewLeft = 0;
        this.viewRight = 0;
        this.viewTop = 0;
        this.viewBottom = 0;
        this.zindices_stale = false;
        this.zindices_stale_from = -1; // first index that has changed, or -1 if no bound
        this.clear_earlyz_index = 0;
        this.name = m[0];
        this.index = m[1];
        this.sid = m[2];
        this.visible = m[3]; // initially visible
        this.background_color = m[4];
        this.transparent = m[5];
        this.parallaxX = m[6];
        this.parallaxY = m[7];
        this.opacity = m[8];
        this.forceOwnTexture = m[9];
        this.useRenderCells = m[10];
        this.zoomRate = m[11];
        this.blend_mode = m[12];
        this.effect_fallback = m[13];
        this.compositeOp = "source-over";
        this.srcBlend = 0;
        this.destBlend = 0;
        this.render_grid = null;
        this.last_render_list = alloc_arr();
        this.render_list_stale = true;
        this.last_render_cells = new cr.rect(0, 0, -1, -1);
        this.cur_render_cells = new cr.rect(0, 0, -1, -1);
        if (this.useRenderCells) {
            this.render_grid = new cr.RenderGrid(this.runtime.original_width, this.runtime.original_height);
        }
        this.render_offscreen = false;
        var im = m[14];
        var i, len;
        this.startup_initial_instances = []; // for restoring initial_instances after load
        this.initial_instances = [];
        this.created_globals = []; // global object UIDs already created - for save/load to avoid recreating
        for (i = 0, len = im.length; i < len; i++) {
            var inst = im[i];
            var type = this.runtime.types_by_index[inst[1]];;
            if (!type.default_instance) {
                type.default_instance = inst;
                type.default_layerindex = this.index;
            }
            this.initial_instances.push(inst);
            if (this.layout.initial_types.indexOf(type) === -1)
                this.layout.initial_types.push(type);
        }
        cr.shallowAssignArray(this.startup_initial_instances, this.initial_instances);
        this.effect_types = [];
        this.active_effect_types = [];
        this.shaders_preserve_opaqueness = true;
        this.effect_params = [];
        for (i = 0, len = m[15].length; i < len; i++) {
            this.effect_types.push({
                id: m[15][i][0],
                name: m[15][i][1],
                shaderindex: -1,
                preservesOpaqueness: false,
                active: true,
                index: i
            });
            this.effect_params.push(m[15][i][2].slice(0));
        }
        this.updateActiveEffects();
        this.rcTex = new cr.rect(0, 0, 1, 1);
        this.rcTex2 = new cr.rect(0, 0, 1, 1);
    };
    Layer.prototype.updateActiveEffects = function() {
        cr.clearArray(this.active_effect_types);
        this.shaders_preserve_opaqueness = true;
        var i, len, et;
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            et = this.effect_types[i];
            if (et.active) {
                this.active_effect_types.push(et);
                if (!et.preservesOpaqueness)
                    this.shaders_preserve_opaqueness = false;
            }
        }
    };
    Layer.prototype.getEffectByName = function(name_) {
        var i, len, et;
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            et = this.effect_types[i];
            if (et.name === name_)
                return et;
        }
        return null;
    };
    Layer.prototype.createInitialInstances = function() {
        var i, k, len, inst, initial_inst, type, keep, hasPersistBehavior;
        for (i = 0, k = 0, len = this.initial_instances.length; i < len; i++) {
            initial_inst = this.initial_instances[i];
            type = this.runtime.types_by_index[initial_inst[1]];;
            hasPersistBehavior = this.runtime.typeHasPersistBehavior(type);
            keep = true;
            if (!hasPersistBehavior || this.layout.first_visit) {
                inst = this.runtime.createInstanceFromInit(initial_inst, this, true);
                if (!inst)
                    continue; // may have skipped creation due to fallback effect "destroy"
                created_instances.push(inst);
                if (inst.type.global) {
                    keep = false;
                    this.created_globals.push(inst.uid);
                }
            }
            if (keep) {
                this.initial_instances[k] = this.initial_instances[i];
                k++;
            }
        }
        this.initial_instances.length = k;
        this.runtime.ClearDeathRow(); // flushes creation row so IIDs will be correct
        if (!this.runtime.glwrap && this.effect_types.length) // no WebGL renderer and shaders used
            this.blend_mode = this.effect_fallback; // use fallback blend mode
        this.compositeOp = cr.effectToCompositeOp(this.blend_mode);
        if (this.runtime.gl)
            cr.setGLBlend(this, this.blend_mode, this.runtime.gl);
        this.render_list_stale = true;
    };
    Layer.prototype.recreateInitialObjects = function(only_type, rc) {
        var i, len, initial_inst, type, wm, x, y, inst, j, lenj, s;
        var types_by_index = this.runtime.types_by_index;
        var only_type_is_family = only_type.is_family;
        var only_type_members = only_type.members;
        for (i = 0, len = this.initial_instances.length; i < len; ++i) {
            initial_inst = this.initial_instances[i];
            wm = initial_inst[0];
            x = wm[0];
            y = wm[1];
            if (!rc.contains_pt(x, y))
                continue; // not in the given area
            type = types_by_index[initial_inst[1]];
            if (type !== only_type) {
                if (only_type_is_family) {
                    if (only_type_members.indexOf(type) < 0)
                        continue;
                } else
                    continue; // only_type is not a family, and the initial inst type does not match
            }
            inst = this.runtime.createInstanceFromInit(initial_inst, this, false);
            this.runtime.isInOnDestroy++;
            this.runtime.trigger(Object.getPrototypeOf(type.plugin).cnds.OnCreated, inst);
            if (inst.is_contained) {
                for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                    s = inst.siblings[i];
                    this.runtime.trigger(Object.getPrototypeOf(s.type.plugin).cnds.OnCreated, s);
                }
            }
            this.runtime.isInOnDestroy--;
        }
    };
    Layer.prototype.removeFromInstanceList = function(inst, remove_from_grid) {
        var index = cr.fastIndexOf(this.instances, inst);
        if (index < 0)
            return; // not found
        if (remove_from_grid && this.useRenderCells && inst.rendercells && inst.rendercells.right >= inst.rendercells.left) {
            inst.update_bbox(); // make sure actually in its current rendercells
            this.render_grid.update(inst, inst.rendercells, null); // no new range provided - remove only
            inst.rendercells.set(0, 0, -1, -1); // set to invalid state to indicate not inserted
        }
        if (index === this.instances.length - 1)
            this.instances.pop();
        else {
            cr.arrayRemove(this.instances, index);
            this.setZIndicesStaleFrom(index);
        }
        this.render_list_stale = true;
    };
    Layer.prototype.appendToInstanceList = function(inst, add_to_grid) {;
        inst.zindex = this.instances.length;
        this.instances.push(inst);
        if (add_to_grid && this.useRenderCells && inst.rendercells) {
            inst.set_bbox_changed(); // will cause immediate update and new insertion to grid
        }
        this.render_list_stale = true;
    };
    Layer.prototype.prependToInstanceList = function(inst, add_to_grid) {;
        this.instances.unshift(inst);
        this.setZIndicesStaleFrom(0);
        if (add_to_grid && this.useRenderCells && inst.rendercells) {
            inst.set_bbox_changed(); // will cause immediate update and new insertion to grid
        }
    };
    Layer.prototype.moveInstanceAdjacent = function(inst, other, isafter) {;
        var myZ = inst.get_zindex();
        var insertZ = other.get_zindex();
        cr.arrayRemove(this.instances, myZ);
        if (myZ < insertZ)
            insertZ--;
        if (isafter)
            insertZ++;
        if (insertZ === this.instances.length)
            this.instances.push(inst);
        else
            this.instances.splice(insertZ, 0, inst);
        this.setZIndicesStaleFrom(myZ < insertZ ? myZ : insertZ);
    };
    Layer.prototype.setZIndicesStaleFrom = function(index) {
        if (this.zindices_stale_from === -1) // not yet set
            this.zindices_stale_from = index;
        else if (index < this.zindices_stale_from) // determine minimum z index affected
            this.zindices_stale_from = index;
        this.zindices_stale = true;
        this.render_list_stale = true;
    };
    Layer.prototype.updateZIndices = function() {
        if (!this.zindices_stale)
            return;
        if (this.zindices_stale_from === -1)
            this.zindices_stale_from = 0;
        var i, len, inst;
        if (this.useRenderCells) {
            for (i = this.zindices_stale_from, len = this.instances.length; i < len; ++i) {
                inst = this.instances[i];
                inst.zindex = i;
                this.render_grid.markRangeChanged(inst.rendercells);
            }
        } else {
            for (i = this.zindices_stale_from, len = this.instances.length; i < len; ++i) {
                this.instances[i].zindex = i;
            }
        }
        this.zindices_stale = false;
        this.zindices_stale_from = -1;
    };
    Layer.prototype.getScale = function(include_aspect) {
        return this.getNormalScale() * (this.runtime.fullscreenScalingQuality || include_aspect ? this.runtime.aspect_scale : 1);
    };
    Layer.prototype.getNormalScale = function() {
        return ((this.scale * this.layout.scale) - 1) * this.zoomRate + 1;
    };
    Layer.prototype.getAngle = function() {
        if (this.disableAngle)
            return 0;
        return cr.clamp_angle(this.layout.angle + this.angle);
    };
    var arr_cache = [];

    function alloc_arr() {
        if (arr_cache.length)
            return arr_cache.pop();
        else
            return [];
    }

    function free_arr(a) {
        cr.clearArray(a);
        arr_cache.push(a);
    };

    function mergeSortedZArrays(a, b, out) {
        var i = 0,
            j = 0,
            k = 0,
            lena = a.length,
            lenb = b.length,
            ai, bj;
        out.length = lena + lenb;
        for (; i < lena && j < lenb; ++k) {
            ai = a[i];
            bj = b[j];
            if (ai.zindex < bj.zindex) {
                out[k] = ai;
                ++i;
            } else {
                out[k] = bj;
                ++j;
            }
        }
        for (; i < lena; ++i, ++k)
            out[k] = a[i];
        for (; j < lenb; ++j, ++k)
            out[k] = b[j];
    };
    var next_arr = [];

    function mergeAllSortedZArrays_pass(arr, first_pass) {
        var i, len, arr1, arr2, out;
        for (i = 0, len = arr.length; i < len - 1; i += 2) {
            arr1 = arr[i];
            arr2 = arr[i + 1];
            out = alloc_arr();
            mergeSortedZArrays(arr1, arr2, out);
            if (!first_pass) {
                free_arr(arr1);
                free_arr(arr2);
            }
            next_arr.push(out);
        }
        if (len % 2 === 1) {
            if (first_pass) {
                arr1 = alloc_arr();
                cr.shallowAssignArray(arr1, arr[len - 1]);
                next_arr.push(arr1);
            } else {
                next_arr.push(arr[len - 1]);
            }
        }
        cr.shallowAssignArray(arr, next_arr);
        cr.clearArray(next_arr);
    };

    function mergeAllSortedZArrays(arr) {
        var first_pass = true;
        while (arr.length > 1) {
            mergeAllSortedZArrays_pass(arr, first_pass);
            first_pass = false;
        }
        return arr[0];
    };
    var render_arr = [];
    Layer.prototype.getRenderCellInstancesToDraw = function() {;
        this.updateZIndices();
        this.render_grid.queryRange(this.viewLeft, this.viewTop, this.viewRight, this.viewBottom, render_arr);
        if (!render_arr.length)
            return alloc_arr();
        if (render_arr.length === 1) {
            var a = alloc_arr();
            cr.shallowAssignArray(a, render_arr[0]);
            cr.clearArray(render_arr);
            return a;
        }
        var draw_list = mergeAllSortedZArrays(render_arr);
        cr.clearArray(render_arr);
        return draw_list;
    };
    Layer.prototype.draw = function(ctx) {
        this.render_offscreen = (this.forceOwnTexture || this.opacity !== 1.0 || this.blend_mode !== 0);
        var layer_canvas = this.runtime.canvas;
        var layer_ctx = ctx;
        var ctx_changed = false;
        if (this.render_offscreen) {
            if (!this.runtime.layer_canvas) {
                this.runtime.layer_canvas = document.createElement("canvas");;
                layer_canvas = this.runtime.layer_canvas;
                layer_canvas.width = this.runtime.draw_width;
                layer_canvas.height = this.runtime.draw_height;
                this.runtime.layer_ctx = layer_canvas.getContext("2d");;
                ctx_changed = true;
            }
            layer_canvas = this.runtime.layer_canvas;
            layer_ctx = this.runtime.layer_ctx;
            if (layer_canvas.width !== this.runtime.draw_width) {
                layer_canvas.width = this.runtime.draw_width;
                ctx_changed = true;
            }
            if (layer_canvas.height !== this.runtime.draw_height) {
                layer_canvas.height = this.runtime.draw_height;
                ctx_changed = true;
            }
            if (ctx_changed) {
                this.runtime.setCtxImageSmoothingEnabled(layer_ctx, this.runtime.linearSampling);
            }
            if (this.transparent)
                layer_ctx.clearRect(0, 0, this.runtime.draw_width, this.runtime.draw_height);
        }
        layer_ctx.globalAlpha = 1;
        layer_ctx.globalCompositeOperation = "source-over";
        if (!this.transparent) {
            layer_ctx.fillStyle = "rgb(" + this.background_color[0] + "," + this.background_color[1] + "," + this.background_color[2] + ")";
            layer_ctx.fillRect(0, 0, this.runtime.draw_width, this.runtime.draw_height);
        }
        layer_ctx.save();
        this.disableAngle = true;
        var px = this.canvasToLayer(0, 0, true, true);
        var py = this.canvasToLayer(0, 0, false, true);
        this.disableAngle = false;
        if (this.runtime.pixel_rounding) {
            px = Math.round(px);
            py = Math.round(py);
        }
        this.rotateViewport(px, py, layer_ctx);
        var myscale = this.getScale();
        layer_ctx.scale(myscale, myscale);
        layer_ctx.translate(-px, -py);
        var instances_to_draw;
        if (this.useRenderCells) {
            this.cur_render_cells.left = this.render_grid.XToCell(this.viewLeft);
            this.cur_render_cells.top = this.render_grid.YToCell(this.viewTop);
            this.cur_render_cells.right = this.render_grid.XToCell(this.viewRight);
            this.cur_render_cells.bottom = this.render_grid.YToCell(this.viewBottom);
            if (this.render_list_stale || !this.cur_render_cells.equals(this.last_render_cells)) {
                free_arr(this.last_render_list);
                instances_to_draw = this.getRenderCellInstancesToDraw();
                this.render_list_stale = false;
                this.last_render_cells.copy(this.cur_render_cells);
            } else
                instances_to_draw = this.last_render_list;
        } else
            instances_to_draw = this.instances;
        var i, len, inst, last_inst = null;
        for (i = 0, len = instances_to_draw.length; i < len; ++i) {
            inst = instances_to_draw[i];
            if (inst === last_inst)
                continue;
            this.drawInstance(inst, layer_ctx);
            last_inst = inst;
        }
        if (this.useRenderCells)
            this.last_render_list = instances_to_draw;
        layer_ctx.restore();
        if (this.render_offscreen) {
            ctx.globalCompositeOperation = this.compositeOp;
            ctx.globalAlpha = this.opacity;
            ctx.drawImage(layer_canvas, 0, 0);
        }
    };
    Layer.prototype.drawInstance = function(inst, layer_ctx) {
        if (!inst.visible || inst.width === 0 || inst.height === 0)
            return;
        inst.update_bbox();
        var bbox = inst.bbox;
        if (bbox.right < this.viewLeft || bbox.bottom < this.viewTop || bbox.left > this.viewRight || bbox.top > this.viewBottom)
            return;
        layer_ctx.globalCompositeOperation = inst.compositeOp;
        inst.draw(layer_ctx);
    };
    Layer.prototype.updateViewport = function(ctx) {
        this.disableAngle = true;
        var px = this.canvasToLayer(0, 0, true, true);
        var py = this.canvasToLayer(0, 0, false, true);
        this.disableAngle = false;
        if (this.runtime.pixel_rounding) {
            px = Math.round(px);
            py = Math.round(py);
        }
        this.rotateViewport(px, py, ctx);
    };
    Layer.prototype.rotateViewport = function(px, py, ctx) {
        var myscale = this.getScale();
        this.viewLeft = px;
        this.viewTop = py;
        this.viewRight = px + (this.runtime.draw_width * (1 / myscale));
        this.viewBottom = py + (this.runtime.draw_height * (1 / myscale));
        var temp;
        if (this.viewLeft > this.viewRight) {
            temp = this.viewLeft;
            this.viewLeft = this.viewRight;
            this.viewRight = temp;
        }
        if (this.viewTop > this.viewBottom) {
            temp = this.viewTop;
            this.viewTop = this.viewBottom;
            this.viewBottom = temp;
        }
        var myAngle = this.getAngle();
        if (myAngle !== 0) {
            if (ctx) {
                ctx.translate(this.runtime.draw_width / 2, this.runtime.draw_height / 2);
                ctx.rotate(-myAngle);
                ctx.translate(this.runtime.draw_width / -2, this.runtime.draw_height / -2);
            }
            this.tmprect.set(this.viewLeft, this.viewTop, this.viewRight, this.viewBottom);
            this.tmprect.offset((this.viewLeft + this.viewRight) / -2, (this.viewTop + this.viewBottom) / -2);
            this.tmpquad.set_from_rotated_rect(this.tmprect, myAngle);
            this.tmpquad.bounding_box(this.tmprect);
            this.tmprect.offset((this.viewLeft + this.viewRight) / 2, (this.viewTop + this.viewBottom) / 2);
            this.viewLeft = this.tmprect.left;
            this.viewTop = this.tmprect.top;
            this.viewRight = this.tmprect.right;
            this.viewBottom = this.tmprect.bottom;
        }
    }
    Layer.prototype.drawGL_earlyZPass = function(glw) {
        var windowWidth = this.runtime.draw_width;
        var windowHeight = this.runtime.draw_height;
        var shaderindex = 0;
        var etindex = 0;
        this.render_offscreen = this.forceOwnTexture;
        if (this.render_offscreen) {
            if (!this.runtime.layer_tex) {
                this.runtime.layer_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
            }
            if (this.runtime.layer_tex.c2width !== this.runtime.draw_width || this.runtime.layer_tex.c2height !== this.runtime.draw_height) {
                glw.deleteTexture(this.runtime.layer_tex);
                this.runtime.layer_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
            }
            glw.setRenderingToTexture(this.runtime.layer_tex);
        }
        this.disableAngle = true;
        var px = this.canvasToLayer(0, 0, true, true);
        var py = this.canvasToLayer(0, 0, false, true);
        this.disableAngle = false;
        if (this.runtime.pixel_rounding) {
            px = Math.round(px);
            py = Math.round(py);
        }
        this.rotateViewport(px, py, null);
        var myscale = this.getScale();
        glw.resetModelView();
        glw.scale(myscale, myscale);
        glw.rotateZ(-this.getAngle());
        glw.translate((this.viewLeft + this.viewRight) / -2, (this.viewTop + this.viewBottom) / -2);
        glw.updateModelView();
        var instances_to_draw;
        if (this.useRenderCells) {
            this.cur_render_cells.left = this.render_grid.XToCell(this.viewLeft);
            this.cur_render_cells.top = this.render_grid.YToCell(this.viewTop);
            this.cur_render_cells.right = this.render_grid.XToCell(this.viewRight);
            this.cur_render_cells.bottom = this.render_grid.YToCell(this.viewBottom);
            if (this.render_list_stale || !this.cur_render_cells.equals(this.last_render_cells)) {
                free_arr(this.last_render_list);
                instances_to_draw = this.getRenderCellInstancesToDraw();
                this.render_list_stale = false;
                this.last_render_cells.copy(this.cur_render_cells);
            } else
                instances_to_draw = this.last_render_list;
        } else
            instances_to_draw = this.instances;
        var i, inst, last_inst = null;
        for (i = instances_to_draw.length - 1; i >= 0; --i) {
            inst = instances_to_draw[i];
            if (inst === last_inst)
                continue;
            this.drawInstanceGL_earlyZPass(instances_to_draw[i], glw);
            last_inst = inst;
        }
        if (this.useRenderCells)
            this.last_render_list = instances_to_draw;
        if (!this.transparent) {
            this.clear_earlyz_index = this.runtime.earlyz_index++;
            glw.setEarlyZIndex(this.clear_earlyz_index);
            glw.setColorFillMode(1, 1, 1, 1);
            glw.fullscreenQuad(); // fill remaining space in depth buffer with current Z value
            glw.restoreEarlyZMode();
        }
    };
    Layer.prototype.drawGL = function(glw) {
        var windowWidth = this.runtime.draw_width;
        var windowHeight = this.runtime.draw_height;
        var shaderindex = 0;
        var etindex = 0;
        this.render_offscreen = (this.forceOwnTexture || this.opacity !== 1.0 || this.active_effect_types.length > 0 || this.blend_mode !== 0);
        if (this.render_offscreen) {
            if (!this.runtime.layer_tex) {
                this.runtime.layer_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
            }
            if (this.runtime.layer_tex.c2width !== this.runtime.draw_width || this.runtime.layer_tex.c2height !== this.runtime.draw_height) {
                glw.deleteTexture(this.runtime.layer_tex);
                this.runtime.layer_tex = glw.createEmptyTexture(this.runtime.draw_width, this.runtime.draw_height, this.runtime.linearSampling);
            }
            glw.setRenderingToTexture(this.runtime.layer_tex);
            if (this.transparent)
                glw.clear(0, 0, 0, 0);
        }
        if (!this.transparent) {
            if (this.runtime.enableFrontToBack) {
                glw.setEarlyZIndex(this.clear_earlyz_index);
                glw.setColorFillMode(this.background_color[0] / 255, this.background_color[1] / 255, this.background_color[2] / 255, 1);
                glw.fullscreenQuad();
                glw.setTextureFillMode();
            } else {
                glw.clear(this.background_color[0] / 255, this.background_color[1] / 255, this.background_color[2] / 255, 1);
            }
        }
        this.disableAngle = true;
        var px = this.canvasToLayer(0, 0, true, true);
        var py = this.canvasToLayer(0, 0, false, true);
        this.disableAngle = false;
        if (this.runtime.pixel_rounding) {
            px = Math.round(px);
            py = Math.round(py);
        }
        this.rotateViewport(px, py, null);
        var myscale = this.getScale();
        glw.resetModelView();
        glw.scale(myscale, myscale);
        glw.rotateZ(-this.getAngle());
        glw.translate((this.viewLeft + this.viewRight) / -2, (this.viewTop + this.viewBottom) / -2);
        glw.updateModelView();
        var instances_to_draw;
        if (this.useRenderCells) {
            this.cur_render_cells.left = this.render_grid.XToCell(this.viewLeft);
            this.cur_render_cells.top = this.render_grid.YToCell(this.viewTop);
            this.cur_render_cells.right = this.render_grid.XToCell(this.viewRight);
            this.cur_render_cells.bottom = this.render_grid.YToCell(this.viewBottom);
            if (this.render_list_stale || !this.cur_render_cells.equals(this.last_render_cells)) {
                free_arr(this.last_render_list);
                instances_to_draw = this.getRenderCellInstancesToDraw();
                this.render_list_stale = false;
                this.last_render_cells.copy(this.cur_render_cells);
            } else
                instances_to_draw = this.last_render_list;
        } else
            instances_to_draw = this.instances;
        var i, len, inst, last_inst = null;
        for (i = 0, len = instances_to_draw.length; i < len; ++i) {
            inst = instances_to_draw[i];
            if (inst === last_inst)
                continue;
            this.drawInstanceGL(instances_to_draw[i], glw);
            last_inst = inst;
        }
        if (this.useRenderCells)
            this.last_render_list = instances_to_draw;
        if (this.render_offscreen) {
            shaderindex = this.active_effect_types.length ? this.active_effect_types[0].shaderindex : 0;
            etindex = this.active_effect_types.length ? this.active_effect_types[0].index : 0;
            if (this.active_effect_types.length === 0 || (this.active_effect_types.length === 1 &&
                    !glw.programUsesCrossSampling(shaderindex) && this.opacity === 1)) {
                if (this.active_effect_types.length === 1) {
                    glw.switchProgram(shaderindex);
                    glw.setProgramParameters(this.layout.getRenderTarget(), // backTex
                        1.0 / this.runtime.draw_width, // pixelWidth
                        1.0 / this.runtime.draw_height, // pixelHeight
                        0.0, 0.0, // destStart
                        1.0, 1.0, // destEnd
                        myscale, // layerScale
                        this.getAngle(),
                        this.viewLeft, this.viewTop,
                        (this.viewLeft + this.viewRight) / 2, (this.viewTop + this.viewBottom) / 2,
                        this.runtime.kahanTime.sum,
                        this.effect_params[etindex]); // fx parameters
                    if (glw.programIsAnimated(shaderindex))
                        this.runtime.redraw = true;
                } else
                    glw.switchProgram(0);
                glw.setRenderingToTexture(this.layout.getRenderTarget());
                glw.setOpacity(this.opacity);
                glw.setTexture(this.runtime.layer_tex);
                glw.setBlend(this.srcBlend, this.destBlend);
                glw.resetModelView();
                glw.updateModelView();
                var halfw = this.runtime.draw_width / 2;
                var halfh = this.runtime.draw_height / 2;
                glw.quad(-halfw, halfh, halfw, halfh, halfw, -halfh, -halfw, -halfh);
                glw.setTexture(null);
            } else {
                this.layout.renderEffectChain(glw, this, null, this.layout.getRenderTarget());
            }
        }
    };
    Layer.prototype.drawInstanceGL = function(inst, glw) {;
        if (!inst.visible || inst.width === 0 || inst.height === 0)
            return;
        inst.update_bbox();
        var bbox = inst.bbox;
        if (bbox.right < this.viewLeft || bbox.bottom < this.viewTop || bbox.left > this.viewRight || bbox.top > this.viewBottom)
            return;
        glw.setEarlyZIndex(inst.earlyz_index);
        if (inst.uses_shaders) {
            this.drawInstanceWithShadersGL(inst, glw);
        } else {
            glw.switchProgram(0); // un-set any previously set shader
            glw.setBlend(inst.srcBlend, inst.destBlend);
            inst.drawGL(glw);
        }
    };
    Layer.prototype.drawInstanceGL_earlyZPass = function(inst, glw) {;
        if (!inst.visible || inst.width === 0 || inst.height === 0)
            return;
        inst.update_bbox();
        var bbox = inst.bbox;
        if (bbox.right < this.viewLeft || bbox.bottom < this.viewTop || bbox.left > this.viewRight || bbox.top > this.viewBottom)
            return;
        inst.earlyz_index = this.runtime.earlyz_index++;
        if (inst.blend_mode !== 0 || inst.opacity !== 1 || !inst.shaders_preserve_opaqueness || !inst.drawGL_earlyZPass)
            return;
        glw.setEarlyZIndex(inst.earlyz_index);
        inst.drawGL_earlyZPass(glw);
    };
    Layer.prototype.drawInstanceWithShadersGL = function(inst, glw) {
        var shaderindex = inst.active_effect_types[0].shaderindex;
        var etindex = inst.active_effect_types[0].index;
        var myscale = this.getScale();
        if (inst.active_effect_types.length === 1 && !glw.programUsesCrossSampling(shaderindex) &&
            !glw.programExtendsBox(shaderindex) && ((!inst.angle && !inst.layer.getAngle()) || !glw.programUsesDest(shaderindex)) &&
            inst.opacity === 1 && !inst.type.plugin.must_predraw) {
            glw.switchProgram(shaderindex);
            glw.setBlend(inst.srcBlend, inst.destBlend);
            if (glw.programIsAnimated(shaderindex))
                this.runtime.redraw = true;
            var destStartX = 0,
                destStartY = 0,
                destEndX = 0,
                destEndY = 0;
            if (glw.programUsesDest(shaderindex)) {
                var bbox = inst.bbox;
                var screenleft = this.layerToCanvas(bbox.left, bbox.top, true, true);
                var screentop = this.layerToCanvas(bbox.left, bbox.top, false, true);
                var screenright = this.layerToCanvas(bbox.right, bbox.bottom, true, true);
                var screenbottom = this.layerToCanvas(bbox.right, bbox.bottom, false, true);
                destStartX = screenleft / windowWidth;
                destStartY = 1 - screentop / windowHeight;
                destEndX = screenright / windowWidth;
                destEndY = 1 - screenbottom / windowHeight;
            }
            var pixelWidth;
            var pixelHeight;
            if (inst.curFrame && inst.curFrame.texture_img) {
                var img = inst.curFrame.texture_img;
                pixelWidth = 1.0 / img.width;
                pixelHeight = 1.0 / img.height;
            } else {
                pixelWidth = 1.0 / inst.width;
                pixelHeight = 1.0 / inst.height;
            }
            glw.setProgramParameters(this.render_offscreen ? this.runtime.layer_tex : this.layout.getRenderTarget(), // backTex
                pixelWidth,
                pixelHeight,
                destStartX, destStartY,
                destEndX, destEndY,
                myscale,
                this.getAngle(),
                this.viewLeft, this.viewTop,
                (this.viewLeft + this.viewRight) / 2, (this.viewTop + this.viewBottom) / 2,
                this.runtime.kahanTime.sum,
                inst.effect_params[etindex]);
            inst.drawGL(glw);
        } else {
            this.layout.renderEffectChain(glw, this, inst, this.render_offscreen ? this.runtime.layer_tex : this.layout.getRenderTarget());
            glw.resetModelView();
            glw.scale(myscale, myscale);
            glw.rotateZ(-this.getAngle());
            glw.translate((this.viewLeft + this.viewRight) / -2, (this.viewTop + this.viewBottom) / -2);
            glw.updateModelView();
        }
    };
    Layer.prototype.canvasToLayer = function(ptx, pty, getx, using_draw_area) {
        var multiplier = this.runtime.devicePixelRatio;
        if (this.runtime.isRetina) {
            ptx *= multiplier;
            pty *= multiplier;
        }
        var ox = this.runtime.parallax_x_origin;
        var oy = this.runtime.parallax_y_origin;
        var par_x = ((this.layout.scrollX - ox) * this.parallaxX) + ox;
        var par_y = ((this.layout.scrollY - oy) * this.parallaxY) + oy;
        var x = par_x;
        var y = par_y;
        var invScale = 1 / this.getScale(!using_draw_area);
        if (using_draw_area) {
            x -= (this.runtime.draw_width * invScale) / 2;
            y -= (this.runtime.draw_height * invScale) / 2;
        } else {
            x -= (this.runtime.width * invScale) / 2;
            y -= (this.runtime.height * invScale) / 2;
        }
        x += ptx * invScale;
        y += pty * invScale;
        var a = this.getAngle();
        if (a !== 0) {
            x -= par_x;
            y -= par_y;
            var cosa = Math.cos(a);
            var sina = Math.sin(a);
            var x_temp = (x * cosa) - (y * sina);
            y = (y * cosa) + (x * sina);
            x = x_temp;
            x += par_x;
            y += par_y;
        }
        return getx ? x : y;
    };
    Layer.prototype.layerToCanvas = function(ptx, pty, getx, using_draw_area) {
        var ox = this.runtime.parallax_x_origin;
        var oy = this.runtime.parallax_y_origin;
        var par_x = ((this.layout.scrollX - ox) * this.parallaxX) + ox;
        var par_y = ((this.layout.scrollY - oy) * this.parallaxY) + oy;
        var x = par_x;
        var y = par_y;
        var a = this.getAngle();
        if (a !== 0) {
            ptx -= par_x;
            pty -= par_y;
            var cosa = Math.cos(-a);
            var sina = Math.sin(-a);
            var x_temp = (ptx * cosa) - (pty * sina);
            pty = (pty * cosa) + (ptx * sina);
            ptx = x_temp;
            ptx += par_x;
            pty += par_y;
        }
        var invScale = 1 / this.getScale(!using_draw_area);
        if (using_draw_area) {
            x -= (this.runtime.draw_width * invScale) / 2;
            y -= (this.runtime.draw_height * invScale) / 2;
        } else {
            x -= (this.runtime.width * invScale) / 2;
            y -= (this.runtime.height * invScale) / 2;
        }
        x = (ptx - x) / invScale;
        y = (pty - y) / invScale;
        var multiplier = this.runtime.devicePixelRatio;
        if (this.runtime.isRetina && !using_draw_area) {
            x /= multiplier;
            y /= multiplier;
        }
        return getx ? x : y;
    };
    Layer.prototype.rotatePt = function(x_, y_, getx) {
        if (this.getAngle() === 0)
            return getx ? x_ : y_;
        var nx = this.layerToCanvas(x_, y_, true);
        var ny = this.layerToCanvas(x_, y_, false);
        this.disableAngle = true;
        var px = this.canvasToLayer(nx, ny, true);
        var py = this.canvasToLayer(nx, ny, true);
        this.disableAngle = false;
        return getx ? px : py;
    };
    Layer.prototype.saveToJSON = function() {
        var i, len, et;
        var o = {
            "s": this.scale,
            "a": this.angle,
            "vl": this.viewLeft,
            "vt": this.viewTop,
            "vr": this.viewRight,
            "vb": this.viewBottom,
            "v": this.visible,
            "bc": this.background_color,
            "t": this.transparent,
            "px": this.parallaxX,
            "py": this.parallaxY,
            "o": this.opacity,
            "zr": this.zoomRate,
            "fx": [],
            "cg": this.created_globals, // added r197; list of global UIDs already created
            "instances": []
        };
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            et = this.effect_types[i];
            o["fx"].push({
                "name": et.name,
                "active": et.active,
                "params": this.effect_params[et.index]
            });
        }
        return o;
    };
    Layer.prototype.loadFromJSON = function(o) {
        var i, j, len, p, inst, fx;
        this.scale = o["s"];
        this.angle = o["a"];
        this.viewLeft = o["vl"];
        this.viewTop = o["vt"];
        this.viewRight = o["vr"];
        this.viewBottom = o["vb"];
        this.visible = o["v"];
        this.background_color = o["bc"];
        this.transparent = o["t"];
        this.parallaxX = o["px"];
        this.parallaxY = o["py"];
        this.opacity = o["o"];
        this.zoomRate = o["zr"];
        this.created_globals = o["cg"] || []; // added r197
        cr.shallowAssignArray(this.initial_instances, this.startup_initial_instances);
        var temp_set = new cr.ObjectSet();
        for (i = 0, len = this.created_globals.length; i < len; ++i)
            temp_set.add(this.created_globals[i]);
        for (i = 0, j = 0, len = this.initial_instances.length; i < len; ++i) {
            if (!temp_set.contains(this.initial_instances[i][2])) // UID in element 2
            {
                this.initial_instances[j] = this.initial_instances[i];
                ++j;
            }
        }
        cr.truncateArray(this.initial_instances, j);
        var ofx = o["fx"];
        for (i = 0, len = ofx.length; i < len; i++) {
            fx = this.getEffectByName(ofx[i]["name"]);
            if (!fx)
                continue; // must've gone missing
            fx.active = ofx[i]["active"];
            this.effect_params[fx.index] = ofx[i]["params"];
        }
        this.updateActiveEffects();
        this.instances.sort(sort_by_zindex);
        this.zindices_stale = true;
    };
    cr.layer = Layer;
}());;
(function() {
    var allUniqueSolModifiers = [];

    function testSolsMatch(arr1, arr2) {
        var i, len = arr1.length;
        switch (len) {
            case 0:
                return true;
            case 1:
                return arr1[0] === arr2[0];
            case 2:
                return arr1[0] === arr2[0] && arr1[1] === arr2[1];
            default:
                for (i = 0; i < len; i++) {
                    if (arr1[i] !== arr2[i])
                        return false;
                }
                return true;
        }
    };

    function solArraySorter(t1, t2) {
        return t1.index - t2.index;
    };

    function findMatchingSolModifier(arr) {
        var i, len, u, temp, subarr;
        if (arr.length === 2) {
            if (arr[0].index > arr[1].index) {
                temp = arr[0];
                arr[0] = arr[1];
                arr[1] = temp;
            }
        } else if (arr.length > 2)
            arr.sort(solArraySorter); // so testSolsMatch compares in same order
        if (arr.length >= allUniqueSolModifiers.length)
            allUniqueSolModifiers.length = arr.length + 1;
        if (!allUniqueSolModifiers[arr.length])
            allUniqueSolModifiers[arr.length] = [];
        subarr = allUniqueSolModifiers[arr.length];
        for (i = 0, len = subarr.length; i < len; i++) {
            u = subarr[i];
            if (testSolsMatch(arr, u))
                return u;
        }
        subarr.push(arr);
        return arr;
    };

    function EventSheet(runtime, m) {
        this.runtime = runtime;
        this.triggers = {};
        this.fasttriggers = {};
        this.hasRun = false;
        this.includes = new cr.ObjectSet(); // all event sheets included by this sheet, at first-level indirection only
        this.deep_includes = []; // all includes from this sheet recursively, in trigger order
        this.already_included_sheets = []; // used while building deep_includes
        this.name = m[0];
        var em = m[1]; // events model
        this.events = []; // triggers won't make it to this array
        var i, len;
        for (i = 0, len = em.length; i < len; i++)
            this.init_event(em[i], null, this.events);
    };
    EventSheet.prototype.toString = function() {
        return this.name;
    };
    EventSheet.prototype.init_event = function(m, parent, nontriggers) {
        switch (m[0]) {
            case 0: // event block
                {
                    var block = new cr.eventblock(this, parent, m);
                    cr.seal(block);
                    if (block.orblock) {
                        nontriggers.push(block);
                        var i, len;
                        for (i = 0, len = block.conditions.length; i < len; i++) {
                            if (block.conditions[i].trigger)
                                this.init_trigger(block, i);
                        }
                    } else {
                        if (block.is_trigger())
                            this.init_trigger(block, 0);
                        else
                            nontriggers.push(block);
                    }
                    break;
                }
            case 1: // variable
                {
                    var v = new cr.eventvariable(this, parent, m);
                    cr.seal(v);
                    nontriggers.push(v);
                    break;
                }
            case 2: // include
                {
                    var inc = new cr.eventinclude(this, parent, m);
                    cr.seal(inc);
                    nontriggers.push(inc);
                    break;
                }
            default:
                ;
        }
    };
    EventSheet.prototype.postInit = function() {
        var i, len;
        for (i = 0, len = this.events.length; i < len; i++) {
            this.events[i].postInit(i < len - 1 && this.events[i + 1].is_else_block);
        }
    };
    EventSheet.prototype.updateDeepIncludes = function() {
        cr.clearArray(this.deep_includes);
        cr.clearArray(this.already_included_sheets);
        this.addDeepIncludes(this);
        cr.clearArray(this.already_included_sheets);
    };
    EventSheet.prototype.addDeepIncludes = function(root_sheet) {
        var i, len, inc, sheet;
        var deep_includes = root_sheet.deep_includes;
        var already_included_sheets = root_sheet.already_included_sheets;
        var arr = this.includes.valuesRef();
        for (i = 0, len = arr.length; i < len; ++i) {
            inc = arr[i];
            sheet = inc.include_sheet;
            if (!inc.isActive() || root_sheet === sheet || already_included_sheets.indexOf(sheet) > -1)
                continue;
            already_included_sheets.push(sheet);
            sheet.addDeepIncludes(root_sheet);
            deep_includes.push(sheet);
        }
    };
    EventSheet.prototype.run = function(from_include) {
        if (!this.runtime.resuming_breakpoint) {
            this.hasRun = true;
            if (!from_include)
                this.runtime.isRunningEvents = true;
        }
        var i, len;
        for (i = 0, len = this.events.length; i < len; i++) {
            var ev = this.events[i];
            ev.run();
            this.runtime.clearSol(ev.solModifiers);
            if (this.runtime.hasPendingInstances)
                this.runtime.ClearDeathRow();
        }
        if (!from_include)
            this.runtime.isRunningEvents = false;
    };

    function isPerformanceSensitiveTrigger(method) {
        if (cr.plugins_.Sprite && method === cr.plugins_.Sprite.prototype.cnds.OnFrameChanged) {
            return true;
        }
        return false;
    };
    EventSheet.prototype.init_trigger = function(trig, index) {
        if (!trig.orblock)
            this.runtime.triggers_to_postinit.push(trig); // needs to be postInit'd later
        var i, len;
        var cnd = trig.conditions[index];
        var type_name;
        if (cnd.type)
            type_name = cnd.type.name;
        else
            type_name = "system";
        var fasttrigger = cnd.fasttrigger;
        var triggers = (fasttrigger ? this.fasttriggers : this.triggers);
        if (!triggers[type_name])
            triggers[type_name] = [];
        var obj_entry = triggers[type_name];
        var method = cnd.func;
        if (fasttrigger) {
            if (!cnd.parameters.length) // no parameters
                return;
            var firstparam = cnd.parameters[0];
            if (firstparam.type !== 1 || // not a string param
                firstparam.expression.type !== 2) // not a string literal node
            {
                return;
            }
            var fastevs;
            var firstvalue = firstparam.expression.value.toLowerCase();
            var i, len;
            for (i = 0, len = obj_entry.length; i < len; i++) {
                if (obj_entry[i].method == method) {
                    fastevs = obj_entry[i].evs;
                    if (!fastevs[firstvalue])
                        fastevs[firstvalue] = [
                            [trig, index]
                        ];
                    else
                        fastevs[firstvalue].push([trig, index]);
                    return;
                }
            }
            fastevs = {};
            fastevs[firstvalue] = [
                [trig, index]
            ];
            obj_entry.push({
                method: method,
                evs: fastevs
            });
        } else {
            for (i = 0, len = obj_entry.length; i < len; i++) {
                if (obj_entry[i].method == method) {
                    obj_entry[i].evs.push([trig, index]);
                    return;
                }
            }
            if (isPerformanceSensitiveTrigger(method))
                obj_entry.unshift({
                    method: method,
                    evs: [
                        [trig, index]
                    ]
                });
            else
                obj_entry.push({
                    method: method,
                    evs: [
                        [trig, index]
                    ]
                });
        }
    };
    cr.eventsheet = EventSheet;

    function Selection(type) {
        this.type = type;
        this.instances = []; // subset of picked instances
        this.else_instances = []; // subset of unpicked instances
        this.select_all = true;
    };
    Selection.prototype.hasObjects = function() {
        if (this.select_all)
            return this.type.instances.length;
        else
            return this.instances.length;
    };
    Selection.prototype.getObjects = function() {
        if (this.select_all)
            return this.type.instances;
        else
            return this.instances;
    };
    /*
    Selection.prototype.ensure_picked = function (inst, skip_siblings)
    {
    	var i, len;
    	var orblock = inst.runtime.getCurrentEventStack().current_event.orblock;
    	if (this.select_all)
    	{
    		this.select_all = false;
    		if (orblock)
    		{
    			cr.shallowAssignArray(this.else_instances, inst.type.instances);
    			cr.arrayFindRemove(this.else_instances, inst);
    		}
    		this.instances.length = 1;
    		this.instances[0] = inst;
    	}
    	else
    	{
    		if (orblock)
    		{
    			i = this.else_instances.indexOf(inst);
    			if (i !== -1)
    			{
    				this.instances.push(this.else_instances[i]);
    				this.else_instances.splice(i, 1);
    			}
    		}
    		else
    		{
    			if (this.instances.indexOf(inst) === -1)
    				this.instances.push(inst);
    		}
    	}
    	if (!skip_siblings)
    	{
    	}
    };
    */
    Selection.prototype.pick_one = function(inst) {
        if (!inst)
            return;
        if (inst.runtime.getCurrentEventStack().current_event.orblock) {
            if (this.select_all) {
                cr.clearArray(this.instances);
                cr.shallowAssignArray(this.else_instances, inst.type.instances);
                this.select_all = false;
            }
            var i = this.else_instances.indexOf(inst);
            if (i !== -1) {
                this.instances.push(this.else_instances[i]);
                this.else_instances.splice(i, 1);
            }
        } else {
            this.select_all = false;
            cr.clearArray(this.instances);
            this.instances[0] = inst;
        }
    };
    cr.selection = Selection;

    function EventBlock(sheet, parent, m) {
        this.sheet = sheet;
        this.parent = parent;
        this.runtime = sheet.runtime;
        this.solModifiers = [];
        this.solModifiersIncludingParents = [];
        this.solWriterAfterCnds = false; // block does not change SOL after running its conditions
        this.group = false; // is group of events
        this.initially_activated = false; // if a group, is active on startup
        this.toplevelevent = false; // is an event block parented only by a top-level group
        this.toplevelgroup = false; // is parented only by other groups or is top-level (i.e. not in a subevent)
        this.has_else_block = false; // is followed by else
        ;
        this.conditions = [];
        this.actions = [];
        this.subevents = [];
        this.group_name = "";
        this.group = false;
        this.initially_activated = false;
        this.group_active = false;
        this.contained_includes = null;
        if (m[1]) {
            this.group_name = m[1][1].toLowerCase();
            this.group = true;
            this.initially_activated = !!m[1][0];
            this.contained_includes = [];
            this.group_active = this.initially_activated;
            this.runtime.allGroups.push(this);
            this.runtime.groups_by_name[this.group_name] = this;
        }
        this.orblock = m[2];
        this.sid = m[4];
        if (!this.group)
            this.runtime.blocksBySid[this.sid.toString()] = this;
        var i, len;
        var cm = m[5];
        for (i = 0, len = cm.length; i < len; i++) {
            var cnd = new cr.condition(this, cm[i]);
            cnd.index = i;
            cr.seal(cnd);
            this.conditions.push(cnd);
            /*
            if (cnd.is_logical())
            	this.is_logical = true;
            if (cnd.type && !cnd.type.plugin.singleglobal && this.cndReferences.indexOf(cnd.type) === -1)
            	this.cndReferences.push(cnd.type);
            */
            this.addSolModifier(cnd.type);
        }
        var am = m[6];
        for (i = 0, len = am.length; i < len; i++) {
            var act = new cr.action(this, am[i]);
            act.index = i;
            cr.seal(act);
            this.actions.push(act);
        }
        if (m.length === 8) {
            var em = m[7];
            for (i = 0, len = em.length; i < len; i++)
                this.sheet.init_event(em[i], this, this.subevents);
        }
        this.is_else_block = false;
        if (this.conditions.length) {
            this.is_else_block = (this.conditions[0].type == null && this.conditions[0].func == cr.system_object.prototype.cnds.Else);
        }
    };
    window["_c2hh_"] = "A16AF58E7D25594A6A684FA3B13239069089EECC";
    EventBlock.prototype.postInit = function(hasElse /*, prevBlock_*/ ) {
        var i, len;
        var p = this.parent;
        if (this.group) {
            this.toplevelgroup = true;
            while (p) {
                if (!p.group) {
                    this.toplevelgroup = false;
                    break;
                }
                p = p.parent;
            }
        }
        this.toplevelevent = !this.is_trigger() && (!this.parent || (this.parent.group && this.parent.toplevelgroup));
        this.has_else_block = !!hasElse;
        this.solModifiersIncludingParents = this.solModifiers.slice(0);
        p = this.parent;
        while (p) {
            for (i = 0, len = p.solModifiers.length; i < len; i++)
                this.addParentSolModifier(p.solModifiers[i]);
            p = p.parent;
        }
        this.solModifiers = findMatchingSolModifier(this.solModifiers);
        this.solModifiersIncludingParents = findMatchingSolModifier(this.solModifiersIncludingParents);
        var i, len /*, s*/ ;
        for (i = 0, len = this.conditions.length; i < len; i++)
            this.conditions[i].postInit();
        for (i = 0, len = this.actions.length; i < len; i++)
            this.actions[i].postInit();
        for (i = 0, len = this.subevents.length; i < len; i++) {
            this.subevents[i].postInit(i < len - 1 && this.subevents[i + 1].is_else_block);
        }
        /*
        if (this.is_else_block && this.prev_block)
        {
        	for (i = 0, len = this.prev_block.solModifiers.length; i < len; i++)
        	{
        		s = this.prev_block.solModifiers[i];
        		if (this.solModifiers.indexOf(s) === -1)
        			this.solModifiers.push(s);
        	}
        }
        */
    };
    EventBlock.prototype.setGroupActive = function(a) {
        if (this.group_active === !!a)
            return; // same state
        this.group_active = !!a;
        var i, len;
        for (i = 0, len = this.contained_includes.length; i < len; ++i) {
            this.contained_includes[i].updateActive();
        }
        if (len > 0 && this.runtime.running_layout.event_sheet)
            this.runtime.running_layout.event_sheet.updateDeepIncludes();
    };

    function addSolModifierToList(type, arr) {
        var i, len, t;
        if (!type)
            return;
        if (arr.indexOf(type) === -1)
            arr.push(type);
        if (type.is_contained) {
            for (i = 0, len = type.container.length; i < len; i++) {
                t = type.container[i];
                if (type === t)
                    continue; // already handled
                if (arr.indexOf(t) === -1)
                    arr.push(t);
            }
        }
    };
    EventBlock.prototype.addSolModifier = function(type) {
        addSolModifierToList(type, this.solModifiers);
    };
    EventBlock.prototype.addParentSolModifier = function(type) {
        addSolModifierToList(type, this.solModifiersIncludingParents);
    };
    EventBlock.prototype.setSolWriterAfterCnds = function() {
        this.solWriterAfterCnds = true;
        if (this.parent)
            this.parent.setSolWriterAfterCnds();
    };
    EventBlock.prototype.is_trigger = function() {
        if (!this.conditions.length) // no conditions
            return false;
        else
            return this.conditions[0].trigger;
    };
    EventBlock.prototype.run = function() {
        var i, len, c, any_true = false,
            cnd_result;
        var runtime = this.runtime;
        var evinfo = this.runtime.getCurrentEventStack();
        evinfo.current_event = this;
        var conditions = this.conditions;
        if (!this.is_else_block)
            evinfo.else_branch_ran = false;
        if (this.orblock) {
            if (conditions.length === 0)
                any_true = true; // be sure to run if empty block
            evinfo.cndindex = 0
            for (len = conditions.length; evinfo.cndindex < len; evinfo.cndindex++) {
                c = conditions[evinfo.cndindex];
                if (c.trigger) // skip triggers when running OR block
                    continue;
                cnd_result = c.run();
                if (cnd_result) // make sure all conditions run and run if any were true
                    any_true = true;
            }
            evinfo.last_event_true = any_true;
            if (any_true)
                this.run_actions_and_subevents();
        } else {
            evinfo.cndindex = 0
            for (len = conditions.length; evinfo.cndindex < len; evinfo.cndindex++) {
                cnd_result = conditions[evinfo.cndindex].run();
                if (!cnd_result) // condition failed
                {
                    evinfo.last_event_true = false;
                    if (this.toplevelevent && runtime.hasPendingInstances)
                        runtime.ClearDeathRow();
                    return; // bail out now
                }
            }
            evinfo.last_event_true = true;
            this.run_actions_and_subevents();
        }
        this.end_run(evinfo);
    };
    EventBlock.prototype.end_run = function(evinfo) {
        if (evinfo.last_event_true && this.has_else_block)
            evinfo.else_branch_ran = true;
        if (this.toplevelevent && this.runtime.hasPendingInstances)
            this.runtime.ClearDeathRow();
    };
    EventBlock.prototype.run_orblocktrigger = function(index) {
        var evinfo = this.runtime.getCurrentEventStack();
        evinfo.current_event = this;
        if (this.conditions[index].run()) {
            this.run_actions_and_subevents();
            this.runtime.getCurrentEventStack().last_event_true = true;
        }
    };
    EventBlock.prototype.run_actions_and_subevents = function() {
        var evinfo = this.runtime.getCurrentEventStack();
        var len;
        for (evinfo.actindex = 0, len = this.actions.length; evinfo.actindex < len; evinfo.actindex++) {
            if (this.actions[evinfo.actindex].run())
                return;
        }
        this.run_subevents();
    };
    EventBlock.prototype.resume_actions_and_subevents = function() {
        var evinfo = this.runtime.getCurrentEventStack();
        var len;
        for (len = this.actions.length; evinfo.actindex < len; evinfo.actindex++) {
            if (this.actions[evinfo.actindex].run())
                return;
        }
        this.run_subevents();
    };
    EventBlock.prototype.run_subevents = function() {
        if (!this.subevents.length)
            return;
        var i, len, subev, pushpop /*, skipped_pop = false, pop_modifiers = null*/ ;
        var last = this.subevents.length - 1;
        this.runtime.pushEventStack(this);
        if (this.solWriterAfterCnds) {
            for (i = 0, len = this.subevents.length; i < len; i++) {
                subev = this.subevents[i];
                pushpop = (!this.toplevelgroup || (!this.group && i < last));
                if (pushpop)
                    this.runtime.pushCopySol(subev.solModifiers);
                subev.run();
                if (pushpop)
                    this.runtime.popSol(subev.solModifiers);
                else
                    this.runtime.clearSol(subev.solModifiers);
            }
        } else {
            for (i = 0, len = this.subevents.length; i < len; i++) {
                this.subevents[i].run();
            }
        }
        this.runtime.popEventStack();
    };
    EventBlock.prototype.run_pretrigger = function() {
        var evinfo = this.runtime.getCurrentEventStack();
        evinfo.current_event = this;
        var any_true = false;
        var i, len;
        for (evinfo.cndindex = 0, len = this.conditions.length; evinfo.cndindex < len; evinfo.cndindex++) {;
            if (this.conditions[evinfo.cndindex].run())
                any_true = true;
            else if (!this.orblock) // condition failed (let OR blocks run all conditions anyway)
                return false; // bail out
        }
        return this.orblock ? any_true : true;
    };
    EventBlock.prototype.retrigger = function() {
        this.runtime.execcount++;
        var prevcndindex = this.runtime.getCurrentEventStack().cndindex;
        var len;
        var evinfo = this.runtime.pushEventStack(this);
        if (!this.orblock) {
            for (evinfo.cndindex = prevcndindex + 1, len = this.conditions.length; evinfo.cndindex < len; evinfo.cndindex++) {
                if (!this.conditions[evinfo.cndindex].run()) // condition failed
                {
                    this.runtime.popEventStack(); // moving up level of recursion
                    return false; // bail out
                }
            }
        }
        this.run_actions_and_subevents();
        this.runtime.popEventStack();
        return true; // ran an iteration
    };
    EventBlock.prototype.isFirstConditionOfType = function(cnd) {
        var cndindex = cnd.index;
        if (cndindex === 0)
            return true;
        --cndindex;
        for (; cndindex >= 0; --cndindex) {
            if (this.conditions[cndindex].type === cnd.type)
                return false;
        }
        return true;
    };
    cr.eventblock = EventBlock;

    function Condition(block, m) {
        this.block = block;
        this.sheet = block.sheet;
        this.runtime = block.runtime;
        this.parameters = [];
        this.results = [];
        this.extra = {}; // for plugins to stow away some custom info
        this.index = -1;
        this.anyParamVariesPerInstance = false;
        this.func = this.runtime.GetObjectReference(m[1]);;
        this.trigger = (m[3] > 0);
        this.fasttrigger = (m[3] === 2);
        this.looping = m[4];
        this.inverted = m[5];
        this.isstatic = m[6];
        this.sid = m[7];
        this.runtime.cndsBySid[this.sid.toString()] = this;
        if (m[0] === -1) // system object
        {
            this.type = null;
            this.run = this.run_system;
            this.behaviortype = null;
            this.beh_index = -1;
        } else {
            this.type = this.runtime.types_by_index[m[0]];;
            if (this.isstatic)
                this.run = this.run_static;
            else
                this.run = this.run_object;
            if (m[2]) {
                this.behaviortype = this.type.getBehaviorByName(m[2]);;
                this.beh_index = this.type.getBehaviorIndexByName(m[2]);;
            } else {
                this.behaviortype = null;
                this.beh_index = -1;
            }
            if (this.block.parent)
                this.block.parent.setSolWriterAfterCnds();
        }
        if (this.fasttrigger)
            this.run = this.run_true;
        if (m.length === 10) {
            var i, len;
            var em = m[9];
            for (i = 0, len = em.length; i < len; i++) {
                var param = new cr.parameter(this, em[i]);
                cr.seal(param);
                this.parameters.push(param);
            }
            this.results.length = em.length;
        }
    };
    Condition.prototype.postInit = function() {
        var i, len, p;
        for (i = 0, len = this.parameters.length; i < len; i++) {
            p = this.parameters[i];
            p.postInit();
            if (p.variesPerInstance)
                this.anyParamVariesPerInstance = true;
        }
    };
    /*
    Condition.prototype.is_logical = function ()
    {
    	return !this.type || this.type.plugin.singleglobal;
    };
    */
    Condition.prototype.run_true = function() {
        return true;
    };
    Condition.prototype.run_system = function() {
        var i, len;
        for (i = 0, len = this.parameters.length; i < len; i++)
            this.results[i] = this.parameters[i].get();
        return cr.xor(this.func.apply(this.runtime.system, this.results), this.inverted);
    };
    Condition.prototype.run_static = function() {
        var i, len;
        for (i = 0, len = this.parameters.length; i < len; i++)
            this.results[i] = this.parameters[i].get();
        var ret = this.func.apply(this.behaviortype ? this.behaviortype : this.type, this.results);
        this.type.applySolToContainer();
        return ret;
    };
    Condition.prototype.run_object = function() {
        var i, j, k, leni, lenj, p, ret, met, inst, s, sol2;
        var type = this.type;
        var sol = type.getCurrentSol();
        var is_orblock = this.block.orblock && !this.trigger; // triggers in OR blocks need to work normally
        var offset = 0;
        var is_contained = type.is_contained;
        var is_family = type.is_family;
        var family_index = type.family_index;
        var beh_index = this.beh_index;
        var is_beh = (beh_index > -1);
        var params_vary = this.anyParamVariesPerInstance;
        var parameters = this.parameters;
        var results = this.results;
        var inverted = this.inverted;
        var func = this.func;
        var arr, container;
        if (params_vary) {
            for (j = 0, lenj = parameters.length; j < lenj; ++j) {
                p = parameters[j];
                if (!p.variesPerInstance)
                    results[j] = p.get(0);
            }
        } else {
            for (j = 0, lenj = parameters.length; j < lenj; ++j)
                results[j] = parameters[j].get(0);
        }
        if (sol.select_all) {
            cr.clearArray(sol.instances); // clear contents
            cr.clearArray(sol.else_instances);
            arr = type.instances;
            for (i = 0, leni = arr.length; i < leni; ++i) {
                inst = arr[i];;
                if (params_vary) {
                    for (j = 0, lenj = parameters.length; j < lenj; ++j) {
                        p = parameters[j];
                        if (p.variesPerInstance)
                            results[j] = p.get(i); // default SOL index is current object
                    }
                }
                if (is_beh) {
                    offset = 0;
                    if (is_family) {
                        offset = inst.type.family_beh_map[family_index];
                    }
                    ret = func.apply(inst.behavior_insts[beh_index + offset], results);
                } else
                    ret = func.apply(inst, results);
                met = cr.xor(ret, inverted);
                if (met)
                    sol.instances.push(inst);
                else if (is_orblock) // in OR blocks, keep the instances not meeting the condition for subsequent testing
                    sol.else_instances.push(inst);
            }
            if (type.finish)
                type.finish(true);
            sol.select_all = false;
            type.applySolToContainer();
            return sol.hasObjects();
        } else {
            k = 0;
            var using_else_instances = (is_orblock && !this.block.isFirstConditionOfType(this));
            arr = (using_else_instances ? sol.else_instances : sol.instances);
            var any_true = false;
            for (i = 0, leni = arr.length; i < leni; ++i) {
                inst = arr[i];;
                if (params_vary) {
                    for (j = 0, lenj = parameters.length; j < lenj; ++j) {
                        p = parameters[j];
                        if (p.variesPerInstance)
                            results[j] = p.get(i); // default SOL index is current object
                    }
                }
                if (is_beh) {
                    offset = 0;
                    if (is_family) {
                        offset = inst.type.family_beh_map[family_index];
                    }
                    ret = func.apply(inst.behavior_insts[beh_index + offset], results);
                } else
                    ret = func.apply(inst, results);
                if (cr.xor(ret, inverted)) {
                    any_true = true;
                    if (using_else_instances) {
                        sol.instances.push(inst);
                        if (is_contained) {
                            for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                                s = inst.siblings[j];
                                s.type.getCurrentSol().instances.push(s);
                            }
                        }
                    } else {
                        arr[k] = inst;
                        if (is_contained) {
                            for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                                s = inst.siblings[j];
                                s.type.getCurrentSol().instances[k] = s;
                            }
                        }
                        k++;
                    }
                } else {
                    if (using_else_instances) {
                        arr[k] = inst;
                        if (is_contained) {
                            for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                                s = inst.siblings[j];
                                s.type.getCurrentSol().else_instances[k] = s;
                            }
                        }
                        k++;
                    } else if (is_orblock) {
                        sol.else_instances.push(inst);
                        if (is_contained) {
                            for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                                s = inst.siblings[j];
                                s.type.getCurrentSol().else_instances.push(s);
                            }
                        }
                    }
                }
            }
            cr.truncateArray(arr, k);
            if (is_contained) {
                container = type.container;
                for (i = 0, leni = container.length; i < leni; i++) {
                    sol2 = container[i].getCurrentSol();
                    if (using_else_instances)
                        cr.truncateArray(sol2.else_instances, k);
                    else
                        cr.truncateArray(sol2.instances, k);
                }
            }
            var pick_in_finish = any_true; // don't pick in finish() if we're only doing the logic test below
            if (using_else_instances && !any_true) {
                for (i = 0, leni = sol.instances.length; i < leni; i++) {
                    inst = sol.instances[i];
                    if (params_vary) {
                        for (j = 0, lenj = parameters.length; j < lenj; j++) {
                            p = parameters[j];
                            if (p.variesPerInstance)
                                results[j] = p.get(i);
                        }
                    }
                    if (is_beh)
                        ret = func.apply(inst.behavior_insts[beh_index], results);
                    else
                        ret = func.apply(inst, results);
                    if (cr.xor(ret, inverted)) {
                        any_true = true;
                        break; // got our flag, don't need to test any more
                    }
                }
            }
            if (type.finish)
                type.finish(pick_in_finish || is_orblock);
            return is_orblock ? any_true : sol.hasObjects();
        }
    };
    cr.condition = Condition;

    function Action(block, m) {
        this.block = block;
        this.sheet = block.sheet;
        this.runtime = block.runtime;
        this.parameters = [];
        this.results = [];
        this.extra = {}; // for plugins to stow away some custom info
        this.index = -1;
        this.anyParamVariesPerInstance = false;
        this.func = this.runtime.GetObjectReference(m[1]);;
        if (m[0] === -1) // system
        {
            this.type = null;
            this.run = this.run_system;
            this.behaviortype = null;
            this.beh_index = -1;
        } else {
            this.type = this.runtime.types_by_index[m[0]];;
            this.run = this.run_object;
            if (m[2]) {
                this.behaviortype = this.type.getBehaviorByName(m[2]);;
                this.beh_index = this.type.getBehaviorIndexByName(m[2]);;
            } else {
                this.behaviortype = null;
                this.beh_index = -1;
            }
        }
        this.sid = m[3];
        this.runtime.actsBySid[this.sid.toString()] = this;
        if (m.length === 6) {
            var i, len;
            var em = m[5];
            for (i = 0, len = em.length; i < len; i++) {
                var param = new cr.parameter(this, em[i]);
                cr.seal(param);
                this.parameters.push(param);
            }
            this.results.length = em.length;
        }
    };
    Action.prototype.postInit = function() {
        var i, len, p;
        for (i = 0, len = this.parameters.length; i < len; i++) {
            p = this.parameters[i];
            p.postInit();
            if (p.variesPerInstance)
                this.anyParamVariesPerInstance = true;
        }
    };
    Action.prototype.run_system = function() {
        var runtime = this.runtime;
        var i, len;
        var parameters = this.parameters;
        var results = this.results;
        for (i = 0, len = parameters.length; i < len; ++i)
            results[i] = parameters[i].get();
        return this.func.apply(runtime.system, results);
    };
    Action.prototype.run_object = function() {
        var type = this.type;
        var beh_index = this.beh_index;
        var family_index = type.family_index;
        var params_vary = this.anyParamVariesPerInstance;
        var parameters = this.parameters;
        var results = this.results;
        var func = this.func;
        var instances = type.getCurrentSol().getObjects();
        var is_family = type.is_family;
        var is_beh = (beh_index > -1);
        var i, j, leni, lenj, p, inst, offset;
        if (params_vary) {
            for (j = 0, lenj = parameters.length; j < lenj; ++j) {
                p = parameters[j];
                if (!p.variesPerInstance)
                    results[j] = p.get(0);
            }
        } else {
            for (j = 0, lenj = parameters.length; j < lenj; ++j)
                results[j] = parameters[j].get(0);
        }
        for (i = 0, leni = instances.length; i < leni; ++i) {
            inst = instances[i];
            if (params_vary) {
                for (j = 0, lenj = parameters.length; j < lenj; ++j) {
                    p = parameters[j];
                    if (p.variesPerInstance)
                        results[j] = p.get(i); // pass i to use as default SOL index
                }
            }
            if (is_beh) {
                offset = 0;
                if (is_family) {
                    offset = inst.type.family_beh_map[family_index];
                }
                func.apply(inst.behavior_insts[beh_index + offset], results);
            } else
                func.apply(inst, results);
        }
        return false;
    };
    cr.action = Action;
    var tempValues = [];
    var tempValuesPtr = -1;

    function pushTempValue() {
        tempValuesPtr++;
        if (tempValues.length === tempValuesPtr)
            tempValues.push(new cr.expvalue());
        return tempValues[tempValuesPtr];
    };

    function popTempValue() {
        tempValuesPtr--;
    };

    function Parameter(owner, m) {
        this.owner = owner;
        this.block = owner.block;
        this.sheet = owner.sheet;
        this.runtime = owner.runtime;
        this.type = m[0];
        this.expression = null;
        this.solindex = 0;
        this.get = null;
        this.combosel = 0;
        this.layout = null;
        this.key = 0;
        this.object = null;
        this.index = 0;
        this.varname = null;
        this.eventvar = null;
        this.fileinfo = null;
        this.subparams = null;
        this.variadicret = null;
        this.subparams = null;
        this.variadicret = null;
        this.variesPerInstance = false;
        var i, len, param;
        switch (m[0]) {
            case 0: // number
            case 7: // any
                this.expression = new cr.expNode(this, m[1]);
                this.solindex = 0;
                this.get = this.get_exp;
                break;
            case 1: // string
                this.expression = new cr.expNode(this, m[1]);
                this.solindex = 0;
                this.get = this.get_exp_str;
                break;
            case 5: // layer
                this.expression = new cr.expNode(this, m[1]);
                this.solindex = 0;
                this.get = this.get_layer;
                break;
            case 3: // combo
            case 8: // cmp
                this.combosel = m[1];
                this.get = this.get_combosel;
                break;
            case 6: // layout
                this.layout = this.runtime.layouts[m[1]];;
                this.get = this.get_layout;
                break;
            case 9: // keyb
                this.key = m[1];
                this.get = this.get_key;
                break;
            case 4: // object
                this.object = this.runtime.types_by_index[m[1]];;
                this.get = this.get_object;
                this.block.addSolModifier(this.object);
                if (this.owner instanceof cr.action)
                    this.block.setSolWriterAfterCnds();
                else if (this.block.parent)
                    this.block.parent.setSolWriterAfterCnds();
                break;
            case 10: // instvar
                this.index = m[1];
                if (owner.type && owner.type.is_family) {
                    this.get = this.get_familyvar;
                    this.variesPerInstance = true;
                } else
                    this.get = this.get_instvar;
                break;
            case 11: // eventvar
                this.varname = m[1];
                this.eventvar = null;
                this.get = this.get_eventvar;
                break;
            case 2: // audiofile	["name", ismusic]
            case 12: // fileinfo		"name"
                this.fileinfo = m[1];
                this.get = this.get_audiofile;
                break;
            case 13: // variadic
                this.get = this.get_variadic;
                this.subparams = [];
                this.variadicret = [];
                for (i = 1, len = m.length; i < len; i++) {
                    param = new cr.parameter(this.owner, m[i]);
                    cr.seal(param);
                    this.subparams.push(param);
                    this.variadicret.push(0);
                }
                break;
            default:
                ;
        }
    };
    Parameter.prototype.postInit = function() {
        var i, len;
        if (this.type === 11) // eventvar
        {
            this.eventvar = this.runtime.getEventVariableByName(this.varname, this.block.parent);;
        } else if (this.type === 13) // variadic, postInit all sub-params
        {
            for (i = 0, len = this.subparams.length; i < len; i++)
                this.subparams[i].postInit();
        }
        if (this.expression)
            this.expression.postInit();
    };
    Parameter.prototype.maybeVaryForType = function(t) {
        if (this.variesPerInstance)
            return; // already varies per instance, no need to check again
        if (!t)
            return; // never vary for system type
        if (!t.plugin.singleglobal) {
            this.variesPerInstance = true;
            return;
        }
    };
    Parameter.prototype.setVaries = function() {
        this.variesPerInstance = true;
    };
    Parameter.prototype.get_exp = function(solindex) {
        this.solindex = solindex || 0; // default SOL index to use
        var temp = pushTempValue();
        this.expression.get(temp);
        popTempValue();
        return temp.data; // return actual JS value, not expvalue
    };
    Parameter.prototype.get_exp_str = function(solindex) {
        this.solindex = solindex || 0; // default SOL index to use
        var temp = pushTempValue();
        this.expression.get(temp);
        popTempValue();
        if (cr.is_string(temp.data))
            return temp.data;
        else
            return "";
    };
    Parameter.prototype.get_object = function() {
        return this.object;
    };
    Parameter.prototype.get_combosel = function() {
        return this.combosel;
    };
    Parameter.prototype.get_layer = function(solindex) {
        this.solindex = solindex || 0; // default SOL index to use
        var temp = pushTempValue();
        this.expression.get(temp);
        popTempValue();
        if (temp.is_number())
            return this.runtime.getLayerByNumber(temp.data);
        else
            return this.runtime.getLayerByName(temp.data);
    }
    Parameter.prototype.get_layout = function() {
        return this.layout;
    };
    Parameter.prototype.get_key = function() {
        return this.key;
    };
    Parameter.prototype.get_instvar = function() {
        return this.index;
    };
    Parameter.prototype.get_familyvar = function(solindex_) {
        var solindex = solindex_ || 0;
        var familytype = this.owner.type;
        var realtype = null;
        var sol = familytype.getCurrentSol();
        var objs = sol.getObjects();
        if (objs.length)
            realtype = objs[solindex % objs.length].type;
        else if (sol.else_instances.length)
            realtype = sol.else_instances[solindex % sol.else_instances.length].type;
        else if (familytype.instances.length)
            realtype = familytype.instances[solindex % familytype.instances.length].type;
        else
            return 0;
        return this.index + realtype.family_var_map[familytype.family_index];
    };
    Parameter.prototype.get_eventvar = function() {
        return this.eventvar;
    };
    Parameter.prototype.get_audiofile = function() {
        return this.fileinfo;
    };
    Parameter.prototype.get_variadic = function() {
        var i, len;
        for (i = 0, len = this.subparams.length; i < len; i++) {
            this.variadicret[i] = this.subparams[i].get();
        }
        return this.variadicret;
    };
    cr.parameter = Parameter;

    function EventVariable(sheet, parent, m) {
        this.sheet = sheet;
        this.parent = parent;
        this.runtime = sheet.runtime;
        this.solModifiers = [];
        this.name = m[1];
        this.vartype = m[2];
        this.initial = m[3];
        this.is_static = !!m[4];
        this.is_constant = !!m[5];
        this.sid = m[6];
        this.runtime.varsBySid[this.sid.toString()] = this;
        this.data = this.initial; // note: also stored in event stack frame for local nonstatic nonconst vars
        if (this.parent) // local var
        {
            if (this.is_static || this.is_constant)
                this.localIndex = -1;
            else
                this.localIndex = this.runtime.stackLocalCount++;
            this.runtime.all_local_vars.push(this);
        } else // global var
        {
            this.localIndex = -1;
            this.runtime.all_global_vars.push(this);
        }
    };
    EventVariable.prototype.postInit = function() {
        this.solModifiers = findMatchingSolModifier(this.solModifiers);
    };
    EventVariable.prototype.setValue = function(x) {;
        var lvs = this.runtime.getCurrentLocalVarStack();
        if (!this.parent || this.is_static || !lvs)
            this.data = x;
        else // local nonstatic variable: use event stack to keep value at this level of recursion
        {
            if (this.localIndex >= lvs.length)
                lvs.length = this.localIndex + 1;
            lvs[this.localIndex] = x;
        }
    };
    EventVariable.prototype.getValue = function() {
        var lvs = this.runtime.getCurrentLocalVarStack();
        if (!this.parent || this.is_static || !lvs || this.is_constant)
            return this.data;
        else // local nonstatic variable
        {
            if (this.localIndex >= lvs.length) {
                return this.initial;
            }
            if (typeof lvs[this.localIndex] === "undefined") {
                return this.initial;
            }
            return lvs[this.localIndex];
        }
    };
    EventVariable.prototype.run = function() {
        if (this.parent && !this.is_static && !this.is_constant)
            this.setValue(this.initial);
    };
    cr.eventvariable = EventVariable;

    function EventInclude(sheet, parent, m) {
        this.sheet = sheet;
        this.parent = parent;
        this.runtime = sheet.runtime;
        this.solModifiers = [];
        this.include_sheet = null; // determined in postInit
        this.include_sheet_name = m[1];
        this.active = true;
    };
    EventInclude.prototype.toString = function() {
        return "include:" + this.include_sheet.toString();
    };
    EventInclude.prototype.postInit = function() {
        this.include_sheet = this.runtime.eventsheets[this.include_sheet_name];;;
        this.sheet.includes.add(this);
        this.solModifiers = findMatchingSolModifier(this.solModifiers);
        var p = this.parent;
        while (p) {
            if (p.group)
                p.contained_includes.push(this);
            p = p.parent;
        }
        this.updateActive();
    };
    EventInclude.prototype.run = function() {
        if (this.parent)
            this.runtime.pushCleanSol(this.runtime.types_by_index);
        if (!this.include_sheet.hasRun)
            this.include_sheet.run(true); // from include
        if (this.parent)
            this.runtime.popSol(this.runtime.types_by_index);
    };
    EventInclude.prototype.updateActive = function() {
        var p = this.parent;
        while (p) {
            if (p.group && !p.group_active) {
                this.active = false;
                return;
            }
            p = p.parent;
        }
        this.active = true;
    };
    EventInclude.prototype.isActive = function() {
        return this.active;
    };
    cr.eventinclude = EventInclude;

    function EventStackFrame() {
        this.temp_parents_arr = [];
        this.reset(null);
        cr.seal(this);
    };
    EventStackFrame.prototype.reset = function(cur_event) {
        this.current_event = cur_event;
        this.cndindex = 0;
        this.actindex = 0;
        cr.clearArray(this.temp_parents_arr);
        this.last_event_true = false;
        this.else_branch_ran = false;
        this.any_true_state = false;
    };
    EventStackFrame.prototype.isModifierAfterCnds = function() {
        if (this.current_event.solWriterAfterCnds)
            return true;
        if (this.cndindex < this.current_event.conditions.length - 1)
            return !!this.current_event.solModifiers.length;
        return false;
    };
    cr.eventStackFrame = EventStackFrame;
}());
(function() {
    function ExpNode(owner_, m) {
        this.owner = owner_;
        this.runtime = owner_.runtime;
        this.type = m[0];;
        this.get = [this.eval_int,
            this.eval_float,
            this.eval_string,
            this.eval_unaryminus,
            this.eval_add,
            this.eval_subtract,
            this.eval_multiply,
            this.eval_divide,
            this.eval_mod,
            this.eval_power,
            this.eval_and,
            this.eval_or,
            this.eval_equal,
            this.eval_notequal,
            this.eval_less,
            this.eval_lessequal,
            this.eval_greater,
            this.eval_greaterequal,
            this.eval_conditional,
            this.eval_system_exp,
            this.eval_object_exp,
            this.eval_instvar_exp,
            this.eval_behavior_exp,
            this.eval_eventvar_exp
        ][this.type];
        var paramsModel = null;
        this.value = null;
        this.first = null;
        this.second = null;
        this.third = null;
        this.func = null;
        this.results = null;
        this.parameters = null;
        this.object_type = null;
        this.beh_index = -1;
        this.instance_expr = null;
        this.varindex = -1;
        this.behavior_type = null;
        this.varname = null;
        this.eventvar = null;
        this.return_string = false;
        switch (this.type) {
            case 0: // int
            case 1: // float
            case 2: // string
                this.value = m[1];
                break;
            case 3: // unaryminus
                this.first = new cr.expNode(owner_, m[1]);
                break;
            case 18: // conditional
                this.first = new cr.expNode(owner_, m[1]);
                this.second = new cr.expNode(owner_, m[2]);
                this.third = new cr.expNode(owner_, m[3]);
                break;
            case 19: // system_exp
                this.func = this.runtime.GetObjectReference(m[1]);;
                if (this.func === cr.system_object.prototype.exps.random ||
                    this.func === cr.system_object.prototype.exps.choose) {
                    this.owner.setVaries();
                }
                this.results = [];
                this.parameters = [];
                if (m.length === 3) {
                    paramsModel = m[2];
                    this.results.length = paramsModel.length + 1; // must also fit 'ret'
                } else
                    this.results.length = 1; // to fit 'ret'
                break;
            case 20: // object_exp
                this.object_type = this.runtime.types_by_index[m[1]];;
                this.beh_index = -1;
                this.func = this.runtime.GetObjectReference(m[2]);
                this.return_string = m[3];
                if (cr.plugins_.Function && this.func === cr.plugins_.Function.prototype.exps.Call) {
                    this.owner.setVaries();
                }
                if (m[4])
                    this.instance_expr = new cr.expNode(owner_, m[4]);
                else
                    this.instance_expr = null;
                this.results = [];
                this.parameters = [];
                if (m.length === 6) {
                    paramsModel = m[5];
                    this.results.length = paramsModel.length + 1;
                } else
                    this.results.length = 1; // to fit 'ret'
                break;
            case 21: // instvar_exp
                this.object_type = this.runtime.types_by_index[m[1]];;
                this.return_string = m[2];
                if (m[3])
                    this.instance_expr = new cr.expNode(owner_, m[3]);
                else
                    this.instance_expr = null;
                this.varindex = m[4];
                break;
            case 22: // behavior_exp
                this.object_type = this.runtime.types_by_index[m[1]];;
                this.behavior_type = this.object_type.getBehaviorByName(m[2]);;
                this.beh_index = this.object_type.getBehaviorIndexByName(m[2]);
                this.func = this.runtime.GetObjectReference(m[3]);
                this.return_string = m[4];
                if (m[5])
                    this.instance_expr = new cr.expNode(owner_, m[5]);
                else
                    this.instance_expr = null;
                this.results = [];
                this.parameters = [];
                if (m.length === 7) {
                    paramsModel = m[6];
                    this.results.length = paramsModel.length + 1;
                } else
                    this.results.length = 1; // to fit 'ret'
                break;
            case 23: // eventvar_exp
                this.varname = m[1];
                this.eventvar = null; // assigned in postInit
                break;
        }
        this.owner.maybeVaryForType(this.object_type);
        if (this.type >= 4 && this.type <= 17) {
            this.first = new cr.expNode(owner_, m[1]);
            this.second = new cr.expNode(owner_, m[2]);
        }
        if (paramsModel) {
            var i, len;
            for (i = 0, len = paramsModel.length; i < len; i++)
                this.parameters.push(new cr.expNode(owner_, paramsModel[i]));
        }
        cr.seal(this);
    };
    ExpNode.prototype.postInit = function() {
        if (this.type === 23) // eventvar_exp
        {
            this.eventvar = this.owner.runtime.getEventVariableByName(this.varname, this.owner.block.parent);;
        }
        if (this.first)
            this.first.postInit();
        if (this.second)
            this.second.postInit();
        if (this.third)
            this.third.postInit();
        if (this.instance_expr)
            this.instance_expr.postInit();
        if (this.parameters) {
            var i, len;
            for (i = 0, len = this.parameters.length; i < len; i++)
                this.parameters[i].postInit();
        }
    };
    var tempValues = [];
    var tempValuesPtr = -1;

    function pushTempValue() {
        ++tempValuesPtr;
        if (tempValues.length === tempValuesPtr)
            tempValues.push(new cr.expvalue());
        return tempValues[tempValuesPtr];
    };

    function popTempValue() {
        --tempValuesPtr;
    };

    function eval_params(parameters, results, temp) {
        var i, len;
        for (i = 0, len = parameters.length; i < len; ++i) {
            parameters[i].get(temp);
            results[i + 1] = temp.data; // passing actual javascript value as argument instead of expvalue
        }
    }
    ExpNode.prototype.eval_system_exp = function(ret) {
        var parameters = this.parameters;
        var results = this.results;
        results[0] = ret;
        var temp = pushTempValue();
        eval_params(parameters, results, temp);
        popTempValue();
        this.func.apply(this.runtime.system, results);
    };
    ExpNode.prototype.eval_object_exp = function(ret) {
        var object_type = this.object_type;
        var results = this.results;
        var parameters = this.parameters;
        var instance_expr = this.instance_expr;
        var func = this.func;
        var index = this.owner.solindex; // default to parameter's intended SOL index
        var sol = object_type.getCurrentSol();
        var instances = sol.getObjects();
        if (!instances.length) {
            if (sol.else_instances.length)
                instances = sol.else_instances;
            else {
                if (this.return_string)
                    ret.set_string("");
                else
                    ret.set_int(0);
                return;
            }
        }
        results[0] = ret;
        ret.object_class = object_type; // so expression can access family type if need be
        var temp = pushTempValue();
        eval_params(parameters, results, temp);
        if (instance_expr) {
            instance_expr.get(temp);
            if (temp.is_number()) {
                index = temp.data;
                instances = object_type.instances; // pick from all instances, not SOL
            }
        }
        popTempValue();
        var len = instances.length;
        if (index >= len || index <= -len)
            index %= len; // wraparound
        if (index < 0)
            index += len;
        var returned_val = func.apply(instances[index], results);;
    };
    ExpNode.prototype.eval_behavior_exp = function(ret) {
        var object_type = this.object_type;
        var results = this.results;
        var parameters = this.parameters;
        var instance_expr = this.instance_expr;
        var beh_index = this.beh_index;
        var func = this.func;
        var index = this.owner.solindex; // default to parameter's intended SOL index
        var sol = object_type.getCurrentSol();
        var instances = sol.getObjects();
        if (!instances.length) {
            if (sol.else_instances.length)
                instances = sol.else_instances;
            else {
                if (this.return_string)
                    ret.set_string("");
                else
                    ret.set_int(0);
                return;
            }
        }
        results[0] = ret;
        ret.object_class = object_type; // so expression can access family type if need be
        var temp = pushTempValue();
        eval_params(parameters, results, temp);
        if (instance_expr) {
            instance_expr.get(temp);
            if (temp.is_number()) {
                index = temp.data;
                instances = object_type.instances; // pick from all instances, not SOL
            }
        }
        popTempValue();
        var len = instances.length;
        if (index >= len || index <= -len)
            index %= len; // wraparound
        if (index < 0)
            index += len;
        var inst = instances[index];
        var offset = 0;
        if (object_type.is_family) {
            offset = inst.type.family_beh_map[object_type.family_index];
        }
        var returned_val = func.apply(inst.behavior_insts[beh_index + offset], results);;
    };
    ExpNode.prototype.eval_instvar_exp = function(ret) {
        var instance_expr = this.instance_expr;
        var object_type = this.object_type;
        var varindex = this.varindex;
        var index = this.owner.solindex; // default to parameter's intended SOL index
        var sol = object_type.getCurrentSol();
        var instances = sol.getObjects();
        var inst;
        if (!instances.length) {
            if (sol.else_instances.length)
                instances = sol.else_instances;
            else {
                if (this.return_string)
                    ret.set_string("");
                else
                    ret.set_int(0);
                return;
            }
        }
        if (instance_expr) {
            var temp = pushTempValue();
            instance_expr.get(temp);
            if (temp.is_number()) {
                index = temp.data;
                var type_instances = object_type.instances;
                if (type_instances.length !== 0) // avoid NaN result with %
                {
                    index %= type_instances.length; // wraparound
                    if (index < 0) // offset
                        index += type_instances.length;
                }
                inst = object_type.getInstanceByIID(index);
                var to_ret = inst.instance_vars[varindex];
                if (cr.is_string(to_ret))
                    ret.set_string(to_ret);
                else
                    ret.set_float(to_ret);
                popTempValue();
                return; // done
            }
            popTempValue();
        }
        var len = instances.length;
        if (index >= len || index <= -len)
            index %= len; // wraparound
        if (index < 0)
            index += len;
        inst = instances[index];
        var offset = 0;
        if (object_type.is_family) {
            offset = inst.type.family_var_map[object_type.family_index];
        }
        var to_ret = inst.instance_vars[varindex + offset];
        if (cr.is_string(to_ret))
            ret.set_string(to_ret);
        else
            ret.set_float(to_ret);
    };
    ExpNode.prototype.eval_int = function(ret) {
        ret.type = cr.exptype.Integer;
        ret.data = this.value;
    };
    ExpNode.prototype.eval_float = function(ret) {
        ret.type = cr.exptype.Float;
        ret.data = this.value;
    };
    ExpNode.prototype.eval_string = function(ret) {
        ret.type = cr.exptype.String;
        ret.data = this.value;
    };
    ExpNode.prototype.eval_unaryminus = function(ret) {
        this.first.get(ret); // retrieve operand
        if (ret.is_number())
            ret.data = -ret.data;
    };
    ExpNode.prototype.eval_add = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            ret.data += temp.data; // both operands numbers: add
            if (temp.is_float())
                ret.make_float();
        }
        popTempValue();
    };
    ExpNode.prototype.eval_subtract = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            ret.data -= temp.data; // both operands numbers: subtract
            if (temp.is_float())
                ret.make_float();
        }
        popTempValue();
    };
    ExpNode.prototype.eval_multiply = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            ret.data *= temp.data; // both operands numbers: multiply
            if (temp.is_float())
                ret.make_float();
        }
        popTempValue();
    };
    ExpNode.prototype.eval_divide = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            ret.data /= temp.data; // both operands numbers: divide
            ret.make_float();
        }
        popTempValue();
    };
    ExpNode.prototype.eval_mod = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            ret.data %= temp.data; // both operands numbers: modulo
            if (temp.is_float())
                ret.make_float();
        }
        popTempValue();
    };
    ExpNode.prototype.eval_power = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            ret.data = Math.pow(ret.data, temp.data); // both operands numbers: raise to power
            if (temp.is_float())
                ret.make_float();
        }
        popTempValue();
    };
    ExpNode.prototype.eval_and = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (temp.is_string() || ret.is_string())
            this.eval_and_stringconcat(ret, temp);
        else
            this.eval_and_logical(ret, temp);
        popTempValue();
    };
    ExpNode.prototype.eval_and_stringconcat = function(ret, temp) {
        if (ret.is_string() && temp.is_string())
            this.eval_and_stringconcat_str_str(ret, temp);
        else
            this.eval_and_stringconcat_num(ret, temp);
    };
    ExpNode.prototype.eval_and_stringconcat_str_str = function(ret, temp) {
        ret.data += temp.data;
    };
    ExpNode.prototype.eval_and_stringconcat_num = function(ret, temp) {
        if (ret.is_string()) {
            ret.data += (Math.round(temp.data * 1e10) / 1e10).toString();
        } else {
            ret.set_string(ret.data.toString() + temp.data);
        }
    };
    ExpNode.prototype.eval_and_logical = function(ret, temp) {
        ret.set_int(ret.data && temp.data ? 1 : 0);
    };
    ExpNode.prototype.eval_or = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        if (ret.is_number() && temp.is_number()) {
            if (ret.data || temp.data)
                ret.set_int(1);
            else
                ret.set_int(0);
        }
        popTempValue();
    };
    ExpNode.prototype.eval_conditional = function(ret) {
        this.first.get(ret); // condition operand
        if (ret.data) // is true
            this.second.get(ret); // evaluate second operand to ret
        else
            this.third.get(ret); // evaluate third operand to ret
    };
    ExpNode.prototype.eval_equal = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        ret.set_int(ret.data === temp.data ? 1 : 0);
        popTempValue();
    };
    ExpNode.prototype.eval_notequal = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        ret.set_int(ret.data !== temp.data ? 1 : 0);
        popTempValue();
    };
    ExpNode.prototype.eval_less = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        ret.set_int(ret.data < temp.data ? 1 : 0);
        popTempValue();
    };
    ExpNode.prototype.eval_lessequal = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        ret.set_int(ret.data <= temp.data ? 1 : 0);
        popTempValue();
    };
    ExpNode.prototype.eval_greater = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        ret.set_int(ret.data > temp.data ? 1 : 0);
        popTempValue();
    };
    ExpNode.prototype.eval_greaterequal = function(ret) {
        this.first.get(ret); // left operand
        var temp = pushTempValue();
        this.second.get(temp); // right operand
        ret.set_int(ret.data >= temp.data ? 1 : 0);
        popTempValue();
    };
    ExpNode.prototype.eval_eventvar_exp = function(ret) {
        var val = this.eventvar.getValue();
        if (cr.is_number(val))
            ret.set_float(val);
        else
            ret.set_string(val);
    };
    cr.expNode = ExpNode;

    function ExpValue(type, data) {
        this.type = type || cr.exptype.Integer;
        this.data = data || 0;
        this.object_class = null;;;;
        if (this.type == cr.exptype.Integer)
            this.data = Math.floor(this.data);
        cr.seal(this);
    };
    ExpValue.prototype.is_int = function() {
        return this.type === cr.exptype.Integer;
    };
    ExpValue.prototype.is_float = function() {
        return this.type === cr.exptype.Float;
    };
    ExpValue.prototype.is_number = function() {
        return this.type === cr.exptype.Integer || this.type === cr.exptype.Float;
    };
    ExpValue.prototype.is_string = function() {
        return this.type === cr.exptype.String;
    };
    ExpValue.prototype.make_int = function() {
        if (!this.is_int()) {
            if (this.is_float())
                this.data = Math.floor(this.data); // truncate float
            else if (this.is_string())
                this.data = parseInt(this.data, 10);
            this.type = cr.exptype.Integer;
        }
    };
    ExpValue.prototype.make_float = function() {
        if (!this.is_float()) {
            if (this.is_string())
                this.data = parseFloat(this.data);
            this.type = cr.exptype.Float;
        }
    };
    ExpValue.prototype.make_string = function() {
        if (!this.is_string()) {
            this.data = this.data.toString();
            this.type = cr.exptype.String;
        }
    };
    ExpValue.prototype.set_int = function(val) {;
        this.type = cr.exptype.Integer;
        this.data = Math.floor(val);
    };
    ExpValue.prototype.set_float = function(val) {;
        this.type = cr.exptype.Float;
        this.data = val;
    };
    ExpValue.prototype.set_string = function(val) {;
        this.type = cr.exptype.String;
        this.data = val;
    };
    ExpValue.prototype.set_any = function(val) {
        if (cr.is_number(val)) {
            this.type = cr.exptype.Float;
            this.data = val;
        } else if (cr.is_string(val)) {
            this.type = cr.exptype.String;
            this.data = val.toString();
        } else {
            this.type = cr.exptype.Integer;
            this.data = 0;
        }
    };
    cr.expvalue = ExpValue;
    cr.exptype = {
        Integer: 0, // emulated; no native integer support in javascript
        Float: 1,
        String: 2
    };
}());;
cr.system_object = function(runtime) {
    this.runtime = runtime;
    this.waits = [];
};
cr.system_object.prototype.saveToJSON = function() {
    var o = {};
    var i, len, j, lenj, p, w, t, sobj;
    o["waits"] = [];
    var owaits = o["waits"];
    var waitobj;
    for (i = 0, len = this.waits.length; i < len; i++) {
        w = this.waits[i];
        waitobj = {
            "t": w.time,
            "st": w.signaltag,
            "s": w.signalled,
            "ev": w.ev.sid,
            "sm": [],
            "sols": {}
        };
        if (w.ev.actions[w.actindex])
            waitobj["act"] = w.ev.actions[w.actindex].sid;
        for (j = 0, lenj = w.solModifiers.length; j < lenj; j++)
            waitobj["sm"].push(w.solModifiers[j].sid);
        for (p in w.sols) {
            if (w.sols.hasOwnProperty(p)) {
                t = this.runtime.types_by_index[parseInt(p, 10)];;
                sobj = {
                    "sa": w.sols[p].sa,
                    "insts": []
                };
                for (j = 0, lenj = w.sols[p].insts.length; j < lenj; j++)
                    sobj["insts"].push(w.sols[p].insts[j].uid);
                waitobj["sols"][t.sid.toString()] = sobj;
            }
        }
        owaits.push(waitobj);
    }
    return o;
};
cr.system_object.prototype.loadFromJSON = function(o) {
    var owaits = o["waits"];
    var i, len, j, lenj, p, w, addWait, e, aindex, t, savedsol, nusol, inst;
    cr.clearArray(this.waits);
    for (i = 0, len = owaits.length; i < len; i++) {
        w = owaits[i];
        e = this.runtime.blocksBySid[w["ev"].toString()];
        if (!e)
            continue; // event must've gone missing
        aindex = -1;
        for (j = 0, lenj = e.actions.length; j < lenj; j++) {
            if (e.actions[j].sid === w["act"]) {
                aindex = j;
                break;
            }
        }
        if (aindex === -1)
            continue; // action must've gone missing
        addWait = {};
        addWait.sols = {};
        addWait.solModifiers = [];
        addWait.deleteme = false;
        addWait.time = w["t"];
        addWait.signaltag = w["st"] || "";
        addWait.signalled = !!w["s"];
        addWait.ev = e;
        addWait.actindex = aindex;
        for (j = 0, lenj = w["sm"].length; j < lenj; j++) {
            t = this.runtime.getObjectTypeBySid(w["sm"][j]);
            if (t)
                addWait.solModifiers.push(t);
        }
        for (p in w["sols"]) {
            if (w["sols"].hasOwnProperty(p)) {
                t = this.runtime.getObjectTypeBySid(parseInt(p, 10));
                if (!t)
                    continue; // type must've been deleted
                savedsol = w["sols"][p];
                nusol = {
                    sa: savedsol["sa"],
                    insts: []
                };
                for (j = 0, lenj = savedsol["insts"].length; j < lenj; j++) {
                    inst = this.runtime.getObjectByUID(savedsol["insts"][j]);
                    if (inst)
                        nusol.insts.push(inst);
                }
                addWait.sols[t.index.toString()] = nusol;
            }
        }
        this.waits.push(addWait);
    }
};
(function() {
    var sysProto = cr.system_object.prototype;

    function SysCnds() {};
    SysCnds.prototype.EveryTick = function() {
        return true;
    };
    SysCnds.prototype.OnLayoutStart = function() {
        return true;
    };
    SysCnds.prototype.OnLayoutEnd = function() {
        return true;
    };
    SysCnds.prototype.Compare = function(x, cmp, y) {
        return cr.do_cmp(x, cmp, y);
    };
    SysCnds.prototype.CompareTime = function(cmp, t) {
        var elapsed = this.runtime.kahanTime.sum;
        if (cmp === 0) {
            var cnd = this.runtime.getCurrentCondition();
            if (!cnd.extra["CompareTime_executed"]) {
                if (elapsed >= t) {
                    cnd.extra["CompareTime_executed"] = true;
                    return true;
                }
            }
            return false;
        }
        return cr.do_cmp(elapsed, cmp, t);
    };
    SysCnds.prototype.LayerVisible = function(layer) {
        if (!layer)
            return false;
        else
            return layer.visible;
    };
    SysCnds.prototype.LayerEmpty = function(layer) {
        if (!layer)
            return false;
        else
            return !layer.instances.length;
    };
    SysCnds.prototype.LayerCmpOpacity = function(layer, cmp, opacity_) {
        if (!layer)
            return false;
        return cr.do_cmp(layer.opacity * 100, cmp, opacity_);
    };
    SysCnds.prototype.Repeat = function(count) {
        var current_frame = this.runtime.getCurrentEventStack();
        var current_event = current_frame.current_event;
        var solModifierAfterCnds = current_frame.isModifierAfterCnds();
        var current_loop = this.runtime.pushLoopStack();
        var i;
        if (solModifierAfterCnds) {
            for (i = 0; i < count && !current_loop.stopped; i++) {
                this.runtime.pushCopySol(current_event.solModifiers);
                current_loop.index = i;
                current_event.retrigger();
                this.runtime.popSol(current_event.solModifiers);
            }
        } else {
            for (i = 0; i < count && !current_loop.stopped; i++) {
                current_loop.index = i;
                current_event.retrigger();
            }
        }
        this.runtime.popLoopStack();
        return false;
    };
    SysCnds.prototype.While = function(count) {
        var current_frame = this.runtime.getCurrentEventStack();
        var current_event = current_frame.current_event;
        var solModifierAfterCnds = current_frame.isModifierAfterCnds();
        var current_loop = this.runtime.pushLoopStack();
        var i;
        if (solModifierAfterCnds) {
            for (i = 0; !current_loop.stopped; i++) {
                this.runtime.pushCopySol(current_event.solModifiers);
                current_loop.index = i;
                if (!current_event.retrigger()) // one of the other conditions returned false
                    current_loop.stopped = true; // break
                this.runtime.popSol(current_event.solModifiers);
            }
        } else {
            for (i = 0; !current_loop.stopped; i++) {
                current_loop.index = i;
                if (!current_event.retrigger())
                    current_loop.stopped = true;
            }
        }
        this.runtime.popLoopStack();
        return false;
    };
    SysCnds.prototype.For = function(name, start, end) {
        var current_frame = this.runtime.getCurrentEventStack();
        var current_event = current_frame.current_event;
        var solModifierAfterCnds = current_frame.isModifierAfterCnds();
        var current_loop = this.runtime.pushLoopStack(name);
        var i;
        if (end < start) {
            if (solModifierAfterCnds) {
                for (i = start; i >= end && !current_loop.stopped; --i) // inclusive to end
                {
                    this.runtime.pushCopySol(current_event.solModifiers);
                    current_loop.index = i;
                    current_event.retrigger();
                    this.runtime.popSol(current_event.solModifiers);
                }
            } else {
                for (i = start; i >= end && !current_loop.stopped; --i) // inclusive to end
                {
                    current_loop.index = i;
                    current_event.retrigger();
                }
            }
        } else {
            if (solModifierAfterCnds) {
                for (i = start; i <= end && !current_loop.stopped; ++i) // inclusive to end
                {
                    this.runtime.pushCopySol(current_event.solModifiers);
                    current_loop.index = i;
                    current_event.retrigger();
                    this.runtime.popSol(current_event.solModifiers);
                }
            } else {
                for (i = start; i <= end && !current_loop.stopped; ++i) // inclusive to end
                {
                    current_loop.index = i;
                    current_event.retrigger();
                }
            }
        }
        this.runtime.popLoopStack();
        return false;
    };
    var foreach_instancestack = [];
    var foreach_instanceptr = -1;
    SysCnds.prototype.ForEach = function(obj) {
        var sol = obj.getCurrentSol();
        foreach_instanceptr++;
        if (foreach_instancestack.length === foreach_instanceptr)
            foreach_instancestack.push([]);
        var instances = foreach_instancestack[foreach_instanceptr];
        cr.shallowAssignArray(instances, sol.getObjects());
        var current_frame = this.runtime.getCurrentEventStack();
        var current_event = current_frame.current_event;
        var solModifierAfterCnds = current_frame.isModifierAfterCnds();
        var current_loop = this.runtime.pushLoopStack();
        var i, len, j, lenj, inst, s, sol2;
        var is_contained = obj.is_contained;
        if (solModifierAfterCnds) {
            for (i = 0, len = instances.length; i < len && !current_loop.stopped; i++) {
                this.runtime.pushCopySol(current_event.solModifiers);
                inst = instances[i];
                sol = obj.getCurrentSol();
                sol.select_all = false;
                cr.clearArray(sol.instances);
                sol.instances[0] = inst;
                if (is_contained) {
                    for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                        s = inst.siblings[j];
                        sol2 = s.type.getCurrentSol();
                        sol2.select_all = false;
                        cr.clearArray(sol2.instances);
                        sol2.instances[0] = s;
                    }
                }
                current_loop.index = i;
                current_event.retrigger();
                this.runtime.popSol(current_event.solModifiers);
            }
        } else {
            sol.select_all = false;
            cr.clearArray(sol.instances);
            for (i = 0, len = instances.length; i < len && !current_loop.stopped; i++) {
                inst = instances[i];
                sol.instances[0] = inst;
                if (is_contained) {
                    for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                        s = inst.siblings[j];
                        sol2 = s.type.getCurrentSol();
                        sol2.select_all = false;
                        cr.clearArray(sol2.instances);
                        sol2.instances[0] = s;
                    }
                }
                current_loop.index = i;
                current_event.retrigger();
            }
        }
        cr.clearArray(instances);
        this.runtime.popLoopStack();
        foreach_instanceptr--;
        return false;
    };

    function foreach_sortinstances(a, b) {
        var va = a.extra["c2_feo_val"];
        var vb = b.extra["c2_feo_val"];
        if (cr.is_number(va) && cr.is_number(vb))
            return va - vb;
        else {
            va = "" + va;
            vb = "" + vb;
            if (va < vb)
                return -1;
            else if (va > vb)
                return 1;
            else
                return 0;
        }
    };
    SysCnds.prototype.ForEachOrdered = function(obj, exp, order) {
        var sol = obj.getCurrentSol();
        foreach_instanceptr++;
        if (foreach_instancestack.length === foreach_instanceptr)
            foreach_instancestack.push([]);
        var instances = foreach_instancestack[foreach_instanceptr];
        cr.shallowAssignArray(instances, sol.getObjects());
        var current_frame = this.runtime.getCurrentEventStack();
        var current_event = current_frame.current_event;
        var current_condition = this.runtime.getCurrentCondition();
        var solModifierAfterCnds = current_frame.isModifierAfterCnds();
        var current_loop = this.runtime.pushLoopStack();
        var i, len, j, lenj, inst, s, sol2;
        for (i = 0, len = instances.length; i < len; i++) {
            instances[i].extra["c2_feo_val"] = current_condition.parameters[1].get(i);
        }
        instances.sort(foreach_sortinstances);
        if (order === 1)
            instances.reverse();
        var is_contained = obj.is_contained;
        if (solModifierAfterCnds) {
            for (i = 0, len = instances.length; i < len && !current_loop.stopped; i++) {
                this.runtime.pushCopySol(current_event.solModifiers);
                inst = instances[i];
                sol = obj.getCurrentSol();
                sol.select_all = false;
                cr.clearArray(sol.instances);
                sol.instances[0] = inst;
                if (is_contained) {
                    for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                        s = inst.siblings[j];
                        sol2 = s.type.getCurrentSol();
                        sol2.select_all = false;
                        cr.clearArray(sol2.instances);
                        sol2.instances[0] = s;
                    }
                }
                current_loop.index = i;
                current_event.retrigger();
                this.runtime.popSol(current_event.solModifiers);
            }
        } else {
            sol.select_all = false;
            cr.clearArray(sol.instances);
            for (i = 0, len = instances.length; i < len && !current_loop.stopped; i++) {
                inst = instances[i];
                sol.instances[0] = inst;
                if (is_contained) {
                    for (j = 0, lenj = inst.siblings.length; j < lenj; j++) {
                        s = inst.siblings[j];
                        sol2 = s.type.getCurrentSol();
                        sol2.select_all = false;
                        cr.clearArray(sol2.instances);
                        sol2.instances[0] = s;
                    }
                }
                current_loop.index = i;
                current_event.retrigger();
            }
        }
        cr.clearArray(instances);
        this.runtime.popLoopStack();
        foreach_instanceptr--;
        return false;
    };
    SysCnds.prototype.PickByComparison = function(obj_, exp_, cmp_, val_) {
        var i, len, k, inst;
        if (!obj_)
            return;
        foreach_instanceptr++;
        if (foreach_instancestack.length === foreach_instanceptr)
            foreach_instancestack.push([]);
        var tmp_instances = foreach_instancestack[foreach_instanceptr];
        var sol = obj_.getCurrentSol();
        cr.shallowAssignArray(tmp_instances, sol.getObjects());
        if (sol.select_all)
            cr.clearArray(sol.else_instances);
        var current_condition = this.runtime.getCurrentCondition();
        for (i = 0, k = 0, len = tmp_instances.length; i < len; i++) {
            inst = tmp_instances[i];
            tmp_instances[k] = inst;
            exp_ = current_condition.parameters[1].get(i);
            val_ = current_condition.parameters[3].get(i);
            if (cr.do_cmp(exp_, cmp_, val_)) {
                k++;
            } else {
                sol.else_instances.push(inst);
            }
        }
        cr.truncateArray(tmp_instances, k);
        sol.select_all = false;
        cr.shallowAssignArray(sol.instances, tmp_instances);
        cr.clearArray(tmp_instances);
        foreach_instanceptr--;
        obj_.applySolToContainer();
        return !!sol.instances.length;
    };
    SysCnds.prototype.PickByEvaluate = function(obj_, exp_) {
        var i, len, k, inst;
        if (!obj_)
            return;
        foreach_instanceptr++;
        if (foreach_instancestack.length === foreach_instanceptr)
            foreach_instancestack.push([]);
        var tmp_instances = foreach_instancestack[foreach_instanceptr];
        var sol = obj_.getCurrentSol();
        cr.shallowAssignArray(tmp_instances, sol.getObjects());
        if (sol.select_all)
            cr.clearArray(sol.else_instances);
        var current_condition = this.runtime.getCurrentCondition();
        for (i = 0, k = 0, len = tmp_instances.length; i < len; i++) {
            inst = tmp_instances[i];
            tmp_instances[k] = inst;
            exp_ = current_condition.parameters[1].get(i);
            if (exp_) {
                k++;
            } else {
                sol.else_instances.push(inst);
            }
        }
        cr.truncateArray(tmp_instances, k);
        sol.select_all = false;
        cr.shallowAssignArray(sol.instances, tmp_instances);
        cr.clearArray(tmp_instances);
        foreach_instanceptr--;
        obj_.applySolToContainer();
        return !!sol.instances.length;
    };
    SysCnds.prototype.TriggerOnce = function() {
        var cndextra = this.runtime.getCurrentCondition().extra;
        if (typeof cndextra["TriggerOnce_lastTick"] === "undefined")
            cndextra["TriggerOnce_lastTick"] = -1;
        var last_tick = cndextra["TriggerOnce_lastTick"];
        var cur_tick = this.runtime.tickcount;
        cndextra["TriggerOnce_lastTick"] = cur_tick;
        return this.runtime.layout_first_tick || last_tick !== cur_tick - 1;
    };
    SysCnds.prototype.Every = function(seconds) {
        var cnd = this.runtime.getCurrentCondition();
        var last_time = cnd.extra["Every_lastTime"] || 0;
        var cur_time = this.runtime.kahanTime.sum;
        if (typeof cnd.extra["Every_seconds"] === "undefined")
            cnd.extra["Every_seconds"] = seconds;
        var this_seconds = cnd.extra["Every_seconds"];
        if (cur_time >= last_time + this_seconds) {
            cnd.extra["Every_lastTime"] = last_time + this_seconds;
            if (cur_time >= cnd.extra["Every_lastTime"] + 0.04) {
                cnd.extra["Every_lastTime"] = cur_time;
            }
            cnd.extra["Every_seconds"] = seconds;
            return true;
        } else if (cur_time < last_time - 0.1) {
            cnd.extra["Every_lastTime"] = cur_time;
        }
        return false;
    };
    SysCnds.prototype.PickNth = function(obj, index) {
        if (!obj)
            return false;
        var sol = obj.getCurrentSol();
        var instances = sol.getObjects();
        index = cr.floor(index);
        if (index < 0 || index >= instances.length)
            return false;
        var inst = instances[index];
        sol.pick_one(inst);
        obj.applySolToContainer();
        return true;
    };
    SysCnds.prototype.PickRandom = function(obj) {
        if (!obj)
            return false;
        var sol = obj.getCurrentSol();
        var instances = sol.getObjects();
        var index = cr.floor(Math.random() * instances.length);
        if (index >= instances.length)
            return false;
        var inst = instances[index];
        sol.pick_one(inst);
        obj.applySolToContainer();
        return true;
    };
    SysCnds.prototype.CompareVar = function(v, cmp, val) {
        return cr.do_cmp(v.getValue(), cmp, val);
    };
    SysCnds.prototype.IsGroupActive = function(group) {
        var g = this.runtime.groups_by_name[group.toLowerCase()];
        return g && g.group_active;
    };
    SysCnds.prototype.IsPreview = function() {
        return typeof cr_is_preview !== "undefined";
    };
    SysCnds.prototype.PickAll = function(obj) {
        if (!obj)
            return false;
        if (!obj.instances.length)
            return false;
        var sol = obj.getCurrentSol();
        sol.select_all = true;
        obj.applySolToContainer();
        return true;
    };
    SysCnds.prototype.IsMobile = function() {
        return this.runtime.isMobile;
    };
    SysCnds.prototype.CompareBetween = function(x, a, b) {
        return x >= a && x <= b;
    };
    SysCnds.prototype.Else = function() {
        var current_frame = this.runtime.getCurrentEventStack();
        if (current_frame.else_branch_ran)
            return false; // another event in this else-if chain has run
        else
            return !current_frame.last_event_true;
        /*
		var current_frame = this.runtime.getCurrentEventStack();
        var current_event = current_frame.current_event;
		var prev_event = current_event.prev_block;
		if (!prev_event)
			return false;
		if (prev_event.is_logical)
			return !this.runtime.last_event_true;
		var i, len, j, lenj, s, sol, temp, inst, any_picked = false;
		for (i = 0, len = prev_event.cndReferences.length; i < len; i++)
		{
			s = prev_event.cndReferences[i];
			sol = s.getCurrentSol();
			if (sol.select_all || sol.instances.length === s.instances.length)
			{
				sol.select_all = false;
				sol.instances.length = 0;
			}
			else
			{
				if (sol.instances.length === 1 && sol.else_instances.length === 0 && s.instances.length >= 2)
				{
					inst = sol.instances[0];
					sol.instances.length = 0;
					for (j = 0, lenj = s.instances.length; j < lenj; j++)
					{
						if (s.instances[j] != inst)
							sol.instances.push(s.instances[j]);
					}
					any_picked = true;
				}
				else
				{
					temp = sol.instances;
					sol.instances = sol.else_instances;
					sol.else_instances = temp;
					any_picked = true;
				}
			}
		}
		return any_picked;
		*/
    };
    SysCnds.prototype.OnLoadFinished = function() {
        return true;
    };
    SysCnds.prototype.OnCanvasSnapshot = function() {
        return true;
    };
    SysCnds.prototype.EffectsSupported = function() {
        return !!this.runtime.glwrap;
    };
    SysCnds.prototype.OnSaveComplete = function() {
        return true;
    };
    SysCnds.prototype.OnSaveFailed = function() {
        return true;
    };
    SysCnds.prototype.OnLoadComplete = function() {
        return true;
    };
    SysCnds.prototype.OnLoadFailed = function() {
        return true;
    };
    SysCnds.prototype.ObjectUIDExists = function(u) {
        return !!this.runtime.getObjectByUID(u);
    };
    SysCnds.prototype.IsOnPlatform = function(p) {
        var rt = this.runtime;
        switch (p) {
            case 0: // HTML5 website
                return !rt.isDomFree && !rt.isNodeWebkit && !rt.isCordova && !rt.isWinJS && !rt.isWindowsPhone8 && !rt.isBlackberry10 && !rt.isAmazonWebApp;
            case 1: // iOS
                return rt.isiOS;
            case 2: // Android
                return rt.isAndroid;
            case 3: // Windows 8
                return rt.isWindows8App;
            case 4: // Windows Phone 8
                return rt.isWindowsPhone8;
            case 5: // Blackberry 10
                return rt.isBlackberry10;
            case 6: // Tizen
                return rt.isTizen;
            case 7: // CocoonJS
                return rt.isCocoonJs;
            case 8: // Cordova
                return rt.isCordova;
            case 9: // Scirra Arcade
                return rt.isArcade;
            case 10: // node-webkit
                return rt.isNodeWebkit;
            case 11: // crosswalk
                return rt.isCrosswalk;
            case 12: // amazon webapp
                return rt.isAmazonWebApp;
            case 13: // windows 10 app
                return rt.isWindows10;
            default: // should not be possible
                return false;
        }
    };
    var cacheRegex = null;
    var lastRegex = "";
    var lastFlags = "";

    function getRegex(regex_, flags_) {
        if (!cacheRegex || regex_ !== lastRegex || flags_ !== lastFlags) {
            cacheRegex = new RegExp(regex_, flags_);
            lastRegex = regex_;
            lastFlags = flags_;
        }
        cacheRegex.lastIndex = 0; // reset
        return cacheRegex;
    };
    SysCnds.prototype.RegexTest = function(str_, regex_, flags_) {
        var regex = getRegex(regex_, flags_);
        return regex.test(str_);
    };
    var tmp_arr = [];
    SysCnds.prototype.PickOverlappingPoint = function(obj_, x_, y_) {
        if (!obj_)
            return false;
        var sol = obj_.getCurrentSol();
        var instances = sol.getObjects();
        var current_event = this.runtime.getCurrentEventStack().current_event;
        var orblock = current_event.orblock;
        var cnd = this.runtime.getCurrentCondition();
        var i, len, inst, pick;
        if (sol.select_all) {
            cr.shallowAssignArray(tmp_arr, instances);
            cr.clearArray(sol.else_instances);
            sol.select_all = false;
            cr.clearArray(sol.instances);
        } else {
            if (orblock) {
                cr.shallowAssignArray(tmp_arr, sol.else_instances);
                cr.clearArray(sol.else_instances);
            } else {
                cr.shallowAssignArray(tmp_arr, instances);
                cr.clearArray(sol.instances);
            }
        }
        for (i = 0, len = tmp_arr.length; i < len; ++i) {
            inst = tmp_arr[i];
            inst.update_bbox();
            pick = cr.xor(inst.contains_pt(x_, y_), cnd.inverted);
            if (pick)
                sol.instances.push(inst);
            else
                sol.else_instances.push(inst);
        }
        obj_.applySolToContainer();
        return cr.xor(!!sol.instances.length, cnd.inverted);
    };
    SysCnds.prototype.IsNaN = function(n) {
        return !!isNaN(n);
    };
    SysCnds.prototype.AngleWithin = function(a1, within, a2) {
        return cr.angleDiff(cr.to_radians(a1), cr.to_radians(a2)) <= cr.to_radians(within);
    };
    SysCnds.prototype.IsClockwiseFrom = function(a1, a2) {
        return cr.angleClockwise(cr.to_radians(a1), cr.to_radians(a2));
    };
    SysCnds.prototype.IsBetweenAngles = function(a, la, ua) {
        var angle = cr.to_clamped_radians(a);
        var lower = cr.to_clamped_radians(la);
        var upper = cr.to_clamped_radians(ua);
        var obtuse = (!cr.angleClockwise(upper, lower));
        if (obtuse)
            return !(!cr.angleClockwise(angle, lower) && cr.angleClockwise(angle, upper));
        else
            return cr.angleClockwise(angle, lower) && !cr.angleClockwise(angle, upper);
    };
    SysCnds.prototype.IsValueType = function(x, t) {
        if (typeof x === "number")
            return t === 0;
        else // string
            return t === 1;
    };
    sysProto.cnds = new SysCnds();

    function SysActs() {};
    SysActs.prototype.GoToLayout = function(to) {
        if (this.runtime.isloading)
            return; // cannot change layout while loading on loader layout
        if (this.runtime.changelayout)
            return; // already changing to a different layout
        ;
        this.runtime.changelayout = to;
    };
    SysActs.prototype.NextPrevLayout = function(prev) {
        if (this.runtime.isloading)
            return; // cannot change layout while loading on loader layout
        if (this.runtime.changelayout)
            return; // already changing to a different layout
        var index = this.runtime.layouts_by_index.indexOf(this.runtime.running_layout);
        if (prev && index === 0)
            return; // cannot go to previous layout from first layout
        if (!prev && index === this.runtime.layouts_by_index.length - 1)
            return; // cannot go to next layout from last layout
        var to = this.runtime.layouts_by_index[index + (prev ? -1 : 1)];;
        this.runtime.changelayout = to;
    };
    SysActs.prototype.CreateObject = function(obj, layer, x, y) {
        if (!layer || !obj)
            return;
        var inst = this.runtime.createInstance(obj, layer, x, y);
        if (!inst)
            return;
        this.runtime.isInOnDestroy++;
        var i, len, s;
        this.runtime.trigger(Object.getPrototypeOf(obj.plugin).cnds.OnCreated, inst);
        if (inst.is_contained) {
            for (i = 0, len = inst.siblings.length; i < len; i++) {
                s = inst.siblings[i];
                this.runtime.trigger(Object.getPrototypeOf(s.type.plugin).cnds.OnCreated, s);
            }
        }
        this.runtime.isInOnDestroy--;
        var sol = obj.getCurrentSol();
        sol.select_all = false;
        cr.clearArray(sol.instances);
        sol.instances[0] = inst;
        if (inst.is_contained) {
            for (i = 0, len = inst.siblings.length; i < len; i++) {
                s = inst.siblings[i];
                sol = s.type.getCurrentSol();
                sol.select_all = false;
                cr.clearArray(sol.instances);
                sol.instances[0] = s;
            }
        }
    };
    SysActs.prototype.SetLayerVisible = function(layer, visible_) {
        if (!layer)
            return;
        if (layer.visible !== visible_) {
            layer.visible = visible_;
            this.runtime.redraw = true;
        }
    };
    SysActs.prototype.SetLayerOpacity = function(layer, opacity_) {
        if (!layer)
            return;
        opacity_ = cr.clamp(opacity_ / 100, 0, 1);
        if (layer.opacity !== opacity_) {
            layer.opacity = opacity_;
            this.runtime.redraw = true;
        }
    };
    SysActs.prototype.SetLayerScaleRate = function(layer, sr) {
        if (!layer)
            return;
        if (layer.zoomRate !== sr) {
            layer.zoomRate = sr;
            this.runtime.redraw = true;
        }
    };
    SysActs.prototype.SetLayerForceOwnTexture = function(layer, f) {
        if (!layer)
            return;
        f = !!f;
        if (layer.forceOwnTexture !== f) {
            layer.forceOwnTexture = f;
            this.runtime.redraw = true;
        }
    };
    SysActs.prototype.SetLayoutScale = function(s) {
        if (!this.runtime.running_layout)
            return;
        if (this.runtime.running_layout.scale !== s) {
            this.runtime.running_layout.scale = s;
            this.runtime.running_layout.boundScrolling();
            this.runtime.redraw = true;
        }
    };
    SysActs.prototype.ScrollX = function(x) {
        this.runtime.running_layout.scrollToX(x);
    };
    SysActs.prototype.ScrollY = function(y) {
        this.runtime.running_layout.scrollToY(y);
    };
    SysActs.prototype.Scroll = function(x, y) {
        this.runtime.running_layout.scrollToX(x);
        this.runtime.running_layout.scrollToY(y);
    };
    SysActs.prototype.ScrollToObject = function(obj) {
        var inst = obj.getFirstPicked();
        if (inst) {
            this.runtime.running_layout.scrollToX(inst.x);
            this.runtime.running_layout.scrollToY(inst.y);
        }
    };
    SysActs.prototype.SetVar = function(v, x) {;
        if (v.vartype === 0) {
            if (cr.is_number(x))
                v.setValue(x);
            else
                v.setValue(parseFloat(x));
        } else if (v.vartype === 1)
            v.setValue(x.toString());
    };
    SysActs.prototype.AddVar = function(v, x) {;
        if (v.vartype === 0) {
            if (cr.is_number(x))
                v.setValue(v.getValue() + x);
            else
                v.setValue(v.getValue() + parseFloat(x));
        } else if (v.vartype === 1)
            v.setValue(v.getValue() + x.toString());
    };
    SysActs.prototype.SubVar = function(v, x) {;
        if (v.vartype === 0) {
            if (cr.is_number(x))
                v.setValue(v.getValue() - x);
            else
                v.setValue(v.getValue() - parseFloat(x));
        }
    };
    SysActs.prototype.SetGroupActive = function(group, active) {
        var g = this.runtime.groups_by_name[group.toLowerCase()];
        if (!g)
            return;
        switch (active) {
            case 0:
                g.setGroupActive(false);
                break;
            case 1:
                g.setGroupActive(true);
                break;
            case 2:
                g.setGroupActive(!g.group_active);
                break;
        }
    };
    SysActs.prototype.SetTimescale = function(ts_) {
        var ts = ts_;
        if (ts < 0)
            ts = 0;
        this.runtime.timescale = ts;
    };
    SysActs.prototype.SetObjectTimescale = function(obj, ts_) {
        var ts = ts_;
        if (ts < 0)
            ts = 0;
        if (!obj)
            return;
        var sol = obj.getCurrentSol();
        var instances = sol.getObjects();
        var i, len;
        for (i = 0, len = instances.length; i < len; i++) {
            instances[i].my_timescale = ts;
        }
    };
    SysActs.prototype.RestoreObjectTimescale = function(obj) {
        if (!obj)
            return false;
        var sol = obj.getCurrentSol();
        var instances = sol.getObjects();
        var i, len;
        for (i = 0, len = instances.length; i < len; i++) {
            instances[i].my_timescale = -1.0;
        }
    };
    var waitobjrecycle = [];

    function allocWaitObject() {
        var w;
        if (waitobjrecycle.length)
            w = waitobjrecycle.pop();
        else {
            w = {};
            w.sols = {};
            w.solModifiers = [];
        }
        w.deleteme = false;
        return w;
    };

    function freeWaitObject(w) {
        cr.wipe(w.sols);
        cr.clearArray(w.solModifiers);
        waitobjrecycle.push(w);
    };
    var solstateobjects = [];

    function allocSolStateObject() {
        var s;
        if (solstateobjects.length)
            s = solstateobjects.pop();
        else {
            s = {};
            s.insts = [];
        }
        s.sa = false;
        return s;
    };

    function freeSolStateObject(s) {
        cr.clearArray(s.insts);
        solstateobjects.push(s);
    };
    SysActs.prototype.Wait = function(seconds) {
        if (seconds < 0)
            return;
        var i, len, s, t, ss;
        var evinfo = this.runtime.getCurrentEventStack();
        var waitobj = allocWaitObject();
        waitobj.time = this.runtime.kahanTime.sum + seconds;
        waitobj.signaltag = "";
        waitobj.signalled = false;
        waitobj.ev = evinfo.current_event;
        waitobj.actindex = evinfo.actindex + 1; // pointing at next action
        for (i = 0, len = this.runtime.types_by_index.length; i < len; i++) {
            t = this.runtime.types_by_index[i];
            s = t.getCurrentSol();
            if (s.select_all && evinfo.current_event.solModifiers.indexOf(t) === -1)
                continue;
            waitobj.solModifiers.push(t);
            ss = allocSolStateObject();
            ss.sa = s.select_all;
            cr.shallowAssignArray(ss.insts, s.instances);
            waitobj.sols[i.toString()] = ss;
        }
        this.waits.push(waitobj);
        return true;
    };
    SysActs.prototype.WaitForSignal = function(tag) {
        var i, len, s, t, ss;
        var evinfo = this.runtime.getCurrentEventStack();
        var waitobj = allocWaitObject();
        waitobj.time = -1;
        waitobj.signaltag = tag.toLowerCase();
        waitobj.signalled = false;
        waitobj.ev = evinfo.current_event;
        waitobj.actindex = evinfo.actindex + 1; // pointing at next action
        for (i = 0, len = this.runtime.types_by_index.length; i < len; i++) {
            t = this.runtime.types_by_index[i];
            s = t.getCurrentSol();
            if (s.select_all && evinfo.current_event.solModifiers.indexOf(t) === -1)
                continue;
            waitobj.solModifiers.push(t);
            ss = allocSolStateObject();
            ss.sa = s.select_all;
            cr.shallowAssignArray(ss.insts, s.instances);
            waitobj.sols[i.toString()] = ss;
        }
        this.waits.push(waitobj);
        return true;
    };
    SysActs.prototype.Signal = function(tag) {
        var lowertag = tag.toLowerCase();
        var i, len, w;
        for (i = 0, len = this.waits.length; i < len; ++i) {
            w = this.waits[i];
            if (w.time !== -1)
                continue; // timer wait, ignore
            if (w.signaltag === lowertag) // waiting for this signal
                w.signalled = true; // will run on next check
        }
    };
    SysActs.prototype.SetLayerScale = function(layer, scale) {
        if (!layer)
            return;
        if (layer.scale === scale)
            return;
        layer.scale = scale;
        this.runtime.redraw = true;
    };
    SysActs.prototype.ResetGlobals = function() {
        var i, len, g;
        for (i = 0, len = this.runtime.all_global_vars.length; i < len; i++) {
            g = this.runtime.all_global_vars[i];
            g.data = g.initial;
        }
    };
    SysActs.prototype.SetLayoutAngle = function(a) {
        a = cr.to_radians(a);
        a = cr.clamp_angle(a);
        if (this.runtime.running_layout) {
            if (this.runtime.running_layout.angle !== a) {
                this.runtime.running_layout.angle = a;
                this.runtime.redraw = true;
            }
        }
    };
    SysActs.prototype.SetLayerAngle = function(layer, a) {
        if (!layer)
            return;
        a = cr.to_radians(a);
        a = cr.clamp_angle(a);
        if (layer.angle === a)
            return;
        layer.angle = a;
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayerParallax = function(layer, px, py) {
        if (!layer)
            return;
        if (layer.parallaxX === px / 100 && layer.parallaxY === py / 100)
            return;
        layer.parallaxX = px / 100;
        layer.parallaxY = py / 100;
        if (layer.parallaxX !== 1 || layer.parallaxY !== 1) {
            var i, len, instances = layer.instances;
            for (i = 0, len = instances.length; i < len; ++i) {
                instances[i].type.any_instance_parallaxed = true;
            }
        }
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayerBackground = function(layer, c) {
        if (!layer)
            return;
        var r = cr.GetRValue(c);
        var g = cr.GetGValue(c);
        var b = cr.GetBValue(c);
        if (layer.background_color[0] === r && layer.background_color[1] === g && layer.background_color[2] === b)
            return;
        layer.background_color[0] = r;
        layer.background_color[1] = g;
        layer.background_color[2] = b;
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayerTransparent = function(layer, t) {
        if (!layer)
            return;
        if (!!t === !!layer.transparent)
            return;
        layer.transparent = !!t;
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayerBlendMode = function(layer, bm) {
        if (!layer)
            return;
        if (layer.blend_mode === bm)
            return;
        layer.blend_mode = bm;
        layer.compositeOp = cr.effectToCompositeOp(layer.blend_mode);
        if (this.runtime.gl)
            cr.setGLBlend(layer, layer.blend_mode, this.runtime.gl);
        this.runtime.redraw = true;
    };
    SysActs.prototype.StopLoop = function() {
        if (this.runtime.loop_stack_index < 0)
            return; // no loop currently running
        this.runtime.getCurrentLoop().stopped = true;
    };
    SysActs.prototype.GoToLayoutByName = function(layoutname) {
        if (this.runtime.isloading)
            return; // cannot change layout while loading on loader layout
        if (this.runtime.changelayout)
            return; // already changing to different layout
        ;
        var l;
        for (l in this.runtime.layouts) {
            if (this.runtime.layouts.hasOwnProperty(l) && cr.equals_nocase(l, layoutname)) {
                this.runtime.changelayout = this.runtime.layouts[l];
                return;
            }
        }
    };
    SysActs.prototype.RestartLayout = function(layoutname) {
        if (this.runtime.isloading)
            return; // cannot restart loader layouts
        if (this.runtime.changelayout)
            return; // already changing to a different layout
        ;
        if (!this.runtime.running_layout)
            return;
        this.runtime.changelayout = this.runtime.running_layout;
        var i, len, g;
        for (i = 0, len = this.runtime.allGroups.length; i < len; i++) {
            g = this.runtime.allGroups[i];
            g.setGroupActive(g.initially_activated);
        }
    };
    SysActs.prototype.SnapshotCanvas = function(format_, quality_) {
        this.runtime.doCanvasSnapshot(format_ === 0 ? "image/png" : "image/jpeg", quality_ / 100);
    };
    SysActs.prototype.SetCanvasSize = function(w, h) {
        if (w <= 0 || h <= 0)
            return;
        var mode = this.runtime.fullscreen_mode;
        var isfullscreen = (document["mozFullScreen"] || document["webkitIsFullScreen"] || !!document["msFullscreenElement"] || document["fullScreen"] || this.runtime.isNodeFullscreen);
        if (isfullscreen && this.runtime.fullscreen_scaling > 0)
            mode = this.runtime.fullscreen_scaling;
        if (mode === 0) {
            this.runtime["setSize"](w, h, true);
        } else {
            this.runtime.original_width = w;
            this.runtime.original_height = h;
            this.runtime["setSize"](this.runtime.lastWindowWidth, this.runtime.lastWindowHeight, true);
        }
    };
    SysActs.prototype.SetLayoutEffectEnabled = function(enable_, effectname_) {
        if (!this.runtime.running_layout || !this.runtime.glwrap)
            return;
        var et = this.runtime.running_layout.getEffectByName(effectname_);
        if (!et)
            return; // effect name not found
        var enable = (enable_ === 1);
        if (et.active == enable)
            return; // no change
        et.active = enable;
        this.runtime.running_layout.updateActiveEffects();
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayerEffectEnabled = function(layer, enable_, effectname_) {
        if (!layer || !this.runtime.glwrap)
            return;
        var et = layer.getEffectByName(effectname_);
        if (!et)
            return; // effect name not found
        var enable = (enable_ === 1);
        if (et.active == enable)
            return; // no change
        et.active = enable;
        layer.updateActiveEffects();
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayoutEffectParam = function(effectname_, index_, value_) {
        if (!this.runtime.running_layout || !this.runtime.glwrap)
            return;
        var et = this.runtime.running_layout.getEffectByName(effectname_);
        if (!et)
            return; // effect name not found
        var params = this.runtime.running_layout.effect_params[et.index];
        index_ = Math.floor(index_);
        if (index_ < 0 || index_ >= params.length)
            return; // effect index out of bounds
        if (this.runtime.glwrap.getProgramParameterType(et.shaderindex, index_) === 1)
            value_ /= 100.0;
        if (params[index_] === value_)
            return; // no change
        params[index_] = value_;
        if (et.active)
            this.runtime.redraw = true;
    };
    SysActs.prototype.SetLayerEffectParam = function(layer, effectname_, index_, value_) {
        if (!layer || !this.runtime.glwrap)
            return;
        var et = layer.getEffectByName(effectname_);
        if (!et)
            return; // effect name not found
        var params = layer.effect_params[et.index];
        index_ = Math.floor(index_);
        if (index_ < 0 || index_ >= params.length)
            return; // effect index out of bounds
        if (this.runtime.glwrap.getProgramParameterType(et.shaderindex, index_) === 1)
            value_ /= 100.0;
        if (params[index_] === value_)
            return; // no change
        params[index_] = value_;
        if (et.active)
            this.runtime.redraw = true;
    };
    SysActs.prototype.SaveState = function(slot_) {
        this.runtime.saveToSlot = slot_;
    };
    SysActs.prototype.LoadState = function(slot_) {
        this.runtime.loadFromSlot = slot_;
    };
    SysActs.prototype.LoadStateJSON = function(jsonstr_) {
        this.runtime.loadFromJson = jsonstr_;
    };
    SysActs.prototype.SetHalfFramerateMode = function(set_) {
        this.runtime.halfFramerateMode = (set_ !== 0);
    };
    SysActs.prototype.SetFullscreenQuality = function(q) {
        var isfullscreen = (document["mozFullScreen"] || document["webkitIsFullScreen"] || !!document["msFullscreenElement"] || document["fullScreen"] || this.isNodeFullscreen);
        if (!isfullscreen && this.runtime.fullscreen_mode === 0)
            return;
        this.runtime.wantFullscreenScalingQuality = (q !== 0);
        this.runtime["setSize"](this.runtime.lastWindowWidth, this.runtime.lastWindowHeight, true);
    };
    SysActs.prototype.ResetPersisted = function() {
        var i, len;
        for (i = 0, len = this.runtime.layouts_by_index.length; i < len; ++i) {
            this.runtime.layouts_by_index[i].persist_data = {};
            this.runtime.layouts_by_index[i].first_visit = true;
        }
    };
    SysActs.prototype.RecreateInitialObjects = function(obj, x1, y1, x2, y2) {
        if (!obj)
            return;
        this.runtime.running_layout.recreateInitialObjects(obj, x1, y1, x2, y2);
    };
    SysActs.prototype.SetPixelRounding = function(m) {
        this.runtime.pixel_rounding = (m !== 0);
        this.runtime.redraw = true;
    };
    SysActs.prototype.SetMinimumFramerate = function(f) {
        if (f < 1)
            f = 1;
        if (f > 120)
            f = 120;
        this.runtime.minimumFramerate = f;
    };

    function SortZOrderList(a, b) {
        var layerA = a[0];
        var layerB = b[0];
        var diff = layerA - layerB;
        if (diff !== 0)
            return diff;
        var indexA = a[1];
        var indexB = b[1];
        return indexA - indexB;
    };

    function SortInstancesByValue(a, b) {
        return a[1] - b[1];
    };
    SysActs.prototype.SortZOrderByInstVar = function(obj, iv) {
        if (!obj)
            return;
        var i, len, inst, value, r, layer, toZ;
        var sol = obj.getCurrentSol();
        var pickedInstances = sol.getObjects();
        var zOrderList = [];
        var instValues = [];
        var layout = this.runtime.running_layout;
        var isFamily = obj.is_family;
        var familyIndex = obj.family_index;
        for (i = 0, len = pickedInstances.length; i < len; ++i) {
            inst = pickedInstances[i];
            if (!inst.layer)
                continue; // not a world instance
            if (isFamily)
                value = inst.instance_vars[iv + inst.type.family_var_map[familyIndex]];
            else
                value = inst.instance_vars[iv];
            zOrderList.push([
                inst.layer.index,
                inst.get_zindex()
            ]);
            instValues.push([
                inst,
                value
            ]);
        }
        if (!zOrderList.length)
            return; // no instances were world instances
        zOrderList.sort(SortZOrderList);
        instValues.sort(SortInstancesByValue);
        for (i = 0, len = zOrderList.length; i < len; ++i) {
            inst = instValues[i][0]; // instance in the order we want
            layer = layout.layers[zOrderList[i][0]]; // layer to put it on
            toZ = zOrderList[i][1]; // Z index on that layer to put it
            if (layer.instances[toZ] !== inst) // not already got this instance there
            {
                layer.instances[toZ] = inst; // update instance
                inst.layer = layer; // update instance's layer reference (could have changed)
                layer.setZIndicesStaleFrom(toZ); // mark Z indices stale from this point since they have changed
            }
        }
    };
    sysProto.acts = new SysActs();

    function SysExps() {};
    SysExps.prototype["int"] = function(ret, x) {
        if (cr.is_string(x)) {
            ret.set_int(parseInt(x, 10));
            if (isNaN(ret.data))
                ret.data = 0;
        } else
            ret.set_int(x);
    };
    SysExps.prototype["float"] = function(ret, x) {
        if (cr.is_string(x)) {
            ret.set_float(parseFloat(x));
            if (isNaN(ret.data))
                ret.data = 0;
        } else
            ret.set_float(x);
    };
    SysExps.prototype.str = function(ret, x) {
        if (cr.is_string(x))
            ret.set_string(x);
        else
            ret.set_string(x.toString());
    };
    SysExps.prototype.len = function(ret, x) {
        ret.set_int(x.length || 0);
    };
    SysExps.prototype.random = function(ret, a, b) {
        if (b === undefined) {
            ret.set_float(Math.random() * a);
        } else {
            ret.set_float(Math.random() * (b - a) + a);
        }
    };
    SysExps.prototype.sqrt = function(ret, x) {
        ret.set_float(Math.sqrt(x));
    };
    SysExps.prototype.abs = function(ret, x) {
        ret.set_float(Math.abs(x));
    };
    SysExps.prototype.round = function(ret, x) {
        ret.set_int(Math.round(x));
    };
    SysExps.prototype.floor = function(ret, x) {
        ret.set_int(Math.floor(x));
    };
    SysExps.prototype.ceil = function(ret, x) {
        ret.set_int(Math.ceil(x));
    };
    SysExps.prototype.sin = function(ret, x) {
        ret.set_float(Math.sin(cr.to_radians(x)));
    };
    SysExps.prototype.cos = function(ret, x) {
        ret.set_float(Math.cos(cr.to_radians(x)));
    };
    SysExps.prototype.tan = function(ret, x) {
        ret.set_float(Math.tan(cr.to_radians(x)));
    };
    SysExps.prototype.asin = function(ret, x) {
        ret.set_float(cr.to_degrees(Math.asin(x)));
    };
    SysExps.prototype.acos = function(ret, x) {
        ret.set_float(cr.to_degrees(Math.acos(x)));
    };
    SysExps.prototype.atan = function(ret, x) {
        ret.set_float(cr.to_degrees(Math.atan(x)));
    };
    SysExps.prototype.exp = function(ret, x) {
        ret.set_float(Math.exp(x));
    };
    SysExps.prototype.ln = function(ret, x) {
        ret.set_float(Math.log(x));
    };
    SysExps.prototype.log10 = function(ret, x) {
        ret.set_float(Math.log(x) / Math.LN10);
    };
    SysExps.prototype.max = function(ret) {
        var max_ = arguments[1];
        if (typeof max_ !== "number")
            max_ = 0;
        var i, len, a;
        for (i = 2, len = arguments.length; i < len; i++) {
            a = arguments[i];
            if (typeof a !== "number")
                continue; // ignore non-numeric types
            if (max_ < a)
                max_ = a;
        }
        ret.set_float(max_);
    };
    SysExps.prototype.min = function(ret) {
        var min_ = arguments[1];
        if (typeof min_ !== "number")
            min_ = 0;
        var i, len, a;
        for (i = 2, len = arguments.length; i < len; i++) {
            a = arguments[i];
            if (typeof a !== "number")
                continue; // ignore non-numeric types
            if (min_ > a)
                min_ = a;
        }
        ret.set_float(min_);
    };
    SysExps.prototype.dt = function(ret) {
        ret.set_float(this.runtime.dt);
    };
    SysExps.prototype.timescale = function(ret) {
        ret.set_float(this.runtime.timescale);
    };
    SysExps.prototype.wallclocktime = function(ret) {
        ret.set_float((Date.now() - this.runtime.start_time) / 1000.0);
    };
    SysExps.prototype.time = function(ret) {
        ret.set_float(this.runtime.kahanTime.sum);
    };
    SysExps.prototype.tickcount = function(ret) {
        ret.set_int(this.runtime.tickcount);
    };
    SysExps.prototype.objectcount = function(ret) {
        ret.set_int(this.runtime.objectcount);
    };
    SysExps.prototype.fps = function(ret) {
        ret.set_int(this.runtime.fps);
    };
    SysExps.prototype.loopindex = function(ret, name_) {
        var loop, i, len;
        if (!this.runtime.loop_stack.length) {
            ret.set_int(0);
            return;
        }
        if (name_) {
            for (i = this.runtime.loop_stack_index; i >= 0; --i) {
                loop = this.runtime.loop_stack[i];
                if (loop.name === name_) {
                    ret.set_int(loop.index);
                    return;
                }
            }
            ret.set_int(0);
        } else {
            loop = this.runtime.getCurrentLoop();
            ret.set_int(loop ? loop.index : -1);
        }
    };
    SysExps.prototype.distance = function(ret, x1, y1, x2, y2) {
        ret.set_float(cr.distanceTo(x1, y1, x2, y2));
    };
    SysExps.prototype.angle = function(ret, x1, y1, x2, y2) {
        ret.set_float(cr.to_degrees(cr.angleTo(x1, y1, x2, y2)));
    };
    SysExps.prototype.scrollx = function(ret) {
        ret.set_float(this.runtime.running_layout.scrollX);
    };
    SysExps.prototype.scrolly = function(ret) {
        ret.set_float(this.runtime.running_layout.scrollY);
    };
    SysExps.prototype.newline = function(ret) {
        ret.set_string("\n");
    };
    SysExps.prototype.lerp = function(ret, a, b, x) {
        ret.set_float(cr.lerp(a, b, x));
    };
    SysExps.prototype.qarp = function(ret, a, b, c, x) {
        ret.set_float(cr.qarp(a, b, c, x));
    };
    SysExps.prototype.cubic = function(ret, a, b, c, d, x) {
        ret.set_float(cr.cubic(a, b, c, d, x));
    };
    SysExps.prototype.cosp = function(ret, a, b, x) {
        ret.set_float(cr.cosp(a, b, x));
    };
    SysExps.prototype.windowwidth = function(ret) {
        ret.set_int(this.runtime.width);
    };
    SysExps.prototype.windowheight = function(ret) {
        ret.set_int(this.runtime.height);
    };
    SysExps.prototype.uppercase = function(ret, str) {
        ret.set_string(cr.is_string(str) ? str.toUpperCase() : "");
    };
    SysExps.prototype.lowercase = function(ret, str) {
        ret.set_string(cr.is_string(str) ? str.toLowerCase() : "");
    };
    SysExps.prototype.clamp = function(ret, x, l, u) {
        if (x < l)
            ret.set_float(l);
        else if (x > u)
            ret.set_float(u);
        else
            ret.set_float(x);
    };
    SysExps.prototype.layerscale = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_float(0);
        else
            ret.set_float(layer.scale);
    };
    SysExps.prototype.layeropacity = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_float(0);
        else
            ret.set_float(layer.opacity * 100);
    };
    SysExps.prototype.layerscalerate = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_float(0);
        else
            ret.set_float(layer.zoomRate);
    };
    SysExps.prototype.layerparallaxx = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_float(0);
        else
            ret.set_float(layer.parallaxX * 100);
    };
    SysExps.prototype.layerparallaxy = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_float(0);
        else
            ret.set_float(layer.parallaxY * 100);
    };
    SysExps.prototype.layerindex = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_int(-1);
        else
            ret.set_int(layer.index);
    };
    SysExps.prototype.layoutscale = function(ret) {
        if (this.runtime.running_layout)
            ret.set_float(this.runtime.running_layout.scale);
        else
            ret.set_float(0);
    };
    SysExps.prototype.layoutangle = function(ret) {
        ret.set_float(cr.to_degrees(this.runtime.running_layout.angle));
    };
    SysExps.prototype.layerangle = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        if (!layer)
            ret.set_float(0);
        else
            ret.set_float(cr.to_degrees(layer.angle));
    };
    SysExps.prototype.layoutwidth = function(ret) {
        ret.set_int(this.runtime.running_layout.width);
    };
    SysExps.prototype.layoutheight = function(ret) {
        ret.set_int(this.runtime.running_layout.height);
    };
    SysExps.prototype.find = function(ret, text, searchstr) {
        if (cr.is_string(text) && cr.is_string(searchstr))
            ret.set_int(text.search(new RegExp(cr.regexp_escape(searchstr), "i")));
        else
            ret.set_int(-1);
    };
    SysExps.prototype.findcase = function(ret, text, searchstr) {
        if (cr.is_string(text) && cr.is_string(searchstr))
            ret.set_int(text.search(new RegExp(cr.regexp_escape(searchstr), "")));
        else
            ret.set_int(-1);
    };
    SysExps.prototype.left = function(ret, text, n) {
        ret.set_string(cr.is_string(text) ? text.substr(0, n) : "");
    };
    SysExps.prototype.right = function(ret, text, n) {
        ret.set_string(cr.is_string(text) ? text.substr(text.length - n) : "");
    };
    SysExps.prototype.mid = function(ret, text, index_, length_) {
        ret.set_string(cr.is_string(text) ? text.substr(index_, length_) : "");
    };
    SysExps.prototype.tokenat = function(ret, text, index_, sep) {
        if (cr.is_string(text) && cr.is_string(sep)) {
            var arr = text.split(sep);
            var i = cr.floor(index_);
            if (i < 0 || i >= arr.length)
                ret.set_string("");
            else
                ret.set_string(arr[i]);
        } else
            ret.set_string("");
    };
    SysExps.prototype.tokencount = function(ret, text, sep) {
        if (cr.is_string(text) && text.length)
            ret.set_int(text.split(sep).length);
        else
            ret.set_int(0);
    };
    SysExps.prototype.replace = function(ret, text, find_, replace_) {
        if (cr.is_string(text) && cr.is_string(find_) && cr.is_string(replace_))
            ret.set_string(text.replace(new RegExp(cr.regexp_escape(find_), "gi"), replace_));
        else
            ret.set_string(cr.is_string(text) ? text : "");
    };
    SysExps.prototype.trim = function(ret, text) {
        ret.set_string(cr.is_string(text) ? text.trim() : "");
    };
    SysExps.prototype.pi = function(ret) {
        ret.set_float(cr.PI);
    };
    SysExps.prototype.layoutname = function(ret) {
        if (this.runtime.running_layout)
            ret.set_string(this.runtime.running_layout.name);
        else
            ret.set_string("");
    };
    SysExps.prototype.renderer = function(ret) {
        ret.set_string(this.runtime.gl ? "webgl" : "canvas2d");
    };
    SysExps.prototype.rendererdetail = function(ret) {
        ret.set_string(this.runtime.glUnmaskedRenderer);
    };
    SysExps.prototype.anglediff = function(ret, a, b) {
        ret.set_float(cr.to_degrees(cr.angleDiff(cr.to_radians(a), cr.to_radians(b))));
    };
    SysExps.prototype.choose = function(ret) {
        var index = cr.floor(Math.random() * (arguments.length - 1));
        ret.set_any(arguments[index + 1]);
    };
    SysExps.prototype.rgb = function(ret, r, g, b) {
        ret.set_int(cr.RGB(r, g, b));
    };
    SysExps.prototype.projectversion = function(ret) {
        ret.set_string(this.runtime.versionstr);
    };
    SysExps.prototype.projectname = function(ret) {
        ret.set_string(this.runtime.projectName);
    };
    SysExps.prototype.anglelerp = function(ret, a, b, x) {
        a = cr.to_radians(a);
        b = cr.to_radians(b);
        var diff = cr.angleDiff(a, b);
        if (cr.angleClockwise(b, a)) {
            ret.set_float(cr.to_clamped_degrees(a + diff * x));
        } else {
            ret.set_float(cr.to_clamped_degrees(a - diff * x));
        }
    };
    SysExps.prototype.anglerotate = function(ret, a, b, c) {
        a = cr.to_radians(a);
        b = cr.to_radians(b);
        c = cr.to_radians(c);
        ret.set_float(cr.to_clamped_degrees(cr.angleRotate(a, b, c)));
    };
    SysExps.prototype.zeropad = function(ret, n, d) {
        var s = (n < 0 ? "-" : "");
        if (n < 0) n = -n;
        var zeroes = d - n.toString().length;
        for (var i = 0; i < zeroes; i++)
            s += "0";
        ret.set_string(s + n.toString());
    };
    SysExps.prototype.cpuutilisation = function(ret) {
        ret.set_float(this.runtime.cpuutilisation / 1000);
    };
    SysExps.prototype.viewportleft = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.viewLeft : 0);
    };
    SysExps.prototype.viewporttop = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.viewTop : 0);
    };
    SysExps.prototype.viewportright = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.viewRight : 0);
    };
    SysExps.prototype.viewportbottom = function(ret, layerparam) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.viewBottom : 0);
    };
    SysExps.prototype.loadingprogress = function(ret) {
        ret.set_float(this.runtime.loadingprogress);
    };
    SysExps.prototype.unlerp = function(ret, a, b, y) {
        ret.set_float(cr.unlerp(a, b, y));
    };
    SysExps.prototype.canvassnapshot = function(ret) {
        ret.set_string(this.runtime.snapshotData);
    };
    SysExps.prototype.urlencode = function(ret, s) {
        ret.set_string(encodeURIComponent(s));
    };
    SysExps.prototype.urldecode = function(ret, s) {
        ret.set_string(decodeURIComponent(s));
    };
    SysExps.prototype.canvastolayerx = function(ret, layerparam, x, y) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.canvasToLayer(x, y, true) : 0);
    };
    SysExps.prototype.canvastolayery = function(ret, layerparam, x, y) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.canvasToLayer(x, y, false) : 0);
    };
    SysExps.prototype.layertocanvasx = function(ret, layerparam, x, y) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.layerToCanvas(x, y, true) : 0);
    };
    SysExps.prototype.layertocanvasy = function(ret, layerparam, x, y) {
        var layer = this.runtime.getLayer(layerparam);
        ret.set_float(layer ? layer.layerToCanvas(x, y, false) : 0);
    };
    SysExps.prototype.savestatejson = function(ret) {
        ret.set_string(this.runtime.lastSaveJson);
    };
    SysExps.prototype.imagememoryusage = function(ret) {
        if (this.runtime.glwrap)
            ret.set_float(Math.round(100 * this.runtime.glwrap.estimateVRAM() / (1024 * 1024)) / 100);
        else
            ret.set_float(0);
    };
    SysExps.prototype.regexsearch = function(ret, str_, regex_, flags_) {
        var regex = getRegex(regex_, flags_);
        ret.set_int(str_ ? str_.search(regex) : -1);
    };
    SysExps.prototype.regexreplace = function(ret, str_, regex_, flags_, replace_) {
        var regex = getRegex(regex_, flags_);
        ret.set_string(str_ ? str_.replace(regex, replace_) : "");
    };
    var regexMatches = [];
    var lastMatchesStr = "";
    var lastMatchesRegex = "";
    var lastMatchesFlags = "";

    function updateRegexMatches(str_, regex_, flags_) {
        if (str_ === lastMatchesStr && regex_ === lastMatchesRegex && flags_ === lastMatchesFlags)
            return;
        var regex = getRegex(regex_, flags_);
        regexMatches = str_.match(regex);
        lastMatchesStr = str_;
        lastMatchesRegex = regex_;
        lastMatchesFlags = flags_;
    };
    SysExps.prototype.regexmatchcount = function(ret, str_, regex_, flags_) {
        var regex = getRegex(regex_, flags_);
        updateRegexMatches(str_.toString(), regex_, flags_);
        ret.set_int(regexMatches ? regexMatches.length : 0);
    };
    SysExps.prototype.regexmatchat = function(ret, str_, regex_, flags_, index_) {
        index_ = Math.floor(index_);
        var regex = getRegex(regex_, flags_);
        updateRegexMatches(str_.toString(), regex_, flags_);
        if (!regexMatches || index_ < 0 || index_ >= regexMatches.length)
            ret.set_string("");
        else
            ret.set_string(regexMatches[index_]);
    };
    SysExps.prototype.infinity = function(ret) {
        ret.set_float(Infinity);
    };
    SysExps.prototype.setbit = function(ret, n, b, v) {
        n = n | 0;
        b = b | 0;
        v = (v !== 0 ? 1 : 0);
        ret.set_int((n & ~(1 << b)) | (v << b));
    };
    SysExps.prototype.togglebit = function(ret, n, b) {
        n = n | 0;
        b = b | 0;
        ret.set_int(n ^ (1 << b));
    };
    SysExps.prototype.getbit = function(ret, n, b) {
        n = n | 0;
        b = b | 0;
        ret.set_int((n & (1 << b)) ? 1 : 0);
    };
    SysExps.prototype.originalwindowwidth = function(ret) {
        ret.set_int(this.runtime.original_width);
    };
    SysExps.prototype.originalwindowheight = function(ret) {
        ret.set_int(this.runtime.original_height);
    };
    sysProto.exps = new SysExps();
    sysProto.runWaits = function() {
        var i, j, len, w, k, s, ss;
        var evinfo = this.runtime.getCurrentEventStack();
        for (i = 0, len = this.waits.length; i < len; i++) {
            w = this.waits[i];
            if (w.time === -1) // signalled wait
            {
                if (!w.signalled)
                    continue; // not yet signalled
            } else // timer wait
            {
                if (w.time > this.runtime.kahanTime.sum)
                    continue; // timer not yet expired
            }
            evinfo.current_event = w.ev;
            evinfo.actindex = w.actindex;
            evinfo.cndindex = 0;
            for (k in w.sols) {
                if (w.sols.hasOwnProperty(k)) {
                    s = this.runtime.types_by_index[parseInt(k, 10)].getCurrentSol();
                    ss = w.sols[k];
                    s.select_all = ss.sa;
                    cr.shallowAssignArray(s.instances, ss.insts);
                    freeSolStateObject(ss);
                }
            }
            w.ev.resume_actions_and_subevents();
            this.runtime.clearSol(w.solModifiers);
            w.deleteme = true;
        }
        for (i = 0, j = 0, len = this.waits.length; i < len; i++) {
            w = this.waits[i];
            this.waits[j] = w;
            if (w.deleteme)
                freeWaitObject(w);
            else
                j++;
        }
        cr.truncateArray(this.waits, j);
    };
}());;
(function() {
    cr.add_common_aces = function(m, pluginProto) {
        var singleglobal_ = m[1];
        var position_aces = m[3];
        var size_aces = m[4];
        var angle_aces = m[5];
        var appearance_aces = m[6];
        var zorder_aces = m[7];
        var effects_aces = m[8];
        if (!pluginProto.cnds)
            pluginProto.cnds = {};
        if (!pluginProto.acts)
            pluginProto.acts = {};
        if (!pluginProto.exps)
            pluginProto.exps = {};
        var cnds = pluginProto.cnds;
        var acts = pluginProto.acts;
        var exps = pluginProto.exps;
        if (position_aces) {
            cnds.CompareX = function(cmp, x) {
                return cr.do_cmp(this.x, cmp, x);
            };
            cnds.CompareY = function(cmp, y) {
                return cr.do_cmp(this.y, cmp, y);
            };
            cnds.IsOnScreen = function() {
                var layer = this.layer;
                this.update_bbox();
                var bbox = this.bbox;
                return !(bbox.right < layer.viewLeft || bbox.bottom < layer.viewTop || bbox.left > layer.viewRight || bbox.top > layer.viewBottom);
            };
            cnds.IsOutsideLayout = function() {
                this.update_bbox();
                var bbox = this.bbox;
                var layout = this.runtime.running_layout;
                return (bbox.right < 0 || bbox.bottom < 0 || bbox.left > layout.width || bbox.top > layout.height);
            };
            cnds.PickDistance = function(which, x, y) {
                var sol = this.getCurrentSol();
                var instances = sol.getObjects();
                if (!instances.length)
                    return false;
                var inst = instances[0];
                var pickme = inst;
                var dist = cr.distanceTo(inst.x, inst.y, x, y);
                var i, len, d;
                for (i = 1, len = instances.length; i < len; i++) {
                    inst = instances[i];
                    d = cr.distanceTo(inst.x, inst.y, x, y);
                    if ((which === 0 && d < dist) || (which === 1 && d > dist)) {
                        dist = d;
                        pickme = inst;
                    }
                }
                sol.pick_one(pickme);
                return true;
            };
            acts.SetX = function(x) {
                if (this.x !== x) {
                    this.x = x;
                    this.set_bbox_changed();
                }
            };
            acts.SetY = function(y) {
                if (this.y !== y) {
                    this.y = y;
                    this.set_bbox_changed();
                }
            };
            acts.SetPos = function(x, y) {
                if (this.x !== x || this.y !== y) {
                    this.x = x;
                    this.y = y;
                    this.set_bbox_changed();
                }
            };
            acts.SetPosToObject = function(obj, imgpt) {
                var inst = obj.getPairedInstance(this);
                if (!inst)
                    return;
                var newx, newy;
                if (inst.getImagePoint) {
                    newx = inst.getImagePoint(imgpt, true);
                    newy = inst.getImagePoint(imgpt, false);
                } else {
                    newx = inst.x;
                    newy = inst.y;
                }
                if (this.x !== newx || this.y !== newy) {
                    this.x = newx;
                    this.y = newy;
                    this.set_bbox_changed();
                }
            };
            acts.MoveForward = function(dist) {
                if (dist !== 0) {
                    this.x += Math.cos(this.angle) * dist;
                    this.y += Math.sin(this.angle) * dist;
                    this.set_bbox_changed();
                }
            };
            acts.MoveAtAngle = function(a, dist) {
                if (dist !== 0) {
                    this.x += Math.cos(cr.to_radians(a)) * dist;
                    this.y += Math.sin(cr.to_radians(a)) * dist;
                    this.set_bbox_changed();
                }
            };
            exps.X = function(ret) {
                ret.set_float(this.x);
            };
            exps.Y = function(ret) {
                ret.set_float(this.y);
            };
            exps.dt = function(ret) {
                ret.set_float(this.runtime.getDt(this));
            };
        }
        if (size_aces) {
            cnds.CompareWidth = function(cmp, w) {
                return cr.do_cmp(this.width, cmp, w);
            };
            cnds.CompareHeight = function(cmp, h) {
                return cr.do_cmp(this.height, cmp, h);
            };
            acts.SetWidth = function(w) {
                if (this.width !== w) {
                    this.width = w;
                    this.set_bbox_changed();
                }
            };
            acts.SetHeight = function(h) {
                if (this.height !== h) {
                    this.height = h;
                    this.set_bbox_changed();
                }
            };
            acts.SetSize = function(w, h) {
                if (this.width !== w || this.height !== h) {
                    this.width = w;
                    this.height = h;
                    this.set_bbox_changed();
                }
            };
            exps.Width = function(ret) {
                ret.set_float(this.width);
            };
            exps.Height = function(ret) {
                ret.set_float(this.height);
            };
            exps.BBoxLeft = function(ret) {
                this.update_bbox();
                ret.set_float(this.bbox.left);
            };
            exps.BBoxTop = function(ret) {
                this.update_bbox();
                ret.set_float(this.bbox.top);
            };
            exps.BBoxRight = function(ret) {
                this.update_bbox();
                ret.set_float(this.bbox.right);
            };
            exps.BBoxBottom = function(ret) {
                this.update_bbox();
                ret.set_float(this.bbox.bottom);
            };
        }
        if (angle_aces) {
            cnds.AngleWithin = function(within, a) {
                return cr.angleDiff(this.angle, cr.to_radians(a)) <= cr.to_radians(within);
            };
            cnds.IsClockwiseFrom = function(a) {
                return cr.angleClockwise(this.angle, cr.to_radians(a));
            };
            cnds.IsBetweenAngles = function(a, b) {
                var lower = cr.to_clamped_radians(a);
                var upper = cr.to_clamped_radians(b);
                var angle = cr.clamp_angle(this.angle);
                var obtuse = (!cr.angleClockwise(upper, lower));
                if (obtuse)
                    return !(!cr.angleClockwise(angle, lower) && cr.angleClockwise(angle, upper));
                else
                    return cr.angleClockwise(angle, lower) && !cr.angleClockwise(angle, upper);
            };
            acts.SetAngle = function(a) {
                var newangle = cr.to_radians(cr.clamp_angle_degrees(a));
                if (isNaN(newangle))
                    return;
                if (this.angle !== newangle) {
                    this.angle = newangle;
                    this.set_bbox_changed();
                }
            };
            acts.RotateClockwise = function(a) {
                if (a !== 0 && !isNaN(a)) {
                    this.angle += cr.to_radians(a);
                    this.angle = cr.clamp_angle(this.angle);
                    this.set_bbox_changed();
                }
            };
            acts.RotateCounterclockwise = function(a) {
                if (a !== 0 && !isNaN(a)) {
                    this.angle -= cr.to_radians(a);
                    this.angle = cr.clamp_angle(this.angle);
                    this.set_bbox_changed();
                }
            };
            acts.RotateTowardAngle = function(amt, target) {
                var newangle = cr.angleRotate(this.angle, cr.to_radians(target), cr.to_radians(amt));
                if (isNaN(newangle))
                    return;
                if (this.angle !== newangle) {
                    this.angle = newangle;
                    this.set_bbox_changed();
                }
            };
            acts.RotateTowardPosition = function(amt, x, y) {
                var dx = x - this.x;
                var dy = y - this.y;
                var target = Math.atan2(dy, dx);
                var newangle = cr.angleRotate(this.angle, target, cr.to_radians(amt));
                if (isNaN(newangle))
                    return;
                if (this.angle !== newangle) {
                    this.angle = newangle;
                    this.set_bbox_changed();
                }
            };
            acts.SetTowardPosition = function(x, y) {
                var dx = x - this.x;
                var dy = y - this.y;
                var newangle = Math.atan2(dy, dx);
                if (isNaN(newangle))
                    return;
                if (this.angle !== newangle) {
                    this.angle = newangle;
                    this.set_bbox_changed();
                }
            };
            exps.Angle = function(ret) {
                ret.set_float(cr.to_clamped_degrees(this.angle));
            };
        }
        if (!singleglobal_) {
            cnds.CompareInstanceVar = function(iv, cmp, val) {
                return cr.do_cmp(this.instance_vars[iv], cmp, val);
            };
            cnds.IsBoolInstanceVarSet = function(iv) {
                return this.instance_vars[iv];
            };
            cnds.PickInstVarHiLow = function(which, iv) {
                var sol = this.getCurrentSol();
                var instances = sol.getObjects();
                if (!instances.length)
                    return false;
                var inst = instances[0];
                var pickme = inst;
                var val = inst.instance_vars[iv];
                var i, len, v;
                for (i = 1, len = instances.length; i < len; i++) {
                    inst = instances[i];
                    v = inst.instance_vars[iv];
                    if ((which === 0 && v < val) || (which === 1 && v > val)) {
                        val = v;
                        pickme = inst;
                    }
                }
                sol.pick_one(pickme);
                return true;
            };
            cnds.PickByUID = function(u) {
                var i, len, j, inst, families, instances, sol;
                var cnd = this.runtime.getCurrentCondition();
                if (cnd.inverted) {
                    sol = this.getCurrentSol();
                    if (sol.select_all) {
                        sol.select_all = false;
                        cr.clearArray(sol.instances);
                        cr.clearArray(sol.else_instances);
                        instances = this.instances;
                        for (i = 0, len = instances.length; i < len; i++) {
                            inst = instances[i];
                            if (inst.uid === u)
                                sol.else_instances.push(inst);
                            else
                                sol.instances.push(inst);
                        }
                        this.applySolToContainer();
                        return !!sol.instances.length;
                    } else {
                        for (i = 0, j = 0, len = sol.instances.length; i < len; i++) {
                            inst = sol.instances[i];
                            sol.instances[j] = inst;
                            if (inst.uid === u) {
                                sol.else_instances.push(inst);
                            } else
                                j++;
                        }
                        cr.truncateArray(sol.instances, j);
                        this.applySolToContainer();
                        return !!sol.instances.length;
                    }
                } else {
                    inst = this.runtime.getObjectByUID(u);
                    if (!inst)
                        return false;
                    sol = this.getCurrentSol();
                    if (!sol.select_all && sol.instances.indexOf(inst) === -1)
                        return false; // not picked
                    if (this.is_family) {
                        families = inst.type.families;
                        for (i = 0, len = families.length; i < len; i++) {
                            if (families[i] === this) {
                                sol.pick_one(inst);
                                this.applySolToContainer();
                                return true;
                            }
                        }
                    } else if (inst.type === this) {
                        sol.pick_one(inst);
                        this.applySolToContainer();
                        return true;
                    }
                    return false;
                }
            };
            cnds.OnCreated = function() {
                return true;
            };
            cnds.OnDestroyed = function() {
                return true;
            };
            acts.SetInstanceVar = function(iv, val) {
                var myinstvars = this.instance_vars;
                if (cr.is_number(myinstvars[iv])) {
                    if (cr.is_number(val))
                        myinstvars[iv] = val;
                    else
                        myinstvars[iv] = parseFloat(val);
                } else if (cr.is_string(myinstvars[iv])) {
                    if (cr.is_string(val))
                        myinstvars[iv] = val;
                    else
                        myinstvars[iv] = val.toString();
                } else
                ;
            };
            acts.AddInstanceVar = function(iv, val) {
                var myinstvars = this.instance_vars;
                if (cr.is_number(myinstvars[iv])) {
                    if (cr.is_number(val))
                        myinstvars[iv] += val;
                    else
                        myinstvars[iv] += parseFloat(val);
                } else if (cr.is_string(myinstvars[iv])) {
                    if (cr.is_string(val))
                        myinstvars[iv] += val;
                    else
                        myinstvars[iv] += val.toString();
                } else
                ;
            };
            acts.SubInstanceVar = function(iv, val) {
                var myinstvars = this.instance_vars;
                if (cr.is_number(myinstvars[iv])) {
                    if (cr.is_number(val))
                        myinstvars[iv] -= val;
                    else
                        myinstvars[iv] -= parseFloat(val);
                } else
                ;
            };
            acts.SetBoolInstanceVar = function(iv, val) {
                this.instance_vars[iv] = val ? 1 : 0;
            };
            acts.ToggleBoolInstanceVar = function(iv) {
                this.instance_vars[iv] = 1 - this.instance_vars[iv];
            };
            acts.Destroy = function() {
                this.runtime.DestroyInstance(this);
            };
            if (!acts.LoadFromJsonString) {
                acts.LoadFromJsonString = function(str_) {
                    var o, i, len, binst;
                    try {
                        o = JSON.parse(str_);
                    } catch (e) {
                        return;
                    }
                    this.runtime.loadInstanceFromJSON(this, o, true);
                    if (this.afterLoad)
                        this.afterLoad();
                    if (this.behavior_insts) {
                        for (i = 0, len = this.behavior_insts.length; i < len; ++i) {
                            binst = this.behavior_insts[i];
                            if (binst.afterLoad)
                                binst.afterLoad();
                        }
                    }
                };
            }
            exps.Count = function(ret) {
                var count = ret.object_class.instances.length;
                var i, len, inst;
                for (i = 0, len = this.runtime.createRow.length; i < len; i++) {
                    inst = this.runtime.createRow[i];
                    if (ret.object_class.is_family) {
                        if (inst.type.families.indexOf(ret.object_class) >= 0)
                            count++;
                    } else {
                        if (inst.type === ret.object_class)
                            count++;
                    }
                }
                ret.set_int(count);
            };
            exps.PickedCount = function(ret) {
                ret.set_int(ret.object_class.getCurrentSol().getObjects().length);
            };
            exps.UID = function(ret) {
                ret.set_int(this.uid);
            };
            exps.IID = function(ret) {
                ret.set_int(this.get_iid());
            };
            if (!exps.AsJSON) {
                exps.AsJSON = function(ret) {
                    ret.set_string(JSON.stringify(this.runtime.saveInstanceToJSON(this, true)));
                };
            }
        }
        if (appearance_aces) {
            cnds.IsVisible = function() {
                return this.visible;
            };
            acts.SetVisible = function(v) {
                if (!v !== !this.visible) {
                    this.visible = !!v;
                    this.runtime.redraw = true;
                }
            };
            cnds.CompareOpacity = function(cmp, x) {
                return cr.do_cmp(cr.round6dp(this.opacity * 100), cmp, x);
            };
            acts.SetOpacity = function(x) {
                var new_opacity = x / 100.0;
                if (new_opacity < 0)
                    new_opacity = 0;
                else if (new_opacity > 1)
                    new_opacity = 1;
                if (new_opacity !== this.opacity) {
                    this.opacity = new_opacity;
                    this.runtime.redraw = true;
                }
            };
            exps.Opacity = function(ret) {
                ret.set_float(cr.round6dp(this.opacity * 100.0));
            };
        }
        if (zorder_aces) {
            cnds.IsOnLayer = function(layer_) {
                if (!layer_)
                    return false;
                return this.layer === layer_;
            };
            cnds.PickTopBottom = function(which_) {
                var sol = this.getCurrentSol();
                var instances = sol.getObjects();
                if (!instances.length)
                    return false;
                var inst = instances[0];
                var pickme = inst;
                var i, len;
                for (i = 1, len = instances.length; i < len; i++) {
                    inst = instances[i];
                    if (which_ === 0) {
                        if (inst.layer.index > pickme.layer.index || (inst.layer.index === pickme.layer.index && inst.get_zindex() > pickme.get_zindex())) {
                            pickme = inst;
                        }
                    } else {
                        if (inst.layer.index < pickme.layer.index || (inst.layer.index === pickme.layer.index && inst.get_zindex() < pickme.get_zindex())) {
                            pickme = inst;
                        }
                    }
                }
                sol.pick_one(pickme);
                return true;
            };
            acts.MoveToTop = function() {
                var layer = this.layer;
                var layer_instances = layer.instances;
                if (layer_instances.length && layer_instances[layer_instances.length - 1] === this)
                    return; // is already at top
                layer.removeFromInstanceList(this, false);
                layer.appendToInstanceList(this, false);
                this.runtime.redraw = true;
            };
            acts.MoveToBottom = function() {
                var layer = this.layer;
                var layer_instances = layer.instances;
                if (layer_instances.length && layer_instances[0] === this)
                    return; // is already at bottom
                layer.removeFromInstanceList(this, false);
                layer.prependToInstanceList(this, false);
                this.runtime.redraw = true;
            };
            acts.MoveToLayer = function(layerMove) {
                if (!layerMove || layerMove == this.layer)
                    return;
                this.layer.removeFromInstanceList(this, true);
                this.layer = layerMove;
                layerMove.appendToInstanceList(this, true);
                this.runtime.redraw = true;
            };
            acts.ZMoveToObject = function(where_, obj_) {
                var isafter = (where_ === 0);
                if (!obj_)
                    return;
                var other = obj_.getFirstPicked(this);
                if (!other || other.uid === this.uid)
                    return;
                if (this.layer.index !== other.layer.index) {
                    this.layer.removeFromInstanceList(this, true);
                    this.layer = other.layer;
                    other.layer.appendToInstanceList(this, true);
                }
                this.layer.moveInstanceAdjacent(this, other, isafter);
                this.runtime.redraw = true;
            };
            exps.LayerNumber = function(ret) {
                ret.set_int(this.layer.number);
            };
            exps.LayerName = function(ret) {
                ret.set_string(this.layer.name);
            };
            exps.ZIndex = function(ret) {
                ret.set_int(this.get_zindex());
            };
        }
        if (effects_aces) {
            acts.SetEffectEnabled = function(enable_, effectname_) {
                if (!this.runtime.glwrap)
                    return;
                var i = this.type.getEffectIndexByName(effectname_);
                if (i < 0)
                    return; // effect name not found
                var enable = (enable_ === 1);
                if (this.active_effect_flags[i] === enable)
                    return; // no change
                this.active_effect_flags[i] = enable;
                this.updateActiveEffects();
                this.runtime.redraw = true;
            };
            acts.SetEffectParam = function(effectname_, index_, value_) {
                if (!this.runtime.glwrap)
                    return;
                var i = this.type.getEffectIndexByName(effectname_);
                if (i < 0)
                    return; // effect name not found
                var et = this.type.effect_types[i];
                var params = this.effect_params[i];
                index_ = Math.floor(index_);
                if (index_ < 0 || index_ >= params.length)
                    return; // effect index out of bounds
                if (this.runtime.glwrap.getProgramParameterType(et.shaderindex, index_) === 1)
                    value_ /= 100.0;
                if (params[index_] === value_)
                    return; // no change
                params[index_] = value_;
                if (et.active)
                    this.runtime.redraw = true;
            };
        }
    };
    cr.set_bbox_changed = function() {
        this.bbox_changed = true; // will recreate next time box requested
        this.cell_changed = true;
        this.type.any_cell_changed = true; // avoid unnecessary updateAllBBox() calls
        this.runtime.redraw = true; // assume runtime needs to redraw
        var i, len, callbacks = this.bbox_changed_callbacks;
        for (i = 0, len = callbacks.length; i < len; ++i) {
            callbacks[i](this);
        }
        if (this.layer.useRenderCells)
            this.update_bbox();
    };
    cr.add_bbox_changed_callback = function(f) {
        if (f) {
            this.bbox_changed_callbacks.push(f);
        }
    };
    cr.update_bbox = function() {
        if (!this.bbox_changed)
            return; // bounding box not changed
        var bbox = this.bbox;
        var bquad = this.bquad;
        bbox.set(this.x, this.y, this.x + this.width, this.y + this.height);
        bbox.offset(-this.hotspotX * this.width, -this.hotspotY * this.height);
        if (!this.angle) {
            bquad.set_from_rect(bbox); // make bounding quad from box
        } else {
            bbox.offset(-this.x, -this.y); // translate to origin
            bquad.set_from_rotated_rect(bbox, this.angle); // rotate around origin
            bquad.offset(this.x, this.y); // translate back to original position
            bquad.bounding_box(bbox);
        }
        bbox.normalize();
        this.bbox_changed = false; // bounding box up to date
        this.update_render_cell();
    };
    var tmprc = new cr.rect(0, 0, 0, 0);
    cr.update_render_cell = function() {
        if (!this.layer.useRenderCells)
            return;
        var mygrid = this.layer.render_grid;
        var bbox = this.bbox;
        tmprc.set(mygrid.XToCell(bbox.left), mygrid.YToCell(bbox.top), mygrid.XToCell(bbox.right), mygrid.YToCell(bbox.bottom));
        if (this.rendercells.equals(tmprc))
            return;
        if (this.rendercells.right < this.rendercells.left)
            mygrid.update(this, null, tmprc); // first insertion with invalid rect: don't provide old range
        else
            mygrid.update(this, this.rendercells, tmprc);
        this.rendercells.copy(tmprc);
        this.layer.render_list_stale = true;
    };
    cr.update_collision_cell = function() {
        if (!this.cell_changed || !this.collisionsEnabled)
            return;
        this.update_bbox();
        var mygrid = this.type.collision_grid;
        var bbox = this.bbox;
        tmprc.set(mygrid.XToCell(bbox.left), mygrid.YToCell(bbox.top), mygrid.XToCell(bbox.right), mygrid.YToCell(bbox.bottom));
        if (this.collcells.equals(tmprc))
            return;
        if (this.collcells.right < this.collcells.left)
            mygrid.update(this, null, tmprc); // first insertion with invalid rect: don't provide old range
        else
            mygrid.update(this, this.collcells, tmprc);
        this.collcells.copy(tmprc);
        this.cell_changed = false;
    };
    cr.inst_contains_pt = function(x, y) {
        if (!this.bbox.contains_pt(x, y))
            return false;
        if (!this.bquad.contains_pt(x, y))
            return false;
        if (this.tilemap_exists)
            return this.testPointOverlapTile(x, y);
        if (this.collision_poly && !this.collision_poly.is_empty()) {
            this.collision_poly.cache_poly(this.width, this.height, this.angle);
            return this.collision_poly.contains_pt(x - this.x, y - this.y);
        } else
            return true;
    };
    cr.inst_get_iid = function() {
        this.type.updateIIDs();
        return this.iid;
    };
    cr.inst_get_zindex = function() {
        this.layer.updateZIndices();
        return this.zindex;
    };
    cr.inst_updateActiveEffects = function() {
        cr.clearArray(this.active_effect_types);
        var i, len, et;
        var preserves_opaqueness = true;
        for (i = 0, len = this.active_effect_flags.length; i < len; i++) {
            if (this.active_effect_flags[i]) {
                et = this.type.effect_types[i];
                this.active_effect_types.push(et);
                if (!et.preservesOpaqueness)
                    preserves_opaqueness = false;
            }
        }
        this.uses_shaders = !!this.active_effect_types.length;
        this.shaders_preserve_opaqueness = preserves_opaqueness;
    };
    cr.inst_toString = function() {
        return "Inst" + this.puid;
    };
    cr.type_getFirstPicked = function(frominst) {
        if (frominst && frominst.is_contained && frominst.type != this) {
            var i, len, s;
            for (i = 0, len = frominst.siblings.length; i < len; i++) {
                s = frominst.siblings[i];
                if (s.type == this)
                    return s;
            }
        }
        var instances = this.getCurrentSol().getObjects();
        if (instances.length)
            return instances[0];
        else
            return null;
    };
    cr.type_getPairedInstance = function(inst) {
        var instances = this.getCurrentSol().getObjects();
        if (instances.length)
            return instances[inst.get_iid() % instances.length];
        else
            return null;
    };
    cr.type_updateIIDs = function() {
        if (!this.stale_iids || this.is_family)
            return; // up to date or is family - don't want family to overwrite IIDs
        var i, len;
        for (i = 0, len = this.instances.length; i < len; i++)
            this.instances[i].iid = i;
        var next_iid = i;
        var createRow = this.runtime.createRow;
        for (i = 0, len = createRow.length; i < len; ++i) {
            if (createRow[i].type === this)
                createRow[i].iid = next_iid++;
        }
        this.stale_iids = false;
    };
    cr.type_getInstanceByIID = function(i) {
        if (i < this.instances.length)
            return this.instances[i];
        i -= this.instances.length;
        var createRow = this.runtime.createRow;
        var j, lenj;
        for (j = 0, lenj = createRow.length; j < lenj; ++j) {
            if (createRow[j].type === this) {
                if (i === 0)
                    return createRow[j];
                --i;
            }
        };
        return null;
    };
    cr.type_getCurrentSol = function() {
        return this.solstack[this.cur_sol];
    };
    cr.type_pushCleanSol = function() {
        this.cur_sol++;
        if (this.cur_sol === this.solstack.length) {
            this.solstack.push(new cr.selection(this));
        } else {
            this.solstack[this.cur_sol].select_all = true; // else clear next SOL
            cr.clearArray(this.solstack[this.cur_sol].else_instances);
        }
    };
    cr.type_pushCopySol = function() {
        this.cur_sol++;
        if (this.cur_sol === this.solstack.length)
            this.solstack.push(new cr.selection(this));
        var clonesol = this.solstack[this.cur_sol];
        var prevsol = this.solstack[this.cur_sol - 1];
        if (prevsol.select_all) {
            clonesol.select_all = true;
        } else {
            clonesol.select_all = false;
            cr.shallowAssignArray(clonesol.instances, prevsol.instances);
        }
        cr.clearArray(clonesol.else_instances);
    };
    cr.type_popSol = function() {;
        this.cur_sol--;
    };
    cr.type_getBehaviorByName = function(behname) {
        var i, len, j, lenj, f, index = 0;
        if (!this.is_family) {
            for (i = 0, len = this.families.length; i < len; i++) {
                f = this.families[i];
                for (j = 0, lenj = f.behaviors.length; j < lenj; j++) {
                    if (behname === f.behaviors[j].name) {
                        this.extra["lastBehIndex"] = index;
                        return f.behaviors[j];
                    }
                    index++;
                }
            }
        }
        for (i = 0, len = this.behaviors.length; i < len; i++) {
            if (behname === this.behaviors[i].name) {
                this.extra["lastBehIndex"] = index;
                return this.behaviors[i];
            }
            index++;
        }
        return null;
    };
    cr.type_getBehaviorIndexByName = function(behname) {
        var b = this.getBehaviorByName(behname);
        if (b)
            return this.extra["lastBehIndex"];
        else
            return -1;
    };
    cr.type_getEffectIndexByName = function(name_) {
        var i, len;
        for (i = 0, len = this.effect_types.length; i < len; i++) {
            if (this.effect_types[i].name === name_)
                return i;
        }
        return -1;
    };
    cr.type_applySolToContainer = function() {
        if (!this.is_contained || this.is_family)
            return;
        var i, len, j, lenj, t, sol, sol2;
        this.updateIIDs();
        sol = this.getCurrentSol();
        var select_all = sol.select_all;
        var es = this.runtime.getCurrentEventStack();
        var orblock = es && es.current_event && es.current_event.orblock;
        for (i = 0, len = this.container.length; i < len; i++) {
            t = this.container[i];
            if (t === this)
                continue;
            t.updateIIDs();
            sol2 = t.getCurrentSol();
            sol2.select_all = select_all;
            if (!select_all) {
                cr.clearArray(sol2.instances);
                for (j = 0, lenj = sol.instances.length; j < lenj; ++j)
                    sol2.instances[j] = t.getInstanceByIID(sol.instances[j].iid);
                if (orblock) {
                    cr.clearArray(sol2.else_instances);
                    for (j = 0, lenj = sol.else_instances.length; j < lenj; ++j)
                        sol2.else_instances[j] = t.getInstanceByIID(sol.else_instances[j].iid);
                }
            }
        }
    };
    cr.type_toString = function() {
        return "Type" + this.sid;
    };
    cr.do_cmp = function(x, cmp, y) {
        if (typeof x === "undefined" || typeof y === "undefined")
            return false;
        switch (cmp) {
            case 0: // equal
                return x === y;
            case 1: // not equal
                return x !== y;
            case 2: // less
                return x < y;
            case 3: // less/equal
                return x <= y;
            case 4: // greater
                return x > y;
            case 5: // greater/equal
                return x >= y;
            default:
                ;
                return false;
        }
    };
})();
cr.shaders = {};;;
cr.plugins_.Arr = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Arr.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    var arrCache = [];

    function allocArray() {
        if (arrCache.length)
            return arrCache.pop();
        else
            return [];
    };
    if (!Array.isArray) {
        Array.isArray = function(vArg) {
            return Object.prototype.toString.call(vArg) === "[object Array]";
        };
    }

    function freeArray(a) {
        var i, len;
        for (i = 0, len = a.length; i < len; i++) {
            if (Array.isArray(a[i]))
                freeArray(a[i]);
        }
        cr.clearArray(a);
        arrCache.push(a);
    };
    instanceProto.onCreate = function() {
        this.cx = this.properties[0];
        this.cy = this.properties[1];
        this.cz = this.properties[2];
        if (!this.recycled)
            this.arr = allocArray();
        var a = this.arr;
        a.length = this.cx;
        var x, y, z;
        for (x = 0; x < this.cx; x++) {
            if (!a[x])
                a[x] = allocArray();
            a[x].length = this.cy;
            for (y = 0; y < this.cy; y++) {
                if (!a[x][y])
                    a[x][y] = allocArray();
                a[x][y].length = this.cz;
                for (z = 0; z < this.cz; z++)
                    a[x][y][z] = 0;
            }
        }
        this.forX = [];
        this.forY = [];
        this.forZ = [];
        this.forDepth = -1;
    };
    instanceProto.onDestroy = function() {
        var x;
        for (x = 0; x < this.cx; x++)
            freeArray(this.arr[x]); // will recurse down and recycle other arrays
        cr.clearArray(this.arr);
    };
    instanceProto.at = function(x, y, z) {
        x = Math.floor(x);
        y = Math.floor(y);
        z = Math.floor(z);
        if (isNaN(x) || x < 0 || x > this.cx - 1)
            return 0;
        if (isNaN(y) || y < 0 || y > this.cy - 1)
            return 0;
        if (isNaN(z) || z < 0 || z > this.cz - 1)
            return 0;
        return this.arr[x][y][z];
    };
    instanceProto.set = function(x, y, z, val) {
        x = Math.floor(x);
        y = Math.floor(y);
        z = Math.floor(z);
        if (isNaN(x) || x < 0 || x > this.cx - 1)
            return;
        if (isNaN(y) || y < 0 || y > this.cy - 1)
            return;
        if (isNaN(z) || z < 0 || z > this.cz - 1)
            return;
        this.arr[x][y][z] = val;
    };
    instanceProto.getAsJSON = function() {
        return JSON.stringify({
            "c2array": true,
            "size": [this.cx, this.cy, this.cz],
            "data": this.arr
        });
    };
    instanceProto.saveToJSON = function() {
        return {
            "size": [this.cx, this.cy, this.cz],
            "data": this.arr
        };
    };
    instanceProto.loadFromJSON = function(o) {
        var sz = o["size"];
        this.cx = sz[0];
        this.cy = sz[1];
        this.cz = sz[2];
        this.arr = o["data"];
    };
    instanceProto.setSize = function(w, h, d) {
        if (w < 0) w = 0;
        if (h < 0) h = 0;
        if (d < 0) d = 0;
        if (this.cx === w && this.cy === h && this.cz === d)
            return; // no change
        this.cx = w;
        this.cy = h;
        this.cz = d;
        var x, y, z;
        var a = this.arr;
        a.length = w;
        for (x = 0; x < this.cx; x++) {
            if (cr.is_undefined(a[x]))
                a[x] = allocArray();
            a[x].length = h;
            for (y = 0; y < this.cy; y++) {
                if (cr.is_undefined(a[x][y]))
                    a[x][y] = allocArray();
                a[x][y].length = d;
                for (z = 0; z < this.cz; z++) {
                    if (cr.is_undefined(a[x][y][z]))
                        a[x][y][z] = 0;
                }
            }
        }
    };
    instanceProto.getForX = function() {
        if (this.forDepth >= 0 && this.forDepth < this.forX.length)
            return this.forX[this.forDepth];
        else
            return 0;
    };
    instanceProto.getForY = function() {
        if (this.forDepth >= 0 && this.forDepth < this.forY.length)
            return this.forY[this.forDepth];
        else
            return 0;
    };
    instanceProto.getForZ = function() {
        if (this.forDepth >= 0 && this.forDepth < this.forZ.length)
            return this.forZ[this.forDepth];
        else
            return 0;
    };

    function Cnds() {};
    Cnds.prototype.CompareX = function(x, cmp, val) {
        return cr.do_cmp(this.at(x, 0, 0), cmp, val);
    };
    Cnds.prototype.CompareXY = function(x, y, cmp, val) {
        return cr.do_cmp(this.at(x, y, 0), cmp, val);
    };
    Cnds.prototype.CompareXYZ = function(x, y, z, cmp, val) {
        return cr.do_cmp(this.at(x, y, z), cmp, val);
    };
    instanceProto.doForEachTrigger = function(current_event) {
        this.runtime.pushCopySol(current_event.solModifiers);
        current_event.retrigger();
        this.runtime.popSol(current_event.solModifiers);
    };
    Cnds.prototype.ArrForEach = function(dims) {
        var current_event = this.runtime.getCurrentEventStack().current_event;
        this.forDepth++;
        var forDepth = this.forDepth;
        if (forDepth === this.forX.length) {
            this.forX.push(0);
            this.forY.push(0);
            this.forZ.push(0);
        } else {
            this.forX[forDepth] = 0;
            this.forY[forDepth] = 0;
            this.forZ[forDepth] = 0;
        }
        switch (dims) {
            case 0:
                for (this.forX[forDepth] = 0; this.forX[forDepth] < this.cx; this.forX[forDepth]++) {
                    for (this.forY[forDepth] = 0; this.forY[forDepth] < this.cy; this.forY[forDepth]++) {
                        for (this.forZ[forDepth] = 0; this.forZ[forDepth] < this.cz; this.forZ[forDepth]++) {
                            this.doForEachTrigger(current_event);
                        }
                    }
                }
                break;
            case 1:
                for (this.forX[forDepth] = 0; this.forX[forDepth] < this.cx; this.forX[forDepth]++) {
                    for (this.forY[forDepth] = 0; this.forY[forDepth] < this.cy; this.forY[forDepth]++) {
                        this.doForEachTrigger(current_event);
                    }
                }
                break;
            case 2:
                for (this.forX[forDepth] = 0; this.forX[forDepth] < this.cx; this.forX[forDepth]++) {
                    this.doForEachTrigger(current_event);
                }
                break;
        }
        this.forDepth--;
        return false;
    };
    Cnds.prototype.CompareCurrent = function(cmp, val) {
        return cr.do_cmp(this.at(this.getForX(), this.getForY(), this.getForZ()), cmp, val);
    };
    Cnds.prototype.Contains = function(val) {
        var x, y, z;
        for (x = 0; x < this.cx; x++) {
            for (y = 0; y < this.cy; y++) {
                for (z = 0; z < this.cz; z++) {
                    if (this.arr[x][y][z] === val)
                        return true;
                }
            }
        }
        return false;
    };
    Cnds.prototype.IsEmpty = function() {
        return this.cx === 0 || this.cy === 0 || this.cz === 0;
    };
    Cnds.prototype.CompareSize = function(axis, cmp, value) {
        var s = 0;
        switch (axis) {
            case 0:
                s = this.cx;
                break;
            case 1:
                s = this.cy;
                break;
            case 2:
                s = this.cz;
                break;
        }
        return cr.do_cmp(s, cmp, value);
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.Clear = function() {
        var x, y, z;
        for (x = 0; x < this.cx; x++)
            for (y = 0; y < this.cy; y++)
                for (z = 0; z < this.cz; z++)
                    this.arr[x][y][z] = 0;
    };
    Acts.prototype.SetSize = function(w, h, d) {
        this.setSize(w, h, d);
    };
    Acts.prototype.SetX = function(x, val) {
        this.set(x, 0, 0, val);
    };
    Acts.prototype.SetXY = function(x, y, val) {
        this.set(x, y, 0, val);
    };
    Acts.prototype.SetXYZ = function(x, y, z, val) {
        this.set(x, y, z, val);
    };
    Acts.prototype.Push = function(where, value, axis) {
        var x = 0,
            y = 0,
            z = 0;
        var a = this.arr;
        switch (axis) {
            case 0: // X axis
                if (where === 0) // back
                {
                    x = a.length;
                    a.push(allocArray());
                } else // front
                {
                    x = 0;
                    a.unshift(allocArray());
                }
                a[x].length = this.cy;
                for (; y < this.cy; y++) {
                    a[x][y] = allocArray();
                    a[x][y].length = this.cz;
                    for (z = 0; z < this.cz; z++)
                        a[x][y][z] = value;
                }
                this.cx++;
                break;
            case 1: // Y axis
                for (; x < this.cx; x++) {
                    if (where === 0) // back
                    {
                        y = a[x].length;
                        a[x].push(allocArray());
                    } else // front
                    {
                        y = 0;
                        a[x].unshift(allocArray());
                    }
                    a[x][y].length = this.cz;
                    for (z = 0; z < this.cz; z++)
                        a[x][y][z] = value;
                }
                this.cy++;
                break;
            case 2: // Z axis
                for (; x < this.cx; x++) {
                    for (y = 0; y < this.cy; y++) {
                        if (where === 0) // back
                        {
                            a[x][y].push(value);
                        } else // front
                        {
                            a[x][y].unshift(value);
                        }
                    }
                }
                this.cz++;
                break;
        }
    };
    Acts.prototype.Pop = function(where, axis) {
        var x = 0,
            y = 0,
            z = 0;
        var a = this.arr;
        switch (axis) {
            case 0: // X axis
                if (this.cx === 0)
                    break;
                if (where === 0) // back
                {
                    freeArray(a.pop());
                } else // front
                {
                    freeArray(a.shift());
                }
                this.cx--;
                break;
            case 1: // Y axis
                if (this.cy === 0)
                    break;
                for (; x < this.cx; x++) {
                    if (where === 0) // back
                    {
                        freeArray(a[x].pop());
                    } else // front
                    {
                        freeArray(a[x].shift());
                    }
                }
                this.cy--;
                break;
            case 2: // Z axis
                if (this.cz === 0)
                    break;
                for (; x < this.cx; x++) {
                    for (y = 0; y < this.cy; y++) {
                        if (where === 0) // back
                        {
                            a[x][y].pop();
                        } else // front
                        {
                            a[x][y].shift();
                        }
                    }
                }
                this.cz--;
                break;
        }
    };
    Acts.prototype.Reverse = function(axis) {
        var x = 0,
            y = 0,
            z = 0;
        var a = this.arr;
        if (this.cx === 0 || this.cy === 0 || this.cz === 0)
            return; // no point reversing empty array
        switch (axis) {
            case 0: // X axis
                a.reverse();
                break;
            case 1: // Y axis
                for (; x < this.cx; x++)
                    a[x].reverse();
                break;
            case 2: // Z axis
                for (; x < this.cx; x++)
                    for (y = 0; y < this.cy; y++)
                        a[x][y].reverse();
                break;
        }
    };

    function compareValues(va, vb) {
        if (cr.is_number(va) && cr.is_number(vb))
            return va - vb;
        else {
            var sa = "" + va;
            var sb = "" + vb;
            if (sa < sb)
                return -1;
            else if (sa > sb)
                return 1;
            else
                return 0;
        }
    }
    Acts.prototype.Sort = function(axis) {
        var x = 0,
            y = 0,
            z = 0;
        var a = this.arr;
        if (this.cx === 0 || this.cy === 0 || this.cz === 0)
            return; // no point sorting empty array
        switch (axis) {
            case 0: // X axis
                a.sort(function(a, b) {
                    return compareValues(a[0][0], b[0][0]);
                });
                break;
            case 1: // Y axis
                for (; x < this.cx; x++) {
                    a[x].sort(function(a, b) {
                        return compareValues(a[0], b[0]);
                    });
                }
                break;
            case 2: // Z axis
                for (; x < this.cx; x++) {
                    for (y = 0; y < this.cy; y++) {
                        a[x][y].sort(compareValues);
                    }
                }
                break;
        }
    };
    Acts.prototype.Delete = function(index, axis) {
        var x = 0,
            y = 0,
            z = 0;
        index = Math.floor(index);
        var a = this.arr;
        if (index < 0)
            return;
        switch (axis) {
            case 0: // X axis
                if (index >= this.cx)
                    break;
                freeArray(a[index]);
                a.splice(index, 1);
                this.cx--;
                break;
            case 1: // Y axis
                if (index >= this.cy)
                    break;
                for (; x < this.cx; x++) {
                    freeArray(a[x][index]);
                    a[x].splice(index, 1);
                }
                this.cy--;
                break;
            case 2: // Z axis
                if (index >= this.cz)
                    break;
                for (; x < this.cx; x++) {
                    for (y = 0; y < this.cy; y++) {
                        a[x][y].splice(index, 1);
                    }
                }
                this.cz--;
                break;
        }
    };
    Acts.prototype.Insert = function(value, index, axis) {
        var x = 0,
            y = 0,
            z = 0;
        index = Math.floor(index);
        var a = this.arr;
        if (index < 0)
            return;
        switch (axis) {
            case 0: // X axis
                if (index > this.cx)
                    return;
                x = index;
                a.splice(x, 0, allocArray());
                a[x].length = this.cy;
                for (; y < this.cy; y++) {
                    a[x][y] = allocArray();
                    a[x][y].length = this.cz;
                    for (z = 0; z < this.cz; z++)
                        a[x][y][z] = value;
                }
                this.cx++;
                break;
            case 1: // Y axis
                if (index > this.cy)
                    return;
                for (; x < this.cx; x++) {
                    y = index;
                    a[x].splice(y, 0, allocArray());
                    a[x][y].length = this.cz;
                    for (z = 0; z < this.cz; z++)
                        a[x][y][z] = value;
                }
                this.cy++;
                break;
            case 2: // Z axis
                if (index > this.cz)
                    return;
                for (; x < this.cx; x++) {
                    for (y = 0; y < this.cy; y++) {
                        a[x][y].splice(index, 0, value);
                    }
                }
                this.cz++;
                break;
        }
    };
    Acts.prototype.JSONLoad = function(json_) {
        var o;
        try {
            o = JSON.parse(json_);
        } catch (e) {
            return;
        }
        if (!o["c2array"]) // presumably not a c2array object
            return;
        var sz = o["size"];
        this.cx = sz[0];
        this.cy = sz[1];
        this.cz = sz[2];
        this.arr = o["data"];
    };
    Acts.prototype.JSONDownload = function(filename) {
        var a = document.createElement("a");
        if (typeof a.download === "undefined") {
            var str = 'data:text/html,' + encodeURIComponent("<p><a download='" + filename + "' href=\"data:application/json," +
                encodeURIComponent(this.getAsJSON()) +
                "\">Download link</a></p>");
            window.open(str);
        } else {
            var body = document.getElementsByTagName("body")[0];
            a.textContent = filename;
            a.href = "data:application/json," + encodeURIComponent(this.getAsJSON());
            a.download = filename;
            body.appendChild(a);
            var clickEvent = document.createEvent("MouseEvent");
            clickEvent.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            a.dispatchEvent(clickEvent);
            body.removeChild(a);
        }
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.At = function(ret, x, y_, z_) {
        var y = y_ || 0;
        var z = z_ || 0;
        ret.set_any(this.at(x, y, z));
    };
    Exps.prototype.Width = function(ret) {
        ret.set_int(this.cx);
    };
    Exps.prototype.Height = function(ret) {
        ret.set_int(this.cy);
    };
    Exps.prototype.Depth = function(ret) {
        ret.set_int(this.cz);
    };
    Exps.prototype.CurX = function(ret) {
        ret.set_int(this.getForX());
    };
    Exps.prototype.CurY = function(ret) {
        ret.set_int(this.getForY());
    };
    Exps.prototype.CurZ = function(ret) {
        ret.set_int(this.getForZ());
    };
    Exps.prototype.CurValue = function(ret) {
        ret.set_any(this.at(this.getForX(), this.getForY(), this.getForZ()));
    };
    Exps.prototype.Front = function(ret) {
        ret.set_any(this.at(0, 0, 0));
    };
    Exps.prototype.Back = function(ret) {
        ret.set_any(this.at(this.cx - 1, 0, 0));
    };
    Exps.prototype.IndexOf = function(ret, v) {
        for (var i = 0; i < this.cx; i++) {
            if (this.arr[i][0][0] === v) {
                ret.set_int(i);
                return;
            }
        }
        ret.set_int(-1);
    };
    Exps.prototype.LastIndexOf = function(ret, v) {
        for (var i = this.cx - 1; i >= 0; i--) {
            if (this.arr[i][0][0] === v) {
                ret.set_int(i);
                return;
            }
        }
        ret.set_int(-1);
    };
    Exps.prototype.AsJSON = function(ret) {
        ret.set_string(this.getAsJSON());
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Audio = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Audio.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    var audRuntime = null;
    var audInst = null;
    var audTag = "";
    var appPath = ""; // for Cordova only
    var API_HTML5 = 0;
    var API_WEBAUDIO = 1;
    var API_CORDOVA = 2;
    var API_APPMOBI = 3;
    var api = API_HTML5;
    var context = null;
    var audioBuffers = []; // cache of buffers
    var audioInstances = []; // cache of instances
    var lastAudio = null;
    var useOgg = false; // determined at create time
    var timescale_mode = 0;
    var silent = false;
    var masterVolume = 1;
    var listenerX = 0;
    var listenerY = 0;
    var isContextSuspended = false;
    var panningModel = 1; // HRTF
    var distanceModel = 1; // Inverse
    var refDistance = 10;
    var maxDistance = 10000;
    var rolloffFactor = 1;
    var micSource = null;
    var micTag = "";
    var useNextTouchWorkaround = false; // heuristic in case play() does not return a promise and we have to guess if the play was blocked
    var playOnNextInput = []; // C2AudioInstances with HTMLAudioElements to play on next input event
    var playMusicAsSoundWorkaround = false; // play music tracks with Web Audio API
    var hasPlayedDummyBuffer = false; // dummy buffer played to unblock AudioContext on some platforms
    function addAudioToPlayOnNextInput(a) {
        var i = playOnNextInput.indexOf(a);
        if (i === -1)
            playOnNextInput.push(a);
    };

    function tryPlayAudioElement(a) {
        var audioElem = a.instanceObject;
        var playRet;
        try {
            playRet = audioElem.play();
        } catch (err) {
            addAudioToPlayOnNextInput(a);
            return;
        }
        if (playRet) // promise was returned
        {
            playRet.catch(function(err) {
                addAudioToPlayOnNextInput(a);
            });
        } else if (useNextTouchWorkaround && !audRuntime.isInUserInputEvent) {
            addAudioToPlayOnNextInput(a);
        }
    };

    function playQueuedAudio() {
        var i, len, m, playRet;
        if (!hasPlayedDummyBuffer && !isContextSuspended && context) {
            playDummyBuffer();
            if (context["state"] === "running")
                hasPlayedDummyBuffer = true;
        }
        var tryPlay = playOnNextInput.slice(0);
        cr.clearArray(playOnNextInput);
        if (!silent) {
            for (i = 0, len = tryPlay.length; i < len; ++i) {
                m = tryPlay[i];
                if (!m.stopped && !m.is_paused) {
                    playRet = m.instanceObject.play();
                    if (playRet) {
                        playRet.catch(function(err) {
                            addAudioToPlayOnNextInput(m);
                        });
                    }
                }
            }
        }
    };

    function playDummyBuffer() {
        if (context["state"] === "suspended" && context["resume"])
            context["resume"]();
        if (!context["createBuffer"])
            return;
        var buffer = context["createBuffer"](1, 220, 22050);
        var source = context["createBufferSource"]();
        source["buffer"] = buffer;
        source["connect"](context["destination"]);
        startSource(source);
    };
    document.addEventListener("pointerup", playQueuedAudio, true);
    document.addEventListener("touchend", playQueuedAudio, true);
    document.addEventListener("click", playQueuedAudio, true);
    document.addEventListener("keydown", playQueuedAudio, true);
    document.addEventListener("gamepadconnected", playQueuedAudio, true);

    function dbToLinear(x) {
        var v = dbToLinear_nocap(x);
        if (!isFinite(v)) // accidentally passing a string can result in NaN; set volume to 0 if so
            v = 0;
        if (v < 0)
            v = 0;
        if (v > 1)
            v = 1;
        return v;
    };

    function linearToDb(x) {
        if (x < 0)
            x = 0;
        if (x > 1)
            x = 1;
        return linearToDb_nocap(x);
    };

    function dbToLinear_nocap(x) {
        return Math.pow(10, x / 20);
    };

    function linearToDb_nocap(x) {
        return (Math.log(x) / Math.log(10)) * 20;
    };
    var effects = {};

    function getDestinationForTag(tag) {
        tag = tag.toLowerCase();
        if (effects.hasOwnProperty(tag)) {
            if (effects[tag].length)
                return effects[tag][0].getInputNode();
        }
        return context["destination"];
    };

    function createGain() {
        if (context["createGain"])
            return context["createGain"]();
        else
            return context["createGainNode"]();
    };

    function createDelay(d) {
        if (context["createDelay"])
            return context["createDelay"](d);
        else
            return context["createDelayNode"](d);
    };

    function startSource(s, scheduledTime) {
        if (s["start"])
            s["start"](scheduledTime || 0);
        else
            s["noteOn"](scheduledTime || 0);
    };

    function startSourceAt(s, x, d, scheduledTime) {
        if (s["start"])
            s["start"](scheduledTime || 0, x);
        else
            s["noteGrainOn"](scheduledTime || 0, x, d - x);
    };

    function stopSource(s) {
        try {
            if (s["stop"])
                s["stop"](0);
            else
                s["noteOff"](0);
        } catch (e) {}
    };

    function setAudioParam(ap, value, ramp, time) {
        if (!ap)
            return; // iOS is missing some parameters
        ap["cancelScheduledValues"](0);
        if (time === 0) {
            ap["value"] = value;
            return;
        }
        var curTime = context["currentTime"];
        time += curTime;
        switch (ramp) {
            case 0: // step
                ap["setValueAtTime"](value, time);
                break;
            case 1: // linear
                ap["setValueAtTime"](ap["value"], curTime); // to set what to ramp from
                ap["linearRampToValueAtTime"](value, time);
                break;
            case 2: // exponential
                ap["setValueAtTime"](ap["value"], curTime); // to set what to ramp from
                ap["exponentialRampToValueAtTime"](value, time);
                break;
        }
    };
    var filterTypes = ["lowpass", "highpass", "bandpass", "lowshelf", "highshelf", "peaking", "notch", "allpass"];

    function FilterEffect(type, freq, detune, q, gain, mix) {
        this.type = "filter";
        this.params = [type, freq, detune, q, gain, mix];
        this.inputNode = createGain();
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix;
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - mix;
        this.filterNode = context["createBiquadFilter"]();
        if (typeof this.filterNode["type"] === "number")
            this.filterNode["type"] = type;
        else
            this.filterNode["type"] = filterTypes[type];
        this.filterNode["frequency"]["value"] = freq;
        if (this.filterNode["detune"]) // iOS 6 doesn't have detune yet
            this.filterNode["detune"]["value"] = detune;
        this.filterNode["Q"]["value"] = q;
        this.filterNode["gain"]["value"] = gain;
        this.inputNode["connect"](this.filterNode);
        this.inputNode["connect"](this.dryNode);
        this.filterNode["connect"](this.wetNode);
    };
    FilterEffect.prototype.connectTo = function(node) {
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node);
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node);
    };
    FilterEffect.prototype.remove = function() {
        this.inputNode["disconnect"]();
        this.filterNode["disconnect"]();
        this.wetNode["disconnect"]();
        this.dryNode["disconnect"]();
    };
    FilterEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    FilterEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[5] = value;
                setAudioParam(this.wetNode["gain"], value, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - value, ramp, time);
                break;
            case 1: // filter frequency
                this.params[1] = value;
                setAudioParam(this.filterNode["frequency"], value, ramp, time);
                break;
            case 2: // filter detune
                this.params[2] = value;
                setAudioParam(this.filterNode["detune"], value, ramp, time);
                break;
            case 3: // filter Q
                this.params[3] = value;
                setAudioParam(this.filterNode["Q"], value, ramp, time);
                break;
            case 4: // filter/delay gain (note value is in dB here)
                this.params[4] = value;
                setAudioParam(this.filterNode["gain"], value, ramp, time);
                break;
        }
    };

    function DelayEffect(delayTime, delayGain, mix) {
        this.type = "delay";
        this.params = [delayTime, delayGain, mix];
        this.inputNode = createGain();
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix;
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - mix;
        this.mainNode = createGain();
        this.delayNode = createDelay(delayTime);
        this.delayNode["delayTime"]["value"] = delayTime;
        this.delayGainNode = createGain();
        this.delayGainNode["gain"]["value"] = delayGain;
        this.inputNode["connect"](this.mainNode);
        this.inputNode["connect"](this.dryNode);
        this.mainNode["connect"](this.wetNode);
        this.mainNode["connect"](this.delayNode);
        this.delayNode["connect"](this.delayGainNode);
        this.delayGainNode["connect"](this.mainNode);
    };
    DelayEffect.prototype.connectTo = function(node) {
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node);
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node);
    };
    DelayEffect.prototype.remove = function() {
        this.inputNode["disconnect"]();
        this.mainNode["disconnect"]();
        this.delayNode["disconnect"]();
        this.delayGainNode["disconnect"]();
        this.wetNode["disconnect"]();
        this.dryNode["disconnect"]();
    };
    DelayEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    DelayEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[2] = value;
                setAudioParam(this.wetNode["gain"], value, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - value, ramp, time);
                break;
            case 4: // filter/delay gain (note value is passed in dB but needs to be linear here)
                this.params[1] = dbToLinear(value);
                setAudioParam(this.delayGainNode["gain"], dbToLinear(value), ramp, time);
                break;
            case 5: // delay time
                this.params[0] = value;
                setAudioParam(this.delayNode["delayTime"], value, ramp, time);
                break;
        }
    };

    function ConvolveEffect(buffer, normalize, mix, src) {
        this.type = "convolve";
        this.params = [normalize, mix, src];
        this.inputNode = createGain();
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix;
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - mix;
        this.convolveNode = context["createConvolver"]();
        if (buffer) {
            this.convolveNode["normalize"] = normalize;
            this.convolveNode["buffer"] = buffer;
        }
        this.inputNode["connect"](this.convolveNode);
        this.inputNode["connect"](this.dryNode);
        this.convolveNode["connect"](this.wetNode);
    };
    ConvolveEffect.prototype.connectTo = function(node) {
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node);
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node);
    };
    ConvolveEffect.prototype.remove = function() {
        this.inputNode["disconnect"]();
        this.convolveNode["disconnect"]();
        this.wetNode["disconnect"]();
        this.dryNode["disconnect"]();
    };
    ConvolveEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    ConvolveEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[1] = value;
                setAudioParam(this.wetNode["gain"], value, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - value, ramp, time);
                break;
        }
    };

    function FlangerEffect(delay, modulation, freq, feedback, mix) {
        this.type = "flanger";
        this.params = [delay, modulation, freq, feedback, mix];
        this.inputNode = createGain();
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - (mix / 2);
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix / 2;
        this.feedbackNode = createGain();
        this.feedbackNode["gain"]["value"] = feedback;
        this.delayNode = createDelay(delay + modulation);
        this.delayNode["delayTime"]["value"] = delay;
        this.oscNode = context["createOscillator"]();
        this.oscNode["frequency"]["value"] = freq;
        this.oscGainNode = createGain();
        this.oscGainNode["gain"]["value"] = modulation;
        this.inputNode["connect"](this.delayNode);
        this.inputNode["connect"](this.dryNode);
        this.delayNode["connect"](this.wetNode);
        this.delayNode["connect"](this.feedbackNode);
        this.feedbackNode["connect"](this.delayNode);
        this.oscNode["connect"](this.oscGainNode);
        this.oscGainNode["connect"](this.delayNode["delayTime"]);
        startSource(this.oscNode);
    };
    FlangerEffect.prototype.connectTo = function(node) {
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node);
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node);
    };
    FlangerEffect.prototype.remove = function() {
        this.inputNode["disconnect"]();
        this.delayNode["disconnect"]();
        this.oscNode["disconnect"]();
        this.oscGainNode["disconnect"]();
        this.dryNode["disconnect"]();
        this.wetNode["disconnect"]();
        this.feedbackNode["disconnect"]();
    };
    FlangerEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    FlangerEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[4] = value;
                setAudioParam(this.wetNode["gain"], value / 2, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - (value / 2), ramp, time);
                break;
            case 6: // modulation
                this.params[1] = value / 1000;
                setAudioParam(this.oscGainNode["gain"], value / 1000, ramp, time);
                break;
            case 7: // modulation frequency
                this.params[2] = value;
                setAudioParam(this.oscNode["frequency"], value, ramp, time);
                break;
            case 8: // feedback
                this.params[3] = value / 100;
                setAudioParam(this.feedbackNode["gain"], value / 100, ramp, time);
                break;
        }
    };

    function PhaserEffect(freq, detune, q, modulation, modfreq, mix) {
        this.type = "phaser";
        this.params = [freq, detune, q, modulation, modfreq, mix];
        this.inputNode = createGain();
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - (mix / 2);
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix / 2;
        this.filterNode = context["createBiquadFilter"]();
        if (typeof this.filterNode["type"] === "number")
            this.filterNode["type"] = 7; // all-pass
        else
            this.filterNode["type"] = "allpass";
        this.filterNode["frequency"]["value"] = freq;
        if (this.filterNode["detune"]) // iOS 6 doesn't have detune yet
            this.filterNode["detune"]["value"] = detune;
        this.filterNode["Q"]["value"] = q;
        this.oscNode = context["createOscillator"]();
        this.oscNode["frequency"]["value"] = modfreq;
        this.oscGainNode = createGain();
        this.oscGainNode["gain"]["value"] = modulation;
        this.inputNode["connect"](this.filterNode);
        this.inputNode["connect"](this.dryNode);
        this.filterNode["connect"](this.wetNode);
        this.oscNode["connect"](this.oscGainNode);
        this.oscGainNode["connect"](this.filterNode["frequency"]);
        startSource(this.oscNode);
    };
    PhaserEffect.prototype.connectTo = function(node) {
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node);
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node);
    };
    PhaserEffect.prototype.remove = function() {
        this.inputNode["disconnect"]();
        this.filterNode["disconnect"]();
        this.oscNode["disconnect"]();
        this.oscGainNode["disconnect"]();
        this.dryNode["disconnect"]();
        this.wetNode["disconnect"]();
    };
    PhaserEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    PhaserEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[5] = value;
                setAudioParam(this.wetNode["gain"], value / 2, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - (value / 2), ramp, time);
                break;
            case 1: // filter frequency
                this.params[0] = value;
                setAudioParam(this.filterNode["frequency"], value, ramp, time);
                break;
            case 2: // filter detune
                this.params[1] = value;
                setAudioParam(this.filterNode["detune"], value, ramp, time);
                break;
            case 3: // filter Q
                this.params[2] = value;
                setAudioParam(this.filterNode["Q"], value, ramp, time);
                break;
            case 6: // modulation
                this.params[3] = value;
                setAudioParam(this.oscGainNode["gain"], value, ramp, time);
                break;
            case 7: // modulation frequency
                this.params[4] = value;
                setAudioParam(this.oscNode["frequency"], value, ramp, time);
                break;
        }
    };

    function GainEffect(g) {
        this.type = "gain";
        this.params = [g];
        this.node = createGain();
        this.node["gain"]["value"] = g;
    };
    GainEffect.prototype.connectTo = function(node_) {
        this.node["disconnect"]();
        this.node["connect"](node_);
    };
    GainEffect.prototype.remove = function() {
        this.node["disconnect"]();
    };
    GainEffect.prototype.getInputNode = function() {
        return this.node;
    };
    GainEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 4: // gain
                this.params[0] = dbToLinear(value);
                setAudioParam(this.node["gain"], dbToLinear(value), ramp, time);
                break;
        }
    };

    function TremoloEffect(freq, mix) {
        this.type = "tremolo";
        this.params = [freq, mix];
        this.node = createGain();
        this.node["gain"]["value"] = 1 - (mix / 2);
        this.oscNode = context["createOscillator"]();
        this.oscNode["frequency"]["value"] = freq;
        this.oscGainNode = createGain();
        this.oscGainNode["gain"]["value"] = mix / 2;
        this.oscNode["connect"](this.oscGainNode);
        this.oscGainNode["connect"](this.node["gain"]);
        startSource(this.oscNode);
    };
    TremoloEffect.prototype.connectTo = function(node_) {
        this.node["disconnect"]();
        this.node["connect"](node_);
    };
    TremoloEffect.prototype.remove = function() {
        this.oscNode["disconnect"]();
        this.oscGainNode["disconnect"]();
        this.node["disconnect"]();
    };
    TremoloEffect.prototype.getInputNode = function() {
        return this.node;
    };
    TremoloEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[1] = value;
                setAudioParam(this.node["gain"]["value"], 1 - (value / 2), ramp, time);
                setAudioParam(this.oscGainNode["gain"]["value"], value / 2, ramp, time);
                break;
            case 7: // modulation frequency
                this.params[0] = value;
                setAudioParam(this.oscNode["frequency"], value, ramp, time);
                break;
        }
    };

    function RingModulatorEffect(freq, mix) {
        this.type = "ringmod";
        this.params = [freq, mix];
        this.inputNode = createGain();
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix;
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - mix;
        this.ringNode = createGain();
        this.ringNode["gain"]["value"] = 0;
        this.oscNode = context["createOscillator"]();
        this.oscNode["frequency"]["value"] = freq;
        this.oscNode["connect"](this.ringNode["gain"]);
        startSource(this.oscNode);
        this.inputNode["connect"](this.ringNode);
        this.inputNode["connect"](this.dryNode);
        this.ringNode["connect"](this.wetNode);
    };
    RingModulatorEffect.prototype.connectTo = function(node_) {
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node_);
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node_);
    };
    RingModulatorEffect.prototype.remove = function() {
        this.oscNode["disconnect"]();
        this.ringNode["disconnect"]();
        this.inputNode["disconnect"]();
        this.wetNode["disconnect"]();
        this.dryNode["disconnect"]();
    };
    RingModulatorEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    RingModulatorEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[1] = value;
                setAudioParam(this.wetNode["gain"], value, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - value, ramp, time);
                break;
            case 7: // modulation frequency
                this.params[0] = value;
                setAudioParam(this.oscNode["frequency"], value, ramp, time);
                break;
        }
    };

    function DistortionEffect(threshold, headroom, drive, makeupgain, mix) {
        this.type = "distortion";
        this.params = [threshold, headroom, drive, makeupgain, mix];
        this.inputNode = createGain();
        this.preGain = createGain();
        this.postGain = createGain();
        this.setDrive(drive, dbToLinear_nocap(makeupgain));
        this.wetNode = createGain();
        this.wetNode["gain"]["value"] = mix;
        this.dryNode = createGain();
        this.dryNode["gain"]["value"] = 1 - mix;
        this.waveShaper = context["createWaveShaper"]();
        this.curve = new Float32Array(65536);
        this.generateColortouchCurve(threshold, headroom);
        this.waveShaper.curve = this.curve;
        this.inputNode["connect"](this.preGain);
        this.inputNode["connect"](this.dryNode);
        this.preGain["connect"](this.waveShaper);
        this.waveShaper["connect"](this.postGain);
        this.postGain["connect"](this.wetNode);
    };
    DistortionEffect.prototype.setDrive = function(drive, makeupgain) {
        if (drive < 0.01)
            drive = 0.01;
        this.preGain["gain"]["value"] = drive;
        this.postGain["gain"]["value"] = Math.pow(1 / drive, 0.6) * makeupgain;
    };

    function e4(x, k) {
        return 1.0 - Math.exp(-k * x);
    }
    DistortionEffect.prototype.shape = function(x, linearThreshold, linearHeadroom) {
        var maximum = 1.05 * linearHeadroom * linearThreshold;
        var kk = (maximum - linearThreshold);
        var sign = x < 0 ? -1 : +1;
        var absx = x < 0 ? -x : x;
        var shapedInput = absx < linearThreshold ? absx : linearThreshold + kk * e4(absx - linearThreshold, 1.0 / kk);
        shapedInput *= sign;
        return shapedInput;
    };
    DistortionEffect.prototype.generateColortouchCurve = function(threshold, headroom) {
        var linearThreshold = dbToLinear_nocap(threshold);
        var linearHeadroom = dbToLinear_nocap(headroom);
        var n = 65536;
        var n2 = n / 2;
        var x = 0;
        for (var i = 0; i < n2; ++i) {
            x = i / n2;
            x = this.shape(x, linearThreshold, linearHeadroom);
            this.curve[n2 + i] = x;
            this.curve[n2 - i - 1] = -x;
        }
    };
    DistortionEffect.prototype.connectTo = function(node) {
        this.wetNode["disconnect"]();
        this.wetNode["connect"](node);
        this.dryNode["disconnect"]();
        this.dryNode["connect"](node);
    };
    DistortionEffect.prototype.remove = function() {
        this.inputNode["disconnect"]();
        this.preGain["disconnect"]();
        this.waveShaper["disconnect"]();
        this.postGain["disconnect"]();
        this.wetNode["disconnect"]();
        this.dryNode["disconnect"]();
    };
    DistortionEffect.prototype.getInputNode = function() {
        return this.inputNode;
    };
    DistortionEffect.prototype.setParam = function(param, value, ramp, time) {
        switch (param) {
            case 0: // mix
                value = value / 100;
                if (value < 0) value = 0;
                if (value > 1) value = 1;
                this.params[4] = value;
                setAudioParam(this.wetNode["gain"], value, ramp, time);
                setAudioParam(this.dryNode["gain"], 1 - value, ramp, time);
                break;
        }
    };

    function CompressorEffect(threshold, knee, ratio, attack, release) {
        this.type = "compressor";
        this.params = [threshold, knee, ratio, attack, release];
        this.node = context["createDynamicsCompressor"]();
        try {
            this.node["threshold"]["value"] = threshold;
            this.node["knee"]["value"] = knee;
            this.node["ratio"]["value"] = ratio;
            this.node["attack"]["value"] = attack;
            this.node["release"]["value"] = release;
        } catch (e) {}
    };
    CompressorEffect.prototype.connectTo = function(node_) {
        this.node["disconnect"]();
        this.node["connect"](node_);
    };
    CompressorEffect.prototype.remove = function() {
        this.node["disconnect"]();
    };
    CompressorEffect.prototype.getInputNode = function() {
        return this.node;
    };
    CompressorEffect.prototype.setParam = function(param, value, ramp, time) {};

    function AnalyserEffect(fftSize, smoothing) {
        this.type = "analyser";
        this.params = [fftSize, smoothing];
        this.node = context["createAnalyser"]();
        this.node["fftSize"] = fftSize;
        this.node["smoothingTimeConstant"] = smoothing;
        this.freqBins = new Float32Array(this.node["frequencyBinCount"]);
        this.signal = new Uint8Array(fftSize);
        this.peak = 0;
        this.rms = 0;
    };
    AnalyserEffect.prototype.tick = function() {
        this.node["getFloatFrequencyData"](this.freqBins);
        this.node["getByteTimeDomainData"](this.signal);
        var fftSize = this.node["fftSize"];
        var i = 0;
        this.peak = 0;
        var rmsSquaredSum = 0;
        var s = 0;
        for (; i < fftSize; i++) {
            s = (this.signal[i] - 128) / 128;
            if (s < 0)
                s = -s;
            if (this.peak < s)
                this.peak = s;
            rmsSquaredSum += s * s;
        }
        this.peak = linearToDb(this.peak);
        this.rms = linearToDb(Math.sqrt(rmsSquaredSum / fftSize));
    };
    AnalyserEffect.prototype.connectTo = function(node_) {
        this.node["disconnect"]();
        this.node["connect"](node_);
    };
    AnalyserEffect.prototype.remove = function() {
        this.node["disconnect"]();
    };
    AnalyserEffect.prototype.getInputNode = function() {
        return this.node;
    };
    AnalyserEffect.prototype.setParam = function(param, value, ramp, time) {};

    function ObjectTracker() {
        this.obj = null;
        this.loadUid = 0;
    };
    ObjectTracker.prototype.setObject = function(obj_) {
        this.obj = obj_;
    };
    ObjectTracker.prototype.hasObject = function() {
        return !!this.obj;
    };
    ObjectTracker.prototype.tick = function(dt) {};

    function C2AudioBuffer(src_, is_music) {
        this.src = src_;
        this.myapi = api;
        this.is_music = is_music;
        this.added_end_listener = false;
        var self = this;
        this.outNode = null;
        this.mediaSourceNode = null;
        this.panWhenReady = []; // for web audio API positioned sounds
        this.seekWhenReady = 0;
        this.pauseWhenReady = false;
        this.supportWebAudioAPI = false;
        this.failedToLoad = false;
        this.wasEverReady = false; // if a buffer is ever marked as ready, it's permanently considered ready after then.
        if (api === API_WEBAUDIO && is_music && !playMusicAsSoundWorkaround) {
            this.myapi = API_HTML5;
            this.outNode = createGain();
        }
        this.bufferObject = null; // actual audio object
        this.audioData = null; // web audio api: ajax request result (compressed audio that needs decoding)
        var request;
        switch (this.myapi) {
            case API_HTML5:
                this.bufferObject = new Audio();
                this.bufferObject.crossOrigin = "anonymous";
                this.bufferObject.addEventListener("canplaythrough", function() {
                    self.wasEverReady = true; // update loaded state so preload is considered complete
                });
                if (api === API_WEBAUDIO && context["createMediaElementSource"] && !/wiiu/i.test(navigator.userAgent)) {
                    this.supportWebAudioAPI = true; // can be routed through web audio api
                    this.bufferObject.addEventListener("canplay", function() {
                        if (!self.mediaSourceNode && self.bufferObject) {
                            self.mediaSourceNode = context["createMediaElementSource"](self.bufferObject);
                            self.mediaSourceNode["connect"](self.outNode);
                        }
                    });
                }
                this.bufferObject.autoplay = false; // this is only a source buffer, not an instance
                this.bufferObject.preload = "auto";
                this.bufferObject.src = src_;
                break;
            case API_WEBAUDIO:
                if (audRuntime.isWKWebView) {
                    audRuntime.fetchLocalFileViaCordovaAsArrayBuffer(src_, function(arrayBuffer) {
                        self.audioData = arrayBuffer;
                        self.decodeAudioBuffer();
                    }, function(err) {
                        self.failedToLoad = true;
                    });
                } else {
                    request = new XMLHttpRequest();
                    request.open("GET", src_, true);
                    request.responseType = "arraybuffer";
                    request.onload = function() {
                        self.audioData = request.response;
                        self.decodeAudioBuffer();
                    };
                    request.onerror = function() {
                        self.failedToLoad = true;
                    };
                    request.send();
                }
                break;
            case API_CORDOVA:
                this.bufferObject = true;
                break;
            case API_APPMOBI:
                this.bufferObject = true;
                break;
        }
    };
    C2AudioBuffer.prototype.release = function() {
        var i, len, j, a;
        for (i = 0, j = 0, len = audioInstances.length; i < len; ++i) {
            a = audioInstances[i];
            audioInstances[j] = a;
            if (a.buffer === this)
                a.stop();
            else
                ++j; // keep
        }
        audioInstances.length = j;
        if (this.mediaSourceNode) {
            this.mediaSourceNode["disconnect"]();
            this.mediaSourceNode = null;
        }
        if (this.outNode) {
            this.outNode["disconnect"]();
            this.outNode = null;
        }
        this.bufferObject = null;
        this.audioData = null;
    };
    C2AudioBuffer.prototype.decodeAudioBuffer = function() {
        if (this.bufferObject || !this.audioData)
            return; // audio already decoded or AJAX request not yet complete
        var self = this;
        if (context["decodeAudioData"]) {
            context["decodeAudioData"](this.audioData, function(buffer) {
                self.bufferObject = buffer;
                self.audioData = null; // clear AJAX response to allow GC and save memory, only need the bufferObject now
                var p, i, len, a;
                if (!cr.is_undefined(self.playTagWhenReady) && !silent) {
                    if (self.panWhenReady.length) {
                        for (i = 0, len = self.panWhenReady.length; i < len; i++) {
                            p = self.panWhenReady[i];
                            a = new C2AudioInstance(self, p.thistag);
                            a.setPannerEnabled(true);
                            if (typeof p.objUid !== "undefined") {
                                p.obj = audRuntime.getObjectByUID(p.objUid);
                                if (!p.obj)
                                    continue;
                            }
                            if (p.obj) {
                                var px = cr.rotatePtAround(p.obj.x, p.obj.y, -p.obj.layer.getAngle(), listenerX, listenerY, true);
                                var py = cr.rotatePtAround(p.obj.x, p.obj.y, -p.obj.layer.getAngle(), listenerX, listenerY, false);
                                a.setPan(px, py, cr.to_degrees(p.obj.angle - p.obj.layer.getAngle()), p.ia, p.oa, p.og);
                                a.setObject(p.obj);
                            } else {
                                a.setPan(p.x, p.y, p.a, p.ia, p.oa, p.og);
                            }
                            a.play(self.loopWhenReady, self.volumeWhenReady, self.seekWhenReady);
                            if (self.pauseWhenReady)
                                a.pause();
                            audioInstances.push(a);
                        }
                        cr.clearArray(self.panWhenReady);
                    } else {
                        a = new C2AudioInstance(self, self.playTagWhenReady || ""); // sometimes playTagWhenReady is not set - TODO: why?
                        a.play(self.loopWhenReady, self.volumeWhenReady, self.seekWhenReady);
                        if (self.pauseWhenReady)
                            a.pause();
                        audioInstances.push(a);
                    }
                } else if (!cr.is_undefined(self.convolveWhenReady)) {
                    var convolveNode = self.convolveWhenReady.convolveNode;
                    convolveNode["normalize"] = self.normalizeWhenReady;
                    convolveNode["buffer"] = buffer;
                }
            }, function(e) {
                self.failedToLoad = true;
            });
        } else {
            this.bufferObject = context["createBuffer"](this.audioData, false);
            this.audioData = null; // clear AJAX response to allow GC and save memory, only need the bufferObject now
            if (!cr.is_undefined(this.playTagWhenReady) && !silent) {
                var a = new C2AudioInstance(this, this.playTagWhenReady);
                a.play(this.loopWhenReady, this.volumeWhenReady, this.seekWhenReady);
                if (this.pauseWhenReady)
                    a.pause();
                audioInstances.push(a);
            } else if (!cr.is_undefined(this.convolveWhenReady)) {
                var convolveNode = this.convolveWhenReady.convolveNode;
                convolveNode["normalize"] = this.normalizeWhenReady;
                convolveNode["buffer"] = this.bufferObject;
            }
        }
    };
    C2AudioBuffer.prototype.isLoaded = function() {
        switch (this.myapi) {
            case API_HTML5:
                var ret = this.bufferObject["readyState"] >= 4; // HAVE_ENOUGH_DATA
                if (ret)
                    this.wasEverReady = true;
                return ret || this.wasEverReady;
            case API_WEBAUDIO:
                return !!this.audioData || !!this.bufferObject;
            case API_CORDOVA:
                return true;
            case API_APPMOBI:
                return true;
        }
        return false;
    };
    C2AudioBuffer.prototype.isLoadedAndDecoded = function() {
        switch (this.myapi) {
            case API_HTML5:
                return this.isLoaded(); // no distinction between loaded and decoded in HTML5 audio, just rely on ready state
            case API_WEBAUDIO:
                return !!this.bufferObject;
            case API_CORDOVA:
                return true;
            case API_APPMOBI:
                return true;
        }
        return false;
    };
    C2AudioBuffer.prototype.hasFailedToLoad = function() {
        switch (this.myapi) {
            case API_HTML5:
                return !!this.bufferObject["error"];
            case API_WEBAUDIO:
                return this.failedToLoad;
        }
        return false;
    };

    function C2AudioInstance(buffer_, tag_) {
        var self = this;
        this.tag = tag_;
        this.fresh = true;
        this.stopped = true;
        this.src = buffer_.src;
        this.buffer = buffer_;
        this.myapi = api;
        this.is_music = buffer_.is_music;
        this.playbackRate = 1;
        this.hasPlaybackEnded = true; // ended flag
        this.resume_me = false; // make sure resumes when leaving suspend
        this.is_paused = false;
        this.resume_position = 0; // for web audio api to resume from correct playback position
        this.looping = false;
        this.is_muted = false;
        this.is_silent = false;
        this.volume = 1;
        this.onended_handler = function(e) {
            if (self.is_paused || self.resume_me)
                return;
            var bufferThatEnded = this;
            if (!bufferThatEnded)
                bufferThatEnded = e.target;
            if (bufferThatEnded !== self.active_buffer)
                return;
            self.hasPlaybackEnded = true;
            self.stopped = true;
            audTag = self.tag;
            audRuntime.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded, audInst);
        };
        this.active_buffer = null;
        this.isTimescaled = ((timescale_mode === 1 && !this.is_music) || timescale_mode === 2);
        this.mutevol = 1;
        this.startTime = (this.isTimescaled ? audRuntime.kahanTime.sum : audRuntime.wallTime.sum);
        this.gainNode = null;
        this.pannerNode = null;
        this.pannerEnabled = false;
        this.objectTracker = null;
        this.panX = 0;
        this.panY = 0;
        this.panAngle = 0;
        this.panConeInner = 0;
        this.panConeOuter = 0;
        this.panConeOuterGain = 0;
        this.instanceObject = null;
        var add_end_listener = false;
        if (this.myapi === API_WEBAUDIO && this.buffer.myapi === API_HTML5 && !this.buffer.supportWebAudioAPI)
            this.myapi = API_HTML5;
        switch (this.myapi) {
            case API_HTML5:
                if (this.is_music) {
                    this.instanceObject = buffer_.bufferObject;
                    add_end_listener = !buffer_.added_end_listener;
                    buffer_.added_end_listener = true;
                } else {
                    this.instanceObject = new Audio();
                    this.instanceObject.crossOrigin = "anonymous";
                    this.instanceObject.autoplay = false;
                    this.instanceObject.src = buffer_.bufferObject.src;
                    add_end_listener = true;
                }
                if (add_end_listener) {
                    this.instanceObject.addEventListener('ended', function() {
                        audTag = self.tag;
                        self.stopped = true;
                        audRuntime.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded, audInst);
                    });
                }
                break;
            case API_WEBAUDIO:
                this.gainNode = createGain();
                this.gainNode["connect"](getDestinationForTag(tag_));
                if (this.buffer.myapi === API_WEBAUDIO) {
                    if (buffer_.bufferObject) {
                        this.instanceObject = context["createBufferSource"]();
                        this.instanceObject["buffer"] = buffer_.bufferObject;
                        this.instanceObject["connect"](this.gainNode);
                    }
                } else {
                    this.instanceObject = this.buffer.bufferObject; // reference the audio element
                    this.buffer.outNode["connect"](this.gainNode);
                    if (!this.buffer.added_end_listener) {
                        this.buffer.added_end_listener = true;
                        this.buffer.bufferObject.addEventListener('ended', function() {
                            audTag = self.tag;
                            self.stopped = true;
                            audRuntime.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded, audInst);
                        });
                    }
                }
                break;
            case API_CORDOVA:
                this.instanceObject = new window["Media"](appPath + this.src, null, null, function(status) {
                    if (status === window["Media"]["MEDIA_STOPPED"]) {
                        self.hasPlaybackEnded = true;
                        self.stopped = true;
                        audTag = self.tag;
                        audRuntime.trigger(cr.plugins_.Audio.prototype.cnds.OnEnded, audInst);
                    }
                });
                break;
            case API_APPMOBI:
                this.instanceObject = true;
                break;
        }
    };
    C2AudioInstance.prototype.hasEnded = function() {
        var time;
        switch (this.myapi) {
            case API_HTML5:
                return this.instanceObject.ended;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    if (!this.fresh && !this.stopped && this.instanceObject["loop"])
                        return false;
                    if (this.is_paused)
                        return false;
                    return this.hasPlaybackEnded;
                } else
                    return this.instanceObject.ended;
            case API_CORDOVA:
                return this.hasPlaybackEnded;
            case API_APPMOBI:
                true; // recycling an AppMobi sound does not matter because it will just do another throwaway playSound
        }
        return true;
    };
    C2AudioInstance.prototype.canBeRecycled = function() {
        if (this.fresh || this.stopped)
            return true; // not yet used or is not playing
        return this.hasEnded();
    };
    C2AudioInstance.prototype.setPannerEnabled = function(enable_) {
        if (api !== API_WEBAUDIO)
            return;
        if (!this.pannerEnabled && enable_) {
            if (!this.gainNode)
                return;
            if (!this.pannerNode) {
                this.pannerNode = context["createPanner"]();
                if (typeof this.pannerNode["panningModel"] === "number")
                    this.pannerNode["panningModel"] = panningModel;
                else
                    this.pannerNode["panningModel"] = ["equalpower", "HRTF", "soundfield"][panningModel];
                if (typeof this.pannerNode["distanceModel"] === "number")
                    this.pannerNode["distanceModel"] = distanceModel;
                else
                    this.pannerNode["distanceModel"] = ["linear", "inverse", "exponential"][distanceModel];
                this.pannerNode["refDistance"] = refDistance;
                this.pannerNode["maxDistance"] = maxDistance;
                this.pannerNode["rolloffFactor"] = rolloffFactor;
            }
            this.gainNode["disconnect"]();
            this.gainNode["connect"](this.pannerNode);
            this.pannerNode["connect"](getDestinationForTag(this.tag));
            this.pannerEnabled = true;
        } else if (this.pannerEnabled && !enable_) {
            if (!this.gainNode)
                return;
            this.pannerNode["disconnect"]();
            this.gainNode["disconnect"]();
            this.gainNode["connect"](getDestinationForTag(this.tag));
            this.pannerEnabled = false;
        }
    };
    C2AudioInstance.prototype.setPan = function(x, y, angle, innerangle, outerangle, outergain) {
        if (!this.pannerEnabled || api !== API_WEBAUDIO)
            return;
        this.pannerNode["setPosition"](x, y, 0);
        this.pannerNode["setOrientation"](Math.cos(cr.to_radians(angle)), Math.sin(cr.to_radians(angle)), 0);
        this.pannerNode["coneInnerAngle"] = innerangle;
        this.pannerNode["coneOuterAngle"] = outerangle;
        this.pannerNode["coneOuterGain"] = outergain;
        this.panX = x;
        this.panY = y;
        this.panAngle = angle;
        this.panConeInner = innerangle;
        this.panConeOuter = outerangle;
        this.panConeOuterGain = outergain;
    };
    C2AudioInstance.prototype.setObject = function(o) {
        if (!this.pannerEnabled || api !== API_WEBAUDIO)
            return;
        if (!this.objectTracker)
            this.objectTracker = new ObjectTracker();
        this.objectTracker.setObject(o);
    };
    C2AudioInstance.prototype.tick = function(dt) {
        if (!this.pannerEnabled || api !== API_WEBAUDIO || !this.objectTracker || !this.objectTracker.hasObject() || !this.isPlaying()) {
            return;
        }
        this.objectTracker.tick(dt);
        var inst = this.objectTracker.obj;
        var px = cr.rotatePtAround(inst.x, inst.y, -inst.layer.getAngle(), listenerX, listenerY, true);
        var py = cr.rotatePtAround(inst.x, inst.y, -inst.layer.getAngle(), listenerX, listenerY, false);
        this.pannerNode["setPosition"](px, py, 0);
        var a = 0;
        if (typeof this.objectTracker.obj.angle !== "undefined") {
            a = inst.angle - inst.layer.getAngle();
            this.pannerNode["setOrientation"](Math.cos(a), Math.sin(a), 0);
        }
    };
    C2AudioInstance.prototype.play = function(looping, vol, fromPosition, scheduledTime) {
        var instobj = this.instanceObject;
        this.looping = looping;
        this.volume = vol;
        var seekPos = fromPosition || 0;
        scheduledTime = scheduledTime || 0;
        switch (this.myapi) {
            case API_HTML5:
                if (instobj.playbackRate !== 1.0)
                    instobj.playbackRate = 1.0;
                if (instobj.volume !== vol * masterVolume)
                    instobj.volume = vol * masterVolume;
                if (instobj.loop !== looping)
                    instobj.loop = looping;
                if (instobj.muted)
                    instobj.muted = false;
                if (instobj.currentTime !== seekPos) {
                    try {
                        instobj.currentTime = seekPos;
                    } catch (err) {;
                    }
                }
                tryPlayAudioElement(this);
                break;
            case API_WEBAUDIO:
                this.muted = false;
                this.mutevol = 1;
                if (this.buffer.myapi === API_WEBAUDIO) {
                    this.gainNode["gain"]["value"] = vol * masterVolume;
                    if (!this.fresh) {
                        this.instanceObject = context["createBufferSource"]();
                        this.instanceObject["buffer"] = this.buffer.bufferObject;
                        this.instanceObject["connect"](this.gainNode);
                    }
                    this.instanceObject["onended"] = this.onended_handler;
                    this.active_buffer = this.instanceObject;
                    this.instanceObject.loop = looping;
                    this.hasPlaybackEnded = false;
                    if (seekPos === 0)
                        startSource(this.instanceObject, scheduledTime);
                    else
                        startSourceAt(this.instanceObject, seekPos, this.getDuration(), scheduledTime);
                } else {
                    if (instobj.playbackRate !== 1.0)
                        instobj.playbackRate = 1.0;
                    if (instobj.loop !== looping)
                        instobj.loop = looping;
                    instobj.volume = vol * masterVolume;
                    if (instobj.currentTime !== seekPos) {
                        try {
                            instobj.currentTime = seekPos;
                        } catch (err) {;
                        }
                    }
                    tryPlayAudioElement(this);
                }
                break;
            case API_CORDOVA:
                if ((!this.fresh && this.stopped) || seekPos !== 0)
                    instobj["seekTo"](seekPos);
                instobj["play"]();
                this.hasPlaybackEnded = false;
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    AppMobi["context"]["playSound"](this.src, looping);
                else
                    AppMobi["player"]["playSound"](this.src, looping);
                break;
        }
        this.playbackRate = 1;
        this.startTime = (this.isTimescaled ? audRuntime.kahanTime.sum : audRuntime.wallTime.sum) - seekPos;
        this.fresh = false;
        this.stopped = false;
        this.is_paused = false;
    };
    C2AudioInstance.prototype.stop = function() {
        switch (this.myapi) {
            case API_HTML5:
                if (!this.instanceObject.paused)
                    this.instanceObject.pause();
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO)
                    stopSource(this.instanceObject);
                else {
                    if (!this.instanceObject.paused)
                        this.instanceObject.pause();
                }
                break;
            case API_CORDOVA:
                this.instanceObject["stop"]();
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    AppMobi["context"]["stopSound"](this.src);
                break;
        }
        this.stopped = true;
        this.is_paused = false;
    };
    C2AudioInstance.prototype.pause = function() {
        if (this.fresh || this.stopped || this.hasEnded() || this.is_paused)
            return;
        switch (this.myapi) {
            case API_HTML5:
                if (!this.instanceObject.paused)
                    this.instanceObject.pause();
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    this.resume_position = this.getPlaybackTime(true);
                    if (this.looping)
                        this.resume_position = this.resume_position % this.getDuration();
                    this.is_paused = true;
                    stopSource(this.instanceObject);
                } else {
                    if (!this.instanceObject.paused)
                        this.instanceObject.pause();
                }
                break;
            case API_CORDOVA:
                this.instanceObject["pause"]();
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    AppMobi["context"]["stopSound"](this.src);
                break;
        }
        this.is_paused = true;
    };
    C2AudioInstance.prototype.resume = function() {
        if (this.fresh || this.stopped || this.hasEnded() || !this.is_paused)
            return;
        switch (this.myapi) {
            case API_HTML5:
                tryPlayAudioElement(this);
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    this.instanceObject = context["createBufferSource"]();
                    this.instanceObject["buffer"] = this.buffer.bufferObject;
                    this.instanceObject["connect"](this.gainNode);
                    this.instanceObject["onended"] = this.onended_handler;
                    this.active_buffer = this.instanceObject;
                    this.instanceObject.loop = this.looping;
                    this.gainNode["gain"]["value"] = masterVolume * this.volume * this.mutevol;
                    this.updatePlaybackRate();
                    this.startTime = (this.isTimescaled ? audRuntime.kahanTime.sum : audRuntime.wallTime.sum) - (this.resume_position / (this.playbackRate || 0.001));
                    startSourceAt(this.instanceObject, this.resume_position, this.getDuration());
                } else {
                    tryPlayAudioElement(this);
                }
                break;
            case API_CORDOVA:
                this.instanceObject["play"]();
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    AppMobi["context"]["resumeSound"](this.src);
                break;
        }
        this.is_paused = false;
    };
    C2AudioInstance.prototype.seek = function(pos) {
        if (this.fresh || this.stopped || this.hasEnded())
            return;
        switch (this.myapi) {
            case API_HTML5:
                try {
                    this.instanceObject.currentTime = pos;
                } catch (e) {}
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    if (this.is_paused)
                        this.resume_position = pos;
                    else {
                        this.pause();
                        this.resume_position = pos;
                        this.resume();
                    }
                } else {
                    try {
                        this.instanceObject.currentTime = pos;
                    } catch (e) {}
                }
                break;
            case API_CORDOVA:
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    AppMobi["context"]["seekSound"](this.src, pos);
                break;
        }
    };
    C2AudioInstance.prototype.reconnect = function(toNode) {
        if (this.myapi !== API_WEBAUDIO)
            return;
        if (this.pannerEnabled) {
            this.pannerNode["disconnect"]();
            this.pannerNode["connect"](toNode);
        } else {
            this.gainNode["disconnect"]();
            this.gainNode["connect"](toNode);
        }
    };
    C2AudioInstance.prototype.getDuration = function(applyPlaybackRate) {
        var ret = 0;
        switch (this.myapi) {
            case API_HTML5:
                if (typeof this.instanceObject.duration !== "undefined")
                    ret = this.instanceObject.duration;
                break;
            case API_WEBAUDIO:
                ret = this.buffer.bufferObject["duration"];
                break;
            case API_CORDOVA:
                ret = this.instanceObject["getDuration"]();
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    ret = AppMobi["context"]["getDurationSound"](this.src);
                break;
        }
        if (applyPlaybackRate)
            ret /= (this.playbackRate || 0.001); // avoid divide-by-zero
        return ret;
    };
    C2AudioInstance.prototype.getPlaybackTime = function(applyPlaybackRate) {
        var duration = this.getDuration();
        var ret = 0;
        switch (this.myapi) {
            case API_HTML5:
                if (typeof this.instanceObject.currentTime !== "undefined")
                    ret = this.instanceObject.currentTime;
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    if (this.is_paused)
                        return this.resume_position;
                    else
                        ret = (this.isTimescaled ? audRuntime.kahanTime.sum : audRuntime.wallTime.sum) - this.startTime;
                } else if (typeof this.instanceObject.currentTime !== "undefined")
                    ret = this.instanceObject.currentTime;
                break;
            case API_CORDOVA:
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    ret = AppMobi["context"]["getPlaybackTimeSound"](this.src);
                break;
        }
        if (applyPlaybackRate)
            ret *= this.playbackRate;
        if (!this.looping && ret > duration)
            ret = duration;
        return ret;
    };
    C2AudioInstance.prototype.isPlaying = function() {
        return !this.is_paused && !this.fresh && !this.stopped && !this.hasEnded();
    };
    C2AudioInstance.prototype.shouldSave = function() {
        return !this.fresh && !this.stopped && !this.hasEnded();
    };
    C2AudioInstance.prototype.setVolume = function(v) {
        this.volume = v;
        this.updateVolume();
    };
    C2AudioInstance.prototype.updateVolume = function() {
        var volToSet = this.volume * masterVolume;
        if (!isFinite(volToSet))
            volToSet = 0; // HTMLMediaElement throws if setting non-finite volume
        switch (this.myapi) {
            case API_HTML5:
                if (typeof this.instanceObject.volume !== "undefined" && this.instanceObject.volume !== volToSet)
                    this.instanceObject.volume = volToSet;
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    this.gainNode["gain"]["value"] = volToSet * this.mutevol;
                } else {
                    if (typeof this.instanceObject.volume !== "undefined" && this.instanceObject.volume !== volToSet)
                        this.instanceObject.volume = volToSet;
                }
                break;
            case API_CORDOVA:
                break;
            case API_APPMOBI:
                break;
        }
    };
    C2AudioInstance.prototype.getVolume = function() {
        return this.volume;
    };
    C2AudioInstance.prototype.doSetMuted = function(m) {
        switch (this.myapi) {
            case API_HTML5:
                if (this.instanceObject.muted !== !!m)
                    this.instanceObject.muted = !!m;
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    this.mutevol = (m ? 0 : 1);
                    this.gainNode["gain"]["value"] = masterVolume * this.volume * this.mutevol;
                } else {
                    if (this.instanceObject.muted !== !!m)
                        this.instanceObject.muted = !!m;
                }
                break;
            case API_CORDOVA:
                break;
            case API_APPMOBI:
                break;
        }
    };
    C2AudioInstance.prototype.setMuted = function(m) {
        this.is_muted = !!m;
        this.doSetMuted(this.is_muted || this.is_silent);
    };
    C2AudioInstance.prototype.setSilent = function(m) {
        this.is_silent = !!m;
        this.doSetMuted(this.is_muted || this.is_silent);
    };
    C2AudioInstance.prototype.setLooping = function(l) {
        this.looping = l;
        switch (this.myapi) {
            case API_HTML5:
                if (this.instanceObject.loop !== !!l)
                    this.instanceObject.loop = !!l;
                break;
            case API_WEBAUDIO:
                if (this.instanceObject.loop !== !!l)
                    this.instanceObject.loop = !!l;
                break;
            case API_CORDOVA:
                break;
            case API_APPMOBI:
                if (audRuntime.isDirectCanvas)
                    AppMobi["context"]["setLoopingSound"](this.src, l);
                break;
        }
    };
    C2AudioInstance.prototype.setPlaybackRate = function(r) {
        this.playbackRate = r;
        this.updatePlaybackRate();
    };
    C2AudioInstance.prototype.updatePlaybackRate = function() {
        var r = this.playbackRate;
        if (this.isTimescaled)
            r *= audRuntime.timescale;
        switch (this.myapi) {
            case API_HTML5:
                if (this.instanceObject.playbackRate !== r)
                    this.instanceObject.playbackRate = r;
                break;
            case API_WEBAUDIO:
                if (this.buffer.myapi === API_WEBAUDIO) {
                    if (this.instanceObject["playbackRate"]["value"] !== r)
                        this.instanceObject["playbackRate"]["value"] = r;
                } else {
                    if (this.instanceObject.playbackRate !== r)
                        this.instanceObject.playbackRate = r;
                }
                break;
            case API_CORDOVA:
                break;
            case API_APPMOBI:
                break;
        }
    };
    C2AudioInstance.prototype.setSuspended = function(s) {
        switch (this.myapi) {
            case API_HTML5:
                if (s) {
                    if (this.isPlaying()) {
                        this.resume_me = true;
                        this.instanceObject["pause"]();
                    } else
                        this.resume_me = false;
                } else {
                    if (this.resume_me) {
                        this.instanceObject["play"]();
                        this.resume_me = false;
                    }
                }
                break;
            case API_WEBAUDIO:
                if (s) {
                    if (this.isPlaying()) {
                        this.resume_me = true;
                        if (this.buffer.myapi === API_WEBAUDIO) {
                            this.resume_position = this.getPlaybackTime(true);
                            if (this.looping)
                                this.resume_position = this.resume_position % this.getDuration();
                            stopSource(this.instanceObject);
                        } else
                            this.instanceObject["pause"]();
                    } else
                        this.resume_me = false;
                } else {
                    if (this.resume_me) {
                        if (this.buffer.myapi === API_WEBAUDIO) {
                            this.instanceObject = context["createBufferSource"]();
                            this.instanceObject["buffer"] = this.buffer.bufferObject;
                            this.instanceObject["connect"](this.gainNode);
                            this.instanceObject["onended"] = this.onended_handler;
                            this.active_buffer = this.instanceObject;
                            this.instanceObject.loop = this.looping;
                            this.gainNode["gain"]["value"] = masterVolume * this.volume * this.mutevol;
                            this.updatePlaybackRate();
                            this.startTime = (this.isTimescaled ? audRuntime.kahanTime.sum : audRuntime.wallTime.sum) - (this.resume_position / (this.playbackRate || 0.001));
                            startSourceAt(this.instanceObject, this.resume_position, this.getDuration());
                        } else {
                            this.instanceObject["play"]();
                        }
                        this.resume_me = false;
                    }
                }
                break;
            case API_CORDOVA:
                if (s) {
                    if (this.isPlaying()) {
                        this.instanceObject["pause"]();
                        this.resume_me = true;
                    } else
                        this.resume_me = false;
                } else {
                    if (this.resume_me) {
                        this.resume_me = false;
                        this.instanceObject["play"]();
                    }
                }
                break;
            case API_APPMOBI:
                break;
        }
    };
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
        audRuntime = this.runtime;
        audInst = this;
        this.listenerTracker = null;
        this.listenerZ = -600;
        if (this.runtime.isWKWebView)
            playMusicAsSoundWorkaround = true;
        if ((this.runtime.isiOS || (this.runtime.isAndroid && (this.runtime.isChrome || this.runtime.isAndroidStockBrowser))) && !this.runtime.isCrosswalk && !this.runtime.isDomFree && !this.runtime.isAmazonWebApp && !playMusicAsSoundWorkaround) {
            useNextTouchWorkaround = true;
        }
        context = null;
        if (typeof AudioContext !== "undefined") {
            api = API_WEBAUDIO;
            context = new AudioContext();
        } else if (typeof webkitAudioContext !== "undefined") {
            api = API_WEBAUDIO;
            context = new webkitAudioContext();
        }
        if (this.runtime.isiOS && context) {
            if (context.close)
                context.close();
            if (typeof AudioContext !== "undefined")
                context = new AudioContext();
            else if (typeof webkitAudioContext !== "undefined")
                context = new webkitAudioContext();
        }
        if (api !== API_WEBAUDIO) {
            if (this.runtime.isCordova && typeof window["Media"] !== "undefined")
                api = API_CORDOVA;
            else if (this.runtime.isAppMobi)
                api = API_APPMOBI;
        }
        if (api === API_CORDOVA) {
            appPath = location.href;
            var i = appPath.lastIndexOf("/");
            if (i > -1)
                appPath = appPath.substr(0, i + 1);
            appPath = appPath.replace("file://", "");
        }
        if (this.runtime.isSafari && this.runtime.isWindows && typeof Audio === "undefined") {
            alert("It looks like you're using Safari for Windows without Quicktime.  Audio cannot be played until Quicktime is installed.");
            this.runtime.DestroyInstance(this);
        } else {
            if (this.runtime.isDirectCanvas)
                useOgg = this.runtime.isAndroid; // AAC on iOS, OGG on Android
            else {
                try {
                    useOgg = !!(new Audio().canPlayType('audio/ogg; codecs="vorbis"')) &&
                        !this.runtime.isWindows10;
                } catch (e) {
                    useOgg = false;
                }
            }
            switch (api) {
                case API_HTML5:
                    ;
                    break;
                case API_WEBAUDIO:
                    ;
                    break;
                case API_CORDOVA:
                    ;
                    break;
                case API_APPMOBI:
                    ;
                    break;
                default:
                    ;
            }
            this.runtime.tickMe(this);
        }
    };
    var instanceProto = pluginProto.Instance.prototype;
    instanceProto.onCreate = function() {
        this.runtime.audioInstance = this;
        timescale_mode = this.properties[0]; // 0 = off, 1 = sounds only, 2 = all
        this.saveload = this.properties[1]; // 0 = all, 1 = sounds only, 2 = music only, 3 = none
        this.playinbackground = (this.properties[2] !== 0);
        this.nextPlayTime = 0;
        panningModel = this.properties[3]; // 0 = equalpower, 1 = hrtf, 3 = soundfield
        distanceModel = this.properties[4]; // 0 = linear, 1 = inverse, 2 = exponential
        this.listenerZ = -this.properties[5];
        refDistance = this.properties[6];
        maxDistance = this.properties[7];
        rolloffFactor = this.properties[8];
        this.listenerTracker = new ObjectTracker();
        var draw_width = (this.runtime.draw_width || this.runtime.width);
        var draw_height = (this.runtime.draw_height || this.runtime.height);
        if (api === API_WEBAUDIO) {
            context["listener"]["setPosition"](draw_width / 2, draw_height / 2, this.listenerZ);
            context["listener"]["setOrientation"](0, 0, 1, 0, -1, 0);
            window["c2OnAudioMicStream"] = function(localMediaStream, tag) {
                if (micSource)
                    micSource["disconnect"]();
                micTag = tag.toLowerCase();
                micSource = context["createMediaStreamSource"](localMediaStream);
                micSource["connect"](getDestinationForTag(micTag));
            };
        }
        this.runtime.addSuspendCallback(function(s) {
            audInst.onSuspend(s);
        });
        var self = this;
        this.runtime.addDestroyCallback(function(inst) {
            self.onInstanceDestroyed(inst);
        });
    };
    instanceProto.onInstanceDestroyed = function(inst) {
        var i, len, a;
        for (i = 0, len = audioInstances.length; i < len; i++) {
            a = audioInstances[i];
            if (a.objectTracker) {
                if (a.objectTracker.obj === inst) {
                    a.objectTracker.obj = null;
                    if (a.pannerEnabled && a.isPlaying() && a.looping)
                        a.stop();
                }
            }
        }
        if (this.listenerTracker.obj === inst)
            this.listenerTracker.obj = null;
    };
    instanceProto.saveToJSON = function() {
        var o = {
            "silent": silent,
            "masterVolume": masterVolume,
            "listenerZ": this.listenerZ,
            "listenerUid": this.listenerTracker.hasObject() ? this.listenerTracker.obj.uid : -1,
            "playing": [],
            "effects": {}
        };
        var playingarr = o["playing"];
        var i, len, a, d, p, panobj, playbackTime;
        for (i = 0, len = audioInstances.length; i < len; i++) {
            a = audioInstances[i];
            if (!a.shouldSave())
                continue; // no need to save stopped sounds
            if (this.saveload === 3) // not saving/loading any sounds/music
                continue;
            if (a.is_music && this.saveload === 1) // not saving/loading music
                continue;
            if (!a.is_music && this.saveload === 2) // not saving/loading sound
                continue;
            playbackTime = a.getPlaybackTime();
            if (a.looping)
                playbackTime = playbackTime % a.getDuration();
            d = {
                "tag": a.tag,
                "buffersrc": a.buffer.src,
                "is_music": a.is_music,
                "playbackTime": playbackTime,
                "volume": a.volume,
                "looping": a.looping,
                "muted": a.is_muted,
                "playbackRate": a.playbackRate,
                "paused": a.is_paused,
                "resume_position": a.resume_position
            };
            if (a.pannerEnabled) {
                d["pan"] = {};
                panobj = d["pan"];
                if (a.objectTracker && a.objectTracker.hasObject()) {
                    panobj["objUid"] = a.objectTracker.obj.uid;
                } else {
                    panobj["x"] = a.panX;
                    panobj["y"] = a.panY;
                    panobj["a"] = a.panAngle;
                }
                panobj["ia"] = a.panConeInner;
                panobj["oa"] = a.panConeOuter;
                panobj["og"] = a.panConeOuterGain;
            }
            playingarr.push(d);
        }
        var fxobj = o["effects"];
        var fxarr;
        for (p in effects) {
            if (effects.hasOwnProperty(p)) {
                fxarr = [];
                for (i = 0, len = effects[p].length; i < len; i++) {
                    fxarr.push({
                        "type": effects[p][i].type,
                        "params": effects[p][i].params
                    });
                }
                fxobj[p] = fxarr;
            }
        }
        return o;
    };
    var objectTrackerUidsToLoad = [];
    instanceProto.loadFromJSON = function(o) {
        var setSilent = o["silent"];
        masterVolume = o["masterVolume"];
        this.listenerZ = o["listenerZ"];
        this.listenerTracker.setObject(null);
        var listenerUid = o["listenerUid"];
        if (listenerUid !== -1) {
            this.listenerTracker.loadUid = listenerUid;
            objectTrackerUidsToLoad.push(this.listenerTracker);
        }
        var playingarr = o["playing"];
        var i, len, d, src, is_music, tag, playbackTime, looping, vol, b, a, p, pan, panObjUid;
        if (this.saveload !== 3) {
            for (i = 0, len = audioInstances.length; i < len; i++) {
                a = audioInstances[i];
                if (a.is_music && this.saveload === 1)
                    continue; // only saving/loading sound: leave music playing
                if (!a.is_music && this.saveload === 2)
                    continue; // only saving/loading music: leave sound playing
                a.stop();
            }
        }
        var fxarr, fxtype, fxparams, fx;
        for (p in effects) {
            if (effects.hasOwnProperty(p)) {
                for (i = 0, len = effects[p].length; i < len; i++)
                    effects[p][i].remove();
            }
        }
        cr.wipe(effects);
        for (p in o["effects"]) {
            if (o["effects"].hasOwnProperty(p)) {
                fxarr = o["effects"][p];
                for (i = 0, len = fxarr.length; i < len; i++) {
                    fxtype = fxarr[i]["type"];
                    fxparams = fxarr[i]["params"];
                    switch (fxtype) {
                        case "filter":
                            addEffectForTag(p, new FilterEffect(fxparams[0], fxparams[1], fxparams[2], fxparams[3], fxparams[4], fxparams[5]));
                            break;
                        case "delay":
                            addEffectForTag(p, new DelayEffect(fxparams[0], fxparams[1], fxparams[2]));
                            break;
                        case "convolve":
                            src = fxparams[2];
                            b = this.getAudioBuffer(src, false);
                            if (b.bufferObject) {
                                fx = new ConvolveEffect(b.bufferObject, fxparams[0], fxparams[1], src);
                            } else {
                                fx = new ConvolveEffect(null, fxparams[0], fxparams[1], src);
                                b.normalizeWhenReady = fxparams[0];
                                b.convolveWhenReady = fx;
                            }
                            addEffectForTag(p, fx);
                            break;
                        case "flanger":
                            addEffectForTag(p, new FlangerEffect(fxparams[0], fxparams[1], fxparams[2], fxparams[3], fxparams[4]));
                            break;
                        case "phaser":
                            addEffectForTag(p, new PhaserEffect(fxparams[0], fxparams[1], fxparams[2], fxparams[3], fxparams[4], fxparams[5]));
                            break;
                        case "gain":
                            addEffectForTag(p, new GainEffect(fxparams[0]));
                            break;
                        case "tremolo":
                            addEffectForTag(p, new TremoloEffect(fxparams[0], fxparams[1]));
                            break;
                        case "ringmod":
                            addEffectForTag(p, new RingModulatorEffect(fxparams[0], fxparams[1]));
                            break;
                        case "distortion":
                            addEffectForTag(p, new DistortionEffect(fxparams[0], fxparams[1], fxparams[2], fxparams[3], fxparams[4]));
                            break;
                        case "compressor":
                            addEffectForTag(p, new CompressorEffect(fxparams[0], fxparams[1], fxparams[2], fxparams[3], fxparams[4]));
                            break;
                        case "analyser":
                            addEffectForTag(p, new AnalyserEffect(fxparams[0], fxparams[1]));
                            break;
                    }
                }
            }
        }
        for (i = 0, len = playingarr.length; i < len; i++) {
            if (this.saveload === 3) // not saving/loading any sounds/music
                continue;
            d = playingarr[i];
            src = d["buffersrc"];
            is_music = d["is_music"];
            tag = d["tag"];
            playbackTime = d["playbackTime"];
            looping = d["looping"];
            vol = d["volume"];
            pan = d["pan"];
            panObjUid = (pan && pan.hasOwnProperty("objUid")) ? pan["objUid"] : -1;
            if (is_music && this.saveload === 1) // not saving/loading music
                continue;
            if (!is_music && this.saveload === 2) // not saving/loading sound
                continue;
            a = this.getAudioInstance(src, tag, is_music, looping, vol);
            if (!a) {
                b = this.getAudioBuffer(src, is_music);
                b.seekWhenReady = playbackTime;
                b.pauseWhenReady = d["paused"];
                if (pan) {
                    if (panObjUid !== -1) {
                        b.panWhenReady.push({
                            objUid: panObjUid,
                            ia: pan["ia"],
                            oa: pan["oa"],
                            og: pan["og"],
                            thistag: tag
                        });
                    } else {
                        b.panWhenReady.push({
                            x: pan["x"],
                            y: pan["y"],
                            a: pan["a"],
                            ia: pan["ia"],
                            oa: pan["oa"],
                            og: pan["og"],
                            thistag: tag
                        });
                    }
                }
                continue;
            }
            a.resume_position = d["resume_position"];
            a.setPannerEnabled(!!pan);
            a.play(looping, vol, playbackTime);
            a.updatePlaybackRate();
            a.updateVolume();
            a.doSetMuted(a.is_muted || a.is_silent);
            if (d["paused"])
                a.pause();
            if (d["muted"])
                a.setMuted(true);
            a.doSetMuted(a.is_muted || a.is_silent);
            if (pan) {
                if (panObjUid !== -1) {
                    a.objectTracker = a.objectTracker || new ObjectTracker();
                    a.objectTracker.loadUid = panObjUid;
                    objectTrackerUidsToLoad.push(a.objectTracker);
                } else {
                    a.setPan(pan["x"], pan["y"], pan["a"], pan["ia"], pan["oa"], pan["og"]);
                }
            }
        }
        if (setSilent && !silent) // setting silent
        {
            for (i = 0, len = audioInstances.length; i < len; i++)
                audioInstances[i].setSilent(true);
            silent = true;
        } else if (!setSilent && silent) // setting not silent
        {
            for (i = 0, len = audioInstances.length; i < len; i++)
                audioInstances[i].setSilent(false);
            silent = false;
        }
    };
    instanceProto.afterLoad = function() {
        var i, len, ot, inst;
        for (i = 0, len = objectTrackerUidsToLoad.length; i < len; i++) {
            ot = objectTrackerUidsToLoad[i];
            inst = this.runtime.getObjectByUID(ot.loadUid);
            ot.setObject(inst);
            ot.loadUid = -1;
            if (inst) {
                listenerX = inst.x;
                listenerY = inst.y;
            }
        }
        cr.clearArray(objectTrackerUidsToLoad);
    };
    instanceProto.onSuspend = function(s) {
        if (this.playinbackground)
            return;
        if (!s && context && context["resume"]) {
            context["resume"]();
            isContextSuspended = false;
        }
        var i, len;
        for (i = 0, len = audioInstances.length; i < len; i++)
            audioInstances[i].setSuspended(s);
        if (s && context && context["suspend"]) {
            context["suspend"]();
            isContextSuspended = true;
        }
    };
    instanceProto.tick = function() {
        var dt = this.runtime.dt;
        var i, len, a;
        for (i = 0, len = audioInstances.length; i < len; i++) {
            a = audioInstances[i];
            a.tick(dt);
            if (timescale_mode !== 0)
                a.updatePlaybackRate();
        }
        var p, arr, f;
        for (p in effects) {
            if (effects.hasOwnProperty(p)) {
                arr = effects[p];
                for (i = 0, len = arr.length; i < len; i++) {
                    f = arr[i];
                    if (f.tick)
                        f.tick();
                }
            }
        }
        if (api === API_WEBAUDIO && this.listenerTracker.hasObject()) {
            this.listenerTracker.tick(dt);
            listenerX = this.listenerTracker.obj.x;
            listenerY = this.listenerTracker.obj.y;
            context["listener"]["setPosition"](this.listenerTracker.obj.x, this.listenerTracker.obj.y, this.listenerZ);
        }
    };
    var preload_list = [];
    instanceProto.setPreloadList = function(arr) {
        var i, len, p, filename, size, isOgg;
        var total_size = 0;
        for (i = 0, len = arr.length; i < len; ++i) {
            p = arr[i];
            filename = p[0];
            size = p[1] * 2;
            isOgg = (filename.length > 4 && filename.substr(filename.length - 4) === ".ogg");
            if ((isOgg && useOgg) || (!isOgg && !useOgg)) {
                preload_list.push({
                    filename: filename,
                    size: size,
                    obj: null
                });
                total_size += size;
            }
        }
        return total_size;
    };
    instanceProto.startPreloads = function() {
        var i, len, p, src;
        for (i = 0, len = preload_list.length; i < len; ++i) {
            p = preload_list[i];
            src = this.runtime.files_subfolder + p.filename;
            p.obj = this.getAudioBuffer(src, false);
        }
    };
    instanceProto.getPreloadedSize = function() {
        var completed = 0;
        var i, len, p;
        for (i = 0, len = preload_list.length; i < len; ++i) {
            p = preload_list[i];
            if (p.obj.isLoadedAndDecoded() || p.obj.hasFailedToLoad() || this.runtime.isDomFree || this.runtime.isAndroidStockBrowser) {
                completed += p.size;
            } else if (p.obj.isLoaded()) // downloaded but not decoded: only happens in Web Audio API, count as half-way progress
            {
                completed += Math.floor(p.size / 2);
            }
        };
        return completed;
    };
    instanceProto.releaseAllMusicBuffers = function() {
        var i, len, j, b;
        for (i = 0, j = 0, len = audioBuffers.length; i < len; ++i) {
            b = audioBuffers[i];
            audioBuffers[j] = b;
            if (b.is_music)
                b.release();
            else
                ++j; // keep
        }
        audioBuffers.length = j;
    };
    instanceProto.getAudioBuffer = function(src_, is_music, dont_create) {
        var i, len, a, ret = null,
            j, k, lenj, ai;
        for (i = 0, len = audioBuffers.length; i < len; i++) {
            a = audioBuffers[i];
            if (a.src === src_) {
                ret = a;
                break;
            }
        }
        if (!ret && !dont_create) {
            if (playMusicAsSoundWorkaround && is_music)
                this.releaseAllMusicBuffers();
            ret = new C2AudioBuffer(src_, is_music);
            audioBuffers.push(ret);
        }
        return ret;
    };
    instanceProto.getAudioInstance = function(src_, tag, is_music, looping, vol) {
        var i, len, a;
        for (i = 0, len = audioInstances.length; i < len; i++) {
            a = audioInstances[i];
            if (a.src === src_ && (a.canBeRecycled() || is_music)) {
                a.tag = tag;
                return a;
            }
        }
        var b = this.getAudioBuffer(src_, is_music);
        if (!b.bufferObject) {
            if (tag !== "<preload>") {
                b.playTagWhenReady = tag;
                b.loopWhenReady = looping;
                b.volumeWhenReady = vol;
            }
            return null;
        }
        a = new C2AudioInstance(b, tag);
        audioInstances.push(a);
        return a;
    };
    var taggedAudio = [];

    function SortByIsPlaying(a, b) {
        var an = a.isPlaying() ? 1 : 0;
        var bn = b.isPlaying() ? 1 : 0;
        if (an === bn)
            return 0;
        else if (an < bn)
            return 1;
        else
            return -1;
    };

    function getAudioByTag(tag, sort_by_playing) {
        cr.clearArray(taggedAudio);
        if (!tag.length) {
            if (!lastAudio || lastAudio.hasEnded())
                return;
            else {
                cr.clearArray(taggedAudio);
                taggedAudio[0] = lastAudio;
                return;
            }
        }
        var i, len, a;
        for (i = 0, len = audioInstances.length; i < len; i++) {
            a = audioInstances[i];
            if (cr.equals_nocase(tag, a.tag))
                taggedAudio.push(a);
        }
        if (sort_by_playing)
            taggedAudio.sort(SortByIsPlaying);
    };

    function reconnectEffects(tag) {
        var i, len, arr, n, toNode = context["destination"];
        if (effects.hasOwnProperty(tag)) {
            arr = effects[tag];
            if (arr.length) {
                toNode = arr[0].getInputNode();
                for (i = 0, len = arr.length; i < len; i++) {
                    n = arr[i];
                    if (i + 1 === len)
                        n.connectTo(context["destination"]);
                    else
                        n.connectTo(arr[i + 1].getInputNode());
                }
            }
        }
        getAudioByTag(tag);
        for (i = 0, len = taggedAudio.length; i < len; i++)
            taggedAudio[i].reconnect(toNode);
        if (micSource && micTag === tag) {
            micSource["disconnect"]();
            micSource["connect"](toNode);
        }
    };

    function addEffectForTag(tag, fx) {
        if (!effects.hasOwnProperty(tag))
            effects[tag] = [fx];
        else
            effects[tag].push(fx);
        reconnectEffects(tag);
    };

    function Cnds() {};
    Cnds.prototype.OnEnded = function(t) {
        return cr.equals_nocase(audTag, t);
    };
    Cnds.prototype.PreloadsComplete = function() {
        var i, len;
        for (i = 0, len = audioBuffers.length; i < len; i++) {
            if (!audioBuffers[i].isLoadedAndDecoded() && !audioBuffers[i].hasFailedToLoad())
                return false;
        }
        return true;
    };
    Cnds.prototype.AdvancedAudioSupported = function() {
        return api === API_WEBAUDIO;
    };
    Cnds.prototype.IsSilent = function() {
        return silent;
    };
    Cnds.prototype.IsAnyPlaying = function() {
        var i, len;
        for (i = 0, len = audioInstances.length; i < len; i++) {
            if (audioInstances[i].isPlaying())
                return true;
        }
        return false;
    };
    Cnds.prototype.IsTagPlaying = function(tag) {
        getAudioByTag(tag);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++) {
            if (taggedAudio[i].isPlaying())
                return true;
        }
        return false;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.Play = function(file, looping, vol, tag) {
        if (silent)
            return;
        var v = dbToLinear(vol);
        var is_music = file[1];
        var src = this.runtime.files_subfolder + file[0] + (useOgg ? ".ogg" : ".m4a");
        lastAudio = this.getAudioInstance(src, tag, is_music, looping !== 0, v);
        if (!lastAudio)
            return;
        lastAudio.setPannerEnabled(false);
        lastAudio.play(looping !== 0, v, 0, this.nextPlayTime);
        this.nextPlayTime = 0;
    };
    Acts.prototype.PlayAtPosition = function(file, looping, vol, x_, y_, angle_, innerangle_, outerangle_, outergain_, tag) {
        if (silent)
            return;
        var v = dbToLinear(vol);
        var is_music = file[1];
        var src = this.runtime.files_subfolder + file[0] + (useOgg ? ".ogg" : ".m4a");
        lastAudio = this.getAudioInstance(src, tag, is_music, looping !== 0, v);
        if (!lastAudio) {
            var b = this.getAudioBuffer(src, is_music);
            b.panWhenReady.push({
                x: x_,
                y: y_,
                a: angle_,
                ia: innerangle_,
                oa: outerangle_,
                og: dbToLinear(outergain_),
                thistag: tag
            });
            return;
        }
        lastAudio.setPannerEnabled(true);
        lastAudio.setPan(x_, y_, angle_, innerangle_, outerangle_, dbToLinear(outergain_));
        lastAudio.play(looping !== 0, v, 0, this.nextPlayTime);
        this.nextPlayTime = 0;
    };
    Acts.prototype.PlayAtObject = function(file, looping, vol, obj, innerangle, outerangle, outergain, tag) {
        if (silent || !obj)
            return;
        var inst = obj.getFirstPicked();
        if (!inst)
            return;
        var v = dbToLinear(vol);
        var is_music = file[1];
        var src = this.runtime.files_subfolder + file[0] + (useOgg ? ".ogg" : ".m4a");
        lastAudio = this.getAudioInstance(src, tag, is_music, looping !== 0, v);
        if (!lastAudio) {
            var b = this.getAudioBuffer(src, is_music);
            b.panWhenReady.push({
                obj: inst,
                ia: innerangle,
                oa: outerangle,
                og: dbToLinear(outergain),
                thistag: tag
            });
            return;
        }
        lastAudio.setPannerEnabled(true);
        var px = cr.rotatePtAround(inst.x, inst.y, -inst.layer.getAngle(), listenerX, listenerY, true);
        var py = cr.rotatePtAround(inst.x, inst.y, -inst.layer.getAngle(), listenerX, listenerY, false);
        lastAudio.setPan(px, py, cr.to_degrees(inst.angle - inst.layer.getAngle()), innerangle, outerangle, dbToLinear(outergain));
        lastAudio.setObject(inst);
        lastAudio.play(looping !== 0, v, 0, this.nextPlayTime);
        this.nextPlayTime = 0;
    };
    Acts.prototype.PlayByName = function(folder, filename, looping, vol, tag) {
        if (silent)
            return;
        var v = dbToLinear(vol);
        var is_music = (folder === 1);
        var src = this.runtime.files_subfolder + filename.toLowerCase() + (useOgg ? ".ogg" : ".m4a");
        lastAudio = this.getAudioInstance(src, tag, is_music, looping !== 0, v);
        if (!lastAudio)
            return;
        lastAudio.setPannerEnabled(false);
        lastAudio.play(looping !== 0, v, 0, this.nextPlayTime);
        this.nextPlayTime = 0;
    };
    Acts.prototype.PlayAtPositionByName = function(folder, filename, looping, vol, x_, y_, angle_, innerangle_, outerangle_, outergain_, tag) {
        if (silent)
            return;
        var v = dbToLinear(vol);
        var is_music = (folder === 1);
        var src = this.runtime.files_subfolder + filename.toLowerCase() + (useOgg ? ".ogg" : ".m4a");
        lastAudio = this.getAudioInstance(src, tag, is_music, looping !== 0, v);
        if (!lastAudio) {
            var b = this.getAudioBuffer(src, is_music);
            b.panWhenReady.push({
                x: x_,
                y: y_,
                a: angle_,
                ia: innerangle_,
                oa: outerangle_,
                og: dbToLinear(outergain_),
                thistag: tag
            });
            return;
        }
        lastAudio.setPannerEnabled(true);
        lastAudio.setPan(x_, y_, angle_, innerangle_, outerangle_, dbToLinear(outergain_));
        lastAudio.play(looping !== 0, v, 0, this.nextPlayTime);
        this.nextPlayTime = 0;
    };
    Acts.prototype.PlayAtObjectByName = function(folder, filename, looping, vol, obj, innerangle, outerangle, outergain, tag) {
        if (silent || !obj)
            return;
        var inst = obj.getFirstPicked();
        if (!inst)
            return;
        var v = dbToLinear(vol);
        var is_music = (folder === 1);
        var src = this.runtime.files_subfolder + filename.toLowerCase() + (useOgg ? ".ogg" : ".m4a");
        lastAudio = this.getAudioInstance(src, tag, is_music, looping !== 0, v);
        if (!lastAudio) {
            var b = this.getAudioBuffer(src, is_music);
            b.panWhenReady.push({
                obj: inst,
                ia: innerangle,
                oa: outerangle,
                og: dbToLinear(outergain),
                thistag: tag
            });
            return;
        }
        lastAudio.setPannerEnabled(true);
        var px = cr.rotatePtAround(inst.x, inst.y, -inst.layer.getAngle(), listenerX, listenerY, true);
        var py = cr.rotatePtAround(inst.x, inst.y, -inst.layer.getAngle(), listenerX, listenerY, false);
        lastAudio.setPan(px, py, cr.to_degrees(inst.angle - inst.layer.getAngle()), innerangle, outerangle, dbToLinear(outergain));
        lastAudio.setObject(inst);
        lastAudio.play(looping !== 0, v, 0, this.nextPlayTime);
        this.nextPlayTime = 0;
    };
    Acts.prototype.SetLooping = function(tag, looping) {
        getAudioByTag(tag);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++)
            taggedAudio[i].setLooping(looping === 0);
    };
    Acts.prototype.SetMuted = function(tag, muted) {
        getAudioByTag(tag);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++)
            taggedAudio[i].setMuted(muted === 0);
    };
    Acts.prototype.SetVolume = function(tag, vol) {
        getAudioByTag(tag);
        var v = dbToLinear(vol);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++)
            taggedAudio[i].setVolume(v);
    };
    Acts.prototype.Preload = function(file) {
        if (silent)
            return;
        var is_music = file[1];
        var src = this.runtime.files_subfolder + file[0] + (useOgg ? ".ogg" : ".m4a");
        if (api === API_APPMOBI) {
            if (this.runtime.isDirectCanvas)
                AppMobi["context"]["loadSound"](src);
            else
                AppMobi["player"]["loadSound"](src);
            return;
        } else if (api === API_CORDOVA) {
            return;
        }
        this.getAudioInstance(src, "<preload>", is_music, false);
    };
    Acts.prototype.PreloadByName = function(folder, filename) {
        if (silent)
            return;
        var is_music = (folder === 1);
        var src = this.runtime.files_subfolder + filename.toLowerCase() + (useOgg ? ".ogg" : ".m4a");
        if (api === API_APPMOBI) {
            if (this.runtime.isDirectCanvas)
                AppMobi["context"]["loadSound"](src);
            else
                AppMobi["player"]["loadSound"](src);
            return;
        } else if (api === API_CORDOVA) {
            return;
        }
        this.getAudioInstance(src, "<preload>", is_music, false);
    };
    Acts.prototype.SetPlaybackRate = function(tag, rate) {
        getAudioByTag(tag);
        if (rate < 0.0)
            rate = 0;
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++)
            taggedAudio[i].setPlaybackRate(rate);
    };
    Acts.prototype.Stop = function(tag) {
        getAudioByTag(tag);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++)
            taggedAudio[i].stop();
    };
    Acts.prototype.StopAll = function() {
        var i, len;
        for (i = 0, len = audioInstances.length; i < len; i++)
            audioInstances[i].stop();
    };
    Acts.prototype.SetPaused = function(tag, state) {
        getAudioByTag(tag);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++) {
            if (state === 0)
                taggedAudio[i].pause();
            else
                taggedAudio[i].resume();
        }
    };
    Acts.prototype.Seek = function(tag, pos) {
        getAudioByTag(tag);
        var i, len;
        for (i = 0, len = taggedAudio.length; i < len; i++) {
            taggedAudio[i].seek(pos);
        }
    };
    Acts.prototype.SetSilent = function(s) {
        var i, len;
        if (s === 2) // toggling
            s = (silent ? 1 : 0); // choose opposite state
        if (s === 0 && !silent) // setting silent
        {
            for (i = 0, len = audioInstances.length; i < len; i++)
                audioInstances[i].setSilent(true);
            silent = true;
        } else if (s === 1 && silent) // setting not silent
        {
            for (i = 0, len = audioInstances.length; i < len; i++)
                audioInstances[i].setSilent(false);
            silent = false;
        }
    };
    Acts.prototype.SetMasterVolume = function(vol) {
        masterVolume = dbToLinear(vol);
        var i, len;
        for (i = 0, len = audioInstances.length; i < len; i++)
            audioInstances[i].updateVolume();
    };
    Acts.prototype.AddFilterEffect = function(tag, type, freq, detune, q, gain, mix) {
        if (api !== API_WEBAUDIO || type < 0 || type >= filterTypes.length || !context["createBiquadFilter"])
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new FilterEffect(type, freq, detune, q, gain, mix));
    };
    Acts.prototype.AddDelayEffect = function(tag, delay, gain, mix) {
        if (api !== API_WEBAUDIO)
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new DelayEffect(delay, dbToLinear(gain), mix));
    };
    Acts.prototype.AddFlangerEffect = function(tag, delay, modulation, freq, feedback, mix) {
        if (api !== API_WEBAUDIO || !context["createOscillator"])
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new FlangerEffect(delay / 1000, modulation / 1000, freq, feedback / 100, mix));
    };
    Acts.prototype.AddPhaserEffect = function(tag, freq, detune, q, mod, modfreq, mix) {
        if (api !== API_WEBAUDIO || !context["createOscillator"])
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new PhaserEffect(freq, detune, q, mod, modfreq, mix));
    };
    Acts.prototype.AddConvolutionEffect = function(tag, file, norm, mix) {
        if (api !== API_WEBAUDIO || !context["createConvolver"])
            return;
        var doNormalize = (norm === 0);
        var src = this.runtime.files_subfolder + file[0] + (useOgg ? ".ogg" : ".m4a");
        var b = this.getAudioBuffer(src, false);
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        var fx;
        if (b.bufferObject) {
            fx = new ConvolveEffect(b.bufferObject, doNormalize, mix, src);
        } else {
            fx = new ConvolveEffect(null, doNormalize, mix, src);
            b.normalizeWhenReady = doNormalize;
            b.convolveWhenReady = fx;
        }
        addEffectForTag(tag, fx);
    };
    Acts.prototype.AddGainEffect = function(tag, g) {
        if (api !== API_WEBAUDIO)
            return;
        tag = tag.toLowerCase();
        addEffectForTag(tag, new GainEffect(dbToLinear(g)));
    };
    Acts.prototype.AddMuteEffect = function(tag) {
        if (api !== API_WEBAUDIO)
            return;
        tag = tag.toLowerCase();
        addEffectForTag(tag, new GainEffect(0)); // re-use gain effect with 0 gain
    };
    Acts.prototype.AddTremoloEffect = function(tag, freq, mix) {
        if (api !== API_WEBAUDIO || !context["createOscillator"])
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new TremoloEffect(freq, mix));
    };
    Acts.prototype.AddRingModEffect = function(tag, freq, mix) {
        if (api !== API_WEBAUDIO || !context["createOscillator"])
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new RingModulatorEffect(freq, mix));
    };
    Acts.prototype.AddDistortionEffect = function(tag, threshold, headroom, drive, makeupgain, mix) {
        if (api !== API_WEBAUDIO || !context["createWaveShaper"])
            return;
        tag = tag.toLowerCase();
        mix = mix / 100;
        if (mix < 0) mix = 0;
        if (mix > 1) mix = 1;
        addEffectForTag(tag, new DistortionEffect(threshold, headroom, drive, makeupgain, mix));
    };
    Acts.prototype.AddCompressorEffect = function(tag, threshold, knee, ratio, attack, release) {
        if (api !== API_WEBAUDIO || !context["createDynamicsCompressor"])
            return;
        tag = tag.toLowerCase();
        addEffectForTag(tag, new CompressorEffect(threshold, knee, ratio, attack / 1000, release / 1000));
    };
    Acts.prototype.AddAnalyserEffect = function(tag, fftSize, smoothing) {
        if (api !== API_WEBAUDIO)
            return;
        tag = tag.toLowerCase();
        addEffectForTag(tag, new AnalyserEffect(fftSize, smoothing));
    };
    Acts.prototype.RemoveEffects = function(tag) {
        if (api !== API_WEBAUDIO)
            return;
        tag = tag.toLowerCase();
        var i, len, arr;
        if (effects.hasOwnProperty(tag)) {
            arr = effects[tag];
            if (arr.length) {
                for (i = 0, len = arr.length; i < len; i++)
                    arr[i].remove();
                cr.clearArray(arr);
                reconnectEffects(tag);
            }
        }
    };
    Acts.prototype.SetEffectParameter = function(tag, index, param, value, ramp, time) {
        if (api !== API_WEBAUDIO)
            return;
        tag = tag.toLowerCase();
        index = Math.floor(index);
        var arr;
        if (!effects.hasOwnProperty(tag))
            return;
        arr = effects[tag];
        if (index < 0 || index >= arr.length)
            return;
        arr[index].setParam(param, value, ramp, time);
    };
    Acts.prototype.SetListenerObject = function(obj_) {
        if (!obj_ || api !== API_WEBAUDIO)
            return;
        var inst = obj_.getFirstPicked();
        if (!inst)
            return;
        this.listenerTracker.setObject(inst);
        listenerX = inst.x;
        listenerY = inst.y;
    };
    Acts.prototype.SetListenerZ = function(z) {
        this.listenerZ = z;
    };
    Acts.prototype.ScheduleNextPlay = function(t) {
        if (!context)
            return; // needs Web Audio API
        this.nextPlayTime = t;
    };
    Acts.prototype.UnloadAudio = function(file) {
        var is_music = file[1];
        var src = this.runtime.files_subfolder + file[0] + (useOgg ? ".ogg" : ".m4a");
        var b = this.getAudioBuffer(src, is_music, true /* don't create if missing */ );
        if (!b)
            return; // not loaded
        b.release();
        cr.arrayFindRemove(audioBuffers, b);
    };
    Acts.prototype.UnloadAudioByName = function(folder, filename) {
        var is_music = (folder === 1);
        var src = this.runtime.files_subfolder + filename.toLowerCase() + (useOgg ? ".ogg" : ".m4a");
        var b = this.getAudioBuffer(src, is_music, true /* don't create if missing */ );
        if (!b)
            return; // not loaded
        b.release();
        cr.arrayFindRemove(audioBuffers, b);
    };
    Acts.prototype.UnloadAll = function() {
        var i, len;
        for (i = 0, len = audioBuffers.length; i < len; ++i) {
            audioBuffers[i].release();
        };
        cr.clearArray(audioBuffers);
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.Duration = function(ret, tag) {
        getAudioByTag(tag, true);
        if (taggedAudio.length)
            ret.set_float(taggedAudio[0].getDuration());
        else
            ret.set_float(0);
    };
    Exps.prototype.PlaybackTime = function(ret, tag) {
        getAudioByTag(tag, true);
        if (taggedAudio.length)
            ret.set_float(taggedAudio[0].getPlaybackTime(true));
        else
            ret.set_float(0);
    };
    Exps.prototype.Volume = function(ret, tag) {
        getAudioByTag(tag, true);
        if (taggedAudio.length) {
            var v = taggedAudio[0].getVolume();
            ret.set_float(linearToDb(v));
        } else
            ret.set_float(0);
    };
    Exps.prototype.MasterVolume = function(ret) {
        ret.set_float(linearToDb(masterVolume));
    };
    Exps.prototype.EffectCount = function(ret, tag) {
        tag = tag.toLowerCase();
        var arr = null;
        if (effects.hasOwnProperty(tag))
            arr = effects[tag];
        ret.set_int(arr ? arr.length : 0);
    };

    function getAnalyser(tag, index) {
        var arr = null;
        if (effects.hasOwnProperty(tag))
            arr = effects[tag];
        if (arr && index >= 0 && index < arr.length && arr[index].freqBins)
            return arr[index];
        else
            return null;
    };
    Exps.prototype.AnalyserFreqBinCount = function(ret, tag, index) {
        tag = tag.toLowerCase();
        index = Math.floor(index);
        var analyser = getAnalyser(tag, index);
        ret.set_int(analyser ? analyser.node["frequencyBinCount"] : 0);
    };
    Exps.prototype.AnalyserFreqBinAt = function(ret, tag, index, bin) {
        tag = tag.toLowerCase();
        index = Math.floor(index);
        bin = Math.floor(bin);
        var analyser = getAnalyser(tag, index);
        if (!analyser)
            ret.set_float(0);
        else if (bin < 0 || bin >= analyser.node["frequencyBinCount"])
            ret.set_float(0);
        else
            ret.set_float(analyser.freqBins[bin]);
    };
    Exps.prototype.AnalyserPeakLevel = function(ret, tag, index) {
        tag = tag.toLowerCase();
        index = Math.floor(index);
        var analyser = getAnalyser(tag, index);
        if (analyser)
            ret.set_float(analyser.peak);
        else
            ret.set_float(0);
    };
    Exps.prototype.AnalyserRMSLevel = function(ret, tag, index) {
        tag = tag.toLowerCase();
        index = Math.floor(index);
        var analyser = getAnalyser(tag, index);
        if (analyser)
            ret.set_float(analyser.rms);
        else
            ret.set_float(0);
    };
    Exps.prototype.SampleRate = function(ret) {
        ret.set_int(context ? context.sampleRate : 0);
    };
    Exps.prototype.CurrentTime = function(ret) {
        ret.set_float(context ? context.currentTime : cr.performance_now());
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Browser = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Browser.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    var offlineScriptReady = false;
    var browserPluginReady = false;
    document.addEventListener("DOMContentLoaded", function() {
        if (window["C2_RegisterSW"] && navigator["serviceWorker"]) {
            var offlineClientScript = document.createElement("script");
            offlineClientScript.onload = function() {
                offlineScriptReady = true;
                checkReady()
            };
            offlineClientScript.src = "offlineClient.js";
            document.head.appendChild(offlineClientScript);
        }
    });
    var browserInstance = null;
    typeProto.onAppBegin = function() {
        browserPluginReady = true;
        checkReady();
    };

    function checkReady() {
        if (offlineScriptReady && browserPluginReady && window["OfflineClientInfo"]) {
            window["OfflineClientInfo"]["SetMessageCallback"](function(e) {
                browserInstance.onSWMessage(e);
            });
        }
    };
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    instanceProto.onCreate = function() {
        var self = this;
        window.addEventListener("resize", function() {
            self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnResize, self);
        });
        browserInstance = this;
        if (typeof navigator.onLine !== "undefined") {
            window.addEventListener("online", function() {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnOnline, self);
            });
            window.addEventListener("offline", function() {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnOffline, self);
            });
        }
        if (!this.runtime.isDirectCanvas) {
            document.addEventListener("appMobi.device.update.available", function() {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnUpdateReady, self);
            });
            document.addEventListener("backbutton", function() {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton, self);
            });
            document.addEventListener("menubutton", function() {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnMenuButton, self);
            });
            document.addEventListener("searchbutton", function() {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnSearchButton, self);
            });
            document.addEventListener("tizenhwkey", function(e) {
                var ret;
                switch (e["keyName"]) {
                    case "back":
                        ret = self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton, self);
                        if (!ret) {
                            if (window["tizen"])
                                window["tizen"]["application"]["getCurrentApplication"]()["exit"]();
                        }
                        break;
                    case "menu":
                        ret = self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnMenuButton, self);
                        if (!ret)
                            e.preventDefault();
                        break;
                }
            });
        }
        if (this.runtime.isWindows10 && typeof Windows !== "undefined") {
            Windows["UI"]["Core"]["SystemNavigationManager"]["getForCurrentView"]().addEventListener("backrequested", function(e) {
                var ret = self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton, self);
                if (ret)
                    e["handled"] = true;
            });
        } else if (this.runtime.isWinJS && WinJS["Application"]) {
            WinJS["Application"]["onbackclick"] = function(e) {
                return !!self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnBackButton, self);
            };
        }
        this.runtime.addSuspendCallback(function(s) {
            if (s) {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnPageHidden, self);
            } else {
                self.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnPageVisible, self);
            }
        });
        this.is_arcade = (typeof window["is_scirra_arcade"] !== "undefined");
    };
    instanceProto.onSWMessage = function(e) {
        var messageType = e["data"]["type"];
        if (messageType === "downloading-update")
            this.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnUpdateFound, this);
        else if (messageType === "update-ready" || messageType === "update-pending")
            this.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnUpdateReady, this);
        else if (messageType === "offline-ready")
            this.runtime.trigger(cr.plugins_.Browser.prototype.cnds.OnOfflineReady, this);
    };
    var batteryManager = null;
    var loadedBatteryManager = false;

    function maybeLoadBatteryManager() {
        if (loadedBatteryManager)
            return;
        if (!navigator["getBattery"])
            return;
        var promise = navigator["getBattery"]();
        loadedBatteryManager = true;
        if (promise) {
            promise.then(function(manager) {
                batteryManager = manager;
            });
        }
    };

    function Cnds() {};
    Cnds.prototype.CookiesEnabled = function() {
        return navigator ? navigator.cookieEnabled : false;
    };
    Cnds.prototype.IsOnline = function() {
        return navigator ? navigator.onLine : false;
    };
    Cnds.prototype.HasJava = function() {
        return navigator ? navigator.javaEnabled() : false;
    };
    Cnds.prototype.OnOnline = function() {
        return true;
    };
    Cnds.prototype.OnOffline = function() {
        return true;
    };
    Cnds.prototype.IsDownloadingUpdate = function() {
        return false; // deprecated
    };
    Cnds.prototype.OnUpdateReady = function() {
        return true;
    };
    Cnds.prototype.PageVisible = function() {
        return !this.runtime.isSuspended;
    };
    Cnds.prototype.OnPageVisible = function() {
        return true;
    };
    Cnds.prototype.OnPageHidden = function() {
        return true;
    };
    Cnds.prototype.OnResize = function() {
        return true;
    };
    Cnds.prototype.IsFullscreen = function() {
        return !!(document["mozFullScreen"] || document["webkitIsFullScreen"] || document["fullScreen"] || this.runtime.isNodeFullscreen);
    };
    Cnds.prototype.OnBackButton = function() {
        return true;
    };
    Cnds.prototype.OnMenuButton = function() {
        return true;
    };
    Cnds.prototype.OnSearchButton = function() {
        return true;
    };
    Cnds.prototype.IsMetered = function() {
        var connection = navigator["connection"] || navigator["mozConnection"] || navigator["webkitConnection"];
        if (!connection)
            return false;
        return !!connection["metered"];
    };
    Cnds.prototype.IsCharging = function() {
        var battery = navigator["battery"] || navigator["mozBattery"] || navigator["webkitBattery"];
        if (battery) {
            return !!battery["charging"]
        } else {
            maybeLoadBatteryManager();
            if (batteryManager) {
                return !!batteryManager["charging"];
            } else {
                return true; // if unknown, default to charging (powered)
            }
        }
    };
    Cnds.prototype.IsPortraitLandscape = function(p) {
        var current = (window.innerWidth <= window.innerHeight ? 0 : 1);
        return current === p;
    };
    Cnds.prototype.SupportsFullscreen = function() {
        if (this.runtime.isNodeWebkit)
            return true;
        var elem = this.runtime.canvasdiv || this.runtime.canvas;
        return !!(elem["requestFullscreen"] || elem["mozRequestFullScreen"] || elem["msRequestFullscreen"] || elem["webkitRequestFullScreen"]);
    };
    Cnds.prototype.OnUpdateFound = function() {
        return true;
    };
    Cnds.prototype.OnUpdateReady = function() {
        return true;
    };
    Cnds.prototype.OnOfflineReady = function() {
        return true;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.Alert = function(msg) {
        if (!this.runtime.isDomFree)
            alert(msg.toString());
    };
    Acts.prototype.Close = function() {
        if (this.runtime.isCocoonJs)
            CocoonJS["App"]["forceToFinish"]();
        else if (window["tizen"])
            window["tizen"]["application"]["getCurrentApplication"]()["exit"]();
        else if (navigator["app"] && navigator["app"]["exitApp"])
            navigator["app"]["exitApp"]();
        else if (navigator["device"] && navigator["device"]["exitApp"])
            navigator["device"]["exitApp"]();
        else if (!this.is_arcade && !this.runtime.isDomFree)
            window.close();
    };
    Acts.prototype.Focus = function() {
        if (this.runtime.isNodeWebkit) {
            var win = window["nwgui"]["Window"]["get"]();
            win["focus"]();
        } else if (!this.is_arcade && !this.runtime.isDomFree)
            window.focus();
    };
    Acts.prototype.Blur = function() {
        if (this.runtime.isNodeWebkit) {
            var win = window["nwgui"]["Window"]["get"]();
            win["blur"]();
        } else if (!this.is_arcade && !this.runtime.isDomFree)
            window.blur();
    };
    Acts.prototype.GoBack = function() {
        if (navigator["app"] && navigator["app"]["backHistory"])
            navigator["app"]["backHistory"]();
        else if (!this.is_arcade && !this.runtime.isDomFree && window.back)
            window.back();
    };
    Acts.prototype.GoForward = function() {
        if (!this.is_arcade && !this.runtime.isDomFree && window.forward)
            window.forward();
    };
    Acts.prototype.GoHome = function() {
        if (!this.is_arcade && !this.runtime.isDomFree && window.home)
            window.home();
    };
    Acts.prototype.GoToURL = function(url, target) {
        if (this.runtime.isCocoonJs)
            CocoonJS["App"]["openURL"](url);
        else if (this.runtime.isEjecta)
            ejecta["openURL"](url);
        else if (this.runtime.isWinJS)
            Windows["System"]["Launcher"]["launchUriAsync"](new Windows["Foundation"]["Uri"](url));
        else if (navigator["app"] && navigator["app"]["loadUrl"])
            navigator["app"]["loadUrl"](url, {
                "openExternal": true
            });
        else if (this.runtime.isCordova)
            window.open(url, "_system");
        else if (!this.is_arcade && !this.runtime.isDomFree) {
            if (target === 2 && !this.is_arcade) // top
                window.top.location = url;
            else if (target === 1 && !this.is_arcade) // parent
                window.parent.location = url;
            else // self
                window.location = url;
        }
    };
    Acts.prototype.GoToURLWindow = function(url, tag) {
        if (this.runtime.isCocoonJs)
            CocoonJS["App"]["openURL"](url);
        else if (this.runtime.isEjecta)
            ejecta["openURL"](url);
        else if (this.runtime.isWinJS)
            Windows["System"]["Launcher"]["launchUriAsync"](new Windows["Foundation"]["Uri"](url));
        else if (navigator["app"] && navigator["app"]["loadUrl"])
            navigator["app"]["loadUrl"](url, {
                "openExternal": true
            });
        else if (this.runtime.isCordova)
            window.open(url, "_system");
        else if (!this.is_arcade && !this.runtime.isDomFree)
            window.open(url, tag);
    };
    Acts.prototype.Reload = function() {
        if (!this.is_arcade && !this.runtime.isDomFree)
            window.location.reload();
    };
    var firstRequestFullscreen = true;
    var crruntime = null;

    function onFullscreenError(e) {
        if (console && console.warn)
            console.warn("Fullscreen request failed: ", e);
        crruntime["setSize"](window.innerWidth, window.innerHeight);
    };
    Acts.prototype.RequestFullScreen = function(stretchmode) {
        if (this.runtime.isDomFree) {
            cr.logexport("[Construct 2] Requesting fullscreen is not supported on this platform - the request has been ignored");
            return;
        }
        if (stretchmode >= 2)
            stretchmode += 1;
        if (stretchmode === 6)
            stretchmode = 2;
        if (this.runtime.isNodeWebkit) {
            if (this.runtime.isDebug) {
                debuggerFullscreen(true);
            } else if (!this.runtime.isNodeFullscreen && window["nwgui"]) {
                window["nwgui"]["Window"]["get"]()["enterFullscreen"]();
                this.runtime.isNodeFullscreen = true;
                this.runtime.fullscreen_scaling = (stretchmode >= 2 ? stretchmode : 0);
            }
        } else {
            if (document["mozFullScreen"] || document["webkitIsFullScreen"] || !!document["msFullscreenElement"] || document["fullScreen"] || document["fullScreenElement"]) {
                return;
            }
            this.runtime.fullscreen_scaling = (stretchmode >= 2 ? stretchmode : 0);
            var elem = document.documentElement;
            if (firstRequestFullscreen) {
                firstRequestFullscreen = false;
                crruntime = this.runtime;
                elem.addEventListener("mozfullscreenerror", onFullscreenError);
                elem.addEventListener("webkitfullscreenerror", onFullscreenError);
                elem.addEventListener("MSFullscreenError", onFullscreenError);
                elem.addEventListener("fullscreenerror", onFullscreenError);
            }
            if (elem["requestFullscreen"])
                elem["requestFullscreen"]();
            else if (elem["mozRequestFullScreen"])
                elem["mozRequestFullScreen"]();
            else if (elem["msRequestFullscreen"])
                elem["msRequestFullscreen"]();
            else if (elem["webkitRequestFullScreen"]) {
                if (typeof Element !== "undefined" && typeof Element["ALLOW_KEYBOARD_INPUT"] !== "undefined")
                    elem["webkitRequestFullScreen"](Element["ALLOW_KEYBOARD_INPUT"]);
                else
                    elem["webkitRequestFullScreen"]();
            }
        }
    };
    Acts.prototype.CancelFullScreen = function() {
        if (this.runtime.isDomFree) {
            cr.logexport("[Construct 2] Exiting fullscreen is not supported on this platform - the request has been ignored");
            return;
        }
        if (this.runtime.isNodeWebkit) {
            if (this.runtime.isDebug) {
                debuggerFullscreen(false);
            } else if (this.runtime.isNodeFullscreen && window["nwgui"]) {
                window["nwgui"]["Window"]["get"]()["leaveFullscreen"]();
                this.runtime.isNodeFullscreen = false;
            }
        } else {
            if (document["exitFullscreen"])
                document["exitFullscreen"]();
            else if (document["mozCancelFullScreen"])
                document["mozCancelFullScreen"]();
            else if (document["msExitFullscreen"])
                document["msExitFullscreen"]();
            else if (document["webkitCancelFullScreen"])
                document["webkitCancelFullScreen"]();
        }
    };
    Acts.prototype.Vibrate = function(pattern_) {
        try {
            var arr = pattern_.split(",");
            var i, len;
            for (i = 0, len = arr.length; i < len; i++) {
                arr[i] = parseInt(arr[i], 10);
            }
            if (navigator["vibrate"])
                navigator["vibrate"](arr);
            else if (navigator["mozVibrate"])
                navigator["mozVibrate"](arr);
            else if (navigator["webkitVibrate"])
                navigator["webkitVibrate"](arr);
            else if (navigator["msVibrate"])
                navigator["msVibrate"](arr);
        } catch (e) {}
    };
    Acts.prototype.InvokeDownload = function(url_, filename_) {
        var a = document.createElement("a");
        if (typeof a["download"] === "undefined") {
            window.open(url_);
        } else {
            var body = document.getElementsByTagName("body")[0];
            a.textContent = filename_;
            a.href = url_;
            a["download"] = filename_;
            body.appendChild(a);
            var clickEvent = new MouseEvent("click");
            a.dispatchEvent(clickEvent);
            body.removeChild(a);
        }
    };
    Acts.prototype.InvokeDownloadString = function(str_, mimetype_, filename_) {
        var datauri = "data:" + mimetype_ + "," + encodeURIComponent(str_);
        var a = document.createElement("a");
        if (typeof a["download"] === "undefined") {
            window.open(datauri);
        } else {
            var body = document.getElementsByTagName("body")[0];
            a.textContent = filename_;
            a.href = datauri;
            a["download"] = filename_;
            body.appendChild(a);
            var clickEvent = new MouseEvent("click");
            a.dispatchEvent(clickEvent);
            body.removeChild(a);
        }
    };
    Acts.prototype.ConsoleLog = function(type_, msg_) {
        if (typeof console === "undefined")
            return;
        if (type_ === 0 && console.log)
            console.log(msg_.toString());
        if (type_ === 1 && console.warn)
            console.warn(msg_.toString());
        if (type_ === 2 && console.error)
            console.error(msg_.toString());
    };
    Acts.prototype.ConsoleGroup = function(name_) {
        if (console && console.group)
            console.group(name_);
    };
    Acts.prototype.ConsoleGroupEnd = function() {
        if (console && console.groupEnd)
            console.groupEnd();
    };
    Acts.prototype.ExecJs = function(js_) {
        try {
            if (eval)
                eval(js_);
        } catch (e) {
            if (console && console.error)
                console.error("Error executing Javascript: ", e);
        }
    };
    var orientations = [
        "portrait",
        "landscape",
        "portrait-primary",
        "portrait-secondary",
        "landscape-primary",
        "landscape-secondary"
    ];
    Acts.prototype.LockOrientation = function(o) {
        o = Math.floor(o);
        if (o < 0 || o >= orientations.length)
            return;
        this.runtime.autoLockOrientation = false;
        var orientation = orientations[o];
        if (screen["orientation"] && screen["orientation"]["lock"])
            screen["orientation"]["lock"](orientation);
        else if (screen["lockOrientation"])
            screen["lockOrientation"](orientation);
        else if (screen["webkitLockOrientation"])
            screen["webkitLockOrientation"](orientation);
        else if (screen["mozLockOrientation"])
            screen["mozLockOrientation"](orientation);
        else if (screen["msLockOrientation"])
            screen["msLockOrientation"](orientation);
    };
    Acts.prototype.UnlockOrientation = function() {
        this.runtime.autoLockOrientation = false;
        if (screen["orientation"] && screen["orientation"]["unlock"])
            screen["orientation"]["unlock"]();
        else if (screen["unlockOrientation"])
            screen["unlockOrientation"]();
        else if (screen["webkitUnlockOrientation"])
            screen["webkitUnlockOrientation"]();
        else if (screen["mozUnlockOrientation"])
            screen["mozUnlockOrientation"]();
        else if (screen["msUnlockOrientation"])
            screen["msUnlockOrientation"]();
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.URL = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : window.location.toString());
    };
    Exps.prototype.Protocol = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : window.location.protocol);
    };
    Exps.prototype.Domain = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : window.location.hostname);
    };
    Exps.prototype.PathName = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : window.location.pathname);
    };
    Exps.prototype.Hash = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : window.location.hash);
    };
    Exps.prototype.Referrer = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : document.referrer);
    };
    Exps.prototype.Title = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : document.title);
    };
    Exps.prototype.Name = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : navigator.appName);
    };
    Exps.prototype.Version = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : navigator.appVersion);
    };
    Exps.prototype.Language = function(ret) {
        if (navigator && navigator.language)
            ret.set_string(navigator.language);
        else
            ret.set_string("");
    };
    Exps.prototype.Platform = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : navigator.platform);
    };
    Exps.prototype.Product = function(ret) {
        if (navigator && navigator.product)
            ret.set_string(navigator.product);
        else
            ret.set_string("");
    };
    Exps.prototype.Vendor = function(ret) {
        if (navigator && navigator.vendor)
            ret.set_string(navigator.vendor);
        else
            ret.set_string("");
    };
    Exps.prototype.UserAgent = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : navigator.userAgent);
    };
    Exps.prototype.QueryString = function(ret) {
        ret.set_string(this.runtime.isDomFree ? "" : window.location.search);
    };
    Exps.prototype.QueryParam = function(ret, paramname) {
        if (this.runtime.isDomFree) {
            ret.set_string("");
            return;
        }
        var match = RegExp('[?&]' + paramname + '=([^&]*)').exec(window.location.search);
        if (match)
            ret.set_string(decodeURIComponent(match[1].replace(/\+/g, ' ')));
        else
            ret.set_string("");
    };
    Exps.prototype.Bandwidth = function(ret) {
        var connection = navigator["connection"] || navigator["mozConnection"] || navigator["webkitConnection"];
        if (!connection)
            ret.set_float(Number.POSITIVE_INFINITY);
        else {
            if (typeof connection["bandwidth"] !== "undefined")
                ret.set_float(connection["bandwidth"]);
            else if (typeof connection["downlinkMax"] !== "undefined")
                ret.set_float(connection["downlinkMax"]);
            else
                ret.set_float(Number.POSITIVE_INFINITY);
        }
    };
    Exps.prototype.ConnectionType = function(ret) {
        var connection = navigator["connection"] || navigator["mozConnection"] || navigator["webkitConnection"];
        if (!connection)
            ret.set_string("unknown");
        else {
            ret.set_string(connection["type"] || "unknown");
        }
    };
    Exps.prototype.BatteryLevel = function(ret) {
        var battery = navigator["battery"] || navigator["mozBattery"] || navigator["webkitBattery"];
        if (battery) {
            ret.set_float(battery["level"]);
        } else {
            maybeLoadBatteryManager();
            if (batteryManager) {
                ret.set_float(batteryManager["level"]);
            } else {
                ret.set_float(1); // not supported/unknown: assume charged
            }
        }
    };
    Exps.prototype.BatteryTimeLeft = function(ret) {
        var battery = navigator["battery"] || navigator["mozBattery"] || navigator["webkitBattery"];
        if (battery) {
            ret.set_float(battery["dischargingTime"]);
        } else {
            maybeLoadBatteryManager();
            if (batteryManager) {
                ret.set_float(batteryManager["dischargingTime"]);
            } else {
                ret.set_float(Number.POSITIVE_INFINITY); // not supported/unknown: assume infinite time left
            }
        }
    };
    Exps.prototype.ExecJS = function(ret, js_) {
        if (!eval) {
            ret.set_any(0);
            return;
        }
        var result = 0;
        try {
            result = eval(js_);
        } catch (e) {
            if (console && console.error)
                console.error("Error executing Javascript: ", e);
        }
        if (typeof result === "number")
            ret.set_any(result);
        else if (typeof result === "string")
            ret.set_any(result);
        else if (typeof result === "boolean")
            ret.set_any(result ? 1 : 0);
        else
            ret.set_any(0);
    };
    Exps.prototype.ScreenWidth = function(ret) {
        ret.set_int(screen.width);
    };
    Exps.prototype.ScreenHeight = function(ret) {
        ret.set_int(screen.height);
    };
    Exps.prototype.DevicePixelRatio = function(ret) {
        ret.set_float(this.runtime.devicePixelRatio);
    };
    Exps.prototype.WindowInnerWidth = function(ret) {
        ret.set_int(window.innerWidth);
    };
    Exps.prototype.WindowInnerHeight = function(ret) {
        ret.set_int(window.innerHeight);
    };
    Exps.prototype.WindowOuterWidth = function(ret) {
        ret.set_int(window.outerWidth);
    };
    Exps.prototype.WindowOuterHeight = function(ret) {
        ret.set_int(window.outerHeight);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Function = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Function.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    var funcStack = [];
    var funcStackPtr = -1;
    var isInPreview = false; // set in onCreate
    function FuncStackEntry() {
        this.name = "";
        this.retVal = 0;
        this.params = [];
    };

    function pushFuncStack() {
        funcStackPtr++;
        if (funcStackPtr === funcStack.length)
            funcStack.push(new FuncStackEntry());
        return funcStack[funcStackPtr];
    };

    function getCurrentFuncStack() {
        if (funcStackPtr < 0)
            return null;
        return funcStack[funcStackPtr];
    };

    function getOneAboveFuncStack() {
        if (!funcStack.length)
            return null;
        var i = funcStackPtr + 1;
        if (i >= funcStack.length)
            i = funcStack.length - 1;
        return funcStack[i];
    };

    function popFuncStack() {;
        funcStackPtr--;
    };
    instanceProto.onCreate = function() {
        isInPreview = (typeof cr_is_preview !== "undefined");
        var self = this;
        window["c2_callFunction"] = function(name_, params_) {
            var i, len, v;
            var fs = pushFuncStack();
            fs.name = name_.toLowerCase();
            fs.retVal = 0;
            if (params_) {
                fs.params.length = params_.length;
                for (i = 0, len = params_.length; i < len; ++i) {
                    v = params_[i];
                    if (typeof v === "number" || typeof v === "string")
                        fs.params[i] = v;
                    else if (typeof v === "boolean")
                        fs.params[i] = (v ? 1 : 0);
                    else
                        fs.params[i] = 0;
                }
            } else {
                cr.clearArray(fs.params);
            }
            self.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction, self, fs.name);
            popFuncStack();
            return fs.retVal;
        };
    };

    function Cnds() {};
    Cnds.prototype.OnFunction = function(name_) {
        var fs = getCurrentFuncStack();
        if (!fs)
            return false;
        return cr.equals_nocase(name_, fs.name);
    };
    Cnds.prototype.CompareParam = function(index_, cmp_, value_) {
        var fs = getCurrentFuncStack();
        if (!fs)
            return false;
        index_ = cr.floor(index_);
        if (index_ < 0 || index_ >= fs.params.length)
            return false;
        return cr.do_cmp(fs.params[index_], cmp_, value_);
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.CallFunction = function(name_, params_) {
        var fs = pushFuncStack();
        fs.name = name_.toLowerCase();
        fs.retVal = 0;
        cr.shallowAssignArray(fs.params, params_);
        var ran = this.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction, this, fs.name);
        if (isInPreview && !ran) {;
        }
        popFuncStack();
    };
    Acts.prototype.SetReturnValue = function(value_) {
        var fs = getCurrentFuncStack();
        if (fs)
            fs.retVal = value_;
        else
        ;
    };
    Acts.prototype.CallExpression = function(unused) {};
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.ReturnValue = function(ret) {
        var fs = getOneAboveFuncStack();
        if (fs)
            ret.set_any(fs.retVal);
        else
            ret.set_int(0);
    };
    Exps.prototype.ParamCount = function(ret) {
        var fs = getCurrentFuncStack();
        if (fs)
            ret.set_int(fs.params.length);
        else {;
            ret.set_int(0);
        }
    };
    Exps.prototype.Param = function(ret, index_) {
        index_ = cr.floor(index_);
        var fs = getCurrentFuncStack();
        if (fs) {
            if (index_ >= 0 && index_ < fs.params.length) {
                ret.set_any(fs.params[index_]);
            } else {;
                ret.set_int(0);
            }
        } else {;
            ret.set_int(0);
        }
    };
    Exps.prototype.Call = function(ret, name_) {
        var fs = pushFuncStack();
        fs.name = name_.toLowerCase();
        fs.retVal = 0;
        cr.clearArray(fs.params);
        var i, len;
        for (i = 2, len = arguments.length; i < len; i++)
            fs.params.push(arguments[i]);
        var ran = this.runtime.trigger(cr.plugins_.Function.prototype.cnds.OnFunction, this, fs.name);
        if (isInPreview && !ran) {;
        }
        popFuncStack();
        ret.set_any(fs.retVal);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.GD_SDK = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.GD_SDK.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
        window["gdsdk"] = {};
        window["GD_OPTIONS"] = {};
    };
    var instanceProto = pluginProto.Instance.prototype;
    var isSupported = false;
    instanceProto.onCreate = function() {
        if (!window["gdsdk"] && !window["GD_OPTIONS"]) {
            cr.logexport(
                "[Construct 2] Gamedistribution.com SDK is required to show advertisements within Cordova; other platforms are not supported."
            );
            return;
        }
        isSupported = true;
        this.gdsdk = window["gdsdk"];
        var self = this;
        this.gdsdk["onInit"] = function() {
            cr.logexport("Gamedistribution.com SDK: onInit");
            self.isShowingBannerAd = false;
            self.runtime.trigger(cr.plugins_.GD_SDK.prototype.cnds.onInit, self);
        };
        this.gdsdk["onError"] = function() {
            cr.logexport("Gamedistribution.com SDK: onError");
            self.isShowingBannerAd = true;
            self.runtime.trigger(cr.plugins_.GD_SDK.prototype.cnds.onError, self);
        };
        this.gdsdk["onResumeGame"] = function() {
            cr.logexport("Gamedistribution.com SDK: onResume");
            self.isShowingBannerAd = false;
            self.runtime.trigger(
                cr.plugins_.GD_SDK.prototype.cnds.onResumeGame,
                self
            );
        };
        this.gdsdk["onPauseGame"] = function() {
            cr.logexport("Gamedistribution.com SDK: onPauseGame");
            self.isShowingBannerAd = true;
            self.runtime.trigger(cr.plugins_.GD_SDK.prototype.cnds.onPauseGame, self);
        };
        this.gdsdk["onPreloadedAd"] = function() {
            cr.logexport("Gamedistribution.com SDK: onPreloadedAd");
            self.isShowingBannerAd = true;
            self.runtime.trigger(
                cr.plugins_.GD_SDK.prototype.cnds.onPreloadedAd,
                self
            );
        };
        this.gdsdk["InitAds"] = function() {
            window["GD_OPTIONS"] = {
                gameId: self.properties[0],
                advertisementSettings: {
                    autoplay: false
                },
                onEvent: function(event) {
                    switch (event.name) {
                        case "SDK_GAME_START":
                            self.gdsdk["onResumeGame"]();
                            break;
                        case "SDK_GAME_PAUSE":
                            self.gdsdk["onPauseGame"]();
                            break;
                        case "SDK_READY":
                            self.gdsdk["onInit"]();
                            break;
                        case "SDK_ERROR":
                            self.gdsdk["onError"]();
                            break;
                    }
                }
            };
            (function(d, s, id) {
                var js,
                    fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s);
                js.id = id;
                js.src = "js/main.min.js";
                fjs.parentNode.insertBefore(js, fjs);
            })(document, "script", "gamedistribution-jssdk");
        };
    };

    function Cnds() {}
    Cnds.prototype.IsShowingBanner = function() {
        return this.isShowingBannerAd;
    };
    Cnds.prototype.onInit = function() {
        return true;
    };
    Cnds.prototype.onError = function(data) {
        return true;
    };
    Cnds.prototype.onResumeGame = function(data) {
        return true;
    };
    Cnds.prototype.onPauseGame = function(data) {
        return true;
    };
    Cnds.prototype.onPreloadedAd = function(data) {
        return true;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {}
    Acts.prototype.ShowAd = function() {
        if (!isSupported) return;
        if (typeof window["gdsdk"]["showAd"] === "undefined") {
            cr.logexport(
                "Gamedistribution.com SDK is not loaded or an ad blocker is present."
            );
            this.gdsdk["onResumeGame"]();
            return;
        }
        window["gdsdk"]["showAd"]();
        cr.logexport("ShowAd");
        this.isShowingBannerAd = true;
    };
    Acts.prototype.ShowRewardedAd = function() {
        if (!isSupported) return;
        if (typeof window["gdsdk"]["showAd"] === "undefined") {
            cr.logexport(
                "Gamedistribution.com SDK is not loaded or an ad blocker is present."
            );
            this.gdsdk["onResumeGame"]();
            return;
        }
        window["gdsdk"]["showAd"]("rewarded");
        cr.logexport("ShowRewardedAd");
        this.isShowingBannerAd = true;
    };
    Acts.prototype.PreloadRewardedAd = function() {
        if (!isSupported) return;
        if (typeof window["gdsdk"]["preloadAd"] === "undefined") {
            cr.logexport(
                "Gamedistribution.com SDK is not loaded or an ad blocker is present."
            );
            this.gdsdk["onResumeGame"]();
            return;
        }
        window["gdsdk"]
            ["preloadAd"]("rewarded")
            .then(() => {
                this.gdsdk["onPreloadedAd"]();
            })
            .catch(error => {
                this.gdsdk["onResumeGame"]();
            });
        cr.logexport("PreloadRewardedAd");
        this.isShowingBannerAd = false;
    };
    Acts.prototype.PlayLog = function() {
        if (!isSupported) return;
    };
    Acts.prototype.CustomLog = function() {
        if (!isSupported) return;
    };
    Acts.prototype.InitAds = function() {
        if (!isSupported) return;
        this.gdsdk["InitAds"]();
    };
    pluginProto.acts = new Acts();

    function Exps() {}
    pluginProto.exps = new Exps();
})();;;
var localForageInitFailed = false;
try {
    /*!
        localForage -- Offline Storage, Improved
        Version 1.4.0
        https://mozilla.github.io/localForage
        (c) 2013-2015 Mozilla, Apache License 2.0
    */
    ! function() {
        var a, b, c, d;
        ! function() {
            var e = {},
                f = {};
            a = function(a, b, c) {
                e[a] = {
                    deps: b,
                    callback: c
                }
            }, d = c = b = function(a) {
                function c(b) {
                    if ("." !== b.charAt(0)) return b;
                    for (var c = b.split("/"), d = a.split("/").slice(0, -1), e = 0, f = c.length; f > e; e++) {
                        var g = c[e];
                        if (".." === g) d.pop();
                        else {
                            if ("." === g) continue;
                            d.push(g)
                        }
                    }
                    return d.join("/")
                }
                if (d._eak_seen = e, f[a]) return f[a];
                if (f[a] = {}, !e[a]) throw new Error("Could not find module " + a);
                for (var g, h = e[a], i = h.deps, j = h.callback, k = [], l = 0, m = i.length; m > l; l++) "exports" === i[l] ? k.push(g = {}) : k.push(b(c(i[l])));
                var n = j.apply(this, k);
                return f[a] = g || n
            }
        }(), a("promise/all", ["./utils", "exports"], function(a, b) {
            "use strict";

            function c(a) {
                var b = this;
                if (!d(a)) throw new TypeError("You must pass an array to all.");
                return new b(function(b, c) {
                    function d(a) {
                        return function(b) {
                            f(a, b)
                        }
                    }

                    function f(a, c) {
                        h[a] = c, 0 === --i && b(h)
                    }
                    var g, h = [],
                        i = a.length;
                    0 === i && b([]);
                    for (var j = 0; j < a.length; j++) g = a[j], g && e(g.then) ? g.then(d(j), c) : f(j, g)
                })
            }
            var d = a.isArray,
                e = a.isFunction;
            b.all = c
        }), a("promise/asap", ["exports"], function(a) {
            "use strict";

            function b() {
                return function() {
                    process.nextTick(e)
                }
            }

            function c() {
                var a = 0,
                    b = new i(e),
                    c = document.createTextNode("");
                return b.observe(c, {
                        characterData: !0
                    }),
                    function() {
                        c.data = a = ++a % 2
                    }
            }

            function d() {
                return function() {
                    j.setTimeout(e, 1)
                }
            }

            function e() {
                for (var a = 0; a < k.length; a++) {
                    var b = k[a],
                        c = b[0],
                        d = b[1];
                    c(d)
                }
                k = []
            }

            function f(a, b) {
                var c = k.push([a, b]);
                1 === c && g()
            }
            var g, h = "undefined" != typeof window ? window : {},
                i = h.MutationObserver || h.WebKitMutationObserver,
                j = "undefined" != typeof global ? global : void 0 === this ? window : this,
                k = [];
            g = "undefined" != typeof process && "[object process]" === {}.toString.call(process) ? b() : i ? c() : d(), a.asap = f
        }), a("promise/config", ["exports"], function(a) {
            "use strict";

            function b(a, b) {
                return 2 !== arguments.length ? c[a] : void(c[a] = b)
            }
            var c = {
                instrument: !1
            };
            a.config = c, a.configure = b
        }), a("promise/polyfill", ["./promise", "./utils", "exports"], function(a, b, c) {
            "use strict";

            function d() {
                var a;
                a = "undefined" != typeof global ? global : "undefined" != typeof window && window.document ? window : self;
                var b = "Promise" in a && "resolve" in a.Promise && "reject" in a.Promise && "all" in a.Promise && "race" in a.Promise && function() {
                    var b;
                    return new a.Promise(function(a) {
                        b = a
                    }), f(b)
                }();
                b || (a.Promise = e)
            }
            var e = a.Promise,
                f = b.isFunction;
            c.polyfill = d
        }), a("promise/promise", ["./config", "./utils", "./all", "./race", "./resolve", "./reject", "./asap", "exports"], function(a, b, c, d, e, f, g, h) {
            "use strict";

            function i(a) {
                if (!v(a)) throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
                if (!(this instanceof i)) throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                this._subscribers = [], j(a, this)
            }

            function j(a, b) {
                function c(a) {
                    o(b, a)
                }

                function d(a) {
                    q(b, a)
                }
                try {
                    a(c, d)
                } catch (e) {
                    d(e)
                }
            }

            function k(a, b, c, d) {
                var e, f, g, h, i = v(c);
                if (i) try {
                    e = c(d), g = !0
                } catch (j) {
                    h = !0, f = j
                } else e = d, g = !0;
                n(b, e) || (i && g ? o(b, e) : h ? q(b, f) : a === D ? o(b, e) : a === E && q(b, e))
            }

            function l(a, b, c, d) {
                var e = a._subscribers,
                    f = e.length;
                e[f] = b, e[f + D] = c, e[f + E] = d
            }

            function m(a, b) {
                for (var c, d, e = a._subscribers, f = a._detail, g = 0; g < e.length; g += 3) c = e[g], d = e[g + b], k(b, c, d, f);
                a._subscribers = null
            }

            function n(a, b) {
                var c, d = null;
                try {
                    if (a === b) throw new TypeError("A promises callback cannot return that same promise.");
                    if (u(b) && (d = b.then, v(d))) return d.call(b, function(d) {
                        return c ? !0 : (c = !0, void(b !== d ? o(a, d) : p(a, d)))
                    }, function(b) {
                        return c ? !0 : (c = !0, void q(a, b))
                    }), !0
                } catch (e) {
                    return c ? !0 : (q(a, e), !0)
                }
                return !1
            }

            function o(a, b) {
                a === b ? p(a, b) : n(a, b) || p(a, b)
            }

            function p(a, b) {
                a._state === B && (a._state = C, a._detail = b, t.async(r, a))
            }

            function q(a, b) {
                a._state === B && (a._state = C, a._detail = b, t.async(s, a))
            }

            function r(a) {
                m(a, a._state = D)
            }

            function s(a) {
                m(a, a._state = E)
            }
            var t = a.config,
                u = (a.configure, b.objectOrFunction),
                v = b.isFunction,
                w = (b.now, c.all),
                x = d.race,
                y = e.resolve,
                z = f.reject,
                A = g.asap;
            t.async = A;
            var B = void 0,
                C = 0,
                D = 1,
                E = 2;
            i.prototype = {
                constructor: i,
                _state: void 0,
                _detail: void 0,
                _subscribers: void 0,
                then: function(a, b) {
                    var c = this,
                        d = new this.constructor(function() {});
                    if (this._state) {
                        var e = arguments;
                        t.async(function() {
                            k(c._state, d, e[c._state - 1], c._detail)
                        })
                    } else l(this, d, a, b);
                    return d
                },
                "catch": function(a) {
                    return this.then(null, a)
                }
            }, i.all = w, i.race = x, i.resolve = y, i.reject = z, h.Promise = i
        }), a("promise/race", ["./utils", "exports"], function(a, b) {
            "use strict";

            function c(a) {
                var b = this;
                if (!d(a)) throw new TypeError("You must pass an array to race.");
                return new b(function(b, c) {
                    for (var d, e = 0; e < a.length; e++) d = a[e], d && "function" == typeof d.then ? d.then(b, c) : b(d)
                })
            }
            var d = a.isArray;
            b.race = c
        }), a("promise/reject", ["exports"], function(a) {
            "use strict";

            function b(a) {
                var b = this;
                return new b(function(b, c) {
                    c(a)
                })
            }
            a.reject = b
        }), a("promise/resolve", ["exports"], function(a) {
            "use strict";

            function b(a) {
                if (a && "object" == typeof a && a.constructor === this) return a;
                var b = this;
                return new b(function(b) {
                    b(a)
                })
            }
            a.resolve = b
        }), a("promise/utils", ["exports"], function(a) {
            "use strict";

            function b(a) {
                return c(a) || "object" == typeof a && null !== a
            }

            function c(a) {
                return "function" == typeof a
            }

            function d(a) {
                return "[object Array]" === Object.prototype.toString.call(a)
            }
            var e = Date.now || function() {
                return (new Date).getTime()
            };
            a.objectOrFunction = b, a.isFunction = c, a.isArray = d, a.now = e
        }), b("promise/polyfill").polyfill()
    }(),
    function(a, b) {
        "object" == typeof exports && "object" == typeof module ? module.exports = b() : "function" == typeof define && define.amd ? define([], b) : "object" == typeof exports ? exports.localforage = b() : a.localforage = b()
    }(this, function() {
        return function(a) {
            function b(d) {
                if (c[d]) return c[d].exports;
                var e = c[d] = {
                    exports: {},
                    id: d,
                    loaded: !1
                };
                return a[d].call(e.exports, e, e.exports, b), e.loaded = !0, e.exports
            }
            var c = {};
            return b.m = a, b.c = c, b.p = "", b(0)
        }([function(a, b, c) {
            "use strict";

            function d(a, b) {
                if (!(a instanceof b)) throw new TypeError("Cannot call a class as a function")
            }
            b.__esModule = !0;
            var e = function(a) {
                function b(a, b) {
                    a[b] = function() {
                        var c = arguments;
                        return a.ready().then(function() {
                            return a[b].apply(a, c)
                        })
                    }
                }

                function e() {
                    for (var a = 1; a < arguments.length; a++) {
                        var b = arguments[a];
                        if (b)
                            for (var c in b) b.hasOwnProperty(c) && (m(b[c]) ? arguments[0][c] = b[c].slice() : arguments[0][c] = b[c])
                    }
                    return arguments[0]
                }

                function f(a) {
                    for (var b in h)
                        if (h.hasOwnProperty(b) && h[b] === a) return !0;
                    return !1
                }
                var g = {},
                    h = {
                        INDEXEDDB: "asyncStorage",
                        LOCALSTORAGE: "localStorageWrapper",
                        WEBSQL: "webSQLStorage"
                    },
                    i = [h.INDEXEDDB, h.WEBSQL, h.LOCALSTORAGE],
                    j = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"],
                    k = {
                        description: "",
                        driver: i.slice(),
                        name: "localforage",
                        size: 4980736,
                        storeName: "keyvaluepairs",
                        version: 1
                    },
                    l = function(a) {
                        var b = {};
                        return b[h.INDEXEDDB] = !! function() {
                            try {
                                var b = b || a.indexedDB || a.webkitIndexedDB || a.mozIndexedDB || a.OIndexedDB || a.msIndexedDB;
                                return "undefined" != typeof a.openDatabase && a.navigator && a.navigator.userAgent && /Safari/.test(a.navigator.userAgent) && !/Chrome/.test(a.navigator.userAgent) ? !1 : b && "function" == typeof b.open && "undefined" != typeof a.IDBKeyRange
                            } catch (c) {
                                return !1
                            }
                        }(), b[h.WEBSQL] = !! function() {
                            try {
                                return a.openDatabase
                            } catch (b) {
                                return !1
                            }
                        }(), b[h.LOCALSTORAGE] = !! function() {
                            try {
                                return a.localStorage && "setItem" in a.localStorage && a.localStorage.setItem
                            } catch (b) {
                                return !1
                            }
                        }(), b
                    }(a),
                    m = Array.isArray || function(a) {
                        return "[object Array]" === Object.prototype.toString.call(a)
                    },
                    n = function() {
                        function a(b) {
                            d(this, a), this.INDEXEDDB = h.INDEXEDDB, this.LOCALSTORAGE = h.LOCALSTORAGE, this.WEBSQL = h.WEBSQL, this._defaultConfig = e({}, k), this._config = e({}, this._defaultConfig, b), this._driverSet = null, this._initDriver = null, this._ready = !1, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver)
                        }
                        return a.prototype.config = function(a) {
                            if ("object" == typeof a) {
                                if (this._ready) return new Error("Can't call config() after localforage has been used.");
                                for (var b in a) "storeName" === b && (a[b] = a[b].replace(/\W/g, "_")), this._config[b] = a[b];
                                return "driver" in a && a.driver && this.setDriver(this._config.driver), !0
                            }
                            return "string" == typeof a ? this._config[a] : this._config
                        }, a.prototype.defineDriver = function(a, b, c) {
                            var d = new Promise(function(b, c) {
                                try {
                                    var d = a._driver,
                                        e = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),
                                        h = new Error("Custom driver name already in use: " + a._driver);
                                    if (!a._driver) return void c(e);
                                    if (f(a._driver)) return void c(h);
                                    for (var i = j.concat("_initStorage"), k = 0; k < i.length; k++) {
                                        var m = i[k];
                                        if (!m || !a[m] || "function" != typeof a[m]) return void c(e)
                                    }
                                    var n = Promise.resolve(!0);
                                    "_support" in a && (n = a._support && "function" == typeof a._support ? a._support() : Promise.resolve(!!a._support)), n.then(function(c) {
                                        l[d] = c, g[d] = a, b()
                                    }, c)
                                } catch (o) {
                                    c(o)
                                }
                            });
                            return d.then(b, c), d
                        }, a.prototype.driver = function() {
                            return this._driver || null
                        }, a.prototype.getDriver = function(a, b, d) {
                            var e = this,
                                h = function() {
                                    if (f(a)) switch (a) {
                                            case e.INDEXEDDB:
                                                return new Promise(function(a, b) {
                                                    a(c(1))
                                                });
                                            case e.LOCALSTORAGE:
                                                return new Promise(function(a, b) {
                                                    a(c(2))
                                                });
                                            case e.WEBSQL:
                                                return new Promise(function(a, b) {
                                                    a(c(4))
                                                })
                                        } else if (g[a]) return Promise.resolve(g[a]);
                                    return Promise.reject(new Error("Driver not found."))
                                }();
                            return h.then(b, d), h
                        }, a.prototype.getSerializer = function(a) {
                            var b = new Promise(function(a, b) {
                                a(c(3))
                            });
                            return a && "function" == typeof a && b.then(function(b) {
                                a(b)
                            }), b
                        }, a.prototype.ready = function(a) {
                            var b = this,
                                c = b._driverSet.then(function() {
                                    return null === b._ready && (b._ready = b._initDriver()), b._ready
                                });
                            return c.then(a, a), c
                        }, a.prototype.setDriver = function(a, b, c) {
                            function d() {
                                f._config.driver = f.driver()
                            }

                            function e(a) {
                                return function() {
                                    function b() {
                                        for (; c < a.length;) {
                                            var e = a[c];
                                            return c++, f._dbInfo = null, f._ready = null, f.getDriver(e).then(function(a) {
                                                return f._extend(a), d(), f._ready = f._initStorage(f._config), f._ready
                                            })["catch"](b)
                                        }
                                        d();
                                        var g = new Error("No available storage method found.");
                                        return f._driverSet = Promise.reject(g), f._driverSet
                                    }
                                    var c = 0;
                                    return b()
                                }
                            }
                            var f = this;
                            m(a) || (a = [a]);
                            var g = this._getSupportedDrivers(a),
                                h = null !== this._driverSet ? this._driverSet["catch"](function() {
                                    return Promise.resolve()
                                }) : Promise.resolve();
                            return this._driverSet = h.then(function() {
                                var a = g[0];
                                return f._dbInfo = null, f._ready = null, f.getDriver(a).then(function(a) {
                                    f._driver = a._driver, d(), f._wrapLibraryMethodsWithReady(), f._initDriver = e(g)
                                })
                            })["catch"](function() {
                                d();
                                var a = new Error("No available storage method found.");
                                return f._driverSet = Promise.reject(a), f._driverSet
                            }), this._driverSet.then(b, c), this._driverSet
                        }, a.prototype.supports = function(a) {
                            return !!l[a]
                        }, a.prototype._extend = function(a) {
                            e(this, a)
                        }, a.prototype._getSupportedDrivers = function(a) {
                            for (var b = [], c = 0, d = a.length; d > c; c++) {
                                var e = a[c];
                                this.supports(e) && b.push(e)
                            }
                            return b
                        }, a.prototype._wrapLibraryMethodsWithReady = function() {
                            for (var a = 0; a < j.length; a++) b(this, j[a])
                        }, a.prototype.createInstance = function(b) {
                            return new a(b)
                        }, a
                    }();
                return new n
            }("undefined" != typeof window ? window : self);
            b["default"] = e, a.exports = b["default"]
        }, function(a, b) {
            "use strict";
            b.__esModule = !0;
            var c = function(a) {
                function b(b, c) {
                    b = b || [], c = c || {};
                    try {
                        return new Blob(b, c)
                    } catch (d) {
                        if ("TypeError" !== d.name) throw d;
                        for (var e = a.BlobBuilder || a.MSBlobBuilder || a.MozBlobBuilder || a.WebKitBlobBuilder, f = new e, g = 0; g < b.length; g += 1) f.append(b[g]);
                        return f.getBlob(c.type)
                    }
                }

                function c(a) {
                    for (var b = a.length, c = new ArrayBuffer(b), d = new Uint8Array(c), e = 0; b > e; e++) d[e] = a.charCodeAt(e);
                    return c
                }

                function d(a) {
                    return new Promise(function(b, c) {
                        var d = new XMLHttpRequest;
                        d.open("GET", a), d.withCredentials = !0, d.responseType = "arraybuffer", d.onreadystatechange = function() {
                            return 4 === d.readyState ? 200 === d.status ? b({
                                response: d.response,
                                type: d.getResponseHeader("Content-Type")
                            }) : void c({
                                status: d.status,
                                response: d.response
                            }) : void 0
                        }, d.send()
                    })
                }

                function e(a) {
                    return new Promise(function(c, e) {
                        var f = b([""], {
                                type: "image/png"
                            }),
                            g = a.transaction([D], "readwrite");
                        g.objectStore(D).put(f, "key"), g.oncomplete = function() {
                            var b = a.transaction([D], "readwrite"),
                                f = b.objectStore(D).get("key");
                            f.onerror = e, f.onsuccess = function(a) {
                                var b = a.target.result,
                                    e = URL.createObjectURL(b);
                                d(e).then(function(a) {
                                    c(!(!a || "image/png" !== a.type))
                                }, function() {
                                    c(!1)
                                }).then(function() {
                                    URL.revokeObjectURL(e)
                                })
                            }
                        }, g.onerror = g.onabort = e
                    })["catch"](function() {
                        return !1
                    })
                }

                function f(a) {
                    return "boolean" == typeof B ? Promise.resolve(B) : e(a).then(function(a) {
                        return B = a
                    })
                }

                function g(a) {
                    return new Promise(function(b, c) {
                        var d = new FileReader;
                        d.onerror = c, d.onloadend = function(c) {
                            var d = btoa(c.target.result || "");
                            b({
                                __local_forage_encoded_blob: !0,
                                data: d,
                                type: a.type
                            })
                        }, d.readAsBinaryString(a)
                    })
                }

                function h(a) {
                    var d = c(atob(a.data));
                    return b([d], {
                        type: a.type
                    })
                }

                function i(a) {
                    return a && a.__local_forage_encoded_blob
                }

                function j(a) {
                    var b = this,
                        c = b._initReady().then(function() {
                            var a = C[b._dbInfo.name];
                            return a && a.dbReady ? a.dbReady : void 0
                        });
                    return c.then(a, a), c
                }

                function k(a) {
                    var b = C[a.name],
                        c = {};
                    c.promise = new Promise(function(a) {
                        c.resolve = a
                    }), b.deferredOperations.push(c), b.dbReady ? b.dbReady = b.dbReady.then(function() {
                        return c.promise
                    }) : b.dbReady = c.promise
                }

                function l(a) {
                    var b = C[a.name],
                        c = b.deferredOperations.pop();
                    c && c.resolve()
                }

                function m(a) {
                    function b() {
                        return Promise.resolve()
                    }
                    var c = this,
                        d = {
                            db: null
                        };
                    if (a)
                        for (var e in a) d[e] = a[e];
                    C || (C = {});
                    var f = C[d.name];
                    f || (f = {
                        forages: [],
                        db: null,
                        dbReady: null,
                        deferredOperations: []
                    }, C[d.name] = f), f.forages.push(c), c._initReady || (c._initReady = c.ready, c.ready = j);
                    for (var g = [], h = 0; h < f.forages.length; h++) {
                        var i = f.forages[h];
                        i !== c && g.push(i._initReady()["catch"](b))
                    }
                    var k = f.forages.slice(0);
                    return Promise.all(g).then(function() {
                        return d.db = f.db, n(d)
                    }).then(function(a) {
                        return d.db = a, q(d, c._defaultConfig.version) ? o(d) : a
                    }).then(function(a) {
                        d.db = f.db = a, c._dbInfo = d;
                        for (var b = 0; b < k.length; b++) {
                            var e = k[b];
                            e !== c && (e._dbInfo.db = d.db, e._dbInfo.version = d.version)
                        }
                    })
                }

                function n(a) {
                    return p(a, !1)
                }

                function o(a) {
                    return p(a, !0)
                }

                function p(b, c) {
                    return new Promise(function(d, e) {
                        if (b.db) {
                            if (!c) return d(b.db);
                            k(b), b.db.close()
                        }
                        var f = [b.name];
                        c && f.push(b.version);
                        var g = A.open.apply(A, f);
                        c && (g.onupgradeneeded = function(c) {
                            var d = g.result;
                            try {
                                d.createObjectStore(b.storeName), c.oldVersion <= 1 && d.createObjectStore(D)
                            } catch (e) {
                                if ("ConstraintError" !== e.name) throw e;
                                a.console.warn('The database "' + b.name + '" has been upgraded from version ' + c.oldVersion + " to version " + c.newVersion + ', but the storage "' + b.storeName + '" already exists.')
                            }
                        }), g.onerror = function() {
                            e(g.error)
                        }, g.onsuccess = function() {
                            d(g.result), l(b)
                        }
                    })
                }

                function q(b, c) {
                    if (!b.db) return !0;
                    var d = !b.db.objectStoreNames.contains(b.storeName),
                        e = b.version < b.db.version,
                        f = b.version > b.db.version;
                    if (e && (b.version !== c && a.console.warn('The database "' + b.name + "\" can't be downgraded from version " + b.db.version + " to version " + b.version + "."), b.version = b.db.version), f || d) {
                        if (d) {
                            var g = b.db.version + 1;
                            g > b.version && (b.version = g)
                        }
                        return !0
                    }
                    return !1
                }

                function r(b, c) {
                    var d = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var e = new Promise(function(a, c) {
                        d.ready().then(function() {
                            var e = d._dbInfo,
                                f = e.db.transaction(e.storeName, "readonly").objectStore(e.storeName),
                                g = f.get(b);
                            g.onsuccess = function() {
                                var b = g.result;
                                void 0 === b && (b = null), i(b) && (b = h(b)), a(b)
                            }, g.onerror = function() {
                                c(g.error)
                            }
                        })["catch"](c)
                    });
                    return z(e, c), e
                }

                function s(a, b) {
                    var c = this,
                        d = new Promise(function(b, d) {
                            c.ready().then(function() {
                                var e = c._dbInfo,
                                    f = e.db.transaction(e.storeName, "readonly").objectStore(e.storeName),
                                    g = f.openCursor(),
                                    j = 1;
                                g.onsuccess = function() {
                                    var c = g.result;
                                    if (c) {
                                        var d = c.value;
                                        i(d) && (d = h(d));
                                        var e = a(d, c.key, j++);
                                        void 0 !== e ? b(e) : c["continue"]()
                                    } else b()
                                }, g.onerror = function() {
                                    d(g.error)
                                }
                            })["catch"](d)
                        });
                    return z(d, b), d
                }

                function t(b, c, d) {
                    var e = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var h = new Promise(function(a, d) {
                        var h;
                        e.ready().then(function() {
                            return h = e._dbInfo, c instanceof Blob ? f(h.db).then(function(a) {
                                return a ? c : g(c)
                            }) : c
                        }).then(function(c) {
                            var e = h.db.transaction(h.storeName, "readwrite"),
                                f = e.objectStore(h.storeName);
                            null === c && (c = void 0), e.oncomplete = function() {
                                void 0 === c && (c = null), a(c)
                            }, e.onabort = e.onerror = function() {
                                var a = g.error ? g.error : g.transaction.error;
                                d(a)
                            };
                            var g = f.put(c, b)
                        })["catch"](d)
                    });
                    return z(h, d), h
                }

                function u(b, c) {
                    var d = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var e = new Promise(function(a, c) {
                        d.ready().then(function() {
                            var e = d._dbInfo,
                                f = e.db.transaction(e.storeName, "readwrite"),
                                g = f.objectStore(e.storeName),
                                h = g["delete"](b);
                            f.oncomplete = function() {
                                a()
                            }, f.onerror = function() {
                                c(h.error)
                            }, f.onabort = function() {
                                var a = h.error ? h.error : h.transaction.error;
                                c(a)
                            }
                        })["catch"](c)
                    });
                    return z(e, c), e
                }

                function v(a) {
                    var b = this,
                        c = new Promise(function(a, c) {
                            b.ready().then(function() {
                                var d = b._dbInfo,
                                    e = d.db.transaction(d.storeName, "readwrite"),
                                    f = e.objectStore(d.storeName),
                                    g = f.clear();
                                e.oncomplete = function() {
                                    a()
                                }, e.onabort = e.onerror = function() {
                                    var a = g.error ? g.error : g.transaction.error;
                                    c(a)
                                }
                            })["catch"](c)
                        });
                    return z(c, a), c
                }

                function w(a) {
                    var b = this,
                        c = new Promise(function(a, c) {
                            b.ready().then(function() {
                                var d = b._dbInfo,
                                    e = d.db.transaction(d.storeName, "readonly").objectStore(d.storeName),
                                    f = e.count();
                                f.onsuccess = function() {
                                    a(f.result)
                                }, f.onerror = function() {
                                    c(f.error)
                                }
                            })["catch"](c)
                        });
                    return z(c, a), c
                }

                function x(a, b) {
                    var c = this,
                        d = new Promise(function(b, d) {
                            return 0 > a ? void b(null) : void c.ready().then(function() {
                                var e = c._dbInfo,
                                    f = e.db.transaction(e.storeName, "readonly").objectStore(e.storeName),
                                    g = !1,
                                    h = f.openCursor();
                                h.onsuccess = function() {
                                    var c = h.result;
                                    return c ? void(0 === a ? b(c.key) : g ? b(c.key) : (g = !0, c.advance(a))) : void b(null)
                                }, h.onerror = function() {
                                    d(h.error)
                                }
                            })["catch"](d)
                        });
                    return z(d, b), d
                }

                function y(a) {
                    var b = this,
                        c = new Promise(function(a, c) {
                            b.ready().then(function() {
                                var d = b._dbInfo,
                                    e = d.db.transaction(d.storeName, "readonly").objectStore(d.storeName),
                                    f = e.openCursor(),
                                    g = [];
                                f.onsuccess = function() {
                                    var b = f.result;
                                    return b ? (g.push(b.key), void b["continue"]()) : void a(g)
                                }, f.onerror = function() {
                                    c(f.error)
                                }
                            })["catch"](c)
                        });
                    return z(c, a), c
                }

                function z(a, b) {
                    b && a.then(function(a) {
                        b(null, a)
                    }, function(a) {
                        b(a)
                    })
                }
                var A = A || a.indexedDB || a.webkitIndexedDB || a.mozIndexedDB || a.OIndexedDB || a.msIndexedDB;
                if (A) {
                    var B, C, D = "local-forage-detect-blob-support",
                        E = {
                            _driver: "asyncStorage",
                            _initStorage: m,
                            iterate: s,
                            getItem: r,
                            setItem: t,
                            removeItem: u,
                            clear: v,
                            length: w,
                            key: x,
                            keys: y
                        };
                    return E
                }
            }("undefined" != typeof window ? window : self);
            b["default"] = c, a.exports = b["default"]
        }, function(a, b, c) {
            "use strict";
            b.__esModule = !0;
            var d = function(a) {
                function b(a) {
                    var b = this,
                        d = {};
                    if (a)
                        for (var e in a) d[e] = a[e];
                    return d.keyPrefix = d.name + "/", d.storeName !== b._defaultConfig.storeName && (d.keyPrefix += d.storeName + "/"), b._dbInfo = d, new Promise(function(a, b) {
                        a(c(3))
                    }).then(function(a) {
                        return d.serializer = a, Promise.resolve()
                    })
                }

                function d(a) {
                    var b = this,
                        c = b.ready().then(function() {
                            for (var a = b._dbInfo.keyPrefix, c = m.length - 1; c >= 0; c--) {
                                var d = m.key(c);
                                0 === d.indexOf(a) && m.removeItem(d)
                            }
                        });
                    return l(c, a), c
                }

                function e(b, c) {
                    var d = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var e = d.ready().then(function() {
                        var a = d._dbInfo,
                            c = m.getItem(a.keyPrefix + b);
                        return c && (c = a.serializer.deserialize(c)), c
                    });
                    return l(e, c), e
                }

                function f(a, b) {
                    var c = this,
                        d = c.ready().then(function() {
                            for (var b = c._dbInfo, d = b.keyPrefix, e = d.length, f = m.length, g = 1, h = 0; f > h; h++) {
                                var i = m.key(h);
                                if (0 === i.indexOf(d)) {
                                    var j = m.getItem(i);
                                    if (j && (j = b.serializer.deserialize(j)), j = a(j, i.substring(e), g++), void 0 !== j) return j
                                }
                            }
                        });
                    return l(d, b), d
                }

                function g(a, b) {
                    var c = this,
                        d = c.ready().then(function() {
                            var b, d = c._dbInfo;
                            try {
                                b = m.key(a)
                            } catch (e) {
                                b = null
                            }
                            return b && (b = b.substring(d.keyPrefix.length)), b
                        });
                    return l(d, b), d
                }

                function h(a) {
                    var b = this,
                        c = b.ready().then(function() {
                            for (var a = b._dbInfo, c = m.length, d = [], e = 0; c > e; e++) 0 === m.key(e).indexOf(a.keyPrefix) && d.push(m.key(e).substring(a.keyPrefix.length));
                            return d
                        });
                    return l(c, a), c
                }

                function i(a) {
                    var b = this,
                        c = b.keys().then(function(a) {
                            return a.length
                        });
                    return l(c, a), c
                }

                function j(b, c) {
                    var d = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var e = d.ready().then(function() {
                        var a = d._dbInfo;
                        m.removeItem(a.keyPrefix + b)
                    });
                    return l(e, c), e
                }

                function k(b, c, d) {
                    var e = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var f = e.ready().then(function() {
                        void 0 === c && (c = null);
                        var a = c;
                        return new Promise(function(d, f) {
                            var g = e._dbInfo;
                            g.serializer.serialize(c, function(c, e) {
                                if (e) f(e);
                                else try {
                                    m.setItem(g.keyPrefix + b, c), d(a)
                                } catch (h) {
                                    ("QuotaExceededError" === h.name || "NS_ERROR_DOM_QUOTA_REACHED" === h.name) && f(h), f(h)
                                }
                            })
                        })
                    });
                    return l(f, d), f
                }

                function l(a, b) {
                    b && a.then(function(a) {
                        b(null, a)
                    }, function(a) {
                        b(a)
                    })
                }
                var m = null;
                try {
                    if (!(a.localStorage && "setItem" in a.localStorage)) return;
                    m = a.localStorage
                } catch (n) {
                    return
                }
                var o = {
                    _driver: "localStorageWrapper",
                    _initStorage: b,
                    iterate: f,
                    getItem: e,
                    setItem: k,
                    removeItem: j,
                    clear: d,
                    length: i,
                    key: g,
                    keys: h
                };
                return o
            }("undefined" != typeof window ? window : self);
            b["default"] = d, a.exports = b["default"]
        }, function(a, b) {
            "use strict";
            b.__esModule = !0;
            var c = function(a) {
                function b(b, c) {
                    b = b || [], c = c || {};
                    try {
                        return new Blob(b, c)
                    } catch (d) {
                        if ("TypeError" !== d.name) throw d;
                        for (var e = a.BlobBuilder || a.MSBlobBuilder || a.MozBlobBuilder || a.WebKitBlobBuilder, f = new e, g = 0; g < b.length; g += 1) f.append(b[g]);
                        return f.getBlob(c.type)
                    }
                }

                function c(a, b) {
                    var c = "";
                    if (a && (c = a.toString()), a && ("[object ArrayBuffer]" === a.toString() || a.buffer && "[object ArrayBuffer]" === a.buffer.toString())) {
                        var d, e = j;
                        a instanceof ArrayBuffer ? (d = a, e += l) : (d = a.buffer, "[object Int8Array]" === c ? e += n : "[object Uint8Array]" === c ? e += o : "[object Uint8ClampedArray]" === c ? e += p : "[object Int16Array]" === c ? e += q : "[object Uint16Array]" === c ? e += s : "[object Int32Array]" === c ? e += r : "[object Uint32Array]" === c ? e += t : "[object Float32Array]" === c ? e += u : "[object Float64Array]" === c ? e += v : b(new Error("Failed to get type for BinaryArray"))), b(e + f(d))
                    } else if ("[object Blob]" === c) {
                        var g = new FileReader;
                        g.onload = function() {
                            var c = h + a.type + "~" + f(this.result);
                            b(j + m + c)
                        }, g.readAsArrayBuffer(a)
                    } else try {
                        b(JSON.stringify(a))
                    } catch (i) {
                        console.error("Couldn't convert value into a JSON string: ", a), b(null, i)
                    }
                }

                function d(a) {
                    if (a.substring(0, k) !== j) return JSON.parse(a);
                    var c, d = a.substring(w),
                        f = a.substring(k, w);
                    if (f === m && i.test(d)) {
                        var g = d.match(i);
                        c = g[1], d = d.substring(g[0].length)
                    }
                    var h = e(d);
                    switch (f) {
                        case l:
                            return h;
                        case m:
                            return b([h], {
                                type: c
                            });
                        case n:
                            return new Int8Array(h);
                        case o:
                            return new Uint8Array(h);
                        case p:
                            return new Uint8ClampedArray(h);
                        case q:
                            return new Int16Array(h);
                        case s:
                            return new Uint16Array(h);
                        case r:
                            return new Int32Array(h);
                        case t:
                            return new Uint32Array(h);
                        case u:
                            return new Float32Array(h);
                        case v:
                            return new Float64Array(h);
                        default:
                            throw new Error("Unkown type: " + f)
                    }
                }

                function e(a) {
                    var b, c, d, e, f, h = .75 * a.length,
                        i = a.length,
                        j = 0;
                    "=" === a[a.length - 1] && (h--, "=" === a[a.length - 2] && h--);
                    var k = new ArrayBuffer(h),
                        l = new Uint8Array(k);
                    for (b = 0; i > b; b += 4) c = g.indexOf(a[b]), d = g.indexOf(a[b + 1]), e = g.indexOf(a[b + 2]), f = g.indexOf(a[b + 3]), l[j++] = c << 2 | d >> 4, l[j++] = (15 & d) << 4 | e >> 2, l[j++] = (3 & e) << 6 | 63 & f;
                    return k
                }

                function f(a) {
                    var b, c = new Uint8Array(a),
                        d = "";
                    for (b = 0; b < c.length; b += 3) d += g[c[b] >> 2], d += g[(3 & c[b]) << 4 | c[b + 1] >> 4], d += g[(15 & c[b + 1]) << 2 | c[b + 2] >> 6], d += g[63 & c[b + 2]];
                    return c.length % 3 === 2 ? d = d.substring(0, d.length - 1) + "=" : c.length % 3 === 1 && (d = d.substring(0, d.length - 2) + "=="), d
                }
                var g = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                    h = "~~local_forage_type~",
                    i = /^~~local_forage_type~([^~]+)~/,
                    j = "__lfsc__:",
                    k = j.length,
                    l = "arbf",
                    m = "blob",
                    n = "si08",
                    o = "ui08",
                    p = "uic8",
                    q = "si16",
                    r = "si32",
                    s = "ur16",
                    t = "ui32",
                    u = "fl32",
                    v = "fl64",
                    w = k + l.length,
                    x = {
                        serialize: c,
                        deserialize: d,
                        stringToBuffer: e,
                        bufferToString: f
                    };
                return x
            }("undefined" != typeof window ? window : self);
            b["default"] = c, a.exports = b["default"]
        }, function(a, b, c) {
            "use strict";
            b.__esModule = !0;
            var d = function(a) {
                function b(a) {
                    var b = this,
                        d = {
                            db: null
                        };
                    if (a)
                        for (var e in a) d[e] = "string" != typeof a[e] ? a[e].toString() : a[e];
                    var f = new Promise(function(a, c) {
                        try {
                            d.db = m(d.name, String(d.version), d.description, d.size)
                        } catch (e) {
                            return c(e)
                        }
                        d.db.transaction(function(e) {
                            e.executeSql("CREATE TABLE IF NOT EXISTS " + d.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], function() {
                                b._dbInfo = d, a()
                            }, function(a, b) {
                                c(b)
                            })
                        })
                    });
                    return new Promise(function(a, b) {
                        a(c(3))
                    }).then(function(a) {
                        return d.serializer = a, f
                    })
                }

                function d(b, c) {
                    var d = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var e = new Promise(function(a, c) {
                        d.ready().then(function() {
                            var e = d._dbInfo;
                            e.db.transaction(function(d) {
                                d.executeSql("SELECT * FROM " + e.storeName + " WHERE key = ? LIMIT 1", [b], function(b, c) {
                                    var d = c.rows.length ? c.rows.item(0).value : null;
                                    d && (d = e.serializer.deserialize(d)), a(d)
                                }, function(a, b) {
                                    c(b)
                                })
                            })
                        })["catch"](c)
                    });
                    return l(e, c), e
                }

                function e(a, b) {
                    var c = this,
                        d = new Promise(function(b, d) {
                            c.ready().then(function() {
                                var e = c._dbInfo;
                                e.db.transaction(function(c) {
                                    c.executeSql("SELECT * FROM " + e.storeName, [], function(c, d) {
                                        for (var f = d.rows, g = f.length, h = 0; g > h; h++) {
                                            var i = f.item(h),
                                                j = i.value;
                                            if (j && (j = e.serializer.deserialize(j)), j = a(j, i.key, h + 1), void 0 !== j) return void b(j)
                                        }
                                        b()
                                    }, function(a, b) {
                                        d(b)
                                    })
                                })
                            })["catch"](d)
                        });
                    return l(d, b), d
                }

                function f(b, c, d) {
                    var e = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var f = new Promise(function(a, d) {
                        e.ready().then(function() {
                            void 0 === c && (c = null);
                            var f = c,
                                g = e._dbInfo;
                            g.serializer.serialize(c, function(c, e) {
                                e ? d(e) : g.db.transaction(function(e) {
                                    e.executeSql("INSERT OR REPLACE INTO " + g.storeName + " (key, value) VALUES (?, ?)", [b, c], function() {
                                        a(f)
                                    }, function(a, b) {
                                        d(b)
                                    })
                                }, function(a) {
                                    a.code === a.QUOTA_ERR && d(a)
                                })
                            })
                        })["catch"](d)
                    });
                    return l(f, d), f
                }

                function g(b, c) {
                    var d = this;
                    "string" != typeof b && (a.console.warn(b + " used as a key, but it is not a string."), b = String(b));
                    var e = new Promise(function(a, c) {
                        d.ready().then(function() {
                            var e = d._dbInfo;
                            e.db.transaction(function(d) {
                                d.executeSql("DELETE FROM " + e.storeName + " WHERE key = ?", [b], function() {
                                    a()
                                }, function(a, b) {
                                    c(b)
                                })
                            })
                        })["catch"](c)
                    });
                    return l(e, c), e
                }

                function h(a) {
                    var b = this,
                        c = new Promise(function(a, c) {
                            b.ready().then(function() {
                                var d = b._dbInfo;
                                d.db.transaction(function(b) {
                                    b.executeSql("DELETE FROM " + d.storeName, [], function() {
                                        a()
                                    }, function(a, b) {
                                        c(b)
                                    })
                                })
                            })["catch"](c)
                        });
                    return l(c, a), c
                }

                function i(a) {
                    var b = this,
                        c = new Promise(function(a, c) {
                            b.ready().then(function() {
                                var d = b._dbInfo;
                                d.db.transaction(function(b) {
                                    b.executeSql("SELECT COUNT(key) as c FROM " + d.storeName, [], function(b, c) {
                                        var d = c.rows.item(0).c;
                                        a(d)
                                    }, function(a, b) {
                                        c(b)
                                    })
                                })
                            })["catch"](c)
                        });
                    return l(c, a), c
                }

                function j(a, b) {
                    var c = this,
                        d = new Promise(function(b, d) {
                            c.ready().then(function() {
                                var e = c._dbInfo;
                                e.db.transaction(function(c) {
                                    c.executeSql("SELECT key FROM " + e.storeName + " WHERE id = ? LIMIT 1", [a + 1], function(a, c) {
                                        var d = c.rows.length ? c.rows.item(0).key : null;
                                        b(d)
                                    }, function(a, b) {
                                        d(b)
                                    })
                                })
                            })["catch"](d)
                        });
                    return l(d, b), d
                }

                function k(a) {
                    var b = this,
                        c = new Promise(function(a, c) {
                            b.ready().then(function() {
                                var d = b._dbInfo;
                                d.db.transaction(function(b) {
                                    b.executeSql("SELECT key FROM " + d.storeName, [], function(b, c) {
                                        for (var d = [], e = 0; e < c.rows.length; e++) d.push(c.rows.item(e).key);
                                        a(d)
                                    }, function(a, b) {
                                        c(b)
                                    })
                                })
                            })["catch"](c)
                        });
                    return l(c, a), c
                }

                function l(a, b) {
                    b && a.then(function(a) {
                        b(null, a)
                    }, function(a) {
                        b(a)
                    })
                }
                var m = a.openDatabase;
                if (m) {
                    var n = {
                        _driver: "webSQLStorage",
                        _initStorage: b,
                        iterate: e,
                        getItem: d,
                        setItem: f,
                        removeItem: g,
                        clear: h,
                        length: i,
                        key: j,
                        keys: k
                    };
                    return n
                }
            }("undefined" != typeof window ? window : self);
            b["default"] = d, a.exports = b["default"]
        }])
    });
} catch (e) {
    localForageInitFailed = true;
}
cr.plugins_.LocalStorage = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var currentKey = "";
    var lastValue = "";
    var keyNamesList = [];
    var errorMessage = "";

    function getErrorString(err) {
        if (!err)
            return "unknown error";
        else if (typeof err === "string")
            return err;
        else if (typeof err.message === "string")
            return err.message;
        else if (typeof err.name === "string")
            return err.name;
        else if (typeof err.data === "string")
            return err.data;
        else
            return "unknown error";
    };

    function TriggerStorageError(self, msg) {
        errorMessage = msg;
        self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
    };
    var prefix = "";
    var is_arcade = (typeof window["is_scirra_arcade"] !== "undefined");
    if (is_arcade)
        prefix = "sa" + window["scirra_arcade_id"] + "_";

    function hasRequiredPrefix(key) {
        if (!prefix)
            return true;
        return key.substr(0, prefix.length) === prefix;
    };

    function removePrefix(key) {
        if (!prefix)
            return key;
        if (hasRequiredPrefix(key))
            return key.substr(prefix.length);
    };
    var pluginProto = cr.plugins_.LocalStorage.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    instanceProto.onCreate = function() {
        this.pendingSets = 0; // number of pending 'Set item' actions
        this.pendingGets = 0; // number of pending 'Get item' actions
    };
    instanceProto.onDestroy = function() {};
    instanceProto.saveToJSON = function() {
        return {};
    };
    instanceProto.loadFromJSON = function(o) {};
    var debugDataChanged = true;

    function Cnds() {};
    Cnds.prototype.OnItemSet = function(key) {
        return currentKey === key;
    };
    Cnds.prototype.OnAnyItemSet = function() {
        return true;
    };
    Cnds.prototype.OnItemGet = function(key) {
        return currentKey === key;
    };
    Cnds.prototype.OnAnyItemGet = function() {
        return true;
    };
    Cnds.prototype.OnItemRemoved = function(key) {
        return currentKey === key;
    };
    Cnds.prototype.OnAnyItemRemoved = function() {
        return true;
    };
    Cnds.prototype.OnCleared = function() {
        return true;
    };
    Cnds.prototype.OnAllKeyNamesLoaded = function() {
        return true;
    };
    Cnds.prototype.OnError = function() {
        return true;
    };
    Cnds.prototype.OnItemExists = function(key) {
        return currentKey === key;
    };
    Cnds.prototype.OnItemMissing = function(key) {
        return currentKey === key;
    };
    Cnds.prototype.CompareKey = function(cmp, key) {
        return cr.do_cmp(currentKey, cmp, key);
    };
    Cnds.prototype.CompareValue = function(cmp, v) {
        return cr.do_cmp(lastValue, cmp, v);
    };
    Cnds.prototype.IsProcessingSets = function() {
        return this.pendingSets > 0;
    };
    Cnds.prototype.IsProcessingGets = function() {
        return this.pendingGets > 0;
    };
    Cnds.prototype.OnAllSetsComplete = function() {
        return true;
    };
    Cnds.prototype.OnAllGetsComplete = function() {
        return true;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetItem = function(keyNoPrefix, value) {
        if (localForageInitFailed) {
            TriggerStorageError(this, "storage failed to initialise - may be disabled in browser settings");
            return;
        }
        var keyPrefix = prefix + keyNoPrefix;
        this.pendingSets++;
        var self = this;
        localforage["setItem"](keyPrefix, value, function(err, valueSet) {
            debugDataChanged = true;
            self.pendingSets--;
            if (err) {
                errorMessage = getErrorString(err);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
            } else {
                currentKey = keyNoPrefix;
                lastValue = valueSet;
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAnyItemSet, self);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemSet, self);
                currentKey = "";
                lastValue = "";
            }
            if (self.pendingSets === 0) {
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAllSetsComplete, self);
            }
        });
    };
    Acts.prototype.GetItem = function(keyNoPrefix) {
        if (localForageInitFailed) {
            TriggerStorageError(this, "storage failed to initialise - may be disabled in browser settings");
            return;
        }
        var keyPrefix = prefix + keyNoPrefix;
        this.pendingGets++;
        var self = this;
        localforage["getItem"](keyPrefix, function(err, value) {
            self.pendingGets--;
            if (err) {
                errorMessage = getErrorString(err);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
            } else {
                currentKey = keyNoPrefix;
                lastValue = value;
                if (typeof lastValue === "undefined" || lastValue === null)
                    lastValue = "";
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAnyItemGet, self);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemGet, self);
                currentKey = "";
                lastValue = "";
            }
            if (self.pendingGets === 0) {
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAllGetsComplete, self);
            }
        });
    };
    Acts.prototype.CheckItemExists = function(keyNoPrefix) {
        if (localForageInitFailed) {
            TriggerStorageError(this, "storage failed to initialise - may be disabled in browser settings");
            return;
        }
        var keyPrefix = prefix + keyNoPrefix;
        var self = this;
        localforage["getItem"](keyPrefix, function(err, value) {
            if (err) {
                errorMessage = getErrorString(err);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
            } else {
                currentKey = keyNoPrefix;
                if (value === null) // null value indicates key missing
                {
                    lastValue = ""; // prevent ItemValue meaning anything
                    self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemMissing, self);
                } else {
                    lastValue = value; // make available to ItemValue expression
                    self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemExists, self);
                }
                currentKey = "";
                lastValue = "";
            }
        });
    };
    Acts.prototype.RemoveItem = function(keyNoPrefix) {
        if (localForageInitFailed) {
            TriggerStorageError(this, "storage failed to initialise - may be disabled in browser settings");
            return;
        }
        var keyPrefix = prefix + keyNoPrefix;
        var self = this;
        localforage["removeItem"](keyPrefix, function(err) {
            debugDataChanged = true;
            if (err) {
                errorMessage = getErrorString(err);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
            } else {
                currentKey = keyNoPrefix;
                lastValue = "";
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAnyItemRemoved, self);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnItemRemoved, self);
                currentKey = "";
            }
        });
    };
    Acts.prototype.ClearStorage = function() {
        if (localForageInitFailed) {
            TriggerStorageError(this, "storage failed to initialise - may be disabled in browser settings");
            return;
        }
        if (is_arcade)
            return;
        var self = this;
        localforage["clear"](function(err) {
            debugDataChanged = true;
            if (err) {
                errorMessage = getErrorString(err);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
            } else {
                currentKey = "";
                lastValue = "";
                cr.clearArray(keyNamesList);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnCleared, self);
            }
        });
    };
    Acts.prototype.GetAllKeyNames = function() {
        if (localForageInitFailed) {
            TriggerStorageError(this, "storage failed to initialise - may be disabled in browser settings");
            return;
        }
        var self = this;
        localforage["keys"](function(err, keyList) {
            var i, len, k;
            if (err) {
                errorMessage = getErrorString(err);
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnError, self);
            } else {
                cr.clearArray(keyNamesList);
                for (i = 0, len = keyList.length; i < len; ++i) {
                    k = keyList[i];
                    if (!hasRequiredPrefix(k))
                        continue;
                    keyNamesList.push(removePrefix(k));
                }
                self.runtime.trigger(cr.plugins_.LocalStorage.prototype.cnds.OnAllKeyNamesLoaded, self);
            }
        });
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.ItemValue = function(ret) {
        ret.set_any(lastValue);
    };
    Exps.prototype.Key = function(ret) {
        ret.set_string(currentKey);
    };
    Exps.prototype.KeyCount = function(ret) {
        ret.set_int(keyNamesList.length);
    };
    Exps.prototype.KeyAt = function(ret, i) {
        i = Math.floor(i);
        if (i < 0 || i >= keyNamesList.length) {
            ret.set_string("");
            return;
        }
        ret.set_string(keyNamesList[i]);
    };
    Exps.prototype.ErrorMessage = function(ret) {
        ret.set_string(errorMessage);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Particles = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Particles.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {
        if (this.is_family)
            return;
        this.texture_img = new Image();
        this.texture_img.cr_filesize = this.texture_filesize;
        this.webGL_texture = null;
        this.runtime.waitForImageLoad(this.texture_img, this.texture_file);
    };
    typeProto.onLostWebGLContext = function() {
        if (this.is_family)
            return;
        this.webGL_texture = null;
    };
    typeProto.onRestoreWebGLContext = function() {
        if (this.is_family || !this.instances.length)
            return;
        if (!this.webGL_texture) {
            this.webGL_texture = this.runtime.glwrap.loadTexture(this.texture_img, true, this.runtime.linearSampling, this.texture_pixelformat);
        }
    };
    typeProto.loadTextures = function() {
        if (this.is_family || this.webGL_texture || !this.runtime.glwrap)
            return;
        this.webGL_texture = this.runtime.glwrap.loadTexture(this.texture_img, true, this.runtime.linearSampling, this.texture_pixelformat);
    };
    typeProto.unloadTextures = function() {
        if (this.is_family || this.instances.length || !this.webGL_texture)
            return;
        this.runtime.glwrap.deleteTexture(this.webGL_texture);
        this.webGL_texture = null;
    };
    typeProto.preloadCanvas2D = function(ctx) {
        ctx.drawImage(this.texture_img, 0, 0);
    };

    function Particle(owner) {
        this.owner = owner;
        this.active = false;
        this.x = 0;
        this.y = 0;
        this.speed = 0;
        this.angle = 0;
        this.opacity = 1;
        this.grow = 0;
        this.size = 0;
        this.gs = 0; // gravity speed
        this.age = 0;
        cr.seal(this);
    };
    Particle.prototype.init = function() {
        var owner = this.owner;
        this.x = owner.x - (owner.xrandom / 2) + (Math.random() * owner.xrandom);
        this.y = owner.y - (owner.yrandom / 2) + (Math.random() * owner.yrandom);
        this.speed = owner.initspeed - (owner.speedrandom / 2) + (Math.random() * owner.speedrandom);
        this.angle = owner.angle - (owner.spraycone / 2) + (Math.random() * owner.spraycone);
        this.opacity = owner.initopacity;
        this.size = owner.initsize - (owner.sizerandom / 2) + (Math.random() * owner.sizerandom);
        this.grow = owner.growrate - (owner.growrandom / 2) + (Math.random() * owner.growrandom);
        this.gs = 0;
        this.age = 0;
    };
    Particle.prototype.tick = function(dt) {
        var owner = this.owner;
        this.x += Math.cos(this.angle) * this.speed * dt;
        this.y += Math.sin(this.angle) * this.speed * dt;
        this.y += this.gs * dt;
        this.speed += owner.acc * dt;
        this.size += this.grow * dt;
        this.gs += owner.g * dt;
        this.age += dt;
        if (this.size < 1) {
            this.active = false;
            return;
        }
        if (owner.lifeanglerandom !== 0)
            this.angle += (Math.random() * owner.lifeanglerandom * dt) - (owner.lifeanglerandom * dt / 2);
        if (owner.lifespeedrandom !== 0)
            this.speed += (Math.random() * owner.lifespeedrandom * dt) - (owner.lifespeedrandom * dt / 2);
        if (owner.lifeopacityrandom !== 0) {
            this.opacity += (Math.random() * owner.lifeopacityrandom * dt) - (owner.lifeopacityrandom * dt / 2);
            if (this.opacity < 0)
                this.opacity = 0;
            else if (this.opacity > 1)
                this.opacity = 1;
        }
        if (owner.destroymode <= 1 && this.age >= owner.timeout) {
            this.active = false;
        }
        if (owner.destroymode === 2 && this.speed <= 0) {
            this.active = false;
        }
    };
    Particle.prototype.draw = function(ctx) {
        var curopacity = this.owner.opacity * this.opacity;
        if (curopacity === 0)
            return;
        if (this.owner.destroymode === 0)
            curopacity *= 1 - (this.age / this.owner.timeout);
        ctx.globalAlpha = curopacity;
        var drawx = this.x - this.size / 2;
        var drawy = this.y - this.size / 2;
        if (this.owner.runtime.pixel_rounding) {
            drawx = (drawx + 0.5) | 0;
            drawy = (drawy + 0.5) | 0;
        }
        ctx.drawImage(this.owner.type.texture_img, drawx, drawy, this.size, this.size);
    };
    Particle.prototype.drawGL = function(glw) {
        var curopacity = this.owner.opacity * this.opacity;
        if (this.owner.destroymode === 0)
            curopacity *= 1 - (this.age / this.owner.timeout);
        var drawsize = this.size;
        var scaleddrawsize = drawsize * this.owner.particlescale;
        var drawx = this.x - drawsize / 2;
        var drawy = this.y - drawsize / 2;
        if (this.owner.runtime.pixel_rounding) {
            drawx = (drawx + 0.5) | 0;
            drawy = (drawy + 0.5) | 0;
        }
        if (scaleddrawsize < 1 || curopacity === 0)
            return;
        if (scaleddrawsize < glw.minPointSize || scaleddrawsize > glw.maxPointSize) {
            glw.setOpacity(curopacity);
            glw.quad(drawx, drawy, drawx + drawsize, drawy, drawx + drawsize, drawy + drawsize, drawx, drawy + drawsize);
        } else
            glw.point(this.x, this.y, scaleddrawsize, curopacity);
    };
    Particle.prototype.left = function() {
        return this.x - this.size / 2;
    };
    Particle.prototype.right = function() {
        return this.x + this.size / 2;
    };
    Particle.prototype.top = function() {
        return this.y - this.size / 2;
    };
    Particle.prototype.bottom = function() {
        return this.y + this.size / 2;
    };
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    var deadparticles = [];
    instanceProto.onCreate = function() {
        var props = this.properties;
        this.rate = props[0];
        this.spraycone = cr.to_radians(props[1]);
        this.spraytype = props[2]; // 0 = continuous, 1 = one-shot
        this.spraying = true; // for continuous mode only
        this.initspeed = props[3];
        this.initsize = props[4];
        this.initopacity = props[5] / 100.0;
        this.growrate = props[6];
        this.xrandom = props[7];
        this.yrandom = props[8];
        this.speedrandom = props[9];
        this.sizerandom = props[10];
        this.growrandom = props[11];
        this.acc = props[12];
        this.g = props[13];
        this.lifeanglerandom = props[14];
        this.lifespeedrandom = props[15];
        this.lifeopacityrandom = props[16];
        this.destroymode = props[17]; // 0 = fade, 1 = timeout, 2 = stopped
        this.timeout = props[18];
        this.particleCreateCounter = 0;
        this.particlescale = 1;
        this.particleBoxLeft = this.x;
        this.particleBoxTop = this.y;
        this.particleBoxRight = this.x;
        this.particleBoxBottom = this.y;
        this.add_bbox_changed_callback(function(self) {
            self.bbox.set(self.particleBoxLeft, self.particleBoxTop, self.particleBoxRight, self.particleBoxBottom);
            self.bquad.set_from_rect(self.bbox);
            self.bbox_changed = false;
            self.update_collision_cell();
            self.update_render_cell();
        });
        if (!this.recycled)
            this.particles = [];
        this.runtime.tickMe(this);
        this.type.loadTextures();
        if (this.spraytype === 1) {
            for (var i = 0; i < this.rate; i++)
                this.allocateParticle().opacity = 0;
        }
        this.first_tick = true; // for re-init'ing one-shot particles on first tick so they assume any new angle/position
    };
    instanceProto.saveToJSON = function() {
        var o = {
            "r": this.rate,
            "sc": this.spraycone,
            "st": this.spraytype,
            "s": this.spraying,
            "isp": this.initspeed,
            "isz": this.initsize,
            "io": this.initopacity,
            "gr": this.growrate,
            "xr": this.xrandom,
            "yr": this.yrandom,
            "spr": this.speedrandom,
            "szr": this.sizerandom,
            "grnd": this.growrandom,
            "acc": this.acc,
            "g": this.g,
            "lar": this.lifeanglerandom,
            "lsr": this.lifespeedrandom,
            "lor": this.lifeopacityrandom,
            "dm": this.destroymode,
            "to": this.timeout,
            "pcc": this.particleCreateCounter,
            "ft": this.first_tick,
            "p": []
        };
        var i, len, p;
        var arr = o["p"];
        for (i = 0, len = this.particles.length; i < len; i++) {
            p = this.particles[i];
            arr.push([p.x, p.y, p.speed, p.angle, p.opacity, p.grow, p.size, p.gs, p.age]);
        }
        return o;
    };
    instanceProto.loadFromJSON = function(o) {
        this.rate = o["r"];
        this.spraycone = o["sc"];
        this.spraytype = o["st"];
        this.spraying = o["s"];
        this.initspeed = o["isp"];
        this.initsize = o["isz"];
        this.initopacity = o["io"];
        this.growrate = o["gr"];
        this.xrandom = o["xr"];
        this.yrandom = o["yr"];
        this.speedrandom = o["spr"];
        this.sizerandom = o["szr"];
        this.growrandom = o["grnd"];
        this.acc = o["acc"];
        this.g = o["g"];
        this.lifeanglerandom = o["lar"];
        this.lifespeedrandom = o["lsr"];
        this.lifeopacityrandom = o["lor"];
        this.destroymode = o["dm"];
        this.timeout = o["to"];
        this.particleCreateCounter = o["pcc"];
        this.first_tick = o["ft"];
        deadparticles.push.apply(deadparticles, this.particles);
        cr.clearArray(this.particles);
        var i, len, p, d;
        var arr = o["p"];
        for (i = 0, len = arr.length; i < len; i++) {
            p = this.allocateParticle();
            d = arr[i];
            p.x = d[0];
            p.y = d[1];
            p.speed = d[2];
            p.angle = d[3];
            p.opacity = d[4];
            p.grow = d[5];
            p.size = d[6];
            p.gs = d[7];
            p.age = d[8];
        }
    };
    instanceProto.onDestroy = function() {
        deadparticles.push.apply(deadparticles, this.particles);
        cr.clearArray(this.particles);
    };
    instanceProto.allocateParticle = function() {
        var p;
        if (deadparticles.length) {
            p = deadparticles.pop();
            p.owner = this;
        } else
            p = new Particle(this);
        this.particles.push(p);
        p.active = true;
        return p;
    };
    instanceProto.tick = function() {
        var dt = this.runtime.getDt(this);
        var i, len, p, n, j;
        if (this.spraytype === 0 && this.spraying) {
            this.particleCreateCounter += dt * this.rate;
            n = cr.floor(this.particleCreateCounter);
            this.particleCreateCounter -= n;
            for (i = 0; i < n; i++) {
                p = this.allocateParticle();
                p.init();
            }
        }
        this.particleBoxLeft = this.x;
        this.particleBoxTop = this.y;
        this.particleBoxRight = this.x;
        this.particleBoxBottom = this.y;
        for (i = 0, j = 0, len = this.particles.length; i < len; i++) {
            p = this.particles[i];
            this.particles[j] = p;
            this.runtime.redraw = true;
            if (this.spraytype === 1 && this.first_tick)
                p.init();
            p.tick(dt);
            if (!p.active) {
                deadparticles.push(p);
                continue;
            }
            if (p.left() < this.particleBoxLeft)
                this.particleBoxLeft = p.left();
            if (p.right() > this.particleBoxRight)
                this.particleBoxRight = p.right();
            if (p.top() < this.particleBoxTop)
                this.particleBoxTop = p.top();
            if (p.bottom() > this.particleBoxBottom)
                this.particleBoxBottom = p.bottom();
            j++;
        }
        cr.truncateArray(this.particles, j);
        this.set_bbox_changed();
        this.first_tick = false;
        if (this.spraytype === 1 && this.particles.length === 0)
            this.runtime.DestroyInstance(this);
    };
    instanceProto.draw = function(ctx) {
        var i, len, p, layer = this.layer;
        for (i = 0, len = this.particles.length; i < len; i++) {
            p = this.particles[i];
            if (p.right() >= layer.viewLeft && p.bottom() >= layer.viewTop && p.left() <= layer.viewRight && p.top() <= layer.viewBottom) {
                p.draw(ctx);
            }
        }
    };
    instanceProto.drawGL = function(glw) {
        this.particlescale = this.layer.getScale();
        glw.setTexture(this.type.webGL_texture);
        var i, len, p, layer = this.layer;
        for (i = 0, len = this.particles.length; i < len; i++) {
            p = this.particles[i];
            if (p.right() >= layer.viewLeft && p.bottom() >= layer.viewTop && p.left() <= layer.viewRight && p.top() <= layer.viewBottom) {
                p.drawGL(glw);
            }
        }
    };

    function Cnds() {};
    Cnds.prototype.IsSpraying = function() {
        return this.spraying;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetSpraying = function(set_) {
        this.spraying = (set_ !== 0);
    };
    Acts.prototype.SetEffect = function(effect) {
        this.blend_mode = effect;
        this.compositeOp = cr.effectToCompositeOp(effect);
        cr.setGLBlend(this, effect, this.runtime.gl);
        this.runtime.redraw = true;
    };
    Acts.prototype.SetRate = function(x) {
        this.rate = x;
        var diff, i;
        if (this.spraytype === 1 && this.first_tick) {
            if (x < this.particles.length) {
                diff = this.particles.length - x;
                for (i = 0; i < diff; i++)
                    deadparticles.push(this.particles.pop());
            } else if (x > this.particles.length) {
                diff = x - this.particles.length;
                for (i = 0; i < diff; i++)
                    this.allocateParticle().opacity = 0;
            }
        }
    };
    Acts.prototype.SetSprayCone = function(x) {
        this.spraycone = cr.to_radians(x);
    };
    Acts.prototype.SetInitSpeed = function(x) {
        this.initspeed = x;
    };
    Acts.prototype.SetInitSize = function(x) {
        this.initsize = x;
    };
    Acts.prototype.SetInitOpacity = function(x) {
        this.initopacity = x / 100;
    };
    Acts.prototype.SetGrowRate = function(x) {
        this.growrate = x;
    };
    Acts.prototype.SetXRandomiser = function(x) {
        this.xrandom = x;
    };
    Acts.prototype.SetYRandomiser = function(x) {
        this.yrandom = x;
    };
    Acts.prototype.SetSpeedRandomiser = function(x) {
        this.speedrandom = x;
    };
    Acts.prototype.SetSizeRandomiser = function(x) {
        this.sizerandom = x;
    };
    Acts.prototype.SetGrowRateRandomiser = function(x) {
        this.growrandom = x;
    };
    Acts.prototype.SetParticleAcc = function(x) {
        this.acc = x;
    };
    Acts.prototype.SetGravity = function(x) {
        this.g = x;
    };
    Acts.prototype.SetAngleRandomiser = function(x) {
        this.lifeanglerandom = x;
    };
    Acts.prototype.SetLifeSpeedRandomiser = function(x) {
        this.lifespeedrandom = x;
    };
    Acts.prototype.SetOpacityRandomiser = function(x) {
        this.lifeopacityrandom = x;
    };
    Acts.prototype.SetTimeout = function(x) {
        this.timeout = x;
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.ParticleCount = function(ret) {
        ret.set_int(this.particles.length);
    };
    Exps.prototype.Rate = function(ret) {
        ret.set_float(this.rate);
    };
    Exps.prototype.SprayCone = function(ret) {
        ret.set_float(cr.to_degrees(this.spraycone));
    };
    Exps.prototype.InitSpeed = function(ret) {
        ret.set_float(this.initspeed);
    };
    Exps.prototype.InitSize = function(ret) {
        ret.set_float(this.initsize);
    };
    Exps.prototype.InitOpacity = function(ret) {
        ret.set_float(this.initopacity * 100);
    };
    Exps.prototype.InitGrowRate = function(ret) {
        ret.set_float(this.growrate);
    };
    Exps.prototype.XRandom = function(ret) {
        ret.set_float(this.xrandom);
    };
    Exps.prototype.YRandom = function(ret) {
        ret.set_float(this.yrandom);
    };
    Exps.prototype.InitSpeedRandom = function(ret) {
        ret.set_float(this.speedrandom);
    };
    Exps.prototype.InitSizeRandom = function(ret) {
        ret.set_float(this.sizerandom);
    };
    Exps.prototype.InitGrowRandom = function(ret) {
        ret.set_float(this.growrandom);
    };
    Exps.prototype.ParticleAcceleration = function(ret) {
        ret.set_float(this.acc);
    };
    Exps.prototype.Gravity = function(ret) {
        ret.set_float(this.g);
    };
    Exps.prototype.ParticleAngleRandom = function(ret) {
        ret.set_float(this.lifeanglerandom);
    };
    Exps.prototype.ParticleSpeedRandom = function(ret) {
        ret.set_float(this.lifespeedrandom);
    };
    Exps.prototype.ParticleOpacityRandom = function(ret) {
        ret.set_float(this.lifeopacityrandom);
    };
    Exps.prototype.Timeout = function(ret) {
        ret.set_float(this.timeout);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Sprite = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Sprite.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;

    function frame_getDataUri() {
        if (this.datauri.length === 0) {
            var tmpcanvas = document.createElement("canvas");
            tmpcanvas.width = this.width;
            tmpcanvas.height = this.height;
            var tmpctx = tmpcanvas.getContext("2d");
            if (this.spritesheeted) {
                tmpctx.drawImage(this.texture_img, this.offx, this.offy, this.width, this.height,
                    0, 0, this.width, this.height);
            } else {
                tmpctx.drawImage(this.texture_img, 0, 0, this.width, this.height);
            }
            this.datauri = tmpcanvas.toDataURL("image/png");
        }
        return this.datauri;
    };
    typeProto.onCreate = function() {
        if (this.is_family)
            return;
        var i, leni, j, lenj;
        var anim, frame, animobj, frameobj, wt, uv;
        this.all_frames = [];
        this.has_loaded_textures = false;
        for (i = 0, leni = this.animations.length; i < leni; i++) {
            anim = this.animations[i];
            animobj = {};
            animobj.name = anim[0];
            animobj.speed = anim[1];
            animobj.loop = anim[2];
            animobj.repeatcount = anim[3];
            animobj.repeatto = anim[4];
            animobj.pingpong = anim[5];
            animobj.sid = anim[6];
            animobj.frames = [];
            for (j = 0, lenj = anim[7].length; j < lenj; j++) {
                frame = anim[7][j];
                frameobj = {};
                frameobj.texture_file = frame[0];
                frameobj.texture_filesize = frame[1];
                frameobj.offx = frame[2];
                frameobj.offy = frame[3];
                frameobj.width = frame[4];
                frameobj.height = frame[5];
                frameobj.duration = frame[6];
                frameobj.hotspotX = frame[7];
                frameobj.hotspotY = frame[8];
                frameobj.image_points = frame[9];
                frameobj.poly_pts = frame[10];
                frameobj.pixelformat = frame[11];
                frameobj.spritesheeted = (frameobj.width !== 0);
                frameobj.datauri = ""; // generated on demand and cached
                frameobj.getDataUri = frame_getDataUri;
                uv = {};
                uv.left = 0;
                uv.top = 0;
                uv.right = 1;
                uv.bottom = 1;
                frameobj.sheetTex = uv;
                frameobj.webGL_texture = null;
                wt = this.runtime.findWaitingTexture(frame[0]);
                if (wt) {
                    frameobj.texture_img = wt;
                } else {
                    frameobj.texture_img = new Image();
                    frameobj.texture_img.cr_src = frame[0];
                    frameobj.texture_img.cr_filesize = frame[1];
                    frameobj.texture_img.c2webGL_texture = null;
                    this.runtime.waitForImageLoad(frameobj.texture_img, frame[0]);
                }
                cr.seal(frameobj);
                animobj.frames.push(frameobj);
                this.all_frames.push(frameobj);
            }
            cr.seal(animobj);
            this.animations[i] = animobj; // swap array data for object
        }
    };
    typeProto.updateAllCurrentTexture = function() {
        var i, len, inst;
        for (i = 0, len = this.instances.length; i < len; i++) {
            inst = this.instances[i];
            inst.curWebGLTexture = inst.curFrame.webGL_texture;
        }
    };
    typeProto.onLostWebGLContext = function() {
        if (this.is_family)
            return;
        var i, len, frame;
        for (i = 0, len = this.all_frames.length; i < len; ++i) {
            frame = this.all_frames[i];
            frame.texture_img.c2webGL_texture = null;
            frame.webGL_texture = null;
        }
        this.has_loaded_textures = false;
        this.updateAllCurrentTexture();
    };
    typeProto.onRestoreWebGLContext = function() {
        if (this.is_family || !this.instances.length)
            return;
        var i, len, frame;
        for (i = 0, len = this.all_frames.length; i < len; ++i) {
            frame = this.all_frames[i];
            frame.webGL_texture = this.runtime.glwrap.loadTexture(frame.texture_img, false, this.runtime.linearSampling, frame.pixelformat);
        }
        this.updateAllCurrentTexture();
    };
    typeProto.loadTextures = function() {
        if (this.is_family || this.has_loaded_textures || !this.runtime.glwrap)
            return;
        var i, len, frame;
        for (i = 0, len = this.all_frames.length; i < len; ++i) {
            frame = this.all_frames[i];
            frame.webGL_texture = this.runtime.glwrap.loadTexture(frame.texture_img, false, this.runtime.linearSampling, frame.pixelformat);
        }
        this.has_loaded_textures = true;
    };
    typeProto.unloadTextures = function() {
        if (this.is_family || this.instances.length || !this.has_loaded_textures)
            return;
        var i, len, frame;
        for (i = 0, len = this.all_frames.length; i < len; ++i) {
            frame = this.all_frames[i];
            this.runtime.glwrap.deleteTexture(frame.webGL_texture);
            frame.webGL_texture = null;
        }
        this.has_loaded_textures = false;
    };
    var already_drawn_images = [];
    typeProto.preloadCanvas2D = function(ctx) {
        var i, len, frameimg;
        cr.clearArray(already_drawn_images);
        for (i = 0, len = this.all_frames.length; i < len; ++i) {
            frameimg = this.all_frames[i].texture_img;
            if (already_drawn_images.indexOf(frameimg) !== -1)
                continue;
            ctx.drawImage(frameimg, 0, 0);
            already_drawn_images.push(frameimg);
        }
    };
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
        var poly_pts = this.type.animations[0].frames[0].poly_pts;
        if (this.recycled)
            this.collision_poly.set_pts(poly_pts);
        else
            this.collision_poly = new cr.CollisionPoly(poly_pts);
    };
    var instanceProto = pluginProto.Instance.prototype;
    instanceProto.onCreate = function() {
        this.visible = (this.properties[0] === 0); // 0=visible, 1=invisible
        this.isTicking = false;
        this.inAnimTrigger = false;
        this.collisionsEnabled = (this.properties[3] !== 0);
        this.cur_animation = this.getAnimationByName(this.properties[1]) || this.type.animations[0];
        this.cur_frame = this.properties[2];
        if (this.cur_frame < 0)
            this.cur_frame = 0;
        if (this.cur_frame >= this.cur_animation.frames.length)
            this.cur_frame = this.cur_animation.frames.length - 1;
        var curanimframe = this.cur_animation.frames[this.cur_frame];
        this.collision_poly.set_pts(curanimframe.poly_pts);
        this.hotspotX = curanimframe.hotspotX;
        this.hotspotY = curanimframe.hotspotY;
        this.cur_anim_speed = this.cur_animation.speed;
        this.cur_anim_repeatto = this.cur_animation.repeatto;
        if (!(this.type.animations.length === 1 && this.type.animations[0].frames.length === 1) && this.cur_anim_speed !== 0) {
            this.runtime.tickMe(this);
            this.isTicking = true;
        }
        if (this.recycled)
            this.animTimer.reset();
        else
            this.animTimer = new cr.KahanAdder();
        this.frameStart = this.getNowTime();
        this.animPlaying = true;
        this.animRepeats = 0;
        this.animForwards = true;
        this.animTriggerName = "";
        this.changeAnimName = "";
        this.changeAnimFrom = 0;
        this.changeAnimFrame = -1;
        this.type.loadTextures();
        var i, leni, j, lenj;
        var anim, frame, uv, maintex;
        for (i = 0, leni = this.type.animations.length; i < leni; i++) {
            anim = this.type.animations[i];
            for (j = 0, lenj = anim.frames.length; j < lenj; j++) {
                frame = anim.frames[j];
                if (frame.width === 0) {
                    frame.width = frame.texture_img.width;
                    frame.height = frame.texture_img.height;
                }
                if (frame.spritesheeted) {
                    maintex = frame.texture_img;
                    uv = frame.sheetTex;
                    uv.left = frame.offx / maintex.width;
                    uv.top = frame.offy / maintex.height;
                    uv.right = (frame.offx + frame.width) / maintex.width;
                    uv.bottom = (frame.offy + frame.height) / maintex.height;
                    if (frame.offx === 0 && frame.offy === 0 && frame.width === maintex.width && frame.height === maintex.height) {
                        frame.spritesheeted = false;
                    }
                }
            }
        }
        this.curFrame = this.cur_animation.frames[this.cur_frame];
        this.curWebGLTexture = this.curFrame.webGL_texture;
    };
    instanceProto.saveToJSON = function() {
        var o = {
            "a": this.cur_animation.sid,
            "f": this.cur_frame,
            "cas": this.cur_anim_speed,
            "fs": this.frameStart,
            "ar": this.animRepeats,
            "at": this.animTimer.sum,
            "rt": this.cur_anim_repeatto
        };
        if (!this.animPlaying)
            o["ap"] = this.animPlaying;
        if (!this.animForwards)
            o["af"] = this.animForwards;
        return o;
    };
    instanceProto.loadFromJSON = function(o) {
        var anim = this.getAnimationBySid(o["a"]);
        if (anim)
            this.cur_animation = anim;
        this.cur_frame = o["f"];
        if (this.cur_frame < 0)
            this.cur_frame = 0;
        if (this.cur_frame >= this.cur_animation.frames.length)
            this.cur_frame = this.cur_animation.frames.length - 1;
        this.cur_anim_speed = o["cas"];
        this.frameStart = o["fs"];
        this.animRepeats = o["ar"];
        this.animTimer.reset();
        this.animTimer.sum = o["at"];
        this.animPlaying = o.hasOwnProperty("ap") ? o["ap"] : true;
        this.animForwards = o.hasOwnProperty("af") ? o["af"] : true;
        if (o.hasOwnProperty("rt"))
            this.cur_anim_repeatto = o["rt"];
        else
            this.cur_anim_repeatto = this.cur_animation.repeatto;
        this.curFrame = this.cur_animation.frames[this.cur_frame];
        this.curWebGLTexture = this.curFrame.webGL_texture;
        this.collision_poly.set_pts(this.curFrame.poly_pts);
        this.hotspotX = this.curFrame.hotspotX;
        this.hotspotY = this.curFrame.hotspotY;
    };
    instanceProto.animationFinish = function(reverse) {
        this.cur_frame = reverse ? 0 : this.cur_animation.frames.length - 1;
        this.animPlaying = false;
        this.animTriggerName = this.cur_animation.name;
        this.inAnimTrigger = true;
        this.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnAnyAnimFinished, this);
        this.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnAnimFinished, this);
        this.inAnimTrigger = false;
        this.animRepeats = 0;
    };
    instanceProto.getNowTime = function() {
        return this.animTimer.sum;
    };
    instanceProto.tick = function() {
        this.animTimer.add(this.runtime.getDt(this));
        if (this.changeAnimName.length)
            this.doChangeAnim();
        if (this.changeAnimFrame >= 0)
            this.doChangeAnimFrame();
        var now = this.getNowTime();
        var cur_animation = this.cur_animation;
        var prev_frame = cur_animation.frames[this.cur_frame];
        var next_frame;
        var cur_frame_time = prev_frame.duration / this.cur_anim_speed;
        if (this.animPlaying && now >= this.frameStart + cur_frame_time) {
            if (this.animForwards) {
                this.cur_frame++;
            } else {
                this.cur_frame--;
            }
            this.frameStart += cur_frame_time;
            if (this.cur_frame >= cur_animation.frames.length) {
                if (cur_animation.pingpong) {
                    this.animForwards = false;
                    this.cur_frame = cur_animation.frames.length - 2;
                } else if (cur_animation.loop) {
                    this.cur_frame = this.cur_anim_repeatto;
                } else {
                    this.animRepeats++;
                    if (this.animRepeats >= cur_animation.repeatcount) {
                        this.animationFinish(false);
                    } else {
                        this.cur_frame = this.cur_anim_repeatto;
                    }
                }
            }
            if (this.cur_frame < 0) {
                if (cur_animation.pingpong) {
                    this.cur_frame = 1;
                    this.animForwards = true;
                    if (!cur_animation.loop) {
                        this.animRepeats++;
                        if (this.animRepeats >= cur_animation.repeatcount) {
                            this.animationFinish(true);
                        }
                    }
                } else {
                    if (cur_animation.loop) {
                        this.cur_frame = this.cur_anim_repeatto;
                    } else {
                        this.animRepeats++;
                        if (this.animRepeats >= cur_animation.repeatcount) {
                            this.animationFinish(true);
                        } else {
                            this.cur_frame = this.cur_anim_repeatto;
                        }
                    }
                }
            }
            if (this.cur_frame < 0)
                this.cur_frame = 0;
            else if (this.cur_frame >= cur_animation.frames.length)
                this.cur_frame = cur_animation.frames.length - 1;
            if (now > this.frameStart + (cur_animation.frames[this.cur_frame].duration / this.cur_anim_speed)) {
                this.frameStart = now;
            }
            next_frame = cur_animation.frames[this.cur_frame];
            this.OnFrameChanged(prev_frame, next_frame);
            this.runtime.redraw = true;
        }
    };
    instanceProto.getAnimationByName = function(name_) {
        var i, len, a;
        for (i = 0, len = this.type.animations.length; i < len; i++) {
            a = this.type.animations[i];
            if (cr.equals_nocase(a.name, name_))
                return a;
        }
        return null;
    };
    instanceProto.getAnimationBySid = function(sid_) {
        var i, len, a;
        for (i = 0, len = this.type.animations.length; i < len; i++) {
            a = this.type.animations[i];
            if (a.sid === sid_)
                return a;
        }
        return null;
    };
    instanceProto.doChangeAnim = function() {
        var prev_frame = this.cur_animation.frames[this.cur_frame];
        var anim = this.getAnimationByName(this.changeAnimName);
        this.changeAnimName = "";
        if (!anim)
            return;
        if (cr.equals_nocase(anim.name, this.cur_animation.name) && this.animPlaying)
            return;
        this.cur_animation = anim;
        this.cur_anim_speed = anim.speed;
        this.cur_anim_repeatto = anim.repeatto;
        if (this.cur_frame < 0)
            this.cur_frame = 0;
        if (this.cur_frame >= this.cur_animation.frames.length)
            this.cur_frame = this.cur_animation.frames.length - 1;
        if (this.changeAnimFrom === 1)
            this.cur_frame = 0;
        this.animPlaying = true;
        this.frameStart = this.getNowTime();
        this.animForwards = true;
        this.OnFrameChanged(prev_frame, this.cur_animation.frames[this.cur_frame]);
        this.runtime.redraw = true;
    };
    instanceProto.doChangeAnimFrame = function() {
        var prev_frame = this.cur_animation.frames[this.cur_frame];
        var prev_frame_number = this.cur_frame;
        this.cur_frame = cr.floor(this.changeAnimFrame);
        if (this.cur_frame < 0)
            this.cur_frame = 0;
        if (this.cur_frame >= this.cur_animation.frames.length)
            this.cur_frame = this.cur_animation.frames.length - 1;
        if (prev_frame_number !== this.cur_frame) {
            this.OnFrameChanged(prev_frame, this.cur_animation.frames[this.cur_frame]);
            this.frameStart = this.getNowTime();
            this.runtime.redraw = true;
        }
        this.changeAnimFrame = -1;
    };
    instanceProto.OnFrameChanged = function(prev_frame, next_frame) {
        var oldw = prev_frame.width;
        var oldh = prev_frame.height;
        var neww = next_frame.width;
        var newh = next_frame.height;
        if (oldw != neww)
            this.width *= (neww / oldw);
        if (oldh != newh)
            this.height *= (newh / oldh);
        this.hotspotX = next_frame.hotspotX;
        this.hotspotY = next_frame.hotspotY;
        this.collision_poly.set_pts(next_frame.poly_pts);
        this.set_bbox_changed();
        this.curFrame = next_frame;
        this.curWebGLTexture = next_frame.webGL_texture;
        var i, len, b;
        for (i = 0, len = this.behavior_insts.length; i < len; i++) {
            b = this.behavior_insts[i];
            if (b.onSpriteFrameChanged)
                b.onSpriteFrameChanged(prev_frame, next_frame);
        }
        this.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnFrameChanged, this);
    };
    instanceProto.draw = function(ctx) {
        ctx.globalAlpha = this.opacity;
        var cur_frame = this.curFrame;
        var spritesheeted = cur_frame.spritesheeted;
        var cur_image = cur_frame.texture_img;
        var myx = this.x;
        var myy = this.y;
        var w = this.width;
        var h = this.height;
        if (this.angle === 0 && w >= 0 && h >= 0) {
            myx -= this.hotspotX * w;
            myy -= this.hotspotY * h;
            if (this.runtime.pixel_rounding) {
                myx = Math.round(myx);
                myy = Math.round(myy);
            }
            if (spritesheeted) {
                ctx.drawImage(cur_image, cur_frame.offx, cur_frame.offy, cur_frame.width, cur_frame.height,
                    myx, myy, w, h);
            } else {
                ctx.drawImage(cur_image, myx, myy, w, h);
            }
        } else {
            if (this.runtime.pixel_rounding) {
                myx = Math.round(myx);
                myy = Math.round(myy);
            }
            ctx.save();
            var widthfactor = w > 0 ? 1 : -1;
            var heightfactor = h > 0 ? 1 : -1;
            ctx.translate(myx, myy);
            if (widthfactor !== 1 || heightfactor !== 1)
                ctx.scale(widthfactor, heightfactor);
            ctx.rotate(this.angle * widthfactor * heightfactor);
            var drawx = 0 - (this.hotspotX * cr.abs(w))
            var drawy = 0 - (this.hotspotY * cr.abs(h));
            if (spritesheeted) {
                ctx.drawImage(cur_image, cur_frame.offx, cur_frame.offy, cur_frame.width, cur_frame.height,
                    drawx, drawy, cr.abs(w), cr.abs(h));
            } else {
                ctx.drawImage(cur_image, drawx, drawy, cr.abs(w), cr.abs(h));
            }
            ctx.restore();
        }
        /*
        ctx.strokeStyle = "#f00";
        ctx.lineWidth = 3;
        ctx.beginPath();
        this.collision_poly.cache_poly(this.width, this.height, this.angle);
        var i, len, ax, ay, bx, by;
        for (i = 0, len = this.collision_poly.pts_count; i < len; i++)
        {
        	ax = this.collision_poly.pts_cache[i*2] + this.x;
        	ay = this.collision_poly.pts_cache[i*2+1] + this.y;
        	bx = this.collision_poly.pts_cache[((i+1)%len)*2] + this.x;
        	by = this.collision_poly.pts_cache[((i+1)%len)*2+1] + this.y;
        	ctx.moveTo(ax, ay);
        	ctx.lineTo(bx, by);
        }
        ctx.stroke();
        ctx.closePath();
        */
        /*
        if (this.behavior_insts.length >= 1 && this.behavior_insts[0].draw)
        {
        	this.behavior_insts[0].draw(ctx);
        }
        */
    };
    instanceProto.drawGL_earlyZPass = function(glw) {
        this.drawGL(glw);
    };
    instanceProto.drawGL = function(glw) {
        glw.setTexture(this.curWebGLTexture);
        glw.setOpacity(this.opacity);
        var cur_frame = this.curFrame;
        var q = this.bquad;
        if (this.runtime.pixel_rounding) {
            var ox = Math.round(this.x) - this.x;
            var oy = Math.round(this.y) - this.y;
            if (cur_frame.spritesheeted)
                glw.quadTex(q.tlx + ox, q.tly + oy, q.trx + ox, q.try_ + oy, q.brx + ox, q.bry + oy, q.blx + ox, q.bly + oy, cur_frame.sheetTex);
            else
                glw.quad(q.tlx + ox, q.tly + oy, q.trx + ox, q.try_ + oy, q.brx + ox, q.bry + oy, q.blx + ox, q.bly + oy);
        } else {
            if (cur_frame.spritesheeted)
                glw.quadTex(q.tlx, q.tly, q.trx, q.try_, q.brx, q.bry, q.blx, q.bly, cur_frame.sheetTex);
            else
                glw.quad(q.tlx, q.tly, q.trx, q.try_, q.brx, q.bry, q.blx, q.bly);
        }
    };
    instanceProto.getImagePointIndexByName = function(name_) {
        var cur_frame = this.curFrame;
        var i, len;
        for (i = 0, len = cur_frame.image_points.length; i < len; i++) {
            if (cr.equals_nocase(name_, cur_frame.image_points[i][0]))
                return i;
        }
        return -1;
    };
    instanceProto.getImagePoint = function(imgpt, getX) {
        var cur_frame = this.curFrame;
        var image_points = cur_frame.image_points;
        var index;
        if (cr.is_string(imgpt))
            index = this.getImagePointIndexByName(imgpt);
        else
            index = imgpt - 1; // 0 is origin
        index = cr.floor(index);
        if (index < 0 || index >= image_points.length)
            return getX ? this.x : this.y; // return origin
        var x = (image_points[index][1] - cur_frame.hotspotX) * this.width;
        var y = image_points[index][2];
        y = (y - cur_frame.hotspotY) * this.height;
        var cosa = Math.cos(this.angle);
        var sina = Math.sin(this.angle);
        var x_temp = (x * cosa) - (y * sina);
        y = (y * cosa) + (x * sina);
        x = x_temp;
        x += this.x;
        y += this.y;
        return getX ? x : y;
    };

    function Cnds() {};
    var arrCache = [];

    function allocArr() {
        if (arrCache.length)
            return arrCache.pop();
        else
            return [0, 0, 0];
    };

    function freeArr(a) {
        a[0] = 0;
        a[1] = 0;
        a[2] = 0;
        arrCache.push(a);
    };

    function makeCollKey(a, b) {
        if (a < b)
            return "" + a + "," + b;
        else
            return "" + b + "," + a;
    };

    function collmemory_add(collmemory, a, b, tickcount) {
        var a_uid = a.uid;
        var b_uid = b.uid;
        var key = makeCollKey(a_uid, b_uid);
        if (collmemory.hasOwnProperty(key)) {
            collmemory[key][2] = tickcount;
            return;
        }
        var arr = allocArr();
        arr[0] = a_uid;
        arr[1] = b_uid;
        arr[2] = tickcount;
        collmemory[key] = arr;
    };

    function collmemory_remove(collmemory, a, b) {
        var key = makeCollKey(a.uid, b.uid);
        if (collmemory.hasOwnProperty(key)) {
            freeArr(collmemory[key]);
            delete collmemory[key];
        }
    };

    function collmemory_removeInstance(collmemory, inst) {
        var uid = inst.uid;
        var p, entry;
        for (p in collmemory) {
            if (collmemory.hasOwnProperty(p)) {
                entry = collmemory[p];
                if (entry[0] === uid || entry[1] === uid) {
                    freeArr(collmemory[p]);
                    delete collmemory[p];
                }
            }
        }
    };
    var last_coll_tickcount = -2;

    function collmemory_has(collmemory, a, b) {
        var key = makeCollKey(a.uid, b.uid);
        if (collmemory.hasOwnProperty(key)) {
            last_coll_tickcount = collmemory[key][2];
            return true;
        } else {
            last_coll_tickcount = -2;
            return false;
        }
    };
    var candidates1 = [];
    Cnds.prototype.OnCollision = function(rtype) {
        if (!rtype)
            return false;
        var runtime = this.runtime;
        var cnd = runtime.getCurrentCondition();
        var ltype = cnd.type;
        var collmemory = null;
        if (cnd.extra["collmemory"]) {
            collmemory = cnd.extra["collmemory"];
        } else {
            collmemory = {};
            cnd.extra["collmemory"] = collmemory;
        }
        if (!cnd.extra["spriteCreatedDestroyCallback"]) {
            cnd.extra["spriteCreatedDestroyCallback"] = true;
            runtime.addDestroyCallback(function(inst) {
                collmemory_removeInstance(cnd.extra["collmemory"], inst);
            });
        }
        var lsol = ltype.getCurrentSol();
        var rsol = rtype.getCurrentSol();
        var linstances = lsol.getObjects();
        var rinstances;
        var registeredInstances;
        var l, linst, r, rinst;
        var curlsol, currsol;
        var tickcount = this.runtime.tickcount;
        var lasttickcount = tickcount - 1;
        var exists, run;
        var current_event = runtime.getCurrentEventStack().current_event;
        var orblock = current_event.orblock;
        for (l = 0; l < linstances.length; l++) {
            linst = linstances[l];
            if (rsol.select_all) {
                linst.update_bbox();
                this.runtime.getCollisionCandidates(linst.layer, rtype, linst.bbox, candidates1);
                rinstances = candidates1;
                this.runtime.addRegisteredCollisionCandidates(linst, rtype, rinstances);
            } else {
                rinstances = rsol.getObjects();
            }
            for (r = 0; r < rinstances.length; r++) {
                rinst = rinstances[r];
                if (runtime.testOverlap(linst, rinst) || runtime.checkRegisteredCollision(linst, rinst)) {
                    exists = collmemory_has(collmemory, linst, rinst);
                    run = (!exists || (last_coll_tickcount < lasttickcount));
                    collmemory_add(collmemory, linst, rinst, tickcount);
                    if (run) {
                        runtime.pushCopySol(current_event.solModifiers);
                        curlsol = ltype.getCurrentSol();
                        currsol = rtype.getCurrentSol();
                        curlsol.select_all = false;
                        currsol.select_all = false;
                        if (ltype === rtype) {
                            curlsol.instances.length = 2; // just use lsol, is same reference as rsol
                            curlsol.instances[0] = linst;
                            curlsol.instances[1] = rinst;
                            ltype.applySolToContainer();
                        } else {
                            curlsol.instances.length = 1;
                            currsol.instances.length = 1;
                            curlsol.instances[0] = linst;
                            currsol.instances[0] = rinst;
                            ltype.applySolToContainer();
                            rtype.applySolToContainer();
                        }
                        current_event.retrigger();
                        runtime.popSol(current_event.solModifiers);
                    }
                } else {
                    collmemory_remove(collmemory, linst, rinst);
                }
            }
            cr.clearArray(candidates1);
        }
        return false;
    };
    var rpicktype = null;
    var rtopick = new cr.ObjectSet();
    var needscollisionfinish = false;
    var candidates2 = [];
    var temp_bbox = new cr.rect(0, 0, 0, 0);

    function DoOverlapCondition(rtype, offx, offy) {
        if (!rtype)
            return false;
        var do_offset = (offx !== 0 || offy !== 0);
        var oldx, oldy, ret = false,
            r, lenr, rinst;
        var cnd = this.runtime.getCurrentCondition();
        var ltype = cnd.type;
        var inverted = cnd.inverted;
        var rsol = rtype.getCurrentSol();
        var orblock = this.runtime.getCurrentEventStack().current_event.orblock;
        var rinstances;
        if (rsol.select_all) {
            this.update_bbox();
            temp_bbox.copy(this.bbox);
            temp_bbox.offset(offx, offy);
            this.runtime.getCollisionCandidates(this.layer, rtype, temp_bbox, candidates2);
            rinstances = candidates2;
        } else if (orblock) {
            if (this.runtime.isCurrentConditionFirst() && !rsol.else_instances.length && rsol.instances.length)
                rinstances = rsol.instances;
            else
                rinstances = rsol.else_instances;
        } else {
            rinstances = rsol.instances;
        }
        rpicktype = rtype;
        needscollisionfinish = (ltype !== rtype && !inverted);
        if (do_offset) {
            oldx = this.x;
            oldy = this.y;
            this.x += offx;
            this.y += offy;
            this.set_bbox_changed();
        }
        for (r = 0, lenr = rinstances.length; r < lenr; r++) {
            rinst = rinstances[r];
            if (this.runtime.testOverlap(this, rinst)) {
                ret = true;
                if (inverted)
                    break;
                if (ltype !== rtype)
                    rtopick.add(rinst);
            }
        }
        if (do_offset) {
            this.x = oldx;
            this.y = oldy;
            this.set_bbox_changed();
        }
        cr.clearArray(candidates2);
        return ret;
    };
    typeProto.finish = function(do_pick) {
        if (!needscollisionfinish)
            return;
        if (do_pick) {
            var orblock = this.runtime.getCurrentEventStack().current_event.orblock;
            var sol = rpicktype.getCurrentSol();
            var topick = rtopick.valuesRef();
            var i, len, inst;
            if (sol.select_all) {
                sol.select_all = false;
                cr.clearArray(sol.instances);
                for (i = 0, len = topick.length; i < len; ++i) {
                    sol.instances[i] = topick[i];
                }
                if (orblock) {
                    cr.clearArray(sol.else_instances);
                    for (i = 0, len = rpicktype.instances.length; i < len; ++i) {
                        inst = rpicktype.instances[i];
                        if (!rtopick.contains(inst))
                            sol.else_instances.push(inst);
                    }
                }
            } else {
                if (orblock) {
                    var initsize = sol.instances.length;
                    for (i = 0, len = topick.length; i < len; ++i) {
                        sol.instances[initsize + i] = topick[i];
                        cr.arrayFindRemove(sol.else_instances, topick[i]);
                    }
                } else {
                    cr.shallowAssignArray(sol.instances, topick);
                }
            }
            rpicktype.applySolToContainer();
        }
        rtopick.clear();
        needscollisionfinish = false;
    };
    Cnds.prototype.IsOverlapping = function(rtype) {
        return DoOverlapCondition.call(this, rtype, 0, 0);
    };
    Cnds.prototype.IsOverlappingOffset = function(rtype, offx, offy) {
        return DoOverlapCondition.call(this, rtype, offx, offy);
    };
    Cnds.prototype.IsAnimPlaying = function(animname) {
        if (this.changeAnimName.length)
            return cr.equals_nocase(this.changeAnimName, animname);
        else
            return cr.equals_nocase(this.cur_animation.name, animname);
    };
    Cnds.prototype.CompareFrame = function(cmp, framenum) {
        return cr.do_cmp(this.cur_frame, cmp, framenum);
    };
    Cnds.prototype.CompareAnimSpeed = function(cmp, x) {
        var s = (this.animForwards ? this.cur_anim_speed : -this.cur_anim_speed);
        return cr.do_cmp(s, cmp, x);
    };
    Cnds.prototype.OnAnimFinished = function(animname) {
        return cr.equals_nocase(this.animTriggerName, animname);
    };
    Cnds.prototype.OnAnyAnimFinished = function() {
        return true;
    };
    Cnds.prototype.OnFrameChanged = function() {
        return true;
    };
    Cnds.prototype.IsMirrored = function() {
        return this.width < 0;
    };
    Cnds.prototype.IsFlipped = function() {
        return this.height < 0;
    };
    Cnds.prototype.OnURLLoaded = function() {
        return true;
    };
    Cnds.prototype.IsCollisionEnabled = function() {
        return this.collisionsEnabled;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.Spawn = function(obj, layer, imgpt) {
        if (!obj || !layer)
            return;
        var inst = this.runtime.createInstance(obj, layer, this.getImagePoint(imgpt, true), this.getImagePoint(imgpt, false));
        if (!inst)
            return;
        if (typeof inst.angle !== "undefined") {
            inst.angle = this.angle;
            inst.set_bbox_changed();
        }
        this.runtime.isInOnDestroy++;
        var i, len, s;
        this.runtime.trigger(Object.getPrototypeOf(obj.plugin).cnds.OnCreated, inst);
        if (inst.is_contained) {
            for (i = 0, len = inst.siblings.length; i < len; i++) {
                s = inst.siblings[i];
                this.runtime.trigger(Object.getPrototypeOf(s.type.plugin).cnds.OnCreated, s);
            }
        }
        this.runtime.isInOnDestroy--;
        var cur_act = this.runtime.getCurrentAction();
        var reset_sol = false;
        if (cr.is_undefined(cur_act.extra["Spawn_LastExec"]) || cur_act.extra["Spawn_LastExec"] < this.runtime.execcount) {
            reset_sol = true;
            cur_act.extra["Spawn_LastExec"] = this.runtime.execcount;
        }
        var sol;
        if (obj != this.type) {
            sol = obj.getCurrentSol();
            sol.select_all = false;
            if (reset_sol) {
                cr.clearArray(sol.instances);
                sol.instances[0] = inst;
            } else
                sol.instances.push(inst);
            if (inst.is_contained) {
                for (i = 0, len = inst.siblings.length; i < len; i++) {
                    s = inst.siblings[i];
                    sol = s.type.getCurrentSol();
                    sol.select_all = false;
                    if (reset_sol) {
                        cr.clearArray(sol.instances);
                        sol.instances[0] = s;
                    } else
                        sol.instances.push(s);
                }
            }
        }
    };
    Acts.prototype.SetEffect = function(effect) {
        this.blend_mode = effect;
        this.compositeOp = cr.effectToCompositeOp(effect);
        cr.setGLBlend(this, effect, this.runtime.gl);
        this.runtime.redraw = true;
    };
    Acts.prototype.StopAnim = function() {
        this.animPlaying = false;
    };
    Acts.prototype.StartAnim = function(from) {
        this.animPlaying = true;
        this.frameStart = this.getNowTime();
        if (from === 1 && this.cur_frame !== 0) {
            this.changeAnimFrame = 0;
            if (!this.inAnimTrigger)
                this.doChangeAnimFrame();
        }
        if (!this.isTicking) {
            this.runtime.tickMe(this);
            this.isTicking = true;
        }
    };
    Acts.prototype.SetAnim = function(animname, from) {
        this.changeAnimName = animname;
        this.changeAnimFrom = from;
        if (!this.isTicking) {
            this.runtime.tickMe(this);
            this.isTicking = true;
        }
        if (!this.inAnimTrigger)
            this.doChangeAnim();
    };
    Acts.prototype.SetAnimFrame = function(framenumber) {
        this.changeAnimFrame = framenumber;
        if (!this.isTicking) {
            this.runtime.tickMe(this);
            this.isTicking = true;
        }
        if (!this.inAnimTrigger)
            this.doChangeAnimFrame();
    };
    Acts.prototype.SetAnimSpeed = function(s) {
        this.cur_anim_speed = cr.abs(s);
        this.animForwards = (s >= 0);
        if (!this.isTicking) {
            this.runtime.tickMe(this);
            this.isTicking = true;
        }
    };
    Acts.prototype.SetAnimRepeatToFrame = function(s) {
        s = Math.floor(s);
        if (s < 0)
            s = 0;
        if (s >= this.cur_animation.frames.length)
            s = this.cur_animation.frames.length - 1;
        this.cur_anim_repeatto = s;
    };
    Acts.prototype.SetMirrored = function(m) {
        var neww = cr.abs(this.width) * (m === 0 ? -1 : 1);
        if (this.width === neww)
            return;
        this.width = neww;
        this.set_bbox_changed();
    };
    Acts.prototype.SetFlipped = function(f) {
        var newh = cr.abs(this.height) * (f === 0 ? -1 : 1);
        if (this.height === newh)
            return;
        this.height = newh;
        this.set_bbox_changed();
    };
    Acts.prototype.SetScale = function(s) {
        var cur_frame = this.curFrame;
        var mirror_factor = (this.width < 0 ? -1 : 1);
        var flip_factor = (this.height < 0 ? -1 : 1);
        var new_width = cur_frame.width * s * mirror_factor;
        var new_height = cur_frame.height * s * flip_factor;
        if (this.width !== new_width || this.height !== new_height) {
            this.width = new_width;
            this.height = new_height;
            this.set_bbox_changed();
        }
    };
    Acts.prototype.LoadURL = function(url_, resize_, crossOrigin_) {
        var img = new Image();
        var self = this;
        var curFrame_ = this.curFrame;
        img.onload = function() {
            if (curFrame_.texture_img.src === img.src) {
                if (self.runtime.glwrap && self.curFrame === curFrame_)
                    self.curWebGLTexture = curFrame_.webGL_texture;
                if (resize_ === 0) // resize to image size
                {
                    self.width = img.width;
                    self.height = img.height;
                    self.set_bbox_changed();
                }
                self.runtime.redraw = true;
                self.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnURLLoaded, self);
                return;
            }
            curFrame_.texture_img = img;
            curFrame_.offx = 0;
            curFrame_.offy = 0;
            curFrame_.width = img.width;
            curFrame_.height = img.height;
            curFrame_.spritesheeted = false;
            curFrame_.datauri = "";
            curFrame_.pixelformat = 0; // reset to RGBA, since we don't know what type of image will have come in
            if (self.runtime.glwrap) {
                if (curFrame_.webGL_texture)
                    self.runtime.glwrap.deleteTexture(curFrame_.webGL_texture);
                curFrame_.webGL_texture = self.runtime.glwrap.loadTexture(img, false, self.runtime.linearSampling);
                if (self.curFrame === curFrame_)
                    self.curWebGLTexture = curFrame_.webGL_texture;
                self.type.updateAllCurrentTexture();
            }
            if (resize_ === 0) // resize to image size
            {
                self.width = img.width;
                self.height = img.height;
                self.set_bbox_changed();
            }
            self.runtime.redraw = true;
            self.runtime.trigger(cr.plugins_.Sprite.prototype.cnds.OnURLLoaded, self);
        };
        if (url_.substr(0, 5) !== "data:" && crossOrigin_ === 0)
            img["crossOrigin"] = "anonymous";
        this.runtime.setImageSrc(img, url_);
    };
    Acts.prototype.SetCollisions = function(set_) {
        if (this.collisionsEnabled === (set_ !== 0))
            return; // no change
        this.collisionsEnabled = (set_ !== 0);
        if (this.collisionsEnabled)
            this.set_bbox_changed(); // needs to be added back to cells
        else {
            if (this.collcells.right >= this.collcells.left)
                this.type.collision_grid.update(this, this.collcells, null);
            this.collcells.set(0, 0, -1, -1);
        }
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.AnimationFrame = function(ret) {
        ret.set_int(this.cur_frame);
    };
    Exps.prototype.AnimationFrameCount = function(ret) {
        ret.set_int(this.cur_animation.frames.length);
    };
    Exps.prototype.AnimationName = function(ret) {
        ret.set_string(this.cur_animation.name);
    };
    Exps.prototype.AnimationSpeed = function(ret) {
        ret.set_float(this.animForwards ? this.cur_anim_speed : -this.cur_anim_speed);
    };
    Exps.prototype.ImagePointX = function(ret, imgpt) {
        ret.set_float(this.getImagePoint(imgpt, true));
    };
    Exps.prototype.ImagePointY = function(ret, imgpt) {
        ret.set_float(this.getImagePoint(imgpt, false));
    };
    Exps.prototype.ImagePointCount = function(ret) {
        ret.set_int(this.curFrame.image_points.length);
    };
    Exps.prototype.ImageWidth = function(ret) {
        ret.set_float(this.curFrame.width);
    };
    Exps.prototype.ImageHeight = function(ret) {
        ret.set_float(this.curFrame.height);
    };
    pluginProto.exps = new Exps();
}());
/* global cr,log,assert2 */
/* jshint globalstrict: true */
/* jshint strict: true */
;;
cr.plugins_.Spritefont2 = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Spritefont2.prototype;
    pluginProto.onCreate = function() {};
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {
        if (this.is_family)
            return;
        this.texture_img = new Image();
        this.runtime.waitForImageLoad(this.texture_img, this.texture_file);
        this.webGL_texture = null;
    };
    typeProto.onLostWebGLContext = function() {
        if (this.is_family)
            return;
        this.webGL_texture = null;
    };
    typeProto.onRestoreWebGLContext = function() {
        if (this.is_family || !this.instances.length)
            return;
        if (!this.webGL_texture) {
            this.webGL_texture = this.runtime.glwrap.loadTexture(this.texture_img, false, this.runtime.linearSampling, this.texture_pixelformat);
        }
        var i, len;
        for (i = 0, len = this.instances.length; i < len; i++)
            this.instances[i].webGL_texture = this.webGL_texture;
    };
    typeProto.unloadTextures = function() {
        if (this.is_family || this.instances.length || !this.webGL_texture)
            return;
        this.runtime.glwrap.deleteTexture(this.webGL_texture);
        this.webGL_texture = null;
    };
    typeProto.preloadCanvas2D = function(ctx) {
        ctx.drawImage(this.texture_img, 0, 0);
    };
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    instanceProto.onDestroy = function() {
        freeAllLines(this.lines);
        freeAllClip(this.clipList);
        freeAllClipUV(this.clipUV);
        cr.wipe(this.characterWidthList);
    };
    instanceProto.onCreate = function() {
        this.texture_img = this.type.texture_img;
        this.characterWidth = this.properties[0];
        this.characterHeight = this.properties[1];
        this.characterSet = this.properties[2];
        this.text = this.properties[3];
        this.characterScale = this.properties[4];
        this.visible = (this.properties[5] === 0); // 0=visible, 1=invisible
        this.halign = this.properties[6] / 2.0; // 0=left, 1=center, 2=right
        this.valign = this.properties[7] / 2.0; // 0=top, 1=center, 2=bottom
        this.wrapbyword = (this.properties[9] === 0); // 0=word, 1=character
        this.characterSpacing = this.properties[10];
        this.lineHeight = this.properties[11];
        this.textWidth = 0;
        this.textHeight = 0;
        if (this.recycled) {
            cr.clearArray(this.lines);
            cr.wipe(this.clipList);
            cr.wipe(this.clipUV);
            cr.wipe(this.characterWidthList);
        } else {
            this.lines = [];
            this.clipList = {};
            this.clipUV = {};
            this.characterWidthList = {};
        }
        this.text_changed = true;
        this.lastwrapwidth = this.width;
        if (this.runtime.glwrap) {
            if (!this.type.webGL_texture) {
                this.type.webGL_texture = this.runtime.glwrap.loadTexture(this.type.texture_img, false, this.runtime.linearSampling, this.type.texture_pixelformat);
            }
            this.webGL_texture = this.type.webGL_texture;
        }
        this.SplitSheet();
    };
    instanceProto.saveToJSON = function() {
        var save = {
            "t": this.text,
            "csc": this.characterScale,
            "csp": this.characterSpacing,
            "lh": this.lineHeight,
            "tw": this.textWidth,
            "th": this.textHeight,
            "lrt": this.last_render_tick,
            "ha": this.halign,
            "va": this.valign,
            "cw": {}
        };
        for (var ch in this.characterWidthList)
            save["cw"][ch] = this.characterWidthList[ch];
        return save;
    };
    instanceProto.loadFromJSON = function(o) {
        this.text = o["t"];
        this.characterScale = o["csc"];
        this.characterSpacing = o["csp"];
        this.lineHeight = o["lh"];
        this.textWidth = o["tw"];
        this.textHeight = o["th"];
        this.last_render_tick = o["lrt"];
        if (o.hasOwnProperty("ha"))
            this.halign = o["ha"];
        if (o.hasOwnProperty("va"))
            this.valign = o["va"];
        for (var ch in o["cw"])
            this.characterWidthList[ch] = o["cw"][ch];
        this.text_changed = true;
        this.lastwrapwidth = this.width;
    };

    function trimRight(text) {
        return text.replace(/\s\s*$/, '');
    }
    var MAX_CACHE_SIZE = 1000;

    function alloc(cache, Constructor) {
        if (cache.length)
            return cache.pop();
        else
            return new Constructor();
    }

    function free(cache, data) {
        if (cache.length < MAX_CACHE_SIZE) {
            cache.push(data);
        }
    }

    function freeAll(cache, dataList, isArray) {
        if (isArray) {
            var i, len;
            for (i = 0, len = dataList.length; i < len; i++) {
                free(cache, dataList[i]);
            }
            cr.clearArray(dataList);
        } else {
            var prop;
            for (prop in dataList) {
                if (Object.prototype.hasOwnProperty.call(dataList, prop)) {
                    free(cache, dataList[prop]);
                    delete dataList[prop];
                }
            }
        }
    }

    function addLine(inst, lineIndex, cur_line) {
        var lines = inst.lines;
        var line;
        cur_line = trimRight(cur_line);
        if (lineIndex >= lines.length)
            lines.push(allocLine());
        line = lines[lineIndex];
        line.text = cur_line;
        line.width = inst.measureWidth(cur_line);
        inst.textWidth = cr.max(inst.textWidth, line.width);
    }
    var linesCache = [];

    function allocLine() {
        return alloc(linesCache, Object);
    }

    function freeLine(l) {
        free(linesCache, l);
    }

    function freeAllLines(arr) {
        freeAll(linesCache, arr, true);
    }

    function addClip(obj, property, x, y, w, h) {
        if (obj[property] === undefined) {
            obj[property] = alloc(clipCache, Object);
        }
        obj[property].x = x;
        obj[property].y = y;
        obj[property].w = w;
        obj[property].h = h;
    }
    var clipCache = [];

    function allocClip() {
        return alloc(clipCache, Object);
    }

    function freeAllClip(obj) {
        freeAll(clipCache, obj, false);
    }

    function addClipUV(obj, property, left, top, right, bottom) {
        if (obj[property] === undefined) {
            obj[property] = alloc(clipUVCache, cr.rect);
        }
        obj[property].left = left;
        obj[property].top = top;
        obj[property].right = right;
        obj[property].bottom = bottom;
    }
    var clipUVCache = [];

    function allocClipUV() {
        return alloc(clipUVCache, cr.rect);
    }

    function freeAllClipUV(obj) {
        freeAll(clipUVCache, obj, false);
    }
    instanceProto.SplitSheet = function() {
        var texture = this.texture_img;
        var texWidth = texture.width;
        var texHeight = texture.height;
        var charWidth = this.characterWidth;
        var charHeight = this.characterHeight;
        var charU = charWidth / texWidth;
        var charV = charHeight / texHeight;
        var charSet = this.characterSet;
        var cols = Math.floor(texWidth / charWidth);
        var rows = Math.floor(texHeight / charHeight);
        for (var c = 0; c < charSet.length; c++) {
            if (c >= cols * rows) break;
            var x = c % cols;
            var y = Math.floor(c / cols);
            var letter = charSet.charAt(c);
            if (this.runtime.glwrap) {
                addClipUV(
                    this.clipUV, letter,
                    x * charU,
                    y * charV,
                    (x + 1) * charU,
                    (y + 1) * charV
                );
            } else {
                addClip(
                    this.clipList, letter,
                    x * charWidth,
                    y * charHeight,
                    charWidth,
                    charHeight
                );
            }
        }
    };
    /*
     *	Word-Wrapping
     */
    var wordsCache = [];
    pluginProto.TokeniseWords = function(text) {
        cr.clearArray(wordsCache);
        var cur_word = "";
        var ch;
        var i = 0;
        while (i < text.length) {
            ch = text.charAt(i);
            if (ch === "\n") {
                if (cur_word.length) {
                    wordsCache.push(cur_word);
                    cur_word = "";
                }
                wordsCache.push("\n");
                ++i;
            } else if (ch === " " || ch === "\t" || ch === "-") {
                do {
                    cur_word += text.charAt(i);
                    i++;
                }
                while (i < text.length && (text.charAt(i) === " " || text.charAt(i) === "\t"));
                wordsCache.push(cur_word);
                cur_word = "";
            } else if (i < text.length) {
                cur_word += ch;
                i++;
            }
        }
        if (cur_word.length)
            wordsCache.push(cur_word);
    };
    pluginProto.WordWrap = function(inst) {
        var text = inst.text;
        var lines = inst.lines;
        if (!text || !text.length) {
            freeAllLines(lines);
            return;
        }
        var width = inst.width;
        if (width <= 2.0) {
            freeAllLines(lines);
            return;
        }
        var charWidth = inst.characterWidth;
        var charScale = inst.characterScale;
        var charSpacing = inst.characterSpacing;
        if ((text.length * (charWidth * charScale + charSpacing) - charSpacing) <= width && text.indexOf("\n") === -1) {
            var all_width = inst.measureWidth(text);
            if (all_width <= width) {
                freeAllLines(lines);
                lines.push(allocLine());
                lines[0].text = text;
                lines[0].width = all_width;
                inst.textWidth = all_width;
                inst.textHeight = inst.characterHeight * charScale + inst.lineHeight;
                return;
            }
        }
        var wrapbyword = inst.wrapbyword;
        this.WrapText(inst);
        inst.textHeight = lines.length * (inst.characterHeight * charScale + inst.lineHeight);
    };
    pluginProto.WrapText = function(inst) {
        var wrapbyword = inst.wrapbyword;
        var text = inst.text;
        var lines = inst.lines;
        var width = inst.width;
        var wordArray;
        if (wrapbyword) {
            this.TokeniseWords(text); // writes to wordsCache
            wordArray = wordsCache;
        } else {
            wordArray = text;
        }
        var cur_line = "";
        var prev_line;
        var line_width;
        var i;
        var lineIndex = 0;
        var line;
        var ignore_newline = false;
        for (i = 0; i < wordArray.length; i++) {
            if (wordArray[i] === "\n") {
                if (ignore_newline === true) {
                    ignore_newline = false;
                } else {
                    addLine(inst, lineIndex, cur_line);
                    lineIndex++;
                }
                cur_line = "";
                continue;
            }
            ignore_newline = false;
            prev_line = cur_line;
            cur_line += wordArray[i];
            line_width = inst.measureWidth(trimRight(cur_line));
            if (line_width > width) {
                if (prev_line === "") {
                    addLine(inst, lineIndex, cur_line);
                    cur_line = "";
                    ignore_newline = true;
                } else {
                    addLine(inst, lineIndex, prev_line);
                    cur_line = wordArray[i];
                }
                lineIndex++;
                if (!wrapbyword && cur_line === " ")
                    cur_line = "";
            }
        }
        if (trimRight(cur_line).length) {
            addLine(inst, lineIndex, cur_line);
            lineIndex++;
        }
        for (i = lineIndex; i < lines.length; i++)
            freeLine(lines[i]);
        lines.length = lineIndex;
    };
    instanceProto.measureWidth = function(text) {
        var spacing = this.characterSpacing;
        var len = text.length;
        var width = 0;
        for (var i = 0; i < len; i++) {
            width += this.getCharacterWidth(text.charAt(i)) * this.characterScale + spacing;
        }
        width -= (width > 0) ? spacing : 0;
        return width;
    };
    /***/
    instanceProto.getCharacterWidth = function(character) {
        var widthList = this.characterWidthList;
        if (widthList[character] !== undefined) {
            return widthList[character];
        } else {
            return this.characterWidth;
        }
    };
    instanceProto.rebuildText = function() {
        if (this.text_changed || this.width !== this.lastwrapwidth) {
            this.textWidth = 0;
            this.textHeight = 0;
            this.type.plugin.WordWrap(this);
            this.text_changed = false;
            this.lastwrapwidth = this.width;
        }
    };
    var EPSILON = 0.00001;
    instanceProto.draw = function(ctx, glmode) {
        var texture = this.texture_img;
        if (this.text !== "" && texture != null) {
            this.rebuildText();
            if (this.height < this.characterHeight * this.characterScale + this.lineHeight) {
                return;
            }
            ctx.globalAlpha = this.opacity;
            var myx = this.x;
            var myy = this.y;
            if (this.runtime.pixel_rounding) {
                myx = Math.round(myx);
                myy = Math.round(myy);
            }
            var viewLeft = this.layer.viewLeft;
            var viewTop = this.layer.viewTop;
            var viewRight = this.layer.viewRight;
            var viewBottom = this.layer.viewBottom;
            ctx.save();
            ctx.translate(myx, myy);
            ctx.rotate(this.angle);
            var angle = this.angle;
            var ha = this.halign;
            var va = this.valign;
            var scale = this.characterScale;
            var charHeight = this.characterHeight * scale;
            var lineHeight = this.lineHeight;
            var charSpace = this.characterSpacing;
            var lines = this.lines;
            var textHeight = this.textHeight;
            var letterWidth;
            var halign;
            var valign = va * cr.max(0, (this.height - textHeight));
            var offx = -(this.hotspotX * this.width);
            var offy = -(this.hotspotY * this.height);
            offy += valign;
            var drawX;
            var drawY = offy;
            var roundX, roundY;
            for (var i = 0; i < lines.length; i++) {
                var line = lines[i].text;
                var len = lines[i].width;
                halign = ha * cr.max(0, this.width - len);
                drawX = offx + halign;
                drawY += lineHeight;
                if (angle === 0 && myy + drawY + charHeight < viewTop) {
                    drawY += charHeight;
                    continue;
                }
                for (var j = 0; j < line.length; j++) {
                    var letter = line.charAt(j);
                    letterWidth = this.getCharacterWidth(letter);
                    var clip = this.clipList[letter];
                    if (angle === 0 && myx + drawX + letterWidth * scale + charSpace < viewLeft) {
                        drawX += letterWidth * scale + charSpace;
                        continue;
                    }
                    if (drawX + letterWidth * scale > this.width + EPSILON) {
                        break;
                    }
                    if (clip !== undefined) {
                        roundX = drawX;
                        roundY = drawY;
                        if (angle === 0 && scale === 1) {
                            roundX = Math.round(roundX);
                            roundY = Math.round(roundY);
                        }
                        ctx.drawImage(this.texture_img,
                            clip.x, clip.y, clip.w, clip.h,
                            roundX, roundY, clip.w * scale, clip.h * scale);
                    }
                    drawX += letterWidth * scale + charSpace;
                    if (angle === 0 && myx + drawX > viewRight)
                        break;
                }
                drawY += charHeight;
                if (angle === 0 && (drawY + charHeight + lineHeight > this.height || myy + drawY > viewBottom)) {
                    break;
                }
            }
            ctx.restore();
        }
    };
    var dQuad = new cr.quad();

    function rotateQuad(quad, cosa, sina) {
        var x_temp;
        x_temp = (quad.tlx * cosa) - (quad.tly * sina);
        quad.tly = (quad.tly * cosa) + (quad.tlx * sina);
        quad.tlx = x_temp;
        x_temp = (quad.trx * cosa) - (quad.try_ * sina);
        quad.try_ = (quad.try_ * cosa) + (quad.trx * sina);
        quad.trx = x_temp;
        x_temp = (quad.blx * cosa) - (quad.bly * sina);
        quad.bly = (quad.bly * cosa) + (quad.blx * sina);
        quad.blx = x_temp;
        x_temp = (quad.brx * cosa) - (quad.bry * sina);
        quad.bry = (quad.bry * cosa) + (quad.brx * sina);
        quad.brx = x_temp;
    }
    instanceProto.drawGL = function(glw) {
        glw.setTexture(this.webGL_texture);
        glw.setOpacity(this.opacity);
        if (!this.text)
            return;
        this.rebuildText();
        if (this.height < this.characterHeight * this.characterScale + this.lineHeight) {
            return;
        }
        this.update_bbox();
        var q = this.bquad;
        var ox = 0;
        var oy = 0;
        if (this.runtime.pixel_rounding) {
            ox = Math.round(this.x) - this.x;
            oy = Math.round(this.y) - this.y;
        }
        var viewLeft = this.layer.viewLeft;
        var viewTop = this.layer.viewTop;
        var viewRight = this.layer.viewRight;
        var viewBottom = this.layer.viewBottom;
        var angle = this.angle;
        var ha = this.halign;
        var va = this.valign;
        var scale = this.characterScale;
        var charHeight = this.characterHeight * scale; // to precalculate in onCreate or on change
        var lineHeight = this.lineHeight;
        var charSpace = this.characterSpacing;
        var lines = this.lines;
        var textHeight = this.textHeight;
        var letterWidth;
        var cosa, sina;
        if (angle !== 0) {
            cosa = Math.cos(angle);
            sina = Math.sin(angle);
        }
        var halign;
        var valign = va * cr.max(0, (this.height - textHeight));
        var offx = q.tlx + ox;
        var offy = q.tly + oy;
        var drawX;
        var drawY = valign;
        var roundX, roundY;
        for (var i = 0; i < lines.length; i++) {
            var line = lines[i].text;
            var lineWidth = lines[i].width;
            halign = ha * cr.max(0, this.width - lineWidth);
            drawX = halign;
            drawY += lineHeight;
            if (angle === 0 && offy + drawY + charHeight < viewTop) {
                drawY += charHeight;
                continue;
            }
            for (var j = 0; j < line.length; j++) {
                var letter = line.charAt(j);
                letterWidth = this.getCharacterWidth(letter);
                var clipUV = this.clipUV[letter];
                if (angle === 0 && offx + drawX + letterWidth * scale + charSpace < viewLeft) {
                    drawX += letterWidth * scale + charSpace;
                    continue;
                }
                if (drawX + letterWidth * scale > this.width + EPSILON) {
                    break;
                }
                if (clipUV !== undefined) {
                    var clipWidth = this.characterWidth * scale;
                    var clipHeight = this.characterHeight * scale;
                    roundX = drawX;
                    roundY = drawY;
                    if (angle === 0 && scale === 1) {
                        roundX = Math.round(roundX);
                        roundY = Math.round(roundY);
                    }
                    dQuad.tlx = roundX;
                    dQuad.tly = roundY;
                    dQuad.trx = roundX + clipWidth;
                    dQuad.try_ = roundY;
                    dQuad.blx = roundX;
                    dQuad.bly = roundY + clipHeight;
                    dQuad.brx = roundX + clipWidth;
                    dQuad.bry = roundY + clipHeight;
                    if (angle !== 0) {
                        rotateQuad(dQuad, cosa, sina);
                    }
                    dQuad.offset(offx, offy);
                    glw.quadTex(
                        dQuad.tlx, dQuad.tly,
                        dQuad.trx, dQuad.try_,
                        dQuad.brx, dQuad.bry,
                        dQuad.blx, dQuad.bly,
                        clipUV
                    );
                }
                drawX += letterWidth * scale + charSpace;
                if (angle === 0 && offx + drawX > viewRight)
                    break;
            }
            drawY += charHeight;
            if (angle === 0 && (drawY + charHeight + lineHeight > this.height || offy + drawY > viewBottom)) {
                break;
            }
        }
    };

    function Cnds() {}
    Cnds.prototype.CompareText = function(text_to_compare, case_sensitive) {
        if (case_sensitive)
            return this.text == text_to_compare;
        else
            return cr.equals_nocase(this.text, text_to_compare);
    };
    pluginProto.cnds = new Cnds();

    function Acts() {}
    Acts.prototype.SetText = function(param) {
        if (cr.is_number(param) && param < 1e9)
            param = Math.round(param * 1e10) / 1e10; // round to nearest ten billionth - hides floating point errors
        var text_to_set = param.toString();
        if (this.text !== text_to_set) {
            this.text = text_to_set;
            this.text_changed = true;
            this.runtime.redraw = true;
        }
    };
    Acts.prototype.AppendText = function(param) {
        if (cr.is_number(param))
            param = Math.round(param * 1e10) / 1e10; // round to nearest ten billionth - hides floating point errors
        var text_to_append = param.toString();
        if (text_to_append) // not empty
        {
            this.text += text_to_append;
            this.text_changed = true;
            this.runtime.redraw = true;
        }
    };
    Acts.prototype.SetScale = function(param) {
        if (param !== this.characterScale) {
            this.characterScale = param;
            this.text_changed = true;
            this.runtime.redraw = true;
        }
    };
    Acts.prototype.SetCharacterSpacing = function(param) {
        if (param !== this.CharacterSpacing) {
            this.characterSpacing = param;
            this.text_changed = true;
            this.runtime.redraw = true;
        }
    };
    Acts.prototype.SetLineHeight = function(param) {
        if (param !== this.lineHeight) {
            this.lineHeight = param;
            this.text_changed = true;
            this.runtime.redraw = true;
        }
    };
    instanceProto.SetCharWidth = function(character, width) {
        var w = parseInt(width, 10);
        if (this.characterWidthList[character] !== w) {
            this.characterWidthList[character] = w;
            this.text_changed = true;
            this.runtime.redraw = true;
        }
    };
    Acts.prototype.SetCharacterWidth = function(characterSet, width) {
        if (characterSet !== "") {
            for (var c = 0; c < characterSet.length; c++) {
                this.SetCharWidth(characterSet.charAt(c), width);
            }
        }
    };
    Acts.prototype.SetEffect = function(effect) {
        this.blend_mode = effect;
        this.compositeOp = cr.effectToCompositeOp(effect);
        cr.setGLBlend(this, effect, this.runtime.gl);
        this.runtime.redraw = true;
    };
    Acts.prototype.SetHAlign = function(a) {
        this.halign = a / 2.0;
        this.text_changed = true;
        this.runtime.redraw = true;
    };
    Acts.prototype.SetVAlign = function(a) {
        this.valign = a / 2.0;
        this.text_changed = true;
        this.runtime.redraw = true;
    };
    pluginProto.acts = new Acts();

    function Exps() {}
    Exps.prototype.CharacterWidth = function(ret, character) {
        ret.set_int(this.getCharacterWidth(character));
    };
    Exps.prototype.CharacterHeight = function(ret) {
        ret.set_int(this.characterHeight);
    };
    Exps.prototype.CharacterScale = function(ret) {
        ret.set_float(this.characterScale);
    };
    Exps.prototype.CharacterSpacing = function(ret) {
        ret.set_int(this.characterSpacing);
    };
    Exps.prototype.LineHeight = function(ret) {
        ret.set_int(this.lineHeight);
    };
    Exps.prototype.Text = function(ret) {
        ret.set_string(this.text);
    };
    Exps.prototype.TextWidth = function(ret) {
        this.rebuildText();
        ret.set_float(this.textWidth);
    };
    Exps.prototype.TextHeight = function(ret) {
        this.rebuildText();
        ret.set_float(this.textHeight);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.TiledBg = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.TiledBg.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {
        if (this.is_family)
            return;
        this.texture_img = new Image();
        this.texture_img.cr_filesize = this.texture_filesize;
        this.runtime.waitForImageLoad(this.texture_img, this.texture_file);
        this.pattern = null;
        this.webGL_texture = null;
    };
    typeProto.onLostWebGLContext = function() {
        if (this.is_family)
            return;
        this.webGL_texture = null;
    };
    typeProto.onRestoreWebGLContext = function() {
        if (this.is_family || !this.instances.length)
            return;
        if (!this.webGL_texture) {
            this.webGL_texture = this.runtime.glwrap.loadTexture(this.texture_img, true, this.runtime.linearSampling, this.texture_pixelformat);
        }
        var i, len;
        for (i = 0, len = this.instances.length; i < len; i++)
            this.instances[i].webGL_texture = this.webGL_texture;
    };
    typeProto.loadTextures = function() {
        if (this.is_family || this.webGL_texture || !this.runtime.glwrap)
            return;
        this.webGL_texture = this.runtime.glwrap.loadTexture(this.texture_img, true, this.runtime.linearSampling, this.texture_pixelformat);
    };
    typeProto.unloadTextures = function() {
        if (this.is_family || this.instances.length || !this.webGL_texture)
            return;
        this.runtime.glwrap.deleteTexture(this.webGL_texture);
        this.webGL_texture = null;
    };
    typeProto.preloadCanvas2D = function(ctx) {
        ctx.drawImage(this.texture_img, 0, 0);
    };
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    instanceProto.onCreate = function() {
        this.visible = (this.properties[0] === 0); // 0=visible, 1=invisible
        this.rcTex = new cr.rect(0, 0, 0, 0);
        this.has_own_texture = false; // true if a texture loaded in from URL
        this.texture_img = this.type.texture_img;
        if (this.runtime.glwrap) {
            this.type.loadTextures();
            this.webGL_texture = this.type.webGL_texture;
        } else {
            if (!this.type.pattern)
                this.type.pattern = this.runtime.ctx.createPattern(this.type.texture_img, "repeat");
            this.pattern = this.type.pattern;
        }
    };
    instanceProto.afterLoad = function() {
        this.has_own_texture = false;
        this.texture_img = this.type.texture_img;
    };
    instanceProto.onDestroy = function() {
        if (this.runtime.glwrap && this.has_own_texture && this.webGL_texture) {
            this.runtime.glwrap.deleteTexture(this.webGL_texture);
            this.webGL_texture = null;
        }
    };
    instanceProto.draw = function(ctx) {
        ctx.globalAlpha = this.opacity;
        ctx.save();
        ctx.fillStyle = this.pattern;
        var myx = this.x;
        var myy = this.y;
        if (this.runtime.pixel_rounding) {
            myx = Math.round(myx);
            myy = Math.round(myy);
        }
        var drawX = -(this.hotspotX * this.width);
        var drawY = -(this.hotspotY * this.height);
        var offX = drawX % this.texture_img.width;
        var offY = drawY % this.texture_img.height;
        if (offX < 0)
            offX += this.texture_img.width;
        if (offY < 0)
            offY += this.texture_img.height;
        ctx.translate(myx, myy);
        ctx.rotate(this.angle);
        ctx.translate(offX, offY);
        ctx.fillRect(drawX - offX,
            drawY - offY,
            this.width,
            this.height);
        ctx.restore();
    };
    instanceProto.drawGL_earlyZPass = function(glw) {
        this.drawGL(glw);
    };
    instanceProto.drawGL = function(glw) {
        glw.setTexture(this.webGL_texture);
        glw.setOpacity(this.opacity);
        var rcTex = this.rcTex;
        rcTex.right = this.width / this.texture_img.width;
        rcTex.bottom = this.height / this.texture_img.height;
        var q = this.bquad;
        if (this.runtime.pixel_rounding) {
            var ox = Math.round(this.x) - this.x;
            var oy = Math.round(this.y) - this.y;
            glw.quadTex(q.tlx + ox, q.tly + oy, q.trx + ox, q.try_ + oy, q.brx + ox, q.bry + oy, q.blx + ox, q.bly + oy, rcTex);
        } else
            glw.quadTex(q.tlx, q.tly, q.trx, q.try_, q.brx, q.bry, q.blx, q.bly, rcTex);
    };

    function Cnds() {};
    Cnds.prototype.OnURLLoaded = function() {
        return true;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetEffect = function(effect) {
        this.blend_mode = effect;
        this.compositeOp = cr.effectToCompositeOp(effect);
        cr.setGLBlend(this, effect, this.runtime.gl);
        this.runtime.redraw = true;
    };
    Acts.prototype.LoadURL = function(url_, crossOrigin_) {
        var img = new Image();
        var self = this;
        img.onload = function() {
            self.texture_img = img;
            if (self.runtime.glwrap) {
                if (self.has_own_texture && self.webGL_texture)
                    self.runtime.glwrap.deleteTexture(self.webGL_texture);
                self.webGL_texture = self.runtime.glwrap.loadTexture(img, true, self.runtime.linearSampling);
            } else {
                self.pattern = self.runtime.ctx.createPattern(img, "repeat");
            }
            self.has_own_texture = true;
            self.runtime.redraw = true;
            self.runtime.trigger(cr.plugins_.TiledBg.prototype.cnds.OnURLLoaded, self);
        };
        if (url_.substr(0, 5) !== "data:" && crossOrigin_ === 0)
            img.crossOrigin = "anonymous";
        this.runtime.setImageSrc(img, url_);
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.ImageWidth = function(ret) {
        ret.set_float(this.texture_img.width);
    };
    Exps.prototype.ImageHeight = function(ret) {
        ret.set_float(this.texture_img.height);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Tilemap = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Tilemap.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {
        var i, len, p;
        if (this.is_family)
            return;
        this.texture_img = new Image();
        this.texture_img.cr_filesize = this.texture_filesize;
        this.runtime.waitForImageLoad(this.texture_img, this.texture_file);
        this.cut_tiles = [];
        this.cut_tiles_valid = false;
        this.tile_polys = [];
        this.tile_polys_cached = false; // first instance will cache polys with the tile width/height
        if (this.tile_poly_data && this.tile_poly_data.length) {
            for (i = 0, len = this.tile_poly_data.length; i < len; ++i) {
                p = this.tile_poly_data[i];
                if (p) {
                    this.tile_polys.push({
                        poly: p,
                        flipmap: [
                            [
                                [null, null],
                                [null, null]
                            ],
                            [
                                [null, null],
                                [null, null]
                            ]
                        ]
                    });
                } else
                    this.tile_polys.push(null);
            }
        }
    };
    typeProto.cacheTilePoly = function(tileid, tilewidth, tileheight, fliph, flipv, flipd) {
        if (tileid < 0 || tileid >= this.tile_polys.length)
            return;
        if (!this.tile_polys[tileid])
            return; // no poly for this tile
        var poly = this.tile_polys[tileid].poly;
        var flipmap = this.tile_polys[tileid].flipmap;
        var cached_poly = new cr.CollisionPoly(poly);
        cached_poly.cache_poly(tilewidth, tileheight, 0);
        if (flipd)
            cached_poly.diag();
        if (fliph)
            cached_poly.mirror(tilewidth / 2);
        if (flipv)
            cached_poly.flip(tileheight / 2);
        flipmap[fliph ? 1 : 0][flipv ? 1 : 0][flipd ? 1 : 0] = cached_poly;
    };
    typeProto.getTilePoly = function(id) {
        if (id === -1)
            return null;
        var tileid = (id & TILE_ID_MASK);
        if (tileid < 0 || tileid >= this.tile_polys.length)
            return null; // out of range
        if (!this.tile_polys[tileid])
            return null; // no poly for this tile
        var fliph = (id & TILE_FLIPPED_HORIZONTAL) ? 1 : 0;
        var flipv = (id & TILE_FLIPPED_VERTICAL) ? 1 : 0;
        var flipd = (id & TILE_FLIPPED_DIAGONAL) ? 1 : 0;
        return this.tile_polys[tileid].flipmap[fliph][flipv][flipd];
    };
    typeProto.freeCutTiles = function() {
        var i, len;
        var glwrap = this.runtime.glwrap;
        if (glwrap) {
            for (i = 0, len = this.cut_tiles.length; i < len; ++i)
                glwrap.deleteTexture(this.cut_tiles[i]);
        }
        cr.clearArray(this.cut_tiles);
        this.cut_tiles_valid = false;
    }
    typeProto.maybeCutTiles = function(tw, th, offx, offy, sepx, sepy, seamless) {
        if (this.cut_tiles_valid)
            return; // no changed
        if (tw <= 0 || th <= 0)
            return;
        this.freeCutTiles();
        var img_width = this.texture_img.width;
        var img_height = this.texture_img.height;
        var x, y;
        for (y = offy; y + th <= img_height; y += (th + sepy)) {
            for (x = offx; x + tw <= img_width; x += (tw + sepx)) {
                this.cut_tiles.push(this.CutTileImage(x, y, tw, th, seamless));
            }
        }
        this.cut_tiles_valid = true;
    };
    typeProto.CutTileImage = function(x, y, w, h, seamless) {
        if (this.runtime.glwrap) {
            return this.DoCutTileImage(x, y, w, h, false, false, false, seamless);
        } else {
            var flipmap = [
                [
                    [null, null],
                    [null, null]
                ],
                [
                    [null, null],
                    [null, null]
                ]
            ];
            flipmap[0][0][0] = this.DoCutTileImage(x, y, w, h, false, false, false, seamless);
            return {
                flipmap: flipmap,
                x: x,
                y: y,
                w: w,
                h: h
            };
        }
    };
    typeProto.GetFlippedTileImage = function(tileid, fliph, flipv, flipd, seamless) {
        if (tileid < 0 || tileid >= this.cut_tiles.length)
            return null;
        var tile = this.cut_tiles[tileid];
        var flipmap = tile.flipmap;
        var hi = (fliph ? 1 : 0);
        var vi = (flipv ? 1 : 0);
        var di = (flipd ? 1 : 0);
        var ret = flipmap[hi][vi][di];
        if (ret) {
            return ret;
        } else {
            ret = this.DoCutTileImage(tile.x, tile.y, tile.w, tile.h, hi !== 0, vi !== 0, di !== 0, seamless);
            flipmap[hi][vi][di] = ret;
            return ret;
        }
    };
    typeProto.DoCutTileImage = function(x, y, w, h, fliph, flipv, flipd, seamless) {
        var dw = w;
        var dh = h;
        if (this.runtime.glwrap && !seamless) {
            if (!cr.isPOT(dw))
                dw = cr.nextHighestPowerOfTwo(dw);
            if (!cr.isPOT(dh))
                dh = cr.nextHighestPowerOfTwo(dh);
        }
        var tmpcanvas = document.createElement("canvas");
        tmpcanvas.width = dw;
        tmpcanvas.height = dh;
        var tmpctx = tmpcanvas.getContext("2d");
        if (this.runtime.ctx) {
            if (fliph) {
                if (flipv) {
                    if (flipd) {
                        tmpctx.rotate(Math.PI / 2);
                        tmpctx.scale(-1, 1);
                        tmpctx.translate(-dw, -dh);
                    } else {
                        tmpctx.scale(-1, -1);
                        tmpctx.translate(-dw, -dh);
                    }
                } else {
                    if (flipd) {
                        tmpctx.rotate(Math.PI / 2);
                        tmpctx.translate(0, -dh);
                    } else {
                        tmpctx.scale(-1, 1);
                        tmpctx.translate(-dw, 0);
                    }
                }
            } else {
                if (flipv) {
                    if (flipd) {
                        tmpctx.rotate(-Math.PI / 2);
                        tmpctx.translate(-dw, 0);
                    } else {
                        tmpctx.scale(1, -1);
                        tmpctx.translate(0, -dh);
                    }
                } else {
                    if (flipd) {
                        tmpctx.scale(-1, 1);
                        tmpctx.rotate(Math.PI / 2);
                    }
                }
            }
            tmpctx.drawImage(this.texture_img, x, y, w, h, 0, 0, dw, dh);
            if (seamless)
                return tmpcanvas;
            else
                return this.runtime.ctx.createPattern(tmpcanvas, "repeat");
        } else {;
            tmpctx.drawImage(this.texture_img, x, y, w, h, 0, 0, dw, dh);
            var tex = this.runtime.glwrap.createEmptyTexture(dw, dh, this.runtime.linearSampling, false, !seamless);
            this.runtime.glwrap.videoToTexture(tmpcanvas, tex);
            return tex;
        }
    };
    typeProto.onLostWebGLContext = function() {
        if (this.is_family)
            return;
        this.freeCutTiles();
    };
    typeProto.onRestoreWebGLContext = function() {};
    typeProto.loadTextures = function() {};
    typeProto.unloadTextures = function() {
        if (this.is_family || this.instances.length)
            return;
        this.freeCutTiles();
    };
    typeProto.preloadCanvas2D = function(ctx) {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    var TILE_FLIPPED_HORIZONTAL = -0x80000000 // note: pretend is a signed int, so negate
    var TILE_FLIPPED_VERTICAL = 0x40000000
    var TILE_FLIPPED_DIAGONAL = 0x20000000
    var TILE_FLAGS_MASK = 0xE0000000
    var TILE_ID_MASK = 0x1FFFFFFF

    function TileQuad() {
        this.id = -1;
        this.tileid = -1;
        this.horiz_flip = false;
        this.vert_flip = false;
        this.diag_flip = false;
        this.any_flip = false;
        this.rc = new cr.rect(0, 0, 0, 0);
    };
    var tilequad_cache = [];

    function allocTileQuad() {
        if (tilequad_cache.length)
            return tilequad_cache.pop();
        else
            return new TileQuad();
    };

    function freeTileQuad(tq) {
        if (tilequad_cache.length < 10000)
            tilequad_cache.push(tq);
    };

    function TileCollisionRect() {
        this.id = -1;
        this.rc = new cr.rect(0, 0, 0, 0);
        this.poly = null;
    }
    var collrect_cache = [];

    function allocCollRect() {
        if (collrect_cache.length)
            return collrect_cache.pop();
        else
            return new TileCollisionRect();
    };

    function freeCollRect(r) {
        if (collrect_cache.length < 10000)
            collrect_cache.push(r);
    };
    var tile_cell_cache = [];

    function allocTileCell(inst_, x_, y_) {
        var ret;
        if (tile_cell_cache.length) {
            ret = tile_cell_cache.pop();
            ret.inst = inst_;
            ret.x = x_;
            ret.y = y_;
            ret.left = ret.x * ret.inst.cellwidth * ret.inst.tilewidth;
            ret.top = ret.y * ret.inst.cellheight * ret.inst.tileheight;
            ret.clear();
            ret.quadmap_valid = false;
            return ret;
        } else
            return new TileCell(inst_, x_, y_);
    };

    function freeTileCell(tc) {
        var i, len;
        for (i = 0, len = tc.quads.length; i < len; ++i)
            freeTileQuad(tc.quads[i]);
        cr.clearArray(tc.quads);
        for (i = 0, len = tc.collision_rects.length; i < len; ++i)
            freeCollRect(tc.collision_rects[i]);
        cr.clearArray(tc.collision_rects);
        if (tile_cell_cache.length < 1000)
            tile_cell_cache.push(tc);
    };

    function TileCell(inst_, x_, y_) {
        this.inst = inst_;
        this.x = x_;
        this.y = y_;
        this.left = this.x * this.inst.cellwidth * this.inst.tilewidth;
        this.top = this.y * this.inst.cellheight * this.inst.tileheight;
        this.tiles = [];
        this.quads = [];
        this.collision_rects = [];
        this.quadmap_valid = false;
        var i, len, j, lenj, arr;
        for (i = 0, len = this.inst.cellheight; i < len; ++i) {
            arr = [];
            for (j = 0, lenj = this.inst.cellwidth; j < lenj; ++j)
                arr.push(-1);
            this.tiles.push(arr);
        }
    };
    TileCell.prototype.clear = function() {
        var i, len, j, lenj, arr;
        this.tiles.length = this.inst.cellheight;
        for (i = 0, len = this.tiles.length; i < len; ++i) {
            arr = this.tiles[i];
            if (!arr) {
                arr = [];
                this.tiles[i] = arr;
            }
            arr.length = this.inst.cellwidth;
            for (j = 0, lenj = arr.length; j < lenj; ++j)
                arr[j] = -1;
        }
    };
    TileCell.prototype.maybeBuildQuadMap = function() {
        if (this.quadmap_valid)
            return; // not changed
        var tilewidth = this.inst.tilewidth;
        var tileheight = this.inst.tileheight;
        if (tilewidth <= 0 || tileheight <= 0)
            return;
        var i, j, len, y, leny, x, lenx, arr, t, p, q;
        for (i = 0, len = this.quads.length; i < len; ++i)
            freeTileQuad(this.quads[i]);
        for (i = 0, len = this.collision_rects.length; i < len; ++i)
            freeCollRect(this.collision_rects[i]);
        cr.clearArray(this.quads);
        cr.clearArray(this.collision_rects);
        var extentwidth = Math.min(this.inst.mapwidth, Math.floor(this.inst.width / tilewidth));
        var extentheight = Math.min(this.inst.mapheight, Math.floor(this.inst.height / tileheight));
        extentwidth -= this.left / tilewidth;
        extentheight -= this.top / tileheight;
        if (extentwidth > this.inst.cellwidth)
            extentwidth = this.inst.cellwidth;
        if (extentheight > this.inst.cellheight)
            extentheight = this.inst.cellheight;
        var seamless = this.inst.seamless;
        var cur_quad = null;
        for (y = 0, leny = extentheight; y < leny; ++y) {
            arr = this.tiles[y];
            for (x = 0, lenx = extentwidth; x < lenx; ++x) {
                t = arr[x];
                if (t === -1) {
                    if (cur_quad) {
                        this.quads.push(cur_quad);
                        cur_quad = null;
                    }
                    continue;
                }
                if (seamless || !cur_quad || t !== cur_quad.id) {
                    if (cur_quad)
                        this.quads.push(cur_quad);
                    cur_quad = allocTileQuad();
                    cur_quad.id = t;
                    cur_quad.tileid = (t & TILE_ID_MASK);
                    cur_quad.horiz_flip = (t & TILE_FLIPPED_HORIZONTAL) !== 0;
                    cur_quad.vert_flip = (t & TILE_FLIPPED_VERTICAL) !== 0;
                    cur_quad.diag_flip = (t & TILE_FLIPPED_DIAGONAL) !== 0;
                    cur_quad.any_flip = (cur_quad.horiz_flip || cur_quad.vert_flip || cur_quad.diag_flip);
                    cur_quad.rc.left = x * tilewidth + this.left;
                    cur_quad.rc.top = y * tileheight + this.top;
                    cur_quad.rc.right = cur_quad.rc.left + tilewidth;
                    cur_quad.rc.bottom = cur_quad.rc.top + tileheight;
                } else {
                    cur_quad.rc.right += tilewidth;
                }
            }
            if (cur_quad) {
                this.quads.push(cur_quad);
                cur_quad = null;
            }
        }
        var cur_rect = null;
        var tileid, tilepoly;
        var cur_has_poly = false;
        var rc;
        for (y = 0, leny = extentheight; y < leny; ++y) {
            arr = this.tiles[y];
            for (x = 0, lenx = extentwidth; x < lenx; ++x) {
                t = arr[x];
                if (t === -1) {
                    if (cur_rect) {
                        this.collision_rects.push(cur_rect);
                        cur_rect = null;
                        cur_has_poly = false;
                    }
                    continue;
                }
                tileid = (t & TILE_ID_MASK);
                tilepoly = this.inst.type.getTilePoly(t);
                if (!cur_rect || tilepoly || cur_has_poly) {
                    if (cur_rect) {
                        this.collision_rects.push(cur_rect);
                        cur_rect = null;
                    };
                    cur_rect = allocCollRect();
                    cur_rect.id = t;
                    cur_rect.poly = tilepoly ? tilepoly : null;
                    rc = cur_rect.rc;
                    rc.left = x * tilewidth + this.left;
                    rc.top = y * tileheight + this.top;
                    rc.right = rc.left + tilewidth;
                    rc.bottom = rc.top + tileheight;
                    cur_has_poly = !!tilepoly;
                } else {
                    cur_rect.rc.right += tilewidth;
                }
            }
            if (cur_rect) {
                this.collision_rects.push(cur_rect);
                cur_rect = null;
                cur_has_poly = false;
            }
        }
        if (!seamless) {
            len = this.quads.length;
            for (i = 0; i < len; ++i) {
                q = this.quads[i];
                for (j = i + 1; j < len; ++j) {
                    p = this.quads[j];
                    if (p.rc.top < q.rc.bottom)
                        continue;
                    if (p.rc.top > q.rc.bottom)
                        break;
                    if (p.rc.right > q.rc.right || p.rc.left > q.rc.left)
                        break;
                    if (p.id === q.id && p.rc.left === q.rc.left && p.rc.right === q.rc.right) {
                        freeTileQuad(this.quads[j]);
                        this.quads.splice(j, 1);
                        --len;
                        q.rc.bottom += tileheight;
                        --j; // look at same j index again
                    }
                }
            }
        }
        len = this.collision_rects.length;
        var prc, qrc;
        for (i = 0; i < len; ++i) {
            q = this.collision_rects[i];
            if (q.poly)
                continue;
            qrc = q.rc;
            for (j = i + 1; j < len; ++j) {
                p = this.collision_rects[j];
                prc = p.rc;
                if (prc.top < qrc.bottom)
                    continue;
                if (prc.top > qrc.bottom)
                    break;
                if (prc.right > qrc.right || prc.left > qrc.left)
                    break;
                if (p.poly)
                    continue;
                if (prc.left === qrc.left && prc.right === qrc.right) {
                    freeCollRect(this.collision_rects[j]);
                    this.collision_rects.splice(j, 1);
                    --len;
                    qrc.bottom += tileheight;
                    --j; // look at same j index again
                }
            }
        }
        this.quadmap_valid = true;
    };
    TileCell.prototype.setTileAt = function(x_, y_, t_) {
        if (this.tiles[y_][x_] !== t_) {
            this.tiles[y_][x_] = t_;
            this.quadmap_valid = false;
            this.inst.any_quadmap_changed = true;
            this.inst.physics_changed = true;
            this.inst.runtime.redraw = true;
        }
    };
    instanceProto.onCreate = function() {;
        var i, len, p;
        this.visible = (this.properties[0] === 0);
        this.tilewidth = this.properties[1];
        this.tileheight = this.properties[2];
        this.tilexoffset = this.properties[3];
        this.tileyoffset = this.properties[4];
        this.tilexspacing = this.properties[5];
        this.tileyspacing = this.properties[6];
        this.seamless = (this.properties[7] !== 0);
        this.mapwidth = this.tilemap_width;
        this.mapheight = this.tilemap_height;
        this.lastwidth = this.width;
        this.lastheight = this.height;
        var tw = this.tilewidth;
        var th = this.tileheight;
        if (tw === 0)
            tw = 1;
        if (th === 0)
            th = 1;
        this.cellwidth = Math.ceil(this.runtime.original_width / tw);
        this.cellheight = Math.ceil(this.runtime.original_height / th);
        if (!this.type.tile_polys_cached) {
            this.type.tile_polys_cached = true;
            for (i = 0, len = this.type.tile_polys.length; i < len; ++i) {
                p = this.type.tile_polys[i];
                if (!p)
                    continue;
                this.type.cacheTilePoly(i, tw, th, false, false, false);
                this.type.cacheTilePoly(i, tw, th, false, false, true);
                this.type.cacheTilePoly(i, tw, th, false, true, false);
                this.type.cacheTilePoly(i, tw, th, false, true, true);
                this.type.cacheTilePoly(i, tw, th, true, false, false);
                this.type.cacheTilePoly(i, tw, th, true, false, true);
                this.type.cacheTilePoly(i, tw, th, true, true, false);
                this.type.cacheTilePoly(i, tw, th, true, true, true);
            }
        }
        if (!this.recycled)
            this.tilecells = [];
        this.maybeResizeTilemap(true);
        this.setTilesFromRLECSV(this.tilemap_data);
        this.type.maybeCutTiles(this.tilewidth, this.tileheight, this.tilexoffset, this.tileyoffset, this.tilexspacing, this.tileyspacing, this.seamless);
        this.physics_changed = false; // to indicate to physics behavior to recreate body
        this.any_quadmap_changed = true;
        this.maybeBuildAllQuadMap();
    };
    instanceProto.maybeBuildAllQuadMap = function() {
        if (!this.any_quadmap_changed)
            return; // no change
        var i, len, j, lenj, arr;
        for (i = 0, len = this.tilecells.length; i < len; ++i) {
            arr = this.tilecells[i];
            for (j = 0, lenj = arr.length; j < lenj; ++j) {
                arr[j].maybeBuildQuadMap();
            }
        }
        this.any_quadmap_changed = false;
    };
    instanceProto.setAllQuadMapChanged = function() {
        var i, len, j, lenj, arr;
        for (i = 0, len = this.tilecells.length; i < len; ++i) {
            arr = this.tilecells[i];
            for (j = 0, lenj = arr.length; j < lenj; ++j) {
                arr[j].quadmap_valid = false;
            }
        }
        this.any_quadmap_changed = true;
    };

    function RunLengthDecode(str) {
        var ret = [];
        var parts = str.split(",");
        var i, len, p, x, n, t, part;
        for (i = 0, len = parts.length; i < len; ++i) {
            p = parts[i];
            x = p.indexOf("x");
            if (x > -1) {
                n = parseInt(p.substring(0, x), 10);
                part = p.substring(x + 1);
                t = parseInt(part, 10);
                if (part.indexOf("h") > -1)
                    t = t | TILE_FLIPPED_HORIZONTAL;
                if (part.indexOf("v") > -1)
                    t = t | TILE_FLIPPED_VERTICAL;
                if (part.indexOf("d") > -1)
                    t = t | TILE_FLIPPED_DIAGONAL;
                for (; n > 0; --n)
                    ret.push(t);
            } else {
                t = parseInt(p, 10);
                if (p.indexOf("h") > -1)
                    t = t | TILE_FLIPPED_HORIZONTAL;
                if (p.indexOf("v") > -1)
                    t = t | TILE_FLIPPED_VERTICAL;
                if (p.indexOf("d") > -1)
                    t = t | TILE_FLIPPED_DIAGONAL;
                ret.push(t);
            }
        }
        return ret;
    };
    instanceProto.maybeResizeTilemap = function(force) {
        var curwidth = cr.floor(this.width / this.tilewidth);
        var curheight = cr.floor(this.height / this.tileheight);
        if (curwidth <= this.mapwidth && curheight <= this.mapheight && !force)
            return;
        var vcells, hcells;
        if (force) {
            vcells = Math.ceil(this.mapheight / this.cellheight);
            hcells = Math.ceil(this.mapwidth / this.cellwidth);
        } else {
            vcells = this.tilecells.length;
            hcells = Math.ceil(this.mapwidth / this.cellwidth);
            if (curheight > this.mapheight) {
                this.mapheight = curheight;
                vcells = Math.ceil(this.mapheight / this.cellheight);
            }
            if (curwidth > this.mapwidth) {
                this.mapwidth = curwidth;
                hcells = Math.ceil(this.mapwidth / this.cellwidth);
            }
            this.setAllQuadMapChanged();
            this.physics_changed = true;
            this.runtime.redraw = true;
        }
        var y, x, arr;
        for (y = 0; y < vcells; ++y) {
            arr = this.tilecells[y];
            if (!arr) {
                arr = [];
                for (x = 0; x < hcells; ++x)
                    arr.push(allocTileCell(this, x, y));
                this.tilecells[y] = arr;
            } else {
                for (x = arr.length; x < hcells; ++x)
                    arr.push(allocTileCell(this, x, y));
            }
        }
    };
    instanceProto.cellAt = function(tx, ty) {
        if (tx < 0 || ty < 0)
            return null;
        var cy = cr.floor(ty / this.cellheight);
        if (cy >= this.tilecells.length)
            return null;
        var row = this.tilecells[cy];
        var cx = cr.floor(tx / this.cellwidth);
        if (cx >= row.length)
            return null;
        return row[cx];
    };
    instanceProto.cellAtIndex = function(cx, cy) {
        if (cx < 0 || cy < 0 || cy >= this.tilecells.length)
            return null;
        var row = this.tilecells[cy];
        if (cx >= row.length)
            return null;
        return row[cx];
    };
    instanceProto.setTilesFromRLECSV = function(str) {
        var tilestream = RunLengthDecode(str);
        var next = 0;
        var y, x, arr, tile, cell;
        for (y = 0; y < this.mapheight; ++y) {
            for (x = 0; x < this.mapwidth; ++x) {
                tile = tilestream[next++];
                cell = this.cellAt(x, y);
                if (cell)
                    cell.setTileAt(x % this.cellwidth, y % this.cellheight, tile);
            }
        }
    };
    instanceProto.getTilesAsRLECSV = function() {
        var ret = "";
        if (this.mapwidth <= 0 || this.mapheight <= 0)
            return ret;
        var run_count = 1;
        var run_number = this.getTileAt(0, 0);
        var y, leny, x, lenx, t;
        var tileid, horiz_flip, vert_flip, diag_flip;
        lenx = cr.floor(this.width / this.tilewidth);
        leny = cr.floor(this.height / this.tileheight);
        for (y = 0; y < leny; ++y) {
            for (x = (y === 0 ? 1 : 0); x < lenx; ++x) {
                t = this.getTileAt(x, y);
                if (t === run_number)
                    ++run_count;
                else {
                    if (run_number === -1) {
                        tileid = -1;
                        horiz_flip = false;
                        vert_flip = false;
                        diag_flip = false;
                    } else {
                        tileid = (run_number & TILE_ID_MASK);
                        horiz_flip = (run_number & TILE_FLIPPED_HORIZONTAL) !== 0;
                        vert_flip = (run_number & TILE_FLIPPED_VERTICAL) !== 0;
                        diag_flip = (run_number & TILE_FLIPPED_DIAGONAL) !== 0;
                    }
                    if (run_count === 1)
                        ret += "" + tileid;
                    else
                        ret += "" + run_count + "x" + tileid;
                    if (horiz_flip)
                        ret += "h";
                    if (vert_flip)
                        ret += "v";
                    if (diag_flip)
                        ret += "d";
                    ret += ",";
                    run_count = 1;
                    run_number = t;
                }
            }
        }
        if (run_number === -1) {
            tileid = -1;
            horiz_flip = false;
            vert_flip = false;
            diag_flip = false;
        } else {
            tileid = (run_number & TILE_ID_MASK);
            horiz_flip = (run_number & TILE_FLIPPED_HORIZONTAL) !== 0;
            vert_flip = (run_number & TILE_FLIPPED_VERTICAL) !== 0;
            diag_flip = (run_number & TILE_FLIPPED_DIAGONAL) !== 0;
        }
        if (run_count === 1)
            ret += "" + tileid;
        else
            ret += "" + run_count + "x" + tileid;
        if (horiz_flip)
            ret += "h";
        if (vert_flip)
            ret += "v";
        if (diag_flip)
            ret += "d";
        return ret;
    };
    instanceProto.getTileAt = function(x_, y_) {
        x_ = Math.floor(x_);
        y_ = Math.floor(y_);
        if (x_ < 0 || y_ < 0 || x_ >= this.mapwidth || y_ >= this.mapheight)
            return -1;
        var cell = this.cellAt(x_, y_);
        if (!cell)
            return -1;
        return cell.tiles[y_ % this.cellheight][x_ % this.cellwidth];
    };
    instanceProto.setTileAt = function(x_, y_, t_) {
        x_ = Math.floor(x_);
        y_ = Math.floor(y_);
        if (x_ < 0 || y_ < 0 || x_ >= this.mapwidth || y_ >= this.mapheight)
            return -1;
        var cell = this.cellAt(x_, y_);
        if (!cell)
            return -1;
        cell.setTileAt(x_ % this.cellwidth, y_ % this.cellheight, t_);
    };
    instanceProto.worldToCellX = function(x) {
        return Math.floor((x - this.x) / (this.cellwidth * this.tilewidth));
    };
    instanceProto.worldToCellY = function(y) {
        return Math.floor((y - this.y) / (this.cellheight * this.tileheight));
    };
    instanceProto.worldToTileX = function(x) {
        return Math.floor((x - this.x) / this.tilewidth)
    };
    instanceProto.worldToTileY = function(y) {
        return Math.floor((y - this.y) / this.tileheight);
    };
    instanceProto.getCollisionRectCandidates = function(bbox, candidates) {
        var firstCellX = this.worldToCellX(bbox.left);
        var firstCellY = this.worldToCellY(bbox.top);
        var lastCellX = this.worldToCellX(bbox.right);
        var lastCellY = this.worldToCellY(bbox.bottom);
        var cx, cy, cell;
        for (cx = firstCellX; cx <= lastCellX; ++cx) {
            for (cy = firstCellY; cy <= lastCellY; ++cy) {
                cell = this.cellAtIndex(cx, cy);
                if (!cell)
                    continue;
                cell.maybeBuildQuadMap();
                cr.appendArray(candidates, cell.collision_rects);
            }
        }
    };
    instanceProto.testPointOverlapTile = function(x, y) {
        var tx = this.worldToTileX(x);
        var ty = this.worldToTileY(y);
        var tile = this.getTileAt(tx, ty);
        if (tile === -1)
            return false; // empty tile here
        var poly = this.type.getTilePoly(tile);
        if (!poly)
            return true; // no poly; whole tile registers overlap
        var tileStartX = (Math.floor((x - this.x) / this.tilewidth) * this.tilewidth) + this.x;
        var tileStartY = (Math.floor((y - this.y) / this.tileheight) * this.tileheight) + this.y;
        x -= tileStartX;
        y -= tileStartY;
        return poly.contains_pt(x, y);
    };
    instanceProto.getAllCollisionRects = function(candidates) {
        var i, len, j, lenj, row, cell;
        for (i = 0, len = this.tilecells.length; i < len; ++i) {
            row = this.tilecells[i];
            for (j = 0, lenj = row.length; j < lenj; ++j) {
                cell = row[j];
                cell.maybeBuildQuadMap();
                cr.appendArray(candidates, cell.collision_rects);
            }
        }
    };
    instanceProto.onDestroy = function() {
        var i, len, j, lenj, arr;
        for (i = 0, len = this.tilecells.length; i < len; ++i) {
            arr = this.tilecells[i];
            for (j = 0, lenj = arr.length; j < lenj; ++j) {
                freeTileCell(arr[j]);
            }
            cr.clearArray(arr);
        }
        cr.clearArray(this.tilecells);
    };
    instanceProto.saveToJSON = function() {
        this.maybeResizeTilemap();
        var curwidth = cr.floor(this.width / this.tilewidth);
        var curheight = cr.floor(this.height / this.tileheight);
        return {
            "w": curwidth,
            "h": curheight,
            "d": this.getTilesAsRLECSV()
        };
    };
    instanceProto.loadFromJSON = function(o) {
        this.mapwidth = o["w"];
        this.mapheight = o["h"];
        this.maybeResizeTilemap(true);
        this.setTilesFromRLECSV(o["d"]);
        this.physics_changed = true;
        this.setAllQuadMapChanged();
    };
    instanceProto.draw = function(ctx) {
        if (this.tilewidth <= 0 || this.tileheight <= 0)
            return;
        this.type.maybeCutTiles(this.tilewidth, this.tileheight, this.tilexoffset, this.tileyoffset, this.tilexspacing, this.tileyspacing, this.seamless);
        if (this.width !== this.lastwidth || this.height !== this.lastheight) {
            this.physics_changed = true;
            this.setAllQuadMapChanged();
            this.maybeBuildAllQuadMap();
            this.lastwidth = this.width;
            this.lastheight = this.height;
        }
        ctx.globalAlpha = this.opacity;
        var layer = this.layer;
        var viewLeft = layer.viewLeft;
        var viewTop = layer.viewTop;
        var viewRight = layer.viewRight;
        var viewBottom = layer.viewBottom;
        var myx = this.x;
        var myy = this.y;
        var seamless = this.seamless;
        var qrc;
        if (this.runtime.pixel_rounding) {
            myx = Math.round(myx);
            myy = Math.round(myy);
        }
        var cellWidthPx = this.cellwidth * this.tilewidth;
        var cellHeightPx = this.cellheight * this.tileheight;
        var firstCellX = Math.floor((viewLeft - myx) / cellWidthPx);
        var lastCellX = Math.floor((viewRight - myx) / cellWidthPx);
        var firstCellY = Math.floor((viewTop - myy) / cellHeightPx);
        var lastCellY = Math.floor((viewBottom - myy) / cellHeightPx);
        var offx = myx % this.tilewidth;
        var offy = myy % this.tileheight;
        if (this.seamless) {
            offx = 0;
            offy = 0;
        }
        if (offx !== 0 || offy !== 0) {
            ctx.save();
            ctx.translate(offx, offy);
            myx -= offx;
            myy -= offy;
            viewLeft -= offx;
            viewTop -= offy;
            viewRight -= offx;
            viewBottom -= offy;
        }
        var cx, cy, cell, i, len, q, qleft, qtop, qright, qbottom, img;
        for (cx = firstCellX; cx <= lastCellX; ++cx) {
            for (cy = firstCellY; cy <= lastCellY; ++cy) {
                cell = this.cellAtIndex(cx, cy);
                if (!cell)
                    continue;
                cell.maybeBuildQuadMap();
                for (i = 0, len = cell.quads.length; i < len; ++i) {
                    q = cell.quads[i];
                    if (q.id === -1)
                        continue;
                    qrc = q.rc;
                    qleft = qrc.left + myx;
                    qtop = qrc.top + myy;
                    qright = qrc.right + myx;
                    qbottom = qrc.bottom + myy;
                    if (qleft > viewRight || qright < viewLeft || qtop > viewBottom || qbottom < viewTop)
                        continue;
                    img = this.type.GetFlippedTileImage(q.tileid, q.horiz_flip, q.vert_flip, q.diag_flip, this.seamless);
                    if (seamless) {
                        ctx.drawImage(img, qleft, qtop);
                    } else {
                        ctx.fillStyle = this.type.GetFlippedTileImage(q.tileid, q.horiz_flip, q.vert_flip, q.diag_flip, this.seamless);
                        ctx.fillRect(qleft, qtop, qright - qleft, qbottom - qtop);
                    }
                }
                /*
                for (i = 0, len = cell.collision_rects.length; i < len; ++i)
                {
                	qrc = cell.collision_rects[i].rc;
                	qleft = qrc.left + myx;
                	qtop = qrc.top + myy;
                	qright = qrc.right + myx;
                	qbottom = qrc.bottom + myy;
                	ctx.strokeRect(qleft, qtop, qright - qleft, qbottom - qtop);
                }
                */
            }
        }
        if (offx !== 0 || offy !== 0)
            ctx.restore();
    };
    var tmp_rect = new cr.rect(0, 0, 1, 1);
    instanceProto.drawGL_earlyZPass = function(glw) {
        this.drawGL(glw);
    };
    instanceProto.drawGL = function(glw) {
        if (this.tilewidth <= 0 || this.tileheight <= 0)
            return;
        this.type.maybeCutTiles(this.tilewidth, this.tileheight, this.tilexoffset, this.tileyoffset, this.tilexspacing, this.tileyspacing, this.seamless);
        if (this.width !== this.lastwidth || this.height !== this.lastheight) {
            this.physics_changed = true;
            this.setAllQuadMapChanged();
            this.maybeBuildAllQuadMap();
            this.lastwidth = this.width;
            this.lastheight = this.height;
        }
        glw.setOpacity(this.opacity);
        var cut_tiles = this.type.cut_tiles;
        var layer = this.layer;
        var viewLeft = layer.viewLeft;
        var viewTop = layer.viewTop;
        var viewRight = layer.viewRight;
        var viewBottom = layer.viewBottom;
        var myx = this.x;
        var myy = this.y;
        var qrc;
        if (this.runtime.pixel_rounding) {
            myx = Math.round(myx);
            myy = Math.round(myy);
        }
        var cellWidthPx = this.cellwidth * this.tilewidth;
        var cellHeightPx = this.cellheight * this.tileheight;
        var firstCellX = Math.floor((viewLeft - myx) / cellWidthPx);
        var lastCellX = Math.floor((viewRight - myx) / cellWidthPx);
        var firstCellY = Math.floor((viewTop - myy) / cellHeightPx);
        var lastCellY = Math.floor((viewBottom - myy) / cellHeightPx);
        var i, len, q, qleft, qtop, qright, qbottom;
        var qtlx, qtly, qtrx, qtry, qbrx, qbry, qblx, qbly, temp;
        var cx, cy, cell;
        for (cx = firstCellX; cx <= lastCellX; ++cx) {
            for (cy = firstCellY; cy <= lastCellY; ++cy) {
                cell = this.cellAtIndex(cx, cy);
                if (!cell)
                    continue;
                cell.maybeBuildQuadMap();
                for (i = 0, len = cell.quads.length; i < len; ++i) {
                    q = cell.quads[i];
                    if (q.id === -1)
                        continue;
                    qrc = q.rc;
                    qleft = qrc.left + myx;
                    qtop = qrc.top + myy;
                    qright = qrc.right + myx;
                    qbottom = qrc.bottom + myy;
                    if (qleft > viewRight || qright < viewLeft || qtop > viewBottom || qbottom < viewTop)
                        continue;
                    glw.setTexture(cut_tiles[q.tileid]);
                    tmp_rect.right = (qright - qleft) / this.tilewidth;
                    tmp_rect.bottom = (qbottom - qtop) / this.tileheight;
                    if (q.any_flip) {
                        if (q.diag_flip) {
                            temp = tmp_rect.right;
                            tmp_rect.right = tmp_rect.bottom;
                            tmp_rect.bottom = temp;
                        }
                        qtlx = 0;
                        qtly = 0;
                        qtrx = tmp_rect.right;
                        qtry = 0;
                        qbrx = tmp_rect.right;
                        qbry = tmp_rect.bottom;
                        qblx = 0;
                        qbly = tmp_rect.bottom;
                        if (q.diag_flip) {
                            temp = qblx;
                            qblx = qtrx;
                            qtrx = temp;
                            temp = qbly;
                            qbly = qtry;
                            qtry = temp;
                        }
                        if (q.horiz_flip) {
                            temp = qtlx;
                            qtlx = qtrx;
                            qtrx = temp;
                            temp = qtly;
                            qtly = qtry;
                            qtry = temp;
                            temp = qblx;
                            qblx = qbrx;
                            qbrx = temp;
                            temp = qbly;
                            qbly = qbry;
                            qbry = temp;
                        }
                        if (q.vert_flip) {
                            temp = qtlx;
                            qtlx = qblx;
                            qblx = temp;
                            temp = qtly;
                            qtly = qbly;
                            qbly = temp;
                            temp = qtrx;
                            qtrx = qbrx;
                            qbrx = temp;
                            temp = qtry;
                            qtry = qbry;
                            qbry = temp;
                        }
                        glw.quadTexUV(qleft, qtop, qright, qtop, qright, qbottom, qleft, qbottom, qtlx, qtly, qtrx, qtry, qbrx, qbry, qblx, qbly);
                    } else {
                        glw.quadTex(qleft, qtop, qright, qtop, qright, qbottom, qleft, qbottom, tmp_rect);
                    }
                }
            }
        }
    };

    function Cnds() {};
    Cnds.prototype.CompareTileAt = function(tx, ty, cmp, t) {
        var tile = this.getTileAt(tx, ty);
        if (tile !== -1)
            tile = (tile & TILE_ID_MASK);
        return cr.do_cmp(tile, cmp, t);
    };

    function StateComboToFlags(state) {
        switch (state) {
            case 0: // normal
                return 0;
            case 1: // flipped horizontal
                return TILE_FLIPPED_HORIZONTAL;
            case 2: // flipped vertical
                return TILE_FLIPPED_VERTICAL;
            case 3: // rotated 90
                return TILE_FLIPPED_HORIZONTAL | TILE_FLIPPED_DIAGONAL;
            case 4: // rotated 180
                return TILE_FLIPPED_HORIZONTAL | TILE_FLIPPED_VERTICAL;
            case 5: // rotated 270
                return TILE_FLIPPED_VERTICAL | TILE_FLIPPED_DIAGONAL;
            case 6: // rotated 90, flipped vertical
                return TILE_FLIPPED_HORIZONTAL | TILE_FLIPPED_VERTICAL | TILE_FLIPPED_DIAGONAL;
            case 7: // rotated 270, flipped vertical
                return TILE_FLIPPED_DIAGONAL;
            default:
                return 0;
        }
    };
    Cnds.prototype.CompareTileStateAt = function(tx, ty, state) {
        var tile = this.getTileAt(tx, ty);
        var flags = 0;
        if (tile !== -1)
            flags = (tile & TILE_FLAGS_MASK);
        return flags === StateComboToFlags(state);
    };
    Cnds.prototype.OnURLLoaded = function() {
        return true;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.EraseTile = function(tx, ty) {
        this.maybeResizeTilemap();
        this.setTileAt(tx, ty, -1);
    };
    Acts.prototype.SetTile = function(tx, ty, t, state) {
        this.maybeResizeTilemap();
        this.setTileAt(tx, ty, (t & TILE_ID_MASK) | StateComboToFlags(state));
    };
    Acts.prototype.SetTileState = function(tx, ty, state) {
        var t = this.getTileAt(tx, ty);
        if (t !== -1) {
            this.maybeResizeTilemap();
            this.setTileAt(tx, ty, (t & TILE_ID_MASK) | StateComboToFlags(state));
        }
    };
    Acts.prototype.EraseTileRange = function(tx, ty, tw, th) {
        var fromx = Math.floor(cr.max(tx, 0));
        var fromy = Math.floor(cr.max(ty, 0));
        var tox = Math.floor(cr.min(tx + tw, this.mapwidth));
        var toy = Math.floor(cr.min(ty + th, this.mapheight));
        var x, y;
        for (y = fromy; y < toy; ++y) {
            for (x = fromx; x < tox; ++x) {
                this.setTileAt(x, y, -1);
            }
        }
    };
    Acts.prototype.SetTileRange = function(tx, ty, tw, th, t, state) {
        this.maybeResizeTilemap();
        var fromx = Math.floor(cr.max(tx, 0));
        var fromy = Math.floor(cr.max(ty, 0));
        var tox = Math.floor(cr.min(tx + tw, this.mapwidth));
        var toy = Math.floor(cr.min(ty + th, this.mapheight));
        var settile = (t & TILE_ID_MASK) | StateComboToFlags(state);
        var x, y;
        for (y = fromy; y < toy; ++y) {
            for (x = fromx; x < tox; ++x) {
                this.setTileAt(x, y, settile);
            }
        }
    };
    Acts.prototype.SetTileStateRange = function(tx, ty, tw, th, state) {
        this.maybeResizeTilemap();
        var fromx = Math.floor(cr.max(tx, 0));
        var fromy = Math.floor(cr.max(ty, 0));
        var tox = Math.floor(cr.min(tx + tw, this.mapwidth));
        var toy = Math.floor(cr.min(ty + th, this.mapheight));
        var setstate = StateComboToFlags(state);
        var x, y, t;
        for (y = fromy; y < toy; ++y) {
            for (x = fromx; x < tox; ++x) {
                t = this.getTileAt(x, y);
                if (t !== -1)
                    this.setTileAt(x, y, (t & TILE_ID_MASK) | setstate);
            }
        }
    };
    Acts.prototype.LoadFromJSON = function(str) {
        var o;
        try {
            o = JSON.parse(str);
        } catch (e) {
            return;
        }
        if (!o["c2tilemap"])
            return; // not a known tilemap data format
        this.mapwidth = o["width"];
        this.mapheight = o["height"];
        this.maybeResizeTilemap(true);
        this.setTilesFromRLECSV(o["data"]);
        this.setAllQuadMapChanged();
        this.physics_changed = true;
    };
    Acts.prototype.JSONDownload = function(filename) {
        var a = document.createElement("a");
        var o = {
            "c2tilemap": true,
            "width": this.mapwidth,
            "height": this.mapheight,
            "data": this.getTilesAsRLECSV()
        };
        if (typeof a.download === "undefined") {
            var str = 'data:text/html,' + encodeURIComponent("<p><a download='data.json' href=\"data:application/json," +
                encodeURIComponent(JSON.stringify(o)) +
                "\">Download link</a></p>");
            window.open(str);
        } else {
            var body = document.getElementsByTagName("body")[0];
            a.textContent = filename;
            a.href = "data:application/json," + encodeURIComponent(JSON.stringify(o));
            a.download = filename;
            body.appendChild(a);
            var clickEvent = document.createEvent("MouseEvent");
            clickEvent.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            a.dispatchEvent(clickEvent);
            body.removeChild(a);
        }
    };
    Acts.prototype.LoadURL = function(url_, crossOrigin_) {
        var img = new Image();
        var self = this;
        img.onload = function() {
            var type = self.type;
            type.freeCutTiles();
            type.texture_img = img;
            self.runtime.redraw = true;
            self.runtime.trigger(cr.plugins_.Tilemap.prototype.cnds.OnURLLoaded, self);
        };
        if (url_.substr(0, 5) !== "data:" && crossOrigin_ === 0)
            img.crossOrigin = "anonymous";
        this.runtime.setImageSrc(img, url_);
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.TileAt = function(ret, tx, ty) {
        var tile = this.getTileAt(tx, ty);
        ret.set_int(tile === -1 ? -1 : (tile & TILE_ID_MASK));
    };
    Exps.prototype.PositionToTileX = function(ret, x_) {
        ret.set_float(this.worldToTileX(x_));
    };
    Exps.prototype.PositionToTileY = function(ret, y_) {
        ret.set_float(this.worldToTileY(y_));
    };
    Exps.prototype.TileToPositionX = function(ret, x_) {
        ret.set_float((x_ * this.tilewidth) + this.x + (this.tilewidth / 2));
    };
    Exps.prototype.TileToPositionY = function(ret, y_) {
        ret.set_float((y_ * this.tileheight) + this.y + (this.tileheight / 2));
    };
    Exps.prototype.SnapX = function(ret, x_) {
        ret.set_float((Math.floor((x_ - this.x) / this.tilewidth) * this.tilewidth) + this.x + (this.tilewidth / 2));
    };
    Exps.prototype.SnapY = function(ret, y_) {
        ret.set_float((Math.floor((y_ - this.y) / this.tileheight) * this.tileheight) + this.y + (this.tileheight / 2));
    };
    Exps.prototype.TilesJSON = function(ret) {
        this.maybeResizeTilemap();
        var curwidth = cr.floor(this.width / this.tilewidth);
        var curheight = cr.floor(this.height / this.tileheight);
        ret.set_string(JSON.stringify({
            "c2tilemap": true,
            "width": curwidth,
            "height": curheight,
            "data": this.getTilesAsRLECSV()
        }));
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.Touch = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.Touch.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
        this.touches = [];
        this.mouseDown = false;
    };
    var instanceProto = pluginProto.Instance.prototype;
    var dummyoffset = {
        left: 0,
        top: 0
    };
    instanceProto.findTouch = function(id) {
        var i, len;
        for (i = 0, len = this.touches.length; i < len; i++) {
            if (this.touches[i]["id"] === id)
                return i;
        }
        return -1;
    };
    var appmobi_accx = 0;
    var appmobi_accy = 0;
    var appmobi_accz = 0;

    function AppMobiGetAcceleration(evt) {
        appmobi_accx = evt.x;
        appmobi_accy = evt.y;
        appmobi_accz = evt.z;
    };
    var pg_accx = 0;
    var pg_accy = 0;
    var pg_accz = 0;

    function PhoneGapGetAcceleration(evt) {
        pg_accx = evt.x;
        pg_accy = evt.y;
        pg_accz = evt.z;
    };
    var theInstance = null;
    var touchinfo_cache = [];

    function AllocTouchInfo(x, y, id, index) {
        var ret;
        if (touchinfo_cache.length)
            ret = touchinfo_cache.pop();
        else
            ret = new TouchInfo();
        ret.init(x, y, id, index);
        return ret;
    };

    function ReleaseTouchInfo(ti) {
        if (touchinfo_cache.length < 100)
            touchinfo_cache.push(ti);
    };
    var GESTURE_HOLD_THRESHOLD = 15; // max px motion for hold gesture to register
    var GESTURE_HOLD_TIMEOUT = 500; // time for hold gesture to register
    var GESTURE_TAP_TIMEOUT = 333; // time for tap gesture to register
    var GESTURE_DOUBLETAP_THRESHOLD = 25; // max distance apart for taps to be
    function TouchInfo() {
        this.starttime = 0;
        this.time = 0;
        this.lasttime = 0;
        this.startx = 0;
        this.starty = 0;
        this.x = 0;
        this.y = 0;
        this.lastx = 0;
        this.lasty = 0;
        this["id"] = 0;
        this.startindex = 0;
        this.triggeredHold = false;
        this.tooFarForHold = false;
    };
    TouchInfo.prototype.init = function(x, y, id, index) {
        var nowtime = cr.performance_now();
        this.time = nowtime;
        this.lasttime = nowtime;
        this.starttime = nowtime;
        this.startx = x;
        this.starty = y;
        this.x = x;
        this.y = y;
        this.lastx = x;
        this.lasty = y;
        this.width = 0;
        this.height = 0;
        this.pressure = 0;
        this["id"] = id;
        this.startindex = index;
        this.triggeredHold = false;
        this.tooFarForHold = false;
    };
    TouchInfo.prototype.update = function(nowtime, x, y, width, height, pressure) {
        this.lasttime = this.time;
        this.time = nowtime;
        this.lastx = this.x;
        this.lasty = this.y;
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.pressure = pressure;
        if (!this.tooFarForHold && cr.distanceTo(this.startx, this.starty, this.x, this.y) >= GESTURE_HOLD_THRESHOLD) {
            this.tooFarForHold = true;
        }
    };
    TouchInfo.prototype.maybeTriggerHold = function(inst, index) {
        if (this.triggeredHold)
            return; // already triggered this gesture
        var nowtime = cr.performance_now();
        if (nowtime - this.starttime >= GESTURE_HOLD_TIMEOUT && !this.tooFarForHold && cr.distanceTo(this.startx, this.starty, this.x, this.y) < GESTURE_HOLD_THRESHOLD) {
            this.triggeredHold = true;
            inst.trigger_index = this.startindex;
            inst.trigger_id = this["id"];
            inst.getTouchIndex = index;
            inst.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnHoldGesture, inst);
            inst.curTouchX = this.x;
            inst.curTouchY = this.y;
            inst.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnHoldGestureObject, inst);
            inst.getTouchIndex = 0;
        }
    };
    var lastTapX = -1000;
    var lastTapY = -1000;
    var lastTapTime = -10000;
    TouchInfo.prototype.maybeTriggerTap = function(inst, index) {
        if (this.triggeredHold)
            return;
        var nowtime = cr.performance_now();
        if (nowtime - this.starttime <= GESTURE_TAP_TIMEOUT && !this.tooFarForHold && cr.distanceTo(this.startx, this.starty, this.x, this.y) < GESTURE_HOLD_THRESHOLD) {
            inst.trigger_index = this.startindex;
            inst.trigger_id = this["id"];
            inst.getTouchIndex = index;
            if ((nowtime - lastTapTime <= GESTURE_TAP_TIMEOUT * 2) && cr.distanceTo(lastTapX, lastTapY, this.x, this.y) < GESTURE_DOUBLETAP_THRESHOLD) {
                inst.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnDoubleTapGesture, inst);
                inst.curTouchX = this.x;
                inst.curTouchY = this.y;
                inst.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnDoubleTapGestureObject, inst);
                lastTapX = -1000;
                lastTapY = -1000;
                lastTapTime = -10000;
            } else {
                inst.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTapGesture, inst);
                inst.curTouchX = this.x;
                inst.curTouchY = this.y;
                inst.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTapGestureObject, inst);
                lastTapX = this.x;
                lastTapY = this.y;
                lastTapTime = nowtime;
            }
            inst.getTouchIndex = 0;
        }
    };
    instanceProto.onCreate = function() {
        theInstance = this;
        this.isWindows8 = !!(typeof window["c2isWindows8"] !== "undefined" && window["c2isWindows8"]);
        this.orient_alpha = 0;
        this.orient_beta = 0;
        this.orient_gamma = 0;
        this.acc_g_x = 0;
        this.acc_g_y = 0;
        this.acc_g_z = 0;
        this.acc_x = 0;
        this.acc_y = 0;
        this.acc_z = 0;
        this.curTouchX = 0;
        this.curTouchY = 0;
        this.trigger_index = 0;
        this.trigger_id = 0;
        this.trigger_permission = 0;
        this.getTouchIndex = 0;
        this.useMouseInput = (this.properties[0] !== 0);
        var elem = (this.runtime.fullscreen_mode > 0) ? document : this.runtime.canvas;
        var elem2 = document;
        if (this.runtime.isDirectCanvas)
            elem2 = elem = window["Canvas"];
        else if (this.runtime.isCocoonJs)
            elem2 = elem = window;
        var self = this;
        if (typeof PointerEvent !== "undefined") {
            elem.addEventListener("pointerdown",
                function(info) {
                    self.onPointerStart(info);
                },
                false
            );
            elem.addEventListener("pointermove",
                function(info) {
                    self.onPointerMove(info);
                },
                false
            );
            elem2.addEventListener("pointerup",
                function(info) {
                    self.onPointerEnd(info, false);
                },
                false
            );
            elem2.addEventListener("pointercancel",
                function(info) {
                    self.onPointerEnd(info, true);
                },
                false
            );
            if (this.runtime.canvas) {
                this.runtime.canvas.addEventListener("MSGestureHold", function(e) {
                    e.preventDefault();
                }, false);
                document.addEventListener("MSGestureHold", function(e) {
                    e.preventDefault();
                }, false);
                this.runtime.canvas.addEventListener("gesturehold", function(e) {
                    e.preventDefault();
                }, false);
                document.addEventListener("gesturehold", function(e) {
                    e.preventDefault();
                }, false);
            }
        } else if (window.navigator["msPointerEnabled"]) {
            elem.addEventListener("MSPointerDown",
                function(info) {
                    self.onPointerStart(info);
                },
                false
            );
            elem.addEventListener("MSPointerMove",
                function(info) {
                    self.onPointerMove(info);
                },
                false
            );
            elem2.addEventListener("MSPointerUp",
                function(info) {
                    self.onPointerEnd(info, false);
                },
                false
            );
            elem2.addEventListener("MSPointerCancel",
                function(info) {
                    self.onPointerEnd(info, true);
                },
                false
            );
            if (this.runtime.canvas) {
                this.runtime.canvas.addEventListener("MSGestureHold", function(e) {
                    e.preventDefault();
                }, false);
                document.addEventListener("MSGestureHold", function(e) {
                    e.preventDefault();
                }, false);
            }
        } else {
            elem.addEventListener("touchstart",
                function(info) {
                    self.onTouchStart(info);
                },
                false
            );
            elem.addEventListener("touchmove",
                function(info) {
                    self.onTouchMove(info);
                },
                false
            );
            elem2.addEventListener("touchend",
                function(info) {
                    self.onTouchEnd(info, false);
                },
                false
            );
            elem2.addEventListener("touchcancel",
                function(info) {
                    self.onTouchEnd(info, true);
                },
                false
            );
        }
        if (this.isWindows8) {
            var win8accelerometerFn = function(e) {
                var reading = e["reading"];
                self.acc_x = reading["accelerationX"];
                self.acc_y = reading["accelerationY"];
                self.acc_z = reading["accelerationZ"];
            };
            var win8inclinometerFn = function(e) {
                var reading = e["reading"];
                self.orient_alpha = reading["yawDegrees"];
                self.orient_beta = reading["pitchDegrees"];
                self.orient_gamma = reading["rollDegrees"];
            };
            var accelerometer = Windows["Devices"]["Sensors"]["Accelerometer"]["getDefault"]();
            if (accelerometer) {
                accelerometer["reportInterval"] = Math.max(accelerometer["minimumReportInterval"], 16);
                accelerometer.addEventListener("readingchanged", win8accelerometerFn);
            }
            var inclinometer = Windows["Devices"]["Sensors"]["Inclinometer"]["getDefault"]();
            if (inclinometer) {
                inclinometer["reportInterval"] = Math.max(inclinometer["minimumReportInterval"], 16);
                inclinometer.addEventListener("readingchanged", win8inclinometerFn);
            }
            document.addEventListener("visibilitychange", function(e) {
                if (document["hidden"] || document["msHidden"]) {
                    if (accelerometer)
                        accelerometer.removeEventListener("readingchanged", win8accelerometerFn);
                    if (inclinometer)
                        inclinometer.removeEventListener("readingchanged", win8inclinometerFn);
                } else {
                    if (accelerometer)
                        accelerometer.addEventListener("readingchanged", win8accelerometerFn);
                    if (inclinometer)
                        inclinometer.addEventListener("readingchanged", win8inclinometerFn);
                }
            }, false);
        } else {
            window.addEventListener("deviceorientation", function(eventData) {
                self.orient_alpha = eventData["alpha"] || 0;
                self.orient_beta = eventData["beta"] || 0;
                self.orient_gamma = eventData["gamma"] || 0;
            }, false);
            window.addEventListener("devicemotion", function(eventData) {
                if (eventData["accelerationIncludingGravity"]) {
                    self.acc_g_x = eventData["accelerationIncludingGravity"]["x"] || 0;
                    self.acc_g_y = eventData["accelerationIncludingGravity"]["y"] || 0;
                    self.acc_g_z = eventData["accelerationIncludingGravity"]["z"] || 0;
                }
                if (eventData["acceleration"]) {
                    self.acc_x = eventData["acceleration"]["x"] || 0;
                    self.acc_y = eventData["acceleration"]["y"] || 0;
                    self.acc_z = eventData["acceleration"]["z"] || 0;
                }
            }, false);
        }
        if (this.useMouseInput && !this.runtime.isDomFree) {
            jQuery(document).mousemove(
                function(info) {
                    self.onMouseMove(info);
                }
            );
            jQuery(document).mousedown(
                function(info) {
                    self.onMouseDown(info);
                }
            );
            jQuery(document).mouseup(
                function(info) {
                    self.onMouseUp(info);
                }
            );
        }
        if (!this.runtime.isiOS && this.runtime.isCordova && navigator["accelerometer"] && navigator["accelerometer"]["watchAcceleration"]) {
            navigator["accelerometer"]["watchAcceleration"](PhoneGapGetAcceleration, null, {
                "frequency": 40
            });
        }
        this.runtime.tick2Me(this);
    };
    instanceProto.onPointerMove = function(info) {
        if (info["pointerType"] === info["MSPOINTER_TYPE_MOUSE"] || info["pointerType"] === "mouse")
            return;
        if (info.preventDefault)
            info.preventDefault();
        var i = this.findTouch(info["pointerId"]);
        var nowtime = cr.performance_now();
        if (i >= 0) {
            var offset = this.runtime.isDomFree ? dummyoffset : jQuery(this.runtime.canvas).offset();
            var t = this.touches[i];
            if (nowtime - t.time < 2)
                return;
            t.update(nowtime, info.pageX - offset.left, info.pageY - offset.top, info.width || 0, info.height || 0, info.pressure || 0);
        }
    };
    instanceProto.onPointerStart = function(info) {
        if (info["pointerType"] === info["MSPOINTER_TYPE_MOUSE"] || info["pointerType"] === "mouse")
            return;
        if (info.preventDefault && cr.isCanvasInputEvent(info))
            info.preventDefault();
        var offset = this.runtime.isDomFree ? dummyoffset : jQuery(this.runtime.canvas).offset();
        var touchx = info.pageX - offset.left;
        var touchy = info.pageY - offset.top;
        var nowtime = cr.performance_now();
        this.trigger_index = this.touches.length;
        this.trigger_id = info["pointerId"];
        this.touches.push(AllocTouchInfo(touchx, touchy, info["pointerId"], this.trigger_index));
        this.runtime.isInUserInputEvent = true;
        this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchStart, this);
        this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchStart, this);
        this.curTouchX = touchx;
        this.curTouchY = touchy;
        this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchObject, this);
        this.runtime.isInUserInputEvent = false;
    };
    instanceProto.onPointerEnd = function(info, isCancel) {
        if (info["pointerType"] === info["MSPOINTER_TYPE_MOUSE"] || info["pointerType"] === "mouse")
            return;
        if (info.preventDefault && cr.isCanvasInputEvent(info))
            info.preventDefault();
        var i = this.findTouch(info["pointerId"]);
        this.trigger_index = (i >= 0 ? this.touches[i].startindex : -1);
        this.trigger_id = (i >= 0 ? this.touches[i]["id"] : -1);
        this.runtime.isInUserInputEvent = true;
        this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchEnd, this);
        this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchEnd, this);
        if (i >= 0) {
            if (!isCancel)
                this.touches[i].maybeTriggerTap(this, i);
            ReleaseTouchInfo(this.touches[i]);
            this.touches.splice(i, 1);
        }
        this.runtime.isInUserInputEvent = false;
    };
    instanceProto.onTouchMove = function(info) {
        if (info.preventDefault)
            info.preventDefault();
        var nowtime = cr.performance_now();
        var i, len, t, u;
        for (i = 0, len = info.changedTouches.length; i < len; i++) {
            t = info.changedTouches[i];
            var j = this.findTouch(t["identifier"]);
            if (j >= 0) {
                var offset = this.runtime.isDomFree ? dummyoffset : jQuery(this.runtime.canvas).offset();
                u = this.touches[j];
                if (nowtime - u.time < 2)
                    continue;
                var touchWidth = (t.radiusX || t.webkitRadiusX || t.mozRadiusX || t.msRadiusX || 0) * 2;
                var touchHeight = (t.radiusY || t.webkitRadiusY || t.mozRadiusY || t.msRadiusY || 0) * 2;
                var touchForce = t.force || t.webkitForce || t.mozForce || t.msForce || 0;
                u.update(nowtime, t.pageX - offset.left, t.pageY - offset.top, touchWidth, touchHeight, touchForce);
            }
        }
    };
    instanceProto.onTouchStart = function(info) {
        if (info.preventDefault && cr.isCanvasInputEvent(info))
            info.preventDefault();
        var offset = this.runtime.isDomFree ? dummyoffset : jQuery(this.runtime.canvas).offset();
        var nowtime = cr.performance_now();
        this.runtime.isInUserInputEvent = true;
        var i, len, t, j;
        for (i = 0, len = info.changedTouches.length; i < len; i++) {
            t = info.changedTouches[i];
            j = this.findTouch(t["identifier"]);
            if (j !== -1)
                continue;
            var touchx = t.pageX - offset.left;
            var touchy = t.pageY - offset.top;
            this.trigger_index = this.touches.length;
            this.trigger_id = t["identifier"];
            this.touches.push(AllocTouchInfo(touchx, touchy, t["identifier"], this.trigger_index));
            this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchStart, this);
            this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchStart, this);
            this.curTouchX = touchx;
            this.curTouchY = touchy;
            this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchObject, this);
        }
        this.runtime.isInUserInputEvent = false;
    };
    instanceProto.onTouchEnd = function(info, isCancel) {
        if (info.preventDefault && cr.isCanvasInputEvent(info))
            info.preventDefault();
        this.runtime.isInUserInputEvent = true;
        var i, len, t, j;
        for (i = 0, len = info.changedTouches.length; i < len; i++) {
            t = info.changedTouches[i];
            j = this.findTouch(t["identifier"]);
            if (j >= 0) {
                this.trigger_index = this.touches[j].startindex;
                this.trigger_id = this.touches[j]["id"];
                this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnNthTouchEnd, this);
                this.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnTouchEnd, this);
                if (!isCancel)
                    this.touches[j].maybeTriggerTap(this, j);
                ReleaseTouchInfo(this.touches[j]);
                this.touches.splice(j, 1);
            }
        }
        this.runtime.isInUserInputEvent = false;
    };
    instanceProto.getAlpha = function() {
        if (this.runtime.isCordova && this.orient_alpha === 0 && pg_accz !== 0)
            return pg_accz * 90;
        else
            return this.orient_alpha;
    };
    instanceProto.getBeta = function() {
        if (this.runtime.isCordova && this.orient_beta === 0 && pg_accy !== 0)
            return pg_accy * 90;
        else
            return this.orient_beta;
    };
    instanceProto.getGamma = function() {
        if (this.runtime.isCordova && this.orient_gamma === 0 && pg_accx !== 0)
            return pg_accx * 90;
        else
            return this.orient_gamma;
    };
    var noop_func = function() {};

    function isCompatibilityMouseEvent(e) {
        return (e["sourceCapabilities"] && e["sourceCapabilities"]["firesTouchEvents"]) ||
            (e.originalEvent && e.originalEvent["sourceCapabilities"] && e.originalEvent["sourceCapabilities"]["firesTouchEvents"]);
    };
    instanceProto.onMouseDown = function(info) {
        if (isCompatibilityMouseEvent(info))
            return;
        var t = {
            pageX: info.pageX,
            pageY: info.pageY,
            "identifier": 0
        };
        var fakeinfo = {
            changedTouches: [t]
        };
        this.onTouchStart(fakeinfo);
        this.mouseDown = true;
    };
    instanceProto.onMouseMove = function(info) {
        if (!this.mouseDown)
            return;
        if (isCompatibilityMouseEvent(info))
            return;
        var t = {
            pageX: info.pageX,
            pageY: info.pageY,
            "identifier": 0
        };
        var fakeinfo = {
            changedTouches: [t]
        };
        this.onTouchMove(fakeinfo);
    };
    instanceProto.onMouseUp = function(info) {
        if (info.preventDefault && this.runtime.had_a_click && !this.runtime.isMobile)
            info.preventDefault();
        this.runtime.had_a_click = true;
        if (isCompatibilityMouseEvent(info))
            return;
        var t = {
            pageX: info.pageX,
            pageY: info.pageY,
            "identifier": 0
        };
        var fakeinfo = {
            changedTouches: [t]
        };
        this.onTouchEnd(fakeinfo);
        this.mouseDown = false;
    };
    instanceProto.tick2 = function() {
        var i, len, t;
        var nowtime = cr.performance_now();
        for (i = 0, len = this.touches.length; i < len; ++i) {
            t = this.touches[i];
            if (t.time <= nowtime - 50)
                t.lasttime = nowtime;
            t.maybeTriggerHold(this, i);
        }
    };

    function Cnds() {};
    Cnds.prototype.OnTouchStart = function() {
        return true;
    };
    Cnds.prototype.OnTouchEnd = function() {
        return true;
    };
    Cnds.prototype.IsInTouch = function() {
        return this.touches.length;
    };
    Cnds.prototype.OnTouchObject = function(type) {
        if (!type)
            return false;
        return this.runtime.testAndSelectCanvasPointOverlap(type, this.curTouchX, this.curTouchY, false);
    };
    var touching = [];
    Cnds.prototype.IsTouchingObject = function(type) {
        if (!type)
            return false;
        var sol = type.getCurrentSol();
        var instances = sol.getObjects();
        var px, py;
        var i, leni, j, lenj;
        for (i = 0, leni = instances.length; i < leni; i++) {
            var inst = instances[i];
            inst.update_bbox();
            for (j = 0, lenj = this.touches.length; j < lenj; j++) {
                var touch = this.touches[j];
                px = inst.layer.canvasToLayer(touch.x, touch.y, true);
                py = inst.layer.canvasToLayer(touch.x, touch.y, false);
                if (inst.contains_pt(px, py)) {
                    touching.push(inst);
                    break;
                }
            }
        }
        if (touching.length) {
            sol.select_all = false;
            cr.shallowAssignArray(sol.instances, touching);
            type.applySolToContainer();
            cr.clearArray(touching);
            return true;
        } else
            return false;
    };
    Cnds.prototype.CompareTouchSpeed = function(index, cmp, s) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length)
            return false;
        var t = this.touches[index];
        var dist = cr.distanceTo(t.x, t.y, t.lastx, t.lasty);
        var timediff = (t.time - t.lasttime) / 1000;
        var speed = 0;
        if (timediff > 0)
            speed = dist / timediff;
        return cr.do_cmp(speed, cmp, s);
    };
    Cnds.prototype.OrientationSupported = function() {
        return typeof window["DeviceOrientationEvent"] !== "undefined";
    };
    Cnds.prototype.MotionSupported = function() {
        return typeof window["DeviceMotionEvent"] !== "undefined";
    };
    Cnds.prototype.CompareOrientation = function(orientation_, cmp_, angle_) {
        var v = 0;
        if (orientation_ === 0)
            v = this.getAlpha();
        else if (orientation_ === 1)
            v = this.getBeta();
        else
            v = this.getGamma();
        return cr.do_cmp(v, cmp_, angle_);
    };
    Cnds.prototype.CompareAcceleration = function(acceleration_, cmp_, angle_) {
        var v = 0;
        if (acceleration_ === 0)
            v = this.acc_g_x;
        else if (acceleration_ === 1)
            v = this.acc_g_y;
        else if (acceleration_ === 2)
            v = this.acc_g_z;
        else if (acceleration_ === 3)
            v = this.acc_x;
        else if (acceleration_ === 4)
            v = this.acc_y;
        else if (acceleration_ === 5)
            v = this.acc_z;
        return cr.do_cmp(v, cmp_, angle_);
    };
    Cnds.prototype.OnNthTouchStart = function(touch_) {
        touch_ = Math.floor(touch_);
        return touch_ === this.trigger_index;
    };
    Cnds.prototype.OnNthTouchEnd = function(touch_) {
        touch_ = Math.floor(touch_);
        return touch_ === this.trigger_index;
    };
    Cnds.prototype.HasNthTouch = function(touch_) {
        touch_ = Math.floor(touch_);
        return this.touches.length >= touch_ + 1;
    };
    Cnds.prototype.OnHoldGesture = function() {
        return true;
    };
    Cnds.prototype.OnTapGesture = function() {
        return true;
    };
    Cnds.prototype.OnDoubleTapGesture = function() {
        return true;
    };
    Cnds.prototype.OnHoldGestureObject = function(type) {
        if (!type)
            return false;
        return this.runtime.testAndSelectCanvasPointOverlap(type, this.curTouchX, this.curTouchY, false);
    };
    Cnds.prototype.OnTapGestureObject = function(type) {
        if (!type)
            return false;
        return this.runtime.testAndSelectCanvasPointOverlap(type, this.curTouchX, this.curTouchY, false);
    };
    Cnds.prototype.OnDoubleTapGestureObject = function(type) {
        if (!type)
            return false;
        return this.runtime.testAndSelectCanvasPointOverlap(type, this.curTouchX, this.curTouchY, false);
    };
    Cnds.prototype.OnPermissionGranted = function(type) {
        return this.trigger_permission === type;
    };
    Cnds.prototype.OnPermissionDenied = function(type) {
        return this.trigger_permission === type;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.RequestPermission = function(type) {
        var self = this;
        var promise = Promise.resolve(true);
        if (type === 0) // orientation
        {
            if (window["DeviceOrientationEvent"] && window["DeviceOrientationEvent"]["requestPermission"]) {
                promise = window["DeviceOrientationEvent"]["requestPermission"]()
                    .then(function(state) {
                        return state === "granted";
                    });
            }
        } else // motion
        {
            if (window["DeviceMotionEvent"] && window["DeviceMotionEvent"]["requestPermission"]) {
                promise = window["DeviceMotionEvent"]["requestPermission"]()
                    .then(function(state) {
                        return state === "granted";
                    });
            }
        }
        promise.then(function(result) {
            self.trigger_permission = type;
            if (result)
                self.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnPermissionGranted, self);
            else
                self.runtime.trigger(cr.plugins_.Touch.prototype.cnds.OnPermissionDenied, self);
        });
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.TouchCount = function(ret) {
        ret.set_int(this.touches.length);
    };
    Exps.prototype.X = function(ret, layerparam) {
        var index = this.getTouchIndex;
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        var layer, oldScale, oldZoomRate, oldParallaxX, oldAngle;
        if (cr.is_undefined(layerparam)) {
            layer = this.runtime.getLayerByNumber(0);
            oldScale = layer.scale;
            oldZoomRate = layer.zoomRate;
            oldParallaxX = layer.parallaxX;
            oldAngle = layer.angle;
            layer.scale = 1;
            layer.zoomRate = 1.0;
            layer.parallaxX = 1.0;
            layer.angle = 0;
            ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, true));
            layer.scale = oldScale;
            layer.zoomRate = oldZoomRate;
            layer.parallaxX = oldParallaxX;
            layer.angle = oldAngle;
        } else {
            if (cr.is_number(layerparam))
                layer = this.runtime.getLayerByNumber(layerparam);
            else
                layer = this.runtime.getLayerByName(layerparam);
            if (layer)
                ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, true));
            else
                ret.set_float(0);
        }
    };
    Exps.prototype.XAt = function(ret, index, layerparam) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        var layer, oldScale, oldZoomRate, oldParallaxX, oldAngle;
        if (cr.is_undefined(layerparam)) {
            layer = this.runtime.getLayerByNumber(0);
            oldScale = layer.scale;
            oldZoomRate = layer.zoomRate;
            oldParallaxX = layer.parallaxX;
            oldAngle = layer.angle;
            layer.scale = 1;
            layer.zoomRate = 1.0;
            layer.parallaxX = 1.0;
            layer.angle = 0;
            ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, true));
            layer.scale = oldScale;
            layer.zoomRate = oldZoomRate;
            layer.parallaxX = oldParallaxX;
            layer.angle = oldAngle;
        } else {
            if (cr.is_number(layerparam))
                layer = this.runtime.getLayerByNumber(layerparam);
            else
                layer = this.runtime.getLayerByName(layerparam);
            if (layer)
                ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, true));
            else
                ret.set_float(0);
        }
    };
    Exps.prototype.XForID = function(ret, id, layerparam) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        var layer, oldScale, oldZoomRate, oldParallaxX, oldAngle;
        if (cr.is_undefined(layerparam)) {
            layer = this.runtime.getLayerByNumber(0);
            oldScale = layer.scale;
            oldZoomRate = layer.zoomRate;
            oldParallaxX = layer.parallaxX;
            oldAngle = layer.angle;
            layer.scale = 1;
            layer.zoomRate = 1.0;
            layer.parallaxX = 1.0;
            layer.angle = 0;
            ret.set_float(layer.canvasToLayer(touch.x, touch.y, true));
            layer.scale = oldScale;
            layer.zoomRate = oldZoomRate;
            layer.parallaxX = oldParallaxX;
            layer.angle = oldAngle;
        } else {
            if (cr.is_number(layerparam))
                layer = this.runtime.getLayerByNumber(layerparam);
            else
                layer = this.runtime.getLayerByName(layerparam);
            if (layer)
                ret.set_float(layer.canvasToLayer(touch.x, touch.y, true));
            else
                ret.set_float(0);
        }
    };
    Exps.prototype.Y = function(ret, layerparam) {
        var index = this.getTouchIndex;
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        var layer, oldScale, oldZoomRate, oldParallaxY, oldAngle;
        if (cr.is_undefined(layerparam)) {
            layer = this.runtime.getLayerByNumber(0);
            oldScale = layer.scale;
            oldZoomRate = layer.zoomRate;
            oldParallaxY = layer.parallaxY;
            oldAngle = layer.angle;
            layer.scale = 1;
            layer.zoomRate = 1.0;
            layer.parallaxY = 1.0;
            layer.angle = 0;
            ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, false));
            layer.scale = oldScale;
            layer.zoomRate = oldZoomRate;
            layer.parallaxY = oldParallaxY;
            layer.angle = oldAngle;
        } else {
            if (cr.is_number(layerparam))
                layer = this.runtime.getLayerByNumber(layerparam);
            else
                layer = this.runtime.getLayerByName(layerparam);
            if (layer)
                ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, false));
            else
                ret.set_float(0);
        }
    };
    Exps.prototype.YAt = function(ret, index, layerparam) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        var layer, oldScale, oldZoomRate, oldParallaxY, oldAngle;
        if (cr.is_undefined(layerparam)) {
            layer = this.runtime.getLayerByNumber(0);
            oldScale = layer.scale;
            oldZoomRate = layer.zoomRate;
            oldParallaxY = layer.parallaxY;
            oldAngle = layer.angle;
            layer.scale = 1;
            layer.zoomRate = 1.0;
            layer.parallaxY = 1.0;
            layer.angle = 0;
            ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, false));
            layer.scale = oldScale;
            layer.zoomRate = oldZoomRate;
            layer.parallaxY = oldParallaxY;
            layer.angle = oldAngle;
        } else {
            if (cr.is_number(layerparam))
                layer = this.runtime.getLayerByNumber(layerparam);
            else
                layer = this.runtime.getLayerByName(layerparam);
            if (layer)
                ret.set_float(layer.canvasToLayer(this.touches[index].x, this.touches[index].y, false));
            else
                ret.set_float(0);
        }
    };
    Exps.prototype.YForID = function(ret, id, layerparam) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        var layer, oldScale, oldZoomRate, oldParallaxY, oldAngle;
        if (cr.is_undefined(layerparam)) {
            layer = this.runtime.getLayerByNumber(0);
            oldScale = layer.scale;
            oldZoomRate = layer.zoomRate;
            oldParallaxY = layer.parallaxY;
            oldAngle = layer.angle;
            layer.scale = 1;
            layer.zoomRate = 1.0;
            layer.parallaxY = 1.0;
            layer.angle = 0;
            ret.set_float(layer.canvasToLayer(touch.x, touch.y, false));
            layer.scale = oldScale;
            layer.zoomRate = oldZoomRate;
            layer.parallaxY = oldParallaxY;
            layer.angle = oldAngle;
        } else {
            if (cr.is_number(layerparam))
                layer = this.runtime.getLayerByNumber(layerparam);
            else
                layer = this.runtime.getLayerByName(layerparam);
            if (layer)
                ret.set_float(layer.canvasToLayer(touch.x, touch.y, false));
            else
                ret.set_float(0);
        }
    };
    Exps.prototype.AbsoluteX = function(ret) {
        if (this.touches.length)
            ret.set_float(this.touches[0].x);
        else
            ret.set_float(0);
    };
    Exps.prototype.AbsoluteXAt = function(ret, index) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        ret.set_float(this.touches[index].x);
    };
    Exps.prototype.AbsoluteXForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        ret.set_float(touch.x);
    };
    Exps.prototype.AbsoluteY = function(ret) {
        if (this.touches.length)
            ret.set_float(this.touches[0].y);
        else
            ret.set_float(0);
    };
    Exps.prototype.AbsoluteYAt = function(ret, index) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        ret.set_float(this.touches[index].y);
    };
    Exps.prototype.AbsoluteYForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        ret.set_float(touch.y);
    };
    Exps.prototype.SpeedAt = function(ret, index) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        var t = this.touches[index];
        var dist = cr.distanceTo(t.x, t.y, t.lastx, t.lasty);
        var timediff = (t.time - t.lasttime) / 1000;
        if (timediff <= 0)
            ret.set_float(0);
        else
            ret.set_float(dist / timediff);
    };
    Exps.prototype.SpeedForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        var dist = cr.distanceTo(touch.x, touch.y, touch.lastx, touch.lasty);
        var timediff = (touch.time - touch.lasttime) / 1000;
        if (timediff <= 0)
            ret.set_float(0);
        else
            ret.set_float(dist / timediff);
    };
    Exps.prototype.AngleAt = function(ret, index) {
        index = Math.floor(index);
        if (index < 0 || index >= this.touches.length) {
            ret.set_float(0);
            return;
        }
        var t = this.touches[index];
        ret.set_float(cr.to_degrees(cr.angleTo(t.lastx, t.lasty, t.x, t.y)));
    };
    Exps.prototype.AngleForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        ret.set_float(cr.to_degrees(cr.angleTo(touch.lastx, touch.lasty, touch.x, touch.y)));
    };
    Exps.prototype.Alpha = function(ret) {
        ret.set_float(this.getAlpha());
    };
    Exps.prototype.Beta = function(ret) {
        ret.set_float(this.getBeta());
    };
    Exps.prototype.Gamma = function(ret) {
        ret.set_float(this.getGamma());
    };
    Exps.prototype.AccelerationXWithG = function(ret) {
        ret.set_float(this.acc_g_x);
    };
    Exps.prototype.AccelerationYWithG = function(ret) {
        ret.set_float(this.acc_g_y);
    };
    Exps.prototype.AccelerationZWithG = function(ret) {
        ret.set_float(this.acc_g_z);
    };
    Exps.prototype.AccelerationX = function(ret) {
        ret.set_float(this.acc_x);
    };
    Exps.prototype.AccelerationY = function(ret) {
        ret.set_float(this.acc_y);
    };
    Exps.prototype.AccelerationZ = function(ret) {
        ret.set_float(this.acc_z);
    };
    Exps.prototype.TouchIndex = function(ret) {
        ret.set_int(this.trigger_index);
    };
    Exps.prototype.TouchID = function(ret) {
        ret.set_float(this.trigger_id);
    };
    Exps.prototype.WidthForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        ret.set_float(touch.width);
    };
    Exps.prototype.HeightForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        ret.set_float(touch.height);
    };
    Exps.prototype.PressureForID = function(ret, id) {
        var index = this.findTouch(id);
        if (index < 0) {
            ret.set_float(0);
            return;
        }
        var touch = this.touches[index];
        ret.set_float(touch.pressure);
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.WebStorage = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.WebStorage.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
    };
    var instanceProto = pluginProto.Instance.prototype;
    var prefix = "";
    var is_arcade = (typeof window["is_scirra_arcade"] !== "undefined");
    if (is_arcade)
        prefix = "arcade" + window["scirra_arcade_id"];
    var isSupported = false;
    try {
        localStorage.getItem("test");
        isSupported = true;
    } catch (e) {
        isSupported = false;
    }
    instanceProto.onCreate = function() {
        if (!isSupported) {
            cr.logexport("[Construct 2] Webstorage plugin: local storage is not supported on this platform.");
        }
    };

    function Cnds() {};
    Cnds.prototype.LocalStorageEnabled = function() {
        return isSupported;
    };
    Cnds.prototype.SessionStorageEnabled = function() {
        return isSupported;
    };
    Cnds.prototype.LocalStorageExists = function(key) {
        if (!isSupported)
            return false;
        return localStorage.getItem(prefix + key) != null;
    };
    Cnds.prototype.SessionStorageExists = function(key) {
        if (!isSupported)
            return false;
        return sessionStorage.getItem(prefix + key) != null;
    };
    Cnds.prototype.OnQuotaExceeded = function() {
        return true;
    };
    Cnds.prototype.CompareKeyText = function(key, text_to_compare, case_sensitive) {
        if (!isSupported)
            return false;
        var value = localStorage.getItem(prefix + key) || "";
        if (case_sensitive)
            return value == text_to_compare;
        else
            return cr.equals_nocase(value, text_to_compare);
    };
    Cnds.prototype.CompareKeyNumber = function(key, cmp, x) {
        if (!isSupported)
            return false;
        var value = localStorage.getItem(prefix + key) || "";
        return cr.do_cmp(parseFloat(value), cmp, x);
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.StoreLocal = function(key, data) {
        if (!isSupported)
            return;
        try {
            localStorage.setItem(prefix + key, data);
        } catch (e) {
            this.runtime.trigger(cr.plugins_.WebStorage.prototype.cnds.OnQuotaExceeded, this);
        }
    };
    Acts.prototype.StoreSession = function(key, data) {
        if (!isSupported)
            return;
        try {
            sessionStorage.setItem(prefix + key, data);
        } catch (e) {
            this.runtime.trigger(cr.plugins_.WebStorage.prototype.cnds.OnQuotaExceeded, this);
        }
    };
    Acts.prototype.RemoveLocal = function(key) {
        if (!isSupported)
            return;
        localStorage.removeItem(prefix + key);
    };
    Acts.prototype.RemoveSession = function(key) {
        if (!isSupported)
            return;
        sessionStorage.removeItem(prefix + key);
    };
    Acts.prototype.ClearLocal = function() {
        if (!isSupported)
            return;
        if (!is_arcade)
            localStorage.clear();
    };
    Acts.prototype.ClearSession = function() {
        if (!isSupported)
            return;
        if (!is_arcade)
            sessionStorage.clear();
    };
    Acts.prototype.JSONLoad = function(json_, mode_) {
        if (!isSupported)
            return;
        var d;
        try {
            d = JSON.parse(json_);
        } catch (e) {
            return;
        }
        if (!d["c2dictionary"]) // presumably not a c2dictionary object
            return;
        var o = d["data"];
        if (mode_ === 0 && !is_arcade) // 'set' mode: must clear webstorage first
            localStorage.clear();
        var p;
        for (p in o) {
            if (o.hasOwnProperty(p)) {
                try {
                    localStorage.setItem(prefix + p, o[p]);
                } catch (e) {
                    this.runtime.trigger(cr.plugins_.WebStorage.prototype.cnds.OnQuotaExceeded, this);
                    return;
                }
            }
        }
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.LocalValue = function(ret, key) {
        if (!isSupported) {
            ret.set_string("");
            return;
        }
        ret.set_string(localStorage.getItem(prefix + key) || "");
    };
    Exps.prototype.SessionValue = function(ret, key) {
        if (!isSupported) {
            ret.set_string("");
            return;
        }
        ret.set_string(sessionStorage.getItem(prefix + key) || "");
    };
    Exps.prototype.LocalCount = function(ret) {
        if (!isSupported) {
            ret.set_int(0);
            return;
        }
        ret.set_int(is_arcade ? 0 : localStorage.length);
    };
    Exps.prototype.SessionCount = function(ret) {
        if (!isSupported) {
            ret.set_int(0);
            return;
        }
        ret.set_int(is_arcade ? 0 : sessionStorage.length);
    };
    Exps.prototype.LocalAt = function(ret, n) {
        if (is_arcade || !isSupported)
            ret.set_string("");
        else
            ret.set_string(localStorage.getItem(localStorage.key(n)) || "");
    };
    Exps.prototype.SessionAt = function(ret, n) {
        if (is_arcade || !isSupported)
            ret.set_string("");
        else
            ret.set_string(sessionStorage.getItem(sessionStorage.key(n)) || "");
    };
    Exps.prototype.LocalKeyAt = function(ret, n) {
        if (is_arcade || !isSupported)
            ret.set_string("");
        else
            ret.set_string(localStorage.key(n) || "");
    };
    Exps.prototype.SessionKeyAt = function(ret, n) {
        if (is_arcade || !isSupported)
            ret.set_string("");
        else
            ret.set_string(sessionStorage.key(n) || "");
    };
    Exps.prototype.AsJSON = function(ret) {
        if (!isSupported) {
            ret.set_string("");
            return;
        }
        var o = {},
            i, len, k;
        for (i = 0, len = localStorage.length; i < len; i++) {
            k = localStorage.key(i);
            if (is_arcade) {
                if (k.substr(0, prefix.length) === prefix) {
                    o[k.substr(prefix.length)] = localStorage.getItem(k);
                }
            } else
                o[k] = localStorage.getItem(k);
        }
        ret.set_string(JSON.stringify({
            "c2dictionary": true,
            "data": o
        }));
    };
    pluginProto.exps = new Exps();
}());;;
cr.plugins_.gamemonetize = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var pluginProto = cr.plugins_.gamemonetize.prototype;
    pluginProto.Type = function(plugin) {
        this.plugin = plugin;
        this.runtime = plugin.runtime;
    };
    var typeProto = pluginProto.Type.prototype;
    typeProto.onCreate = function() {};
    pluginProto.Instance = function(type) {
        this.type = type;
        this.runtime = type.runtime;
        window["gamemonetize"] = {};
        window["SDK_OPTIONS"] = {};
    };
    var instanceProto = pluginProto.Instance.prototype;
    var isSupported = false;
    instanceProto.onCreate = function() {
        if (!window["gamemonetize"] && !window["SDK_OPTIONS"]) {
            cr.logexport("[Construct 2] GameMonetize.com SDK is required to show advertisements within Cordova; other platforms are not supported.");
            return;
        }
        isSupported = true;
        this.gamemonetize = window["gamemonetize"];
        var self = this;
        this.gamemonetize["onInit"] = function() {
            cr.logexport("GameMonetize.com SDK: onInit");
            self.isShowingBannerAd = false;
            self.runtime.trigger(cr.plugins_.gamemonetize.prototype.cnds.onInit, self);
        };
        this.gamemonetize["onError"] = function() {
            cr.logexport("GameMonetize.com SDK: onError");
            self.isShowingBannerAd = true;
            self.runtime.trigger(cr.plugins_.gamemonetize.prototype.cnds.onError, self);
        };
        this.gamemonetize["onResumeGame"] = function() {
            cr.logexport("GameMonetize.com SDK: onResume");
            self.isShowingBannerAd = false;
            self.runtime.trigger(cr.plugins_.gamemonetize.prototype.cnds.onResumeGame, self);
        };
        this.gamemonetize["onPauseGame"] = function() {
            cr.logexport("GameMonetize.com SDK: onPauseGame");
            self.isShowingBannerAd = true;
            self.runtime.trigger(cr.plugins_.gamemonetize.prototype.cnds.onPauseGame, self);
        };
        this.gamemonetize["InitAds"] = function() {
            window["SDK_OPTIONS"] = {
                "gameId": self.properties[0],
                "advertisementSettings": {
                    "autoplay": false
                },
                "onEvent": function(event) {
                    switch (event.name) {
                        case "SDK_GAME_START":
                            self.gamemonetize["onResumeGame"]();
                            break;
                        case "SDK_GAME_PAUSE":
                            self.gamemonetize["onPauseGame"]();
                            break;
                        case "SDK_READY":
                            self.gamemonetize["onInit"]();
                            break;
                        case "SDK_ERROR":
                            self.gamemonetize["onError"]();
                            break;
                    }
                }
            };
            (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s);
                js.id = id;
                js.src = 'https://api.gamemonetize.com/sdk.js';
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'gamemonetize-sdk'));
        }
    };

    function Cnds() {};
    Cnds.prototype.IsShowingBanner = function() {
        return this.isShowingBannerAd;
    };
    Cnds.prototype.onInit = function() {
        return true;
    };
    Cnds.prototype.onError = function(data) {
        return true;
    };
    Cnds.prototype.onResumeGame = function(data) {
        return true;
    };
    Cnds.prototype.onPauseGame = function(data) {
        return true;
    };
    pluginProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.ShowBanner = function() {
        if (!isSupported) return;
        if (typeof(window["sdk"]["showBanner"]) === "undefined") {
            cr.logexport("GameMonetize.com SDK is not loaded or an ad blocker is present.");
            this.gamemonetize["onResumeGame"]();
            return;
        }
        window["sdk"]["showBanner"]();
        cr.logexport("ShowBanner");
        this.isShowingBannerAd = true;
    };
    Acts.prototype.PlayLog = function() {
        if (!isSupported) return;
        if (typeof(window["sdk"]["play"]) === "undefined") {
            cr.logexport("GameMonetize.com SDK is not loaded.");
            this.gamemonetize["onResumeGame"]();
            return;
        }
        window['sdk']["play"]();
    };
    Acts.prototype.CustomLog = function() {
        if (!isSupported) return;
        if (typeof(window['sdk']["customLog"]) === "undefined") {
            cr.logexport("GameMonetize.com SDK is not loaded.");
            this.gamemonetize["onResumeGame"]();
            return;
        }
        window['sdk']["customLog"]();
    };
    Acts.prototype.InitAds = function() {
        if (!isSupported) return;
        this.gamemonetize["InitAds"]();
    };
    pluginProto.acts = new Acts();

    function Exps() {};
    pluginProto.exps = new Exps();
}());;;
cr.behaviors.Anchor = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.Anchor.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {};
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        this.anch_left = this.properties[0]; // 0 = left, 1 = right, 2 = none
        this.anch_top = this.properties[1]; // 0 = top, 1 = bottom, 2 = none
        this.anch_right = this.properties[2]; // 0 = none, 1 = right
        this.anch_bottom = this.properties[3]; // 0 = none, 1 = bottom
        this.inst.update_bbox();
        this.xleft = this.inst.bbox.left;
        this.ytop = this.inst.bbox.top;
        this.xright = this.runtime.original_width - this.inst.bbox.left;
        this.ybottom = this.runtime.original_height - this.inst.bbox.top;
        this.rdiff = this.runtime.original_width - this.inst.bbox.right;
        this.bdiff = this.runtime.original_height - this.inst.bbox.bottom;
        this.enabled = (this.properties[4] !== 0);
    };
    behinstProto.saveToJSON = function() {
        return {
            "xleft": this.xleft,
            "ytop": this.ytop,
            "xright": this.xright,
            "ybottom": this.ybottom,
            "rdiff": this.rdiff,
            "bdiff": this.bdiff,
            "enabled": this.enabled
        };
    };
    behinstProto.loadFromJSON = function(o) {
        this.xleft = o["xleft"];
        this.ytop = o["ytop"];
        this.xright = o["xright"];
        this.ybottom = o["ybottom"];
        this.rdiff = o["rdiff"];
        this.bdiff = o["bdiff"];
        this.enabled = o["enabled"];
    };
    behinstProto.tick = function() {
        if (!this.enabled)
            return;
        var n;
        var layer = this.inst.layer;
        var inst = this.inst;
        var bbox = this.inst.bbox;
        if (this.anch_left === 0) {
            inst.update_bbox();
            n = (layer.viewLeft + this.xleft) - bbox.left;
            if (n !== 0) {
                inst.x += n;
                inst.set_bbox_changed();
            }
        } else if (this.anch_left === 1) {
            inst.update_bbox();
            n = (layer.viewRight - this.xright) - bbox.left;
            if (n !== 0) {
                inst.x += n;
                inst.set_bbox_changed();
            }
        }
        if (this.anch_top === 0) {
            inst.update_bbox();
            n = (layer.viewTop + this.ytop) - bbox.top;
            if (n !== 0) {
                inst.y += n;
                inst.set_bbox_changed();
            }
        } else if (this.anch_top === 1) {
            inst.update_bbox();
            n = (layer.viewBottom - this.ybottom) - bbox.top;
            if (n !== 0) {
                inst.y += n;
                inst.set_bbox_changed();
            }
        }
        if (this.anch_right === 1) {
            inst.update_bbox();
            n = (layer.viewRight - this.rdiff) - bbox.right;
            if (n !== 0) {
                inst.width += n;
                if (inst.width < 0)
                    inst.width = 0;
                inst.set_bbox_changed();
            }
        }
        if (this.anch_bottom === 1) {
            inst.update_bbox();
            n = (layer.viewBottom - this.bdiff) - bbox.bottom;
            if (n !== 0) {
                inst.height += n;
                if (inst.height < 0)
                    inst.height = 0;
                inst.set_bbox_changed();
            }
        }
    };

    function Cnds() {};
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetEnabled = function(e) {
        if (this.enabled && e === 0)
            this.enabled = false;
        else if (!this.enabled && e !== 0) {
            this.inst.update_bbox();
            this.xleft = this.inst.bbox.left;
            this.ytop = this.inst.bbox.top;
            this.xright = this.runtime.original_width - this.inst.bbox.left;
            this.ybottom = this.runtime.original_height - this.inst.bbox.top;
            this.rdiff = this.runtime.original_width - this.inst.bbox.right;
            this.bdiff = this.runtime.original_height - this.inst.bbox.bottom;
            this.enabled = true;
        }
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    behaviorProto.exps = new Exps();
}());;;
cr.behaviors.Bullet = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.Bullet.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {};
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        var speed = this.properties[0];
        this.acc = this.properties[1];
        this.g = this.properties[2];
        this.bounceOffSolid = (this.properties[3] !== 0);
        this.setAngle = (this.properties[4] !== 0);
        this.dx = Math.cos(this.inst.angle) * speed;
        this.dy = Math.sin(this.inst.angle) * speed;
        this.lastx = this.inst.x;
        this.lasty = this.inst.y;
        this.lastKnownAngle = this.inst.angle;
        this.travelled = 0;
        this.enabled = (this.properties[5] !== 0);
    };
    behinstProto.saveToJSON = function() {
        return {
            "acc": this.acc,
            "g": this.g,
            "dx": this.dx,
            "dy": this.dy,
            "lx": this.lastx,
            "ly": this.lasty,
            "lka": this.lastKnownAngle,
            "t": this.travelled,
            "e": this.enabled
        };
    };
    behinstProto.loadFromJSON = function(o) {
        this.acc = o["acc"];
        this.g = o["g"];
        this.dx = o["dx"];
        this.dy = o["dy"];
        this.lastx = o["lx"];
        this.lasty = o["ly"];
        this.lastKnownAngle = o["lka"];
        this.travelled = o["t"];
        this.enabled = o["e"];
    };
    behinstProto.tick = function() {
        if (!this.enabled)
            return;
        var dt = this.runtime.getDt(this.inst);
        var s, a;
        var bounceSolid, bounceAngle;
        if (this.inst.angle !== this.lastKnownAngle) {
            if (this.setAngle) {
                s = cr.distanceTo(0, 0, this.dx, this.dy);
                this.dx = Math.cos(this.inst.angle) * s;
                this.dy = Math.sin(this.inst.angle) * s;
            }
            this.lastKnownAngle = this.inst.angle;
        }
        if (this.acc !== 0) {
            s = cr.distanceTo(0, 0, this.dx, this.dy);
            if (this.dx === 0 && this.dy === 0)
                a = this.inst.angle;
            else
                a = cr.angleTo(0, 0, this.dx, this.dy);
            s += this.acc * dt;
            if (s < 0)
                s = 0;
            this.dx = Math.cos(a) * s;
            this.dy = Math.sin(a) * s;
        }
        if (this.g !== 0)
            this.dy += this.g * dt;
        this.lastx = this.inst.x;
        this.lasty = this.inst.y;
        if (this.dx !== 0 || this.dy !== 0) {
            this.inst.x += this.dx * dt;
            this.inst.y += this.dy * dt;
            this.travelled += cr.distanceTo(0, 0, this.dx * dt, this.dy * dt)
            if (this.setAngle) {
                this.inst.angle = cr.angleTo(0, 0, this.dx, this.dy);
                this.inst.set_bbox_changed();
                this.lastKnownAngle = this.inst.angle;
            }
            this.inst.set_bbox_changed();
            if (this.bounceOffSolid) {
                bounceSolid = this.runtime.testOverlapSolid(this.inst);
                if (bounceSolid) {
                    this.runtime.registerCollision(this.inst, bounceSolid);
                    s = cr.distanceTo(0, 0, this.dx, this.dy);
                    bounceAngle = this.runtime.calculateSolidBounceAngle(this.inst, this.lastx, this.lasty);
                    this.dx = Math.cos(bounceAngle) * s;
                    this.dy = Math.sin(bounceAngle) * s;
                    this.inst.x += this.dx * dt; // move out for one tick since the object can't have spent a tick in the solid
                    this.inst.y += this.dy * dt;
                    this.inst.set_bbox_changed();
                    if (this.setAngle) {
                        this.inst.angle = bounceAngle;
                        this.lastKnownAngle = bounceAngle;
                        this.inst.set_bbox_changed();
                    }
                    if (!this.runtime.pushOutSolid(this.inst, this.dx / s, this.dy / s, Math.max(s * 2.5 * dt, 30)))
                        this.runtime.pushOutSolidNearest(this.inst, 100);
                }
            }
        }
    };

    function Cnds() {};
    Cnds.prototype.CompareSpeed = function(cmp, s) {
        return cr.do_cmp(cr.distanceTo(0, 0, this.dx, this.dy), cmp, s);
    };
    Cnds.prototype.CompareTravelled = function(cmp, d) {
        return cr.do_cmp(this.travelled, cmp, d);
    };
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetSpeed = function(s) {
        var a = cr.angleTo(0, 0, this.dx, this.dy);
        this.dx = Math.cos(a) * s;
        this.dy = Math.sin(a) * s;
    };
    Acts.prototype.SetAcceleration = function(a) {
        this.acc = a;
    };
    Acts.prototype.SetGravity = function(g) {
        this.g = g;
    };
    Acts.prototype.SetAngleOfMotion = function(a) {
        a = cr.to_radians(a);
        var s = cr.distanceTo(0, 0, this.dx, this.dy)
        this.dx = Math.cos(a) * s;
        this.dy = Math.sin(a) * s;
    };
    Acts.prototype.Bounce = function(objtype) {
        if (!objtype)
            return;
        var otherinst = objtype.getFirstPicked(this.inst);
        if (!otherinst)
            return;
        var dt = this.runtime.getDt(this.inst);
        var s = cr.distanceTo(0, 0, this.dx, this.dy);
        var bounceAngle = this.runtime.calculateSolidBounceAngle(this.inst, this.lastx, this.lasty, otherinst);
        this.dx = Math.cos(bounceAngle) * s;
        this.dy = Math.sin(bounceAngle) * s;
        this.inst.x += this.dx * dt; // move out for one tick since the object can't have spent a tick in the solid
        this.inst.y += this.dy * dt;
        this.inst.set_bbox_changed();
        if (this.setAngle) {
            this.inst.angle = bounceAngle;
            this.lastKnownAngle = bounceAngle;
            this.inst.set_bbox_changed();
        }
        if (s !== 0) // prevent divide-by-zero
        {
            if (this.bounceOffSolid) {
                if (!this.runtime.pushOutSolid(this.inst, this.dx / s, this.dy / s, Math.max(s * 2.5 * dt, 30)))
                    this.runtime.pushOutSolidNearest(this.inst, 100);
            } else {
                this.runtime.pushOut(this.inst, this.dx / s, this.dy / s, Math.max(s * 2.5 * dt, 30), otherinst)
            }
        }
    };
    Acts.prototype.SetDistanceTravelled = function(d) {
        this.travelled = d;
    };
    Acts.prototype.SetEnabled = function(en) {
        this.enabled = (en === 1);
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.Speed = function(ret) {
        var s = cr.distanceTo(0, 0, this.dx, this.dy);
        s = cr.round6dp(s);
        ret.set_float(s);
    };
    Exps.prototype.Acceleration = function(ret) {
        ret.set_float(this.acc);
    };
    Exps.prototype.AngleOfMotion = function(ret) {
        ret.set_float(cr.to_degrees(cr.angleTo(0, 0, this.dx, this.dy)));
    };
    Exps.prototype.DistanceTravelled = function(ret) {
        ret.set_float(this.travelled);
    };
    Exps.prototype.Gravity = function(ret) {
        ret.set_float(this.g);
    };
    behaviorProto.exps = new Exps();
}());;;
cr.behaviors.Fade = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.Fade.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {};
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        this.activeAtStart = this.properties[0] === 1;
        this.setMaxOpacity = false; // used to retrieve maxOpacity once in first 'Start fade' action if initially inactive
        this.fadeInTime = this.properties[1];
        this.waitTime = this.properties[2];
        this.fadeOutTime = this.properties[3];
        this.destroy = this.properties[4]; // 0 = no, 1 = after fade out
        this.stage = this.activeAtStart ? 0 : 3; // 0 = fade in, 1 = wait, 2 = fade out, 3 = done
        if (this.recycled)
            this.stageTime.reset();
        else
            this.stageTime = new cr.KahanAdder();
        this.maxOpacity = (this.inst.opacity ? this.inst.opacity : 1.0);
        if (this.activeAtStart) {
            if (this.fadeInTime === 0) {
                this.stage = 1;
                if (this.waitTime === 0)
                    this.stage = 2;
            } else {
                this.inst.opacity = 0;
                this.runtime.redraw = true;
            }
        }
    };
    behinstProto.saveToJSON = function() {
        return {
            "fit": this.fadeInTime,
            "wt": this.waitTime,
            "fot": this.fadeOutTime,
            "s": this.stage,
            "st": this.stageTime.sum,
            "mo": this.maxOpacity,
        };
    };
    behinstProto.loadFromJSON = function(o) {
        this.fadeInTime = o["fit"];
        this.waitTime = o["wt"];
        this.fadeOutTime = o["fot"];
        this.stage = o["s"];
        this.stageTime.reset();
        this.stageTime.sum = o["st"];
        this.maxOpacity = o["mo"];
    };
    behinstProto.tick = function() {
        this.stageTime.add(this.runtime.getDt(this.inst));
        if (this.stage === 0) {
            this.inst.opacity = (this.stageTime.sum / this.fadeInTime) * this.maxOpacity;
            this.runtime.redraw = true;
            if (this.inst.opacity >= this.maxOpacity) {
                this.inst.opacity = this.maxOpacity;
                this.stage = 1; // wait stage
                this.stageTime.reset();
                this.runtime.trigger(cr.behaviors.Fade.prototype.cnds.OnFadeInEnd, this.inst);
            }
        }
        if (this.stage === 1) {
            if (this.stageTime.sum >= this.waitTime) {
                this.stage = 2; // fade out stage
                this.stageTime.reset();
                this.runtime.trigger(cr.behaviors.Fade.prototype.cnds.OnWaitEnd, this.inst);
            }
        }
        if (this.stage === 2) {
            if (this.fadeOutTime !== 0) {
                this.inst.opacity = this.maxOpacity - ((this.stageTime.sum / this.fadeOutTime) * this.maxOpacity);
                this.runtime.redraw = true;
                if (this.inst.opacity < 0) {
                    this.inst.opacity = 0;
                    this.stage = 3; // done
                    this.stageTime.reset();
                    this.runtime.trigger(cr.behaviors.Fade.prototype.cnds.OnFadeOutEnd, this.inst);
                    if (this.destroy === 1)
                        this.runtime.DestroyInstance(this.inst);
                }
            }
        }
    };
    behinstProto.doStart = function() {
        this.stage = 0;
        this.stageTime.reset();
        if (this.fadeInTime === 0) {
            this.stage = 1;
            if (this.waitTime === 0)
                this.stage = 2;
        } else {
            this.inst.opacity = 0;
            this.runtime.redraw = true;
        }
    };

    function Cnds() {};
    Cnds.prototype.OnFadeOutEnd = function() {
        return true;
    };
    Cnds.prototype.OnFadeInEnd = function() {
        return true;
    };
    Cnds.prototype.OnWaitEnd = function() {
        return true;
    };
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.StartFade = function() {
        if (!this.activeAtStart && !this.setMaxOpacity) {
            this.maxOpacity = (this.inst.opacity ? this.inst.opacity : 1.0);
            this.setMaxOpacity = true;
        }
        if (this.stage === 3)
            this.doStart();
    };
    Acts.prototype.RestartFade = function() {
        this.doStart();
    };
    Acts.prototype.SetFadeInTime = function(t) {
        if (t < 0)
            t = 0;
        this.fadeInTime = t;
    };
    Acts.prototype.SetWaitTime = function(t) {
        if (t < 0)
            t = 0;
        this.waitTime = t;
    };
    Acts.prototype.SetFadeOutTime = function(t) {
        if (t < 0)
            t = 0;
        this.fadeOutTime = t;
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.FadeInTime = function(ret) {
        ret.set_float(this.fadeInTime);
    };
    Exps.prototype.WaitTime = function(ret) {
        ret.set_float(this.waitTime);
    };
    Exps.prototype.FadeOutTime = function(ret) {
        ret.set_float(this.fadeOutTime);
    };
    behaviorProto.exps = new Exps();
}());;;
cr.behaviors.LOS = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.LOS.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {
        this.obstacleTypes = []; // object types to check for as obstructions
    };
    behtypeProto.findLosBehavior = function(inst) {
        var i, len, b;
        for (i = 0, len = inst.behavior_insts.length; i < len; ++i) {
            b = inst.behavior_insts[i];
            if (b instanceof cr.behaviors.LOS.prototype.Instance && b.type === this)
                return b;
        }
        return null;
    };
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        this.obstacleMode = this.properties[0]; // 0 = solids, 1 = custom
        this.range = this.properties[1];
        this.cone = cr.to_radians(this.properties[2]);
        this.useCollisionCells = (this.properties[3] !== 0);
    };
    behinstProto.onDestroy = function() {};
    behinstProto.saveToJSON = function() {
        var o = {
            "r": this.range,
            "c": this.cone,
            "t": []
        };
        var i, len;
        for (i = 0, len = this.type.obstacleTypes.length; i < len; i++) {
            o["t"].push(this.type.obstacleTypes[i].sid);
        }
        return o;
    };
    behinstProto.loadFromJSON = function(o) {
        this.range = o["r"];
        this.cone = o["c"];
        cr.clearArray(this.type.obstacleTypes);
        var i, len, t;
        for (i = 0, len = o["t"].length; i < len; i++) {
            t = this.runtime.getObjectTypeBySid(o["t"][i]);
            if (t)
                this.type.obstacleTypes.push(t);
        }
    };
    behinstProto.tick = function() {};
    var candidates = [];
    var tmpRect = new cr.rect(0, 0, 0, 0);
    behinstProto.hasLOSto = function(x_, y_) {
        var startx = this.inst.x;
        var starty = this.inst.y;
        var myangle = this.inst.angle;
        if (this.inst.width < 0)
            myangle += Math.PI;
        if (cr.distanceTo(startx, starty, x_, y_) > this.range)
            return false; // too far away
        var a = cr.angleTo(startx, starty, x_, y_);
        if (cr.angleDiff(myangle, a) > this.cone / 2)
            return false; // outside cone of view
        var i, leni, rinst, solid;
        tmpRect.set(startx, starty, x_, y_);
        tmpRect.normalize();
        if (this.obstacleMode === 0) {
            if (this.useCollisionCells) {
                this.runtime.getSolidCollisionCandidates(this.inst.layer, tmpRect, candidates);
            } else {
                solid = this.runtime.getSolidBehavior();
                if (solid)
                    cr.appendArray(candidates, solid.my_instances.valuesRef());
            }
            for (i = 0, leni = candidates.length; i < leni; ++i) {
                rinst = candidates[i];
                if (!rinst.extra["solidEnabled"] || rinst === this.inst)
                    continue;
                if (this.runtime.testSegmentOverlap(startx, starty, x_, y_, rinst)) {
                    cr.clearArray(candidates);
                    return false;
                }
            }
        } else {
            if (this.useCollisionCells) {
                this.runtime.getTypesCollisionCandidates(this.inst.layer, this.type.obstacleTypes, tmpRect, candidates);
            } else {
                for (i = 0, leni = this.type.obstacleTypes.length; i < leni; ++i) {
                    cr.appendArray(candidates, this.type.obstacleTypes[i].instances);
                }
            }
            for (i = 0, leni = candidates.length; i < leni; ++i) {
                rinst = candidates[i];
                if (rinst === this.inst)
                    continue;
                if (this.runtime.testSegmentOverlap(startx, starty, x_, y_, rinst)) {
                    cr.clearArray(candidates);
                    return false;
                }
            }
        }
        cr.clearArray(candidates);
        return true;
    };

    function Cnds() {};
    var ltopick = new cr.ObjectSet();
    var rtopick = new cr.ObjectSet();
    Cnds.prototype.HasLOSToObject = function(obj_) {
        if (!obj_)
            return false;
        var i, j, leni, lenj, linst, losbeh, rinst, pick;
        var lsol = this.runtime.getCurrentConditionObjectType().getCurrentSol();
        var rsol = obj_.getCurrentSol();
        var linstances = lsol.getObjects();
        var rinstances = rsol.getObjects();
        if (lsol.select_all)
            cr.clearArray(lsol.else_instances);
        if (rsol.select_all)
            cr.clearArray(rsol.else_instances);
        var inverted = this.runtime.getCurrentCondition().inverted;
        for (i = 0, leni = linstances.length; i < leni; ++i) {
            linst = linstances[i];
            pick = false;
            losbeh = this.findLosBehavior(linst);;
            for (j = 0, lenj = rinstances.length; j < lenj; ++j) {
                rinst = rinstances[j];
                if (linst !== rinst && cr.xor(losbeh.hasLOSto(rinst.x, rinst.y), inverted)) {
                    pick = true;
                    rtopick.add(rinst);
                }
            }
            if (pick)
                ltopick.add(linst);
        }
        var lpicks = ltopick.valuesRef();
        var rpicks = rtopick.valuesRef();
        lsol.select_all = false;
        rsol.select_all = false;
        cr.shallowAssignArray(lsol.instances, lpicks);
        cr.shallowAssignArray(rsol.instances, rpicks);
        ltopick.clear();
        rtopick.clear();
        return lsol.hasObjects();
    };
    Cnds.prototype.HasLOSToPosition = function(x_, y_) {
        return this.hasLOSto(x_, y_);
    };
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetRange = function(r) {
        this.range = r;
    };
    Acts.prototype.SetCone = function(c) {
        this.cone = cr.to_radians(c);
    };
    Acts.prototype.AddObstacle = function(obj_) {
        var obstacleTypes = this.type.obstacleTypes;
        if (obstacleTypes.indexOf(obj_) !== -1)
            return;
        var i, len, t;
        for (i = 0, len = obstacleTypes.length; i < len; i++) {
            t = obstacleTypes[i];
            if (t.is_family && t.members.indexOf(obj_) !== -1)
                return;
        }
        obstacleTypes.push(obj_);
    };
    Acts.prototype.ClearObstacles = function() {
        cr.clearArray(this.type.obstacleTypes);
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.Range = function(ret) {
        ret.set_float(this.range);
    };
    Exps.prototype.ConeOfView = function(ret) {
        ret.set_float(cr.to_degrees(this.cone));
    };
    behaviorProto.exps = new Exps();
}());;;
cr.behaviors.Pin = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.Pin.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {};
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        this.pinObject = null;
        this.pinObjectUid = -1; // for loading
        this.pinAngle = 0;
        this.pinDist = 0;
        this.myStartAngle = 0;
        this.theirStartAngle = 0;
        this.lastKnownAngle = 0;
        this.mode = 0; // 0 = position & angle; 1 = position; 2 = angle; 3 = rope; 4 = bar
        var self = this;
        if (!this.recycled) {
            this.myDestroyCallback = (function(inst) {
                self.onInstanceDestroyed(inst);
            });
        }
        this.runtime.addDestroyCallback(this.myDestroyCallback);
    };
    behinstProto.saveToJSON = function() {
        return {
            "uid": this.pinObject ? this.pinObject.uid : -1,
            "pa": this.pinAngle,
            "pd": this.pinDist,
            "msa": this.myStartAngle,
            "tsa": this.theirStartAngle,
            "lka": this.lastKnownAngle,
            "m": this.mode
        };
    };
    behinstProto.loadFromJSON = function(o) {
        this.pinObjectUid = o["uid"]; // wait until afterLoad to look up
        this.pinAngle = o["pa"];
        this.pinDist = o["pd"];
        this.myStartAngle = o["msa"];
        this.theirStartAngle = o["tsa"];
        this.lastKnownAngle = o["lka"];
        this.mode = o["m"];
    };
    behinstProto.afterLoad = function() {
        if (this.pinObjectUid === -1)
            this.pinObject = null;
        else {
            this.pinObject = this.runtime.getObjectByUID(this.pinObjectUid);;
        }
        this.pinObjectUid = -1;
    };
    behinstProto.onInstanceDestroyed = function(inst) {
        if (this.pinObject == inst)
            this.pinObject = null;
    };
    behinstProto.onDestroy = function() {
        this.pinObject = null;
        this.runtime.removeDestroyCallback(this.myDestroyCallback);
    };
    behinstProto.tick = function() {};
    behinstProto.tick2 = function() {
        if (!this.pinObject)
            return;
        if (this.lastKnownAngle !== this.inst.angle)
            this.myStartAngle = cr.clamp_angle(this.myStartAngle + (this.inst.angle - this.lastKnownAngle));
        var newx = this.inst.x;
        var newy = this.inst.y;
        if (this.mode === 3 || this.mode === 4) // rope mode or bar mode
        {
            var dist = cr.distanceTo(this.inst.x, this.inst.y, this.pinObject.x, this.pinObject.y);
            if ((dist > this.pinDist) || (this.mode === 4 && dist < this.pinDist)) {
                var a = cr.angleTo(this.pinObject.x, this.pinObject.y, this.inst.x, this.inst.y);
                newx = this.pinObject.x + Math.cos(a) * this.pinDist;
                newy = this.pinObject.y + Math.sin(a) * this.pinDist;
            }
        } else {
            newx = this.pinObject.x + Math.cos(this.pinObject.angle + this.pinAngle) * this.pinDist;
            newy = this.pinObject.y + Math.sin(this.pinObject.angle + this.pinAngle) * this.pinDist;
        }
        var newangle = cr.clamp_angle(this.myStartAngle + (this.pinObject.angle - this.theirStartAngle));
        this.lastKnownAngle = newangle;
        if ((this.mode === 0 || this.mode === 1 || this.mode === 3 || this.mode === 4) &&
            (this.inst.x !== newx || this.inst.y !== newy)) {
            this.inst.x = newx;
            this.inst.y = newy;
            this.inst.set_bbox_changed();
        }
        if ((this.mode === 0 || this.mode === 2) && (this.inst.angle !== newangle)) {
            this.inst.angle = newangle;
            this.inst.set_bbox_changed();
        }
    };

    function Cnds() {};
    Cnds.prototype.IsPinned = function() {
        return !!this.pinObject;
    };
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.Pin = function(obj, mode_) {
        if (!obj)
            return;
        var otherinst = obj.getFirstPicked(this.inst);
        if (!otherinst)
            return;
        this.pinObject = otherinst;
        this.pinAngle = cr.angleTo(otherinst.x, otherinst.y, this.inst.x, this.inst.y) - otherinst.angle;
        this.pinDist = cr.distanceTo(otherinst.x, otherinst.y, this.inst.x, this.inst.y);
        this.myStartAngle = this.inst.angle;
        this.lastKnownAngle = this.inst.angle;
        this.theirStartAngle = otherinst.angle;
        this.mode = mode_;
    };
    Acts.prototype.Unpin = function() {
        this.pinObject = null;
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.PinnedUID = function(ret) {
        ret.set_int(this.pinObject ? this.pinObject.uid : -1);
    };
    behaviorProto.exps = new Exps();
}());;;
cr.behaviors.Sin = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.Sin.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {};
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
        this.i = 0; // period offset (radians)
    };
    var behinstProto = behaviorProto.Instance.prototype;
    var _2pi = 2 * Math.PI;
    var _pi_2 = Math.PI / 2;
    var _3pi_2 = (3 * Math.PI) / 2;
    behinstProto.onCreate = function() {
        this.active = (this.properties[0] === 1);
        this.movement = this.properties[1]; // 0=Horizontal|1=Vertical|2=Size|3=Width|4=Height|5=Angle|6=Opacity|7=Value only
        this.wave = this.properties[2]; // 0=Sine|1=Triangle|2=Sawtooth|3=Reverse sawtooth|4=Square
        this.period = this.properties[3];
        this.period += Math.random() * this.properties[4]; // period random
        if (this.period === 0)
            this.i = 0;
        else {
            this.i = (this.properties[5] / this.period) * _2pi; // period offset
            this.i += ((Math.random() * this.properties[6]) / this.period) * _2pi; // period offset random
        }
        this.mag = this.properties[7]; // magnitude
        this.mag += Math.random() * this.properties[8]; // magnitude random
        this.initialValue = 0;
        this.initialValue2 = 0;
        this.ratio = 0;
        if (this.movement === 5) // angle
            this.mag = cr.to_radians(this.mag);
        this.init();
    };
    behinstProto.saveToJSON = function() {
        return {
            "i": this.i,
            "a": this.active,
            "mv": this.movement,
            "w": this.wave,
            "p": this.period,
            "mag": this.mag,
            "iv": this.initialValue,
            "iv2": this.initialValue2,
            "r": this.ratio,
            "lkv": this.lastKnownValue,
            "lkv2": this.lastKnownValue2
        };
    };
    behinstProto.loadFromJSON = function(o) {
        this.i = o["i"];
        this.active = o["a"];
        this.movement = o["mv"];
        this.wave = o["w"];
        this.period = o["p"];
        this.mag = o["mag"];
        this.initialValue = o["iv"];
        this.initialValue2 = o["iv2"] || 0;
        this.ratio = o["r"];
        this.lastKnownValue = o["lkv"];
        this.lastKnownValue2 = o["lkv2"] || 0;
    };
    behinstProto.init = function() {
        switch (this.movement) {
            case 0: // horizontal
                this.initialValue = this.inst.x;
                break;
            case 1: // vertical
                this.initialValue = this.inst.y;
                break;
            case 2: // size
                this.initialValue = this.inst.width;
                this.ratio = this.inst.height / this.inst.width;
                break;
            case 3: // width
                this.initialValue = this.inst.width;
                break;
            case 4: // height
                this.initialValue = this.inst.height;
                break;
            case 5: // angle
                this.initialValue = this.inst.angle;
                break;
            case 6: // opacity
                this.initialValue = this.inst.opacity;
                break;
            case 7:
                this.initialValue = 0;
                break;
            case 8: // forwards/backwards
                this.initialValue = this.inst.x;
                this.initialValue2 = this.inst.y;
                break;
            default:
                ;
        }
        this.lastKnownValue = this.initialValue;
        this.lastKnownValue2 = this.initialValue2;
    };
    behinstProto.waveFunc = function(x) {
        x = x % _2pi;
        switch (this.wave) {
            case 0: // sine
                return Math.sin(x);
            case 1: // triangle
                if (x <= _pi_2)
                    return x / _pi_2;
                else if (x <= _3pi_2)
                    return 1 - (2 * (x - _pi_2) / Math.PI);
                else
                    return (x - _3pi_2) / _pi_2 - 1;
            case 2: // sawtooth
                return 2 * x / _2pi - 1;
            case 3: // reverse sawtooth
                return -2 * x / _2pi + 1;
            case 4: // square
                return x < Math.PI ? -1 : 1;
        };
        return 0;
    };
    behinstProto.tick = function() {
        var dt = this.runtime.getDt(this.inst);
        if (!this.active || dt === 0)
            return;
        if (this.period === 0)
            this.i = 0;
        else {
            this.i += (dt / this.period) * _2pi;
            this.i = this.i % _2pi;
        }
        this.updateFromPhase();
    };
    behinstProto.updateFromPhase = function() {
        switch (this.movement) {
            case 0: // horizontal
                if (this.inst.x !== this.lastKnownValue)
                    this.initialValue += this.inst.x - this.lastKnownValue;
                this.inst.x = this.initialValue + this.waveFunc(this.i) * this.mag;
                this.lastKnownValue = this.inst.x;
                break;
            case 1: // vertical
                if (this.inst.y !== this.lastKnownValue)
                    this.initialValue += this.inst.y - this.lastKnownValue;
                this.inst.y = this.initialValue + this.waveFunc(this.i) * this.mag;
                this.lastKnownValue = this.inst.y;
                break;
            case 2: // size
                this.inst.width = this.initialValue + this.waveFunc(this.i) * this.mag;
                this.inst.height = this.inst.width * this.ratio;
                break;
            case 3: // width
                this.inst.width = this.initialValue + this.waveFunc(this.i) * this.mag;
                break;
            case 4: // height
                this.inst.height = this.initialValue + this.waveFunc(this.i) * this.mag;
                break;
            case 5: // angle
                if (this.inst.angle !== this.lastKnownValue)
                    this.initialValue = cr.clamp_angle(this.initialValue + (this.inst.angle - this.lastKnownValue));
                this.inst.angle = cr.clamp_angle(this.initialValue + this.waveFunc(this.i) * this.mag);
                this.lastKnownValue = this.inst.angle;
                break;
            case 6: // opacity
                this.inst.opacity = this.initialValue + (this.waveFunc(this.i) * this.mag) / 100;
                if (this.inst.opacity < 0)
                    this.inst.opacity = 0;
                else if (this.inst.opacity > 1)
                    this.inst.opacity = 1;
                break;
            case 8: // forwards/backwards
                if (this.inst.x !== this.lastKnownValue)
                    this.initialValue += this.inst.x - this.lastKnownValue;
                if (this.inst.y !== this.lastKnownValue2)
                    this.initialValue2 += this.inst.y - this.lastKnownValue2;
                this.inst.x = this.initialValue + Math.cos(this.inst.angle) * this.waveFunc(this.i) * this.mag;
                this.inst.y = this.initialValue2 + Math.sin(this.inst.angle) * this.waveFunc(this.i) * this.mag;
                this.lastKnownValue = this.inst.x;
                this.lastKnownValue2 = this.inst.y;
                break;
        }
        this.inst.set_bbox_changed();
    };
    behinstProto.onSpriteFrameChanged = function(prev_frame, next_frame) {
        switch (this.movement) {
            case 2: // size
                this.initialValue *= (next_frame.width / prev_frame.width);
                this.ratio = next_frame.height / next_frame.width;
                break;
            case 3: // width
                this.initialValue *= (next_frame.width / prev_frame.width);
                break;
            case 4: // height
                this.initialValue *= (next_frame.height / prev_frame.height);
                break;
        }
    };

    function Cnds() {};
    Cnds.prototype.IsActive = function() {
        return this.active;
    };
    Cnds.prototype.CompareMovement = function(m) {
        return this.movement === m;
    };
    Cnds.prototype.ComparePeriod = function(cmp, v) {
        return cr.do_cmp(this.period, cmp, v);
    };
    Cnds.prototype.CompareMagnitude = function(cmp, v) {
        if (this.movement === 5)
            return cr.do_cmp(this.mag, cmp, cr.to_radians(v));
        else
            return cr.do_cmp(this.mag, cmp, v);
    };
    Cnds.prototype.CompareWave = function(w) {
        return this.wave === w;
    };
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.SetActive = function(a) {
        this.active = (a === 1);
    };
    Acts.prototype.SetPeriod = function(x) {
        this.period = x;
    };
    Acts.prototype.SetMagnitude = function(x) {
        this.mag = x;
        if (this.movement === 5) // angle
            this.mag = cr.to_radians(this.mag);
    };
    Acts.prototype.SetMovement = function(m) {
        if (this.movement === 5 && m !== 5)
            this.mag = cr.to_degrees(this.mag);
        this.movement = m;
        this.init();
    };
    Acts.prototype.SetWave = function(w) {
        this.wave = w;
    };
    Acts.prototype.SetPhase = function(x) {
        this.i = (x * _2pi) % _2pi;
        this.updateFromPhase();
    };
    Acts.prototype.UpdateInitialState = function() {
        this.init();
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.CyclePosition = function(ret) {
        ret.set_float(this.i / _2pi);
    };
    Exps.prototype.Period = function(ret) {
        ret.set_float(this.period);
    };
    Exps.prototype.Magnitude = function(ret) {
        if (this.movement === 5) // angle
            ret.set_float(cr.to_degrees(this.mag));
        else
            ret.set_float(this.mag);
    };
    Exps.prototype.Value = function(ret) {
        ret.set_float(this.waveFunc(this.i) * this.mag);
    };
    behaviorProto.exps = new Exps();
}());;;
cr.behaviors.Turret = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.Turret.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {
        this.targetTypes = []; // object types to check for as targets
    };
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        this.range = this.properties[0];
        this.rateOfFire = this.properties[1];
        this.rotateEnabled = (this.properties[2] !== 0);
        this.rotateSpeed = cr.to_radians(this.properties[3]);
        this.targetMode = this.properties[4]; // 0 = first, 1 = nearest
        this.predictiveAim = (this.properties[5] !== 0);
        this.projectileSpeed = this.properties[6];
        this.enabled = (this.properties[7] !== 0);
        this.useCollisionCells = (this.properties[8] !== 0);
        this.lastCheckTime = 0; // last time checked for targets in range
        this.fireTimeCount = this.rateOfFire; // counts up to rate of fire before shooting. starts in fully reloaded state
        this.currentTarget = null; // current target object
        this.loadTargetUid = -1;
        this.oldTargetX = 0;
        this.oldTargetY = 0;
        this.lastSpeeds = [0, 0, 0, 0];
        this.speedsCount = 0;
        this.firstTickWithTarget = true;
        var self = this;
        if (!this.recycled) {
            this.myDestroyCallback = function(inst) {
                self.onInstanceDestroyed(inst);
            };
        }
        this.runtime.addDestroyCallback(this.myDestroyCallback);
    };
    behinstProto.saveToJSON = function() {
        var o = {
            "r": this.range,
            "rof": this.rateOfFire,
            "re": this.rotateEnabled,
            "rs": this.rotateSpeed,
            "tm": this.targetMode,
            "pa": this.predictiveAim,
            "ps": this.projectileSpeed,
            "en": this.enabled,
            "lct": this.lastCheckTime,
            "ftc": this.fireTimeCount,
            "target": (this.currentTarget ? this.currentTarget.uid : -1),
            "ox": this.oldTargetX,
            "oy": this.oldTargetY,
            "ls": this.lastSpeeds,
            "sc": this.speedsCount,
            "targs": []
        };
        var i, len;
        for (i = 0, len = this.type.targetTypes.length; i < len; i++) {
            o["targs"].push(this.type.targetTypes[i].sid);
        }
        return o;
    };
    behinstProto.loadFromJSON = function(o) {
        this.range = o["r"];
        this.rateOfFire = o["rof"];
        this.rotateEnabled = o["re"];
        this.rotateSpeed = o["rs"];
        this.targetMode = o["tm"];
        this.predictiveAim = o["pa"];
        this.projectileSpeed = o["ps"];
        this.enabled = o["en"];
        this.lastCheckTime = o["lct"];
        this.fireTimeCount = o["ftc"] || 0; // not in <r154
        this.loadTargetUid = o["target"];
        this.oldTargetX = o["ox"];
        this.oldTargetY = o["oy"];
        this.lastSpeeds = o["ls"];
        this.speedsCount = o["sc"];
        cr.clearArray(this.type.targetTypes);
        var i, len, t;
        for (i = 0, len = o["targs"].length; i < len; i++) {
            t = this.runtime.getObjectTypeBySid(o["targs"][i]);
            if (t)
                this.type.targetTypes.push(t);
        }
    };
    behinstProto.afterLoad = function() {
        if (this.loadTargetUid === -1)
            this.currentTarget = null;
        else
            this.currentTarget = this.runtime.getObjectByUID(this.loadTargetUid);
    };
    behinstProto.onInstanceDestroyed = function(inst) {
        if (this.currentTarget == inst)
            this.currentTarget = null;
    };
    behinstProto.onDestroy = function() {
        this.currentTarget = null;
        this.runtime.removeDestroyCallback(this.myDestroyCallback);
    };
    behinstProto.addSpeed = function(s) {
        if (this.speedsCount < 4) {
            this.lastSpeeds[this.speedsCount] = s;
            this.speedsCount++;
        } else {
            this.lastSpeeds.shift();
            this.lastSpeeds.push(s);
        }
    };
    behinstProto.getSpeed = function() {
        var ret = 0;
        var i = 0;
        for (; i < this.speedsCount; i++) {
            ret += this.lastSpeeds[i];
        }
        return ret / this.speedsCount;
    };
    behinstProto.isInRange = function(obj_) {
        var inst = this.inst;
        var dx = obj_.x - inst.x;
        var dy = obj_.y - inst.y;
        return dx * dx + dy * dy <= this.range * this.range;
    };
    var tmpRect = new cr.rect(0, 0, 0, 0);
    var candidates = [];
    behinstProto.lookForFirstTarget = function() {
        var i, len, rinst;
        tmpRect.left = this.inst.x - this.range;
        tmpRect.top = this.inst.y - this.range;
        tmpRect.right = this.inst.x + this.range;
        tmpRect.bottom = this.inst.y + this.range;
        if (this.useCollisionCells) {
            this.runtime.getTypesCollisionCandidates(null, this.type.targetTypes, tmpRect, candidates);
        } else {
            for (i = 0, len = this.type.targetTypes.length; i < len; ++i) {
                cr.appendArray(candidates, this.type.targetTypes[i].instances);
            }
        }
        for (i = 0, len = candidates.length; i < len; ++i) {
            rinst = candidates[i];
            if (this.isInRange(rinst)) {
                this.currentTarget = rinst;
                cr.clearArray(candidates);
                return;
            }
        }
        cr.clearArray(candidates);
    };
    behinstProto.lookForNearestTarget = function() {
        var i, len, rinst, dist, dx, dy;
        var myx = this.inst.x;
        var myy = this.inst.y;
        var closest = this.range * this.range;
        this.currentTarget = null;
        tmpRect.left = myx - this.range;
        tmpRect.top = myy - this.range;
        tmpRect.right = myx + this.range;
        tmpRect.bottom = myy + this.range;
        if (this.useCollisionCells) {
            this.runtime.getTypesCollisionCandidates(null, this.type.targetTypes, tmpRect, candidates);
        } else {
            for (i = 0, len = this.type.targetTypes.length; i < len; ++i) {
                cr.appendArray(candidates, this.type.targetTypes[i].instances);
            }
        }
        for (i = 0, len = candidates.length; i < len; ++i) {
            rinst = candidates[i];
            dx = myx - rinst.x;
            dy = myy - rinst.y;
            dist = dx * dx + dy * dy;
            if (dist < closest) {
                this.currentTarget = rinst;
                closest = dist;
            }
        }
        candidates.length = 0;
    };
    behinstProto.tick = function() {
        var dt = this.runtime.getDt(this.inst);
        var nowtime = this.runtime.kahanTime.sum;
        var inst = this.inst;
        if (!this.enabled)
            return;
        if (this.currentTarget && !this.isInRange(this.currentTarget)) {
            this.currentTarget = null;
            this.speedsCount = 0;
            this.firstTickWithTarget = true;
        }
        if (nowtime >= this.lastCheckTime + 0.1) {
            this.lastCheckTime = nowtime;
            if (this.targetMode === 0 && !this.currentTarget) {
                this.lookForFirstTarget();
                if (this.currentTarget) {
                    this.speedsCount = 0;
                    this.firstTickWithTarget = true;
                    this.oldTargetX = this.currentTarget.x;
                    this.oldTargetY = this.currentTarget.y;
                    this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnTargetAcquired, this.inst);
                }
            } else if (this.targetMode === 1) {
                var oldTarget = this.currentTarget;
                this.lookForNearestTarget();
                if (this.currentTarget && this.currentTarget !== oldTarget) {
                    this.speedsCount = 0;
                    this.firstTickWithTarget = true;
                    this.oldTargetX = this.currentTarget.x;
                    this.oldTargetY = this.currentTarget.y;
                    this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnTargetAcquired, this.inst);
                }
            }
        }
        this.fireTimeCount += dt;
        if (this.currentTarget) {
            var targetAngle = cr.angleTo(inst.x, inst.y, this.currentTarget.x, this.currentTarget.y);
            if (this.predictiveAim) {
                var Gx = inst.x;
                var Gy = inst.y;
                var Px = this.currentTarget.x;
                var Py = this.currentTarget.y;
                var h = cr.angleTo(Px, Py, this.oldTargetX, this.oldTargetY);
                if (!this.firstTickWithTarget)
                    this.addSpeed(cr.distanceTo(Px, Py, this.oldTargetX, this.oldTargetY) / dt);
                var s = this.getSpeed();
                var q = Py - Gy;
                var r = Px - Gx;
                var w = (s * Math.sin(h) * (Gx - Px) - s * Math.cos(h) * (Gy - Py)) / this.projectileSpeed;
                var a = (Math.asin(w / Math.sqrt(q * q + r * r)) - Math.atan2(q, -r)) + Math.PI;
                if (!isNaN(a))
                    targetAngle = a;
            }
            if (this.rotateEnabled) {
                inst.angle = cr.angleRotate(inst.angle, targetAngle, this.rotateSpeed * dt);
                inst.set_bbox_changed();
            }
            if ((this.fireTimeCount >= this.rateOfFire) &&
                (!this.rotateEnabled || cr.to_degrees(cr.angleDiff(inst.angle, targetAngle)) <= 0.1) &&
                (!this.predictiveAim || this.speedsCount >= 4)) {
                this.fireTimeCount -= this.rateOfFire;
                if (this.fireTimeCount >= this.rateOfFire)
                    this.fireTimeCount = 0;
                this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnShoot, this.inst);
            }
            if (this.currentTarget) {
                this.oldTargetX = this.currentTarget.x;
                this.oldTargetY = this.currentTarget.y;
            }
            this.firstTickWithTarget = false;
        }
        if (this.fireTimeCount > this.rateOfFire)
            this.fireTimeCount = this.rateOfFire;
    };

    function Cnds() {};
    Cnds.prototype.HasTarget = function() {
        return !!this.currentTarget;
    };
    Cnds.prototype.OnShoot = function() {
        return true;
    };
    Cnds.prototype.OnTargetAcquired = function() {
        return true;
    };
    behaviorProto.cnds = new Cnds();

    function Acts() {};
    Acts.prototype.AcquireTarget = function(obj_) {
        if (!obj_)
            return;
        var instances = obj_.getCurrentSol().getObjects();
        var i, len, inst;
        for (i = 0, len = instances.length; i < len; ++i) {
            inst = instances[i];
            if (this.currentTarget !== inst && this.isInRange(inst)) {
                this.currentTarget = inst;
                this.speedsCount = 0;
                this.firstTickWithTarget = true;
                this.oldTargetX = this.currentTarget.x;
                this.oldTargetY = this.currentTarget.y;
                this.runtime.trigger(cr.behaviors.Turret.prototype.cnds.OnTargetAcquired, this.inst);
                break;
            }
        }
    };
    Acts.prototype.AddTarget = function(obj_) {
        var targetTypes = this.type.targetTypes;
        if (targetTypes.indexOf(obj_) !== -1)
            return;
        var i, len, t;
        for (i = 0, len = targetTypes.length; i < len; i++) {
            t = targetTypes[i];
            if (t.is_family && t.members.indexOf(obj_) !== -1)
                return;
        }
        targetTypes.push(obj_);
    };
    Acts.prototype.ClearTargets = function() {
        cr.clearArray(this.type.targetTypes);
    };
    Acts.prototype.UnacquireTarget = function() {
        this.currentTarget = null;
        this.speedsCount = 0;
        this.firstTickWithTarget = true;
    };
    Acts.prototype.SetEnabled = function(e) {
        this.enabled = (e !== 0);
    };
    Acts.prototype.SetRange = function(r) {
        this.range = r;
    };
    Acts.prototype.SetRateOfFire = function(r) {
        this.rateOfFire = r;
    };
    Acts.prototype.SetRotate = function(r) {
        this.rotateEnabled = (r !== 0);
    };
    Acts.prototype.SetRotateSpeed = function(r) {
        this.rotateSpeed = cr.to_radians(r);
    };
    Acts.prototype.SetTargetMode = function(s) {
        this.targetMode = s;
    };
    Acts.prototype.SetPredictiveAim = function(s) {
        this.predictiveAim = (s !== 0);
    };
    Acts.prototype.SetProjectileSpeed = function(s) {
        this.projectileSpeed = s;
    };
    behaviorProto.acts = new Acts();

    function Exps() {};
    Exps.prototype.TargetUID = function(ret) {
        ret.set_int(this.currentTarget ? this.currentTarget.uid : 0);
    };
    Exps.prototype.Range = function(ret) {
        ret.set_float(this.range);
    };
    Exps.prototype.RateOfFire = function(ret) {
        ret.set_float(this.rateOfFire);
    };
    Exps.prototype.RotateSpeed = function(ret) {
        ret.set_float(cr.to_degrees(this.rotateSpeed));
    };
    behaviorProto.exps = new Exps();
}());
var easeOutBounceArray = [];
var easeInElasticArray = [];
var easeOutElasticArray = [];
var easeInOutElasticArray = [];
var easeInCircle = [];
var easeOutCircle = [];
var easeInOutCircle = [];
var easeInBack = [];
var easeOutBack = [];
var easeInOutBack = [];
var litetween_precision = 10000;
var updateLimit = 0; //0.0165;
function easeOutBouncefunc(t) {
    var b = 0.0;
    var c = 1.0;
    var d = 1.0;
    if ((t /= d) < (1 / 2.75)) {
        result = c * (7.5625 * t * t) + b;
    } else if (t < (2 / 2.75)) {
        result = c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
    } else if (t < (2.5 / 2.75)) {
        result = c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
    } else {
        result = c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
    }
    return result;
}

function integerize(t, d) {
    return Math.round(t / d * litetween_precision);
}

function easeFunc(easing, t, b, c, d, flip, param) {
    var ret_ease = 0;
    switch (easing) {
        case 0: // linear
            ret_ease = c * t / d + b;
            break;
        case 1: // easeInQuad
            ret_ease = c * (t /= d) * t + b;
            break;
        case 2: // easeOutQuad
            ret_ease = -c * (t /= d) * (t - 2) + b;
            break;
        case 3: // easeInOutQuad
            if ((t /= d / 2) < 1)
                ret_ease = c / 2 * t * t + b
            else
                ret_ease = -c / 2 * ((--t) * (t - 2) - 1) + b;
            break;
        case 4: // easeInCubic
            ret_ease = c * (t /= d) * t * t + b;
            break;
        case 5: // easeOutCubic
            ret_ease = c * ((t = t / d - 1) * t * t + 1) + b;
            break;
        case 6: // easeInOutCubic
            if ((t /= d / 2) < 1)
                ret_ease = c / 2 * t * t * t + b
            else
                ret_ease = c / 2 * ((t -= 2) * t * t + 2) + b;
            break;
        case 7: // easeInQuart
            ret_ease = c * (t /= d) * t * t * t + b;
            break;
        case 8: // easeOutQuart
            ret_ease = -c * ((t = t / d - 1) * t * t * t - 1) + b;
            break;
        case 9: // easeInOutQuart
            if ((t /= d / 2) < 1)
                ret_ease = c / 2 * t * t * t * t + b
            else
                ret_ease = -c / 2 * ((t -= 2) * t * t * t - 2) + b;
            break;
        case 10: // easeInQuint
            ret_ease = c * (t /= d) * t * t * t * t + b;
            break;
        case 11: // easeOutQuint
            ret_ease = c * ((t = t / d - 1) * t * t * t * t + 1) + b;
            break;
        case 12: // easeInOutQuint
            if ((t /= d / 2) < 1)
                ret_ease = c / 2 * t * t * t * t * t + b
            else
                ret_ease = c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
            break;
        case 13: // easeInCircle
            if (param.optimized) {
                ret_ease = easeInCircle[integerize(t, d)];
            } else {
                ret_ease = -(Math.sqrt(1 - t * t) - 1);
            }
            break;
        case 14: // easeOutCircle
            if (param.optimized) {
                ret_ease = easeOutCircle[integerize(t, d)];
            } else {
                ret_ease = Math.sqrt(1 - ((t - 1) * (t - 1)));
            }
            break;
        case 15: // easeInOutCircle
            if (param.optimized) {
                ret_ease = easeInOutCircle[integerize(t, d)];
            } else {
                if ((t /= d / 2) < 1) ret_ease = -c / 2 * (Math.sqrt(1 - t * t) - 1) + b
                else ret_ease = c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
            }
            break;
        case 16: // easeInBack
            if (param.optimized) {
                ret_ease = easeInBack[integerize(t, d)];
            } else {
                var s = param.s;
                ret_ease = c * (t /= d) * t * ((s + 1) * t - s) + b;
            }
            break;
        case 17: // easeOutBack
            if (param.optimized) {
                ret_ease = easeOutBack[integerize(t, d)];
            } else {
                var s = param.s;
                ret_ease = c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
            }
            break;
        case 18: // easeInOutBack
            if (param.optimized) {
                ret_ease = easeInOutBack[integerize(t, d)];
            } else {
                var s = param.s
                if ((t /= d / 2) < 1)
                    ret_ease = c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b
                else
                    ret_ease = c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
            }
            break;
        case 19: //easeInElastic
            if (param.optimized) {
                ret_ease = easeInElasticArray[integerize(t, d)];
            } else {
                var a = param.a;
                var p = param.p;
                var s = 0;
                if (t == 0) ret_ease = b;
                if ((t /= d) == 1) ret_ease = b + c;
                if (p == 0) p = d * .3;
                if (a == 0 || a < Math.abs(c)) {
                    a = c;
                    s = p / 4;
                } else var s = p / (2 * Math.PI) * Math.asin(c / a);
                ret_ease = -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
            }
            break;
        case 20: //easeOutElastic
            if (param.optimized) {
                ret_ease = easeOutElasticArray[integerize(t, d)];
            } else {
                var a = param.a;
                var p = param.p;
                var s = 0;
                if (t == 0) ret_ease = b;
                if ((t /= d) == 1) ret_ease = b + c;
                if (p == 0) p = d * .3;
                if (a == 0 || a < Math.abs(c)) {
                    a = c;
                    var s = p / 4;
                } else var s = p / (2 * Math.PI) * Math.asin(c / a);
                ret_ease = (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);
            }
            break;
        case 21: //easeInOutElastic
            if (param.optimized) {
                ret_ease = easeInOutElasticArray[integerize(t, d)];
            } else {
                var a = param.a;
                var p = param.p;
                var s = 0;
                if (t == 0) ret_ease = b;
                if ((t /= d / 2) == 2) ret_ease = b + c;
                if (p == 0) p = d * (.3 * 1.5);
                if (a == 0 || a < Math.abs(c)) {
                    a = c;
                    var s = p / 4;
                } else var s = p / (2 * Math.PI) * Math.asin(c / a);
                if (t < 1)
                    ret_ease = -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b
                else
                    ret_ease = a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
            }
            break;
        case 22: //easeInBounce
            if (param.optimized) {
                ret_ease = c - easeOutBounceArray[integerize(d - t, d)] + b;
            } else {
                ret_ease = c - easeOutBouncefunc(d - t / d) + b;
            }
            break;
        case 23: //easeOutBounce
            if (param.optimized) {
                ret_ease = easeOutBounceArray[integerize(t, d)];
            } else {
                ret_ease = easeOutBouncefunc(t / d);
            }
            break;
        case 24: //easeInOutBounce
            if (param.optimized) {
                if (t < d / 2)
                    ret_ease = (c - easeOutBounceArray[integerize(d - (t * 2), d)] + b) * 0.5 + b;
                else
                    ret_ease = easeOutBounceArray[integerize(t * 2 - d, d)] * .5 + c * .5 + b;
            } else {
                if (t < d / 2)
                    ret_ease = (c - easeOutBouncefunc(d - (t * 2)) + b) * 0.5 + b;
                else
                    ret_ease = easeOutBouncefunc((t * 2 - d) / d) * .5 + c * .5 + b;
            }
            break;
        case 25: //easeInSmoothstep
            var mt = (t / d) / 2;
            ret_ease = (2 * (mt * mt * (3 - 2 * mt)));
            break;
        case 26: //easeOutSmoothstep
            var mt = ((t / d) + 1) / 2;
            ret_ease = ((2 * (mt * mt * (3 - 2 * mt))) - 1);
            break;
        case 27: //easeInOutSmoothstep
            var mt = (t / d);
            ret_ease = (mt * mt * (3 - 2 * mt));
            break;
    };
    if (flip)
        return (c - b) - ret_ease
    else
        return ret_ease;
};
(function preCalculateArray() {
    var d = 1.0;
    var b = 0.0;
    var c = 1.0;
    var result = 0.0;
    var a = 0.0;
    var p = 0.0;
    var t = 0.0;
    var s = 0.0;
    for (var ti = 0; ti <= litetween_precision; ti++) {
        t = ti / litetween_precision;
        if ((t /= d) < (1 / 2.75)) {
            result = c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            result = c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            result = c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            result = c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
        easeOutBounceArray[ti] = result;
        t = ti / litetween_precision;
        a = 0;
        p = 0;
        if (t == 0) result = b;
        if ((t /= d) == 1) result = b + c;
        if (p == 0) p = d * .3;
        if (a == 0 || a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        result = -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        easeInElasticArray[ti] = result;
        t = ti / litetween_precision;
        a = 0;
        p = 0;
        if (t == 0) result = b;
        if ((t /= d) == 1) result = b + c;
        if (p == 0) p = d * .3;
        if (a == 0 || a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        result = (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);
        easeOutElasticArray[ti] = result;
        t = ti / litetween_precision;
        a = 0;
        p = 0;
        if (t == 0) result = b;
        if ((t /= d / 2) == 2) result = b + c;
        if (p == 0) p = d * (.3 * 1.5);
        if (a == 0 || a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        } else var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1)
            result = -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b
        else
            result = a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
        easeInOutElasticArray[ti] = result;
        t = ti / litetween_precision;
        easeInCircle[ti] = -(Math.sqrt(1 - t * t) - 1);
        t = ti / litetween_precision;
        easeOutCircle[ti] = Math.sqrt(1 - ((t - 1) * (t - 1)));
        t = ti / litetween_precision;
        if ((t /= d / 2) < 1) result = -c / 2 * (Math.sqrt(1 - t * t) - 1) + b
        else result = c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
        easeInOutCircle[ti] = result;
        t = ti / litetween_precision;
        s = 0;
        if (s == 0) s = 1.70158;
        result = c * (t /= d) * t * ((s + 1) * t - s) + b;
        easeInBack[ti] = result;
        t = ti / litetween_precision;
        s = 0;
        if (s == 0) s = 1.70158;
        result = c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
        easeOutBack[ti] = result;
        t = ti / litetween_precision;
        s = 0;
        if (s == 0) s = 1.70158;
        if ((t /= d / 2) < 1)
            result = c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b
        else
            result = c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
        easeInOutBack[ti] = result;
    }
}());
var TweenObject = function() {
    var constructor = function(tname, tweened, easefunc, initial, target, duration, enforce) {
        this.name = tname;
        this.value = 0;
        this.setInitial(initial);
        this.setTarget(target);
        this.easefunc = easefunc;
        this.tweened = tweened;
        this.duration = duration;
        this.progress = 0;
        this.state = 0;
        this.onStart = false;
        this.onEnd = false;
        this.onReverseStart = false;
        this.onReverseEnd = false;
        this.lastKnownValue = 0;
        this.lastKnownValue2 = 0;
        this.enforce = enforce;
        this.pingpong = 1.0;
        this.flipEase = false;
        this.easingparam = [];
        this.lastState = 1;
        for (var i = 0; i < 28; i++) {
            this.easingparam[i] = {};
            this.easingparam[i].a = 0.0;
            this.easingparam[i].p = 0.0;
            this.easingparam[i].t = 0.0;
            this.easingparam[i].s = 0.0;
            this.easingparam[i].optimized = true;
        }
    }
    return constructor;
}();
(function() {
    TweenObject.prototype = {};
    TweenObject.prototype.flipTarget = function() {
        var x1 = this.initialparam1;
        var x2 = this.initialparam2;
        this.initialparam1 = this.targetparam1;
        this.initialparam2 = this.targetparam2;
        this.targetparam1 = x1;
        this.targetparam2 = x2;
        this.lastKnownValue = 0;
        this.lastKnownValue2 = 0;
    }
    TweenObject.prototype.setInitial = function(initial) {
        this.initialparam1 = parseFloat(initial.split(",")[0]);
        this.initialparam2 = parseFloat(initial.split(",")[1]);
        this.lastKnownValue = 0;
        this.lastKnownValue2 = 0;
    }
    TweenObject.prototype.setTarget = function(target) {
        this.targetparam1 = parseFloat(target.split(",")[0]);
        this.targetparam2 = parseFloat(target.split(",")[1]);
        if (isNaN(this.targetparam2)) this.targetparam2 = this.targetparam1;
    }
    TweenObject.prototype.OnTick = function(dt) {
        if (this.state === 0) return -1.0;
        if (this.state === 1)
            this.progress += dt;
        if (this.state === 2)
            this.progress -= dt;
        if (this.state === 3) {
            this.state = 0;
        }
        if ((this.state === 4) || (this.state === 6)) {
            this.progress += dt * this.pingpong;
        }
        if (this.state === 5) {
            this.progress += dt * this.pingpong;
        }
        if (this.progress < 0) {
            this.progress = 0;
            if (this.state === 4) {
                this.pingpong = 1;
            } else if (this.state === 6) {
                this.pingpong = 1;
                this.flipEase = false;
            } else {
                this.state = 0;
            }
            this.onReverseEnd = true;
            return 0.0;
        } else if (this.progress > this.duration) {
            this.progress = this.duration;
            if (this.state === 4) {
                this.pingpong = -1;
            } else if (this.state === 6) {
                this.pingpong = -1;
                this.flipEase = true;
            } else if (this.state === 5) {
                this.progress = 0.0;
            } else {
                this.state = 0;
            }
            this.onEnd = true;
            return 1.0;
        } else {
            if (this.flipEase) {
                var factor = easeFunc(this.easefunc, this.duration - this.progress, 0, 1, this.duration, this.flipEase, this.easingparam[this.easefunc]);
            } else {
                var factor = easeFunc(this.easefunc, this.progress, 0, 1, this.duration, this.flipEase, this.easingparam[this.easefunc]);
            }
            return factor;
        }
    };
}());;;

function trim(str) {
    return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}
cr.behaviors.lunarray_LiteTween = function(runtime) {
    this.runtime = runtime;
};
(function() {
    var behaviorProto = cr.behaviors.lunarray_LiteTween.prototype;
    behaviorProto.Type = function(behavior, objtype) {
        this.behavior = behavior;
        this.objtype = objtype;
        this.runtime = behavior.runtime;
    };
    var behtypeProto = behaviorProto.Type.prototype;
    behtypeProto.onCreate = function() {};
    behaviorProto.Instance = function(type, inst) {
        this.type = type;
        this.behavior = type.behavior;
        this.inst = inst; // associated object instance to modify
        this.runtime = type.runtime;
        this.i = 0; // progress
    };
    var behinstProto = behaviorProto.Instance.prototype;
    behinstProto.onCreate = function() {
        this.playmode = this.properties[0];
        this.active = (this.playmode == 1) || (this.playmode == 2) || (this.playmode == 3) || (this.playmode == 4);
        this.tweened = this.properties[1]; // 0=Position|1=Size|2=Width|3=Height|4=Angle|5=Opacity|6=Value only|7=Horizontal|8=Vertical|9=Scale
        this.easing = this.properties[2];
        this.target = this.properties[3];
        this.targetmode = this.properties[4];
        this.useCurrent = false;
        if (this.targetmode === 1) this.target = "relative(" + this.target + ")";
        this.duration = this.properties[5];
        this.enforce = (this.properties[6] === 1);
        this.value = 0;
        this.tween_list = {};
        this.addToTweenList("default", this.tweened, this.easing, "current", this.target, this.duration, this.enforce);
        if (this.properties[0] === 1) this.startTween(0)
        if (this.properties[0] === 2) this.startTween(2)
        if (this.properties[0] === 3) this.startTween(3)
        if (this.properties[0] === 4) this.startTween(4)
    };
    behinstProto.parseCurrent = function(tweened, parseText) {
        if (parseText === undefined) parseText = "current";
        var parsed = trim(parseText);
        parseText = trim(parseText);
        var value = this.value;
        if (parseText === "current") {
            switch (tweened) {
                case 0:
                    parsed = this.inst.x + "," + this.inst.y;
                    break;
                case 1:
                    parsed = this.inst.width + "," + this.inst.height;
                    break;
                case 2:
                    parsed = this.inst.width + "," + this.inst.height;
                    break;
                case 3:
                    parsed = this.inst.width + "," + this.inst.height;
                    break;
                case 4:
                    parsed = cr.to_degrees(this.inst.angle) + "," + cr.to_degrees(this.inst.angle);
                    break;
                case 5:
                    parsed = (this.inst.opacity * 100) + "," + (this.inst.opacity * 100);
                    break;
                case 6:
                    parsed = value + "," + value;
                    break;
                case 7:
                    parsed = this.inst.x + "," + this.inst.y;
                    break;
                case 8:
                    parsed = this.inst.x + "," + this.inst.y;
                    break;
                case 9:
                    if (this.inst.curFrame !== undefined)
                        parsed = (this.inst.width / this.inst.curFrame.width) + "," + (this.inst.height / this.inst.curFrame.height)
                    else
                        parsed = "1,1";
                    break;
                default:
                    break;
            }
        }
        if (parseText.substring(0, 8) === "relative") {
            var param1 = parseText.match(/\((.*?)\)/);
            if (param1) {
                var relativex = parseFloat(param1[1].split(",")[0]);
                var relativey = parseFloat(param1[1].split(",")[1]);
            }
            if (isNaN(relativex)) relativex = 0;
            if (isNaN(relativey)) relativey = 0;
            switch (tweened) {
                case 0:
                    parsed = (this.inst.x + relativex) + "," + (this.inst.y + relativey);
                    break;
                case 1:
                    parsed = (this.inst.width + relativex) + "," + (this.inst.height + relativey);
                    break;
                case 2:
                    parsed = (this.inst.width + relativex) + "," + (this.inst.height + relativey);
                    break;
                case 3:
                    parsed = (this.inst.width + relativex) + "," + (this.inst.height + relativey);
                    break;
                case 4:
                    parsed = (cr.to_degrees(this.inst.angle) + relativex) + "," + (cr.to_degrees(this.inst.angle) + relativey);
                    break;
                case 5:
                    parsed = (this.inst.opacity * 100 + relativex) + "," + (this.inst.opacity * 100 + relativey);
                    break;
                case 6:
                    parsed = value + relativex + "," + value + relativex;
                    break;
                case 7:
                    parsed = (this.inst.x + relativex) + "," + (this.inst.y);
                    break;
                case 8:
                    parsed = (this.inst.x) + "," + (this.inst.y + relativex);
                    break;
                case 9:
                    parsed = (relativex) + "," + (relativey);
                    break;
                default:
                    break;
            }
        }
        return parsed;
    };
    behinstProto.addToTweenList = function(tname, tweened, easing, init, targ, duration, enforce) {
        init = this.parseCurrent(tweened, init);
        targ = this.parseCurrent(tweened, targ);
        if (this.tween_list[tname] !== undefined) {
            delete this.tween_list[tname]
        }
        this.tween_list[tname] = new TweenObject(tname, tweened, easing, init, targ, duration, enforce);
        this.tween_list[tname].dt = 0;
    };
    behinstProto.saveToJSON = function() {
        var v = JSON.stringify(this.tween_list["default"]);
        return {
            "playmode": this.playmode,
            "active": this.active,
            "tweened": this.tweened,
            "easing": this.easing,
            "target": this.target,
            "targetmode": this.targetmode,
            "useCurrent": this.useCurrent,
            "duration": this.duration,
            "enforce": this.enforce,
            "value": this.value,
            "tweenlist": JSON.stringify(this.tween_list["default"])
        };
    };
    TweenObject.Load = function(rawObj, tname, tweened, easing, init, targ, duration, enforce) {
        var obj = new TweenObject(tname, tweened, easing, init, targ, duration, enforce);
        for (var i in rawObj)
            obj[i] = rawObj[i];
        return obj;
    };
    behinstProto.loadFromJSON = function(o) {
        var x = JSON.parse(o["tweenlist"]);
        var tempObj = TweenObject.Load(x, x.name, x.tweened, x.easefunc, x.initialparam1 + "," + x.initialparam2, x.targetparam1 + "," + x.targetparam2, x.duration, x.enforce);
        this.tween_list["default"] = tempObj;
        this.playmode = o["playmode"];
        this.active = o["active"];
        this.movement = o["tweened"];
        this.easing = o["easing"];
        this.target = o["target"];
        this.targetmode = o["targetmode"];
        this.useCurrent = o["useCurrent"];
        this.duration = o["duration"];
        this.enforce = o["enforce"];
        this.value = o["value"];
    };
    behinstProto.setProgressTo = function(mark) {
        if (mark > 1.0) mark = 1.0;
        if (mark < 0.0) mark = 0.0;
        for (var i in this.tween_list) {
            var inst = this.tween_list[i];
            inst.lastKnownValue = 0;
            inst.lastKnownValue2 = 0;
            inst.state = 3;
            inst.progress = mark * inst.duration;
            var factor = inst.OnTick(0);
            this.updateTween(inst, factor);
        }
    }
    behinstProto.startTween = function(startMode) {
        for (var i in this.tween_list) {
            var inst = this.tween_list[i];
            if (this.useCurrent) {
                var init = this.parseCurrent(inst.tweened, "current");
                var target = this.parseCurrent(inst.tweened, this.target);
                inst.setInitial(init);
                inst.setTarget(target);
            }
            if (startMode === 0) {
                inst.progress = 0.000001;
                inst.lastKnownValue = 0;
                inst.lastKnownValue2 = 0;
                inst.onStart = true;
                inst.state = 1;
            }
            if (startMode === 1) {
                inst.state = inst.lastState;
            }
            if ((startMode === 2) || (startMode === 4)) {
                inst.progress = 0.000001;
                inst.lastKnownValue = 0;
                inst.lastKnownValue2 = 0;
                inst.onStart = true;
                if (startMode == 2) inst.state = 4; //state ping pong
                if (startMode == 4) inst.state = 6; //state flip flop
            }
            if (startMode === 3) {
                inst.progress = 0.000001;
                inst.lastKnownValue = 0;
                inst.lastKnownValue2 = 0;
                inst.onStart = true;
                inst.state = 5;
            }
        }
    }
    behinstProto.stopTween = function(stopMode) {
        for (var i in this.tween_list) {
            var inst = this.tween_list[i];
            if ((inst.state != 3) && (inst.state != 0)) //don't save paused/seek state
                inst.lastState = inst.state;
            if (stopMode === 1) inst.progress = 0.0;
            if (stopMode === 2) inst.progress = inst.duration;
            inst.state = 3;
            var factor = inst.OnTick(0);
            this.updateTween(inst, factor);
        }
    }
    behinstProto.reverseTween = function(reverseMode) {
        for (var i in this.tween_list) {
            var inst = this.tween_list[i];
            if (reverseMode === 1) {
                inst.progress = inst.duration;
                inst.lastKnownValue = 0;
                inst.lastKnownValue2 = 0;
                inst.onReverseStart = true;
            }
            inst.state = 2;
        }
    }
    behinstProto.updateTween = function(inst, factor) {
        if (inst.tweened === 0) {
            if (inst.enforce) {
                this.inst.x = inst.initialparam1 + (inst.targetparam1 - inst.initialparam1) * factor;
                this.inst.y = inst.initialparam2 + (inst.targetparam2 - inst.initialparam2) * factor;
            } else {
                this.inst.x += ((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue;
                this.inst.y += ((inst.targetparam2 - inst.initialparam2) * factor) - inst.lastKnownValue2;
                inst.lastKnownValue = ((inst.targetparam1 - inst.initialparam1) * factor);
                inst.lastKnownValue2 = ((inst.targetparam2 - inst.initialparam2) * factor);
            }
        } else if (inst.tweened === 1) {
            if (inst.enforce) {
                this.inst.width = (inst.initialparam1 + ((inst.targetparam1 - inst.initialparam1) * (factor)));
                this.inst.height = (inst.initialparam2 + ((inst.targetparam2 - inst.initialparam2) * (factor)));
            } else {
                this.inst.width += ((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue;
                this.inst.height += ((inst.targetparam2 - inst.initialparam2) * factor) - inst.lastKnownValue2;
                inst.lastKnownValue = ((inst.targetparam1 - inst.initialparam1) * factor);
                inst.lastKnownValue2 = ((inst.targetparam2 - inst.initialparam2) * factor);
            }
        } else if (inst.tweened === 2) {
            if (inst.enforce) {
                this.inst.width = (inst.initialparam1 + ((inst.targetparam1 - inst.initialparam1) * (factor)));
            } else {
                this.inst.width += ((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue;
                inst.lastKnownValue = ((inst.targetparam1 - inst.initialparam1) * factor);
            }
        } else if (inst.tweened === 3) {
            if (inst.enforce) {
                this.inst.height = (inst.initialparam2 + ((inst.targetparam2 - inst.initialparam2) * (factor)));
            } else {
                this.inst.height += ((inst.targetparam2 - inst.initialparam2) * factor) - inst.lastKnownValue2;
                inst.lastKnownValue2 = ((inst.targetparam2 - inst.initialparam2) * factor);
            }
        } else if (inst.tweened === 4) {
            if (inst.enforce) {
                var tangle = inst.initialparam1 + (inst.targetparam1 - inst.initialparam1) * factor;
                this.inst.angle = cr.clamp_angle(cr.to_radians(tangle));
            } else {
                var tangle = ((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue;
                this.inst.angle = cr.clamp_angle(this.inst.angle + cr.to_radians(tangle));
                inst.lastKnownValue = (inst.targetparam1 - inst.initialparam1) * factor;
            }
        } else if (inst.tweened === 5) {
            if (inst.enforce) {
                this.inst.opacity = (inst.initialparam1 + (inst.targetparam1 - inst.initialparam1) * factor) / 100;
            } else {
                this.inst.opacity += (((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue) / 100;
                inst.lastKnownValue = ((inst.targetparam1 - inst.initialparam1) * factor);
            }
        } else if (inst.tweened === 6) {
            if (inst.enforce) {
                this.value = (inst.initialparam1 + (inst.targetparam1 - inst.initialparam1) * factor);
            } else {
                this.value += (((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue);
                inst.lastKnownValue = ((inst.targetparam1 - inst.initialparam1) * factor);
            }
        } else if (inst.tweened === 7) {
            if (inst.enforce) {
                this.inst.x = inst.initialparam1 + (inst.targetparam1 - inst.initialparam1) * factor;
            } else {
                this.inst.x += ((inst.targetparam1 - inst.initialparam1) * factor) - inst.lastKnownValue;
                inst.lastKnownValue = ((inst.targetparam1 - inst.initialparam1) * factor);
            }
        } else if (inst.tweened === 8) {
            if (inst.enforce) {
                this.inst.y = inst.initialparam2 + (inst.targetparam2 - inst.initialparam2) * factor;
            } else {
                this.inst.y += ((inst.targetparam2 - inst.initialparam2) * factor) - inst.lastKnownValue2;
                inst.lastKnownValue2 = ((inst.targetparam2 - inst.initialparam2) * factor);
            }
        } else if (inst.tweened === 9) {
            var scalex = inst.initialparam1 + (inst.targetparam1 - inst.initialparam1) * factor;
            var scaley = inst.initialparam2 + (inst.targetparam2 - inst.initialparam2) * factor;
            if (this.inst.width < 0) scalex = inst.initialparam1 + (inst.targetparam1 + inst.initialparam1) * -factor;
            if (this.inst.height < 0) scaley = inst.initialparam2 + (inst.targetparam2 + inst.initialparam2) * -factor;
            if (inst.enforce) {
                this.inst.width = this.inst.curFrame.width * scalex;
                this.inst.height = this.inst.curFrame.height * scaley;
            } else {
                if (this.inst.width < 0) {
                    this.inst.width = scalex * (this.inst.width / (-1 + inst.lastKnownValue));
                    inst.lastKnownValue = scalex + 1
                } else {
                    this.inst.width = scalex * (this.inst.width / (1 + inst.lastKnownValue));
                    inst.lastKnownValue = scalex - 1;
                }
                if (this.inst.height < 0) {
                    this.inst.height = scaley * (this.inst.height / (-1 + inst.lastKnownValue2));
                    inst.lastKnownValue2 = scaley + 1
                } else {
                    this.inst.height = scaley * (this.inst.height / (1 + inst.lastKnownValue2));
                    inst.lastKnownValue2 = scaley - 1;
                }
            }
        }
        this.inst.set_bbox_changed();
    }
    behinstProto.tick = function() {
        var dt = this.runtime.getDt(this.inst);
        var inst = this.tween_list["default"];
        if (inst.state !== 0) {
            if (inst.onStart) {
                this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnStart, this.inst);
                inst.onStart = false;
            }
            if (inst.onReverseStart) {
                this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnReverseStart, this.inst);
                inst.onReverseStart = false;
            }
            this.active = (inst.state == 1) || (inst.state == 2) || (inst.state == 4) || (inst.state == 5) || (inst.state == 6);
            var factor = inst.OnTick(dt);
            this.updateTween(inst, factor);
            if (inst.onEnd) {
                this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnEnd, this.inst);
                inst.onEnd = false;
            }
            if (inst.onReverseEnd) {
                this.runtime.trigger(cr.behaviors.lunarray_LiteTween.prototype.cnds.OnReverseEnd, this.inst);
                inst.onReverseEnd = false;
            }
        }
    };
    behaviorProto.cnds = {};
    var cnds = behaviorProto.cnds;
    cnds.IsActive = function() {
        return (this.tween_list["default"].state !== 0);
    };
    cnds.IsReversing = function() {
        return (this.tween_list["default"].state == 2);
    };
    cnds.CompareProgress = function(cmp, v) {
        var inst = this.tween_list["default"];
        return cr.do_cmp((inst.progress / inst.duration), cmp, v);
    };
    cnds.OnThreshold = function(cmp, v) {
        var inst = this.tween_list["default"];
        this.threshold = (cr.do_cmp((inst.progress / inst.duration), cmp, v));
        var ret = (this.oldthreshold != this.threshold) && (this.threshold);
        if (ret) {
            this.oldthreshold = this.threshold;
        }
        return ret;
    };
    cnds.OnStart = function() {
        if (this.tween_list["default"] === undefined)
            return false;
        return this.tween_list["default"].onStart;
    };
    cnds.OnReverseStart = function() {
        if (this.tween_list["default"] === undefined)
            return false;
        return this.tween_list["default"].onReverseStart;
    };
    cnds.OnEnd = function() {
        if (this.tween_list["default"] === undefined)
            return false;
        return this.tween_list["default"].onEnd;
    };
    cnds.OnReverseEnd = function() {
        if (this.tween_list["default"] === undefined)
            return false;
        return this.tween_list["default"].onReverseEnd;
    };
    behaviorProto.acts = {};
    var acts = behaviorProto.acts;
    acts.Start = function(startmode, current) {
        this.threshold = false;
        this.oldthreshold = false;
        this.useCurrent = (current == 1);
        this.startTween(startmode);
    };
    acts.Stop = function(stopmode) {
        this.stopTween(stopmode);
    };
    acts.Reverse = function(revMode) {
        this.threshold = false;
        this.oldthreshold = false;
        this.reverseTween(revMode);
    };
    acts.ProgressTo = function(progress) {
        this.setProgressTo(progress);
    };
    acts.SetDuration = function(x) {
        if (isNaN(x)) return;
        if (x < 0) return;
        if (this.tween_list["default"] === undefined) return;
        this.tween_list["default"].duration = x;
    };
    acts.SetEnforce = function(x) {
        if (this.tween_list["default"] === undefined) return;
        this.tween_list["default"].enforce = (x === 1);
    };
    acts.SetInitial = function(x) {
        if (this.tween_list["default"] === undefined) return;
        var init = this.parseCurrent(this.tween_list["default"].tweened, x);
        this.tween_list["default"].setInitial(init);
    };
    acts.SetTarget = function(targettype, absrel, x) {
        if (this.tween_list["default"] === undefined) return;
        if (isNaN(x)) return;
        var inst = this.tween_list["default"];
        var parsed = x + "";
        this.targetmode = absrel;
        var x1 = "";
        var x2 = "";
        if (absrel === 1) {
            this.target = "relative(" + parsed + ")";
            switch (targettype) {
                case 0:
                    x1 = (this.inst.x + x);
                    x2 = inst.targetparam2;
                    break;
                case 1:
                    x1 = inst.targetparam1;
                    x2 = (this.inst.y + x);
                    break;
                case 2:
                    x1 = "" + cr.to_degrees(this.inst.angle + cr.to_radians(x));
                    x2 = x1;
                    break; //angle
                case 3:
                    x1 = "" + (this.inst.opacity * 100) + x;
                    x2 = x1;
                    break; //opacity
                case 4:
                    x1 = (this.inst.width + x);
                    x2 = inst.targetparam2;
                    break; //width
                case 5:
                    x1 = inst.targetparam1;
                    x2 = (this.inst.height + x);
                    break; //height
                case 6:
                    x1 = x;
                    x2 = x;
                    break; //value
                default:
                    break;
            }
            parsed = x1 + "," + x2;
        } else {
            switch (targettype) {
                case 0:
                    x1 = x;
                    x2 = inst.targetparam2;
                    break;
                case 1:
                    x1 = inst.targetparam1;
                    x2 = x;
                    break;
                case 2:
                    x1 = x;
                    x2 = x;
                    break; //angle
                case 3:
                    x1 = x;
                    x2 = x;
                    break; //opacity
                case 4:
                    x1 = x;
                    x2 = inst.targetparam2;
                    break; //width
                case 5:
                    x1 = inst.targetparam1;
                    x2 = x;
                    break; //height
                case 6:
                    x1 = x;
                    x2 = x;
                    break; //value
                default:
                    break;
            }
            parsed = x1 + "," + x2;
            this.target = parsed;
        }
        var init = this.parseCurrent(this.tween_list["default"].tweened, "current");
        var targ = this.parseCurrent(this.tween_list["default"].tweened, parsed);
        inst.setInitial(init);
        inst.setTarget(targ);
    };
    acts.SetTweenedProperty = function(x) {
        if (this.tween_list["default"] === undefined) return;
        this.tween_list["default"].tweened = x;
    };
    acts.SetEasing = function(x) {
        if (this.tween_list["default"] === undefined) return;
        this.tween_list["default"].easefunc = x;
    };
    acts.SetEasingParam = function(x, a, p, t, s) {
        if (this.tween_list["default"] === undefined) return;
        this.tween_list["default"].easingparam[x].optimized = false;
        this.tween_list["default"].easingparam[x].a = a;
        this.tween_list["default"].easingparam[x].p = p;
        this.tween_list["default"].easingparam[x].t = t;
        this.tween_list["default"].easingparam[x].s = s;
    };
    acts.ResetEasingParam = function() {
        if (this.tween_list["default"] === undefined) return;
        this.tween_list["default"].optimized = true;
    };
    acts.SetValue = function(x) {
        var inst = this.tween_list["default"];
        this.value = x;
        if (inst.tweened === 6)
            inst.setInitial(this.parseCurrent(inst.tweened, "current"));
    };
    acts.SetParameter = function(tweened, easefunction, target, duration, enforce) {
        if (this.tween_list["default"] === undefined) {
            this.addToTweenList("default", tweened, easefunction, initial, target, duration, enforce, 0);
        } else {
            var inst = this.tween_list["default"];
            inst.tweened = tweened;
            inst.easefunc = easefunction;
            inst.setInitial(this.parseCurrent(tweened, "current"));
            inst.setTarget(this.parseCurrent(tweened, target));
            inst.duration = duration;
            inst.enforce = (enforce === 1);
        }
    };
    behaviorProto.exps = {};
    var exps = behaviorProto.exps;
    exps.State = function(ret) {
        var parsed = "N/A";
        switch (this.tween_list["default"].state) {
            case 0:
                parsed = "paused";
                break;
            case 1:
                parsed = "playing";
                break;
            case 2:
                parsed = "reversing";
                break;
            case 3:
                parsed = "seeking";
                break;
            default:
                break;
        }
        ret.set_string(parsed);
    };
    exps.Progress = function(ret) {
        var progress = this.tween_list["default"].progress / this.tween_list["default"].duration;
        ret.set_float(progress);
    };
    exps.Duration = function(ret) {
        ret.set_float(this.tween_list["default"].duration);
    };
    exps.Target = function(ret) {
        var inst = this.tween_list["default"];
        var parsed = "N/A";
        switch (inst.tweened) {
            case 0:
                parsed = inst.targetparam1;
                break;
            case 1:
                parsed = inst.targetparam2;
                break;
            case 2:
                parsed = inst.targetparam1;
                break;
            case 3:
                parsed = inst.targetparam1;
                break;
            case 4:
                parsed = inst.targetparam1;
                break;
            case 5:
                parsed = inst.targetparam2;
                break;
            case 6:
                parsed = inst.targetparam1;
                break;
            default:
                break;
        }
        ret.set_float(parsed);
    };
    exps.Value = function(ret) {
        var tval = this.value;
        ret.set_float(tval);
    };
    exps.Tween = function(ret, a_, b_, x_, easefunc_) {
        var currX = (x_ > 1.0 ? 1.0 : x_);
        var factor = easeFunc(easefunc_, currX < 0.0 ? 0.0 : currX, 0.0, 1.0, 1.0, false, false);
        ret.set_float(a_ + factor * (b_ - a_));
    };
}());
cr.getObjectRefTable = function() {
    return [
        cr.plugins_.Audio,
        cr.plugins_.Arr,
        cr.plugins_.Browser,
        cr.plugins_.Function,
        cr.plugins_.gamemonetize,
        cr.plugins_.GD_SDK,
        cr.plugins_.Particles,
        cr.plugins_.Sprite,
        cr.plugins_.Spritefont2,
        cr.plugins_.LocalStorage,
        cr.plugins_.WebStorage,
        cr.plugins_.TiledBg,
        cr.plugins_.Tilemap,
        cr.plugins_.Touch,
        cr.behaviors.Sin,
        cr.behaviors.Bullet,
        cr.behaviors.Fade,
        cr.behaviors.Turret,
        cr.behaviors.LOS,
        cr.behaviors.lunarray_LiteTween,
        cr.behaviors.Pin,
        cr.behaviors.Anchor,
        cr.plugins_.Spritefont2.prototype.cnds.CompareInstanceVar,
        cr.plugins_.Spritefont2.prototype.acts.SetText,
        cr.system_object.prototype.cnds.OnLayoutStart,
        cr.plugins_.Sprite.prototype.acts.SetVisible,
        cr.plugins_.Sprite.prototype.acts.Destroy,
        cr.system_object.prototype.acts.SetGroupActive,
        cr.plugins_.Sprite.prototype.cnds.CompareInstanceVar,
        cr.system_object.prototype.cnds.Every,
        cr.system_object.prototype.acts.CreateObject,
        cr.system_object.prototype.exps.round,
        cr.system_object.prototype.exps.random,
        cr.plugins_.Sprite.prototype.acts.ZMoveToObject,
        cr.plugins_.Sprite.prototype.cnds.OnCollision,
        cr.system_object.prototype.cnds.IsGroupActive,
        cr.plugins_.Touch.prototype.cnds.OnTapGestureObject,
        cr.plugins_.Sprite.prototype.acts.SetPos,
        cr.plugins_.Audio.prototype.acts.Play,
        cr.plugins_.Sprite.prototype.acts.SetSize,
        cr.plugins_.Particles.prototype.acts.SetVisible,
        cr.system_object.prototype.acts.Wait,
        cr.plugins_.Spritefont2.prototype.acts.SetVisible,
        cr.plugins_.Sprite.prototype.acts.SetAnimFrame,
        cr.plugins_.Sprite.prototype.acts.SetInstanceVar,
        cr.plugins_.Particles.prototype.acts.SetPos,
        cr.system_object.prototype.cnds.TriggerOnce,
        cr.behaviors.Bullet.prototype.acts.SetEnabled,
        cr.behaviors.Bullet.prototype.acts.SetAngleOfMotion,
        cr.plugins_.Sprite.prototype.acts.SetPosToObject,
        cr.plugins_.Particles.prototype.acts.SetPosToObject,
        cr.plugins_.Spritefont2.prototype.cnds.OnCreated,
        cr.plugins_.Arr.prototype.acts.JSONLoad,
        cr.plugins_.Spritefont2.prototype.acts.SetCharacterWidth,
        cr.system_object.prototype.cnds.For,
        cr.plugins_.Arr.prototype.exps.Height,
        cr.plugins_.Arr.prototype.exps.At,
        cr.system_object.prototype.exps.loopindex,
        cr.system_object.prototype.cnds.CompareVar,
        cr.plugins_.Function.prototype.acts.CallFunction,
        cr.system_object.prototype.acts.SetVar,
        cr.system_object.prototype.acts.GoToLayout,
        cr.plugins_.Function.prototype.cnds.OnFunction,
        cr.plugins_.Audio.prototype.acts.StopAll,
        cr.plugins_.TiledBg.prototype.acts.SetVisible,
        cr.plugins_.LocalStorage.prototype.acts.SetItem,
        cr.system_object.prototype.acts.AddVar,
        cr.plugins_.Sprite.prototype.acts.AddInstanceVar,
        cr.plugins_.Spritefont2.prototype.acts.Destroy,
        cr.plugins_.Audio.prototype.acts.SetSilent,
        cr.plugins_.Audio.prototype.acts.PlayByName,
        cr.plugins_.GD_SDK.prototype.cnds.onPauseGame,
        cr.system_object.prototype.acts.SetTimescale,
        cr.plugins_.GD_SDK.prototype.cnds.onResumeGame,
        cr.plugins_.TiledBg.prototype.acts.SetWidth,
        cr.plugins_.Touch.prototype.cnds.IsInTouch,
        cr.system_object.prototype.cnds.EveryTick,
        cr.plugins_.Sprite.prototype.exps.Count,
        cr.plugins_.Sprite.prototype.acts.Spawn,
        cr.plugins_.Sprite.prototype.acts.SetEffect,
        cr.plugins_.Sprite.prototype.acts.RotateClockwise,
        cr.plugins_.TiledBg.prototype.acts.Destroy,
        cr.plugins_.Touch.prototype.cnds.IsTouchingObject,
        cr.plugins_.Touch.prototype.exps.X,
        cr.plugins_.Touch.prototype.exps.Y,
        cr.behaviors.Turret.prototype.acts.AcquireTarget,
        cr.plugins_.Sprite.prototype.acts.SetWidth,
        cr.behaviors.Bullet.prototype.acts.SetSpeed,
        cr.system_object.prototype.acts.RestartLayout,
        cr.behaviors.Bullet.prototype.cnds.CompareSpeed,
        cr.plugins_.GD_SDK.prototype.acts.ShowAd,
        cr.plugins_.Audio.prototype.acts.SetPaused,
        cr.plugins_.Particles.prototype.acts.Destroy,
        cr.plugins_.Sprite.prototype.exps.X,
        cr.plugins_.Sprite.prototype.exps.Y,
        cr.plugins_.Sprite.prototype.acts.SetMirrored,
        cr.behaviors.LOS.prototype.cnds.HasLOSToObject,
        cr.plugins_.Audio.prototype.acts.Stop,
        cr.behaviors.Fade.prototype.acts.StartFade,
        cr.plugins_.Sprite.prototype.exps.Angle,
        cr.plugins_.TiledBg.prototype.cnds.CompareWidth,
        cr.plugins_.LocalStorage.prototype.acts.CheckItemExists,
        cr.plugins_.LocalStorage.prototype.cnds.OnItemExists,
        cr.plugins_.LocalStorage.prototype.acts.GetItem,
        cr.plugins_.LocalStorage.prototype.cnds.OnItemGet,
        cr.plugins_.LocalStorage.prototype.exps.ItemValue,
        cr.plugins_.TiledBg.prototype.cnds.CompareInstanceVar,
        cr.system_object.prototype.exps.loadingprogress,
        cr.system_object.prototype.cnds.OnLoadFinished,
        cr.plugins_.TiledBg.prototype.acts.SetInstanceVar,
        cr.plugins_.GD_SDK.prototype.acts.InitAds,
        cr.plugins_.Audio.prototype.acts.Preload,
        cr.plugins_.Browser.prototype.acts.GoToURLWindow
    ];
};</script>

    <script>
        // Start the Construct 2 project running on window load.
        jQuery(document).ready(function() {
            // Create new runtime using the c2canvas
            cr_createRuntime("c2canvas");
        });

        // Pause and resume on page becoming visible/invisible
        function onVisibilityChanged() {
            if (document.hidden || document.mozHidden || document.webkitHidden || document.msHidden)
                cr_setSuspended(true);
            else
                cr_setSuspended(false);
        };

        document.addEventListener("visibilitychange", onVisibilityChanged, false);
        document.addEventListener("mozvisibilitychange", onVisibilityChanged, false);
        document.addEventListener("webkitvisibilitychange", onVisibilityChanged, false);
        document.addEventListener("msvisibilitychange", onVisibilityChanged, false);

        function OnRegisterSWError(e) {
            console.warn("Failed to register service worker: ", e);
        };

        // Runtime calls this global method when ready to start caching (i.e. after startup).
        // This registers the service worker which caches resources for offline support.
        window.C2_RegisterSW = function C2_RegisterSW() {
            if (!navigator.serviceWorker)
                return; // no SW support, ignore call

            try {
                navigator.serviceWorker.register("sw.js", {
                        scope: "./"
                    })
                    .then(function(reg) {
                        console.log("Registered service worker on " + reg.scope);
                    })
                    .catch(OnRegisterSWError);
            } catch (e) {
                OnRegisterSWError(e);
            }
        };
    </script>



</body>
